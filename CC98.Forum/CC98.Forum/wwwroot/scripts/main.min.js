!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=33)}([function(e,t){e.exports=React},function(e,t,n){"use strict";function r(e,t,n){return se(this,void 0,void 0,function(){var n,r,a,o,s,i,c,l,u,p,d,m,h,f;return ie(this,function(g){switch(g.label){case 0:return g.trys.push([0,5,,6]),n=w("accessToken"),r=20*(e-1),a=20*e-1,[4,fetch("http://apitest.niconi.cc/Board/"+t)];case 1:return o=g.sent(),o.status,o.status,[4,o.json()];case 2:return s=g.sent(),i=s.topicCount,c=void 0,c=20*e<=i?20:1===e&&i<19?i:i-20*(e-1),l=[],u="http://apitest.niconi.cc/Topic/Board/"+t+"?from="+r+"&size="+c,p=new Headers,p.append("Authorization",n),[4,fetch(u,{headers:p})];case 3:return d=g.sent(),d.status,d.status,d.status,[4,d.json()];case 4:for(m=g.sent(),h=0;h<c;h++)l[h]=oe({},m[h],{replyCount:m[h].replyCount||0});return[2,l];case 5:return f=g.sent(),console.error(f),[3,6];case 6:return[2]}})})}function a(e,t){return se(this,void 0,void 0,function(){var t,n,r,a,o,s,a,i,c,l,u,p,d,m,h,f,g;return ie(this,function(v){switch(v.label){case 0:return v.trys.push([0,15,,16]),t=w("accessToken"),n=new Headers,n.append("Authorization",t),[4,fetch("http://apitest.niconi.cc/Post/Topic/"+e+"?from=0&size=1",{headers:n})];case 1:return r=v.sent(),404!==r.status?[3,3]:[4,r.text()];case 2:a=v.sent(),v.label=3;case 3:return r.status,[4,r.json()];case 4:return o=v.sent(),[4,fetch("http://apitest.niconi.cc/Topic/"+e,{headers:n})];case 5:return s=v.sent(),404!==s.status?[3,7]:[4,s.text()];case 6:a=v.sent(),v.label=7;case 7:return s.status,s.status,[4,s.json()];case 8:return i=v.sent(),c=i.hitCount,l=i.boardId,[4,fetch("http://apitest.niconi.cc/board/"+l,{headers:n})];case 9:return u=v.sent(),[4,u.json()];case 10:return p=v.sent(),d=p.boardMasters,m=null,1==o[0].isAnonymous?[3,13]:[4,fetch("http://apitest.niconi.cc/User/"+o[0].userId,{headers:n})];case 11:return h=v.sent(),h.status,[4,h.json()];case 12:return f=v.sent(),m=new ce.TopicState(o[0].userName,o[0].title,o[0].content,o[0].time,f.signatureCode,f.portraitUrl||"https://www.cc98.org/pic/anonymous.gif",c,o[0].userId,o[0].likeCount,o[0].dislikeCount,o[0].id,o[0].isAnonymous,o[0].contentType,o[0].isFollowing,f.fanCount,d),[3,14];case 13:m=new ce.TopicState("匿名"+o[0].userName.toUpperCase(),o[0].title,o[0].content,o[0].time,"","https://www.cc98.org/pic/anonymous.gif",c,null,o[0].likeCount,o[0].dislikeCount,o[0].id,o[0].isAnonymous,o[0].contentType,o[0].isFollowing,-9898,d),v.label=14;case 14:return[2,m];case 15:return g=v.sent(),[3,16];case 16:return[2]}})})}function o(e,t,n){return se(this,void 0,void 0,function(){var n,r,a,o,s,i,c,l,u,p,d,m,h,f,g,v,y,b;return ie(this,function(E){switch(E.label){case 0:return E.trys.push([0,14,,15]),n=10*(t-1),r=10*t-1,a=w("accessToken"),o=new Headers,o.append("Authorization",a),1===t?[3,2]:[4,fetch("http://apitest.niconi.cc/Post/Topic/"+e+"?from="+n+"&size=10",{headers:o})];case 1:return i=E.sent(),[3,4];case 2:return[4,fetch("http://apitest.niconi.cc/Post/Topic/"+e+"?from=1&size=9",{headers:o})];case 3:i=E.sent(),E.label=4;case 4:return s=i,s.status,s.status,s.status,[4,fetch("http://apitest.niconi.cc/Topic/"+e,{headers:o})];case 5:return c=E.sent(),c.status,c.status,[4,c.json()];case 6:return l=E.sent(),u=l.replyCount,[4,s.json()];case 7:p=E.sent(),d=[],m=void 0,m=1!==t&&10*t<=u?10:1===t&&u>=9?9:1===t&&u<9?u:u-10*(t-1)+1,h=0,E.label=8;case 8:return h<m?1==p[h].isAnonymous?[3,11]:[4,fetch("http://apitest.niconi.cc/user/name/"+p[h].userName)]:[3,13];case 9:return f=E.sent(),f.status,[4,f.json()];case 10:return g=E.sent(),d[h]=oe({},p[h],g,{postId:p[h].id,userImgUrl:g.portraitUrl,sendTopicNumber:g.postCount,privilege:g.privilege,signature:g.signatureCode}),[3,12];case 11:v="https://www.cc98.org/pic/anonymous.gif",y="匿名"+p[h].userName.toUpperCase(),d[h]=oe({},p[h],{userName:y,userImgUrl:v,userId:null,signature:null,sendTopicNumber:null,postId:p[h].id,privilege:"匿名用户",isAnonymous:!0}),E.label=12;case 12:return h++,[3,8];case 13:return[2,d];case 14:return b=E.sent(),console.error(b),[3,15];case 15:return[2]}})})}function s(e,t,n){return se(this,void 0,void 0,function(){var n,r,a,o,s;return ie(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),n=w("accessToken"),r=new Headers,r.append("Authorization",n),[4,fetch("http://apitest.niconi.cc/post/userlike?topicid="+e+"&postid="+t,{method:"POST",headers:r})];case 1:return a=i.sent(),a.status,a.status,a.status,a.status,[4,a.json()];case 2:return o=i.sent(),[2,o];case 3:return s=i.sent(),[3,4];case 4:return[2]}})})}function i(e,t,n){return se(this,void 0,void 0,function(){var n,r,a,o,s;return ie(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),n=w("accessToken"),r=new Headers,r.append("Authorization",n),[4,fetch("http://apitest.niconi.cc/post/userdislike?topicid="+e+"&postid="+t,{method:"POST",headers:r})];case 1:return a=i.sent(),a.status,a.status,a.status,a.status,[4,a.json()];case 2:return o=i.sent(),[2,o];case 3:return s=i.sent(),[3,4];case 4:return[2]}})})}function c(e,t,n){return se(this,void 0,void 0,function(){var n,r,a,o,s;return ie(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),n=w("accessToken"),r=new Headers,r.append("Authorization",n),[4,fetch("http://apitest.niconi.cc/likeState?topicid="+e+"&postid="+t,{headers:r})];case 1:return a=i.sent(),a.status,a.status,a.status,a.status,[4,a.json()];case 2:return o=i.sent(),[2,o];case 3:return s=i.sent(),[3,4];case 4:return[2]}})})}function l(e,t){return se(this,void 0,void 0,function(){var t,n,r,a,o,s,i,c,l,u,p,d,m;return ie(this,function(h){switch(h.label){case 0:return h.trys.push([0,9,,10]),t=w("accessToken"),n=new Headers,n.append("Authorization",t),[4,fetch("http://apitest.niconi.cc/Post/Topic/Hot/"+e,{headers:n})];case 1:return r=h.sent(),r.status,r.status,r.status,[4,r.json()];case 2:a=h.sent(),o=[],s=a.length,i=0,h.label=3;case 3:return i<s?1==a[i].isAnonymous?[3,6]:[4,fetch("http://apitest.niconi.cc/user/name/"+a[i].userName)]:[3,8];case 4:return c=h.sent(),c.status,[4,c.json()];case 5:return l=h.sent(),o[i]=oe({},a[i],l),[3,7];case 6:u="https://www.cc98.org/pic/anonymous.gif",p="匿名"+a[i].userName.toUpperCase(),d="匿名"+a[i].lastUpdateAuthor.toUpperCase(),o[i]=oe({},a[i],{userName:p,userImgUrl:u,userId:null,lastUpdateAuthor:d,signature:null,sendTopicNumber:null}),h.label=7;case 7:return i++,[3,3];case 8:return[2,o];case 9:return m=h.sent(),[3,10];case 10:return[2]}})})}function u(e){return 1===e?[]:2===e?[1,2]:3===e?[1,2,3]:4===e?[1,2,3,4]:5===e?[1,2,3,4,5]:6===e?[1,2,3,4,5,6]:7===e?[1,2,3,4,5,6,7]:[1,2,3,4,-1,e-3,e-2,e-1]}function p(e){return le.createElement(ue.TopicTitleAndContent,{key:e.id,title:e.title,userName:e.userName,id:e.id,userId:e.userId,lastPostTime:e.lastPostTime,lastPostUser:e.lastPostUser,likeCount:e.likeCount,dislikeCount:e.dislikeCount,replyCount:e.replyCount,highlightInfo:e.highlightInfo,topState:e.topState,topicState:e.topicState,hitCount:e.hitCount})}function d(e,t){void 0==e&&(e=1);var n=[];if(1==t)n=[1];else if(t<10&&t>1)if(void 0==e||1==e){var r=void 0;for(r=0;r<t;r++)n[r]=r+1;n[r]=-2,n[r+1]=-4}else if(2==e){var r=void 0;for(r=1;r<=t;r++)n[r]=r;n[0]=-1,n[r]=-2,n[r+1]=-4}else if(e!=t){var r=void 0;for(r=2;r<=t+1;r++)n[r]=r-1;n[0]=-3,n[1]=-1,n[r]=-2,n[r+1]=-4}else{var r=void 0;for(r=2;r<=t+1;r++)n[r]=r-1;n[0]=-3,n[1]=-1}else if(e+5<=t)n=void 0==e||1==e?[1,2,3,4,5,6,7,8,9,10,-2,-4]:e>1&&e<6?[-3,-1,1,2,3,4,5,6,7,8,9,10,-2,-4]:[-3,-1,e-4,e-3,e-2,e-1,e,e+1,e+2,e+3,e+4,e+5,-2,-4];else{if(e+5>t&&e!=t)return[-3,-1,t-9,t-8,t-7,t-6,t-5,t-4,t-3,t-2,t-1,t,-2,-4];if(e==t)return[-3,-1,t-9,t-8,t-7,t-6,t-5,t-4,t-3,t-2,t-1,t]}return n}function m(e,t,n){return se(this,void 0,void 0,function(){var n,r,a,o,s,i,c;return ie(this,function(l){switch(l.label){case 0:return l.trys.push([0,5,,6]),n=w("accessToken"),r=new Headers,r.append("Authorization",n),[4,fetch("http://apitest.niconi.cc/post/Topic/user?topicid="+e+"&userid="+t+"&from=0&size=1",{headers:r})];case 1:return a=l.sent(),a.status,a.status,a.status,[4,a.json()];case 2:return o=l.sent(),[4,fetch("http://apitest.niconi.cc/user/name/"+o[0].userName)];case 3:return s=l.sent(),s.status,s.status,[4,s.json()];case 4:return i=l.sent(),o[0].userImgUrl=i.portraitUrl,[2,o[0]];case 5:return c=l.sent(),[3,6];case 6:return[2]}})})}function h(e,t,n,r,o){return se(this,void 0,void 0,function(){var s,i,c,l,u,p,d,m,h,f,g,v,y,b,E,N;return ie(this,function(_){switch(_.label){case 0:return _.trys.push([0,10,,11]),[4,a(e,o)];case 1:return s=_.sent(),i=void 0,c=void 0,s.userName===n?(c=!0,i=1===t?10*(t-1)+1:10*(t-1)):(c=!1,i=10*(t-1)),l=w("accessToken"),u=new Headers,u.append("Authorization",l),[4,fetch("http://apitest.niconi.cc/Post/Topic/user?topicid="+e+"&userId="+r+"&from="+i+"&size=10",{headers:u})];case 2:return p=_.sent(),p.status,p.status,p.status,[4,p.json()];case 3:d=_.sent(),m=[],h=void 0,f=d[0].count,h=1!==t&&10*t<=f?10:1===t&&f>=9&&1==c?9:1===t&&f>=9&&0==c?10:1===t&&f<9?f:f-10*(t-1),g=0,_.label=4;case 4:return g<h?1==d[g].isAnonymous?[3,7]:[4,fetch("http://apitest.niconi.cc/user/name/"+d[g].userName)]:[3,9];case 5:return v=_.sent(),v.status,[4,v.json()];case 6:return y=_.sent(),m[g]=oe({},d[g],y,{postId:d[g].id,userImgUrl:y.portraitUrl,sendTopicNumber:y.postCount}),[3,8];case 7:b="https://www.cc98.org/pic/anonymous.gif",E="匿名"+d[g].userName.toUpperCase(),m[g]=oe({},d[g],{userName:E,userImgUrl:b,userId:null,signature:null,sendTopicNumber:null}),_.label=8;case 8:return g++,[3,4];case 9:return[2,m];case 10:return N=_.sent(),[3,11];case 11:return[2]}})})}function f(e,t){return se(this,void 0,void 0,function(){var n,r,a,o,s,i,c,l,u,p,d,m,h,f,g,g,g,g,v;return ie(this,function(y){switch(y.label){case 0:return y.trys.push([0,12,,13]),n=20,e>80&&(n=100-e),r=w("accessToken"),a=new Headers,a.append("Authorization",r),[4,fetch("http://apitest.niconi.cc/topic/new?from="+e+"&size="+n,{headers:a})];case 1:return o=y.sent(),o.status,o.status,[4,o.json()];case 2:s=y.sent(),i=[];for(c in s)i.push(c);l=0,y.label=3;case 3:return l<i.length?(u=i[l],s[u].userId?[4,fetch("http://apitest.niconi.cc/user/follow/fanCount?userid="+s[u].userId)]:[3,9]):[3,11];case 4:return p=y.sent(),p.status,p.status,[4,p.json()];case 5:return d=y.sent(),s[u].fanCount=d,[4,fetch("http://apitest.niconi.cc/user/basic/"+s[u].userId)];case 6:return m=y.sent(),m.status,m.status,[4,m.json()];case 7:return h=y.sent(),s[u].portraitUrl=h.portraitUrl,f=s[u],[4,C(s[u].boardId,t)];case 8:return f.boardName=y.sent(),s[u].hitCount>1e4&&(s[u].hitCount>1e5?(g=parseInt(""+s[u].hitCount/1e4),s[u].hitCount=g+"万"):(g=parseInt(""+s[u].hitCount/1e3)/10,s[u].hitCount=g+"万")),s[u].replyCount>1e4&&(s[u].replyCount>1e5?(g=parseInt(""+s[u].replyCount/1e4),s[u].replyCount=g+"万"):(g=parseInt(""+s[u].replyCount/1e3)/10,s[u].replyCount=g+"万")),[3,10];case 9:s[u].fanCount=0,s[u].portraitUrl="http://www.cc98.org/pic/anonymous.gif",s[u].userName="匿名",s[u].boardName="心灵之约",y.label=10;case 10:return l++,[3,3];case 11:return[2,s];case 12:return v=y.sent(),[3,13];case 13:return[2]}})})}function g(e,t,n,r){return se(this,void 0,void 0,function(){var a,o,s,i,c,l,u,p,d,m,h,f,g,v,y,y,y,y,b;return ie(this,function(E){switch(E.label){case 0:return E.trys.push([0,17,,18]),a=20,n>80&&(a=100-n),o=w("accessToken"),s=new Headers,s.append("Authorization",o),i=void 0,0!=e?[3,2]:[4,fetch("http://apitest.niconi.cc/topic/followusers?from="+n+"&size="+a,{headers:s})];case 1:return i=E.sent(),[3,4];case 2:return[4,fetch("http://apitest.niconi.cc/topic/board/"+e+"?from="+n+"&size="+a,{headers:s})];case 3:i=E.sent(),E.label=4;case 4:return i.status,i.status,[4,i.json()];case 5:c=E.sent(),l=[];for(u in c)l.push(u);p=0,E.label=6;case 6:return p<l.length?(d=l[p],c[d].userId?[4,fetch("http://apitest.niconi.cc/user/follow/fanCount?userid="+c[d].userId)]:[3,14]):[3,16];case 7:return m=E.sent(),m.status,m.status,[4,m.json()];case 8:return h=E.sent(),c[d].fanCount=h,[4,fetch("http://apitest.niconi.cc/user/basic/"+c[d].userId)];case 9:return f=E.sent(),f.status,f.status,[4,f.json()];case 10:return g=E.sent(),(c[d].portraitUrl=g.portraitUrl,0!=e)?[3,12]:(v=c[d],[4,C(c[d].boardId,r)]);case 11:return v.boardName=E.sent(),[3,13];case 12:c[d].boardName=t,E.label=13;case 13:return c[d].hitCount>1e4&&(c[d].hitCount>1e5?(y=parseInt(""+c[d].hitCount/1e4),c[d].hitCount=y+"万"):(y=parseInt(""+c[d].hitCount/1e3)/10,c[d].hitCount=y+"万")),c[d].replyCount>1e4&&(c[d].replyCount>1e5?(y=parseInt(""+c[d].replyCount/1e4),c[d].replyCount=y+"万"):(y=parseInt(""+c[d].replyCount/1e3)/10,c[d].replyCount=y+"万")),[3,15];case 14:c[d].fanCount=0,c[d].portraitUrl="http://www.cc98.org/pic/anonymous.gif",c[d].userName="匿名",c[d].boardName="心灵之约",E.label=15;case 15:return p++,[3,6];case 16:return[2,c];case 17:return b=E.sent(),[3,18];case 18:return[2]}})})}function v(e,t){return se(this,void 0,void 0,function(){var n,r,a,o,s,i,c,l,u,p,d,m,h,f,g,g,g,g,v;return ie(this,function(y){switch(y.label){case 0:return y.trys.push([0,12,,13]),n=20,e>80&&(n=100-e),r=w("accessToken"),a=new Headers,a.append("Authorization",r),[4,fetch("http://apitest.niconi.cc/topic/customboards?from="+e+"&size="+n,{headers:a})];case 1:return o=y.sent(),o.status,o.status,[4,o.json()];case 2:s=y.sent(),i=[];for(c in s)i.push(c);l=0,y.label=3;case 3:return l<i.length?(u=i[l],s[u].userId?[4,fetch("http://apitest.niconi.cc/user/follow/fanCount?userid="+s[u].userId)]:[3,9]):[3,11];case 4:return p=y.sent(),p.status,p.status,[4,p.json()];case 5:return d=y.sent(),s[u].fanCount=d,[4,fetch("http://apitest.niconi.cc/user/basic/"+s[u].userId)];case 6:return m=y.sent(),m.status,m.status,[4,m.json()];case 7:return h=y.sent(),s[u].portraitUrl=h.portraitUrl,f=s[u],[4,C(s[u].boardId,t)];case 8:return f.boardName=y.sent(),s[u].hitCount>1e4&&(s[u].hitCount>1e5?(g=parseInt(""+s[u].hitCount/1e4),s[u].hitCount=g+"万"):(g=parseInt(""+s[u].hitCount/1e3)/10,s[u].hitCount=g+"万")),s[u].replyCount>1e4&&(s[u].replyCount>1e5?(g=parseInt(""+s[u].replyCount/1e4),s[u].replyCount=g+"万"):(g=parseInt(""+s[u].replyCount/1e3)/10,s[u].replyCount=g+"万")),[3,10];case 9:s[u].fanCount=0,s[u].portraitUrl="http://www.cc98.org/pic/anonymous.gif",s[u].userName="匿名",s[u].boardName="心灵之约",y.label=10;case 10:return l++,[3,3];case 11:return[2,s];case 12:return v=y.sent(),[3,13];case 13:return[2]}})})}function y(e,t){var n=t;"object"==typeof n?(n=JSON.stringify(n),n="obj-"+n):n="str-"+n,sessionStorage.setItem(e,n)}function b(e){var t=sessionStorage.getItem(e);if(t)return 0===t.indexOf("obj-")?(t=t.slice(4),JSON.parse(t)):0===t.indexOf("str-")?t.slice(4):void 0}function E(e,t,n){void 0===n&&(n=0);var r=t;if("object"==typeof r?(r=JSON.stringify(r),r="obj-"+r):r="str-"+r,localStorage.setItem(e,r),0!==n){var a=(new Date).getTime(),o=a+1e3*n;localStorage.setItem(e+"_expirationTime",o.toString().slice(0,o.toString().length-3))}else localStorage.removeItem(e+"_expirationTime")}function w(e){var t=localStorage.getItem(e),n=localStorage.getItem(e+"_expirationTime");if(n){if((new Date).getTime()>1e3*Number.parseInt(n))return void localStorage.removeItem(e)}if(t)return 0===t.indexOf("obj-")?(t=t.slice(4),JSON.parse(t)):0===t.indexOf("str-")?t.slice(4):void 0}function N(e){"all"!=e?localStorage.removeItem(e):localStorage.clear()}function _(e){"all"!=e?sessionStorage.removeItem(e):sessionStorage.clear()}function C(e,t){return se(this,void 0,void 0,function(){var t,n,r,a,o,s,i;return ie(this,function(c){switch(c.label){case 0:return c.trys.push([0,4,,5]),(t=void 0,t=w("boardId_"+e))?[3,3]:(n=w("accessToken"),r=new Headers,r.append("Authorization",n),a="http://apitest.niconi.cc/board/"+e,[4,fetch(a,{headers:r})]);case 1:return o=c.sent(),o.status,o.status,[4,o.json()];case 2:s=c.sent(),t=s.name,E("boardId_"+e,t),c.label=3;case 3:return[2,t];case 4:return i=c.sent(),[3,5];case 5:return[2]}})})}function I(){return!!w("accessToken")}function S(e,t,n){return se(this,void 0,void 0,function(){var r,a,o,s,i,c,l,u,p,d,m,c,h,f;return ie(this,function(g){switch(g.label){case 0:return g.trys.push([0,9,,10]),r=w("accessToken"),a=new Headers,a.append("Authorization",r),[4,fetch("http://apitest.niconi.cc/message/recentcontactusers?from="+e+"&size="+t,{headers:a})];case 1:return o=g.sent(),o.status,o.status,[4,o.json()];case 2:s=g.sent(),i="http://apitest.niconi.cc/user/basic";for(c in s)i="0"==c?i+"?id="+s[c]:i+"&id="+s[c];return[4,fetch(i)];case 3:return l=g.sent(),l.status,l.status,[4,l.json()];case 4:u=g.sent(),p=[];for(d in u)p.push(d);m=0,g.label=5;case 5:return m<p.length?(c=p[m],h=u[c],[4,T(u[c].id,0,10,n)]):[3,8];case 6:h.message=g.sent(),g.label=7;case 7:return m++,[3,5];case 8:return console.log(u),[2,u];case 9:return f=g.sent(),[3,10];case 10:return[2]}})})}function T(e,t,n,r){return se(this,void 0,void 0,function(){var r,a,o,s,i,c;return ie(this,function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),r=w("accessToken"),a=new Headers,a.append("Authorization",r),[4,fetch("http://apitest.niconi.cc/message/"+e+"?from="+t+"&size="+n,{headers:a})];case 1:return o=l.sent(),o.status,o.status,[4,o.json()];case 2:return s=l.sent(),console.log("直接获取到的Message"),console.log(s),i=k(s),[2,i];case 3:return c=l.sent(),[3,4];case 4:return[2]}})})}function k(e){if(console.log(e),e!=[]&&e){for(var t=0;t<e.length;t++)t+1==e.length?e[t].showTime=!0:P(e[t].time)-P(e[t+1].time)<6e4?e[t].showTime=!1:e[t].showTime=!0;return console.log("返回的recentMessage"),console.log(e),e}return e}function P(e){var t=moment(e).format("YYYY-MM-DD HH:mm:ss"),n=t.replace(/-/g,"/");return new Date(n).getTime()}function x(e,t){return se(this,void 0,void 0,function(){var n,r,a,o,s,i,c,l,u,p,d,m,a,o,h,f,c,g,i,v,p;return ie(this,function(y){switch(y.label){case 0:if(!(n=location.href.match(/id=(\S+)/)))return[3,10];for(r=parseInt(n[1]),a=0;a<e.length&&e[a].id!=r;a++);return 0!=a?[3,1]:[3,9];case 1:return a<e.length?(o=e[a],e.splice(a,1),e.unshift(o),[3,9]):[3,2];case 2:s=void 0,i=void 0,c=1,y.label=3;case 3:return y.trys.push([3,6,,7]),[4,fetch("http://apitest.niconi.cc/user/basic/"+r)];case 4:return s=y.sent(),s.status,s.status,[4,s.json()];case 5:return i=y.sent(),[3,7];case 6:return l=y.sent(),c=0,[3,7];case 7:return 1!=c?[3,9]:(u=i,[4,T(r,0,10,t)]);case 8:u.message=y.sent(),p=[i],e=p.concat(e),y.label=9;case 9:return[3,19];case 10:if(!(d=location.href.match(/name=(\S+)/)))return[3,19];for(m=d[1],a=0;a<e.length&&e[a].name!=m;a++);return 0!=a?[3,11]:[3,19];case 11:return a<e.length?(o=e[a],e.splice(a,1),e.unshift(o),[3,19]):[3,12];case 12:h=void 0,f=void 0,c=1,y.label=13;case 13:return y.trys.push([13,16,,17]),[4,fetch("http://apitest.niconi.cc/user/name/"+m)];case 14:return h=y.sent(),h.status,h.status,[4,h.json()];case 15:return f=y.sent(),[3,17];case 16:return g=y.sent(),c=0,[3,17];case 17:return 1!=c?[3,19]:(i={id:null,name:"",portraitUrl:"",message:[]},i.id=f.id,i.name=f.name,i.portraitUrl=f.portraitUrl,v=i,[4,T(i.id,0,10,t)]);case 18:v.message=y.sent(),p=[i],e=p.concat(e),y.label=19;case 19:return[2,e]}})})}function O(e,t){return se(this,void 0,void 0,function(){var t,n,r,a,o,s;return ie(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t=w("accessToken"),n=new Headers,n.append("Authorization",t),[4,fetch("http://apitest.niconi.cc/Topic/"+e,{headers:n})];case 1:return r=i.sent(),r.status,r.status,r.status,[4,r.json()];case 2:return a=i.sent(),o=a.replyCount,o>=10?[2,(o-o%10)/10+1]:[2,1];case 3:return s=i.sent(),[3,4];case 4:return[2]}})})}function j(e,t){return se(this,void 0,void 0,function(){var t,n,r,a,o,s,i,c,l,u,p;return ie(this,function(d){switch(d.label){case 0:return d.trys.push([0,5,,6]),t=w("accessToken"),n=new Headers,n.append("Authorization",t),[4,fetch("http://apitest.niconi.cc/Topic/"+e,{headers:n})];case 1:return r=d.sent(),r.status,r.status,r.status,[4,r.json()];case 2:return a=d.sent(),o=a.title,s=a.boardId,[4,fetch("http://apitest.niconi.cc/Board/"+s,{headers:n})];case 3:return i=d.sent(),[4,i.json()];case 4:return c=d.sent(),l=c.name,u={boardId:s,topicId:e,boardName:l,title:o},[2,u];case 5:return p=d.sent(),[3,6];case 6:return[2]}})})}function M(e,t){return se(this,void 0,void 0,function(){var t,n,r,a,o,s,i;return ie(this,function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),t=w("accessToken"),n=new Headers,n.append("Authorization",t),r="http://apitest.niconi.cc/user/name/"+e,[4,fetch(r,{headers:n})];case 1:return a=c.sent(),404===a.status?[2,null]:500===a.status?[2,null]:[4,a.json()];case 2:return o=c.sent(),s={portraitUrl:o.portraitUrl,userName:o.name,fanCount:o.fanCount,displayTitle:o.displayTitle,birthday:o.birthday,prestige:o.prestige,gender:o.gender,levelTitle:o.levelTitle,isFollowing:o.isFollowing},[2,s];case 3:return i=c.sent(),[3,4];case 4:return[2]}})})}function U(e,t){return se(this,void 0,void 0,function(){var n,r,o,s,i,c,l;return ie(this,function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),n=w("accessToken"),r=new Headers,r.append("Authorization",n),[4,a(e,t)];case 1:return o=u.sent(),s=o.postId,[4,fetch("http://apitest.niconi.cc/post/likestate?topicid="+e+"&postid="+s,{headers:r})];case 2:return i=u.sent(),i.status,i.status,i.status,500!==i.status?[3,3]:[3,5];case 3:return[4,i.json()];case 4:return c=u.sent(),[2,c];case 5:return[3,7];case 6:return l=u.sent(),[3,7];case 7:return[2]}})})}function L(e,t,n){return se(this,void 0,void 0,function(){var n,r,a,o,s;return ie(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),n=w("accessToken"),r=new Headers,r.append("Authorization",n),[4,fetch("http://apitest.niconi.cc/post/likestate?topicid="+e+"&postid="+t,{headers:r})];case 1:return a=i.sent(),a.status,a.status,a.status,a.status,[4,a.json()];case 2:return o=i.sent(),[2,o];case 3:return s=i.sent(),[3,4];case 4:return[2]}})})}function A(e,t){return se(this,void 0,void 0,function(){var t,n,r,a,o,s,i,c;return ie(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),t="http://apitest.niconi.cc/post/topic/"+e,n=testEditor.getMarkdown(),r={content:n,contentType:1,title:""},a=JSON.stringify(r),o=w("accessToken"),s=new Headers,s.append("Authorization",o),s.append("Content-Type","application/json"),[4,fetch(t,{method:"POST",headers:s,body:a})];case 1:return i=l.sent(),i.status,i.status,i.status,i.status,i.status,[3,3];case 2:return c=l.sent(),[3,3];case 3:return[2]}})})}function R(e,t){return se(this,void 0,void 0,function(){var t,n,r,a,o,s;return ie(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t=w("accessToken"),n=new Headers,n.append("Authorization",t),[4,fetch("http://apitest.niconi.cc/Board/"+e,{headers:n})];case 1:return r=i.sent(),r.status,r.status,[4,r.json()];case 2:return a=i.sent(),o=a.name,[2,o];case 3:return s=i.sent(),[3,4];case 4:return[2]}})})}function H(e,t){return se(this,void 0,void 0,function(){var t,n,r,a,o,s;return ie(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t=w("accessToken"),n=new Headers,n.append("Authorization",t),r="http://apitest.niconi.cc/Board/"+e,[4,fetch(r,{headers:n})];case 1:return a=i.sent(),a.status,a.status,[4,a.json()];case 2:return o=i.sent(),[2,o];case 3:return s=i.sent(),[3,4];case 4:return[2]}})})}function D(e,t){return se(this,void 0,void 0,function(){var t,n,r,a,o,s;return ie(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t=w("accessToken"),n=new Headers,n.append("Authorization",t),[4,fetch("http://apitest.niconi.cc/Board/"+e,{headers:n})];case 1:return r=i.sent(),r.status,r.status,[4,r.json()];case 2:return a=i.sent(),o=a.topicCount,[2,(o-o%20)/20+1];case 3:return s=i.sent(),[3,4];case 4:return[2]}})})}function B(e,t,n){return se(this,void 0,void 0,function(){var r,a,o,s,i,c,l,u,p,d;return ie(this,function(m){switch(m.label){case 0:return m.trys.push([0,4,,5]),r=w("accessToken"),a=new Headers,a.append("Authorization",r),[4,fetch("http://apitest.niconi.cc/Board/"+e,{headers:a})];case 1:return o=m.sent(),o.status,o.status,[4,o.json()];case 2:return s=m.sent(),i=s.bigPaper,c=void 0,c=t?parseInt(t):1,l=e,[4,D(l,n)];case 3:return u=m.sent(),p={bigPaper:i,totalPage:u,page:c},[2,p];case 4:return d=m.sent(),[3,5];case 5:return[2]}})})}function F(e,t,n){return se(this,void 0,void 0,function(){var n,r,a,o,s,i;return ie(this,function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),n=w("accessToken"),r=new Headers,r.append("Authorization",n),[4,fetch("http://apitest.niconi.cc/post/topic/user?topicid="+e+"&userid="+t+"&from=0&size=1",{headers:r})];case 1:return a=c.sent(),a.status,a.status,a.status,[4,a.json()];case 2:return o=c.sent(),s=o[0].count,s>10?[2,(s-s%10)/10+1]:[2,1];case 3:return i=c.sent(),[3,4];case 4:return[2]}})})}function z(e,t){return se(this,void 0,void 0,function(){var t,n,r;return ie(this,function(a){switch(a.label){case 0:return t=w("accessToken"),n=new Headers,n.append("Authorization",t),n.append("content-type","application/json"),[4,fetch("http://apitest.niconi.cc/message/send",{method:"POST",headers:n,body:e})];case 1:return r=a.sent(),r.status,r.status,[2,r]}})})}function W(){var e=0,t=0;return document.body&&(e=document.body.scrollTop),document.documentElement&&(t=document.documentElement.scrollTop),e-t>0?e:t}function Y(){var e=0,t=0;return document.body&&(e=document.body.scrollHeight),document.documentElement&&(t=document.documentElement.scrollHeight),e-t>0?e:t}function $(){return"CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight}function G(){return W()+$()+300>Y()}function q(e){return se(this,void 0,void 0,function(){var t,n,r,a,o,s,i;return ie(this,function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),t="http://apitest.niconi.cc/file",n=w("accessToken"),r=new Headers,r.append("Authorization",n),a=new FormData,a.append("files",e,e.name),a.append("contentType","multipart/form-data"),[4,fetch(t,{method:"POST",headers:r,body:a})];case 1:return o=c.sent(),[4,o.json()];case 2:if(s=c.sent(),200===o.status&&0!==s.length)return[2,{isSuccess:!0,content:s[0]}];throw{};case 3:return i=c.sent(),[2,{isSuccess:!1,content:""}];case 4:return[2]}})})}function V(e){return se(this,void 0,void 0,function(){var t,n,r,a,o;return ie(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t=w("accessToken"),n="http://apitest.niconi.cc/user/follow/"+e,r=new Headers,r.append("Authorization",t),[4,fetch(n,{method:"POST",headers:r})];case 1:if(a=s.sent(),200===a.status)return[2,!0];throw{};case 2:return o=s.sent(),[2,!1];case 3:return[2]}})})}function Q(e){return se(this,void 0,void 0,function(){var t,n,r,a,o;return ie(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t=w("accessToken"),n="http://apitest.niconi.cc/user/unfollow/"+e,r=new Headers,r.append("Authorization",t),[4,fetch(n,{method:"DELETE",headers:r})];case 1:if(a=s.sent(),200===a.status)return[2,!0];throw{};case 2:return o=s.sent(),[2,!1];case 3:return[2]}})})}function J(e){return se(this,void 0,void 0,function(){var t,n,r,a,o,s,i,i,c,l;return ie(this,function(u){switch(u.label){case 0:return t=w("accessToken"),n=new Headers,n.append("Authorization",t),r="http://apitest.niconi.cc/topic/toptopics?boardid="+e,[4,fetch(r,{headers:n})];case 1:return a=u.sent(),[4,a.json()];case 2:for(o=u.sent(),console.log(o),s=[],i=0;i<o.length;i++)s[i]=oe({},o[i],{replyCount:o[i].replyCount||0});for(i=0;i<s.length-1;i++)for(c=0;c<s.length-1-i;c++)s[c].topState<=s[c+1].topState&&(console.log("in"),l=s[c],s[c]=s[c+1],s[c+1]=l);return console.log(s),[2,s]}})})}function X(e,t){return se(this,void 0,void 0,function(){var n,r,a,o,s,i,c,l,u,p;return ie(this,function(d){switch(d.label){case 0:return n=20*(e-1),r="http://apitest.niconi.cc/topic/best/board/"+t+"?from="+n+"&size=20",a=w("accessToken"),o=new Headers,o.append("Authorization",a),[4,fetch(r,{headers:o})];case 1:return s=d.sent(),[4,s.json()];case 2:for(i=d.sent(),c=[],l=0;l<i.topics.length;l++)c[l]=oe({},i.topics[l],{replyCount:i.topics[l].replyCount||0});return u=i.count%20==0?i.count/20:(i.count-i.count%20)/20+1,p={boardtopics:c,totalPage:u},[2,p]}})})}function K(e,t){return se(this,void 0,void 0,function(){var n,r,a,o,s,i,c,l,u,p;return ie(this,function(d){switch(d.label){case 0:return n=20*(e-1),r="http://apitest.niconi.cc/topic/save/board/"+t+"?from="+n+"&size=20",a=w("accessToken"),o=new Headers,o.append("Authorization",a),[4,fetch(r,{headers:o})];case 1:return s=d.sent(),[4,s.json()];case 2:for(i=d.sent(),c=[],l=0;l<i.length;l++)c[l]=oe({},i.topics[l],{replyCount:i.topics[l].replyCount||0});return u=i.count%20==0?i.count/20:(i.count-i.count%20)/20+1,p={boardtopics:c,totalPage:u},[2,p]}})})}function Z(e,t,n,r){return se(this,void 0,void 0,function(){var a,o,s,i,c,l,l,u,p,d,m,h,f,g,v,y,b,b,b,b,E;return ie(this,function(N){switch(N.label){case 0:console.log("开始获取搜索结果了"),N.label=1;case 1:return N.trys.push([1,19,,20]),a=w("accessToken"),o=JSON.stringify(t),console.log("下面是body"),console.log(o),s=new Headers,s.append("Authorization",a),s.append("content-type","application/json"),i=20,c=void 0,0!=e?[3,4]:[4,fetch("http://apitest.niconi.cc/topic/search?from="+n+"&size="+i,{method:"POST",headers:s,body:o})];case 2:return l=N.sent(),l.status,l.status,[4,l.json()];case 3:return c=N.sent(),[3,7];case 4:return[4,fetch("http://apitest.niconi.cc/topic/search/board/"+e+"?from="+n+"&size="+i,{method:"POST",headers:s,body:o})];case 5:return l=N.sent(),l.status,l.status,[4,l.json()];case 6:c=N.sent(),N.label=7;case 7:if(!c||c==[])return[3,17];u=[];for(p in c)u.push(p);d=0,N.label=8;case 8:return d<u.length?(m=u[d],c[m].userId?[4,fetch("http://apitest.niconi.cc/user/follow/fanCount?userid="+c[m].userId)]:[3,14]):[3,16];case 9:return h=N.sent(),h.status,h.status,[4,h.json()];case 10:return f=N.sent(),c[m].fanCount=f,[4,fetch("http://apitest.niconi.cc/user/basic/"+c[m].userId)];case 11:return g=N.sent(),g.status,g.status,[4,g.json()];case 12:return v=N.sent(),c[m].portraitUrl=v.portraitUrl,y=c[m],[4,C(c[m].boardId,r)];case 13:return y.boardName=N.sent(),c[m].hitCount>1e4&&(c[m].hitCount>1e5?(b=parseInt(""+c[m].hitCount/1e4),c[m].hitCount=b+"万"):(b=parseInt(""+c[m].hitCount/1e3)/10,c[m].hitCount=b+"万")),c[m].replyCount>1e4&&(c[m].replyCount>1e5?(b=parseInt(""+c[m].replyCount/1e4),c[m].replyCount=b+"万"):(b=parseInt(""+c[m].replyCount/1e3)/10,c[m].replyCount=b+"万")),[3,15];case 14:c[m].fanCount=0,c[m].portraitUrl="http://www.cc98.org/pic/anonymous.gif",c[m].userName="匿名",c[m].boardName="心灵之约",N.label=15;case 15:return d++,[3,8];case 16:return[2,c];case 17:return[2,0];case 18:return[3,20];case 19:return E=N.sent(),[3,20];case 20:return[2]}})})}function ee(e){return se(this,void 0,void 0,function(){var t,n,r,a,o,s,i,c;return ie(this,function(l){switch(l.label){case 0:return t=w("accessToken"),n=new Headers,n.append("Authorization",t),[4,fetch("http://apitest.niconi.cc/Topic/"+e,{headers:n})];case 1:return r=l.sent(),[4,r.json()];case 2:return a=l.sent(),o=a.boardId,[4,fetch("http://apitest.niconi.cc/board/"+o,{headers:n})];case 3:return s=l.sent(),[4,s.json()];case 4:return i=l.sent(),c=i.boardMasters,[2,c]}})})}function te(e,t,n){return se(this,void 0,void 0,function(){var r,a,o,s,i,c;return ie(this,function(l){switch(l.label){case 0:return r=w("accessToken"),a=new Headers,a.append("Authorization",r),a.append("Content-Type","application/json"),o={reason:e,value:t},s=JSON.stringify(o),i="http://apitest.niconi.cc/manage/bonus/wealth?postid="+n,[4,fetch(i,{method:"PUT",headers:a,body:s})];case 1:return c=l.sent(),[2]}})})}function ne(e,t){return se(this,void 0,void 0,function(){var n,r,a,o,s,i,c;return ie(this,function(l){switch(l.label){case 0:return n=w("accessToken"),r=new Headers,r.append("Authorization",n),a=10*(t-1),o=10,s="http://apitest.niconi.cc/post/awards?postid="+e+"&from="+a+"&size="+o,[4,fetch(s,{headers:r})];case 1:return i=l.sent(),[4,i.json()];case 2:return c=l.sent(),[2,c]}})})}function re(e){return se(this,void 0,void 0,function(){var t,n,r;return ie(this,function(a){switch(a.label){case 0:return t="http://apitest.niconi.cc/user/name/"+e,[4,fetch(t)];case 1:return n=a.sent(),[4,n.json()];case 2:return r=a.sent(),[2,r.portraitUrl]}})})}function ae(e){var t=[{id:"7",name:"王何宇老师答疑版"},{id:"20",name:"冯晓霞老师答疑版"},{id:"21",name:"何善蒙老师答疑版"},{id:"23",name:"肖少拥老师答疑版"},{id:"36",name:"王云武老师答疑版"},{id:"41",name:"楼学庆老师答疑版"},{id:"42",name:"杨起帆老师答疑版"},{id:"47",name:"陈越老师答疑版"},{id:"49",name:"方红光老师答疑版"},{id:"50",name:"徐镜春老师答疑版"},{id:"52",name:"陆汉权老师答疑版"},{id:"83",name:"魏宝刚老师的答疑版"},{id:"140",name:"古红英老师答疑版"},{id:"149",name:"李岩老师答疑版"},{id:"151",name:"孙建伶老师答疑版"},{id:"183",name:"陆魁军老师答疑版"},{id:"204",name:"冯雁老师答疑版"},{id:"205",name:"张引老师的答疑版"},{id:"207",name:"郑扣根老师答疑版"},{id:"208",name:"翁恺老师答疑版"},{id:"224",name:"钱抱清老师的答疑版"},{id:"279",name:"教师答疑区事务版"},{id:"292",name:"高晴老师答疑版"},{id:"311",name:"杨义群老师的答疑版"},{id:"323",name:"白洪欢老师答疑版"},{id:"325",name:"贾厚玉老师的答疑板"},{id:"375",name:"张重辉老师答疑版"},{id:"383",name:"张彤彧老师答疑版"},{id:"408",name:"陈建海老师答疑"},{id:"412",name:"精品课程C语言答疑中心"},{id:"423",name:"方宁老师答疑版"},{id:"427",name:"季江民老师答疑版块"},{id:"432",name:"陈平老师答疑版"},{id:"440",name:"丁展平老师答疑版"},{id:"442",name:"谈艺论戏"},{id:"446",name:"桥牌天地"},{id:"448",name:"张军老师答疑版"},{id:"451",name:"胡兰青老师答疑版"},{id:"452",name:"胡兰青老师答疑版"},{id:"454",name:"董亚波老师答疑版"},{id:"457",name:"史治国老师答疑版"},{id:"494",name:"方富民老师答疑版"},{id:"501",name:"外院朱晔老师答疑版"},{id:"513",name:"邢卫老师答疑版"},{id:"514",name:"周波老师答疑版"},{id:"535",name:"面向对象程序设计答疑中心"},{id:"540",name:"陆维敏老师答疑版"},{id:"546",name:"苏振华老师答疑版"},{id:"548",name:"姜晓红老师答疑版"},{id:"559",name:"吴江琴老师答疑版"},{id:"568",name:"杨万喜老师答疑版"},{id:"574",name:"胡敏老师的答疑版面"},{id:"575",name:"顾宗华老师答疑版"},{id:"578",name:"蒋文华老师答疑版"},{id:"579",name:"陈华钧老师答疑版"},{id:"588",name:"吕萍老师答疑版"},{id:"589",name:"黄正谦老师答疑版"},{id:"590",name:"王强老师答疑版"},{id:"595",name:"陈志坚老师答疑版"},{id:"599",name:"彭笑刚老师答疑版"},{id:"600",name:"楼辉老师答疑版"},{id:"601",name:"沈钦仙老师答疑版"},{id:"602",name:"孙凌云老师答疑版"},{id:"603",name:"孟涛老师答疑版"},{id:"615",name:"孟炳泉老师答疑版"},{id:"624",name:"计算机类通识课程答疑版"},{id:"626",name:"杨颖老师答疑版"},{id:"629",name:"陈实老师答疑版"},{id:"631",name:"管理学课程交流版"},{id:"632",name:"陈纯老师答疑版"},{id:"633",name:"近现代中国的人物研究答疑版"},{id:"634",name:"董平老师答疑版"},{id:"635",name:"戴俊飞老师答疑版"},{id:"640",name:"刘海风老师答疑版"},{id:"710",name:"沈语冰老师答疑版"},{id:"714",name:"王跃明老师答疑版"},{id:"723",name:"李浩然老师答疑版"},{id:"724",name:"胡吉明老师答疑版"},{id:"726",name:"董玮老师答疑版"},{id:"727",name:"王毅老师答疑版"},{id:"728",name:"陈文智老师答疑版"},{id:"733",name:"陈奇老师答疑版"},{id:"745",name:"刘新国老师答疑版"},{id:"751",name:"李啸风物理化学答疑版"},{id:"752",name:"雷勇老师答疑版"},{id:"761",name:"高在峰老师课程交流版"},{id:"68",name:"学习交流"},{id:"85",name:"English Corner"},{id:"102",name:"彼岸阳光"},{id:"263",name:"考研一族"},{id:"304",name:"二外天地"},{id:"318",name:"选课交流"},{id:"391",name:"和语瀛风"},{id:"401",name:"对外交流"},{id:"592",name:"学习天地区事务版"},{id:"593",name:"专业咨询"},{id:"594",name:"学习资源"},{id:"715",name:"在线答疑"},{id:"100",name:"校园信息"},{id:"197",name:"军训生活"},{id:"198",name:"新生宝典"},{id:"264",name:"浙大广电"},{id:"266",name:"校园动态区事务版"},{id:"372",name:"维权空间"},{id:"417",name:"毕业生"},{id:"450",name:"依依校情"},{id:"460",name:"声像浙大"},{id:"534",name:"团委学生会"},{id:"537",name:"寒假·2017"},{id:"539",name:"校园卡工作"},{id:"547",name:"青年志愿者"},{id:"570",name:"防火视窗"},{id:"571",name:"公益爱心"},{id:"581",name:"浙大研究生"},{id:"748",name:"创客在浙"},{id:"230",name:"ftp联盟"},{id:"235",name:"求职广场"},{id:"339",name:"失物招领"},{id:"357",name:"时事新闻"},{id:"392",name:"信息资讯区事务版"},{id:"459",name:"实习兼职"},{id:"473",name:"公务员考录"},{id:"515",name:"住房信息"},{id:"560",name:"证券投资"},{id:"572",name:"交通天下"},{id:"738",name:"学生资助"},{id:"101",name:"时尚空间"},{id:"147",name:"行者无疆"},{id:"157",name:"军事天地"},{id:"180",name:"数码世界"},{id:"229",name:"美食天地"},{id:"256",name:"恋车情结"},{id:"258",name:"宠物情缘"},{id:"261",name:"健康帖士"},{id:"272",name:"个性生活区事务版"},{id:"313",name:"模型世界"},{id:"316",name:"心理学与生活"},{id:"402",name:"气象万千"},{id:"518",name:"茶韵飘香"},{id:"545",name:"手工生活"},{id:"551",name:"绿色心情"},{id:"16",name:"自由贴图"},{id:"115",name:"星座物语"},{id:"135",name:"开怀一笑"},{id:"146",name:"mm图片"},{id:"148",name:"有间鬼屋"},{id:"155",name:"智力宝典"},{id:"173",name:"光影留痕"},{id:"192",name:"有家侦探社"},{id:"269",name:"休闲娱乐区事务版"},{id:"283",name:"舞动心灵"},{id:"353",name:"真我风采"},{id:"422",name:"gg图片"},{id:"430",name:"魔术与魔方"},{id:"549",name:"娱乐新闻"},{id:"15",name:"足球板块"},{id:"48",name:"台球世界"},{id:"86",name:"篮球板块"},{id:"99",name:"体育运动"},{id:"124",name:"板板一族"},{id:"128",name:"free skater"},{id:"203",name:"排球天地"},{id:"232",name:"我爱网球"},{id:"233",name:"乒乓世界"},{id:"236",name:"羽球之家"},{id:"273",name:"体育运动区事务版"},{id:"281",name:"精武门"},{id:"282",name:"跆拳道场"},{id:"288",name:"梦幻黄龙"},{id:"405",name:"精彩F1"},{id:"627",name:"伦敦奥运·2012"},{id:"731",name:"三好杯"},{id:"25",name:"天籁之音"},{id:"164",name:"如影随形"},{id:"169",name:"摇滚和独立音乐"},{id:"202",name:"网络资源"},{id:"234",name:"TV满屋"},{id:"257",name:"影视工作室"},{id:"260",name:"资源发布区"},{id:"270",name:"影音无限区事务版"},{id:"306",name:"综E在线"},{id:"308",name:"乱弹吉他"},{id:"314",name:"我的麦克风"},{id:"744",name:"NexusHD高清社区"},{id:"750",name:"戏剧联盟"},{id:"39",name:"软件荟萃"},{id:"84",name:"数字艺术"},{id:"103",name:"Web设计与开发"},{id:"104",name:"硬件天地"},{id:"105",name:"编程技术"},{id:"154",name:"Java俱乐部"},{id:"211",name:"网络技术"},{id:"212",name:"Linux天地"},{id:"226",name:"电脑医院"},{id:"268",name:"电脑技术区事务版"},{id:"9",name:"似水年华"},{id:"81",name:"情感空气"},{id:"114",name:"郁闷小屋"},{id:"152",name:"缘分天空"},{id:"182",name:"心灵之约"},{id:"186",name:"祝福许愿"},{id:"244",name:"清樽酹月"},{id:"276",name:"感性空间区事务版"},{id:"26",name:"读书时光"},{id:"144",name:"一路走来"},{id:"170",name:"史海拾贝"},{id:"271",name:"瞬间永恒区事务版"},{id:"312",name:"怪力乱神"},{id:"315",name:"98网事"},{id:"379",name:"月亮街"},{id:"406",name:"哲学思考"},{id:"749",name:"社科学术"},{id:"759",name:"曲苑杂坛"},{id:"760",name:"文学交流"},{id:"80",name:"生活点滴"},{id:"251",name:"代理专区(旧)"},{id:"399",name:"书海淘沙"},{id:"449",name:"代理审核"},{id:"562",name:"电脑数码"},{id:"563",name:"服饰美肤"},{id:"564",name:"交易代理区事务版"},{id:"569",name:"代理专区"},{id:"756",name:"电脑数码已完成交易"},{id:"58",name:"信电ISEE"},{id:"67",name:"管理学院"},{id:"145",name:"传媒与国际文化学院"},{id:"158",name:"E电园"},{id:"193",name:"生仪大家庭"},{id:"214",name:"不败光电"},{id:"217",name:"材化演绎"},{id:"241",name:"医学院"},{id:"246",name:"外语学院"},{id:"247",name:"动力机能"},{id:"278",name:"院系交流区事务版"},{id:"285",name:"碧水青禾"},{id:"294",name:"竺可桢学院"},{id:"307",name:"人文学院"},{id:"319",name:"光华法学院"},{id:"320",name:"生命科学学院"},{id:"321",name:"生工食品学院"},{id:"341",name:"药学院"},{id:"344",name:"环资经纬"},{id:"351",name:"天下为公"},{id:"352",name:"经济学院"},{id:"362",name:"教育杏坛"},{id:"363",name:"建工学院"},{id:"367",name:"理学院"},{id:"368",name:"计算机科学与技术学院"},{id:"371",name:"控制天下"},{id:"377",name:"动科天地CAS"},{id:"469",name:"航空航天学院"},{id:"582",name:"求是学院"},{id:"623",name:"海洋学院"},{id:"754",name:"我是工程师"},{id:"60",name:"MSTC Microsoft Technology Club"},{id:"72",name:"韩之恋韩语社"},{id:"129",name:"杭高毕业生专版"},{id:"165",name:"绿之源协会"},{id:"166",name:"棒垒球协会"},{id:"176",name:"Fantasy动漫社"},{id:"187",name:"科技探索者协会"},{id:"190",name:"学军中学"},{id:"194",name:"梵音剧社"},{id:"195",name:"法学研究会"},{id:"206",name:"浙大DFM街舞社"},{id:"209",name:"书院飘香"},{id:"210",name:"生命科学协会"},{id:"213",name:"墨语茗音"},{id:"215",name:"登山协会"},{id:"216",name:"梦想天堂"},{id:"219",name:"艺术插花协会"},{id:"222",name:"慈中家园"},{id:"225",name:"灵韵艺术团"},{id:"227",name:"博盟电脑俱乐部"},{id:"250",name:"奔向奥林匹克运动俱乐部"},{id:"253",name:"英语挑战者联盟CEO"},{id:"254",name:"学生旅游协会"},{id:"277",name:"社团风采区事务版"},{id:"287",name:"SCDA（就业与职业发展协会）"},{id:"297",name:"《紫金港》·星空文学"},{id:"303",name:"浙江大学国防协会"},{id:"305",name:"意灵读书者协会"},{id:"310",name:"心理学会"},{id:"322",name:"紫金港艺术团"},{id:"330",name:"学生社团联合会"},{id:"332",name:"紫金港证券投资社"},{id:"333",name:"摄协之家"},{id:"334",name:"红十字会学生分会"},{id:"335",name:"DV联盟"},{id:"336",name:"学生医学进展研究会"},{id:"337",name:"学生第一希望社"},{id:"340",name:"无我茶社"},{id:"347",name:"学生三农协会"},{id:"350",name:"创业协会"},{id:"354",name:"一方水土"},{id:"355",name:"辩论队与求是辩论社"},{id:"358",name:"浙大虫子"},{id:"359",name:"卡侬音乐"},{id:"361",name:"学生无极棋社"},{id:"369",name:"学生空手道协会"},{id:"373",name:"伊甸法国"},{id:"382",name:"文学联合会"},{id:"385",name:"【enactus(原SIFE)】浙大创行国际学生圈"},{id:"393",name:"爱心社"},{id:"395",name:"动物保护者协会"},{id:"396",name:"求是人俱乐部"},{id:"397",name:"邓研风采"},{id:"431",name:"学生校友联络协会"},{id:"434",name:"亦心·民韵舞社"},{id:"436",name:"杨式太极拳协会"},{id:"437",name:"社团百花园"},{id:"438",name:"文琴艺术总团"},{id:"439",name:"春秋社"},{id:"470",name:"腾讯创新俱乐部"},{id:"519",name:"机器人协会"},{id:"520",name:"心系西部协会"},{id:"558",name:"模拟联合国协会"},{id:"561",name:"ShARE"},{id:"566",name:"财商俱乐部"},{id:"573",name:"Power Of Voice"},{id:"576",name:"黑白剧社"},{id:"587",name:"HPA保健协会"},{id:"617",name:"浙江大学出国留学学生圈SOSA"},{id:"618",name:"成长互助训练营GCC"},{id:"628",name:"浙江大学学生E志者协会"},{id:"713",name:"未来企业家俱乐部FEC"},{id:"736",name:"浙江大学研究生创新创业中心CIE"},{id:"262",name:"天下一家"},{id:"461",name:"在浙之滨"},{id:"462",name:"天下一家区事务版"},{id:"467",name:"三湘四水"},{id:"468",name:"津门故里"},{id:"471",name:"齐鲁青未了"},{id:"472",name:"蓉汇贯川"},{id:"475",name:"三秦大地"},{id:"480",name:"八闽来风"},{id:"481",name:"江南西道"},{id:"482",name:"一皖情深"},{id:"483",name:"燕赵飞歌"},{id:"484",name:"吴韵汉风"},{id:"485",name:"辽地永宁"},{id:"486",name:"新上海滩"},{id:"489",name:"黑土风情"},{id:"491",name:"白山松水"},{id:"492",name:"巴渝人家"},{id:"493",name:"天山南北"},{id:"498",name:"晋善晋美"},{id:"502",name:"塞上风光"},{id:"503",name:"彩云之南"},{id:"504",name:"荆楚纵横"},{id:"505",name:"邦锦梅朵"},{id:"506",name:"粤来客栈"},{id:"507",name:"鼎豫中原"},{id:"511",name:"丝路花雨"},{id:"550",name:"皇城根儿"},{id:"596",name:"八桂飘香"},{id:"625",name:"黔山秀水"},{id:"642",name:"椰风海韵"},{id:"328",name:"网上冲浪"},{id:"329",name:"编程答疑"},{id:"346",name:"flash版"},{id:"394",name:"游戏编程"},{id:"499",name:"多媒体技术"},{id:"538",name:"Mac(苹果)专区"},{id:"591",name:".NET 美学"},{id:"597",name:"脚本语言"},{id:"598",name:"iOS"},{id:"621",name:"魅族 Meizu"},{id:"622",name:"Android"},{id:"711",name:"Windows Phone"},{id:"91",name:"游戏广场"},{id:"274",name:"游戏广场区事务版"},{id:"296",name:"暴雪游戏"},{id:"30",name:"动漫讨论"},{id:"139",name:"恋声症候群"},{id:"191",name:"动漫资源"},{id:"223",name:"空蝉之恋"},{id:"239",name:"贴图工坊"},{id:"275",name:"动漫天地区事务版"},{id:"327",name:"动漫文区"},{id:"376",name:"ACG音乐区"},{id:"455",name:"周边百老汇"},{id:"245",name:"技术组工作室"},{id:"249",name:"编辑部工作室"},{id:"286",name:"坛庆策划"},{id:"605",name:"策划部工作室"},{id:"606",name:"体育部工作室"},{id:"607",name:"部长联席会议"},{id:"610",name:"意见与建议"},{id:"611",name:"通知通告"},{id:"613",name:"招贤纳士"},{id:"620",name:"赞助合作"},{id:"747",name:"Banner申请"},{id:"753",name:"CC98协会"},{id:"17",name:"论坛事务"},{id:"38",name:"站规修订"},{id:"40",name:"站务讨论"},{id:"116",name:"test"},{id:"136",name:"98博物馆"},{id:"184",name:"论坛帮助"},{id:"221",name:"版主会议厅"},{id:"267",name:"社科学术区事务版"},{id:"326",name:"集思广益"},{id:"400",name:"废弃版块"},{id:"404",name:"98足迹"},{id:"433",name:"网络安全"},{id:"614",name:"莫失莫忘"}],n=[];for(var r in t)t[r].name.indexOf(e)>-1&&n.push({id:t[r].id,name:t[r].name});return n}var oe=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},se=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},ie=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var ce=n(4),le=n(0),ue=n(12);t.getBoardTopicAsync=r,t.getTopic=a,t.getTopicContent=o,t.like=s,t.dislike=i,t.getLikeStateAndCount=c,t.getHotReplyContent=l,t.getListPager=u,t.convertHotTopic=p,t.getPager=d,t.getCurUserTopic=m,t.getCurUserTopicContent=h,t.getAllNewTopic=f,t.getFocusBoardTopic=g,t.getFocusTopic=v,t.setStorage=y,t.getStorage=b,t.setLocalStorage=E,t.getLocalStorage=w,t.removeLocalStorage=N,t.removeStorage=_,t.getBoardName=C,t.isLogOn=I,t.getRecentContact=S,t.getRecentMessage=T,t.sortRecentMessage=k,t.transerTime=P,t.sortContactList=x,t.getTotalReplyCount=O,t.getCategory=j,t.getUserDetails=M,t.getLikeState=U,t.refreshLikeState=L,t.sendTopic=A,t.getListCategory=R,t.getBoardMessage=H,t.getListTotalPage=D,t.getBasicBoardMessage=B,t.getCurUserTotalReplyPage=F,t.sendMessage=z,t.getScrollTop=W,t.getScrollHeight=Y,t.getWindowHeight=$,t.isBottom=G,t.uploadFile=q,t.followUser=V,t.unfollowUser=Q,t.GetTopTopics=J,t.getBestTopics=X,t.getSaveTopics=K,t.getSearchTopic=Z,t.getMasters=ee,t.awardWealth=te,t.getAwardInfo=ne,t.getPortraitUrl=re,t.getBoardId=ae},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){}return e}();t.UbbCodeContextData=a;var o=function(){function e(e,t){this._engine=e,this._options=t}return Object.defineProperty(e.prototype,"engine",{get:function(){return this._engine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._engine.data},enumerable:!0,configurable:!0}),e}();t.UbbCodeContext=o;var s=function(){function e(){this.autoDetectUrl=!0,this.allowExternalUrl=!0,this.allowImage=!0,this.allowMediaContent=!0,this.allowAutoPlay=!0,this.compatibility=i.Recommended}return e}();t.UbbCodeOptions=s;var i;!function(e){e[e.Transitional=0]="Transitional",e[e.Recommended=1]="Recommended",e[e.EnforceMorden=2]="EnforceMorden"}(i=t.UbbCompatiblityMode||(t.UbbCompatiblityMode={}));var c;!function(e){e[e.String=0]="String",e[e.ItemSeperator=1]="ItemSeperator",e[e.NameValueSeperator=2]="NameValueSeperator"}(c||(c={}));var l,u=function(){function e(e,t){this.type=e,this.value=t}return e.stringValue=function(t){return new e(c.String,t)},e.itemSeperator=new e(c.ItemSeperator,null),e.nameValueSeperator=new e(c.NameValueSeperator,null),e}();!function(e){e[e.Text=0]="Text",e[e.Tag=1]="Tag"}(l||(l={}));var p=function(){function e(e){this._parent=e}return Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),e}(),d=function(e){function t(t,n){var r=e.call(this,n)||this;return r._text=t,r}return r(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return l.Text},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),t.prototype.clone=function(e){return new t(this._text,e)},t}(p),m=function(e){function t(t,n){var r=e.call(this,n)||this;return r._isClosed=!1,r._subSegments=[],r._tagData=t,r}return r(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return l.Tag},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isClosed",{get:function(){return this._isClosed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tagData",{get:function(){return this._tagData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subSegments",{get:function(){return this._subSegments},enumerable:!0,configurable:!0}),t.forceClose=function(e,n){if(e.type===l.Text)n._subSegments.push(e.clone(n));else{var r=e;if(r.isClosed)n._subSegments.push(e.clone(n));else{console.warn("标签 %s 没有正确关闭，已经被转换为纯文字。",r.tagData.tagName),n._subSegments.push(new d(r.tagData.startTagString,e.parent));for(var a=0,o=r._subSegments;a<o.length;a++){var s=o[a];t.forceClose(s,n)}}}},t.prototype.close=function(){var e=this._subSegments;this._subSegments=[];for(var n=0,r=e;n<r.length;n++){var a=r[n];t.forceClose(a,this)}this._isClosed=!0},t.prototype.clone=function(e){var n=new t(this._tagData,e);n._content=this._content,n._isClosed=this._isClosed;for(var r=0,a=this._subSegments;r<a.length;r++){var o=a[r];n._subSegments.push(o.clone(n))}return n},t.prototype.getContentText=function(){for(var e=[],t=0,n=this._subSegments;t<n.length;t++){var r=n[t];r.type===l.Text?e.push(r.text):e.push(r.getFullText())}return e.join("")},t.prototype.getFullText=function(){return this.tagData.startTagString+this.getContentText()+this.tagData.endTagString},t}(p),h=function(){function e(e,t){if(!t)throw new Error("参数不能为空。");this._originalString=e,this._parameters=t,this._namedParameters={};for(var n=0,r=t;n<r.length;n++){var a=r[n];a.name&&(this._namedParameters[a.name]=a.value)}}return Object.defineProperty(e.prototype,"orignalString",{get:function(){return this._originalString},enumerable:!0,configurable:!0}),e.parse=function(t){if(!t)return null;var n=function(e){for(var t=0,n=[],r=c.ItemSeperator;;){var a=function(n){for(;;){if(t>=e.length)return null;var r=e[t];{if(!/\s/i.test(r)){if(","===r)return t++,u.itemSeperator;if("="===r)return t++,u.nameValueSeperator;if('"'===r||"'"===r)return u.stringValue(function(){var n=e[t],r=e.indexOf('"',t+1);r<0&&(console.error("UBB: 解析标签字符串 %s 时无法找到位置 %d 处 %s 对应的结束字符串。",e,t,n),r=e.length);var a=t+1;return t=r+1,e.substring(a,r)}());var a=t,o=n===c.ItemSeperator?/[=,]/i:/,/i,s=e.substring(t+1).match(o);if(s){var i=s.index+t+1;return t=i,u.stringValue(e.substring(a,i))}return t=e.length,u.stringValue(e.substring(a))}t++}}}(r);if(!a)break;n.push(a),r=a.type}return n}(t);if(0===n.length)return null;var r=function(e){var n=[];if(!e||0===e.length)return console.error("UBB: 无法将标签字符串 %s 解析为参数的集合。",t),n;for(var r=null,a=null,o=c.ItemSeperator,s=0,i=e;s<i.length;s++){var l=i[s];switch(l.type){case c.ItemSeperator:n.push(new f(r,a)),r=null,a=null,o=c.ItemSeperator;break;case c.NameValueSeperator:if(o!==c.String)throw new Error("名称值分隔符只能出现在值之后。");r=a,a=null,o=c.NameValueSeperator;break;default:if(o===c.String)throw new Error("不能连续出现多个值。");a=l.value,o=c.String}}return n.push(new f(r,a)),n[0].name||(n[0]=new f(n[0].value,null)),n}(n);return new e(t,r)},Object.defineProperty(e.prototype,"tagName",{get:function(){return this._parameters[0].name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startTagString",{get:function(){return"["+this.orignalString+"]"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endTagString",{get:function(){return"[/"+this.tagName+"]"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainValue",{get:function(){return this._parameters[0].value},enumerable:!0,configurable:!0}),e.prototype.value=function(e){if("number"==typeof e)return this._parameters[e].value;if("string"==typeof e)return this._namedParameters[e];throw new Error("参数必须是字符串或者数字。")},e.prototype.name=function(e){return this._parameters[e].name},Object.defineProperty(e.prototype,"parameterCount",{get:function(){return this._parameters.length},enumerable:!0,configurable:!0}),e.prototype.parameter=function(e){return this._parameters[e]},e}();t.UbbTagData=h;var f=function(){function e(e,t){this._name=e,this._value=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e}(),g=function(){function e(){}return e.renderTagAsString=function(e,t){return[e.startTagString,t,e.endTagString]},e}();t.UbbTagHandler=g;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.exec=function(e,t){return this.execCore(e.getContentText(),e.tagData,t)},t}(g);t.TextTagHandler=v;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.exec=function(e,t){for(var n=[],r=0,a=e.subSegments;r<a.length;r++){var o=a[r];n.push(t.engine.execSegment(o,t))}return this.execCore(n,e.tagData,t)},t}(g);t.RecursiveTagHandler=y;var b=function(){function e(){this._namedTagHandlerList={},this._unnamedTagHanlderList=[]}return e.prototype.getHandler=function(e){var t=this._namedTagHandlerList[e];if(t)return t;for(var n=0,r=this._unnamedTagHanlderList;n<r.length;n++){var a=r[n];if(a.supportedTagNames.test(e))return a}return null},e.prototype.register=function(e){this.registerInstance(new e)},e.prototype.registerInstance=function(e){if(!e||!e.supportedTagNames)throw new Error("参数 tagHandler 无效，或者未提供正确的标签名称。");"string"==typeof e.supportedTagNames?this.registerNamedCore([e.supportedTagNames],e):e.supportedTagNames instanceof Array?this.registerNamedCore(e.supportedTagNames,e):this.registerUnnamedCore(e)},e.prototype.registerNamedCore=function(e,t){for(var n=0,r=e;n<r.length;n++){var a=r[n];a in this._namedTagHandlerList?console.error("标签 %s 的处理程序已经被注册。",a):this._namedTagHandlerList[a]=t}},e.prototype.registerUnnamedCore=function(e){this._unnamedTagHanlderList.push(e)},e}(),E=function(){function e(){this._tagHandlers=new b,this._data=new a}return Object.defineProperty(e.prototype,"tagHandlers",{get:function(){return this._tagHandlers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),e.prototype.getHandler=function(e){return this._tagHandlers.getHandler(e)},e.prototype.exec=function(e,t){var n=new o(this,t);return this.execCore(e,n)},e.tryHandleEndTag=function(e,t){for(var n=t;n&&n.tagData;){if(n.tagData.tagName===e)return n.close(),n.parent;n=n.parent}return console.warn("UBB: 找不到结束标签 %s 的开始标签，该标签将被作为一般文字处理。",e),t.subSegments.push(new d("[/"+e+"]",t)),t},e.buildSegmentsCore=function(t,n){for(var r=/([\s\S]*?)\[(.+?)]/gi;;){var a=r.lastIndex,o=r.exec(t);if(!o){var s=t.substring(a);return void(s&&n.subSegments.push(new d(s,n)))}var i=o[1],c=o[2];i&&n.subSegments.push(new d(i,n));var l=c.match(/^\/(.+)$/i);if(l){var u=l[1];n=e.tryHandleEndTag(u,n)}else try{var p=h.parse(c),f=new m(p,n);n.subSegments.push(f),n=f;continue}catch(e){console.warn("标签字符串 %s 解析失败，将被视为普通文字。",c),n.subSegments.push(new d("["+c+"]",n))}}},e.prototype.execCore=function(t,n){var r=new m(null,null);e.buildSegmentsCore(t,r),r.close();for(var a=[],o=0,s=r.subSegments;o<s.length;o++){var i=s[o];a.push(this.execSegment(i,n))}return a},e.prototype.execSegment=function(e,t){if(e.type===l.Text)return e.text;var n=e,r=this.getHandler(n.tagData.tagName);return r?r.exec(n,t):(console.warn("没有找到标签 %s 的处理程序，将被视为一般文字。",n.tagData.tagName),n.getFullText())},e}();t.UbbCodeEngine=E},function(e,t){e.exports=ReactRouterDOM},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e}();t.AppState=r;var a=function(){function e(){}return e}();t.TopicVoteState=a;var o=function(){function e(){}return e}();t.PostTopicState=o;var s=function(){function e(){}return e}();t.AuthorMessageState=s;var i=function(){function e(){}return e}();t.TopicTitleState=i;var c=function(){function e(){}return e}();t.ContentState=c;var l=function(){function e(){}return e}();t.TopicGoodState=l;var u=function(){function e(){}return e}();t.ReplierState=u;var p=function(){function e(){}return e}();t.MainPageTopicState=p;var d=function(){function e(){}return e}();t.ListHeadState=d;var m=function(){function e(){}return e}();t.ListNoticeState=m;var h=function(){function e(){}return e}();t.ListTagState=h;var f=function(){function e(){}return e}();t.ListContentState=f;var g=function(){function e(){}return e}();t.TopicTitleAndContentState=g;var v=function(){function e(){}return e}();t.ListPagerState=v;var y=function(){function e(e){this.pageNumber=e}return e}();t.PagerState=y;var b=function(){function e(e,t,n,r,a,o,s,i,c,l,u,p,d,m,h,f){this.userName=e,this.time=r,this.title=t,this.content=n,this.signature=a,this.userImgUrl=o,this.hitCount=s,this.userId=i,this.likeNumber=c,this.dislikeNumber=l,this.postId=u,this.isAnonymous=p,this.contentType=d,this.isFollowing=m,this.fanCount=h,this.masters=f}return e}();t.TopicState=b;var E=function(){function e(){}return e}();t.LoginState=E;var w=function(){function e(){}return e}();t.AlreadyLoginState=w;var N=function(){function e(e,t,n,r,a){this.name=e,this.todayPostCount=t,this.totalPostCount=n,this.id=r,this.masters=a}return e}();t.Board=N;var _=function(){function e(){}return e}();t.BoardState=_;var C=function(){function e(){}return e}();t.UserInfo=C;var I=function(){function e(){}return e}();t.UserRecentPost=I;var S=function(){function e(){}return e}();t.UserFanInfo=S;var T=function(){function e(){}return e}();t.UserFavoritesBoardInfo=T;var k=function(){function e(){}return e}();t.ChangeUserInfo=k},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(37),s=function(){function e(){}return e}();t.UbbContainerProps=s;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this.props.engine||o.createEngine(),t=this.props.options||new o.UbbCodeOptions,n=e.exec(this.props.code||"",t),r={whiteSpace:"pre-wrap",width:"100%"};return t.compatibility===o.UbbCompatiblityMode.Transitional?a.createElement("blockquote",{style:r},n):a.createElement("article",{style:r},n)},t}(a.Component);t.UbbContainer=i},function(e,t){e.exports=$},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s,i=n(0),c=n(1),l=n(6),u=n(3),p=n(15),d=n(5);s=t.Constants||(t.Constants={});var m=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),Object.defineProperty(t.prototype,"match",{get:function(){return this.props.match},enumerable:!0,configurable:!0}),t}(i.Component);t.RouteComponent=m;var h=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleChange=r.handleChange.bind(r),r.state={page:1,topicid:r.match.params.topicid,totalPage:1,userName:null},r}return r(t,e),t.prototype.componentDidUpdate=function(){scrollTo(0,0)},t.prototype.handleChange=function(){return a(this,void 0,void 0,function(){var e,t,n;return o(this,function(r){switch(r.label){case 0:return e=this.match.params.page?parseInt(this.match.params.page):1,[4,this.getTotalPage(this.match.params.topicid)];case 1:return t=r.sent(),n=this.match.params.userName,this.setState({page:e,topicid:this.match.params.topicid,totalPage:t,userName:n}),[2]}})})},t.prototype.componentWillReceiveProps=function(e){return a(this,void 0,void 0,function(){var t,n,r;return o(this,function(a){switch(a.label){case 0:return t=e.match.params.page?parseInt(e.match.params.page):1,n=e.match.params.userName,[4,this.getTotalPage(this.match.params.topicid)];case 1:return r=a.sent(),this.setState({page:t,topicid:e.match.params.topicid,totalPage:r,userName:n}),[2]}})})},t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n;return o(this,function(r){switch(r.label){case 0:return e=this.match.params.page?parseInt(this.match.params.page):1,[4,this.getTotalPage(this.match.params.topicid)];case 1:return t=r.sent(),n=this.match.params.userName,this.setState({page:e,topicid:this.match.params.topicid,totalPage:t,userName:n}),[2]}})})},t.prototype.getTotalPage=function(e){return a(this,void 0,void 0,function(){return o(this,function(t){return[2,c.getTotalReplyCount(e,this.context.router)]})})},t.prototype.returnTopic=function(){return i.createElement(y,{imgUrl:"/images/ads.jpg",page:this.state.page,topicid:this.state.topicid,userId:null})},t.prototype.render=function(){var e=null,t=null;return 1===this.state.page&&(e=i.createElement(y,{imgUrl:"/images/ads.jpg",page:this.state.page,topicid:this.state.topicid,userId:null}),t=i.createElement(u.Route,{path:"/topic/:topicid/:page?",component:C})),i.createElement("div",{className:"center"},i.createElement("div",{className:"row",style:{width:"100%",justifyContent:"space-between",borderBottom:"#EAEAEA solid thin",alignItems:"center"}},i.createElement(O,{topicId:this.state.topicid}),i.createElement(f,{page:this.state.page,topicid:this.state.topicid,totalPage:this.state.totalPage})),e,t,i.createElement(u.Route,{path:"/topic/:topicid/:page?",component:_}),i.createElement(g,{page:this.state.page,topicid:this.state.topicid,totalPage:this.state.totalPage}),i.createElement(P,{onChange:this.handleChange,topicid:this.state.topicid}))},t}(m);t.Post=h;var f=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={pager:[1,2,3,4,5]},r}return r(t,e),t.prototype.generatePageLink=function(e){return i.createElement(v,{pageNumber:e,topicid:this.props.topicid,curPage:this.props.page,totalPage:this.props.totalPage})},t.prototype.componentWillReceiveProps=function(e){return a(this,void 0,void 0,function(){var t;return o(this,function(n){return t=c.getPager(e.page,e.totalPage),this.setState({pager:t}),[2]})})},t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){return e=c.getPager(this.props.page,this.props.totalPage),this.setState({pager:e}),[2]})})},t.prototype.render=function(){return i.createElement("div",{id:"pager"},i.createElement("div",{className:"row pagination"},this.state.pager.map(this.generatePageLink.bind(this))))},t}(m);t.TopicPager=f;var g=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={pager:[1,2,3,4,5]},r}return r(t,e),t.prototype.generatePageLink=function(e){return i.createElement(v,{pageNumber:e,topicid:this.props.topicid,curPage:this.props.page,totalPage:this.props.totalPage})},t.prototype.componentWillReceiveProps=function(e){return a(this,void 0,void 0,function(){var t;return o(this,function(n){return t=c.getPager(e.page,e.totalPage),this.setState({pager:t}),[2]})})},t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){return e=c.getPager(this.props.page,this.props.totalPage),this.setState({pager:e}),[2]})})},t.prototype.render=function(){return i.createElement("div",{className:"row",style:{width:"100%",justifyContent:"space-between",alignItems:"flex-end"}},i.createElement("div",{id:"pager"},i.createElement("div",{className:"row pagination"},this.state.pager.map(this.generatePageLink.bind(this)))))},t}(m);t.TopicPagerDown=g;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e;return this.props.pageNumber>0?(e="/topic/"+this.props.topicid+"/"+this.props.pageNumber,this.props.pageNumber!=this.props.curPage?i.createElement("li",{className:"page-item"},i.createElement(u.Link,{className:"page-link",to:e},this.props.pageNumber)):i.createElement("li",{className:"page-item active"},i.createElement(u.Link,{className:"page-link",to:e},this.props.pageNumber))):-1==this.props.pageNumber?(e="/topic/"+this.props.topicid+"/"+(this.props.curPage-1),i.createElement("li",{className:"page-item"},i.createElement(u.Link,{className:"page-link",to:e},"‹"))):-2==this.props.pageNumber?(e="/topic/"+this.props.topicid+"/"+(this.props.curPage+1),i.createElement("li",{className:"page-item"},i.createElement(u.Link,{className:"page-link",to:e},"›"))):-3==this.props.pageNumber?(e="/topic/"+this.props.topicid,i.createElement("li",{className:"page-item"},i.createElement(u.Link,{className:"page-link",to:e},"‹‹"))):(e="/topic/"+this.props.topicid+"/"+this.props.totalPage,i.createElement("li",{className:"page-item"},i.createElement(u.Link,{className:"page-link",to:e},"››")))},t}(i.Component);t.PageModel=v;var y=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.nextPage=r.nextPage.bind(r),r.lastPage=r.lastPage.bind(r),r.update=r.update.bind(r),r.state={topicMessage:{title:"加载中...",time:"",content:"",signature:"",postid:0},likeState:0,awardInfo:[],info:[],awardPage:1},r}return r(t,e),t.prototype.update=function(){return a(this,void 0,void 0,function(){return o(this,function(e){return console.log("topic should update"),this.setState({}),[2]})})},t.prototype.nextPage=function(){return a(this,void 0,void 0,function(){var e,t,n,r;return o(this,function(a){switch(a.label){case 0:return e=this.state.awardPage,[4,c.getAwardInfo(this.state.topicMessage.postId,e+1)];case 1:return t=a.sent(),n=t.map(this.generateAwardInfo.bind(this)),[4,Promise.all(n)];case 2:return r=a.sent(),this.setState({info:r,awardPage:e+1}),[2]}})})},t.prototype.lastPage=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a;return o(this,function(o){switch(o.label){case 0:return e="#awardPager"+this.state.topicMessage.postId,t=this.state.awardPage,1===this.state.awardPage?(l(e).css("disabled","true"),[2]):[4,c.getAwardInfo(this.state.topicMessage.postId,t-1)];case 1:return n=o.sent(),r=n.map(this.generateAwardInfo.bind(this)),[4,Promise.all(r)];case 2:return a=o.sent(),this.setState({info:a,awardPage:t-1}),[2]}})})},t.prototype.generateAwardInfo=function(e){return a(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return[4,c.getPortraitUrl(e.operatorName)];case 1:return t=n.sent(),[2,i.createElement(N,{postId:this.state.topicMessage.postId,userImgUrl:t,content:e.content,reason:e.reason,userName:e.operatorName})]}})})},t.prototype.componentWillMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r;return o(this,function(a){switch(a.label){case 0:return[4,c.getTopic(this.props.topicid,this.context.router)];case 1:return e=a.sent(),[4,c.getAwardInfo(e.postId,1)];case 2:return t=a.sent(),n=t.map(this.generateAwardInfo.bind(this)),[4,Promise.all(n)];case 3:return r=a.sent(),this.setState({topicMessage:e,awardInfo:t,info:r}),[2]}})})},t.prototype.render=function(){var e="awardPager"+this.state.topicMessage.postId,t=null;return 0!==this.state.info.length&&(t=i.createElement("div",{className:"row"},i.createElement("button",{className:"awardPage",id:e,onClick:this.lastPage},"上一页"),i.createElement("button",{className:"awardPage",onClick:this.nextPage},"下一页"))),null!=this.state.topicMessage&&(this.state.topicMessage.userId==this.props.userId||null==this.props.userId)?i.createElement("div",{className:"root",id:"1"},i.createElement("div",{className:"essay"},i.createElement(b,{authorId:this.state.topicMessage.userId,authorName:this.state.topicMessage.userName,authorImgUrl:this.state.topicMessage.userImgUrl,isAnonymous:this.state.topicMessage.isAnonymous,isFollowing:this.state.topicMessage.isFollowing,fanCount:this.state.topicMessage.fanCount}),i.createElement(E,{Title:this.state.topicMessage.title,Time:this.state.topicMessage.time,HitCount:this.state.topicMessage.hitCount}),i.createElement("div",{id:"ads"},i.createElement("img",{width:"100%",src:this.props.imgUrl}))),i.createElement(w,{postid:this.state.topicMessage.postId,content:this.state.topicMessage.content,signature:this.state.topicMessage.signature,topicid:this.props.topicid,userId:this.state.topicMessage.userId,contentType:this.state.topicMessage.contentType,masters:this.state.topicMessage.masters,update:this.update}),i.createElement("div",{className:"column",style:{width:"100%"}},this.state.info,t)):null},t}(m);t.PostTopic=y;var b=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.follow=r.follow.bind(r),r.unfollow=r.unfollow.bind(r),r.state={userName:"Mana",fansNumber:233,imgUrl:r.props.authorImgUrl,buttonInfo:"关注",isFollowing:!1,buttonIsDisabled:!1},r}return r(t,e),t.prototype.unfollow=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.setState({buttonIsDisabled:!0,buttonInfo:"取关中"}),e=c.getLocalStorage("accessToken"),t=this.props.authorId,n="http://apitest.niconi.cc/user/unfollow/"+t,r=new Headers,r.append("Authorization",e),[4,fetch(n,{method:"DELETE",headers:r})];case 1:if(a=o.sent(),200!==a.status)throw{};return this.setState({buttonIsDisabled:!1,buttonInfo:"重新关注",isFollowing:!1}),[3,3];case 2:return s=o.sent(),this.setState({buttonIsDisabled:!1,buttonInfo:"取关失败",isFollowing:!0}),[3,3];case 3:return[2]}})})},t.prototype.follow=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.setState({buttonIsDisabled:!0,buttonInfo:"关注中"}),e=c.getLocalStorage("accessToken"),t=this.props.authorId,n="http://apitest.niconi.cc/user/follow/"+t,r=new Headers,r.append("Authorization",e),[4,fetch(n,{method:"POST",headers:r})];case 1:if(a=o.sent(),200!==a.status)throw{};return this.setState({buttonIsDisabled:!1,buttonInfo:"取消关注",isFollowing:!0}),[3,3];case 2:return s=o.sent(),this.setState({buttonIsDisabled:!1,buttonInfo:"关注失败",isFollowing:!1}),[3,3];case 3:return[2]}})})},t.prototype.componenDidMount=function(){!0===this.state.isFollowing?this.setState({buttonInfo:"取消关注",isFollowing:!0}):this.setState({buttonInfo:"关注",isFollowing:!1})},t.prototype.render=function(){var e="/message/message?id="+this.props.authorId,t="/user/"+this.props.authorId,n=i.createElement("a",{href:t},i.createElement("img",{src:this.props.authorImgUrl})),r=i.createElement("div",{id:"authorName"},i.createElement("p",null,i.createElement("a",{href:t},this.props.authorName)));return 1==this.props.isAnonymous&&(n=i.createElement("img",{src:this.props.authorImgUrl}),r=i.createElement("div",{id:"authorName"},i.createElement("p",null,this.props.authorName))),!0===this.props.isAnonymous&&(l(".email").css("display","none"),l(".follow").css("display","none"),l(".authorFans").css("margin-top","1rem"),l("#fans").css("display","none"),l("#authorMes").css("width","14rem")),i.createElement("div",{className:"row",id:"authormes"},i.createElement("div",{className:"authorImg"},n),i.createElement("div",{className:"column",style:{marginRight:"1rem"}},i.createElement("div",{className:"row authorFans",style:{justifyContent:"space-between"}},r,i.createElement("div",{id:"fans",className:"row"},i.createElement("div",{style:{marginRight:"0.1875rem"}},"粉丝"),i.createElement("div",{style:{color:"#EE0000"}},this.props.fanCount))),i.createElement("div",{className:"row"},i.createElement("button",{className:"follow",id:this.state.isFollowing?"":"follow",onClick:this.state.isFollowing?this.unfollow:this.follow,disabled:this.state.buttonIsDisabled},this.state.buttonInfo),i.createElement("button",{className:"email"},i.createElement("a",{href:e},"私信")))))},t}(m);t.AuthorMessage=b;var E=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={isNotice:!0,isTop:!0,title:"这是一个长长啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊的标题",tag:"女装/开车",time:"2017.8.12",likeNumber:1,dislikeNumber:1,viewTimes:2366},r}return r(t,e),t.prototype.returnProps=function(e,t,n){return i.createElement("div",{id:"title1",className:"row",style:{justifyContent:"flex-start"}},i.createElement("div",{id:"essayTitle"},n))},t.prototype.render=function(){return i.createElement("div",{id:"title"},i.createElement("div",{className:"column",id:"topicTitleProp"},i.createElement("div",{id:"essay1",className:"row"},this.returnProps(this.state.isTop,this.state.isNotice,this.props.Title)),i.createElement("div",{className:"row",id:"essayProp"},i.createElement("div",{id:"tags"},i.createElement("div",{className:"tagProp tagSize"},"标签： ",this.state.tag),i.createElement("div",{className:"tagProp"})),i.createElement("div",{id:"time"},i.createElement("div",{className:"viewProp"},i.createElement("i",{className:"fa fa-clock-o fa-lg fa-fw"}))," ",i.createElement("div",{className:"timeProp tagSize"},moment(this.props.Time).format("YYYY-MM-DD HH:mm:ss"))),i.createElement("div",{id:"viewtimes"},i.createElement("div",{className:"viewProp"},i.createElement("i",{className:"fa fa-eye fa-lg fa-fw"}),"  ")," ",i.createElement("div",{className:"timeProp tagSize"},this.props.HitCount,"次")))))},t}(m);t.TopicTitle=E;var w=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.showManageUI=r.showManageUI.bind(r),r.update=r.update.bind(r),r.state={likeNumber:666,dislikeNumber:233,likeState:0},r}return r(t,e),t.prototype.update=function(){this.props.update()},t.prototype.componentDidUpdate=function(){var e="doc-content"+this.props.postid;editormd.markdownToHTML(e,{htmlDecode:"style,script,iframe",emoji:!0,taskList:!0,tex:!0,flowChart:!0,sequenceDiagram:!0,codeFold:!0})},t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:return[4,c.getLikeState(this.props.topicid,this.context.router)];case 1:return e=n.sent(),1===e.likeState?l("#commentliked").css("color","red"):2===e.likeState&&l("#commentdisliked").css("color","red"),t="doc-content"+this.props.postid,editormd.markdownToHTML(t,{htmlDecode:"style,script,iframe",emoji:!0,taskList:!0,tex:!0,flowChart:!0,sequenceDiagram:!0,codeFold:!0}),this.setState({likeNumber:e.likeCount,dislikeNumber:e.dislikeCount,likeState:e.likeState}),[2]}})})},t.prototype.like=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return 1!==this.state.likeState?[3,2]:[4,c.like(this.props.topicid,this.props.postid,this.context.router)];case 1:return t.sent(),l("#commentliked").css("color","black"),[3,7];case 2:return 2!==this.state.likeState?[3,5]:[4,c.dislike(this.props.topicid,this.props.postid,this.context.router)];case 3:return t.sent(),[4,c.like(this.props.topicid,this.props.postid,this.context.router)];case 4:return t.sent(),l("#commentliked").css("color","red"),l("#commentdisliked").css("color","black"),[3,7];case 5:return[4,c.like(this.props.topicid,this.props.postid,this.context.router)];case 6:t.sent(),l("#commentliked").css("color","red"),t.label=7;case 7:return[4,c.refreshLikeState(this.props.topicid,this.props.postid,this.context.router)];case 8:return e=t.sent(),this.setState({likeNumber:e.likeCount,dislikeNumber:e.dislikeCount,likeState:e.likeState}),[2]}})})},t.prototype.dislike=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return 2!==this.state.likeState?[3,2]:[4,c.dislike(this.props.topicid,this.props.postid,this.context.router)];case 1:return t.sent(),l("#commentdisliked").css("color","black"),[3,7];case 2:return 1!==this.state.likeState?[3,5]:[4,c.like(this.props.topicid,this.props.postid,this.context.router)];case 3:return t.sent(),[4,c.dislike(this.props.topicid,this.props.postid,this.context.router)];case 4:return t.sent(),l("#commentliked").css("color","black"),l("#commentdisliked").css("color","red"),[3,7];case 5:return[4,c.dislike(this.props.topicid,this.props.postid,this.context.router)];case 6:t.sent(),l("#commentdisliked").css("color","red"),t.label=7;case 7:return[4,c.refreshLikeState(this.props.topicid,this.props.postid,this.context.router)];case 8:return e=t.sent(),this.setState({likeNumber:e.likeCount,dislikeNumber:e.dislikeCount,likeState:e.likeState}),[2]}})})},t.prototype.showManageUI=function(){var e="#manage"+this.props.postid;console.log("in manage"),l(e).css("display","")},t.prototype.render=function(){var e="doc-content"+this.props.postid,t="/topic/"+this.props.topicid+"/user/"+this.props.userId,n=i.createElement(d.UbbContainer,{code:this.props.content}),r=i.createElement("div",{id:e},i.createElement("textarea",{name:"editormd-markdown-doc",style:{display:"none"}},this.props.content)),a=n;if(1===this.props.contentType&&(a=r),c.getLocalStorage("userInfo")){var o=c.getLocalStorage("userInfo").privilege,s=c.getLocalStorage("userInfo").name,p=c.getLocalStorage("userInfo").id;if(("管理员"===o||"超级版主"===o||"全站贵宾"===o&&p===this.props.userId)&&l("#postTopicManage").css("display",""),this.props.masters)for(var m=0;m<this.props.masters.length;m++)s===this.props.masters[m]&&l("#postTopicManage").css("display","")}return""==this.props.signature?i.createElement("div",{className:"content"},i.createElement("div",{className:"substance"},a),i.createElement(x,{postId:this.props.postid,userId:this.props.userId,onChange:this.update}),i.createElement("div",{className:"comment1"},i.createElement("div",{id:"commentlike",className:"buttonFont"},i.createElement("button",{className:"commentbutton"},i.createElement("i",{className:"fa fa-star-o fa-lg"})),"   收藏文章 "),i.createElement("div",{id:"commentliked",className:"upup",style:{marginRight:"0.7rem"}},i.createElement("i",{title:"赞",onClick:this.like.bind(this),className:"fa fa-thumbs-o-up fa-lg"}),i.createElement("span",{className:"commentProp"}," ",this.state.likeNumber)),i.createElement("div",{id:"commentdisliked",className:"downdown"},i.createElement("i",{title:"踩",onClick:this.dislike.bind(this),className:"fa fa-thumbs-o-down fa-lg"}),i.createElement("span",{className:"commentProp"}," ",this.state.dislikeNumber)),i.createElement("div",{id:"commentlike",className:"buttonFont row"}," ",i.createElement("div",{className:"commentbutton"},"   评分"),i.createElement("div",{className:"commentbutton"},"   编辑")),i.createElement("div",{className:"operation1"},"引用"),i.createElement(u.Link,{className:"operation1",to:t},"只看此用户"),i.createElement("div",{className:"operation1",id:"postTopicManage",onClick:this.showManageUI,style:{display:"none",cursor:"pointer"}},"管理"))):i.createElement("div",{className:"content"},i.createElement("div",{className:"substance"},a," "),i.createElement(x,{postId:this.props.postid,userId:this.props.userId,onChange:this.update}),i.createElement("div",{className:"signature"},i.createElement(d.UbbContainer,{code:this.props.signature})),i.createElement("div",{className:"comment"},i.createElement("div",{id:"commentlike",style:{marginRight:"0.7rem"},className:"buttonFont"},i.createElement("button",{className:"commentbutton"},i.createElement("i",{className:"fa fa-star-o fa-lg"})),"   收藏文章 "),i.createElement("div",{id:"commentliked",className:"upup",style:{marginRight:"0.7rem"}},i.createElement("i",{title:"赞",onClick:this.like.bind(this),className:"fa fa-thumbs-o-up fa-lg"}),i.createElement("span",{className:"commentProp"}," ",this.state.likeNumber)),i.createElement("div",{id:"commentdisliked",className:"downdown"},i.createElement("i",{title:"踩",onClick:this.dislike.bind(this),className:"fa fa-thumbs-o-down fa-lg"}),i.createElement("span",{className:"commentProp"}," ",this.state.dislikeNumber)),i.createElement("div",{id:"commentlike",className:"buttonFont row"}," ",i.createElement("div",{className:"commentbutton"},"   评分"),i.createElement("div",{className:"commentbutton"},"   编辑")),i.createElement("div",{className:"operation1"},"引用"),i.createElement(u.Link,{className:"operation1",to:t},"只看此用户"),i.createElement("div",{className:"operation1",id:"postTopicManage",onClick:this.showManageUI,style:{display:"none",cursor:"pointer"}},"管理")))},t}(m);t.TopicContent=w;var N=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),t.prototype.render=function(){return i.createElement("div",{className:"good tagSize"},i.createElement("div",{id:"userImage"},i.createElement("img",{src:this.props.userImgUrl})," "),i.createElement("div",{id:"userName"},i.createElement("span",null,this.props.userName)),i.createElement("div",{id:"grades"},i.createElement("span",{id:"grade"},this.props.content)),i.createElement("div",{id:"credit"},i.createElement("span",null,this.props.reason)))},t}(m);t.AwardInfo=N;var _=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.update=r.update.bind(r),r.state={contents:[],masters:[],k:0},r}return r(t,e),t.prototype.getMasters=function(e){return a(this,void 0,void 0,function(){return o(this,function(t){return[2,c.getMasters(e)]})})},t.prototype.componentWillReceiveProps=function(e){return a(this,void 0,void 0,function(){var t,n,r,a;return o(this,function(o){switch(o.label){case 0:return t=e.match.params.page||1,n="TopicContent_"+e.match.params.topicid+"_"+t,[4,c.getTopicContent(e.match.params.topicid,t,this.context.router)];case 1:return r=o.sent(),[4,this.getMasters(e.match.params.topicid)];case 2:return a=o.sent(),this.setState({contents:r,masters:a}),[2]}})})},t.prototype.generateContents=function(e){return i.createElement("div",{className:"reply"},i.createElement("div",{style:{marginTop:"1rem",marginBotton:"0.3125rem",border:"#EAEAEA solid thin"}},i.createElement(S,{key:e.postId,isAnonymous:e.isAnonymous,userId:e.userId,topicid:e.topicId,userName:e.userName,replyTime:e.time,floor:e.floor,userImgUrl:e.userImgUrl,sendTopicNumber:e.sendTopicNumber,privilege:e.privilege}),i.createElement(k,{key:e.content,masters:this.state.masters,userId:e.userId,content:e.content,signature:e.signature,topicid:e.topicId,postid:e.postId,contentType:e.contentType,update:this.update,k:this.state.k})))},t.prototype.update=function(){return a(this,void 0,void 0,function(){return o(this,function(e){return console.log("reply should update"),this.setState({k:1}),console.log(this.state),[2]})})},t.prototype.render=function(){return i.createElement("div",{className:"center",style:{width:"100%"}},this.state.contents.map(this.generateContents.bind(this)))},t}(m);t.Reply=_;var C=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.update=r.update.bind(r),r.state={contents:[],masters:[]},r}return r(t,e),t.prototype.update=function(){this.setState({})},t.prototype.getMasters=function(e){return a(this,void 0,void 0,function(){return o(this,function(t){return[2,c.getMasters(e)]})})},t.prototype.componentWillReceiveProps=function(e){return a(this,void 0,void 0,function(){var t,n,r;return o(this,function(a){switch(a.label){case 0:return t=e.match.params.page||1,1!=t?[3,2]:[4,c.getHotReplyContent(e.match.params.topicid,this.context.router)];case 1:n=a.sent(),r=this.getMasters(e.match.params.topicid),this.setState({contents:n,masters:r}),a.label=2;case 2:return[2]}})})},t.prototype.generateContents=function(e){var t=(e.floor%10).toString();return i.createElement("div",{className:"reply",id:t},i.createElement("div",{style:{marginTop:"1rem",marginBotton:"0.3125rem",border:"#EAEAEA solid thin"}},i.createElement(I,{key:e.id,userId:e.userId,topicid:e.topicId,userName:e.userName,replyTime:e.time,floor:e.floor,userImgUrl:e.userImgUrl,sendTopicNumber:e.sendTopicNumber,privilege:e.privilege,isAnonymous:e.isAnonymous}),i.createElement(k,{key:e.content,masters:this.state.masters,userId:e.userId,content:e.content,signature:e.signature,topicid:e.topicId,postid:e.id,contentType:e.contentType,update:this.update,k:this.state.contents})))},t.prototype.render=function(){return l(".header").scrollTop(),i.createElement("div",{className:"center",style:{width:"100%"}},this.state.contents.map(this.generateContents))},t}(m);t.HotReply=C;var I=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={},r}return r(t,e),t.prototype.render=function(){var e="/user/"+this.props.userId,t=encodeURI(e),n="/topic/"+this.props.topicid+"/user/"+this.props.userId,r="/message/message?id="+this.props.userId;l(document).ready(function(){l(".authorImg").mouseenter(function(e){var t=e.currentTarget;l(t).next(".userDetails").show()}),l(".mouse-userDetails").mouseleave(function(e){var t=e.currentTarget;l(t).find(".userDetails").hide()})});var a="帖数";this.props.userId||(a="");var o;o=1!=this.props.isAnonymous?i.createElement(T,{userName:this.props.userName,userId:this.props.userId}):null;var s;return"超级版主"===this.props.privilege?s=i.createElement("a",{style:{color:"pink"},href:e},this.props.userName):"全站贵宾"===this.props.privilege?s=i.createElement("a",{style:{color:"blue"},href:e},this.props.userName):"注册用户"===this.props.privilege||"匿名"==this.props.privilege||"匿名用户"===this.props.privilege?s=i.createElement("a",{style:{color:"black"},href:e},this.props.userName):"管理员"===this.props.privilege&&(s=i.createElement("a",{style:{color:"red"},href:e},this.props.userName)),i.createElement("div",{className:"replyRoot"},i.createElement("div",{className:"row",style:{width:"100%",display:"flex",marginBottom:"0.625rem"}},i.createElement("div",{className:"row mouse-userDetails",style:{height:"15.625rem"}},i.createElement("div",{className:"authorImg"},i.createElement("a",{href:t},i.createElement("img",{src:this.props.userImgUrl}))),i.createElement("div",{className:"userDetails",style:{display:"none",position:"absolute",zindedx:"1"}},o)),i.createElement("div",{className:"column",id:"rpymes"},i.createElement("div",{className:"row",id:"replierMes"},i.createElement("div",{style:{color:"red",marginLeft:"1rem"}},i.createElement("span",null,"最热回复"),i.createElement("span",null,"(第"),i.createElement("span",null,this.props.floor),i.createElement("span",null,"楼)")),i.createElement("div",{className:"rpyClr",style:{marginLeft:"0.625rem"}},s),i.createElement("div",{id:"topicsNumber",style:{marginLeft:"0.625rem",display:"flex",flexWrap:"nowrap",wordBreak:"keepAll",marginRight:"0.75rem"}},a," ",i.createElement("span",{style:{color:"red"}},this.props.sendTopicNumber)," ")),i.createElement("div",{className:"row",style:{display:"flex",flexWrap:"nowrap"}},i.createElement("div",{id:"clockimg",style:{marginLeft:"0.375rem"}},i.createElement("i",{className:"fa fa-clock-o fa-lg fa-fw"})),i.createElement("div",null,i.createElement("span",{className:"timeProp"},moment(this.props.replyTime).format("YYYY-MM-DD HH:mm:ss"))))),i.createElement("div",{id:"operation"},i.createElement(u.Link,{className:"operation",to:""},"引用"),i.createElement(u.Link,{className:"operation",to:""},"编辑"),i.createElement(u.Link,{className:"operation",to:r},"私信"),i.createElement(u.Link,{className:"operation",to:""},"举报"),i.createElement(u.Link,{className:"operation",to:n},"只看此用户"))))},t}(m);t.HotReplier=I;var S=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),t.prototype.render=function(){var e="/user/"+this.props.userId,t=encodeURI(e),n="/message/message?id="+this.props.userId,r=i.createElement("a",{href:t},i.createElement("img",{src:this.props.userImgUrl}));1==this.props.isAnonymous&&(r=i.createElement("img",{src:this.props.userImgUrl}));var a="/topic/"+this.props.topicid+"/user/"+this.props.userId;l(document).ready(function(){l(".authorImg").mouseenter(function(e){var t=e.currentTarget;l(t).next(".userDetails").show()}),l(".mouse-userDetails").mouseleave(function(e){var t=e.currentTarget;l(t).find(".userDetails").hide()})});var o="帖数";this.props.userId||(o="");var s;s=1!=this.props.isAnonymous?i.createElement(T,{userName:this.props.userName,userId:this.props.userId}):null;var c;return"超级版主"===this.props.privilege?c=i.createElement("a",{style:{color:"pink"},href:e},this.props.userName):"全站贵宾"===this.props.privilege?c=i.createElement("a",{style:{color:"blue"},href:e},this.props.userName):"注册用户"===this.props.privilege?c=i.createElement("a",{style:{color:"black"},href:e},this.props.userName):"匿名"==this.props.privilege||"匿名用户"===this.props.privilege?c=i.createElement("div",{style:{color:"black"}},this.props.userName):"管理员"===this.props.privilege&&(c=i.createElement("a",{style:{color:"red"},href:e},this.props.userName)),i.createElement("div",{className:"replyRoot"},i.createElement("div",{className:"row",style:{width:"100%",display:"flex",marginBottom:"0.625rem"}},i.createElement("div",{className:"row mouse-userDetails",style:{height:"15.625rem"}},i.createElement("div",{className:"authorImg"},r),i.createElement("div",{className:"userDetails",style:{display:"none",position:"absolute"}},s)),i.createElement("div",{className:"column",id:"rpymes"},i.createElement("div",{className:"row",id:"replierMes"},i.createElement("div",{style:{marginLeft:"0.625rem"}},i.createElement("span",null,"第"),i.createElement("span",{style:{color:"red"}},this.props.floor),i.createElement("span",null,"楼")),i.createElement("div",{className:"rpyClr",style:{marginLeft:"0.625rem"}},c),i.createElement("div",{id:"topicsNumber",style:{marginLeft:"0.625rem",display:"flex",flexWrap:"nowrap",wordBreak:"keepAll",marginRight:"0.75rem"}},o," ",i.createElement("span",{style:{color:"red"}},this.props.sendTopicNumber)," ")),i.createElement("div",{className:"row",style:{display:"flex",flexWrap:"nowrap"}},i.createElement("div",{id:"clockimg",style:{marginLeft:"0.375rem"}},i.createElement("i",{className:"fa fa-clock-o fa-lg fa-fw"})),i.createElement("div",null,i.createElement("span",{className:"timeProp"},moment(this.props.replyTime).format("YYYY-MM-DD HH:mm:ss"))))),i.createElement("div",{id:"operation"},i.createElement(u.Link,{className:"operation",to:""},"引用"),i.createElement(u.Link,{className:"operation",to:""},"编辑"),i.createElement(u.Link,{className:"operation",to:n},"私信"),i.createElement(u.Link,{className:"operation",to:""},"举报"),i.createElement(u.Link,{className:"operation",to:a},"只看此用户"))))},t}(m);t.Replier=S;var T=function(e){function t(t){var n=e.call(this,t)||this;return n.unfollow=n.unfollow.bind(n),n.follow=n.follow.bind(n),n.state={portraitUrl:null,userName:null,fanCount:null,displayTitle:null,birthday:null,gender:null,prestige:null,levelTitle:null,buttonInfo:"关注",buttonIsDisabled:!1,isFollowing:!1},n}return r(t,e),t.prototype.unfollow=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.setState({buttonIsDisabled:!0,buttonInfo:"取关中"}),e=c.getLocalStorage("accessToken"),t=this.props.userId,n="http://apitest.niconi.cc/user/unfollow/"+t,r=new Headers,r.append("Authorization",e),[4,fetch(n,{method:"DELETE",headers:r})];case 1:if(a=o.sent(),200!==a.status)throw{};return this.setState({buttonIsDisabled:!1,buttonInfo:"重新关注",isFollowing:!1}),[3,3];case 2:return s=o.sent(),this.setState({buttonIsDisabled:!1,buttonInfo:"取关失败",isFollowing:!0}),[3,3];case 3:return[2]}})})},t.prototype.follow=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.setState({buttonIsDisabled:!0,buttonInfo:"关注中"}),e=c.getLocalStorage("accessToken"),t=this.props.userId,n="http://apitest.niconi.cc/user/follow/"+t,r=new Headers,r.append("Authorization",e),[4,fetch(n,{method:"POST",headers:r})];case 1:if(a=o.sent(),200!==a.status)throw{};return this.setState({buttonIsDisabled:!1,buttonInfo:"取消关注",isFollowing:!0}),[3,3];case 2:return s=o.sent(),this.setState({buttonIsDisabled:!1,buttonInfo:"关注失败",isFollowing:!1}),[3,3];case 3:return[2]}})})},t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return[4,c.getUserDetails(this.props.userName,this.context.router)];case 1:return e=t.sent(),this.setState({portraitUrl:e.portraitUrl,userName:e.userName,fanCount:e.fanCount,displayTitle:e.displayTitle,birthday:e.birthday,prestige:e.prestige,gender:e.gender,levelTitle:e.levelTitle,isFollowing:e.isFollowing,buttonInfo:e.isFollowing?"取消关注":"关注"}),[2]}})})},t.prototype.render=function(){var e=this.state.displayTitle;null===this.state.displayTitle&&(e=this.state.levelTitle);var t,n=moment(this.state.birthday).format("YYYY");t="9999"===n?moment(this.state.birthday).format("MM-DD"):moment(this.state.birthday).format("YYYY-MM-DD"),null==this.state.birthday&&(t="保密");var r;r=0===this.state.gender?i.createElement("i",{style:{color:"pink"},className:"fa fa-venus fa-lg fa-fw"}):i.createElement("i",{style:{color:"blue"},className:"fa fa-mars fa-lg fa-fw"});var a="/user/name/"+this.props.userName,o=encodeURI(a),s=i.createElement("a",{href:o}," ",i.createElement("img",{src:this.state.portraitUrl}));return i.createElement("div",{className:"popup"},i.createElement("div",{className:"popup_title"},i.createElement("div",{className:"row"},i.createElement("div",{className:"row authorImg",style:{marginLeft:"10px",marginTop:"10px"}},s),i.createElement("div",{className:"column",style:{marginLeft:"1.6rem",marginTop:"2rem"}},i.createElement("div",{className:"row"},i.createElement("div",{style:{fontFamily:"微软雅黑",color:"blue",marginRight:"0.63rem",width:"8rem"}}," ",this.state.userName),i.createElement("div",{style:{marginRight:"0.63rem",fontSize:"1rem"}},"   粉丝  "),i.createElement("div",{style:{color:"red",fontSize:"1rem"}},this.state.fanCount)),i.createElement("div",{className:"row",style:{marginTop:"0.63rem",fontSize:"0.87rem"}},e)),i.createElement("div",null,i.createElement("button",{className:"followuser",id:this.state.isFollowing?"":"follow",onClick:this.state.isFollowing?this.unfollow:this.follow,disabled:this.state.buttonIsDisabled},this.state.buttonInfo))),i.createElement("div",{className:"row",style:{fontSize:"0.87rem"}},i.createElement("div",{style:{marginLeft:"7.2rem"}},"威望 ",this.state.prestige),i.createElement("div",{style:{marginLeft:"1rem"}},"生日 ",t),i.createElement("div",{style:{marginLeft:"1rem"}},r))))},t}(m);t.UserDetails=T;var k=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.showManageUI=r.showManageUI.bind(r),r.nextPage=r.nextPage.bind(r),r.lastPage=r.lastPage.bind(r),r.update=r.update.bind(r),r.state={likeNumber:1,dislikeNumber:1,likeState:0,awardInfo:[],info:[],awardPage:1},r}return r(t,e),t.prototype.update=function(){console.log(this.props.k),this.props.update()},t.prototype.nextPage=function(){return a(this,void 0,void 0,function(){var e,t,n,r;return o(this,function(a){switch(a.label){case 0:return e=this.state.awardPage,[4,c.getAwardInfo(this.props.postid,e+1)];case 1:return t=a.sent(),n=t.map(this.generateAwardInfo.bind(this)),[4,Promise.all(n)];case 2:return r=a.sent(),this.setState({info:r,awardPage:e+1}),[2]}})})},t.prototype.lastPage=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a;return o(this,function(o){switch(o.label){case 0:return e="#awardPager"+this.props.postid,t=this.state.awardPage,1===this.state.awardPage?(l(e).css("disabled","true"),[2]):[4,c.getAwardInfo(this.props.postid,t-1)];case 1:return n=o.sent(),r=n.map(this.generateAwardInfo.bind(this)),[4,Promise.all(r)];case 2:return a=o.sent(),this.setState({info:a,awardPage:t-1}),[2]}})})},t.prototype.showManageUI=function(){var e="#manage"+this.props.postid;l(e).css("display","")},t.prototype.componentDidUpdate=function(){var e="doc-content"+this.props.postid;editormd.markdownToHTML(e,{htmlDecode:"style,script,iframe",emoji:!0,taskList:!0,tex:!0,flowChart:!0,sequenceDiagram:!0,codeFold:!0})},t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s,i;return o(this,function(o){switch(o.label){case 0:return e="#like"+this.props.postid,t="#dislike"+this.props.postid,[4,c.refreshLikeState(this.props.topicid,this.props.postid,this.context.router)];case 1:return n=o.sent(),1===n.likeState?l(e).css("color","red"):2===n.likeState&&l(t).css("color","red"),[4,c.getAwardInfo(this.props.postid,1)];case 2:return r=o.sent(),a=r.map(this.generateAwardInfo.bind(this)),[4,Promise.all(a)];case 3:return s=o.sent(),i="doc-content"+this.props.postid,editormd.markdownToHTML(i,{htmlDecode:"style,script,iframe",emoji:!0,taskList:!0,tex:!0,flowChart:!0,sequenceDiagram:!0,codeFold:!0}),this.setState({likeNumber:n.likeCount,dislikeNumber:n.dislikeCount,likeState:n.likeState,awardInfo:r,info:s}),[2]}})})},t.prototype.generateAwardInfo=function(e){return a(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return[4,c.getPortraitUrl(e.operatorName)];case 1:return t=n.sent(),[2,i.createElement(N,{postId:this.props.postid,userImgUrl:t,content:e.content,reason:e.reason,userName:e.operatorName})]}})})},t.prototype.like=function(){return a(this,void 0,void 0,function(){var e,t,n;return o(this,function(r){switch(r.label){case 0:return e="#like"+this.props.postid,t="#dislike"+this.props.postid,1!==this.state.likeState?[3,2]:[4,c.like(this.props.topicid,this.props.postid,this.context.router)];case 1:return r.sent(),l(e).css("color","black"),[3,7];case 2:return 2!==this.state.likeState?[3,5]:[4,c.dislike(this.props.topicid,this.props.postid,this.context.router)];case 3:return r.sent(),[4,c.like(this.props.topicid,this.props.postid,this.context.router)];case 4:return r.sent(),l(e).css("color","red"),l(t).css("color","black"),[3,7];case 5:return[4,c.like(this.props.topicid,this.props.postid,this.context.router)];case 6:r.sent(),l(e).css("color","red"),r.label=7;case 7:return[4,c.refreshLikeState(this.props.topicid,this.props.postid,this.context.router)];case 8:return n=r.sent(),this.setState({likeNumber:n.likeCount,dislikeNumber:n.dislikeCount,likeState:n.likeState}),[2]}})})},t.prototype.dislike=function(){return a(this,void 0,void 0,function(){var e,t,n;return o(this,function(r){switch(r.label){case 0:return e="#like"+this.props.postid,t="#dislike"+this.props.postid,2!==this.state.likeState?[3,2]:[4,c.dislike(this.props.topicid,this.props.postid,this.context.router)];case 1:return r.sent(),l(t).css("color","black"),[3,7];case 2:return 1!==this.state.likeState?[3,5]:[4,c.like(this.props.topicid,this.props.postid,this.context.router)];case 3:return r.sent(),[4,c.dislike(this.props.topicid,this.props.postid,this.context.router)];case 4:return r.sent(),l(e).css("color","black"),l(t).css("color","red"),[3,7];case 5:return[4,c.dislike(this.props.topicid,this.props.postid,this.context.router)];case 6:r.sent(),l(t).css("color","red"),r.label=7;case 7:return[4,c.refreshLikeState(this.props.topicid,this.props.postid,this.context.router)];case 8:return n=r.sent(),this.setState({likeNumber:n.likeCount,dislikeNumber:n.dislikeCount,likeState:n.likeState}),[2]}})})},t.prototype.render=function(){var e,t="like"+this.props.postid,n="dislike"+this.props.postid,r="doc-content"+this.props.postid,a=i.createElement(d.UbbContainer,{code:this.props.content}),o=i.createElement("div",{id:r},i.createElement("textarea",{name:"editormd-markdown-doc",style:{display:"none"}},this.props.content));e=a,1===this.props.contentType&&(e=o);var s="icon"+this.props.postid,u="#icon"+this.props.postid;if(c.getLocalStorage("userInfo")){var p=c.getLocalStorage("userInfo").privilege,m=c.getLocalStorage("userInfo").name,h=c.getLocalStorage("userInfo").id;if(("管理员"===p||"超级版主"===p||"全站贵宾"===p&&h===this.props.userId)&&l(u).css("display",""),this.props.masters)for(var f=0;f<this.props.masters.length;f++)m===this.props.masters[f]&&l(u).css("display","")}var g="awardPager"+this.props.postid,v=null;0!==this.state.info.length?v=i.createElement("div",{className:"row"},i.createElement("button",{className:"awardPage",id:g,onClick:this.lastPage},"上一页"),i.createElement("button",{className:"awardPage",onClick:this.nextPage},"下一页")):l(".awardInfo").css("display","none");var y=i.createElement("div",{className:"signature"},i.createElement(d.UbbContainer,{code:this.props.signature}));return""==this.props.signature&&(y=null),i.createElement("div",{className:"root",style:{marginTop:"-170px"}},i.createElement("div",{className:"reply-content"},i.createElement("div",{className:"substance"},e),i.createElement(x,{onChange:this.update,postId:this.props.postid,userId:this.props.userId}),i.createElement("div",{className:"comment1"},i.createElement("div",{id:t,className:"upup",style:{marginRight:"0.7rem"}},i.createElement("i",{title:"赞",onClick:this.like.bind(this),className:"fa fa-thumbs-o-up fa-lg"}),i.createElement("span",{className:"commentProp"}," ",this.state.likeNumber)),i.createElement("div",{id:n,className:"downdown"},i.createElement("i",{title:"踩",onClick:this.dislike.bind(this),className:"fa fa-thumbs-o-down fa-lg"}),i.createElement("span",{className:"commentProp"}," ",this.state.dislikeNumber)),i.createElement("div",{id:"commentlike"}," ",i.createElement("div",{className:"commentbutton"},"   评分"),i.createElement("div",{className:"operation1",id:s,style:{display:"none",cursor:"pointer"},onClick:this.showManageUI},"管理"))),y,i.createElement("div",{className:"column awardInfo",style:{borderTop:"2px dashed #EAEAEA"}},this.state.info,v)))},t}(m);t.ReplyContent=k;var P=function(e){function t(t){var n=e.call(this,t)||this;return n.sendUbbTopic=n.sendUbbTopic.bind(n),n.changeEditor=n.changeEditor.bind(n),n.update=n.update.bind(n),n.state={content:"",mode:1},n}return r(t,e),t.prototype.update=function(e){this.setState({content:e})},t.prototype.componentDidMount=function(){s.testEditor=editormd("test-editormd",{width:"100%",height:640,path:"/scripts/lib/editor.md/lib/",saveHTMLToTextarea:!1,imageUpload:!1,imageFormats:["jpg","jpeg","gif","png","bmp","webp"],imageUploadURL:"http://apitest.niconi.cc/file/"})},t.prototype.componentDidUpdate=function(){s.testEditor=editormd("test-editormd",{width:"100%",height:640,path:"/scripts/lib/editor.md/lib/",saveHTMLToTextarea:!1,imageUpload:!1,imageFormats:["jpg","jpeg","gif","png","bmp","webp"],imageUploadURL:"http://apitest.niconi.cc/file/"})},t.prototype.sendUbbTopic=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s;return o(this,function(o){switch(o.label){case 0:return e="http://apitest.niconi.cc/post/topic/"+this.props.topicid,t={content:this.state.content,contentType:0,title:""},n=JSON.stringify(t),r=c.getLocalStorage("accessToken"),a=new Headers,a.append("Authorization",r),a.append("Content-Type","application/json"),[4,fetch(e,{method:"POST",headers:a,body:n})];case 1:return s=o.sent(),this.props.onChange(),this.setState({content:""}),[2]}})})},t.prototype.sendMdTopic=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,i,l,u;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),e="http://apitest.niconi.cc/post/topic/"+this.props.topicid,t=s.testEditor.getMarkdown(),n={content:t,contentType:1,title:""},r=JSON.stringify(n),a=c.getLocalStorage("accessToken"),i=new Headers,i.append("Authorization",a),i.append("Content-Type","application/json"),[4,fetch(e,{method:"POST",headers:i,body:r})];case 1:return l=o.sent(),402===l.status&&alert("请输入内容"),s.testEditor.setMarkdown(""),this.props.onChange(),this.setState({content:""}),[3,3];case 2:return u=o.sent(),console.log("Error"),console.log(u),[3,3];case 3:return[2]}})})},t.prototype.changeEditor=function(){0===this.state.mode?this.setState({mode:1}):this.setState({mode:0})},t.prototype.upload=function(e){return a(this,void 0,void 0,function(){var t,n,r,a,a,i,l;return o(this,function(o){switch(o.label){case 0:return t=e.target.files,[4,c.uploadFile(t[0])];case 1:return n=o.sent(),r=n.content,1===this.state.mode?(a="![](http://apitest.niconi.cc"+r+")",s.testEditor.appendMarkdown(a)):(a="[img]http://apitest.niconi.cc"+r+"[/img]",i=this.state.content,l=i+a,this.setState({content:l})),[2]}})})},t.prototype.getInitialState=function(){return{value:""}},t.prototype.handleChange=function(e){this.setState({content:e.target.value})},t.prototype.render=function(){var e;return 0===this.state.mode?("使用UBB模式编辑",e=i.createElement("div",null,i.createElement(p.UbbEditor,{update:this.update}),i.createElement("div",{className:"row",style:{justifyContent:"center",marginBottom:"1.25rem "}},i.createElement("div",{id:"post-topic-button",onClick:this.sendUbbTopic,className:"button blue",style:{marginTop:"1.25rem",width:"4.5rem",letterSpacing:"0.3125rem"}},"回复"),i.createElement("div",{id:"post-topic-changeMode",onClick:this.changeEditor.bind(this),className:"button blue",style:{marginTop:"1.25rem",width:"4.5rem",letterSpacing:"0.3125rem"}},"切换到Markdown编辑器            ")," "))):("使用Markdown编辑",e=i.createElement("div",{id:"sendTopic"},i.createElement("form",null,i.createElement("div",{id:"test-editormd",className:"editormd"},i.createElement("textarea",{className:"editormd-markdown-textarea",name:"test-editormd-markdown-doc",value:this.state.content}))),i.createElement("div",{className:"row",style:{justifyContent:"center",marginBottom:"1.25rem "}},i.createElement("div",{id:"post-topic-button",onClick:this.sendMdTopic.bind(this),className:"button blue",style:{marginTop:"1.25rem",width:"4.5rem",letterSpacing:"0.3125rem"}},"回复"),i.createElement("div",{id:"post-topic-changeMode",onClick:this.changeEditor,className:"button blue",style:{marginTop:"1.25rem",width:"4.5rem",letterSpacing:"0.3125rem"}},"切换到UBB编辑器")))),i.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column"}},i.createElement("form",{method:"post",encType:"multipart/form-data"},i.createElement("input",{type:"file",id:"upload-files",onChange:this.upload.bind(this)})),e)},t}(m);t.SendTopic=P;var x=function(e){function t(t){var n=e.call(this,t)||this;return n.wealthInput=n.wealthInput.bind(n),n.prestigeInput=n.prestigeInput.bind(n),n.reasonInput=n.reasonInput.bind(n),n.tpdaysInput=n.tpdaysInput.bind(n),n.confirm=n.confirm.bind(n),n.showAwardUI=n.showAwardUI.bind(n),n.showPunishUI=n.showPunishUI.bind(n),n.showDeleteUI=n.showDeleteUI.bind(n),n.state={wealth:1e3,prestige:0,reason:"",tpdays:0,UI:"Award",tips:""},n}return r(t,e),t.prototype.showAwardUI=function(){this.setState({UI:"Award"})},t.prototype.showPunishUI=function(){this.setState({UI:"Punish"})},t.prototype.showDeleteUI=function(){this.setState({UI:"Delete"})},t.prototype.confirm=function(){if(l("input[name='reason']:checked").val()){c.awardWealth(l("input[name='reason']:checked").val(),this.state.wealth,this.props.postId);var e="#manage"+this.props.postId;l(e).css("display","none"),this.props.onChange()}else{if(""===this.state.reason)return console.log("请输入原因！"),this.setState({tips:"请输入原因！"}),!1;c.awardWealth(this.state.reason,this.state.wealth,this.props.postId);var e="#manage"+this.props.postId;l(e).css("display","none"),this.setState({reason:""}),this.props.onChange()}},t.prototype.wealthInput=function(e){this.setState({wealth:e.target.value})},t.prototype.prestigeInput=function(e){this.setState({prestige:e.target.value})},t.prototype.reasonInput=function(e){this.setState({reason:e.target.value})},t.prototype.tpdaysInput=function(e){this.setState({tpdays:e.target.value})},t.prototype.render=function(){var e,t=i.createElement("div",{className:"column",id:"award"},i.createElement("div",{className:"row manageOperation"},i.createElement("div",{className:"manageObject"},"财富值"),i.createElement("input",{type:"text",value:this.state.wealth,onChange:this.wealthInput})),i.createElement("div",{className:"row manageOperation"},i.createElement("div",{className:"manageObject"},"威望"),i.createElement("input",{type:"text",value:this.state.prestige,onChange:this.prestigeInput})),i.createElement("div",{className:"column manageOperation"},i.createElement("div",{className:"manageObject"},"原因"),i.createElement("div",{className:"row"},i.createElement("div",{className:"row"},i.createElement("input",{type:"radio",name:"reason",value:"好文章"}),i.createElement("div",null,"好文章")),i.createElement("div",{className:"row"},i.createElement("input",{type:"radio",name:"reason",value:"有用资源"}),i.createElement("div",null,"有用资源")),i.createElement("div",{className:"row"},i.createElement("input",{type:"radio",name:"reason",value:"热心回复"}),i.createElement("div",null,"热心回复"))),i.createElement("input",{type:"text",value:this.state.reason,onChange:this.reasonInput}),i.createElement("div",null,this.state.tips))),n=i.createElement("div",{className:"column",id:"punish"},i.createElement("div",{className:"row manageOperation"},i.createElement("div",{className:"manageObject"},"扣威望"),i.createElement("input",{type:"text",value:this.state.prestige,onChange:this.prestigeInput})),i.createElement("div",{className:"row manageOperation"},i.createElement("div",{className:"manageObject"},"禁止发言(天)"),i.createElement("input",{type:"text",value:this.state.tpdays,onChange:this.tpdaysInput})),i.createElement("div",{className:"row manageOperation"},i.createElement("div",{className:"manageObject"},"原因"),i.createElement("input",{type:"text",value:this.state.reason,onChange:this.reasonInput}),i.createElement("div",null,this.state.tips))),r=i.createElement("div",{className:"column",id:"punish"},i.createElement("div",{className:"row manageOperation"},i.createElement("div",{className:"manageObject"},"删除原因"),i.createElement("input",{type:"text",value:this.state.reason,onChange:this.reasonInput}))),a="manage"+this.props.postId;return e=t,"Award"===this.state.UI&&(e=t),"Punish"===this.state.UI&&(e=n),"Delete"===this.state.UI&&(e=r),i.createElement("div",{style:{display:"none"},id:a,className:"postManagement"},i.createElement("div",{className:"manageUI"},i.createElement("div",{className:"row manageOptions"},i.createElement("div",{className:"manageOptions-icon",onClick:this.showAwardUI,style:{color:"#FF7F00"}},"奖励"),i.createElement("div",{className:"manageOptions-icon",onClick:this.showPunishUI,style:{color:"red"}},"惩罚"),i.createElement("div",{className:"manageOptions-icon",onClick:this.showDeleteUI},"删除"))),e,i.createElement("button",{onClick:this.confirm,className:"confirmManagement"},"确认"))},t}(i.Component);t.PostManagement=x;var O=function(e){function t(t){var n=e.call(this,t)||this;return n.state={boardId:"",topicId:"",boardName:"",title:""},n}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return[4,c.getCategory(this.props.topicId,this.context.router)];case 1:return e=t.sent(),this.setState({boardId:e.boardId,topicId:e.topicId,boardName:e.boardName,title:e.title}),[2]}})})},t.prototype.render=function(){var e="/list/"+this.state.boardId+"/normal",t="/topic/"+this.state.topicId;return i.createElement("div",{style:{color:"blue",fontSize:"1rem"}},"››",i.createElement("a",{style:{color:"blue",fontSize:"1rem"},href:"/"},"首页")," → ",i.createElement("a",{style:{color:"blue",fontSize:"1rem"},href:e},this.state.boardName)," → ",i.createElement("a",{style:{color:"blue",fontSize:"1rem",overflow:"hidden",textOverflow:"ellipsis",width:"10rem"},href:t},this.state.title))},t}(i.Component);t.Category=O},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return a.createElement("div",{className:"user-post"},a.createElement("div",{className:"user-post-info"},a.createElement("a",{className:"user-post-board",href:"/list/"+this.props.userRecentPost.boardId},this.props.userRecentPost.board),a.createElement("a",{className:"user-post-date"},this.props.userRecentPost.date),a.createElement("a",{className:"user-post-title"},this.props.userRecentPost.title)),a.createElement("div",{className:"user-post-content"},a.createElement("p",null,a.createElement("a",{href:"/topic/"+this.props.userRecentPost.id},this.props.userRecentPost.content)),this.props.userRecentPost.approval?a.createElement("a",{className:"fa-thumbs-o-up"}," "+this.props.userRecentPost.approval):null,this.props.userRecentPost.disapproval?a.createElement("a",{className:"fa-thumbs-o-down"}," "+this.props.userRecentPost.disapproval):null))},t}(a.Component);t.UserCenterExactActivitiesPost=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(3),s=n(7),i=n(12),c=n(16),l=n(18),u=n(19),p=n(21),d=n(22),m=n(23),h=n(24),f=n(25),g=n(26),v=n(27),y=n(13),b=n(28),E=n(29),w=n(30),N=n(31),_=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.match=t.match,r}return r(t,e),t}(a.Component);t.RouteComponent=_;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return a.createElement("div",{style:{width:"100%"}},a.createElement(o.BrowserRouter,null,a.createElement("div",{style:{backGroundColor:"#F5FAFD",justifyContent:"center",display:"flex",flexDirection:"column",alignItems:"center",width:"100%",minWidth:"1140px"}},a.createElement(h.Header,null),a.createElement(o.Route,{exact:!0,path:"/",component:g.MainPage}),a.createElement(o.Route,{exact:!0,path:"/topic/:topicid/:page?",component:s.Post}),a.createElement(o.Route,{exact:!0,path:"/topic/:topicid/user/:userId/:page?",component:c.CurUserPost}),a.createElement(o.Route,{path:"/list/:boardId/:type?/:page?",component:i.List}),a.createElement(o.Route,{exact:!0,path:"/boardlist",component:l.BoardList}),a.createElement(o.Route,{path:"/usercenter",component:u.UserCenter}),a.createElement(o.Route,{path:"/message",component:p.Message}),a.createElement(o.Route,{path:"/focus",component:m.Focus}),a.createElement(o.Route,{path:"/newtopics",component:d.AllNewTopic}),a.createElement(o.Route,{path:"/user",component:v.User}),a.createElement(o.Route,{path:"/logon",component:y.LogOn}),a.createElement(o.Route,{path:"/search",component:w.Search}),a.createElement(o.Route,{path:"/searchBoard",component:N.SearchBoard}),a.createElement(o.Route,{path:"/createtopic/:boardId",component:b.CreateTopic}),a.createElement(o.Route,{path:"/status/logout",component:E.LogOut}),a.createElement(o.Route,{path:"/status/UnauthorizedBoard",component:E.UnauthorizedBoard}),a.createElement(o.Route,{path:"/status/UnauthorizedTopic",component:E.UnauthorizedTopic}),a.createElement(o.Route,{path:"/status/NotFoundTopic",component:E.NotFoundTopic}),a.createElement(o.Route,{path:"/status/NotFoundBoard",component:E.NotFoundBoard}),a.createElement(o.Route,{path:"/status/NotFoundUser",component:E.NotFoundUser}),a.createElement(o.Route,{path:"/status/ServerError",component:E.ServerError}),a.createElement(o.Route,{path:"/status/OperationForbidden",component:E.OperationForbidden}),a.createElement(o.Route,{path:"/status/Disconnected",component:E.Disconnected}),a.createElement(o.Route,{path:"/status/TopicDeleted",component:E.TopicDeleted}),a.createElement(f.Footer,null))))},t}(a.Component);t.App=C},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e="/topic/"+this.props.id,t="/list/"+this.props.boardId;return a.createElement("div",{className:"focus-topic"},a.createElement(s,{userId:this.props.userId,portraitUrl:this.props.portraitUrl}),a.createElement("div",{className:"focus-topic-info1"},a.createElement("div",{className:"focus-topic-authorInfo"},a.createElement(i,{userId:this.props.userId,userName:this.props.userName}),a.createElement("div",{className:"focus-topic-redText"},this.props.fanCount),a.createElement("div",{className:"focus-topic-blackText"},"粉丝")),a.createElement("div",{className:"focus-topic-title"},a.createElement("a",{href:e,target:"_blank"},this.props.title))),a.createElement("div",{className:"focus-topic-info2"},a.createElement("div",{className:"focus-topic-board"},a.createElement("a",{href:t,target:"_blank"},this.props.boardName),"  /  ",moment(this.props.time).format("YYYY-MM-DD HH:mm:ss")),a.createElement("div",{className:"focus-topic-response"},a.createElement("div",null,a.createElement("i",{className:"fa fa-thumbs-o-up","aria-hidden":"true"}),this.props.likeCount),a.createElement("div",null,a.createElement("i",{className:"fa fa-thumbs-o-down","aria-hidden":"true"}),this.props.dislikeCount),a.createElement("div",null,a.createElement("i",{className:"fa fa-commenting-o","aria-hidden":"true"}),this.props.replyCount),a.createElement("div",null,a.createElement("i",{className:"fa fa-eye","aria-hidden":"true"}),this.props.hitCount))))},t}(a.Component);t.FocusTopicSingle=o;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){if(this.props.userId){var e="/user/"+this.props.userId;return a.createElement("a",{href:e,target:"_blank"},a.createElement("img",{className:"focus-topic-portraitUrl",src:this.props.portraitUrl}))}return a.createElement("img",{className:"focus-topic-portraitUrl",src:this.props.portraitUrl})},t}(a.Component);t.PortaritrUrl=s;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){if(this.props.userId){var e="/user/"+this.props.userId;return a.createElement("a",{href:e,target:"_blank",className:"focus-topic-blackText"},a.createElement("div",{className:"focus-topic-blackText"},this.props.userName))}return a.createElement("div",{className:"focus-topic-blackText"},this.props.userName)},t}(a.Component);t.UserName=i;var c=function(){function e(){}return e}();t.PortaritrUrlProps=c;var l=function(){function e(){}return e}();t.UserNameProps=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e,t=this,n=[],r={backgroundColor:"#ccc"};if(this.props.totalPage<=7){for(e=this.props.totalPage;e--;)n.unshift(e+1);n=n.map(function(e,n){return a.createElement("li",null,a.createElement("a",{href:""+t.props.href+e},a.createElement("button",{type:"button",style:e==t.props.currentPage?r:{}},e)))})}else if(this.props.currentPage-1<=3){for(e=7;e--;)n.unshift(e+1);n=n.map(function(e,n){return a.createElement("li",null,a.createElement("a",{href:""+t.props.href+e},a.createElement("button",{type:"button",style:e==t.props.currentPage?r:{}},e)))}),n.push(a.createElement("li",null,a.createElement("button",{disabled:!0},"···"))),n.push(a.createElement("li",null,a.createElement("a",{href:""+this.props.href+this.props.totalPage},a.createElement("button",{type:"button"},this.props.totalPage))))}else if(this.props.totalPage-this.props.currentPage<=3){for(e=7;e--;)n.unshift(e-6+this.props.totalPage);n=n.map(function(e,n){return a.createElement("li",null,a.createElement("a",{href:""+t.props.href+e},a.createElement("button",{type:"button",style:e==t.props.currentPage?r:{}},e)))}),n.unshift(a.createElement("li",null,a.createElement("button",{disabled:!0},"···"))),n.unshift(a.createElement("li",null,a.createElement("a",{href:this.props.href+"1"},a.createElement("button",{type:"button"},1))))}else{for(e=7;e--;)n.unshift(e-3+this.props.currentPage);n=n.map(function(e,n){return a.createElement("li",null,a.createElement("a",{href:""+t.props.href+e},a.createElement("button",{type:"button",disabled:e==t.props.currentPage,style:e==t.props.currentPage?r:{}},e)))}),n.push(a.createElement("li",null,a.createElement("button",{disabled:!0},"···"))),n.push(a.createElement("li",null,a.createElement("a",{href:""+this.props.href+this.props.totalPage},a.createElement("button",{type:"button"},this.props.totalPage)))),n.unshift(a.createElement("li",null,a.createElement("button",{disabled:!0},"···"))),n.unshift(a.createElement("li",null,a.createElement("a",{href:this.props.href+"1"},a.createElement("button",{type:"button"},1))))}return a.createElement("div",{id:"userCenterPageCount"},a.createElement("ul",null,n))},t}(a.Component);t.UserCenterPageCount=o;!function(){function e(){}}()},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(1),c=n(5),l=n(3),u=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),Object.defineProperty(t.prototype,"match",{get:function(){return this.props.match},enumerable:!0,configurable:!0}),t}(s.Component);t.RouteComponent=u;var p=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={boardId:null,bigPaper:"",page:1},r}return r(t,e),t.prototype.componentWillReceiveProps=function(e){return a(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return[4,i.getBasicBoardMessage(e.match.params.boardId,e.match.params.page,this.context.router)];case 1:return t=n.sent(),this.setState({bigPaper:t.bigPaper,page:t.page,boardId:e.match.params.boardId}),[2]}})})},t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return[4,i.getBasicBoardMessage(this.match.params.boardId,this.match.params.page,this.context.router)];case 1:return e=t.sent(),this.setState({bigPaper:e.bigPaper,page:e.page,boardId:this.match.params.boardId}),[2]}})})},t.prototype.render=function(){return s.createElement("div",{id:"listRoot"},s.createElement(d,{boardId:this.match.params.boardId}),s.createElement(m,{key:this.state.page,boardId:this.match.params.boardId}),s.createElement(h,{bigPaper:this.state.bigPaper}),s.createElement(l.Route,{exact:!0,path:"/list/:boardId/normal/:page?",component:w}),s.createElement(l.Route,{exact:!0,path:"/list/:boardId/best/:page?",component:N}),s.createElement(l.Route,{exact:!0,path:"/list/:boardId/save/:page?",component:_}))},t}(u);t.List=p;var d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={boardId:"",boardName:""},n}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return[4,i.getListCategory(this.props.boardId,this.context.router)];case 1:return e=t.sent(),this.setState({boardId:this.props.boardId,boardName:e}),[2]}})})},t.prototype.render=function(){var e="/list/"+this.state.boardId;return s.createElement("div",{className:"row",style:{width:"100%",justifyContent:"flex-start",color:"blue",fontSize:"1rem"}},"››",s.createElement("a",{style:{color:"blue",fontSize:"1rem"},href:"/"},"首页")," → ",s.createElement("a",{style:{color:"blue",fontSize:"1rem"},href:e},this.state.boardName))},t}(u);t.Category=d;var m=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={imgUrl:"/images/ListImg.jpg",listName:"学术信息",todayTopics:210,totalTopics:12e3,adsUrl:"/images/ads.jpg",listManager:[],isAnomynous:!1,isEncrypted:!1,isHidden:!1,isLocked:!1},r}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return[4,i.getBoardMessage(this.props.boardId,this.context.router)];case 1:return e=t.sent(),this.setState({listName:e.name,todayTopics:e.todayCount,totalTopics:e.topicCount,listManager:e.boardMasters}),[2]}})})},t.prototype.componentWillRecieveProps=function(e){return a(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return[4,i.getBoardMessage(e.boardId,this.context.router)];case 1:return t=n.sent(),this.setState({listName:t.name,todayTopics:t.todayCount,totalTopics:t.topicCount,listManager:t.boardMasters}),[2]}})})},t.prototype.generateMasters=function(e){var t=e.toString(),n=encodeURIComponent(e.toString()),r="/user/name/"+n;return s.createElement("div",{style:{marginRight:"10px"}},s.createElement("a",{href:r},t))},t.prototype.render=function(){return s.createElement("div",{className:"column",style:{width:"100%"}},s.createElement("div",{className:"row",style:{flexDirection:"row",justifyContent:"space-between"}},s.createElement("div",{style:{flexgrow:"1",flexDirection:"row",display:"flex"}},s.createElement("div",{id:"ListImg"},s.createElement("img",{src:this.state.imgUrl})),s.createElement("div",{className:"column",style:{marginTop:"1.25rem",marginLeft:"0.625rempx"}},s.createElement("div",{className:"row",style:{marginTop:"0.625rem"}},s.createElement("div",null,"今日主题"),s.createElement("div",{style:{marginLeft:"0.625rem"}},this.state.todayTopics)),s.createElement("div",{className:"row",style:{marginTop:"0.625rem"}},s.createElement("div",null,"总主题"),s.createElement("div",{style:{marginLeft:"1.25rem"}},this.state.totalTopics)))),s.createElement("div",{className:"column",style:{flexgrow:"0"}},s.createElement("div",{id:"like"},s.createElement("button",{style:{border:"none",color:"#F5FAFC"}},"✰"),"  收藏版面"),s.createElement("div",null,s.createElement("img",{src:this.state.adsUrl,style:{width:"15.625rem",height:"3.75rem"}})))),s.createElement("div",{className:"row",style:{marginTop:"0.3125rem"}},s.createElement("span",null,"版主 : "),s.createElement("div",{className:"row",style:{marginLeft:"0.3125rem"}},this.state.listManager.map(this.generateMasters))))},t}(u);t.ListHead=m;var h=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={notice:"1. 请大家首先阅读心灵之约版规再发帖，如有违规不接受pm卖萌求情；2. 诚征新版主，请去论坛事务版搜之前的版面负责人申请帖并遵循格式发帖，如有不明可以站短站务组组长咨询。3. 不要留联系方式！不要留联系方式！不要留联系方式！重要的事说三遍！，留任何联系方式tp1000天。 4. 更新了版规，增加了tp规则：成功诱导对方留联系方式的，tp1000天；修订了锁沉规则：有意义言之有物、希望继续讨论的长篇读后感将给予保留。5. 请理性讨论，不要人身攻击。违者tp1天起，累犯或严重的，上不封顶。"},r}return r(t,e),t.prototype.render=function(){return s.createElement("div",{className:"notice",style:{marginTop:"0.625rem"}},s.createElement("div",{style:{backgroundColor:"#3399FE"}},s.createElement("div",{style:{marginLeft:"0.9375rem",marginTop:"0.5rem",marginBottom:"0.5rem",fontSize:"1rem",color:"#FFFFFF"}},"本版公告")),s.createElement("div",{className:"substance"},s.createElement(c.UbbContainer,{code:this.props.bigPaper})))},t}(u);t.ListNotice=h;var f=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={pager:[1,2,3,4,5]},r}return r(t,e),t.prototype.generatePageLink=function(e){return s.createElement(v,{pageNumber:e,url:this.props.url,curPage:this.props.page,totalPage:this.props.totalPage})},t.prototype.componentWillReceiveProps=function(e){return a(this,void 0,void 0,function(){var t;return o(this,function(n){return t=i.getPager(e.page,e.totalPage),this.setState({pager:t}),[2]})})},t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){return e=i.getPager(this.props.page,this.props.totalPage),this.setState({pager:e}),[2]})})},t.prototype.render=function(){var e="/createTopic/"+this.props.boardid;return s.createElement("div",{className:"row",style:{width:"100%",marginLeft:"0.3125rem",marginRight:"0.3125rem",marginTop:"0.9375rem",justifyContent:"space-between",alignItems:"flex-end"}},s.createElement("div",{style:{marginBottom:"1.25rem"}},s.createElement(l.Link,{className:"button orange",to:e},"发主题"),s.createElement("button",{className:"button green",style:{marginLeft:"1.25rem"}},"发投票")),s.createElement("div",{id:"pager"},s.createElement("div",{className:"row pagination"},this.state.pager.map(this.generatePageLink.bind(this)))))},t}(s.Component);t.ListButtonAndPager=f;var g=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={pager:[1,2,3,4,5]},r}return r(t,e),t.prototype.generatePageLink=function(e){return s.createElement(v,{pageNumber:e,url:this.props.url,curPage:this.props.page,totalPage:this.props.totalPage})},t.prototype.componentWillReceiveProps=function(e){return a(this,void 0,void 0,function(){var t;return o(this,function(n){return t=i.getPager(e.page,e.totalPage),this.setState({pager:t}),[2]})})},t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){return e=i.getPager(this.props.page,this.props.totalPage),this.setState({pager:e}),[2]})})},t.prototype.render=function(){return s.createElement("div",{className:"row",style:{width:"100%",marginTop:"0.9375rem",justifyContent:"space-between",alignItems:"flex-end"}},s.createElement("div",{id:"pager"},s.createElement("div",{className:"row pagination"},this.state.pager.map(this.generatePageLink.bind(this)))))},t}(s.Component);t.PagerDown=g;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e;return this.props.pageNumber>0?(e=""+this.props.url+this.props.pageNumber,this.props.pageNumber!==this.props.curPage?s.createElement("li",{className:"page-item"},s.createElement(l.Link,{to:e,className:"page-link"},this.props.pageNumber)):s.createElement("li",{className:"page-item active"},s.createElement(l.Link,{to:e,className:"page-link "},this.props.pageNumber))):-1==this.props.pageNumber?(e=""+this.props.url+(this.props.curPage-1),s.createElement("li",{className:"page-item"},s.createElement(l.Link,{className:"page-link",to:e},"‹"))):-2==this.props.pageNumber?(e=""+this.props.url+(this.props.curPage+1),s.createElement("li",{className:"page-item"},s.createElement(l.Link,{className:"page-link",to:e},"›"))):-3==this.props.pageNumber?(e=this.props.url+"1",s.createElement("li",{className:"page-item"}," ",s.createElement(l.Link,{className:"page-link",to:e},"«"))):-4==this.props.pageNumber?(e=""+this.props.url+this.props.totalPage,s.createElement("li",{className:"page-item"},s.createElement(l.Link,{className:"page-link",to:e},"»"))):null},t}(s.Component);t.PageModel=v;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",width:"100%",marginLeft:"0.3125rem",marginRight:"0.3125rem",borderTop:"dashed #EAEAEA thin",marginTop:"1.5625rem",marginBottom:"25px"}},s.createElement("div",{className:"row"},"  ",s.createElement("button",{id:"tagButton"},"全部"),s.createElement("button",{className:"chooseTag"},"dota ",s.createElement("span",{className:"tagNumber"},"1234")),s.createElement("button",{className:"chooseTag"},"csgo ",s.createElement("span",{className:"tagNumber"},"5687"))))},t}(s.Component);t.ListTag=y;var b=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={data:[]},r}return r(t,e),t.prototype.convertTopicToElement=function(e){return s.createElement(C,{key:e.id,title:e.title,userName:e.userName,id:e.id,userId:e.userId,lastPostTime:e.lastPostTime,lastPostUser:e.lastPostUser,likeCount:e.likeCount,dislikeCount:e.dislikeCount,replyCount:e.replyCount,highlightInfo:e.highlightInfo,topState:e.topState,topicState:e.topicState,hitCount:e.hitCount})},t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return[4,i.GetTopTopics(this.props.boardId)];case 1:return e=t.sent(),this.setState({data:e}),[2]}})})},t.prototype.render=function(){return s.createElement("div",null,this.state.data.map(this.convertTopicToElement))},t}(s.Component);t.ListTopContent=b;var E=function(e){function t(t){var n=e.call(this,t)||this;return n.state={data:[]},n}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return[4,i.getBestTopics(this.props.boardId,this.props.curPage)];case 1:return e=t.sent(),this.setState({data:e}),[2]}})})},t.prototype.convertTopicToElement=function(e){return s.createElement(C,{key:e.id,title:e.title,userName:e.userName,id:e.id,userId:e.userId,lastPostTime:e.lastPostTime,lastPostUser:e.lastPostUser,likeCount:e.likeCount,dislikeCount:e.dislikeCount,replyCount:e.replyCount,highlightInfo:e.highlightInfo,topState:e.topState,topicState:e.topicState,hitCount:e.hitCount})},t.prototype.render=function(){return s.createElement("div",null,this.state.data.map(this.convertTopicToElement))},t}(s.Component);t.BestTopics=E;var w=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={items:[],totalPage:0},r}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:return[4,i.getBoardTopicAsync(1,this.match.params.boardId,this.context.router)];case 1:return e=n.sent(),[4,this.getTotalListPage(this.match.params.boardId)];case 2:return t=n.sent(),this.setState({items:e,totalPage:t}),[2]}})})},t.prototype.convertTopicToElement=function(e){return s.createElement(C,{key:e.id,title:e.title,userName:e.userName,id:e.id,userId:e.userId,lastPostTime:e.lastPostTime,lastPostUser:e.lastPostUser,likeCount:e.likeCount,dislikeCount:e.dislikeCount,replyCount:e.replyCount,highlightInfo:e.highlightInfo,topState:e.topState,topicState:e.topicState,hitCount:e.hitCount})},t.prototype.componentWillReceiveProps=function(e){return a(this,void 0,void 0,function(){var t,n,r;return o(this,function(a){switch(a.label){case 0:return n=e.match.params.page,t=n?parseInt(n):1,[4,i.getBoardTopicAsync(t,e.match.params.boardId,this.context.router)];case 1:return r=a.sent(),this.setState({items:r}),[2]}})})},t.prototype.getTotalListPage=function(e){return a(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return[4,i.getListTotalPage(e,this.context.router)];case 1:return t=n.sent(),[2,t]}})})},t.prototype.render=function(){var e=this.match.params.page?parseInt(this.match.params.page):1,t=null;1!==parseInt(this.match.params.page)&&this.match.params.page||(t=s.createElement("div",null,s.createElement(b,{boardId:this.match.params.boardId})));var n=this.state.items.map(this.convertTopicToElement),r="/list/"+this.match.params.boardId+"/best/",a="/list/"+this.match.params.boardId+"/save/",o="/list/"+this.match.params.boardId+"/normal/";return s.createElement("div",{className:"listContent "},s.createElement(f,{page:e,totalPage:this.state.totalPage,boardid:this.match.params.boardId,url:o}),s.createElement(y,null),s.createElement("div",{className:"row",style:{justifyContent:"space-between"}},s.createElement("div",{className:"row",style:{alignItems:"center"}},s.createElement("div",{className:"listContentTag"},"全部"),s.createElement("div",{className:"listContentTag"},s.createElement("a",{href:r},"精华")),s.createElement("div",{className:"listContentTag"},s.createElement("a",{href:a},"保存"))),s.createElement("div",{className:"row",style:{alignItems:"center"}},s.createElement("div",{style:{marginRight:"14rem"}},s.createElement("span",null,"作者")),s.createElement("div",{style:{marginRight:"7.6875rem"}},s.createElement("span",null,"最后回复")))),t,s.createElement("div",null,n),s.createElement(g,{page:e,totalPage:this.state.totalPage,boardid:this.match.params.boardId,url:o}))},t}(u);t.ListContent=w;var N=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={items:[],totalPage:0},r}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:return[4,i.getBestTopics(1,this.match.params.boardId)];case 1:return e=n.sent(),t=e.totalPage,this.setState({items:e.boardtopics,totalPage:t}),[2]}})})},t.prototype.convertTopicToElement=function(e){return s.createElement(C,{key:e.id,title:e.title,userName:e.userName,id:e.id,userId:e.userId,lastPostTime:e.lastPostTime,lastPostUser:e.lastPostUser,likeCount:e.likeCount,dislikeCount:e.dislikeCount,replyCount:e.replyCount,highlightInfo:e.highlightInfo,topState:e.topState,topicState:e.topicState,hitCount:e.hitCount})},t.prototype.componentWillReceiveProps=function(e){return a(this,void 0,void 0,function(){var t,n,r,a;return o(this,function(o){switch(o.label){case 0:return n=e.match.params.page,t=n?parseInt(n):1,[4,i.getBestTopics(t,e.match.params.boardId)];case 1:return r=o.sent(),a=r.totalPage,this.setState({items:r.boardtopics,totalPage:a}),[2]}})})},t.prototype.render=function(){var e=this.match.params.page?parseInt(this.match.params.page):1,t=null;1!==parseInt(this.match.params.page)&&this.match.params.page||(t=s.createElement("div",null,s.createElement(b,{boardId:this.match.params.boardId})));var n=this.state.items.map(this.convertTopicToElement),r="/list/"+this.match.params.boardId+"/best/",a="/list/"+this.match.params.boardId+"/save/",o="/list/"+this.match.params.boardId+"/normal/";return s.createElement("div",{className:"listContent "},s.createElement(f,{page:e,totalPage:this.state.totalPage,boardid:this.match.params.boardId,url:r}),s.createElement(y,null),s.createElement("div",{className:"row",style:{justifyContent:"space-between"}},s.createElement("div",{className:"row",style:{alignItems:"center"}},s.createElement("div",{className:"listContentTag"},s.createElement("a",{href:o},"全部")),s.createElement("div",{className:"listContentTag"},"精华"),s.createElement("div",{className:"listContentTag"},s.createElement("a",{href:a},"保存"))),s.createElement("div",{className:"row",style:{alignItems:"center"}},s.createElement("div",{style:{marginRight:"14rem"}},s.createElement("span",null,"作者")),s.createElement("div",{style:{marginRight:"7.6875rem"}},s.createElement("span",null,"最后回复")))),t,s.createElement("div",null,n),s.createElement(g,{page:e,totalPage:this.state.totalPage,boardid:this.match.params.boardId,url:r}))},t}(u);t.ListBestContent=N;var _=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={items:[],totalPage:0},r}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:return[4,i.getSaveTopics(1,this.match.params.boardId)];case 1:return e=n.sent(),console.log(e),t=e.totalPage,this.setState({items:e.boardtopics,totalPage:t}),[2]}})})},t.prototype.convertTopicToElement=function(e){return s.createElement(C,{key:e.id,title:e.title,userName:e.userName,id:e.id,userId:e.userId,lastPostTime:e.lastPostTime,lastPostUser:e.lastPostUser,likeCount:e.likeCount,dislikeCount:e.dislikeCount,replyCount:e.replyCount,highlightInfo:e.highlightInfo,topState:e.topState,topicState:e.topicState,hitCount:e.hitCount})},t.prototype.componentWillReceiveProps=function(e){return a(this,void 0,void 0,function(){var t,n,r;return o(this,function(a){switch(a.label){case 0:return n=e.match.params.page,t=n?parseInt(n):1,[4,i.getSaveTopics(t,e.match.params.boardId)];case 1:return r=a.sent(),this.setState({items:r.boardtopics}),[2]}})})},t.prototype.render=function(){var e=this.match.params.page?parseInt(this.match.params.page):1,t=null;1!==parseInt(this.match.params.page)&&this.match.params.page||(t=s.createElement("div",null,s.createElement(b,{boardId:this.match.params.boardId})));var n=this.state.items.map(this.convertTopicToElement),r="/list/"+this.match.params.boardId+"/best/",a=(this.match.params.boardId,"/list/"+this.match.params.boardId+"/normal/");return s.createElement("div",{className:"listContent "},s.createElement(f,{page:e,totalPage:this.state.totalPage,boardid:this.match.params.boardId,url:a}),s.createElement(y,null),s.createElement("div",{className:"row",style:{justifyContent:"space-between"}},s.createElement("div",{className:"row",style:{alignItems:"center"}},s.createElement("div",{className:"listContentTag"},s.createElement("a",{href:a},"全部")),s.createElement("div",{className:"listContentTag"},s.createElement("a",{href:r},"精华")),s.createElement("div",{className:"listContentTag"},"保存")),s.createElement("div",{className:"row",style:{alignItems:"center"}},s.createElement("div",{style:{marginRight:"14rem"}},s.createElement("span",null,"作者")),s.createElement("div",{style:{marginRight:"7.6875rem"}},s.createElement("span",null,"最后回复")))),t,s.createElement("div",null,n),s.createElement(g,{page:e,totalPage:this.state.totalPage,boardid:this.match.params.boardId,url:a}))},t}(u);t.ListSaveContent=_;var C=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={pager:[]},r}return r(t,e),t.prototype.componentWillMount=function(){var e=this.props.replyCount+1,t=(e-e%10)/10+1;e%10==0&&(t=e/10);var n=i.getListPager(t);this.props.id;this.setState({pager:n})},t.prototype.componentDidMount=function(){var e="#title"+this.props.id;null!=this.props.highlightInfo&&(1==this.props.highlightInfo.isBold&&$(e).css("font-weight","bold"),1==this.props.highlightInfo.isItalic&&$(e).css("font-style","italic"),null!=this.props.highlightInfo.color&&$(e).css("color",this.props.highlightInfo.color)),this.setState({})},t.prototype.generateListPager=function(e){var t="/topic/"+this.props.id+"/"+e;return-1!=e?s.createElement("div",{style:{marginRight:"0.3rem"}},s.createElement("a",{style:{color:"red"},href:t},e)):s.createElement("div",{style:{marginRight:"0.3rem"}},"...")},t.prototype.render=function(){var e;e=0===this.props.topState?"changeColor":"changeTopColor";var t,n="topic"+this.props.id,r="/topic/"+this.props.id,a="title"+this.props.id;0===this.props.topState?t=s.createElement("i",{style:{color:"#B0B0B0"},className:"fa fa-envelope fa-lg"}):2===this.props.topState?t=s.createElement("i",{style:{color:"orange"},className:"fa fa-chevron-circle-up fa-lg"}):4===this.props.topState&&(t=s.createElement("i",{style:{color:"red"},className:"fa fa-arrow-circle-up fa-lg"})),this.props.replyCount>100&&0===this.props.topState&&(t=s.createElement("i",{style:{color:"red"},className:"fa fa-envelope-open fa-lg"}));var o=i.getLocalStorage("userInfo").name;o||(o=""),o===this.props.userName&&(t=s.createElement("i",{style:{color:"#FFC90E"},className:"fa fa-envelope fa-lg"})),1===this.props.topicState&&(t=s.createElement("i",{style:{color:"#B0B0B0"},className:"fa fa-lock fa-lg"}));var c=this.props.hitCount;return this.props.hitCount>1e5?c=((this.props.hitCount-this.props.hitCount%1e4)/1e4).toString()+"万":this.props.hitCount>1e4&&(c=(this.props.hitCount/1e4).toFixed(1).toString()+"万"),s.createElement("div",{id:e},s.createElement("div",{className:"row topicInList",id:n},s.createElement("div",{style:{display:"flex",marginLeft:"0.5rem",alignItems:"flex-end",lineHeight:"1rem"}},t,s.createElement(l.Link,{to:r},s.createElement("div",{className:"listTitle",id:a,style:{marginLeft:"0.5rem"}}," ",this.props.title)),s.createElement("div",{style:{display:"flex",fontSize:"0.75rem",marginBottom:"-2px"}},this.state.pager.map(this.generateListPager.bind(this)))),s.createElement("div",{className:"row",style:{width:"50%",flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between",fontSize:"0.75rem",marginBottom:"-4px"}},s.createElement("div",{style:{width:"8rem",textAlign:"center"}}," ",s.createElement("span",null,s.createElement("a",null,this.props.userName||"匿名"))),s.createElement("div",{className:"row",style:{width:"10rem"}},s.createElement("div",{id:"liked",style:{display:"flex",width:"2rem"}},s.createElement("i",{className:"fa fa-thumbs-o-up fa-lg"}),s.createElement("span",{className:"timeProp tagSize"},this.props.likeCount)),s.createElement("div",{id:"disliked",style:{display:"flex",width:"4.5rem"}},s.createElement("i",{className:"fa fa-eye fa-lg"}),s.createElement("span",{className:"timeProp tagSize"},c)),s.createElement("div",{id:"commentsAmount",style:{display:"flex",width:"3.5rem"}},s.createElement("i",{className:"fa fa-commenting-o fa-lg"}),s.createElement("span",{className:"timeProp tagSize"},this.props.replyCount))),s.createElement("div",{id:"lastReply",style:{width:"8rem",textAlign:"center"}},s.createElement("div",null,this.props.lastPostUser," ")),s.createElement("div",{style:{width:"12rem",textAlign:"center"}},s.createElement("div",{style:{wordBreak:"keepAll"}},moment(this.props.lastPostTime).format("YY-MM-DD HH:mm"))))))},t}(s.Component);t.TopicTitleAndContent=C},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(3),s=n(89),i=n(90),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return a.createElement(o.BrowserRouter,null,a.createElement("div",null,a.createElement(o.Route,{path:"/logon",exact:!0,component:s.LogOnExact}),a.createElement(o.Route,{path:"/logon/logoff",component:i.LogOff})))},t}(a.Component);t.LogOn=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"img"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=e,s=t.value("title"),c=parseInt(t.value("img"));return n.options.allowImage?n.options.compatibility===o.UbbCompatiblityMode.EnforceMorden?1===c?a.createElement(i,{imageUri:r,title:s,isShowed:!1}):a.createElement("figure",null,a.createElement(i,{imageUri:r,title:s,isShowed:!0}),a.createElement("figcaption",null,s)):1===c?a.createElement(i,{imageUri:r,title:s,isShowed:!1}):a.createElement(i,{imageUri:r,title:s,isShowed:!0}):a.createElement(i,{imageUri:r,title:s,isShowed:!1})},t}(o.TextTagHandler);t.ImageTagHandler=s;var i=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isShowed:n.props.isShowed},n.toggleIsShowed=n.toggleIsShowed.bind(n),n}return r(t,e),t.prototype.toggleIsShowed=function(){console.log("显示图片！"),this.setState(function(e){return{isShowed:!e.isShowed}})},t.prototype.render=function(){return this.state.isShowed?a.createElement("img",{style:{maxWidth:"100%"},src:this.props.imageUri,alt:this.props.title}):a.createElement("div",{className:"hiddenImage",onClick:this.toggleIsShowed},"点击查看图片")},t}(a.Component);t.Image=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(1),c=(function(){function e(){}}(),function(e){function t(t){var n=e.call(this,t)||this;return n.state={value:"",selectionEnd:0,selectionStart:0,clicked:!1,extendValue:"",extendTagName:""},n.handleExtendValueChange=n.handleExtendValueChange.bind(n),n.handleTextareaChange=n.handleTextareaChange.bind(n),n.handleTextareaBlur=n.handleTextareaBlur.bind(n),n.handleButtonClick=n.handleButtonClick.bind(n),n}return r(t,e),t.prototype.handleExtendButtonClick=function(e){this.setState(function(t){return{extendTagName:t.extendTagName!==e?e:""}}),this.input.focus()},t.prototype.handleExtendValueChange=function(e){this.setState({extendValue:e})},t.prototype.handleTextareaChange=function(e){this.props.update(e),this.setState({value:e})},t.prototype.handleTextareaBlur=function(e,t){this.setState({selectionEnd:t,selectionStart:e})},t.prototype.handleUpload=function(e){return a(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return[4,i.uploadFile(e)];case 1:return t=n.sent(),this.handleButtonClick("img","http://apitest.niconi.cc/"+t.content),[2]}})})},t.prototype.handleButtonClick=function(e,t){void 0===t&&(t="");var n=-1!==["video","audio","img"].indexOf(e),r=-1!==["url"].indexOf(e);this.setState(function(a){var o=a.value.slice(0,a.selectionStart),s=a.value.slice(a.selectionStart,a.selectionEnd),i=a.value.slice(a.selectionEnd,a.value.length);return n?(o=o+"["+e+"]",s=t,i="[/"+e+"]"+i):r?(o=o+"["+e+(t?"="+t:"")+"]",s=s||t,i="[/"+e+"]"+i):(o=o+"["+e+(t?"="+t:"")+"]",i="[/"+e+"]"+i),{value:o+s+i,selectionStart:o.length,selectionEnd:o.length+s.length,clicked:!0,extendTagName:"",extendValue:""}})},t.prototype.componentDidUpdate=function(){this.state.clicked&&(this.content.focus(),this.content.setSelectionRange(this.state.selectionStart,this.state.selectionEnd),this.setState({clicked:!1}))},t.prototype.render=function(){var e=this,t=["",1,2,3,4,5,6,7],n=["颜色","aqua","black","blue","fuchsia","gray","green","lime","maroon","navy","olive","purple","red","silver","teal","white","yellow"],r=s.createElement("textarea",{onInput:function(){return""},value:this.state.value,onChange:function(t){e.handleTextareaChange(t.target.value)},onBlur:function(t){var n=t.target;e.handleTextareaBlur(n.selectionStart,n.selectionEnd)},ref:function(t){e.content=t}});return s.createElement("div",{className:"ubb-editor"},s.createElement("div",{className:"editor-buttons"},s.createElement("div",{className:"editor-buttons-styles"},s.createElement("button",{className:"fa-bold",type:"button",title:"加粗",onClick:function(){e.handleButtonClick("b")}}),s.createElement("button",{className:"fa-italic",type:"button",title:"斜体",onClick:function(){e.handleButtonClick("i")}}),s.createElement("button",{className:"fa-underline",type:"button",title:"下划线",onClick:function(){e.handleButtonClick("u")}}),s.createElement("button",{className:"fa-align-left",type:"button",title:"左对齐",onClick:function(){e.handleButtonClick("align","left")}}),s.createElement("button",{className:"fa-align-center",type:"button",title:"居中",onClick:function(){e.handleButtonClick("align","center")}}),s.createElement("button",{className:"fa-align-right",type:"button",title:"右对齐",onClick:function(){e.handleButtonClick("align","right")}})),s.createElement("div",{className:"editor-buttons-selects"},s.createElement("p",{className:"fa-text-height"}),s.createElement("select",{onChange:function(t){e.handleButtonClick("size",t.target.value),t.target.value=0},value:0},t.map(function(e,t){return s.createElement("option",{value:t,disabled:0===t,style:{display:0===t?"none":""}},e)})),s.createElement("p",{className:"fa-text-height"}),s.createElement("select",{onChange:function(t){e.handleButtonClick("color",t.target.value),t.target.value="颜色"},value:"颜色"},n.map(function(e,t){return s.createElement("option",{value:e,disabled:0===t,style:{backgroundColor:e,display:0===t?"none":""}})}))),s.createElement("div",{className:"editor-buttons-extends"},s.createElement("button",{className:"fa-link",type:"button",title:"插入url",onClick:function(){e.handleExtendButtonClick("url")}}),s.createElement("button",{className:"fa-picture-o",type:"button",title:"插入图片",onClick:function(){e.handleExtendButtonClick("img")}}),s.createElement("button",{className:"fa-film",type:"button",title:"插入视频",onClick:function(){e.handleExtendButtonClick("video")}}),s.createElement("button",{className:"fa-music",type:"button",title:"插入音频",onClick:function(){e.handleExtendButtonClick("audio")}}))),s.createElement("div",{className:"ubb-extend",style:{height:this.state.extendTagName?"2rem":"0rem"}},s.createElement("p",null,"请输入地址："),s.createElement("input",{type:"text",value:this.state.extendValue,onChange:function(t){e.handleExtendValueChange(t.target.value)},ref:function(t){e.input=t}}),"img"===this.state.extendTagName?s.createElement("label",{className:"fa-upload",htmlFor:"upload"}):null,s.createElement("button",{className:"fa-check",type:"button",onClick:function(){e.handleButtonClick(e.state.extendTagName,e.state.extendValue)}}),s.createElement("button",{className:"fa-remove",type:"button",onClick:function(){e.setState({extendTagName:""})}}),s.createElement("input",{type:"file",id:"upload",accept:"image/*",style:{display:"none"},onChange:function(t){e.handleUpload(t.target.files[0])}})),s.createElement("div",{className:"ubb-content"},r))},t}(s.Component));t.UbbEditor=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(1),c=n(3),l=n(65),u=n(66),p=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),Object.defineProperty(t.prototype,"match",{get:function(){return this.props.match},enumerable:!0,configurable:!0}),t}(s.Component);t.RouteComponent=p;var d=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={page:1,topicid:r.match.params.topicid,totalPage:1,userId:559244},r}return r(t,e),t.prototype.componentWillReceiveProps=function(e){return a(this,void 0,void 0,function(){var t,n,r;return o(this,function(a){switch(a.label){case 0:return t=e.match.params.page?parseInt(e.match.params.page):1,n=e.match.params.userId,[4,this.getTotalPage.bind(this)(this.match.params.topicid)];case 1:return r=a.sent(),console.log("kk"+e.match.params.userId),this.setState({page:t,topicid:e.match.params.topicid,totalPage:r,userId:e.match.params.userId}),[2]}})})},t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n;return o(this,function(r){switch(r.label){case 0:return e=this.match.params.page?parseInt(this.match.params.page):1,[4,this.getTotalPage.bind(this)(this.match.params.topicid)];case 1:return t=r.sent(),n=this.match.params.userId,console.log("this"+n),this.setState({page:e,topicid:this.match.params.topicid,totalPage:t,userId:n}),[2]}})})},t.prototype.getTotalPage=function(e){return a(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,i.getCurUserTotalReplyPage(e,this.match.params.userId,this.context.router)];case 1:return[2,t.sent()]}})})},t.prototype.render=function(){var e=null;return 1==this.state.page&&(e=s.createElement(u.PostTopic,{imgUrl:"/images/ads.jpg",page:this.state.page,topicid:this.state.topicid,userId:this.state.userId})),s.createElement("div",{className:"center",style:{width:"1140px"}},s.createElement(h,{userId:this.state.userId,page:this.state.page,topicid:this.state.topicid,totalPage:this.state.totalPage}),e,s.createElement(c.Route,{path:"/topic/:topicid/user/:userId/:page?",component:m}),s.createElement(g,{userId:this.state.userId,page:this.state.page,topicid:this.state.topicid,totalPage:this.state.totalPage}))},t}(p);t.CurUserPost=d;var m=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={contents:[],masters:[]},r}return r(t,e),t.prototype.getMasters=function(e){return a(this,void 0,void 0,function(){return o(this,function(t){return[2,i.getMasters(e)]})})},t.prototype.componentWillReceiveProps=function(e){return a(this,void 0,void 0,function(){var t,n,r,a,s,c,l,u,p,d;return o(this,function(o){switch(o.label){case 0:return t=e.match.params.page||1,n="TopicContent_"+e.match.params.topicid+"_"+t,a=i.getLocalStorage("accessToken"),s=new Headers,s.append("Authorization",a),c="http://apitest.niconi.cc/user/"+e.match.params.userId,[4,fetch(c,{headers:s})];case 1:return l=o.sent(),[4,l.json()];case 2:return u=o.sent(),p=u.name,[4,i.getCurUserTopicContent(e.match.params.topicid,t,p,e.match.params.userId,this.context.router)];case 3:return r=o.sent(),d=this.getMasters(e.match.params.topicid),this.setState({contents:r,masters:d}),[2]}})})},t.prototype.generateContents=function(e){return s.createElement("div",{className:"reply"},s.createElement("div",{style:{marginTop:"1rem",marginBotton:"0.3125rem",border:"#EAEAEA solid thin"}},s.createElement(l.Replier,{key:e.postId,isAnonymous:e.isAnonymous,userId:e.userId,topicid:e.topicId,userName:e.userName,replyTime:e.time,floor:e.floor,userImgUrl:e.userImgUrl,sendTopicNumber:e.sendTopicNumber,privilege:e.privilege}),s.createElement(l.ReplyContent,{key:e.content,masters:this.state.masters,userId:e.userId,content:e.content,signature:e.signature,topicid:e.topicId,postid:e.postId,contentType:e.contentType})))},t.prototype.render=function(){return s.createElement("div",{className:"center",style:{width:"100%"}},this.state.contents.map(this.generateContents.bind(this)))},t}(p);t.Reply=m;var h=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={pager:[1,2,3,4,5]},r}return r(t,e),t.prototype.generatePageLink=function(e){return s.createElement(f,{userId:this.props.userId,pageNumber:e,topicid:this.props.topicid,curPage:this.props.page,totalPage:this.props.totalPage})},t.prototype.componentWillReceiveProps=function(e){return a(this,void 0,void 0,function(){var t;return o(this,function(n){return t=i.getPager(e.page,e.totalPage),console.log("new="+e.userId),this.setState({pager:t}),[2]})})},t.prototype.render=function(){return s.createElement("div",{className:"row",style:{width:"1140px",height:"50px",marginTop:"15px",justifyContent:"space-between",borderBottom:" #EAEAEA solid thin",alignItems:"flex-end"}},s.createElement("div",{id:"pager"},s.createElement("div",{className:"row pagination"},this.state.pager.map(this.generatePageLink.bind(this)))))},t}(p);t.TopicPager=h;var f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={userName:""},n}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n;return o(this,function(r){switch(r.label){case 0:return[4,fetch("http://apitest.niconi.cc/user/"+this.props.userId)];case 1:return e=r.sent(),console.log("cc"+this.props.userId),[4,e.json()];case 2:return t=r.sent(),n=t.name,this.setState({userName:n}),[2]}})})},t.prototype.render=function(){if(this.props.pageNumber>0){var e="/topic/"+this.props.topicid+"/user/"+this.props.userId+"/"+this.props.pageNumber;return this.props.pageNumber!=this.props.curPage?s.createElement("li",{className:"page-item"},s.createElement(c.Link,{className:"page-link",to:e},this.props.pageNumber)):s.createElement("li",{className:"page-item active"},s.createElement(c.Link,{className:"page-link",to:e},this.props.pageNumber))}if(-1==this.props.pageNumber){var e="/topic/"+this.props.topicid+"/user/"+this.props.userId+"/"+(this.props.curPage-1);return s.createElement("li",{className:"page-item"},s.createElement(c.Link,{className:"page-link",to:e},"<"))}if(-2==this.props.pageNumber){var e="/topic/"+this.props.topicid+"/user/"+this.props.userId+"/"+(this.props.curPage+1);return s.createElement("li",{className:"page-item"},s.createElement(c.Link,{className:"page-link",to:e},">"))}if(-3==this.props.pageNumber){var e="/topic/"+this.props.topicid+"/user/"+this.props.userId+"/1";return s.createElement("li",{className:"page-item"},s.createElement(c.Link,{className:"page-link",to:e},"<<"))}var e="/topic/"+this.props.topicid+"/user/"+this.props.userId+"/"+this.props.totalPage;return s.createElement("li",{className:"page-item"},s.createElement(c.Link,{className:"page-link",to:e},">>"))},t}(s.Component);t.PageModel=f;var g=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={pager:[1,2,3,4,5]},r}return r(t,e),t.prototype.generatePageLink=function(e){return s.createElement(f,{userId:this.props.userId,pageNumber:e,topicid:this.props.topicid,curPage:this.props.page,totalPage:this.props.totalPage})},t.prototype.componentWillReceiveProps=function(e){return a(this,void 0,void 0,function(){var t;return o(this,function(n){return t=i.getPager(e.page,e.totalPage),this.setState({pager:t}),[2]})})},t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){return e=i.getPager(this.props.page,this.props.totalPage),this.setState({pager:e}),[2]})})},t.prototype.render=function(){return s.createElement("div",{className:"row",style:{width:"100%",justifyContent:"space-between",alignItems:"flex-end"}},s.createElement("div",{id:"pager"},s.createElement("div",{className:"row pagination"},this.state.pager.map(this.generatePageLink.bind(this)))))},t}(p);t.TopicPagerDown=g},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(1),s=n(6),i=function(e){function t(t){var n=e.call(this,t)||this;return n.wealthInput=n.wealthInput.bind(n),n.prestigeInput=n.prestigeInput.bind(n),n.reasonInput=n.reasonInput.bind(n),n.tpdaysInput=n.tpdaysInput.bind(n),n.confirm=n.confirm.bind(n),n.showAwardUI=n.showAwardUI.bind(n),n.showPunishUI=n.showPunishUI.bind(n),n.showDeleteUI=n.showDeleteUI.bind(n),n.state={wealth:1e3,prestige:0,reason:"",tpdays:0,UI:"Award"},n}return r(t,e),t.prototype.showAwardUI=function(){this.setState({UI:"Award"})},t.prototype.showPunishUI=function(){this.setState({UI:"Punish"})},t.prototype.showDeleteUI=function(){this.setState({UI:"Delete"})},t.prototype.confirm=function(){o.awardWealth(this.state.reason,this.state.wealth,this.props.postId);var e="#manage"+this.props.postId;s(e).css("display","none")},t.prototype.wealthInput=function(e){console.log(this.state),this.setState({wealth:e.target.value})},t.prototype.prestigeInput=function(e){console.log(this.state),this.setState({prestige:e.target.value})},t.prototype.reasonInput=function(e){console.log(this.state),this.setState({reason:e.target.value})},t.prototype.tpdaysInput=function(e){console.log(this.state),this.setState({tpdays:e.target.value})},t.prototype.render=function(){var e,t=a.createElement("div",{className:"column",id:"award"},a.createElement("div",{className:"row manageOperation"},a.createElement("div",{className:"manageObject"},"财富值"),a.createElement("input",{type:"text",value:this.state.wealth,onChange:this.wealthInput})),a.createElement("div",{className:"row manageOperation"},a.createElement("div",{className:"manageObject"},"威望"),a.createElement("input",{type:"text",value:this.state.prestige,onChange:this.prestigeInput})),a.createElement("div",{className:"row manageOperation"},a.createElement("div",{className:"manageObject"},"原因"),a.createElement("input",{type:"text",value:this.state.reason,onChange:this.reasonInput}))),n=a.createElement("div",{className:"column",id:"punish"},a.createElement("div",{className:"row manageOperation"},a.createElement("div",{className:"manageObject"},"扣威望"),a.createElement("input",{type:"text",value:this.state.prestige,onChange:this.prestigeInput})),a.createElement("div",{className:"row manageOperation"},a.createElement("div",{className:"manageObject"},"禁止发言(天)"),a.createElement("input",{type:"text",value:this.state.tpdays,onChange:this.tpdaysInput})),a.createElement("div",{className:"row manageOperation"},a.createElement("div",{className:"manageObject"},"原因"),a.createElement("input",{type:"text",value:this.state.reason,onChange:this.reasonInput}))),r=a.createElement("div",{className:"column",id:"punish"},a.createElement("div",{className:"row manageOperation"},a.createElement("div",{className:"manageObject"},"删除原因"),a.createElement("input",{type:"text",value:this.state.reason,onChange:this.reasonInput}))),o="manage"+this.props.postId;return e=t,"Award"===this.state.UI&&(e=t),"Punish"===this.state.UI&&(e=n),"Delete"===this.state.UI&&(e=r),a.createElement("div",{style:{display:"none"},id:o,className:"postManagement"},a.createElement("div",{className:"manageUI"},a.createElement("div",{className:"row manageOptions"},a.createElement("div",{className:"manageOptions-icon",onClick:this.showAwardUI,style:{color:"#FF7F00"}},"奖励"),a.createElement("div",{className:"manageOptions-icon",onClick:this.showPunishUI,style:{color:"red"}},"惩罚"),a.createElement("div",{className:"manageOptions-icon",onClick:this.showDeleteUI},"删除"))),e,a.createElement("button",{onClick:this.confirm,className:"confirmManagement"},"确认"))},t}(a.Component);t.PostManagement=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(4),c=n(1),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={thisBoardState:[]},n}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,a;return o(this,function(o){switch(o.label){case 0:return e=[],t=[],c.getStorage("board_2")?[3,3]:[4,fetch("http://apitest.niconi.cc/Board/Root")];case 1:return n=o.sent(),[4,n.json()];case 2:for(r=o.sent(),a=0;a<20;a++)t[a]=new i.Board(r[a].name,r[a].todayCount,r[a].postCount,r[a].id,r[a].boardMastersString),c.setStorage("board_"+r[a].id.toString(),t[a]),e[a]="board_"+r[a].id.toString();return c.setStorage("boardList",e),[3,4];case 3:for(e=c.getStorage("boardList"),a=0;a<20;a++)t[a]=c.getStorage(e[a]);o.label=4;case 4:return this.setState({thisBoardState:t}),[2]}})})},t.prototype.generateRootBoard=function(e){return s.createElement(u,{board:e})},t.prototype.render=function(){return s.createElement("div",{className:"boardList"},this.state.thisBoardState.map(this.generateRootBoard))},t}(s.Component);t.BoardList=l;var u=function(e){function t(t){var n=e.call(this,t)||this,r=n.props.board;return 2===r.id||29===r.id||35===r.id||37===r.id?n.state={isExpanded:!1}:n.state={isExpanded:!0},n.toggleIsExpanded=n.toggleIsExpanded.bind(n),n}return r(t,e),t.prototype.toggleIsExpanded=function(){this.setState(function(e){return{isExpanded:!e.isExpanded}})},t.prototype.render=function(){var e=this.state.isExpanded?"flex":"none",t=this.state.isExpanded?"-":"+",n=this.props.board;return 758===n.id?s.createElement("div",{className:"anArea"},s.createElement("div",{className:"column",style:{border:"2px solid #e9e9e9"}},s.createElement("div",{className:"row",style:{marginTop:"15px",marginBottom:"15px"}},s.createElement("div",{className:"areaName"},s.createElement("a",{href:"/list/758/normal"},n.name)),s.createElement("div",{className:"areaName"},"主管：",n.masters)))):s.createElement("div",{className:"anArea"},s.createElement("div",{className:"column",style:{border:"2px solid #e9e9e9"}},s.createElement("div",{className:"row",style:{marginTop:"15px",marginBottom:"15px"}},s.createElement("div",{className:"areaName"},n.name),s.createElement("div",{className:"areaName"},"主管：",n.masters),s.createElement("div",{className:"hideBoard",onClick:this.toggleIsExpanded}," ",t)),s.createElement("div",{className:"hiddenContent",style:{display:e}}," ",s.createElement(p,{boardid:n.id}))))},t}(s.Component);t.RootBoard=u;var p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={thisBoardState:[]},n}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r;return o(this,function(a){switch(a.label){case 0:return e=[],[4,fetch("http://apitest.niconi.cc/Board/"+this.props.boardid+"/Sub")];case 1:return t=a.sent(),[4,t.json()];case 2:for(n=a.sent(),r=0;r<n.length;r++)e[r]=new i.Board(n[r].name,n[r].todayCount,n[r].postCount,n[r].id,n[r].masters);return this.setState({thisBoardState:e}),[2]}})})},t.prototype.convertChildBoard=function(e){return s.createElement("div",{className:"boardContent"},s.createElement("a",{href:"/list/"+e.id+"/normal"},s.createElement("div",{className:"greenBackdrop"})),s.createElement("a",{href:"/list/"+e.id+"/normal"},s.createElement("div",{className:"boardName2"},e.name)),s.createElement("div",{className:"boardInfo"},"今日发帖 ",e.todayPostCount," / 总主题数 ",e.totalPostCount))},t.prototype.convertNoImgChildBoard=function(e){return s.createElement("div",{className:"noImgBoardContent"},s.createElement("a",{href:"/list/"+e.id+"/normal"},s.createElement("div",{className:"boardName2"},e.name)))},t.prototype.render=function(){return 2===this.props.boardid||29===this.props.boardid||35===this.props.boardid||37===this.props.boardid?s.createElement("div",{className:"areaContent"},this.state.thisBoardState.map(this.convertNoImgChildBoard)):s.createElement("div",{className:"areaContent"},this.state.thisBoardState.map(this.convertChildBoard))},t}(s.Component);t.ChildBoard=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(3),s=n(67),i=n(68),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return a.createElement("div",{className:"user-center"},a.createElement("div",{className:"user-center-content"},a.createElement("div",{className:"user-center-head"},a.createElement("p",null,"个人中心")),a.createElement(o.BrowserRouter,null,a.createElement("div",{className:"user-center-body"},a.createElement(s.UserCenterNavigation,null),a.createElement(i.UserCenterRouter,null)))))},t}(a.Component);t.UserCenter=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return a.createElement("div",{className:"user-avatar"},a.createElement("img",{className:"user-avatar-img",src:this.props.userAvatarImgURL}),a.createElement("div",{className:"user-badge"}))},t}(a.Component);t.UserCenterExactAvatar=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(74),s=n(79),i=n(80),c=n(81),l=n(3),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return a.createElement("div",{className:"message-root"},a.createElement("div",{className:"message"},a.createElement("div",{className:"message-title"},"我的消息"),a.createElement(l.BrowserRouter,null,a.createElement("div",{className:"message-content"},a.createElement("div",{className:"message-nav"},a.createElement("div",{id:"response"},a.createElement(l.NavLink,{to:"/message/response"},"回复我的")),a.createElement("div",{id:"attme"},a.createElement(l.NavLink,{to:"/message/attme"},"@我的")),a.createElement("div",{id:"system"},a.createElement(l.NavLink,{to:"/message/system"},"系统通知")),a.createElement("div",{id:"message"},a.createElement(l.NavLink,{to:"/message/message"},"我的私信"))),a.createElement(l.Route,{path:"/message/response",component:s.MessageResponse}),a.createElement(l.Route,{path:"/message/attme",component:i.MessageAttme}),a.createElement(l.Route,{path:"/message/system",component:c.MessageSystem}),a.createElement(l.Route,{path:"/message/message",component:o.MessageMessage})))))},t}(a.Component);t.Message=u},function(e,t,n){"use strict";function r(e){return p.createElement(d.FocusTopicSingle,{title:e.title,hitCount:e.hitCount,id:e.id,boardId:e.boardId,boardName:e.boardName,replyCount:e.replyCount,userId:e.userId,userName:e.userName,portraitUrl:e.portraitUrl,time:e.time,likeCount:e.likeCount,dislikeCount:e.dislikeCount,fanCount:e.fanCount})}function a(){var e=0,t=0;return document.body&&(e=document.body.scrollTop),document.documentElement&&(t=document.documentElement.scrollTop),e-t>0?e:t}function o(){var e=0,t=0;return document.body&&(e=document.body.scrollHeight),document.documentElement&&(t=document.documentElement.scrollHeight),e-t>0?e:t}function s(){return"CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight}function i(){return a()+s()+300>o()}var c=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var p=n(0),d=n(10),m=n(1),h=function(e){function t(t){var n=e.call(this,t)||this,r=m.getStorage("AllNewTopic");return r||(r=[]),n.state={data:r,from:0,loading:!0},n.handleScroll=n.handleScroll.bind(n),n}return c(t,e),t.prototype.componentDidMount=function(){return l(this,void 0,void 0,function(){var e,t,n;return u(this,function(r){switch(r.label){case 0:return[4,m.getAllNewTopic(this.state.from,this.context.router)];case 1:if(e=r.sent(),t=m.getStorage("AllNewTopic"))for(n=0;n<e.length;n++)if(e[n].id==t[0].id){e=e.slice(0,n).concat(t);break}return e.length>100&&(e=e.slice(0,100)),m.setStorage("AllNewTopic",e),this.setState({data:e,from:e.length}),document.addEventListener("scroll",this.handleScroll),[2]}})})},t.prototype.componentWillUnmount=function(){return l(this,void 0,void 0,function(){return u(this,function(e){return document.removeEventListener("scroll",this.handleScroll),[2]})})},t.prototype.handleScroll=function(){return l(this,void 0,void 0,function(){var e,t,n;return u(this,function(r){switch(r.label){case 0:if(!i()||!this.state.loading)return[3,5];if(this.state.from>=99)return $("#focus-topic-loading").addClass("displaynone"),$("#focus-topic-loaddone").removeClass("displaynone"),[2];this.setState({loading:!1}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,m.getAllNewTopic(this.state.from,this.context.router)];case 2:return e=r.sent(),[3,4];case 3:return t=r.sent(),this.setState({loading:!0}),[2];case 4:n=this.state.data.concat(e),this.setState({data:n,from:n.length,loading:!0}),m.setStorage("AllNewTopic",n),r.label=5;case 5:return[2]}})})},t.prototype.render=function(){return p.createElement("div",{className:"focus-root"},p.createElement("div",{className:"focus"},p.createElement("div",{className:"focus-allNewTopic"},p.createElement("i",{className:"fa fa-home","aria-hidden":"true"}),"首页/全站新帖"),p.createElement("div",{className:"focus-topic-area"},p.createElement("div",{className:"focus-topic-topicArea"},this.state.data.map(r)),p.createElement("div",{className:"focus-topic-loading",id:"focus-topic-loading"},p.createElement("img",{src:"http://ww3.sinaimg.cn/large/0060lm7Tgy1fitwrd6yv0g302s0093y9.gif"})),p.createElement("div",{className:"focus-topic-loaddone displaynone",id:"focus-topic-loaddone"},"没有更多帖子啦~"))))},t}(p.Component);t.AllNewTopic=h},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(82),s=n(83),i=n(84),c=n(1),l=function(e){function t(t){var n=e.call(this,t)||this;return n.changeFocusBoard=function(){var e=c.getStorage("currentFocusBoard");e?n.setState({id:e.boardId,name:e.boardName}):n.setState({id:null,name:null})},n.state={id:null,name:null},n}return r(t,e),t.prototype.render=function(){return this.state.id?a.createElement("div",{className:"focus-root"},a.createElement("div",{className:"focus"},a.createElement("div",{className:"focus-title"},"我的关注版面"),a.createElement(o.FocusBoardArea,{onChange:this.changeFocusBoard}),a.createElement(i.FocusBoardTopicArea,{boardId:this.state.id,boardNme:this.state.name}))):a.createElement("div",{className:"focus-root"},a.createElement("div",{className:"focus"},a.createElement("div",{className:"focus-title"},"我的关注版面"),a.createElement(o.FocusBoardArea,{onChange:this.changeFocusBoard}),a.createElement(s.FocusTopicArea,null)))},t}(a.Component);t.Focus=l;var u=function(){function e(){}return e}();t.FocusState=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(1),c=n(6),l=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={userName:"载入中……",userImgUrl:"/images/unLoggedOn.png"},r}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r;return o(this,function(a){switch(a.label){case 0:return i.getLocalStorage("accessToken")?(console.log("token未过期"),e=i.getLocalStorage("userName"),[4,fetch("http://apitest.niconi.cc/User/Name/"+e)]):[3,3];case 1:return t=a.sent(),[4,t.json()];case 2:return n=a.sent(),r=n.portraitUrl,this.setState({userName:e,userImgUrl:r}),[3,4];case 3:i.getLocalStorage("userName")&&(console.log("token已过期，正在重新获取"),this.reLogOn()),a.label=4;case 4:return[2]}})})},t.prototype.reLogOn=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s,l,u,p,d;return o(this,function(o){switch(o.label){case 0:return e="https://openid.cc98.org/connect/token",t={client_id:"9a1fd200-8687-44b1-4c20-08d50a96e5cd",client_secret:"8b53f727-08e2-4509-8857-e34bf92b27f2",grant_type:"password",username:i.getLocalStorage("userName"),password:i.getLocalStorage("password"),scope:"cc98-api openid"},n=new Headers,n.append("Content-Type","application/x-www-form-urlencoded"),[4,fetch(e,{method:"POST",headers:n,body:c.param(t)})];case 1:return r=o.sent(),200!==r.status&&(console.log("自动刷新token失败，请重新登录"),this.logOff()),[4,r.json()];case 2:return a=o.sent(),s="Bearer "+encodeURIComponent(a.access_token),i.setLocalStorage("accessToken",s,a.expires_in),console.log("刷新token成功"),l=i.getLocalStorage("userName"),[4,fetch("http://apitest.niconi.cc/User/Name/"+l)];case 3:return u=o.sent(),[4,u.json()];case 4:return p=o.sent(),d=p.portraitUrl,this.setState({userName:l,userImgUrl:d}),[2]}})})},t.prototype.catch=function(e){console.log("Oops, error",e),console.log("自动刷新token失败，请重新登录"),this.logOff()},t.prototype.logOff=function(){i.removeLocalStorage("accessToken"),console.log("after remove token="+i.getLocalStorage("accessToken")),i.removeLocalStorage("userName"),i.removeLocalStorage("password"),i.removeLocalStorage("userInfo"),i.removeStorage("all"),location=window.location},t.prototype.render=function(){return i.getLocalStorage("accessToken")&&i.getLocalStorage("userName")?(c(document).ready(function(){var e=c(".userInfo").eq(0),t=c("#userMessage"),n=c(".dropDownSub").eq(0),r=c(".dropDownSubMessage").eq(0),a=n.find("li"),o=r.find("li");e.hover(function(){n.slideDown("fast")},function(){n.css("display","none")}),n.hover(function(){n.css("display","block")},function(){n.slideUp("fast")}),a.mouseover(function(){this.className="hover"}),a.mouseout(function(){this.className=""}),t.hover(function(){r.slideDown("fast")},function(){r.css("display","none")}),r.hover(function(){r.css("display","block")},function(){r.slideUp("fast")}),o.mouseover(function(){this.className="hover"}),o.mouseout(function(){this.className=""})}),s.createElement("div",{id:"dropdown"},s.createElement("div",{className:"box"},s.createElement("div",{className:"userInfo"},s.createElement("div",{className:"userImg"},s.createElement("img",{src:this.state.userImgUrl})),s.createElement("div",{className:"userName"},this.state.userName)),s.createElement("div",{className:"topBarText"},s.createElement("a",{href:"/",style:{color:"#fff"}},"首页")),s.createElement("div",{className:"topBarText",id:"userMessage"},s.createElement("a",{href:"/message",style:{color:"#fff"}},"消息")),s.createElement("div",{className:"topBarText"},s.createElement("a",{href:"/focus",style:{color:"#fff"}},"关注")),s.createElement("div",{className:"topBarText"},s.createElement("a",{href:"/newTopics",style:{color:"#fff"}},"新帖")),s.createElement("a",{href:"/boardList"},s.createElement("div",{className:"boardListLink",style:{margin:"0 0 0 10px"}},s.createElement("div",{style:{marginTop:"16px",color:"#fff"}},"版面")))),s.createElement("div",{className:"dropDownSubBox"},s.createElement("ul",{className:"dropDownSub"},s.createElement("a",{href:"/userCenter"}," ",s.createElement("li",null,"个人中心")),s.createElement("a",{href:"/"},s.createElement("li",null,"签到（暂无）")),s.createElement("li",{onClick:this.logOff},"注销"))),s.createElement("div",{className:"dropDownSubBox"},s.createElement("ul",{className:"dropDownSubMessage"},s.createElement("a",{href:"/message/response"}," ",s.createElement("li",null,"我的回复")),s.createElement("a",{href:"/message/attme"},s.createElement("li",null,"@ 我的")),s.createElement("a",{href:"/message/system"},s.createElement("li",null,"系统通知")),s.createElement("a",{href:"/message/message"},s.createElement("li",null,"我的私信")))))):s.createElement("div",{id:"dropdown"},s.createElement("div",{className:"box"},s.createElement("div",{className:"topBarText",style:{margin:"0 10px 0 10px"}},s.createElement("a",{href:"/",style:{color:"#fff"}},"首页")),s.createElement("div",{className:"topBarText",style:{margin:"0 10px 0 10px"}},s.createElement("a",{href:"/logOn",style:{color:"#fff"}},"登录")),s.createElement("div",{className:"topBarText",style:{margin:"0 10px 0 10px"}},s.createElement("a",{href:"/newTopics",style:{color:"#fff"}},"新帖")),s.createElement("a",{href:"/boardList"},s.createElement("div",{className:"boardListLink",style:{margin:"0 0 0 10px"}},s.createElement("div",{style:{marginTop:"16px",color:"#fff"}},"版面")))))},t}(s.Component);t.DropDown=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r,s,l,u,p,d,m,h,f,g,v;return o(this,function(y){switch(y.label){case 0:return e=c(".searchBoxSelect"),(t=c(".downArrow"),n=c(".searchBoxSub"),r=c(".searchIco"),s=n.find("li"),l=location.href.match(/\/topic\/(\S+)\/+?/),u=location.href.match(/\/list\/(\S+)\/+?/),p=location.href.match(/\/(search)/),d=0,m="全站",l)?(h=l[1],[4,i.getCategory(h,this.context.router)]):[3,2];case 1:return f=y.sent(),d=f.boardId,m=f.boardName,[3,5];case 2:return u?(d=parseInt(u[1]),[4,i.getBoardName(d,this.context.router)]):[3,4];case 3:return m=y.sent(),[3,5];case 4:p&&(g=i.getStorage("searchInfo"))&&(d=g.boardId,m=g.boardName),y.label=5;case 5:return c(document).click(function(){n.css("display","none")}),e.click(function(){return"block"===n.css("display")?n.css("display","none"):n.css("display","block"),!1}),t.click(function(){return"block"===n.css("display")?n.css("display","none"):n.css("display","block"),!1}),s.click(function(){e.text(c(this).text())}),s.mouseover(function(){this.className="hover"}),s.mouseout(function(){this.className=""}),v=this,r.click(function(){return a(this,void 0,void 0,function(){var t,n,r,a,n,r,a,s,a,a,l;return o(this,function(o){switch(o.label){case 0:return(t=c("#searchText").val())&&""!=t?"主题"!=e.text()&&"全站"!=e.text()?[3,1]:(n=t.split(" "),n&&(n.length>5?alert("关键词过多，请不要超过5个！"):(r={boardId:0,boardName:"全站",words:n},i.setStorage("searchInfo",r),a=window.location.host,window.location.href="http://"+a+"/search")),[3,5]):[3,5];case 1:return"版内"!=e.text()?[3,2]:(n=t.split(" "),n&&(n.length>5?alert("关键词过多，请不要超过5个！"):(r={boardId:d,boardName:m,words:n},i.setStorage("searchInfo",r),a=window.location.host,window.location.href="http://"+a+"/search")),[3,5]);case 2:return"用户"!=e.text()?[3,4]:[4,i.getUserDetails(t,v.context.router)];case 3:return s=o.sent(),a=window.location.host,s?window.location.href="http://"+a+"/user/name/"+t:(i.removeStorage("searchInfo"),window.location.href="http://"+a+"/search"),[3,5];case 4:"版面"==e.text()&&(a=window.location.host,l=i.getBoardId(t),l?l==[]?(i.removeStorage("searchInfo"),window.location.href="http://"+a+"/search"):1==l.length?window.location.href="http://"+a+"/list/"+l[0].id+"/normal/":l.length>1?(i.setStorage("searchBoardInfo",l),window.location.href="http://"+a+"/searchBoard"):(i.removeStorage("searchInfo"),window.location.href="http://"+a+"/search"):(i.removeStorage("searchInfo"),window.location.href="http://"+a+"/search")),o.label=5;case 5:return[2]}})})}),[2]}})})},t.prototype.render=function(){var e=location.href.match(/\/topic\/(\S+)\/+?/),t=location.href.match(/\/list\/(\S+)\/+?/),n=location.href.match(/\/(search)/),r=1;if(e)console.log(e[1]),r=0;else if(t)console.log(t[1]),r=0;else if(n){var a=i.getStorage("searchInfo");a&&0!=a.boardId&&(r=0)}return r?s.createElement("div",{id:"search"},s.createElement("div",{className:"box"},s.createElement("div",{className:"searchBoxSelect"},"主题"),s.createElement("div",{className:"downArrow"},s.createElement("img",{src:"/images/downArrow.png",width:"12",height:"12"})),s.createElement("input",{id:"searchText",type:"text",placeholder:"猜猜能搜到什么..."}),s.createElement("div",{className:"searchIco"},s.createElement("img",{src:"/images/searchIco.ico",width:"15",height:"15"}))),s.createElement("ul",{className:"searchBoxSub"},s.createElement("li",null,"主题"),s.createElement("li",null,"用户"),s.createElement("li",null,"版面"))):s.createElement("div",{id:"search"},s.createElement("div",{className:"box"},s.createElement("div",{className:"searchBoxSelect"},"版内"),s.createElement("div",{className:"downArrow"},s.createElement("img",{src:"/images/downArrow.png",width:"12",height:"12"})),s.createElement("input",{id:"searchText",type:"text",placeholder:"猜猜能搜到什么..."}),s.createElement("div",{className:"searchIco"},s.createElement("img",{src:"/images/searchIco.ico",width:"15",height:"15"}))),s.createElement("ul",{className:"searchBoxSub"},s.createElement("li",null,"版内"),s.createElement("li",null,"全站"),s.createElement("li",null,"用户"),s.createElement("li",null,"版面")))},t}(s.Component);t.Search=u;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.createElement("div",{className:"header"},s.createElement("div",{className:"topBar"},s.createElement("div",{className:"topBarRow"},s.createElement("div",{className:"row"},s.createElement("div",{style:{margin:"10px 0 0 0"}},s.createElement("a",{href:"/"},s.createElement("img",{src:"/images/矢量智能对象.ico"}))),s.createElement("div",{style:{margin:"15px 0 0 5px"}},s.createElement("a",{href:"/"},s.createElement("img",{src:"/images/CC98.ico"})))),s.createElement(l,null))),s.createElement("div",{className:"headerContent"},s.createElement("div",{className:"headerRow"},s.createElement("div",{className:"linkBar"},s.createElement("div",{className:"row",style:{margin:"0 10px 0 10px"}},s.createElement("div",{style:{margin:"3px 10px 0 0"}},s.createElement("img",{src:"/images/网盘.ico",width:"15",height:"15"})),s.createElement("div",null,s.createElement("a",{href:"http://share.cc98.org/",className:"linkText"},"网盘"))),s.createElement("div",{className:"row",style:{margin:"0 10px 0 10px"}},s.createElement("div",{style:{margin:"3px 10px 0 0"}},s.createElement("img",{src:"/images/游戏.ico",width:"15",height:"15"})),s.createElement("div",null,s.createElement("a",{href:"http://www.cc98.org/game.asp",className:"linkText"},"游戏"))),s.createElement("div",{className:"row",style:{margin:"0 10px 0 10px"}},s.createElement("div",{style:{margin:"3px 10px 0 0"}},s.createElement("img",{src:"/images/勋章.ico",width:"15",height:"15"})),s.createElement("div",null,s.createElement("a",{href:"http://v2.cc98.org/app/medalmanager.aspx",className:"linkText"},"勋章"))),s.createElement("div",{className:"row",style:{margin:"0 10px 0 10px"}},s.createElement("div",{style:{margin:"3px 10px 0 0"}},s.createElement("img",{src:"/images/抽卡.ico",width:"15",height:"15"})),s.createElement("div",null,s.createElement("a",{href:"http://card.cc98.org/",className:"linkText"},"抽卡"))),s.createElement("div",{className:"row",style:{margin:"0 10px 0 10px"}},s.createElement("div",{style:{margin:"3px 10px 0 0"}},s.createElement("img",{src:"/images/gamble.ico",width:"15",height:"15"})),s.createElement("div",null,s.createElement("a",{href:"http://gaming.cc98.org",className:"linkText"},"竞猜"))),s.createElement("div",{className:"row",style:{margin:"0 10px 0 10px"}},s.createElement("div",{style:{margin:"3px 10px 0 0"}},s.createElement("img",{src:"/images/NexusHD.jpg",width:"15",height:"15"})),s.createElement("div",null,s.createElement("a",{href:"http://www.nexushd.org",className:"linkText"},"NexusHD")))),s.createElement(u,null))))},t}(s.Component);t.Header=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return a.createElement("div",{className:"footer"},a.createElement("div",{className:"column"},a.createElement("div",{className:"footerRow"},a.createElement("div",{style:{marginRight:"15px",color:"#000"}},"友情链接"),a.createElement("a",{href:"http://www.zju.edu.cn/"},"浙江大学"),"|",a.createElement("a",{href:"http://www.cs.zju.edu.cn/"},"浙江大学计算机学院"),"|",a.createElement("a",{href:"http://www.zju88.org/agent/index.do"},"飘渺水云间"),"|",a.createElement("a",{href:"http://www.qsc.zju.edu.cn/"},"求是潮"),"|",a.createElement("a",{href:"http://luckweb.057101.com/bt2/index.asp"},"缘网"),"|",a.createElement("a",{href:"http://www.nexushd.org/login.php"},"NexusHD"),"|",a.createElement("a",{href:"https://www.zdgd.zju.edu.cn/"},"浙江大学广播电视网"),"|",a.createElement("a",{href:"http://zy.zju.edu.cn/"},"浙大搜索")),a.createElement("div",{className:"footerRow"},"Copyright © 2003-2017 CC98 Network Association. Email: contact@cc98.org",a.createElement("a",{href:"http://www.cc98.org/onlineshow.asp"}," 论坛统计"))))},t}(a.Component);t.Footer=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(6),c=n(1),l=n(5),u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={announcementContent:"加载中……"},n}return r(t,e),t.prototype.getAnnouncement=function(){return a(this,void 0,void 0,function(){var e,t,n;return o(this,function(r){switch(r.label){case 0:return[4,fetch("http://apitest.niconi.cc/config/global")];case 1:return e=r.sent(),[4,e.json()];case 2:return t=r.sent(),n=t.announcement,[2,n]}})})},t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return[4,this.getAnnouncement()];case 1:return e=t.sent(),this.setState({announcementContent:e}),[2]}})})},t.prototype.render=function(){return s.createElement("div",{className:"announcementContent"},s.createElement(l.UbbContainer,{code:this.state.announcementContent}))},t}(s.Component);t.Announcement=u;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return i(document).ready(function(){var e=i(".recommended1Button"),t=i(".recommended1Content"),n=Math.floor(5*Math.random());t.eq(n).css("display","flex"),e.eq(n).css("background-color","rgb(53,177,255)"),e.mouseover(function(){var n=i(this).index();t.css("display","none"),t.eq(n).css("display","flex"),e.css("background-color","rgb(255,255,255)"),e.eq(n).css("background-color","rgb(53,177,255)")})}),s.createElement("div",{className:"recommended1"},s.createElement("div",{className:"column"},s.createElement("div",{className:"recommended1Content"},s.createElement("div",{className:"recommended1Img"},s.createElement("img",{src:"/images/recommended2Img.jpg"})),s.createElement("div",{className:"column"},s.createElement("div",{className:"recommended1Title"},"推荐阅读标题1"),s.createElement("div",{className:"recommended1Abstract"},"推荐阅读摘要1"))),s.createElement("div",{className:"recommended1Content"},s.createElement("div",{className:"recommended1Img"},s.createElement("img",{src:"/images/recommended2Img.jpg"})),s.createElement("div",{className:"column"},s.createElement("div",{className:"recommended1Title"},"推荐阅读标题2"),s.createElement("div",{className:"recommended1Abstract"},"推荐阅读摘要2"))),s.createElement("div",{className:"recommended1Content"},s.createElement("div",{className:"recommended1Img"},s.createElement("img",{src:"/images/recommended2Img.jpg"})),s.createElement("div",{className:"column"},s.createElement("div",{className:"recommended1Title"},"推荐阅读标题3"),s.createElement("div",{className:"recommended1Abstract"},"推荐阅读摘要3"))),s.createElement("div",{className:"recommended1Content"},s.createElement("div",{className:"recommended1Img"},s.createElement("img",{src:"/images/recommended2Img.jpg"})),s.createElement("div",{className:"column"},s.createElement("div",{className:"recommended1Title"},"推荐阅读标题4"),s.createElement("div",{className:"recommended1Abstract"},"推荐阅读摘要4"))),s.createElement("div",{className:"recommended1Content"},s.createElement("div",{className:"recommended1Img"},s.createElement("img",{src:"/images/recommended2Img.jpg"})),s.createElement("div",{className:"column"},s.createElement("div",{className:"recommended1Title"},"推荐阅读标题5"),s.createElement("div",{className:"recommended1Abstract"},"推荐阅读摘要5")))),s.createElement("div",{className:"buttonRow"},s.createElement("div",{className:"recommended1Button"}),s.createElement("div",{className:"recommended1Button"}),s.createElement("div",{className:"recommended1Button"}),s.createElement("div",{className:"recommended1Button"}),s.createElement("div",{className:"recommended1Button"})))},t}(s.Component);t.Recommended1=p;var d=function(){function e(e,t,n,r){this.title=e,this.id=t,this.boardName=n,this.boardid=r}return e}();t.MainPageTopic=d;var m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={mainPageTopicState:new Array},n}return r(t,e),t.prototype.getTopicInfo=function(){return a(this,void 0,void 0,function(){var e,t,n,r;return o(this,function(a){switch(a.label){case 0:return e=[],[4,fetch("http://apitest.niconi.cc/Topic/Hot")];case 1:return t=a.sent(),[4,t.json()];case 2:for(n=a.sent(),r=0;r<10;r++)e[r]=new d(n[r].title,n[r].id,n[r].boardName,n[r].boardId);return[2,e]}})})},t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return[4,this.getTopicInfo()];case 1:return e=t.sent(),this.setState({mainPageTopicState:e}),[2]}})})},t.prototype.convertMainPageTopic=function(e){var t="/list/"+e.boardid+"/normal/",n="/topic/"+e.id;return s.createElement("div",{className:"listRow"},s.createElement("div",{className:"boardName"}," ",s.createElement("a",{href:t},"[",e.boardName,"]")),s.createElement("div",{className:"topicTitle"},s.createElement("a",{href:n},e.title)))},t.prototype.render=function(){return s.createElement("div",null,this.state.mainPageTopicState.map(this.convertMainPageTopic))},t}(s.Component);t.HotTopicComponent=m;var h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={mainPageTopicState:new Array},n}return r(t,e),t.prototype.getTopicInfo=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s;return o(this,function(o){switch(o.label){case 0:return e=[],t="http://apitest.niconi.cc/Topic/Board/459?from=0&size=10",n=new Headers,n.append("Range","bytes=0-9"),[4,fetch(t,{headers:n})];case 1:return r=o.sent(),[4,r.json()];case 2:for(a=o.sent(),s=0;s<10;s++)e[s]=new d(a[s].title,a[s].id,a[s].boardName,a[s].boardId);return[2,e]}})})},t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return[4,this.getTopicInfo()];case 1:return e=t.sent(),this.setState({mainPageTopicState:e}),[2]}})})},t.prototype.convertMainPageTopic=function(e){var t="/topic/"+e.id;return s.createElement("div",{className:"listRow"},s.createElement("div",{className:"topicTitle"},s.createElement("a",{href:t},e.title)))},t.prototype.render=function(){return s.createElement("div",null,this.state.mainPageTopicState.map(this.convertMainPageTopic))},t}(s.Component);t.Shixijianzhi=h;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.test=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a;return o(this,function(o){switch(o.label){case 0:return e="http://apitest.niconi.cc/me/unreadcount",t=c.getLocalStorage("accessToken"),console.log(t),n=new Headers,n.append("Content-Type","application/x-www-form-urlencoded"),n.append("Authorization",t),[4,fetch(e,{method:"GET",headers:n,body:{token:t}})];case 1:return r=o.sent(),[4,r.json()];case 2:return a=o.sent(),console.log(a),[2]}})})},t.prototype.render=function(){return s.createElement("div",{onClick:this.test},"这里是萌萌的adddna测试的地方~")},t}(s.Component);t.Test=f;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.createElement("div",{className:"mainPage"},s.createElement("div",{className:"leftPart"},s.createElement("div",{className:"announcement"},s.createElement("div",{className:"blueBar1"},s.createElement("div",{className:"listName"},"论坛公告")),s.createElement(u,null)),s.createElement(p,null),s.createElement("div",{className:"row"},s.createElement("div",{className:"list1"},s.createElement("div",{className:"blueBar2"},s.createElement("div",{className:"listName"},"热门话题"),s.createElement("div",{className:"more"},"更多")),s.createElement("div",{className:"listContent1"},s.createElement(m,null))),s.createElement("div",{className:"list2"},s.createElement("div",{className:"blueBar2"},s.createElement("div",{className:"listName"},"校园活动"),s.createElement("div",{className:"more"},"更多")),s.createElement("div",{className:"listContent1"},s.createElement("div",{className:"row"}," ",s.createElement("div",{className:"boardName"},"[提示]"),s.createElement("div",{className:"topicTitle"},"★-----------------------------★")),s.createElement("div",{className:"row"}," ",s.createElement("div",{className:"boardName"},"[提示]"),s.createElement("div",{className:"topicTitle"},"首页除了十大之外的部分还没施工好哦")),s.createElement("div",{className:"row"}," ",s.createElement("div",{className:"boardName"},"[提示]"),s.createElement("div",{className:"topicTitle"},"其他部分的内容都是乱填哒")),s.createElement("div",{className:"row"}," ",s.createElement("div",{className:"boardName"},"[提示]"),s.createElement("div",{className:"topicTitle"},"如果前辈你看不到十大的内容")),s.createElement("div",{className:"row"}," ",s.createElement("div",{className:"boardName"},"[提示]"),s.createElement("div",{className:"topicTitle"},"那么可能是你忘了挂RVPN哦")),s.createElement("div",{className:"row"}," ",s.createElement("div",{className:"boardName"},"[提示]"),s.createElement("div",{className:"topicTitle"},"★-----------------------------★")),s.createElement("div",{className:"row"}," ",s.createElement("div",{className:"boardName"},"[提示]"),s.createElement("div",{className:"topicTitle"},"首页除了十大之外的部分还没施工好哦")),s.createElement("div",{className:"row"}," ",s.createElement("div",{className:"boardName"},"[提示]"),s.createElement("div",{className:"topicTitle"},"其他部分的内容都是乱填哒")),s.createElement("div",{className:"row"}," ",s.createElement("div",{className:"boardName"},"[提示]"),s.createElement("div",{className:"topicTitle"},"如果前辈你看不到十大的内容")),s.createElement("div",{className:"row"}," ",s.createElement("div",{className:"boardName"},"[提示]"),s.createElement("div",{className:"topicTitle"},"那么可能是你忘了挂RVPN哦"))))),s.createElement("div",{className:"row"},s.createElement("div",{className:"list1"},s.createElement("div",{className:"blueBar2"},s.createElement("div",{className:"listName"},"学术信息"),s.createElement("div",{className:"more"},"更多")),s.createElement(f,null)),s.createElement("div",{className:"list2"},s.createElement("div",{className:"blueBar2"},s.createElement("div",{className:"listName"},"最热回复"),s.createElement("div",{className:"more"},"更多")))),s.createElement("div",{className:"row"},s.createElement("div",{className:"list1"},s.createElement("div",{className:"blueBar2"},s.createElement("div",{className:"listName"},"最新动态"),s.createElement("div",{className:"more"},"更多"))),s.createElement("div",{className:"list2"},s.createElement("div",{className:"blueBar2"},s.createElement("div",{className:"listName"},"求职广场"),s.createElement("div",{className:"more"},"更多")))),s.createElement("div",{className:"row"},s.createElement("div",{className:"list1"},s.createElement("div",{className:"blueBar2"},s.createElement("div",{className:"listName"},"实习兼职"),s.createElement("div",{className:"more"},"更多")),s.createElement("div",{className:"listContent1"},s.createElement(h,null))),s.createElement("div",{className:"list2"},s.createElement("div",{className:"blueBar2"},s.createElement("div",{className:"listName"},"失物招领"),s.createElement("div",{className:"more"},"更多"))))),s.createElement("div",{className:"rightPart"},s.createElement("div",{className:"recommended2"},s.createElement("div",{className:"dashedBorder"},s.createElement("div",{className:"heading"},"推荐")),s.createElement("div",{className:"column"},s.createElement("div",{className:"row"},s.createElement("div",{className:"recommended2Img"},s.createElement("img",{src:"/images/recommended2Img.jpg"})),s.createElement("div",{className:"recommended2Title"},"广播台点歌通道")),s.createElement("div",{className:"row"},s.createElement("div",{className:"recommended2Img"},s.createElement("img",{src:"/images/recommended2Img.jpg"})),s.createElement("div",{className:"recommended2Title"},"CC98抽卡游戏")),s.createElement("div",{className:"row"},s.createElement("div",{className:"recommended2Img"},s.createElement("img",{src:"/images/recommended2Img.jpg"})),s.createElement("div",{className:"recommended2Title"},"CC98 share")),s.createElement("div",{className:"row"},s.createElement("div",{className:"recommended2Img"},s.createElement("img",{src:"/images/recommended2Img.jpg"})),s.createElement("div",{className:"recommended2Title"},"推荐阅读投稿")),s.createElement("div",{className:"row"},s.createElement("div",{className:"recommended2Img"},s.createElement("img",{src:"/images/recommended2Img.jpg"})),s.createElement("div",{className:"recommended2Title"},"社团及学生组织用户认证申请")))),s.createElement("div",{className:"ad"},s.createElement("img",{src:"/images/ad.jpg"})),s.createElement("div",{className:"news"},s.createElement("div",{className:"dashedBorder"},s.createElement("div",{className:"heading"},"校园新闻")),s.createElement("div",{className:"newsContent"},s.createElement("div",{className:"newsText"},"校论坛CC98倒闭啦"),s.createElement("div",{className:"newsText"},"校论坛CC98倒闭啦"),s.createElement("div",{className:"newsText"},"校论坛CC98倒闭啦"),s.createElement("div",{className:"newsText"},"校论坛CC98倒闭啦"),s.createElement("div",{className:"newsText"},"校论坛CC98倒闭啦"),s.createElement("div",{className:"newsText"},"校论坛CC98倒闭啦"),s.createElement("div",{className:"newsText"},"校论坛CC98倒闭啦"),s.createElement("div",{className:"newsText"},"校论坛CC98倒闭啦"),s.createElement("div",{className:"newsText"},"校论坛CC98倒闭啦"),s.createElement("div",{className:"newsText"},"校论坛CC98倒闭啦"))),s.createElement("div",{className:"boardRecommended"},s.createElement("div",{className:"heading"},"版面推荐"),s.createElement("div",{className:"blueBackdrop"}),s.createElement("div",{className:"blueBackdrop"}),s.createElement("div",{className:"blueBackdrop"}),s.createElement("div",{className:"blueBackdrop"}),s.createElement("div",{className:"blueBackdrop"}),s.createElement("div",{className:"blueBackdrop"}))))},t}(s.Component);t.MainPage=g},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(3),s=n(85),i=n(86),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return a.createElement("div",{className:"user-center"},a.createElement("div",{className:"user-center-content"},a.createElement("div",{className:"user-center-head"},a.createElement("p",null,"用户详情")),a.createElement(o.BrowserRouter,null,a.createElement("div",{className:"user-center-body"},a.createElement(s.UserNavigation,null),a.createElement(i.UserRouter,null)))))},t}(a.Component);t.User=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s,i=n(0),c=n(1),l=n(15);s=t.Constants||(t.Constants={});var u=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),Object.defineProperty(t.prototype,"match",{get:function(){return this.props.match},enumerable:!0,configurable:!0}),t}(i.Component);t.RouteComponent=u;var p=function(e){function t(t){var n=e.call(this,t)||this;return n.update=n.update.bind(n),n.changeEditor=n.changeEditor.bind(n),n.state={topicId:null,title:"",content:"",ready:!1,mode:0,boardName:""},n}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s;return o(this,function(o){switch(o.label){case 0:return e=c.getLocalStorage("accessToken"),t="http://apitest.niconi.cc/Board/"+this.match.params.boardId,n=new Headers,n.append("Authorization",e),[4,fetch(t,{headers:n})];case 1:return r=o.sent(),[4,r.json()];case 2:return a=o.sent(),s=a.name,this.setState({boardName:s}),[2]}})})},t.prototype.ready=function(){this.setState({ready:!0})},t.prototype.changeEditor=function(){0===this.state.mode?this.setState({mode:1}):this.setState({mode:0})},t.prototype.update=function(e){this.setState({content:e})},t.prototype.sendMdTopic=function(e){return a(this,void 0,void 0,function(){var t,n,r,a,s,i,l,u;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),t="http://apitest.niconi.cc/topic/board/"+this.match.params.boardId,n={content:e,contentType:1,title:this.state.title},r=JSON.stringify(n),a=c.getLocalStorage("accessToken"),s=new Headers,s.append("Authorization",a),s.append("Content-Type","application/json"),[4,fetch(t,{method:"POST",headers:s,body:r})];case 1:return i=o.sent(),402===i.status&&alert("请输入内容"),[4,i.text()];case 2:return l=o.sent(),window.location.href="/topic/"+l,[3,4];case 3:return u=o.sent(),console.log("Error"),console.log(u),[3,4];case 4:return[2]}})})},t.prototype.sendUbbTopic=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s,i;return o(this,function(o){switch(o.label){case 0:return e="http://apitest.niconi.cc/topic/board/"+this.match.params.boardId,t={content:this.state.content,contentType:0,title:this.state.title},n=JSON.stringify(t),r=c.getLocalStorage("accessToken"),a=new Headers,a.append("Authorization",r),a.append("Content-Type","application/json"),[4,fetch(e,{method:"POST",headers:a,body:n})];case 1:return s=o.sent(),[4,s.text()];case 2:return i=o.sent(),window.location.href="/topic/"+i,[2]}})})},t.prototype.onTitleChange=function(e){this.setState({title:e})},t.prototype.onUbbChange=function(e){this.setState({content:e})},t.prototype.render=function(){var e=this.state.mode,t="/list/"+this.match.params.boardId;return 0===e?i.createElement("div",{className:"createTopic"},i.createElement("div",{className:"createTopicBoardName"}," ",i.createElement("a",{href:t},this.state.boardName," >"),"> 发表主题"),i.createElement(d,{boardId:this.match.params.boardId,onChange:this.onTitleChange.bind(this)}),i.createElement("div",{className:"createTopicType"},i.createElement("div",{className:"createTopicListName"},"发帖类型"),i.createElement("input",{type:"radio",checked:!0,name:"type",value:"normal"})," 普通",i.createElement("input",{type:"radio",name:"type",value:"academic"})," 学术信息",i.createElement("div",{style:{color:"rgb(255,0,0)"}},"（活动帖和学术贴请选择正确的发帖类型）")),i.createElement("div",{className:"createTopicOption"},i.createElement("div",{className:"createTopicListName"},"选项"),i.createElement("input",{type:"radio",checked:!0,name:"option",value:"all"}),"回复所有人可见",i.createElement("input",{type:"radio",name:"option",value:"host"}),"回复仅楼主可见",i.createElement("input",{type:"radio",name:"option",value:"special"}),"回复仅特定用户可见"),i.createElement(l.UbbEditor,{update:this.update}),i.createElement("div",{className:"row",style:{justifyContent:"center"}},i.createElement("div",{id:"post-topic-button",onClick:this.sendUbbTopic.bind(this),className:"button blue",style:{marginTop:"1.25rem",marginBottom:"1.25rem",marginRight:"1.25rem",width:"4.5rem",letterSpacing:"0.3125rem",alignSelf:"center"}},"发帖"),i.createElement("div",{id:"post-topic-changeMode",onClick:this.changeEditor,className:"button blue",style:{marginTop:"1.25rem",marginBottom:"1.25rem",width:"13.5rem"}},"切换到Markdown编辑器"))):i.createElement("div",{className:"createTopic"},i.createElement("div",{className:"createTopicBoardName"}," ",i.createElement("a",{href:t},this.state.boardName," >"),"> 发表主题"),i.createElement(d,{boardId:this.match.params.boardId,onChange:this.onTitleChange.bind(this)}),i.createElement("div",{className:"createTopicType"},i.createElement("div",{className:"createTopicListName"},"发帖类型"),i.createElement("input",{type:"radio",checked:!0,name:"type",value:"normal"})," 普通",i.createElement("input",{type:"radio",name:"type",value:"academic"})," 学术信息",i.createElement("div",{style:{color:"rgb(255,0,0)"}},"（活动帖和学术贴请选择正确的发帖类型）")),i.createElement("div",{className:"createTopicOption"},i.createElement("div",{className:"createTopicListName"},"选项"),i.createElement("input",{type:"radio",checked:!0,name:"option",value:"all"}),"回复所有人可见",i.createElement("input",{type:"radio",name:"option",value:"host"}),"回复仅楼主可见",i.createElement("input",{type:"radio",name:"option",value:"special"}),"回复仅特定用户可见"),i.createElement(h,{onChange:this.sendMdTopic.bind(this),ready:this.state.ready}),i.createElement("div",{className:"row",style:{justifyContent:"center"}},i.createElement("div",{id:"post-topic-changeMode",onClick:this.changeEditor,className:"button blue",style:{marginTop:"1.25rem",marginBottom:"1.25rem",width:"13.5rem",letterSpacing:"0.3125rem"}},"切换到UBB编辑器")))},t}(u);t.CreateTopic=p;var d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={title:""},n}return r(t,e),t.prototype.handleTitleChange=function(e){this.props.onChange(e.target.value),console.log("value"),console.log(e.target.value),this.setState({title:e.target.value}),console.log("finished")},t.prototype.render=function(){return i.createElement("div",{className:"createTopicTitle"},i.createElement("div",{className:"createTopicListName"},"主题标题"),i.createElement("div",{className:"createTopicListName"},"标签1"),i.createElement("div",{className:"createTopicListName"},"标签2"),i.createElement("input",{value:this.state.title,placeholder:"请输入新主题的标题",onChange:this.handleTitleChange.bind(this)}))},t}(i.Component);t.InputTitle=d;var m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={content:""},n}return r(t,e),t.prototype.handleUbbChange=function(e){this.props.onChange(e.target.value),this.setState({content:e.target.value})},t.prototype.render=function(){return i.createElement("div",{id:"sendTopic"},i.createElement("div",{id:"sendTopic-options"},i.createElement("ul",{className:"editor__menu clearfix",id:"wmd-button-row"},i.createElement("li",{title:"加粗 <strong> Ctrl+B",className:"wmd-button",id:"wmd-bold-button"},i.createElement("a",{className:"editor__menu--bold",style:{backgroundPosition:"0px 0px"}})),i.createElement("li",{title:"斜体 <em> Ctrl+I",className:"wmd-button",id:"wmd-italic-button",style:{left:" 25px"}},i.createElement("a",{className:"editor__menu--bold",style:{backgroundPosition:" -20px 0px"}})),i.createElement("li",{className:"editor__menu--divider wmd-spacer1",id:"wmd-spacer1"}),i.createElement("li",{title:"链接 <a> Ctrl+L",className:"wmd-button",id:"wmd-link-button",style:{left:"75px"}},i.createElement("a",{className:"editor__menu--bold",style:{backgroundPosition:"-40px 0px"}})),i.createElement("li",{title:"引用 <blockquote> Ctrl+Q",className:"wmd-button",id:"wmd-quote-button",style:{left:" 100px"}},i.createElement("a",{className:"editor__menu--bold",style:{backgroundPosition:"-60px 0px"}})),i.createElement("li",{title:"代码 <pre><code> Ctrl+K",className:"wmd-button",id:"wmd-code-button",style:{left:" 125px"}},i.createElement("a",{className:"editor__menu--bold",style:{backgroundPosition:"-80px 0px"}})),i.createElement("li",{className:"editor__menu--divider wmd-spacer1",id:"wmd-spacer2"}),i.createElement("li",{title:"图片 <img> Ctrl+G",className:"wmd-button",id:"wmd-image-button",style:{left:"150px"}},i.createElement("a",{className:"editor__menu--bold",style:{backgroundPosition:"-100px 0px"}})),i.createElement("li",{className:"editor__menu--divider wmd-spacer1",id:"wmd-spacer2"}),i.createElement("li",{title:"数字列表 <ol> Ctrl+O",className:"wmd-button",id:"wmd-olist-button",style:{left:" 200px"}},i.createElement("a",{className:"editor__menu--bold",style:{backgroundPosition:"-120px 0px"}})),i.createElement("li",{title:"普通列表 <ul> Ctrl+U",className:"wmd-button",id:"wmd-ulist-button",style:{left:"225px"}},i.createElement("a",{className:"editor__menu--bold",style:{backgroundPosition:" -140px 0px"}})),i.createElement("li",{title:"标题 <h1>/<h2> Ctrl+H",className:"wmd-button",id:"wmd-heading-button",style:{left:"250px"}},i.createElement("a",{className:"editor__menu--bold",style:{backgroundPosition:"-160px 0px"}})),i.createElement("li",{title:"分割线 <hr> Ctrl+R",className:"wmd-button",id:"wmd-hr-button",style:{left:"275px"}},i.createElement("a",{className:"editor__menu--bold",style:{backgroundPosition:"-180px 0px"}})),i.createElement("li",{className:"editor__menu--divider wmd-spacer1",id:"wmd-spacer3"}),i.createElement("li",{title:"撤销 - Ctrl+Z",className:"wmd-button",id:"wmd-undo-button",style:{left:"325px"}},i.createElement("a",{className:"editor__menu--bold",style:{backgroundPosition:"-200px 0px"}})),i.createElement("li",{title:"重做 - Ctrl+Y",className:"wmd-button",id:"wmd-redo-button",style:{left:"350px"}},i.createElement("a",{className:"editor__menu--bold",style:{backgroundPosition:"-220px -20px"}})),i.createElement("li",{className:"editor__menu--divider wmd-spacer1",id:"wmd-spacer4"}),i.createElement("li",{title:"Markdown 语法",className:"wmd-button",id:"wmd-help-button",style:{left:" 400px"}},i.createElement("a",{className:"editor__menu--bold",style:{backgroundPosition:"-300px 0px"}})))),i.createElement("form",null,i.createElement("div",null,i.createElement("textarea",{id:"sendTopic-input",name:"sendTopic-input",value:this.state.content,onChange:this.handleUbbChange.bind(this)}))))},t}(i.Component);t.InputUbbContent=m;var h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={content:""},n}return r(t,e),t.prototype.componentDidMount=function(){s.testEditor=editormd("test-editormd",{width:"100%",height:680,path:"/scripts/lib/editor.md/lib/",saveHTMLToTextarea:!1})},t.prototype.send=function(){var e=s.testEditor.getMarkdown();this.props.onChange(e)},t.prototype.render=function(){return i.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column"}},i.createElement("div",{id:"sendTopic"},i.createElement("form",null,i.createElement("div",{id:"test-editormd",className:"editormd"},i.createElement("textarea",{className:"editormd-markdown-textarea",name:"test-editormd-markdown-doc"}))),i.createElement("div",{className:"row",style:{justifyContent:"center",marginBottom:"1.25rem "}},i.createElement("div",{id:"post-topic-button",className:"button blue",style:{marginTop:"1.25rem",width:"4.5rem",letterSpacing:"0.3125rem"},onClick:this.send.bind(this)},"发帖"))))},t}(i.Component);t.InputMdContent=h},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(13),c=n(1),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.createElement("div",{style:{display:"flex",flexDirection:"column"}},s.createElement("div",null,"您当前未登录"),s.createElement(i.LogOn,null))},t}(s.Component);t.LogOut=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.createElement("div",null,"帖子被删除")},t}(s.Component);t.TopicDeleted=u;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.createElement("div",null,"网络连接中断")},t}(s.Component);t.Disconnected=p;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.createElement("div",null,"401您没有权限进入这个版面")},t}(s.Component);t.UnauthorizedBoard=d;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.createElement("div",null,"401您没有权限进入这个帖子")},t}(s.Component);t.UnauthorizedTopic=m;var h=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r;return o(this,function(a){switch(a.label){case 0:return e=c.getLocalStorage("accessToken"),t=new Headers,t.append("Authorization",e),t.append("Content-Type","application/json"),n="test",[4,fetch("http://apitest.niconi.cc/topic/deletetop?topicid=4739872&boardid=753",{method:"DELETE",headers:t,body:JSON.stringify(n)})];case 1:return r=a.sent(),console.log("finished"),[2]}})})},t.prototype.render=function(){return s.createElement("div",null,"404版面不存在")},t}(s.Component);t.NotFoundBoard=h;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a;return o(this,function(o){switch(o.label){case 0:return e=c.getLocalStorage("accessToken"),t=new Headers,t.append("Authorization",e),t.append("Content-Type","application/json"),n={isCanceling:!1,isBold:!0,isItalic:!0,color:"red",duration:null},r=JSON.stringify(n),a="http://apitest.niconi.cc/topic/sethighlight?boardid=753&topicid=4740298",[4,fetch(a,{method:"PUT",headers:t,body:r})];case 1:return o.sent(),[2]}})})},t.prototype.render=function(){return s.createElement("div",null,"404帖子不存在")},t}(s.Component);t.NotFoundTopic=f;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.createElement("div",null,"404用户不存在")},t}(s.Component);t.NotFoundUser=g;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.createElement("div",null,"500服务器错误")},t}(s.Component);t.ServerError=v;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.createElement("div",null,"402需要输入内容")},t}(s.Component);t.ContentNeeded=y;var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.createElement("div",null,"403操作被拒绝")},t}(s.Component);t.OperationForbidden=b},function(e,t,n){"use strict";function r(e){return i.createElement(c.FocusTopicSingle,{title:e.title,hitCount:e.hitCount,id:e.id,boardId:e.boardId,boardName:e.boardName,replyCount:e.replyCount,userId:e.userId,userName:e.userName,portraitUrl:e.portraitUrl,time:e.time,likeCount:e.likeCount,dislikeCount:e.dislikeCount,fanCount:e.fanCount})}var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),c=n(10),l=n(1),u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={boardId:0,boardName:"全站",words:[],data:[],from:0,loading:!0},n.handleScroll=n.handleScroll.bind(n),n}return a(t,e),t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t;return s(this,function(n){switch(n.label){case 0:return(e=l.getStorage("searchInfo"))?[3,1]:(this.showNoResult(),this.setState({loading:!1}),[3,3]);case 1:return[4,l.getSearchTopic(e.boardId,e.words,this.state.from,this.context.router)];case 2:t=n.sent(),0==t?(console.log("没有搜索结果"),this.showNoResult(),this.setState({loading:!1})):t.length<20?(this.setState({boardId:e.boardId,boardName:e.boardName,words:e.words,data:t,from:t.length,loading:!1}),$("#focus-topic-loading").addClass("displaynone"),$("#focus-topic-loaddone").removeClass("displaynone")):this.setState({boardId:e.boardId,boardName:e.boardName,words:e.words,data:t,from:t.length,loading:!0}),n.label=3;case 3:return document.addEventListener("scroll",this.handleScroll),[2]}})})},t.prototype.handleScroll=function(){return o(this,void 0,void 0,function(){var e,t,n,n;return s(this,function(r){switch(r.label){case 0:if(!l.isBottom()||!this.state.loading)return[3,5];this.setState({loading:!1}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l.getSearchTopic(this.state.boardId,this.state.words,this.state.from,this.context.router)];case 2:return e=r.sent(),[3,4];case 3:return t=r.sent(),this.setState({loading:!0}),[2];case 4:if(!e)return $("#focus-topic-loading").addClass("displaynone"),$("#focus-topic-loaddone").removeClass("displaynone"),this.setState({loading:!1}),[2];e.length<20?($("#focus-topic-loading").addClass("displaynone"),$("#focus-topic-loaddone").removeClass("displaynone"),n=this.state.data.concat(e),this.setState({data:n,from:n.length,loading:!1})):(n=this.state.data.concat(e),this.setState({data:n,from:n.length,loading:!0})),r.label=5;case 5:return[2]}})})},t.prototype.showNoResult=function(){$("#focus-topic-area").addClass("displaynone"),$("#noResult").removeClass("displaynone")},t.prototype.render=function(){return i.createElement("div",{className:"focus-root"},i.createElement("div",{className:"focus"},i.createElement("div",{className:"focus-allNewTopic"},i.createElement("i",{className:"fa fa-home","aria-hidden":"true"}),"搜索/",this.state.boardName),i.createElement("div",{className:"focus-topic-area",id:"focus-topic-area"},i.createElement("div",{className:"focus-topic-topicArea"},this.state.data.map(r)),i.createElement("div",{className:"focus-topic-loading",id:"focus-topic-loading"},i.createElement("img",{src:"http://ww3.sinaimg.cn/large/0060lm7Tgy1fitwrd6yv0g302s0093y9.gif"})),i.createElement("div",{className:"focus-topic-loaddone displaynone",id:"focus-topic-loaddone"}," 没有更多帖子啦~")),i.createElement("div",{id:"noResult",className:"noResult displaynone"},"没有符合条件的搜索结果")))},t}(i.Component);t.Search=u},function(e,t,n){"use strict";function r(e){var t="/list/"+e.id+"/normal/";return o.createElement("a",{href:t,target:"_blank"},o.createElement("div",{className:"focus-board"},e.name))}var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){var e=s.getStorage("searchBoardInfo");return o.createElement("div",{className:"focus-root"},o.createElement("div",{className:"focus"},o.createElement("div",{className:"focus-title"},o.createElement("i",{className:"fa fa-home","aria-hidden":"true"}),"搜索/版面"),o.createElement("div",{className:"focus-board-area"},e.map(r))))},t}(o.Component);t.SearchBoard=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(1),c=function(e){function t(t){var n=e.call(this,t)||this;return n.state={buttonInfo:"已关注",buttonIsDisabled:!1,isFollowing:!0},n.unfollow=n.unfollow.bind(n),n.follow=n.follow.bind(n),n}return r(t,e),t.prototype.unfollow=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){return this.setState({buttonIsDisabled:!0,buttonInfo:"取关中"}),e=i.unfollowUser(this.props.userFanInfo.id),e?this.setState({buttonIsDisabled:!1,buttonInfo:"重新关注",isFollowing:!1}):this.setState({buttonIsDisabled:!1,buttonInfo:"取关失败",isFollowing:!0}),[2]})})},t.prototype.follow=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return this.setState({buttonIsDisabled:!0,buttonInfo:"关注中"}),[4,i.followUser(this.props.userFanInfo.id)];case 1:return e=t.sent(),e?this.setState({buttonIsDisabled:!1,buttonInfo:"已关注",isFollowing:!0}):this.setState({buttonIsDisabled:!1,buttonInfo:"关注失败",isFollowing:!1}),[2]}})})},t.prototype.render=function(){var e=this;return s.createElement("div",{className:"user-center-myfollowings-user"},s.createElement("img",{src:this.props.userFanInfo.avatarImgURL}),s.createElement("p",null,s.createElement("span",{className:"user-center-myfollowings-user-id"},s.createElement("a",{href:"/user/"+this.props.userFanInfo.id},this.props.userFanInfo.name)),"主题",s.createElement("span",{className:"user-center-myfollowings-user-posts"},this.props.userFanInfo.posts),"粉丝",s.createElement("span",{className:"user-center-myfollowings-user-fans"},this.props.userFanInfo.fans)),s.createElement("button",{type:"button",id:this.state.isFollowing?"":"follow",onMouseOver:function(){e.state.isFollowing&&!e.state.buttonIsDisabled&&e.setState({buttonInfo:"取消关注"})},onMouseLeave:function(){e.state.isFollowing&&!e.state.buttonIsDisabled&&e.setState({buttonInfo:"已关注"})},onClick:this.state.isFollowing?this.unfollow:this.follow,disabled:this.state.buttonIsDisabled},this.state.buttonInfo))},t}(s.Component);t.UserCenterMyFollowingsUser=c},function(e,t,n){n(34),e.exports=n(102)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=n(35),o=n(36);a.render(r.createElement(o.App,null),document.getElementById("root"))},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(3),s=n(7),i=n(12),c=n(16),l=n(18),u=n(19),p=n(21),d=n(22),m=n(23),h=n(24),f=n(25),g=n(26),v=n(27),y=n(13),b=n(28),E=n(29),w=n(30),N=n(31),_=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.match=t.match,r}return r(t,e),t}(a.Component);t.RouteComponent=_;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return a.createElement("div",{style:{width:"100%"}},a.createElement(o.BrowserRouter,null,a.createElement("div",{style:{backGroundColor:"#F5FAFD",justifyContent:"center",display:"flex",flexDirection:"column",alignItems:"center",width:"100%",minWidth:"1140px"}},a.createElement(h.Header,null),a.createElement(o.Route,{exact:!0,path:"/",component:g.MainPage}),a.createElement(o.Route,{exact:!0,path:"/topic/:topicid/:page?",component:s.Post}),a.createElement(o.Route,{exact:!0,path:"/topic/:topicid/user/:userId/:page?",component:c.CurUserPost}),a.createElement(o.Route,{path:"/list/:boardId/:type?/:page?",component:i.List}),a.createElement(o.Route,{exact:!0,path:"/boardlist",component:l.BoardList}),a.createElement(o.Route,{path:"/usercenter",component:u.UserCenter}),a.createElement(o.Route,{path:"/message",component:p.Message}),a.createElement(o.Route,{path:"/focus",component:m.Focus}),a.createElement(o.Route,{path:"/newtopics",component:d.AllNewTopic}),a.createElement(o.Route,{path:"/user",component:v.User}),a.createElement(o.Route,{path:"/logon",component:y.LogOn}),a.createElement(o.Route,{path:"/search",component:w.Search}),a.createElement(o.Route,{path:"/searchBoard",component:N.SearchBoard}),a.createElement(o.Route,{path:"/createtopic/:boardId",component:b.CreateTopic}),a.createElement(o.Route,{path:"/status/logout",component:E.LogOut}),a.createElement(o.Route,{path:"/status/UnauthorizedBoard",component:E.UnauthorizedBoard}),a.createElement(o.Route,{path:"/status/UnauthorizedTopic",component:E.UnauthorizedTopic}),a.createElement(o.Route,{path:"/status/NotFoundTopic",component:E.NotFoundTopic}),a.createElement(o.Route,{path:"/status/NotFoundBoard",component:E.NotFoundBoard}),a.createElement(o.Route,{path:"/status/NotFoundUser",component:E.NotFoundUser}),a.createElement(o.Route,{path:"/status/ServerError",component:E.ServerError}),a.createElement(o.Route,{path:"/status/OperationForbidden",component:E.OperationForbidden}),a.createElement(o.Route,{path:"/status/Disconnected",component:E.Disconnected}),a.createElement(o.Route,{path:"/status/TopicDeleted",component:E.TopicDeleted}),a.createElement(f.Footer,null))))},t}(a.Component);t.App=C},function(e,t,n){"use strict";function r(){var e=new a.UbbCodeEngine;return e.tagHandlers.register(o.BTagHandler),e.tagHandlers.register(s.ImageTagHandler),e.tagHandlers.register(i.ITagHandler),e.tagHandlers.register(c.SizeTagHandler),e.tagHandlers.register(l.QuoteTagHandler),e.tagHandlers.register(u.ColorTagHandler),e.tagHandlers.register(p.UrlTagHandler),e.tagHandlers.register(d.UTagHandler),e.tagHandlers.register(m.DelTagHandler),e.tagHandlers.register(h.MP3TagHandler),e.tagHandlers.register(f.CursorTagHandler),e.tagHandlers.register(g.EnglishTagHandler),e.tagHandlers.register(v.UserTagHandler),e.tagHandlers.register(y.CodeTagHandler),e.tagHandlers.register(E.FontTagHandler),e.tagHandlers.register(w.AlignTagHandler),e.tagHandlers.register(N.UploadTagHandler),e.tagHandlers.register(_.LeftTagHandler),e.tagHandlers.register(C.CenterTagHandler),e.tagHandlers.register(I.RightTagHandler),e.tagHandlers.register(S.TableTagHandler),e.tagHandlers.register(T.TdTagHandler),e.tagHandlers.register(k.ThTagHandler),e.tagHandlers.register(P.TrTagHandler),e.tagHandlers.register(x.TopicTagHandler),e.tagHandlers.register(O.MdTagHandler),e.tagHandlers.register(j.EmTagHandler),e.tagHandlers.register(b.UnresolvedTagHandler),e}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(38),s=n(14),i=n(39),c=n(40),l=n(41),u=n(42),p=n(43),d=n(44),m=n(45),h=n(46),f=n(47),g=n(48),v=n(49),y=n(50),b=n(51),E=n(52),w=n(53),N=n(54),_=n(55),C=n(56),I=n(57),S=n(58),T=n(59),k=n(60),P=n(61),x=n(62),O=n(63),j=n(64);t.createEngine=r,function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(2))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"b"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){return a.createElement("span",{style:{fontWeight:"bold"}},e)},t}(o.RecursiveTagHandler);t.BTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"i"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){return a.createElement("i",null,e)},t}(o.RecursiveTagHandler);t.ITagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"size"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=parseInt(t.value("size"));if(isNaN(r)||r<=0)return e;r=r>7?3.5:r/2,r/=1.5;var o={fontSize:r+"rem"};return a.createElement("span",{style:o},e)},t}(o.RecursiveTagHandler);t.SizeTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return["quote","quotex"]},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r={padding:"13px 19px 13px 17px",backgroundColor:"#F5FAFF",border:"1px solid rgb(204,204,204)",margin:"30px",maxHeight:"800px",overflowY:"auto"};return a.createElement("div",{style:r},e)},t}(o.RecursiveTagHandler);t.QuoteTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"color"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=t.value("color"),o={color:r};return a.createElement("span",{style:o},e)},t}(o.RecursiveTagHandler);t.ColorTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"url"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=t.value("url");return r||(r=e),!1===n.options.allowExternalUrl&&0===r.indexOf("http")&&r.split("/").length>1&&"www.cc98.org"!==r.split("/")[2]?e:a.createElement("a",{href:r},e)},t}(o.RecursiveTagHandler);t.UrlTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"u"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r={textDecoration:"underline"};return n.options.compatibility===o.UbbCompatiblityMode.EnforceMorden?a.createElement("span",{style:r},e):a.createElement("u",null,e)},t}(o.RecursiveTagHandler);t.UTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"del"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r={textDecoration:"line-through"};return a.createElement("span",{style:r},e)},t}(o.RecursiveTagHandler);t.DelTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"mp3"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){if(!1===n.options.allowMediaContent)return e;var r=!1;return"1"===t.value("mp3")&&!0===n.options.allowAutoPlay&&(r=!0),a.createElement("audio",{src:e,controls:!0,autoPlay:r})},t}(o.TextTagHandler);t.MP3TagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"cursor"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=t.value("cursor"),o={cursor:r};return a.createElement("span",{style:o},e)},t}(o.RecursiveTagHandler);t.CursorTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"english"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r={fontFamily:"Arial"};return a.createElement("span",{style:r},e)},t}(o.RecursiveTagHandler);t.EnglishTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"user"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=e,o={cursor:"pointer"};return a.createElement("a",{href:"/user/name"+encodeURI(r),style:o},r)},t}(o.TextTagHandler);t.UserTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"code"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=e.split("\n").map(function(e,t){return a.createElement("li",null,e)});return a.createElement("div",{className:"ubb-code"},a.createElement("ol",null,r))},t}(o.TextTagHandler);t.CodeTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return/.*/i},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){return console.warn("检测到未处理的标签 %s，该标签将被当做一般文字。",t.tagName),a.UbbTagHandler.renderTagAsString(t,e)},t}(a.RecursiveTagHandler);t.UnresolvedTagHandler=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"font"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=t.value("font"),o={fontFamily:r};return a.createElement("span",{style:o},e)},t}(o.RecursiveTagHandler);t.FontTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"align"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=t.value("align"),o={textAlign:r};return a.createElement("span",{style:o},a.createElement("div",null,e))},t}(o.RecursiveTagHandler);t.AlignTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=n(14),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"upload"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r,i=e,c=t.value(0);switch(1===t.parameterCount&&(r=0),2===t.parameterCount&&(r=parseInt(t.value(1))),c){case"jpg":case"jpeg":case"png":case"gif":case"bmp":case"webp":return n.options.allowImage?n.options.compatibility===o.UbbCompatiblityMode.EnforceMorden?1===r?a.createElement(s.Image,{imageUri:i,title:"upload图片",isShowed:!1}):a.createElement("figure",null,a.createElement(s.Image,{imageUri:i,title:"upload图片",isShowed:!0}),a.createElement("figcaption",null,"upload图片")):1===r?a.createElement(s.Image,{imageUri:i,title:"upload图片",isShowed:!1}):a.createElement(s.Image,{imageUri:i,title:"upload图片",isShowed:!0}):a.createElement(s.Image,{imageUri:i,title:"upload图片",isShowed:!1});default:return a.createElement("a",{href:i},"点击浏览该文件")}},t}(o.TextTagHandler);t.UploadTagHandler=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"left"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r={textAlign:"left"};return a.createElement("span",{style:r},a.createElement("div",null,e))},t}(o.RecursiveTagHandler);t.LeftTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"center"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r={textAlign:"center"};return a.createElement("span",{style:r},a.createElement("div",null,e))},t}(o.RecursiveTagHandler);t.CenterTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"right"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r={textAlign:"right"};return a.createElement("span",{style:r},a.createElement("div",null,e))},t}(o.RecursiveTagHandler);t.RightTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"table"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){return a.createElement("table",{className:"UBBTableTag"},e)},t}(o.RecursiveTagHandler);t.TableTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"td"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=1,o=1;return 2===t.parameterCount&&(r=parseInt(t.value(0)),o=parseInt(t.value(1))),a.createElement("td",{rowSpan:r,colSpan:o},e)},t}(o.RecursiveTagHandler);t.TdTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"th"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=1,o=1;return 2===t.parameterCount&&(r=parseInt(t.value(0)),o=parseInt(t.value(1))),a.createElement("th",{rowSpan:r,colSpan:o},e)},t}(o.RecursiveTagHandler);t.ThTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"tr"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){return a.createElement("tr",null,e)},t}(o.RecursiveTagHandler);t.TrTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"topic"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r,o=e;t.value(0);1===t.parameterCount&&(r=parseInt(t.value(0))),2===t.parameterCount&&(r=parseInt(t.value(1)));var s="/topic/"+r;return a.createElement("a",{href:s},o)},t}(o.RecursiveTagHandler);t.TopicTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"md"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=e;return a.createElement(i,{content:r})},t}(o.TextTagHandler);t.MdTagHandler=s;var i=function(e){function t(t,n){var r=e.call(this,t,n)||this,a=Math.floor(1e6*Math.random());return r.state={divid:"Markdown"+a},r}return r(t,e),t.prototype.componentDidMount=function(){editormd.markdownToHTML(this.state.divid,{htmlDecode:"style,script,iframe",emoji:!0,taskList:!0,tex:!0,flowChart:!0,sequenceDiagram:!0,codeFold:!0})},t.prototype.render=function(){return a.createElement("div",{id:this.state.divid,style:{maxWidth:"80%"}},a.createElement("textarea",{name:"editormd-markdown-doc",style:{display:"none"}},this.props.content))},t}(a.Component);t.MarkdownParser=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return/em\d{2}/i},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=t.tagName,o=r.match(/\d{2}/).toString(),s=parseInt(o)+1,i="http://www.cc98.org/emot/em"+s+".gif";return a.createElement("div",null,a.createElement("img",{src:i}),e)},t}(o.RecursiveTagHandler);t.EmTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(1),c=n(6),l=n(3),u=n(5),p=n(17),d=n(7),m=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={contents:[],masters:[]},r}return r(t,e),t.prototype.getMasters=function(e){return a(this,void 0,void 0,function(){return o(this,function(t){return[2,i.getMasters(e)]})})},t.prototype.componentWillReceiveProps=function(e){return a(this,void 0,void 0,function(){var t,n,r,a;return o(this,function(o){switch(o.label){case 0:return t=e.match.params.page||1,n="TopicContent_"+e.match.params.topicid+"_"+t,[4,i.getTopicContent(e.match.params.topicid,t,this.context.router)];case 1:return r=o.sent(),a=this.getMasters(e.match.params.topicid),this.setState({contents:r,masters:a}),[2]}})})},t.prototype.generateContents=function(e){return s.createElement("div",{className:"reply"},s.createElement("div",{style:{marginTop:"1rem",marginBotton:"0.3125rem",border:"#EAEAEA solid thin"}},s.createElement(g,{key:e.postId,isAnonymous:e.isAnonymous,userId:e.userId,topicid:e.topicId,userName:e.userName,replyTime:e.time,floor:e.floor,userImgUrl:e.userImgUrl,sendTopicNumber:e.sendTopicNumber,privilege:e.privilege}),s.createElement(y,{key:e.content,masters:this.state.masters,userId:e.userId,content:e.content,signature:e.signature,topicid:e.topicId,postid:e.postId,contentType:e.contentType})))},t.prototype.render=function(){return s.createElement("div",{className:"center",style:{width:"100%"}},this.state.contents.map(this.generateContents.bind(this)))},t}(d.RouteComponent);t.Reply=m;var h=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={contents:[],masters:[]},r}return r(t,e),t.prototype.getMasters=function(e){return a(this,void 0,void 0,function(){return o(this,function(t){return[2,i.getMasters(e)]})})},t.prototype.componentWillReceiveProps=function(e){return a(this,void 0,void 0,function(){var t,n,r;return o(this,function(a){switch(a.label){case 0:return t=e.match.params.page||1,1!=t?[3,2]:[4,i.getHotReplyContent(e.match.params.topicid,this.context.router)];case 1:n=a.sent(),r=this.getMasters(e.match.params.topicid),this.setState({contents:n,masters:r}),a.label=2;case 2:return[2]}})})},t.prototype.generateContents=function(e){var t=(e.floor%10).toString();return s.createElement("div",{className:"reply",id:t},s.createElement("div",{style:{marginTop:"1rem",marginBotton:"0.3125rem",border:"#EAEAEA solid thin"}},s.createElement(f,{key:e.id,userId:e.userId,topicid:e.topicId,userName:e.userName,replyTime:e.time,floor:e.floor,userImgUrl:e.userImgUrl,sendTopicNumber:e.sendTopicNumber,privilege:e.privilege,isAnonymous:e.isAnonymous}),s.createElement(y,{key:e.content,masters:this.state.masters,userId:e.userId,content:e.content,signature:e.signature,topicid:e.topicId,postid:e.id,contentType:e.contentType})))},t.prototype.render=function(){return c(".header").scrollTop(),s.createElement("div",{className:"center",style:{width:"100%"}},this.state.contents.map(this.generateContents))},t}(d.RouteComponent);t.HotReply=h;var f=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={},r}return r(t,e),t.prototype.render=function(){var e="/user/"+this.props.userId,t=encodeURIComponent(e),n="/topic/"+this.props.topicid+"/user/"+this.props.userId,r="/message/message?id="+this.props.userId;c(document).ready(function(){c(".authorImg").mouseenter(function(e){var t=e.currentTarget;c(t).next(".userDetails").show()}),c(".mouse-userDetails").mouseleave(function(e){var t=e.currentTarget;c(t).find(".userDetails").hide()})});var a="帖数";this.props.userId||(a="");var o;o=1!=this.props.isAnonymous?s.createElement(v,{userName:this.props.userName,userId:this.props.userId}):null;var i;return"超级版主"===this.props.privilege?i=s.createElement("a",{style:{color:"pink"},href:e},this.props.userName):"全站贵宾"===this.props.privilege?i=s.createElement("a",{style:{color:"blue"},href:e},this.props.userName):"注册用户"===this.props.privilege||"匿名"==this.props.privilege||"匿名用户"===this.props.privilege?i=s.createElement("a",{style:{color:"black"},href:e},this.props.userName):"管理员"===this.props.privilege&&(i=s.createElement("a",{style:{color:"red"},href:e},this.props.userName)),s.createElement("div",{className:"replyRoot"},s.createElement("div",{className:"row",style:{width:"100%",display:"flex",marginBottom:"0.625rem"}},s.createElement("div",{className:"row mouse-userDetails",style:{height:"15.625rem"}},s.createElement("div",{className:"authorImg"},s.createElement("a",{href:t},s.createElement("img",{src:this.props.userImgUrl}))),s.createElement("div",{className:"userDetails",style:{display:"none",position:"absolute",zindedx:"1"}},o)),s.createElement("div",{className:"column",id:"rpymes"},s.createElement("div",{className:"row",id:"replierMes"},s.createElement("div",{style:{color:"red",marginLeft:"1rem"}},s.createElement("span",null,"最热回复"),s.createElement("span",null,"(第"),s.createElement("span",null,this.props.floor),s.createElement("span",null,"楼)")),s.createElement("div",{className:"rpyClr",style:{marginLeft:"0.625rem"}},i),s.createElement("div",{id:"topicsNumber",style:{marginLeft:"0.625rem",display:"flex",flexWrap:"nowrap",wordBreak:"keepAll",marginRight:"0.75rem"}},a," ",s.createElement("span",{style:{color:"red"}},this.props.sendTopicNumber)," ")),s.createElement("div",{className:"row",style:{display:"flex",flexWrap:"nowrap"}},s.createElement("div",{id:"clockimg",style:{marginLeft:"0.375rem"}},s.createElement("i",{className:"fa fa-clock-o fa-lg fa-fw"})),s.createElement("div",null,s.createElement("span",{className:"timeProp"},moment(this.props.replyTime).format("YYYY-MM-DD HH:mm:ss"))))),s.createElement("div",{id:"operation"},s.createElement(l.Link,{className:"operation",to:""},"引用"),s.createElement(l.Link,{className:"operation",to:""},"编辑"),s.createElement(l.Link,{className:"operation",to:r},"私信"),s.createElement(l.Link,{className:"operation",to:""},"举报"),s.createElement(l.Link,{className:"operation",to:n},"只看此用户"))))},t}(d.RouteComponent);t.HotReplier=f;var g=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),t.prototype.render=function(){var e="/user/"+this.props.userId,t=encodeURIComponent(e),n="/message/message?id="+this.props.userId,r=s.createElement("a",{href:t},s.createElement("img",{src:this.props.userImgUrl}));1==this.props.isAnonymous&&(r=s.createElement("img",{src:this.props.userImgUrl}));var a="/topic/"+this.props.topicid+"/user/"+this.props.userId;c(document).ready(function(){c(".authorImg").mouseenter(function(e){var t=e.currentTarget;c(t).next(".userDetails").show()}),c(".mouse-userDetails").mouseleave(function(e){var t=e.currentTarget;c(t).find(".userDetails").hide()})});var o="帖数";this.props.userId||(o="");var i;i=1!=this.props.isAnonymous?s.createElement(v,{userName:this.props.userName,userId:this.props.userId}):null;var u;return"超级版主"===this.props.privilege?u=s.createElement("a",{style:{color:"pink"},href:e},this.props.userName):"全站贵宾"===this.props.privilege?u=s.createElement("a",{style:{color:"blue"},href:e},this.props.userName):"注册用户"===this.props.privilege?u=s.createElement("a",{style:{color:"black"},href:e},this.props.userName):"匿名"==this.props.privilege||"匿名用户"===this.props.privilege?u=s.createElement("div",{style:{color:"black"}},this.props.userName):"管理员"===this.props.privilege&&(u=s.createElement("a",{style:{color:"red"},href:e},this.props.userName)),s.createElement("div",{className:"replyRoot"},s.createElement("div",{className:"row",style:{width:"100%",display:"flex",marginBottom:"0.625rem"}},s.createElement("div",{className:"row mouse-userDetails",style:{height:"15.625rem"}},s.createElement("div",{className:"authorImg"},r),s.createElement("div",{className:"userDetails",style:{display:"none",position:"absolute"}},i)),s.createElement("div",{className:"column",id:"rpymes"},s.createElement("div",{className:"row",id:"replierMes"},s.createElement("div",{style:{marginLeft:"0.625rem"}},s.createElement("span",null,"第"),s.createElement("span",{style:{color:"red"}},this.props.floor),s.createElement("span",null,"楼")),s.createElement("div",{className:"rpyClr",style:{marginLeft:"0.625rem"}},u),s.createElement("div",{id:"topicsNumber",style:{marginLeft:"0.625rem",display:"flex",flexWrap:"nowrap",wordBreak:"keepAll",marginRight:"0.75rem"}},o," ",s.createElement("span",{style:{color:"red"}},this.props.sendTopicNumber)," ")),s.createElement("div",{className:"row",style:{display:"flex",flexWrap:"nowrap"}},s.createElement("div",{id:"clockimg",style:{marginLeft:"0.375rem"}},s.createElement("i",{className:"fa fa-clock-o fa-lg fa-fw"})),s.createElement("div",null,s.createElement("span",{className:"timeProp"},moment(this.props.replyTime).format("YYYY-MM-DD HH:mm:ss"))))),s.createElement("div",{id:"operation"},s.createElement(l.Link,{className:"operation",to:""},"引用"),s.createElement(l.Link,{className:"operation",to:""},"编辑"),s.createElement(l.Link,{className:"operation",to:n},"私信"),s.createElement(l.Link,{className:"operation",to:""},"举报"),s.createElement(l.Link,{className:"operation",to:a},"只看此用户"))))},t}(d.RouteComponent);t.Replier=g;var v=function(e){function t(t){var n=e.call(this,t)||this;return n.unfollow=n.unfollow.bind(n),n.follow=n.follow.bind(n),n.state={portraitUrl:null,userName:null,fanCount:null,displayTitle:null,birthday:null,gender:null,prestige:null,levelTitle:null,buttonInfo:"关注",buttonIsDisabled:!1,isFollowing:!1},n}return r(t,e),t.prototype.unfollow=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.setState({buttonIsDisabled:!0,buttonInfo:"取关中"}),e=i.getLocalStorage("accessToken"),t=this.props.userId,n="http://apitest.niconi.cc/user/unfollow/"+t,r=new Headers,r.append("Authorization",e),[4,fetch(n,{method:"DELETE",headers:r})];case 1:if(a=o.sent(),200!==a.status)throw{};return this.setState({buttonIsDisabled:!1,buttonInfo:"重新关注",isFollowing:!1}),[3,3];case 2:return s=o.sent(),this.setState({buttonIsDisabled:!1,buttonInfo:"取关失败",isFollowing:!0}),[3,3];case 3:return[2]}})})},t.prototype.follow=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.setState({buttonIsDisabled:!0,buttonInfo:"关注中"}),e=i.getLocalStorage("accessToken"),t=this.props.userId,n="http://apitest.niconi.cc/user/follow/"+t,r=new Headers,r.append("Authorization",e),[4,fetch(n,{method:"POST",headers:r})];case 1:if(a=o.sent(),200!==a.status)throw{};return this.setState({buttonIsDisabled:!1,buttonInfo:"取消关注",isFollowing:!0}),[3,3];case 2:return s=o.sent(),this.setState({buttonIsDisabled:!1,buttonInfo:"关注失败",isFollowing:!1}),[3,3];case 3:return[2]}})})},t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return[4,i.getUserDetails(this.props.userName,this.context.router)];case 1:return e=t.sent(),this.setState({portraitUrl:e.portraitUrl,userName:e.userName,fanCount:e.fanCount,displayTitle:e.displayTitle,birthday:e.birthday,prestige:e.prestige,gender:e.gender,levelTitle:e.levelTitle,isFollowing:e.isFollowing,buttonInfo:e.isFollowing?"取消关注":"关注"}),[2]}})})},t.prototype.render=function(){var e=this.state.displayTitle;null===this.state.displayTitle&&(e=this.state.levelTitle);var t,n=moment(this.state.birthday).format("YYYY");t="9999"===n?moment(this.state.birthday).format("MM-DD"):moment(this.state.birthday).format("YYYY-MM-DD"),null==this.state.birthday&&(t="保密");var r;r=0===this.state.gender?s.createElement("i",{style:{color:"pink"},className:"fa fa-venus fa-lg fa-fw"}):s.createElement("i",{style:{color:"blue"},className:"fa fa-mars fa-lg fa-fw"});var a="/user/name/"+this.props.userName,o=encodeURI(a),i=s.createElement("a",{href:o}," ",s.createElement("img",{src:this.state.portraitUrl}));return s.createElement("div",{className:"popup"},s.createElement("div",{className:"popup_title"},s.createElement("div",{className:"row"},s.createElement("div",{className:"row authorImg",style:{marginLeft:"10px",marginTop:"10px"}},i),s.createElement("div",{className:"column",style:{marginLeft:"1.6rem",marginTop:"2rem"}},s.createElement("div",{className:"row"},s.createElement("div",{style:{fontFamily:"微软雅黑",color:"blue",marginRight:"0.63rem"}}," ",this.state.userName),s.createElement("div",{style:{marginRight:"0.63rem",fontSize:"1rem"}},"   粉丝  "),s.createElement("div",{style:{color:"red",fontSize:"1rem"}},this.state.fanCount)),s.createElement("div",{className:"row",style:{marginTop:"0.63rem",fontSize:"0.87rem"}},e)),s.createElement("div",null,s.createElement("button",{className:"followuser",id:this.state.isFollowing?"":"follow",onClick:this.state.isFollowing?this.unfollow:this.follow,disabled:this.state.buttonIsDisabled},this.state.buttonInfo))),s.createElement("div",{className:"row",style:{fontSize:"0.87rem"}},s.createElement("div",{style:{marginLeft:"7.2rem"}},"威望 ",this.state.prestige),s.createElement("div",{style:{marginLeft:"1rem"}},"生日 ",t),s.createElement("div",{style:{marginLeft:"1rem"}},r))))},t}(d.RouteComponent);t.UserDetails=v;var y=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.showManageUI=r.showManageUI.bind(r),r.state={likeNumber:1,dislikeNumber:1,likeState:0},r}return r(t,e),t.prototype.showManageUI=function(){var e="#manage"+this.props.postid;c(e).css("display","")},t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n;return o(this,function(r){switch(r.label){case 0:return e="#like"+this.props.postid,t="#dislike"+this.props.postid,[4,i.refreshLikeState(this.props.topicid,this.props.postid,this.context.router)];case 1:return n=r.sent(),1===n.likeState?c(e).css("color","red"):2===n.likeState&&c(t).css("color","red"),this.setState({likeNumber:n.likeCount,dislikeNumber:n.dislikeCount,likeState:n.likeState}),[2]}})})},t.prototype.like=function(){return a(this,void 0,void 0,function(){var e,t,n;return o(this,function(r){switch(r.label){case 0:return e="#like"+this.props.postid,t="#dislike"+this.props.postid,1!==this.state.likeState?[3,2]:[4,i.like(this.props.topicid,this.props.postid,this.context.router)];case 1:return r.sent(),c(e).css("color","black"),[3,7];case 2:return 2!==this.state.likeState?[3,5]:[4,i.dislike(this.props.topicid,this.props.postid,this.context.router)];case 3:return r.sent(),[4,i.like(this.props.topicid,this.props.postid,this.context.router)];case 4:return r.sent(),c(e).css("color","red"),c(t).css("color","black"),[3,7];case 5:return[4,i.like(this.props.topicid,this.props.postid,this.context.router)];case 6:r.sent(),c(e).css("color","red"),r.label=7;case 7:return[4,i.refreshLikeState(this.props.topicid,this.props.postid,this.context.router)];case 8:return n=r.sent(),this.setState({likeNumber:n.likeCount,dislikeNumber:n.dislikeCount,likeState:n.likeState}),[2]}})})},t.prototype.dislike=function(){return a(this,void 0,void 0,function(){var e,t,n;return o(this,function(r){switch(r.label){case 0:return e="#like"+this.props.postid,t="#dislike"+this.props.postid,2!==this.state.likeState?[3,2]:[4,i.dislike(this.props.topicid,this.props.postid,this.context.router)];case 1:return r.sent(),c(t).css("color","black"),[3,7];case 2:return 1!==this.state.likeState?[3,5]:[4,i.like(this.props.topicid,this.props.postid,this.context.router)];case 3:return r.sent(),[4,i.dislike(this.props.topicid,this.props.postid,this.context.router)];case 4:return r.sent(),c(e).css("color","black"),c(t).css("color","red"),[3,7];case 5:return[4,i.dislike(this.props.topicid,this.props.postid,this.context.router)];case 6:r.sent(),c(t).css("color","red"),r.label=7;case 7:return[4,i.refreshLikeState(this.props.topicid,this.props.postid,this.context.router)];case 8:return n=r.sent(),this.setState({likeNumber:n.likeCount,dislikeNumber:n.dislikeCount,likeState:n.likeState}),[2]}})})},t.prototype.render=function(){var e="like"+this.props.postid,t="dislike"+this.props.postid,n="doc-content"+this.props.postid,r=s.createElement(u.UbbContainer,{code:this.props.content}),a=s.createElement("div",{id:n},s.createElement("textarea",{name:"editormd-markdown-doc",style:{display:"none"}},this.props.content));editormd.markdownToHTML(n,{htmlDecode:"style,script,iframe",emoji:!0,taskList:!0,tex:!0,flowChart:!0,sequenceDiagram:!0,codeFold:!0});var o;o=r,1===this.props.contentType&&(o=a);var l="icon"+this.props.postid,d="#icon"+this.props.postid;if(i.getLocalStorage("userInfo")){var m=i.getLocalStorage("userInfo").privilege,h=i.getLocalStorage("userInfo").name,f=i.getLocalStorage("userInfo").id;if(("管理员"===m||"超级版主"===m||"全站贵宾"===m&&f===this.props.userId)&&c(d).css("display",""),this.props.masters)for(var g=0;g<this.props.masters.length;g++)h===this.props.masters[g]&&c(d).css("display","")}return""==this.props.signature?s.createElement("div",{className:"root",style:{marginTop:"-170px"}},s.createElement("div",{className:"reply-content"},s.createElement("div",{className:"substance"},o),s.createElement(p.PostManagement,{postId:this.props.postid,userId:this.props.userId}),s.createElement("div",{className:"comment1"},s.createElement("div",{id:e,className:"upup",style:{marginRight:"0.7rem"}},s.createElement("i",{title:"赞",onClick:this.like.bind(this),className:"fa fa-thumbs-o-up fa-lg"}),s.createElement("span",{className:"commentProp"}," ",this.state.likeNumber)),s.createElement("div",{id:t,className:"downdown"},s.createElement("i",{title:"踩",onClick:this.dislike.bind(this),className:"fa fa-thumbs-o-down fa-lg"}),s.createElement("span",{className:"commentProp"}," ",this.state.dislikeNumber)),s.createElement("div",{id:"commentlike"}," ",s.createElement("div",{className:"commentbutton"},"   评分"),s.createElement("div",{className:"operation1",id:l,style:{display:"none",cursor:"pointer"},onClick:this.showManageUI},"管理"))))):s.createElement("div",{className:"root",style:{marginTop:"-170px"}},s.createElement("div",{className:"reply-content"},s.createElement("div",{className:"substance"},o),s.createElement(p.PostManagement,{postId:this.props.postid,userId:this.props.userId}),s.createElement("div",{className:"comment"},s.createElement("div",{id:e,className:"upup",style:{marginRight:"0.7rem"}},s.createElement("i",{title:"赞",onClick:this.like.bind(this),className:"fa fa-thumbs-o-up fa-lg"}),s.createElement("span",{className:"commentProp"}," ",this.state.likeNumber)),s.createElement("div",{id:t,className:"downdown"},s.createElement("i",{title:"踩",onClick:this.dislike.bind(this),className:"fa fa-thumbs-o-down fa-lg"}),s.createElement("span",{className:"commentProp"}," ",this.state.dislikeNumber)),s.createElement("div",{id:"commentlike"}," ",s.createElement("div",{className:"commentbutton"},"   评分"),s.createElement("div",{className:"operation1",id:l,style:{display:"none",cursor:"pointer"},onClick:this.showManageUI},"管理"))),s.createElement("div",{className:"signature"},s.createElement(u.UbbContainer,{code:this.props.signature}))))},t}(d.RouteComponent);t.ReplyContent=y},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(1),c=n(6),l=n(3),u=n(7),p=n(5),d=n(17),m=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={topicMessage:{title:"加载中...",time:"",content:"",signature:"",postid:0},likeState:0},r}return r(t,e),t.prototype.componentWillMount=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return[4,i.getTopic(this.props.topicid,this.context.router)];case 1:return e=t.sent(),this.setState({topicMessage:e}),[2]}})})},t.prototype.render=function(){return null!=this.state.topicMessage&&(this.state.topicMessage.userId==this.props.userId||null==this.props.userId)?s.createElement("div",{className:"root",id:"1"},s.createElement("div",{className:"essay"},s.createElement(h,{authorId:this.state.topicMessage.userId,authorName:this.state.topicMessage.userName,authorImgUrl:this.state.topicMessage.userImgUrl,isAnonymous:this.state.topicMessage.isAnonymous,isFollowing:this.state.topicMessage.isFollowing,fanCount:this.state.topicMessage.fanCount}),s.createElement(f,{Title:this.state.topicMessage.title,Time:this.state.topicMessage.time,HitCount:this.state.topicMessage.hitCount}),s.createElement("div",{id:"ads"},s.createElement("img",{width:"100%",src:this.props.imgUrl}))),s.createElement(g,{postid:this.state.topicMessage.postId,content:this.state.topicMessage.content,signature:this.state.topicMessage.signature,topicid:this.props.topicid,userId:this.state.topicMessage.userId,contentType:this.state.topicMessage.contentType,masters:this.state.topicMessage.masters}),s.createElement(v,null)):null},t}(u.RouteComponent);t.PostTopic=m;var h=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.follow=r.follow.bind(r),r.unfollow=r.unfollow.bind(r),r.state={userName:"Mana",fansNumber:233,imgUrl:r.props.authorImgUrl,buttonInfo:"关注",isFollowing:!1,buttonIsDisabled:!1},r}return r(t,e),t.prototype.unfollow=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.setState({buttonIsDisabled:!0,buttonInfo:"取关中"}),e=i.getLocalStorage("accessToken"),t=this.props.authorId,n="http://apitest.niconi.cc/user/unfollow/"+t,r=new Headers,r.append("Authorization",e),[4,fetch(n,{method:"DELETE",headers:r})];case 1:if(a=o.sent(),200!==a.status)throw{};return this.setState({buttonIsDisabled:!1,buttonInfo:"重新关注",isFollowing:!1}),[3,3];case 2:return s=o.sent(),this.setState({buttonIsDisabled:!1,buttonInfo:"取关失败",isFollowing:!0}),[3,3];case 3:return[2]}})})},t.prototype.follow=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.setState({buttonIsDisabled:!0,buttonInfo:"关注中"}),e=i.getLocalStorage("accessToken"),t=this.props.authorId,n="http://apitest.niconi.cc/user/follow/"+t,r=new Headers,r.append("Authorization",e),[4,fetch(n,{method:"POST",headers:r})];case 1:if(a=o.sent(),200!==a.status)throw{};return this.setState({buttonIsDisabled:!1,buttonInfo:"取消关注",isFollowing:!0}),[3,3];case 2:return s=o.sent(),this.setState({buttonIsDisabled:!1,buttonInfo:"关注失败",isFollowing:!1}),[3,3];case 3:return[2]}})})},t.prototype.componenDidMount=function(){!0===this.state.isFollowing?this.setState({buttonInfo:"取消关注",isFollowing:!0}):this.setState({buttonInfo:"关注",isFollowing:!1})},t.prototype.render=function(){var e="/message/message/"+this.props.authorId,t="/user/"+this.props.authorId,n=s.createElement("a",{href:t},s.createElement("img",{src:this.props.authorImgUrl})),r=s.createElement("div",{id:"authorName"},s.createElement("p",null,s.createElement("a",{href:t},this.props.authorName)));return 1==this.props.isAnonymous&&(n=s.createElement("img",{src:this.props.authorImgUrl}),r=s.createElement("div",{id:"authorName"},s.createElement("p",null,this.props.authorName))),!0===this.props.isAnonymous&&(c(".email").css("display","none"),c(".follow").css("display","none"),c(".authorFans").css("margin-top","1rem"),c("#fans").css("display","none"),c("#authorMes").css("width","14rem")),s.createElement("div",{className:"row",id:"authormes"},s.createElement("div",{className:"authorImg"},n),s.createElement("div",{className:"column",style:{marginRight:"1rem"}},s.createElement("div",{className:"row authorFans",style:{justifyContent:"space-between"}},r,s.createElement("div",{id:"fans",className:"row"},s.createElement("div",{style:{marginRight:"0.1875rem"}},"粉丝"),s.createElement("div",{style:{color:"#EE0000"}},this.props.fanCount))),s.createElement("div",{className:"row"},s.createElement("button",{className:"follow",id:this.state.isFollowing?"":"follow",onClick:this.state.isFollowing?this.unfollow:this.follow,disabled:this.state.buttonIsDisabled},this.state.buttonInfo),s.createElement("button",{className:"email"},s.createElement("a",{href:e},"私信")))))},t}(u.RouteComponent);t.AuthorMessage=h;var f=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={isNotice:!0,isTop:!0,title:"这是一个长长啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊的标题",tag:"女装/开车",time:"2017.8.12",likeNumber:1,dislikeNumber:1,viewTimes:2366},r}return r(t,e),t.prototype.returnProps=function(e,t,n){return s.createElement("div",{id:"title1",className:"row",style:{justifyContent:"flex-start"}},s.createElement("div",{id:"essayTitle"},n))},t.prototype.render=function(){return s.createElement("div",{id:"title"},s.createElement("div",{className:"column",id:"topicTitleProp"},s.createElement("div",{id:"essay1",className:"row"},this.returnProps(this.state.isTop,this.state.isNotice,this.props.Title)),s.createElement("div",{className:"row",id:"essayProp"},s.createElement("div",{id:"tags"},s.createElement("div",{className:"tagProp tagSize"},"标签： ",this.state.tag),s.createElement("div",{className:"tagProp"})),s.createElement("div",{id:"time"},s.createElement("div",{className:"viewProp"},s.createElement("i",{className:"fa fa-clock-o fa-lg fa-fw"}))," ",s.createElement("div",{className:"timeProp tagSize"},moment(this.props.Time).format("YYYY-MM-DD HH:mm:ss"))),s.createElement("div",{id:"viewtimes"},s.createElement("div",{className:"viewProp"},s.createElement("i",{className:"fa fa-eye fa-lg fa-fw"}),"  ")," ",s.createElement("div",{className:"timeProp tagSize"},this.props.HitCount,"次")))))},t}(u.RouteComponent);t.TopicTitle=f;var g=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={likeNumber:666,dislikeNumber:233,likeState:0},r}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return[4,i.getLikeState(this.props.topicid,this.context.router)];case 1:return e=t.sent(),1===e.likeState?c("#commentliked").css("color","red"):2===e.likeState&&c("#commentdisliked").css("color","red"),this.setState({likeNumber:e.likeCount,dislikeNumber:e.dislikeCount,likeState:e.likeState}),[2]}})})},t.prototype.like=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return 1!==this.state.likeState?[3,2]:[4,i.like(this.props.topicid,this.props.postid,this.context.router)];case 1:return t.sent(),c("#commentliked").css("color","black"),[3,7];case 2:return 2!==this.state.likeState?[3,5]:[4,i.dislike(this.props.topicid,this.props.postid,this.context.router)];case 3:return t.sent(),[4,i.like(this.props.topicid,this.props.postid,this.context.router)];case 4:return t.sent(),c("#commentliked").css("color","red"),c("#commentdisliked").css("color","black"),[3,7];case 5:return[4,i.like(this.props.topicid,this.props.postid,this.context.router)];case 6:t.sent(),c("#commentliked").css("color","red"),t.label=7;case 7:return[4,i.refreshLikeState(this.props.topicid,this.props.postid,this.context.router)];case 8:return e=t.sent(),this.setState({likeNumber:e.likeCount,dislikeNumber:e.dislikeCount,likeState:e.likeState}),[2]}})})},t.prototype.dislike=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return 2!==this.state.likeState?[3,2]:[4,i.dislike(this.props.topicid,this.props.postid,this.context.router)];case 1:return t.sent(),c("#commentdisliked").css("color","black"),[3,7];case 2:return 1!==this.state.likeState?[3,5]:[4,i.like(this.props.topicid,this.props.postid,this.context.router)];case 3:return t.sent(),[4,i.dislike(this.props.topicid,this.props.postid,this.context.router)];case 4:return t.sent(),c("#commentliked").css("color","black"),c("#commentdisliked").css("color","red"),[3,7];case 5:return[4,i.dislike(this.props.topicid,this.props.postid,this.context.router)];case 6:t.sent(),c("#commentdisliked").css("color","red"),t.label=7;case 7:return[4,i.refreshLikeState(this.props.topicid,this.props.postid,this.context.router)];case 8:return e=t.sent(),this.setState({likeNumber:e.likeCount,dislikeNumber:e.dislikeCount,likeState:e.likeState}),[2]}})})},t.prototype.render=function(){var e="doc-content"+this.props.postid,t="/topic/"+this.props.topicid+"/user/"+this.props.userId,n=s.createElement(p.UbbContainer,{code:this.props.content}),r=s.createElement("div",{id:e},s.createElement("textarea",{name:"editormd-markdown-doc",style:{display:"none"}},this.props.content));editormd.markdownToHTML(e,{htmlDecode:"style,script,iframe",emoji:!0,taskList:!0,tex:!0,flowChart:!0,sequenceDiagram:!0,codeFold:!0});var a=n;if(1===this.props.contentType&&(a=r),i.getLocalStorage("userInfo")){var o=i.getLocalStorage("userInfo").privilege,u=i.getLocalStorage("userInfo").name,m=i.getLocalStorage("userInfo").id;if(("管理员"===o||"超级版主"===o||"全站贵宾"===o&&m===this.props.userId)&&c("#postTopicManage").css("display",""),this.props.masters)for(var h=0;h<this.props.masters.length;h++)u===this.props.masters[h]&&c("#postTopicManage").css("display","")}return""==this.props.signature?s.createElement("div",{className:"content"},s.createElement("div",{className:"substance"},a),s.createElement(d.PostManagement,{postId:this.props.postid,userId:this.props.userId}),s.createElement("div",{className:"comment1"},s.createElement("div",{id:"commentlike",className:"buttonFont"},s.createElement("button",{className:"commentbutton"},s.createElement("i",{className:"fa fa-star-o fa-lg"})),"   收藏文章 "),s.createElement("div",{id:"commentliked",className:"upup",style:{marginRight:"0.7rem"}},s.createElement("i",{title:"赞",onClick:this.like.bind(this),className:"fa fa-thumbs-o-up fa-lg"}),s.createElement("span",{className:"commentProp"}," ",this.state.likeNumber)),s.createElement("div",{id:"commentdisliked",className:"downdown"},s.createElement("i",{title:"踩",onClick:this.dislike.bind(this),className:"fa fa-thumbs-o-down fa-lg"}),s.createElement("span",{className:"commentProp"}," ",this.state.dislikeNumber)),s.createElement("div",{id:"commentlike",className:"buttonFont row"}," ",s.createElement("div",{className:"commentbutton"},"   评分"),s.createElement("div",{className:"commentbutton"},"   编辑")),s.createElement("div",{className:"operation1"},"引用"),s.createElement(l.Link,{className:"operation1",to:t},"只看此用户"),s.createElement("div",{className:"operation1",id:"postTopicManage",style:{display:"none",cursor:"pointer"}},"管理"))):s.createElement("div",{className:"content"},s.createElement("div",{className:"substance"},a," "),s.createElement(d.PostManagement,{postId:this.props.postid,userId:this.props.userId}),s.createElement("div",{className:"signature"},s.createElement(p.UbbContainer,{code:this.props.signature})),s.createElement("div",{className:"comment"},s.createElement("div",{id:"commentlike",style:{marginRight:"0.7rem"},className:"buttonFont"},s.createElement("button",{className:"commentbutton"},s.createElement("i",{className:"fa fa-star-o fa-lg"})),"   收藏文章 "),s.createElement("div",{id:"commentliked",className:"upup",style:{marginRight:"0.7rem"}},s.createElement("i",{title:"赞",onClick:this.like.bind(this),className:"fa fa-thumbs-o-up fa-lg"}),s.createElement("span",{className:"commentProp"}," ",this.state.likeNumber)),s.createElement("div",{id:"commentdisliked",className:"downdown"},s.createElement("i",{title:"踩",onClick:this.dislike.bind(this),className:"fa fa-thumbs-o-down fa-lg"}),s.createElement("span",{className:"commentProp"}," ",this.state.dislikeNumber)),s.createElement("div",{id:"commentlike",className:"buttonFont row"}," ",s.createElement("div",{className:"commentbutton"},"   评分"),s.createElement("div",{className:"commentbutton"},"   编辑")),s.createElement("div",{className:"operation1"},"引用"),s.createElement(l.Link,{className:"operation1",to:t},"只看此用户"),s.createElement("div",{className:"operation1",id:"postTopicManage",style:{display:"none",cursor:"pointer"}},"管理")))},t}(u.RouteComponent);t.TopicContent=g;var v=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={userName:"Mana",grade:10,reward:20,credit:"6666炒鸡赞",imgUrl:"/images/authorImg.jpg"},r}return r(t,e),t.prototype.render=function(){return s.createElement("div",{className:"good tagSize"},s.createElement("div",{id:"userImage"},s.createElement("img",{src:this.state.imgUrl})," "),s.createElement("div",{id:"userName"},s.createElement("span",null,this.state.userName)),s.createElement("div",{id:"grades"},s.createElement("span",null,"评分 "),s.createElement("span",{id:"grade"},"+",this.state.grade)),s.createElement("div",{id:"reward"},s.createElement("span",null,"赏金 "),s.createElement("span",{id:"money"},this.state.reward),s.createElement("span",null,"论坛币")),s.createElement("div",{id:"credit"},s.createElement("span",null,this.state.credit)))},t}(u.RouteComponent);t.AwardInfo=v},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(3),s=n(6),i=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isScroll:!1,buttonClassName:"",navigationClassName:"user-center-navigation"},n.handleScroll=n.handleScroll.bind(n),n}return r(t,e),t.prototype.handleScroll=function(e){window.pageYOffset>234&&!this.state.isScroll&&this.setState({isScroll:!0,buttonClassName:"btn-show",navigationClassName:"user-center-navigation"}),window.pageYOffset<234&&this.state.isScroll&&this.setState(function(e){return""===e.buttonClassName?{isScroll:!1}:{isScroll:!1,buttonClassName:"btn-disappare",navigationClassName:"user-center-navigation"}})},t.prototype.componentDidMount=function(){document.addEventListener("scroll",this.handleScroll)},t.prototype.componentWillUnmount=function(){document.removeEventListener("scroll",this.handleScroll)},t.prototype.scrollToTop=function(){s("body,html").animate({scrollTop:0},500)},t.prototype.render=function(){return a.createElement("div",{className:this.state.navigationClassName,id:"userCenterNavigation"},a.createElement("ul",null,a.createElement(c,{to:"/usercenter",label:"主页",activeOnlyWhenExact:!0,myClassName:"fa-home"}),a.createElement("hr",null),a.createElement(c,{to:"/usercenter/config",label:"修改个人资料",myClassName:"fa-cog"}),a.createElement("hr",null),a.createElement(c,{to:"/usercenter/myposts",label:"我的主题",myClassName:"fa-pencil-square-o"}),a.createElement("hr",null),a.createElement(c,{to:"/usercenter/myfavorites",label:"我的收藏",myClassName:"fa-star"}),a.createElement("hr",null),a.createElement(c,{to:"/usercenter/myfollowings",label:"我的关注",myClassName:"fa-heart"}),a.createElement("hr",null),a.createElement(c,{to:"/usercenter/myfans",label:"我的粉丝",myClassName:"fa-users"})),a.createElement("button",{type:"button",id:"scrollToTop",className:this.state.buttonClassName,onClick:this.scrollToTop},"回到顶部"))},t}(a.Component);t.UserCenterNavigation=i;var c=function(e){var t=e.label,n=e.to,r=e.activeOnlyWhenExact,s=void 0!==r&&r,i=e.myClassName;return a.createElement(o.Route,{path:n,exact:s,children:function(e){var r=e.match;return a.createElement("li",{className:r?"user-center-navigation-active":""},a.createElement(o.Link,{className:""+i,to:n},a.createElement("p",null,t)))}})}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(3),s=n(1),i=n(69),c=n(73),l=n(91),u=n(92),p=n(93),d=n(97),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){s.isLogOn();return s.isLogOn()?a.createElement("div",{className:"user-center-router"},a.createElement(o.Route,{exact:!0,path:"/usercenter/",component:i.UserCenterExact}),a.createElement(o.Route,{path:"/usercenter/myfollowings/:page?",component:c.UserCenterMyFollowings}),a.createElement(o.Route,{path:"/usercenter/myfans/:page?",component:l.UserCenterMyFans}),a.createElement(o.Route,{path:"/usercenter/myposts/:page?",component:u.UserCenterMyPostsExact}),a.createElement(o.Route,{path:"/usercenter/myfavorites",component:p.UserCenterMyFavorites}),a.createElement(o.Route,{path:"/usercenter/config",component:d.UserCenterConfig})):a.createElement("div",{className:"user-center-router"},"请先登录")},t}(a.Component);t.UserCenterRouter=m},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(70),c=n(71),l=n(20),u=n(1),p=function(e){function t(t){var n=e.call(this,t)||this,r=u.getLocalStorage("userInfo");return n.state={userInfo:r,userAvatarImgURL:r.portraitUrl},n}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),e=u.getLocalStorage("accessToken"),t=new Headers,t.append("Authorization",e),[4,fetch("http://apitest.niconi.cc/user/"+this.state.userInfo.id,{headers:t})];case 1:return n=o.sent(),[4,n.json()];case 2:return r=o.sent(),u.setLocalStorage("userInfo",r),this.setState({userInfo:r,userAvatarImgURL:r.portraitUrl}),[3,4];case 3:return a=o.sent(),console.log("用户中心错误"),[3,4];case 4:return[2]}})})},t.prototype.render=function(){return s.createElement("div",{className:"user-center-exact"},s.createElement(l.UserCenterExactAvatar,{userAvatarImgURL:this.state.userAvatarImgURL}),s.createElement(i.UserCenterExactProfile,{userInfo:this.state.userInfo}),s.createElement(c.UserCenterExactActivities,null))},t}(s.Component);t.UserCenterExact=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(5),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getPrivilegeColor=function(){switch(this.props.userInfo.privilege){case"注册用户":return"grey";case"超级版主":return"pink";case"全站贵宾":return"blue";case"管理员":return"red"}},t.prototype.render=function(){return a.createElement("div",{className:"user-profile"},a.createElement("div",{id:"userId"},a.createElement("p",null,this.props.userInfo.name,"      ",a.createElement("span",{style:{fontSize:"12px",color:this.getPrivilegeColor()}},this.props.userInfo.privilege)),a.createElement("button",{type:"button",onClick:function(){location.pathname="/message/message"}},"私信")),a.createElement("div",{id:"userIntroducion"},this.props.userInfo.introduction),a.createElement("div",{id:"userGenderAndBirthday"},a.createElement("p",null,"性别：  ",1===this.props.userInfo.gender?"男":"女"," "),null===this.props.userInfo.birthday?null:a.createElement("p",null,"生日：  ",this.props.userInfo.birthday.slice(0,this.props.userInfo.birthday.indexOf("T")).replace("9999-","")),this.props.userInfo.emailAddress?a.createElement("p",null,"邮箱：  ",this.props.userInfo.emailAddress):null,this.props.userInfo.qq?a.createElement("p",null,"QQ：  ",this.props.userInfo.qq):null,a.createElement("p",null,"发帖数：  ",this.props.userInfo.postCount),this.props.userInfo.displayTitle?a.createElement("p",null,"用户组：  ",this.props.userInfo.displayTitle):null,a.createElement("p",null,"威望：  ",this.props.userInfo.prestige),a.createElement("div",null,this.props.userInfo.registerTime?a.createElement("p",null,"注册时间：  ",this.props.userInfo.registerTime.replace("T"," ")):null,this.props.userInfo.lastLogOnTime?a.createElement("p",null,"最后登录：  ",this.props.userInfo.lastLogOnTime.replace("T"," ")):null)),this.props.userInfo.signatureCode?a.createElement("div",{className:"user-description"},a.createElement("p",null,"个性签名"),a.createElement(o.UbbContainer,{code:this.props.userInfo.signatureCode})):null)},t}(a.Component);t.UserCenterExactProfile=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(72),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return a.createElement("div",{className:"user-activities"},a.createElement("p",null,"近期动态"),a.createElement(o.UserCenterExactActivitiesPosts,null))},t}(a.Component);t.UserCenterExactActivities=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(8),c=n(4),l=n(1),u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={userRecentPosts:[],isLoading:!1},n.scrollHandler=n.scrollHandler.bind(n),n}return r(t,e),t.prototype.scrollHandler=function(e){return a(this,void 0,void 0,function(){var e,t,n,r,a,s,i,c,u,p;return o(this,function(o){switch(o.label){case 0:if(!((e=document.body.scrollHeight-window.pageYOffset)<1500&&!1===this.state.isLoading))return[3,10];o.label=1;case 1:return o.trys.push([1,9,,10]),this.setState({isLoading:!0}),t="http://apitest.niconi.cc/me/recenttopics?from="+this.state.userRecentPosts.length+"&size=10",n=l.getLocalStorage("accessToken"),r=new Headers,r.append("Authorization",n),[4,fetch(t,{headers:r})];case 2:return a=o.sent(),200!==a.status?[3,7]:[4,a.json()];case 3:s=o.sent(),s.length<10&&window.removeEventListener("scroll",this.scrollHandler),i=this.state.userRecentPosts,c=s.length,o.label=4;case 4:return c--?[4,this.item2post(s[c])]:[3,6];case 5:return u=o.sent(),i.push(u),[3,4];case 6:return this.setState({userRecentPosts:i,isLoading:!1}),[3,8];case 7:throw{};case 8:return[3,10];case 9:return p=o.sent(),this.setState({isLoading:!1}),console.log("用户中心滚动加载失败"),[3,10];case 10:return[2]}})})},t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s,i,c,u;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,8,,9]),e="http://apitest.niconi.cc/me/recenttopics?from=0&size=10",t=l.getLocalStorage("accessToken"),n=new Headers,n.append("Authorization",t),[4,fetch(e,{headers:n})];case 1:return r=o.sent(),200!==r.status?[3,6]:[4,r.json()];case 2:a=o.sent(),s=[],i=a.length,o.label=3;case 3:return i--?[4,this.item2post(a[i])]:[3,5];case 4:return c=o.sent(),s.unshift(c),[3,3];case 5:return this.setState({userRecentPosts:s}),10===a.length&&window.addEventListener("scroll",this.scrollHandler),[3,7];case 6:throw{};case 7:return[3,9];case 8:return u=o.sent(),console.log("用户中心帖子加载失败"),[3,9];case 9:return[2]}})})},t.prototype.componentWillUnmount=function(){window.removeEventListener("scroll",this.scrollHandler)},t.prototype.item2post=function(e){return a(this,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:return t=new c.UserRecentPost,t.approval=e.likeCount,n=t,[4,l.getBoardName(e.boardId,this.context.router)];case 1:return n.board=r.sent(),t.date=e.time.replace("T"," ").slice(0,19),t.disapproval=e.dislikeCount,t.content=e.title,t.id=e.id,t.boardId=e.boardId,t.name=e.userName,t.isAnonymous=e.isAnonymous,[2,t]}})})},t.prototype.render=function(){if(0===this.state.userRecentPosts.length){var e={marginLeft:"2rem"};return s.createElement("div",{className:"user-posts",style:e},"没有主题")}for(var t=this.state.userRecentPosts.map(function(e){return s.createElement(i.UserCenterExactActivitiesPost,{userRecentPost:e})}),n=1;n<t.length;n+=2)t.splice(n,0,s.createElement("hr",null));return s.createElement("div",{className:"user-posts"},t)},t}(s.Component);t.UserCenterExactActivitiesPosts=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(4),c=n(9),l=n(32),u=n(11),p=n(1),d=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={userFollowings:[],totalPage:2,info:"加载中"},r}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s,c,l,u,d,m,h,f;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,9,,10]),e=p.getLocalStorage("accessToken"),t=this.match.params.page||1,n="http://apitest.niconi.cc/user/follow/follower?from="+10*(t-1)+"&size=10",r=new Headers,r.append("Authorization",e),[4,fetch(n,{headers:r})];case 1:if(a=o.sent(),200!==a.status)throw{};return[4,a.json()];case 2:if(!(s=o.sent())||!s.length)return this.setState({info:"没有关注"}),[2,!1];c=[],l=s.length,u=void 0,o.label=3;case 3:return l--?(d=s[l],m=new i.UserFanInfo,n="http://apitest.niconi.cc/user/"+d,[4,fetch(n)]):[3,6];case 4:if(a=o.sent(),200!==a.status)throw{};return[4,a.json()];case 5:return u=o.sent(),m.name=u.name,m.avatarImgURL=u.portraitUrl,m.posts=u.postCount,m.id=d,m.fans=u.fanCount,c.push(m),[3,3];case 6:return h=p.getLocalStorage("userInfo").id,n="http://apitest.niconi.cc/user/follow/followcount?userid="+h,[4,fetch(n)];case 7:if(a=o.sent(),200!==a.status)throw{};return[4,a.json()];case 8:return u=o.sent(),this.setState({userFollowings:c,totalPage:u%10==0?u/10:Math.floor(u/10)+1}),[3,10];case 9:return f=o.sent(),console.log("我的关注加载失败"),[3,10];case 10:return[2]}})})},t.prototype.render=function(){if(0===this.state.userFollowings.length)return s.createElement("div",{className:"user-center-myfollowings"},this.state.info);for(var e=this.state.userFollowings.map(function(e){return s.createElement(l.UserCenterMyFollowingsUser,{userFanInfo:e})}),t=1;t<e.length;t+=2)e.splice(t,0,s.createElement("hr",null));var n=this.match.params.page||1;return s.createElement("div",{className:"user-center-myfollowings"},s.createElement("div",{className:"user-center-myfollowings-exact"},e),s.createElement(u.UserCenterPageCount,{currentPage:n,totalPage:this.state.totalPage,href:"/usercenter/myfollowings/"}))},t}(c.RouteComponent);t.UserCenterMyFollowings=d},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(75),c=n(76),l=n(1),u=function(e){function t(t){var n=e.call(this,t)||this;return n.coverMessagePerson=function(e){var t=function(){n.setState({chatObj:e}),$(".message-message-pList > div").removeClass("message-message-pFocus"),$("#"+e.name).addClass("message-message-pFocus")};return s.createElement("div",{onClick:t,id:""+e.name},s.createElement(i.MessagePerson,{data:e}))},n.state={data:null,chatObj:null},n.getMoreContact=n.getMoreContact.bind(n),n.onChange=n.onChange.bind(n),n}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r;return o(this,function(a){switch(a.label){case 0:return e=l.getLocalStorage("accessToken"),console.log("进入消息开始时的token"),t=l.getLocalStorage("userInfo"),n=l.getStorage("recentContact"),n?[3,2]:[4,l.getRecentContact(0,7,this.context.router)];case 1:n=a.sent(),l.setStorage("recentContact",n),a.label=2;case 2:return[4,l.sortContactList(n,this.context.router)];case 3:return n=a.sent(),console.log("走远第一步"),console.log(n),n&&this.setState({data:n,chatObj:n[0]}),r=this.state.chatObj,$("#"+r.name).addClass("message-message-pFocus"),[2]}})})},t.prototype.getMoreContact=function(){return a(this,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:return"none"!=$("#moreDone").css("display")?[3,2]:($("#moreImg").removeClass("displaynone"),$("#moreDot").addClass("displaynone"),$("#moreShow").addClass("displaynone"),e=l.getStorage("recentContact"),[4,l.getRecentContact(e.length,7,this.context.router)]);case 1:t=n.sent(),e=e.concat(t),this.setState({data:e}),l.setStorage("recentContact",e),t.length<7?($("#moreImg").addClass("displaynone"),$("#moreDone").removeClass("displaynone")):($("#moreImg").addClass("displaynone"),$("#moreDot").removeClass("displaynone"),$("#moreShow").removeClass("displaynone")),n.label=2;case 2:return[2]}})})},t.prototype.onChange=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){return e=l.getStorage("recentContact"),this.setState({data:e,chatObj:e[0]}),$(".message-message-pList > div").removeClass("message-message-pFocus"),$("#"+this.state.chatObj.name).addClass("message-message-pFocus"),[2]})})},t.prototype.render=function(){$(".message-nav > div").removeClass("message-nav-focus"),$("#message").addClass("message-nav-focus");var e=this.state.data,t=this.state.chatObj;return t||(t={id:9898,name:"系统",portraitUrl:"http://file.cc98.org/uploadfile/2017/11/24/024368341.gif",message:[{id:9898,senderId:9898,receiverId:9898,content:"",isRead:!0,time:new Date,showTime:!0}]}),e||(e=[t]),console.log("正式开始数据填充的时候"),console.log(e),console.log(t),s.createElement("div",{className:"message-message"},s.createElement("div",{className:"message-message-people"},s.createElement("div",{className:"message-message-pTitle"},"近期私信"),s.createElement("div",{className:"message-message-pList"},e.map(this.coverMessagePerson),s.createElement("div",{className:"message-message-plMore",onClick:this.getMoreContact},s.createElement("img",{id:"moreImg",src:"http://file.cc98.org/uploadfile/2017/11/19/2348481046.gif",className:"displaynone"}),s.createElement("div",{id:"moreDot"},"..."),s.createElement("div",{id:"moreShow"},"显示更多小伙伴~"),s.createElement("div",{id:"moreDone",className:"displaynone"},"小伙伴们都出来了~")))),s.createElement(c.MessageWindow,{data:t,onChange:this.onChange}))},t}(s.Component);t.MessageMessage=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this.props.data;return e.message&&0!=e.message.length||(e.message=[{id:9898,senderId:9898,receiverId:9898,content:"",isRead:!0,time:new Date,showTime:!0}]),a.createElement("div",{className:"message-message-person"},a.createElement("img",{className:"message-message-pPortraitUrl",src:e.portraitUrl}),a.createElement("div",{className:"message-message-pInfo"},a.createElement("div",{className:"message-message-pName"},e.name),a.createElement("div",{className:"message-message-pMessage"},e.message[0].content)))},t}(a.Component);t.MessagePerson=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(77),c=n(78),l=n(1),u=function(e){function t(t){var n=e.call(this,t)||this;return n.coverMessageProps=function(e){var t=l.getLocalStorage("userInfo"),r=n.props.data;return e.receiverId==t.id?s.createElement(c.MessageReceiver,{id:e.id,senderName:r.name,receiverName:t.name,senderPortraitUrl:r.portraitUrl,receiverPortraitUrl:t.portraitUrl,content:e.content,isRead:e.isRead,time:e.time,showTime:e.showTime}):e.senderId==t.id?s.createElement(i.MessageSender,{id:e.id,senderName:t.name,receiverName:r.name,senderPortraitUrl:t.portraitUrl,receiverPortraitUrl:r.portraitUrl,content:e.content,isRead:e.isRead,time:e.time,showTime:e.showTime}):void 0},n.report=function(){alert("举报他人恶意私信请到【论坛事务】按照格式发帖投诉，记得截图保留证据，管理员会及时进行处理！感谢您对CC98的支持！")},n.state={data:[]},n.handleScroll=n.handleScroll.bind(n),n.getNewMessage=n.getNewMessage.bind(n),n.postMessage=n.postMessage.bind(n),n}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){return o(this,function(e){return this.setState({data:this.props.data.message}),document.getElementById("messageContent").addEventListener("scroll",this.handleScroll),[2]})})},t.prototype.componentWillReceiveProps=function(e){return a(this,void 0,void 0,function(){return o(this,function(t){return document.getElementById("quickToTheBottom").scrollIntoView(),this.setState({data:e.data.message}),[2]})})},t.prototype.handleScroll=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s;return o(this,function(o){switch(o.label){case 0:return 0!=(e=$("#messageContent")[0].scrollTop)?[3,2]:(console.log("到顶啦"),$("#wcLoadingImg").removeClass("displaynone"),t=this.state.data,[4,l.getRecentMessage(this.props.data.id,t.length,10,this.context.router)]);case 1:if(n=o.sent(),n.length>0){if(r=t.concat(n),r=l.sortRecentMessage(r),this.setState({data:r}),a=l.getStorage("recentContact")){for(s in a)if(a[s].id==this.props.data.id){a[s].message=r;break}l.setStorage("recentContact",a)}}else $("#wcLoadingImg").addClass("displaynone"),$("#wcLoadingText").removeClass("displaynone");o.label=2;case 2:return[2]}})})},t.prototype.getNewMessage=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s,i;return o(this,function(o){switch(o.label){case 0:return document.getElementById("quickToTheBottom").scrollIntoView(),[4,l.getRecentMessage(this.props.data.id,0,10,this.context.router)];case 1:if(e=o.sent(),t=[],n=l.getStorage("recentContact")){for(r=0;r<n.length;r++)if(n[r].id==this.props.data.id){if((t=n[r].message)!=[])for(a=0;a<e.length;a++)if(e[a].id==t[0].id){e=e.slice(0,a).concat(t),e=l.sortRecentMessage(e);break}n[r].message=e;break}r==n.length?(s=[this.props.data],s[0].message=e,n=s.concat(n),l.setStorage("recentContact",n),this.setState({data:e})):0==r?(l.setStorage("recentContact",n),this.setState({data:e})):(i=n[r],n.splice(r,1),n.unshift(i),l.setStorage("recentContact",n),this.props.onChange())}return[2]}})})},t.prototype.handleFocus=function(){return a(this,void 0,void 0,function(){return o(this,function(e){return $("#wPostNotice").addClass("displaynone"),$("#wPostError").addClass("displaynone"),$("#postContent")[0].focus(),[2]})})},t.prototype.handleBlur=function(){return a(this,void 0,void 0,function(){return o(this,function(e){return""==$("#postContent").val()&&("none"==$("#wPostNotice").css("display")?$("#wPostNotice").removeClass("displaynone"):$("#wPostNotice").addClass("displaynone")),[2]})})},t.prototype.postMessage=function(){return a(this,void 0,void 0,function(){var e,t,n;return o(this,function(r){switch(r.label){case 0:return""==$("#postContent").val()?[2]:(e={receiverId:this.props.data.id,content:$("#postContent").val()},t=JSON.stringify(e),[4,l.sendMessage(t,this.context.router)]);case 1:return n=r.sent(),403==n.status?($("#postContent").val(""),$("#wPostError").removeClass("displaynone"),[2]):(setTimeout(this.getNewMessage,200),$("#postContent").val(""),[2])}})})},t.prototype.render=function(){var e=this.props.data;return console.log(this.state.data),s.createElement("div",{className:"message-message-window"},s.createElement("div",{className:"message-message-wHeader"},s.createElement("div",{className:"message-message-wReport"}),s.createElement("div",{className:"message-message-wTitle"},"与 ",e.name," 的私信"),s.createElement("div",{className:"message-message-wReport"},s.createElement("button",{onClick:this.report},"举报"))),s.createElement("div",{className:"message-message-wContent",id:"messageContent"},s.createElement("div",{id:"quickToTheBottom",className:"quickToTheBottom"}),this.state.data.map(this.coverMessageProps),s.createElement("div",{className:"message-message-wcLoading"},s.createElement("img",{src:"http://file.cc98.org/uploadfile/2017/11/19/2348481046.gif",id:"wcLoadingImg",className:"displaynone"}),s.createElement("div",{id:"wcLoadingText",className:"message-message-wcLoadingText displaynone"},"没有更多消息了~"))),s.createElement("div",{className:"message-message-wPost"},s.createElement("textarea",{className:"message-message-wPostArea",id:"postContent",onFocus:this.handleFocus,onBlur:this.handleBlur}),s.createElement("div",{id:"wPostNotice",className:"message-message-wPostNotice",onClick:this.handleFocus},"请在这里填入您要发送的私信内容"),s.createElement("div",{id:"wPostError",className:"message-message-wPostError displaynone",onClick:this.handleFocus},"您的发送过快，请稍作歇息~"),s.createElement("button",{className:"message-message-wPostBtn",onClick:this.postMessage},"发送")))},t}(s.Component);t.MessageWindow=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(5),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e,t="/user/name/"+this.props.senderName;return e=this.props.showTime?"message-message-wcTime":"displaynone",a.createElement("div",{className:"message-message-wc"},a.createElement("div",{className:e},moment(this.props.time).format("YYYY-MM-DD HH:mm:ss")),a.createElement("div",{className:"message-message-wcSender"},a.createElement("a",{href:t,target:"_blank"},a.createElement("img",{className:"message-message-wcPortraitUrl",src:this.props.senderPortraitUrl})),a.createElement("div",{className:"message-message-wcContent"},a.createElement("div",{id:String(this.props.id),className:"message-message-wcText"},a.createElement(o.UbbContainer,{code:this.props.content}))),a.createElement("div",{className:"message-message-wcRead1"},a.createElement("div",{className:"message-message-wcRead2"},this.props.isRead?"已读":"未读"))))},t}(a.Component);t.MessageSender=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(5),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e,t="/user/name/"+this.props.senderName;return e=this.props.showTime?"message-message-wcTime":"displaynone",a.createElement("div",{className:"message-message-wc"},a.createElement("div",{className:e},moment(this.props.time).format("YYYY-MM-DD HH:mm:ss")),a.createElement("div",{className:"message-message-wcReceiver"},a.createElement("a",{href:t,target:"_blank"},a.createElement("img",{className:"message-message-wcPortraitUrl",src:this.props.senderPortraitUrl})),a.createElement("div",{className:"message-message-wcContent"},a.createElement("div",{className:"message-message-wcText",id:String(this.props.id)},a.createElement(o.UbbContainer,{code:this.props.content})))))},t}(a.Component);t.MessageReceiver=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return $(".message-nav > div").removeClass("message-nav-focus"),$("#response").addClass("message-nav-focus"),a.createElement("div",null,"这里是我的回复")},t}(a.Component);t.MessageResponse=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return $(".message-nav > div").removeClass("message-nav-focus"),$("#attme").addClass("message-nav-focus"),a.createElement("div",null,"这里是@我的消息")},t}(a.Component);t.MessageAttme=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return $(".message-nav > div").removeClass("message-nav-focus"),$("#system").addClass("message-nav-focus"),a.createElement("div",null,"这里是系统消息")},t}(a.Component);t.MessageSystem=o},function(e,t,n){"use strict";function r(e){return i.createElement("div",{className:"focus-board",id:""+e.id},e.name)}var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),c=n(1),l=function(e){function t(t){var n=e.call(this,t)||this,r=c.getStorage("focusBoardList");return console.log(r),r||(r=[]),n.state={data:r},n}return a(t,e),t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t,n,r,a,o,i,l,u,p,d,m,h;return s(this,function(s){switch(s.label){case 0:return(e=c.getStorage("focusBoardList"))?(this.setState({data:e}),[3,7]):[3,1];case 1:e=[],t=c.getLocalStorage("accessToken"),n=c.getLocalStorage("userInfo"),r=n.customBoards,a=new Headers,a.append("Authorization",t),o=[];for(i in r)o.push(i);l=0,s.label=2;case 2:return l<o.length?(u=o[l],[4,fetch("http://apitest.niconi.cc/board/"+r[u],{headers:a})]):[3,6];case 3:return p=s.sent(),[4,p.json()];case 4:d=s.sent(),e.push({id:r[u],name:d.name}),s.label=5;case 5:return l++,[3,2];case 6:this.setState({data:e}),c.setStorage("focusBoardList",e),s.label=7;case 7:return m=c.getStorage("currentFocusBoard"),m&&($(".focus-board").removeClass("focus-hover"),$("boardId_"+m.id).addClass("focus-hover")),h=this,$(".focus-board").click(function(){if("focus-board"==this.className){var e={boardId:this.id,boardName:this.innerHTML};c.setStorage("currentFocusBoard",e),$(".focus-board").removeClass("focus-hover"),$(this).addClass("focus-hover"),h.props.onChange()}else"focus-board focus-hover"==this.className&&(c.removeStorage("currentFocusBoard"),$(".focus-board").removeClass("focus-hover"),h.props.onChange())}),[2]}})})},t.prototype.render=function(){return i.createElement("div",{className:"focus-board-area"},i.createElement("div",{className:"focus-board",id:"0"},"关注用户"),this.state.data.map(r))},t}(i.Component);t.FocusBoardArea=l;var u=function(){function e(){}return e}();t.FocusProps=u},function(e,t,n){"use strict";function r(e){return i.createElement(c.FocusTopicSingle,{title:e.title,hitCount:e.hitCount,id:e.id,boardId:e.boardId,boardName:e.boardName,replyCount:e.replyCount,userId:e.userId,userName:e.userName,portraitUrl:e.portraitUrl,time:e.time,likeCount:e.likeCount,dislikeCount:e.dislikeCount,fanCount:e.fanCount})}var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),c=n(10),l=n(1),u=function(e){function t(t){var n=e.call(this,t)||this,r=l.getStorage("focusBoardTopic");return r||(r=[]),n.state={data:r,from:0,loading:!0},n.handleScroll=n.handleScroll.bind(n),n}return a(t,e),t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t,n;return s(this,function(r){switch(r.label){case 0:return[4,l.getFocusTopic(this.state.from,this.context.router)];case 1:if(e=r.sent(),t=l.getStorage("focusBoardTopic"))for(n=0;n<e.length;n++)if(e[n].id==t[0].id){e=e.slice(0,n).concat(t);break}return e.length>100&&(e=e.slice(0,100)),this.setState({data:e,from:e.length}),l.setStorage("focusBoardTopic",e),document.addEventListener("scroll",this.handleScroll),[2]}})})},t.prototype.componentWillUnmount=function(){return o(this,void 0,void 0,function(){return s(this,function(e){return document.removeEventListener("scroll",this.handleScroll),[2]})})},t.prototype.handleScroll=function(){return o(this,void 0,void 0,function(){var e,t,n;return s(this,function(r){switch(r.label){case 0:if(!l.isBottom()||!this.state.loading)return[3,5];if(this.state.from>=99)return $("#focus-topic-loading").addClass("displaynone"),$("#focus-topic-loaddone").removeClass("displaynone"),[2];this.setState({loading:!1}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l.getFocusTopic(this.state.from,this.context.router)];case 2:return e=r.sent(),[3,4];case 3:return t=r.sent(),this.setState({loading:!0}),[2];case 4:n=this.state.data.concat(e),this.setState({data:n,from:n.length,loading:!0}),l.setStorage("focusBoardTopic",n),r.label=5;case 5:return[2]}})})},t.prototype.render=function(){return i.createElement("div",{className:"focus-topic-area"},i.createElement("div",{className:"focus-topic-topicArea"},this.state.data.map(r)),i.createElement("div",{className:"focus-topic-loading",id:"focus-topic-loading"},i.createElement("img",{src:"http://ww3.sinaimg.cn/large/0060lm7Tgy1fitwrd6yv0g302s0093y9.gif"})),i.createElement("div",{className:"focus-topic-loaddone displaynone",id:"focus-topic-loaddone"},"已加载100条新帖，无法加载更多了~"))},t}(i.Component);t.FocusTopicArea=u},function(e,t,n){"use strict";function r(e){return i.createElement(c.FocusTopicSingle,{title:e.title,hitCount:e.hitCount,id:e.id,boardId:e.boardId,boardName:e.boardName,replyCount:e.replyCount,userId:e.userId,userName:e.userName,portraitUrl:e.portraitUrl,time:e.time,likeCount:e.likeCount,dislikeCount:e.dislikeCount,fanCount:e.fanCount})}var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),c=n(10),l=n(1),u=function(e){function t(t){var n=e.call(this,t)||this,r=l.getStorage("focusBoard_"+n.props.boardId);return r||(r=[]),n.state={data:r,from:0,loading:!0},n.handleScroll=n.handleScroll.bind(n),n}return a(t,e),t.prototype.componentWillReceiveProps=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){return this.getData(e),[2]})})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){return s(this,function(e){return this.getData(this.props),[2]})})},t.prototype.getData=function(e){return o(this,void 0,void 0,function(){var t,n,r;return s(this,function(a){switch(a.label){case 0:return[4,l.getFocusBoardTopic(e.boardId,e.boardNme,0,this.context.router)];case 1:if(t=a.sent(),n=l.getStorage("focusBoard_"+e.boardId))for(r=0;r<t.length;r++)if(t[r].id==n[0].id){t=t.slice(0,r).concat(n);break}return t.length>100&&(t=t.slice(0,100)),this.setState({data:t,from:t.length}),l.setStorage("focusBoard_"+e.boardId,t),document.addEventListener("scroll",this.handleScroll),[2]}})})},t.prototype.componentWillUnmount=function(){return o(this,void 0,void 0,function(){return s(this,function(e){return document.removeEventListener("scroll",this.handleScroll),[2]})})},t.prototype.handleScroll=function(){return o(this,void 0,void 0,function(){var e,t,n;return s(this,function(r){switch(r.label){case 0:if(!l.isBottom()||!this.state.loading)return[3,5];if(this.state.from>=99)return $("#focus-topic-loading").addClass("displaynone"),$("#focus-topic-loaddone").removeClass("displaynone"),[2];this.setState({loading:!1}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l.getFocusBoardTopic(this.props.boardId,this.props.boardNme,this.state.from,this.context.router)];case 2:return e=r.sent(),[3,4];case 3:return t=r.sent(),this.setState({loading:!0}),[2];case 4:n=this.state.data.concat(e),this.setState({data:n,from:n.length,loading:!0}),l.setStorage("focusBoard_"+this.props.boardId,n),r.label=5;case 5:return[2]}})})},t.prototype.render=function(){return i.createElement("div",{className:"focus-topic-area"},i.createElement("div",{className:"focus-topic-topicArea"},this.state.data.map(r)),i.createElement("div",{className:"focus-topic-loading",id:"focus-topic-loading"},i.createElement("img",{src:"http://ww3.sinaimg.cn/large/0060lm7Tgy1fitwrd6yv0g302s0093y9.gif"})),i.createElement("div",{className:"focus-topic-loaddone displaynone",id:"focus-topic-loaddone"},"已加载100条新帖，无法加载更多了~"))},t}(i.Component);t.FocusBoardTopicArea=u;var p=function(){function e(){}return e}();t.FocusBoardTopicProps=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(3),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return a.createElement("div",{className:"user-center-navigation",id:"userCenterNavigation"},a.createElement("ul",null,a.createElement(i,{to:""+location.pathname,label:"主页",activeOnlyWhenExact:!0,myClassName:"fa-home"}),a.createElement("hr",null)))},t}(a.Component);t.UserNavigation=s;var i=function(e){var t=e.label,n=e.to,r=e.activeOnlyWhenExact,s=void 0!==r&&r,i=e.myClassName;return a.createElement(o.Route,{path:n,exact:s,children:function(e){var r=e.match;return a.createElement("li",{className:r?"user-center-navigation-active":""},a.createElement(o.Link,{className:""+i,to:n},a.createElement("p",null,t)))}})}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(3),c=n(87),l=n(88),u=n(20),p=n(1),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.createElement("div",{className:"user-center-router"},s.createElement(i.Route,{path:"/user/",component:m}))},t}(s.Component);t.UserRouter=d;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r;return o(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),e=void 0,p.isLogOn()&&(e={Authorization:p.getLocalStorage("accessToken")}),t=void 0,location.pathname.split("/")[2]?"name"!==location.pathname.split("/")[2]?[3,2]:[4,fetch("http://apitest.niconi.cc/User/Name/"+location.pathname.split("/")[3],{headers:e})]:[2,0];case 1:return t=a.sent(),[3,4];case 2:return[4,fetch("http://apitest.niconi.cc/User/"+location.pathname.split("/")[2],{headers:e})];case 3:t=a.sent(),a.label=4;case 4:if(200!==t.status)throw{};return[4,t.json()];case 5:return n=a.sent(),console.log(n),this.setState({userInfo:n,userAvatarImgURL:n.portraitUrl,responseState:t.status}),[3,7];case 6:return r=a.sent(),console.log("加载失败"),[3,7];case 7:return[2]}})})},t.prototype.render=function(){return null!==this.state&&200===this.state.responseState?s.createElement("div",{className:"user-center-exact"},s.createElement(u.UserCenterExactAvatar,{userAvatarImgURL:this.state.userAvatarImgURL}),s.createElement(c.UserExactProfile,{userInfo:this.state.userInfo}),s.createElement(l.UserRouterActivities,{id:this.state.userInfo.id})):s.createElement("p",null,"加载中")},t}(s.Component)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(5),c=n(1),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isFollowing:n.props.userInfo.isFollowing,buttonIsDisabled:!1,buttonInfo:n.props.userInfo.isFollowing?"已关注":"关注"},n.unfollow=n.unfollow.bind(n),n.follow=n.follow.bind(n),n}return r(t,e),t.prototype.follow=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return this.setState({buttonIsDisabled:!0,buttonInfo:"关注中"}),[4,c.followUser(Number.parseInt(this.props.userInfo.id))];case 1:return e=t.sent(),e?this.setState({buttonIsDisabled:!1,buttonInfo:"已关注",isFollowing:!0}):this.setState({buttonIsDisabled:!1,buttonInfo:"关注失败",isFollowing:!1}),[2]}})})},t.prototype.getPrivilegeColor=function(){switch(this.props.userInfo.privilege){case"注册用户":return"grey";case"超级版主":return"pink";case"全站贵宾":return"blue";case"管理员":return"red"}},t.prototype.unfollow=function(){return a(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return this.setState({buttonIsDisabled:!0,buttonInfo:"取关中"}),[4,c.unfollowUser(Number.parseInt(this.props.userInfo.id))];case 1:return e=t.sent(),!0===e?this.setState({buttonIsDisabled:!1,buttonInfo:"重新关注",isFollowing:!1}):this.setState({buttonIsDisabled:!1,buttonInfo:"取关失败",isFollowing:!0}),[2]}})})},t.prototype.render=function(){var e=this;return s.createElement("div",{className:"user-profile"},s.createElement("div",{id:"userId"},s.createElement("div",{id:"userId"},s.createElement("p",null,this.props.userInfo.name,s.createElement("span",{style:{fontSize:"12px",color:this.getPrivilegeColor()}},this.props.userInfo.privilege)),s.createElement("button",{type:"button",onClick:function(){location.href="/message/message?id="+e.props.userInfo.id}},"私信"),s.createElement("button",{type:"button",id:this.state.isFollowing?"unfollow":"",onClick:this.state.isFollowing?this.unfollow:this.follow,disabled:this.state.buttonIsDisabled,onMouseOver:function(){e.state.isFollowing&&!e.state.buttonIsDisabled&&e.setState({buttonInfo:"取消关注"})},onMouseLeave:function(){e.state.isFollowing&&!e.state.buttonIsDisabled&&e.setState({buttonInfo:"已关注"})}},this.state.buttonInfo))),s.createElement("div",{id:"userGenderAndBirthday"},s.createElement("p",null,"性别：  ",1===this.props.userInfo.gender?"男":"女"," "),null===this.props.userInfo.birthday?null:s.createElement("p",null,"生日：  ",this.props.userInfo.birthday.slice(0,this.props.userInfo.birthday.indexOf("T"))),this.props.userInfo.emailAddress?s.createElement("p",null,"邮箱：  ",this.props.userInfo.emailAddress):null,this.props.userInfo.qq?s.createElement("p",null,"QQ：  ",this.props.userInfo.qq):null,this.props.userInfo.postCount?s.createElement("p",null,"发帖数：  ",this.props.userInfo.postCount):null,this.props.userInfo.prestige?s.createElement("p",null,"威望：  ",this.props.userInfo.prestige):null,this.props.userInfo.displayTitle?s.createElement("p",null,"用户组：  ",this.props.userInfo.displayTitle):null,this.props.userInfo.registerTime?s.createElement("p",null,"注册时间：  ",this.props.userInfo.registerTime.replace("T"," ")):null,this.props.userInfo.lastLogOnTime?s.createElement("p",null,"最后登录时间：  ",this.props.userInfo.lastLogOnTime.replace("T"," ")):null),this.props.userInfo.signatureCode?s.createElement("div",{className:"user-description"},s.createElement("p",null,"个性签名"),s.createElement(i.UbbContainer,{code:this.props.userInfo.signatureCode})):null)},t}(s.Component);t.UserExactProfile=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(8),c=n(4),l=n(1),u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={userRecentPosts:[],isLoading:!1},n.scrollHandler=n.scrollHandler.bind(n),n}return r(t,e),t.prototype.scrollHandler=function(e){return a(this,void 0,void 0,function(){var e,t,n,r,a,s,i,c,u,p;return o(this,function(o){switch(o.label){case 0:if(!((e=document.body.scrollHeight-window.pageYOffset)<1500&&!1===this.state.isLoading))return[3,10];o.label=1;case 1:return o.trys.push([1,9,,10]),this.setState({isLoading:!0}),t="http://apitest.niconi.cc/topic/userrecent?userid="+this.props.id+"&from="+this.state.userRecentPosts.length+"&size=10",n=l.getLocalStorage("accessToken"),r=new Headers,r.append("Authorization",n),[4,fetch(t,{headers:r})];case 2:return a=o.sent(),200!==a.status?[3,7]:[4,a.json()];case 3:s=o.sent(),s.length<10&&window.removeEventListener("scroll",this.scrollHandler),i=this.state.userRecentPosts,c=s.length,o.label=4;case 4:return c--?[4,this.item2post(s[c])]:[3,6];case 5:return u=o.sent(),i.push(u),[3,4];case 6:return this.setState({userRecentPosts:i,isLoading:!1}),[3,8];case 7:throw{};case 8:return[3,10];case 9:return p=o.sent(),this.setState({isLoading:!1}),console.log("用户中心滚动加载失败"),[3,10];case 10:return[2]}})})},t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s,i,c,u;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,8,,9]),e="http://apitest.niconi.cc/topic/userrecent?userid="+this.props.id+"&from=0&size=10",t=l.getLocalStorage("accessToken"),n=new Headers,n.append("Authorization",t),[4,fetch(e,{headers:n})];case 1:return r=o.sent(),200!==r.status?[3,6]:[4,r.json()];case 2:a=o.sent(),console.log(a),s=[],i=a.length,o.label=3;case 3:return i--?[4,this.item2post(a[i])]:[3,5];case 4:return c=o.sent(),s.unshift(c),[3,3];case 5:return this.setState({userRecentPosts:s}),10===a.length&&window.addEventListener("scroll",this.scrollHandler),[3,7];case 6:throw{};case 7:return[3,9];case 8:return u=o.sent(),console.log("用户中心帖子加载失败"),[3,9];case 9:return[2]}})})},t.prototype.componentWillUnmount=function(){window.removeEventListener("scroll",this.scrollHandler)},t.prototype.item2post=function(e){return a(this,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:return t=new c.UserRecentPost,t.approval=e.likeCount,n=t,[4,l.getBoardName(e.boardId,this.context.router)];case 1:return n.board=r.sent(),t.date=e.time.replace("T"," ").slice(0,19),t.disapproval=e.dislikeCount,t.content=e.title,t.id=e.id,t.boardId=e.boardId,t.name=e.userName,t.isAnonymous=e.isAnonymous,[2,t]}})})},t.prototype.render=function(){if(0===this.state.userRecentPosts.length){var e={marginLeft:"2rem"};return s.createElement("div",{className:"user-posts",style:e},"没有主题")}for(var t=this.state.userRecentPosts.map(function(e){return s.createElement(i.UserCenterExactActivitiesPost,{userRecentPost:e})}),n=1;n<t.length;n+=2)t.splice(n,0,s.createElement("hr",null));return s.createElement("div",{className:"user-activities"},s.createElement("p",null,"近期动态"),s.createElement("div",{className:"user-posts"},t))},t}(s.Component);t.UserRouterActivities=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(6),c=n(1),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={loginName:"",loginPassword:"",loginMessage:"",isLogining:!1},n.handleNameChange=n.handleNameChange.bind(n),n.handlePasswordChange=n.handlePasswordChange.bind(n),n.handleLogin=n.handleLogin.bind(n),n}return r(t,e),t.prototype.shake=function(e){return e.classList.add("shake"),setTimeout(function(){e.classList.remove("shake")},500),e},t.prototype.handleNameChange=function(e){this.setState({loginName:e.target.value})},t.prototype.handlePasswordChange=function(e){this.setState({loginPassword:e.target.value})},t.prototype.handleLogin=function(e){return a(this,void 0,void 0,function(){var t,n,r,a,s,l,u,p,d;return o(this,function(o){switch(o.label){case 0:return e.preventDefault(),this.state.isLogining?[2,!1]:this.state.loginName?this.state.loginPassword?(this.setState({loginMessage:"登录中",isLogining:!0}),t="https://openid.cc98.org/connect/token",n={client_id:"9a1fd200-8687-44b1-4c20-08d50a96e5cd",client_secret:"8b53f727-08e2-4509-8857-e34bf92b27f2",grant_type:"password",username:this.state.loginName,password:this.state.loginPassword,scope:"cc98-api openid"},r=new Headers,r.append("Content-Type","application/x-www-form-urlencoded"),[4,fetch(t,{method:"POST",headers:r,body:i.param(n)})]):(this.setState({loginMessage:"请输入密码"}),this.shake(document.getElementById("loginPassword")).focus(),[2,!1]):(this.setState({loginMessage:"请输入用户名"}),this.shake(document.getElementById("loginName")).focus(),[2,!1]);case 1:return a=o.sent(),200!==a.status?(this.setState({loginMessage:"登录失败 "+a.status,isLogining:!1}),[2,!1]):[4,a.json()];case 2:return s=o.sent(),l="Bearer "+encodeURIComponent(s.access_token),c.setLocalStorage("accessToken",l,s.expires_in),c.setLocalStorage("userName",this.state.loginName),c.setLocalStorage("password",this.state.loginPassword),u=new Headers,u.append("Authorization",l),[4,fetch("http://apitest.niconi.cc/user/name/"+this.state.loginName,{headers:u})];case 3:return p=o.sent(),[4,p.json()];case 4:return d=o.sent(),c.setLocalStorage("userInfo",d),this.setState({loginMessage:"登录成功 正在返回首页",isLogining:!1}),setTimeout(function(){location.pathname="/"},1e3),[2]}})})},t.prototype.catch=function(e){console.log("Oops, error",e),this.setState({loginMessage:"登录失败",isLogining:!1})},t.prototype.render=function(){return s.createElement("div",{className:"login"},s.createElement("div",null,s.createElement("img",{src:"/images/login.png"}),s.createElement("div",null,s.createElement("img",{src:"/images/login_welcome.png"}),s.createElement("form",{onSubmit:this.handleLogin},s.createElement("div",{className:"login-form"},s.createElement("p",null,"用户名"),s.createElement("input",{type:"text",id:"loginName",onChange:this.handleNameChange,value:this.state.loginName})),s.createElement("div",{className:"login-form"},s.createElement("p",null,"密码"),s.createElement("input",{type:"password",id:"loginPassword",onChange:this.handlePasswordChange})),s.createElement("p",{id:"loginMessage"},this.state.loginMessage),s.createElement("button",{type:"submit",disabled:this.state.isLogining},"登录账号")),s.createElement("p",null,s.createElement("span",null,"还没账号？我要 ",s.createElement("a",{href:""},"注册"))))))},t}(s.Component);t.LogOnExact=l;!function(){function e(){}}()},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=function(e){function t(t){var n=e.call(this,t)||this;return n.state={logOffInfo:"登出中"},n}return r(t,e),t.prototype.componentDidMount=function(){localStorage.removeItem("accessToken"),localStorage.removeItem("userName"),this.setState({logOffInfo:"登出成功 正在前往登录页"}),setTimeout(function(){location.pathname="/logon"},2e3)},t.prototype.render=function(){return a.createElement("div",{className:"login"},a.createElement("div",null,a.createElement("img",{src:"/images/login.png"}),a.createElement("div",null,a.createElement("p",{className:"LogOffInfo"},this.state.logOffInfo))))},t}(a.Component);t.LogOff=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(4),c=n(32),l=n(9),u=n(11),p=n(1),d=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={userFans:[],totalPage:2,info:"加载中"},r}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s,c,l,u,d,m,h,f,g;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,11,,12]),e=p.getLocalStorage("accessToken"),t=this.match.params.page||1,n="http://apitest.niconi.cc/user/follow/fan?from="+10*(t-1)+"&size=10",r=new Headers,r.append("Authorization",e),[4,fetch(n,{headers:r})];case 1:return a=o.sent(),200!==a.status?[3,9]:[4,a.json()];case 2:if(!(s=o.sent())||!s.length)return this.setState({info:"没有粉丝"}),[2,!1];c=[],l=s.length,u=void 0,o.label=3;case 3:return l--?(d=s[l],m=new i.UserFanInfo,n="http://apitest.niconi.cc/user/"+d,[4,fetch(n)]):[3,6];case 4:return a=o.sent(),[4,a.json()];case 5:return u=o.sent(),m.name=u.name,m.avatarImgURL=u.portraitUrl,m.posts=u.postCount,m.id=d,m.fans=u.fanCount,c.push(m),[3,3];case 6:return h=p.getLocalStorage("userInfo").id,n="http://apitest.niconi.cc/user/follow/fancount?userid="+h,[4,fetch(n)];case 7:return a=o.sent(),[4,a.json()];case 8:return f=o.sent(),this.setState({userFans:c,totalPage:f%10==0?f/10:Math.floor(f/10)+1}),[3,10];case 9:throw{};case 10:return[3,12];case 11:return g=o.sent(),console.log("我的粉丝加载失败"),[3,12];case 12:return[2]}})})},t.prototype.render=function(){var e=this.match.params.page||1;if(0===this.state.userFans.length)return s.createElement("div",{className:"user-center-myfans"},this.state.info);for(var t=this.state.userFans.map(function(e){return s.createElement(c.UserCenterMyFollowingsUser,{userFanInfo:e})}),n=1;n<t.length;n+=2)t.splice(n,0,s.createElement("hr",null));return s.createElement("div",{className:"user-center-myfans"},s.createElement("div",{className:"user-center-myfans-exact"},t),s.createElement(u.UserCenterPageCount,{currentPage:parseInt(e),totalPage:this.state.totalPage,href:"/usercenter/myfans/"}))},t}(l.RouteComponent);t.UserCenterMyFans=d},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(8),c=n(4),l=n(9),u=n(11),p=n(1),d=function(e){function t(t,n){var r=e.call(this,t,n)||this;p.getLocalStorage("userInfo").postCount;return r.state={userRecentPosts:[],totalPage:r.match.params.page||1},r}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s,i,c,l,u;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,6,,7]),e=this.match.params.page||1,t="http://apitest.niconi.cc/me/recenttopics?from="+10*(e-1)+"&size=11",n=p.getLocalStorage("accessToken"),r=new Headers,r.append("Authorization",n),[4,fetch(t,{headers:r})];case 1:if(a=o.sent(),200!==a.status)throw{};return[4,a.json()];case 2:s=o.sent(),i=[],c=s.length,c<=10?this.setState({totalPage:Number.parseInt(e)}):(this.setState({totalPage:Number.parseInt(e)+1}),c=10),o.label=3;case 3:return c--?[4,this.item2post(s[c])]:[3,5];case 4:return l=o.sent(),i.unshift(l),[3,3];case 5:return this.setState({userRecentPosts:i}),[3,7];case 6:return u=o.sent(),console.log("我的主题加载失败"),[3,7];case 7:return[2]}})})},t.prototype.item2post=function(e){return a(this,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:return t=new c.UserRecentPost,t.approval=e.likeCount,n=t,[4,p.getBoardName(e.boardId,this.context.router)];case 1:return n.board=r.sent(),t.date=e.time.replace("T"," ").slice(0,19),t.disapproval=e.dislikeCount,t.content=e.title,t.id=e.id,t.boardId=e.boardId,t.name=e.userName,t.isAnonymous=e.isAnonymous,[2,t]}})})},t.prototype.render=function(){if(0===this.state.userRecentPosts.length)return s.createElement("div",{className:"user-posts"},"没有主题");for(var e=this.state.userRecentPosts.map(function(e){return s.createElement(i.UserCenterExactActivitiesPost,{userRecentPost:e})}),t=1;t<e.length;t+=2)e.splice(t,0,s.createElement("hr",null));return s.createElement("div",{className:"user-posts"},e,s.createElement(u.UserCenterPageCount,{currentPage:this.match.params.page||1,totalPage:this.state.totalPage,href:"/usercenter/myposts/"}))},t}(l.RouteComponent);t.UserCenterMyPostsExact=d},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(3),s=n(94),i=n(95),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return a.createElement(o.BrowserRouter,null,a.createElement("div",{className:"user-center-myfavorites"},a.createElement(l,{to:"/usercenter/myfavorites",label:"文章",activeOnlyWhenExact:!0})," | ",a.createElement(l,{to:"/usercenter/myfavorites/boards/1",label:"版面",activeOnlyWhenExact:!1}),a.createElement(o.Route,{path:"/usercenter/myfavorites/boards/1",component:i.UserCenterMyFavoritesBoards}),a.createElement(o.Route,{exact:!0,path:"/usercenter/myfavorites/:page?",component:s.UserCenterMyFavoritesPosts})))},t}(a.Component);t.UserCenterMyFavorites=c;var l=function(e){var t=e.label,n=e.to,r=e.activeOnlyWhenExact;return a.createElement(o.Route,{path:n,exact:r,children:function(e){var r=e.match;return a.createElement(o.Link,{className:r?"user-activities-active":"",to:n},t)}})}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(8),c=n(4),l=n(1),u=n(11),p=n(9),d=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={userRecentPosts:[],info:"加载中",totalPage:(Number.parseInt(r.match.params.page)||1)+1},r}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s,i,u,p,d;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),e=l.getLocalStorage("accessToken"),t=this.match.params.page||1,n="http://apitest.niconi.cc/topic/favorite?from="+10*(t-1)+"&size=11",r=new Headers,r.append("Authorization",e),[4,fetch(n,{headers:r})];case 1:if(a=o.sent(),200!==a.status)throw{};return[4,a.json()];case 2:if(s=o.sent(),0===s.length)return this.setState({info:"没有主题"}),[2];for(i=[],u=s.length,u<10?this.setState({totalPage:Number.parseInt(this.match.params.page)||1}):(u=10,this.setState({totalPage:(Number.parseInt(this.match.params.page)||1)+1}));u--;)p=new c.UserRecentPost,p.board=s[u].boardName,p.boardId=s[u].boardId,p.content=s[u].title,p.date=s[u].time.replace("T"," ").slice(0,19),p.id=s[u].id,i.unshift(p);return this.setState({userRecentPosts:i}),[3,4];case 3:return d=o.sent(),console.log("加载收藏失败"),[3,4];case 4:return[2]}})})},t.prototype.render=function(){if(!this.state.userRecentPosts||0===this.state.userRecentPosts.length)return s.createElement("div",{className:"user-posts"},this.state.info);for(var e=this.state.userRecentPosts.map(function(e){return s.createElement(i.UserCenterExactActivitiesPost,{userRecentPost:e})}),t=1;t<e.length;t+=2)e.splice(t,0,s.createElement("hr",null));return s.createElement("div",{className:"user-posts"},e,s.createElement(u.UserCenterPageCount,{currentPage:this.match.params.page||1,totalPage:this.state.totalPage,href:"/usercenter/myfavorites/"}))},t}(p.RouteComponent);t.UserCenterMyFavoritesPosts=d},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(1),c=n(96),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={boards:[],info:"加载中"},n}return r(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s,c,l,u,p,d;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),e=i.getLocalStorage("accessToken"),t=i.getLocalStorage("userName"),n=new Headers,n.append("Authorization",e),[4,fetch("http://apitest.niconi.cc/user/name/"+t,{headers:n})];case 1:if(r=o.sent(),200!==r.status)throw{};return[4,r.json()];case 2:return a=o.sent(),(s=a.customBoards)&&0!==s.length?(c=s.join("&id="),l="http://apitest.niconi.cc/board/?id="+c,n=new Headers,n.append("Authorization",e),[4,fetch(l,{headers:n})]):(this.setState({info:"没有关注"}),[2]);case 3:if(u=o.sent(),200!==u.status)throw{};return[4,u.json()];case 4:return p=o.sent(),this.setState({boards:p}),[3,6];case 5:return d=o.sent(),console.log("版面加载失败"),[3,6];case 6:return[2]}})})},t.prototype.render=function(){var e={marginTop:"2rem"};if(0===this.state.boards.length)return s.createElement("div",{style:e},this.state.info);for(var t=this.state.boards.map(function(e){return s.createElement(c.UserCenterMyFavoritesBoard,{UserFavoritesBoard:e})}),n=1;n<t.length;n+=2)t.splice(n,0,s.createElement("hr",null));return s.createElement("div",null,t)},t}(s.Component);t.UserCenterMyFavoritesBoards=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(1),c=function(e){function t(t){var n=e.call(this,t)||this;return n.state={buttonInfo:"取消关注",buttonIsDisabled:!1,isFollowing:!0},n.unfollow=n.unfollow.bind(n),n.follow=n.follow.bind(n),n}return r(t,e),t.prototype.unfollow=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s;return o(this,function(o){switch(o.label){case 0:this.setState({buttonIsDisabled:!0,buttonInfo:"取关中"}),o.label=1;case 1:return o.trys.push([1,3,,4]),e=i.getLocalStorage("accessToken"),t=this.props.UserFavoritesBoard.id,n="http://apitest.niconi.cc/me/removecustomboard/"+t+"/normal",r=new Headers,r.append("Authorization",e),[4,fetch(n,{method:"DELETE",headers:r})];case 2:if(a=o.sent(),200!==a.status)throw{};return this.setState({buttonIsDisabled:!1,buttonInfo:"重新关注",isFollowing:!1}),[3,4];case 3:return s=o.sent(),this.setState({buttonIsDisabled:!1,buttonInfo:"取关失败",isFollowing:!0}),[3,4];case 4:return[2]}})})},t.prototype.follow=function(){return a(this,void 0,void 0,function(){var e,t,n,r,a,s;return o(this,function(o){switch(o.label){case 0:this.setState({buttonIsDisabled:!0,buttonInfo:"关注中"}),o.label=1;case 1:return o.trys.push([1,3,,4]),e=i.getLocalStorage("accessToken"),t=this.props.UserFavoritesBoard.id,n="http://apitest.niconi.cc/me/addcustomboard/"+t,r=new Headers,r.append("Authorization",e),[4,fetch(n,{method:"POST",headers:r})];case 2:if(a=o.sent(),console.log(a),200!==a.status)throw{};return this.setState({buttonIsDisabled:!1,buttonInfo:"取消关注",isFollowing:!0}),[3,4];case 3:return s=o.sent(),this.setState({buttonIsDisabled:!1,buttonInfo:"关注失败",isFollowing:!1}),[3,4];case 4:return[2]}})})},t.prototype.render=function(){return s.createElement("div",{className:"user-center-myfavorite-board"},s.createElement("a",{href:"/list/"+this.props.UserFavoritesBoard.id,title:this.props.UserFavoritesBoard.name},s.createElement("img",null)),s.createElement("div",{className:"user-center-myfavorite-board-info"},s.createElement("p",null,"版主：",this.props.UserFavoritesBoard.boardMasters.join(" ")),s.createElement("p",null,"今日主题 ",this.props.UserFavoritesBoard.todayCount," / 总主题 ",this.props.UserFavoritesBoard.topicCount)),s.createElement("button",{type:"button",className:this.state.isFollowing?"":"follow",onClick:this.state.isFollowing?this.unfollow:this.follow,disabled:this.state.buttonIsDisabled},this.state.buttonInfo))},t}(s.Component);t.UserCenterMyFavoritesBoard=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),c=n(1),l=n(4),u=n(98),p=n(99),d=n(100),m=function(e){function t(t){var n=e.call(this,t)||this,r=c.getLocalStorage("userInfo"),a={EmailAddress:r.emailAddress,Gender:r.gender,Introduction:r.introduction,QQ:r.qq,SignatureCode:r.signatureCode,Birthday:r.birthday,birthdayYear:Number.parseInt(r.birthday.slice(0,4)),birthdayMouth:Number.parseInt(r.birthday.slice(5,7)),birthdayDay:Number.parseInt(r.birthday.slice(8,10))};return n.state={userInfo:a,info:"",isLoading:!1},n.handleSignatureChange=n.handleSignatureChange.bind(n),n.handleChange=n.handleChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n}return r(t,e),t.prototype.handleSignatureChange=function(e){this.setState(function(t){return{userInfo:a({},t.userInfo,{SignatureCode:e})}})},t.prototype.handleChange=function(e,t){this.setState(function(n){return{userInfo:a({},n.userInfo,(r={},r[e]=t,r))};var r})},t.prototype.handleSubmit=function(){return o(this,void 0,void 0,function(){var e,t,n,r,a,o,i,l,u,p=this;return s(this,function(s){switch(s.label){case 0:this.setState({isLoading:!0,info:"修改中"}),s.label=1;case 1:if(s.trys.push([1,7,,8]),e={Birthday:0!==this.state.userInfo.birthdayYear?this.state.userInfo.birthdayYear+"-"+this.state.userInfo.birthdayMouth+"-"+this.state.userInfo.birthdayDay:"",EmailAddress:this.state.userInfo.EmailAddress,Gender:this.state.userInfo.Gender,Introduction:this.state.userInfo.Introduction,QQ:this.state.userInfo.QQ,SignatureCode:this.state.userInfo.SignatureCode},e.EmailAddress&&!e.EmailAddress.match(/[\S]+@[\S]+\.[\S]+/))throw new Error("请检查邮箱地址");return t=c.getLocalStorage("accessToken"),n="http://apitest.niconi.cc/user",r=new Headers,r.append("Authorization",t),r.append("Content-Type","application/json"),[4,fetch(n,{method:"PUT",headers:r,body:JSON.stringify(e)})];case 2:return a=s.sent(),200!==a.status?[3,5]:(o=new Headers,o.append("Authorization",t),[4,fetch("http://apitest.niconi.cc/user/"+c.getLocalStorage("userInfo").id,{headers:o})]);case 3:return i=s.sent(),[4,i.json()];case 4:return l=s.sent(),c.setLocalStorage("userInfo",l),this.setState({info:"修改成功",isLoading:!1}),setTimeout(function(){p.setState({info:""})},1e3),[3,6];case 5:throw new Error(a.status.toString());case 6:return[3,8];case 7:return u=s.sent(),this.setState({info:u.message,isLoading:!1}),[3,8];case 8:return[2]}})})},t.prototype.render=function(){return i.createElement("div",{className:"user-center-config"},i.createElement(u.UserCenterConfigAvatar,null),i.createElement("hr",null),i.createElement(p.UserCenterConfigSignature,{signature:this.state.userInfo.SignatureCode,onchange:this.handleSignatureChange}),i.createElement("hr",null),i.createElement(d.UserCenterConfigOthers,{userinfo:this.state.userInfo,handleChange:this.handleChange}),i.createElement("hr",null),i.createElement("div",{className:"config-submit"},i.createElement("h2",null,"提交修改"),i.createElement("button",{type:"button",disabled:this.state.isLoading,onClick:this.handleSubmit},"提交"),i.createElement("p",{style:{height:""===this.state.info?"0":"1rem"}},this.state.info)))},t}(i.Component);t.UserCenterConfig=m;!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r(t,e)}(l.ChangeUserInfo)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,i,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n(1),c=function(e){function t(t){var n=e.call(this,t)||this,r=i.getLocalStorage("userInfo");return n.state={avatarURL:"",info:"",isShown:!1,divheight:0,divWidth:0,selectorWidth:160,selectorLeft:0,selectorTop:0,avatarNow:r.portraitUrl,isLoading:!1,naturalWidth:0,naturalHeight:0,img:null,NUM_MAX:0},n.handleChange=n.handleChange.bind(n),n.handleIMGLoad=n.handleIMGLoad.bind(n),n.handleSelectorMove=n.handleSelectorMove.bind(n),n.handleResizeMove=n.handleResizeMove.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.handleCoverMouseMove=n.handleCoverMouseMove.bind(n),n.handleMouseUp=n.handleMouseUp.bind(n),n}return r(t,e),t.prototype.handleChange=function(e){var t=this,n=e.target.files[0];if(!n.type.match("image.*"))return this.setState({info:"请选择图片文件",isShown:!1,divheight:0}),!1;var r=new FileReader;r.readAsDataURL(n),r.addEventListener("load",function(e){t.setState({isShown:!0,avatarURL:e.target.result})})},t.prototype.handleIMGLoad=function(e,t,n){if(e<160||t<160)return void this.setState({info:"图片至少为 160*160",isShown:!1,divheight:0});if(e>800)return void this.setState({info:"图片宽度至多为 800",isShown:!1,divheight:0});var r=this.myCanvas.getContext("2d");this.myCanvas.width=e,this.myCanvas.height=t,r.drawImage(n,0,0,e,t,0,0,e,t),this.setState({divheight:t+50,divWidth:e+50,isShown:!0,info:"请选择要显示的区域",selectorLeft:e/4,selectorTop:t/4,selectorWidth:Math.min(t,e)/2,naturalWidth:e,naturalHeight:t,img:n,NUM_MAX:Math.min(500,e,t)})},t.prototype.handleMouseUp=function(){this.dragging=null},t.prototype.componentDidMount=function(){this.selector.addEventListener("mousedown",this.handleSelectorMove),this.selector.addEventListener("mousemove",this.handleSelectorMove),this.selector.addEventListener("mouseup",this.handleSelectorMove),this.resize.addEventListener("mousedown",this.handleResizeMove),this.resize.addEventListener("mousemove",this.handleResizeMove),this.resize.addEventListener("mouseup",this.handleResizeMove),this.cover.addEventListener("mousemove",this.handleCoverMouseMove),this.cover.addEventListener("mouseup",this.handleCoverMouseMove),window.addEventListener("mouseup",this.handleMouseUp)},t.prototype.componentWillUnmount=function(){this.selector.removeEventListener("mousedown",this.handleSelectorMove),this.selector.removeEventListener("mousemove",this.handleSelectorMove),this.selector.removeEventListener("mouseup",this.handleSelectorMove),this.resize.removeEventListener("mousedown",this.handleResizeMove),this.resize.removeEventListener("mousemove",this.handleResizeMove),this.resize.removeEventListener("mouseup",this.handleResizeMove),this.cover.removeEventListener("mousemove",this.handleCoverMouseMove),this.cover.removeEventListener("mouseup",this.handleCoverMouseMove),window.removeEventListener("mouseup",this.handleMouseUp)},t.prototype.handleSelectorMove=function(e){var t=this;if(void 0!==this.dragging&&null!==this.dragging&&"resize"===this.dragging.id)this.handleCoverMouseMove(e);else switch(e.type){case"mousedown":this.diffX=e.clientX-e.target.offsetLeft,this.diffY=e.clientY-e.target.offsetTop,this.dragging=e.target;break;case"mousemove":if(null!==this.dragging){var n=e.clientY-this.diffY,r=e.clientX-this.diffX;this.setState(function(e){return n<0&&(n=0),r<0&&(r=0),n>e.naturalHeight-t.state.selectorWidth&&(n=e.naturalHeight-t.state.selectorWidth),r>e.naturalWidth-t.state.selectorWidth&&(r=e.naturalWidth-t.state.selectorWidth),{selectorTop:n,selectorLeft:r}})}break;case"mouseup":case"mouseleave":this.dragging=null}},t.prototype.handleSubmit=function(){var e=this,t=this.newAvatar,n=t.getContext("2d"),r=this.state.selectorLeft,s=this.state.selectorTop,c=this.state.selectorWidth;t.width=c,t.height=c,n.drawImage(this.state.img,r,s,c,c,0,0,c,c),t.toBlob(function(t){return a(e,void 0,void 0,function(){var e,n,r,a,s,c,l,u,p;return o(this,function(o){switch(o.label){case 0:return e=new File([t],"头像.jpg",{type:"image/jpeg",lastModified:Date.now()}),[4,i.uploadFile(e)];case 1:n=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),this.setState({isLoading:!0}),r=i.getLocalStorage("accessToken"),a="http://apitest.niconi.cc/user/portrait",s=new Headers,s.append("Content-Type","application/json"),s.append("Authorization",r),c="http://apitest.niconi.cc"+n.content,[4,fetch(a,{method:"PUT",headers:s,body:JSON.stringify(c)})];case 3:if(l=o.sent(),200!==l.status)throw{};return this.setState({info:"修改成功",avatarNow:c,isLoading:!1,isShown:!1,divheight:0}),u=i.getLocalStorage("userInfo"),u.portraitUrl=c,i.setLocalStorage("userInfo",u),[3,5];case 4:return p=o.sent(),this.setState({info:"修改失败",isLoading:!1,isShown:!1,divheight:0}),[3,5];case 5:return[2]}})})},"image/jpeg",.75)},t.prototype.handleResizeMove=function(e){var t=this;switch(e.type){case"mousedown":this.diffX=e.clientX-e.target.offsetLeft,this.dragging=e.target;break;case"mousemove":null!==this.dragging&&(this.diffY=e.clientX-e.target.offsetLeft,this.setState(function(e){var n=e.selectorWidth+t.diffY-t.diffX,r=Math.min(e.NUM_MAX,e.naturalWidth-e.selectorLeft,e.naturalHeight-e.selectorTop);return isNaN(n)||(n<100&&(n=100),n>r&&(n=r)),{selectorWidth:isNaN(n)?e.selectorWidth:n}}));break;case"mouseup":case"mouseleave":this.dragging=null}},t.prototype.handleCoverMouseMove=function(e){var t=this;switch(e.type){case"mouseup":this.dragging=null;break;case"mousemove":if(void 0!==this.dragging&&null!==this.dragging&&"resize"===this.dragging.id)this.diffY=e.clientX-this.dragging.offsetLeft,this.setState(function(e){var n=e.selectorWidth+t.diffY-t.diffX;if(!isNaN(n)){var r=Math.min(e.NUM_MAX,e.naturalWidth-e.selectorLeft,e.naturalHeight-e.selectorTop);n<100&&(n=100),n>r&&(n=r)}return{selectorWidth:isNaN(n)?e.selectorWidth:n}});else if(void 0!==this.dragging&&null!==this.dragging&&"selector"===this.dragging.id){var n=e.clientY-this.diffY,r=e.clientX-this.diffX;this.setState(function(e){return n<0&&(n=0),r<0&&(r=0),n>e.naturalHeight-t.state.selectorWidth&&(n=e.naturalHeight-t.state.selectorWidth),r>e.naturalWidth-t.state.selectorWidth&&(r=e.naturalWidth-t.state.selectorWidth),{selectorTop:n,selectorLeft:r}})}}},t.prototype.render=function(){var e=this,t={display:"none"};i.getLocalStorage("userInfo");return s.createElement("div",null,s.createElement("h2",null,"修改头像"),s.createElement("div",{className:"user-center-config-avatar"},s.createElement("img",{src:this.state.avatarNow}),s.createElement("div",null,s.createElement("button",{id:"chooseDefaultAvatar",type:"button"},"选择论坛头像"),s.createElement("div",null,s.createElement("input",{onChange:this.handleChange,id:"uploadAvatar",type:"file",style:t}),s.createElement("label",{htmlFor:"uploadAvatar"},s.createElement("p",null,"选择本地图片")),s.createElement("p",null,this.state.info),s.createElement("button",{type:"button",style:this.state.isShown?{}:t,onClick:this.handleSubmit,disabled:this.state.isLoading},"提交"))),s.createElement("div",{className:"user-center-config-avatar-preview",style:this.state.isShown?{opacity:1,marginTop:"2rem"}:{zIndex:-1}},s.createElement("hr",null),s.createElement("div",{style:{position:"absolute",width:"824px",overflow:"hidden",paddingBottom:"50px"}},s.createElement("canvas",{id:"newAvatar",style:t,ref:function(t){e.newAvatar=t}}),s.createElement("canvas",{ref:function(t){e.myCanvas=t},style:{position:"relative"}}),s.createElement("div",{id:"cover",ref:function(t){e.cover=t},style:{width:this.state.divWidth+"px",height:this.state.divheight+"px",top:0}}),s.createElement("div",{className:"imgdata",ref:function(t){e.selector=t},style:this.state.isShown?{width:this.state.selectorWidth+"px",height:this.state.selectorWidth+"px",borderRadius:this.state.selectorWidth/2+"px",top:this.state.selectorTop+"px",left:this.state.selectorLeft+"px"}:t},s.createElement("img",{src:this.state.avatarURL,style:{position:"relative",top:"-"+this.state.selectorTop+"px",left:"-"+this.state.selectorLeft+"px"}})),s.createElement("div",{id:"selector",ref:function(t){e.selector=t},style:this.state.isShown?{width:this.state.selectorWidth+"px",height:this.state.selectorWidth+"px",borderRadius:this.state.selectorWidth/2+"px",top:this.state.selectorTop+"px",left:this.state.selectorLeft+"px"}:t}),s.createElement("span",{id:"resize",ref:function(t){e.resize=t},style:{top:this.state.selectorWidth+this.state.selectorTop+"px",left:this.state.selectorWidth+this.state.selectorLeft+"px"}})),s.createElement("img",{onLoad:function(t){e.handleIMGLoad(t.target.naturalWidth,t.target.naturalHeight,t.target)},style:t,src:this.state.avatarURL})),s.createElement("div",{style:{width:"100%",height:this.state.divheight+"px",transitionDuration:".5s"}})))},t}(s.Component);t.UserCenterConfigAvatar=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this;return a.createElement("div",null,a.createElement("h2",null,"修改签名档"),a.createElement("div",{className:"user-center-config-signature"},a.createElement("textarea",{id:"signature",onChange:function(t){e.props.onchange(t.target.value)},value:this.props.signature}),a.createElement("div",null,a.createElement("p",null,"注* 个性签名将在个人主页、发布文章、回复文章中显示"))))},t}(a.Component);t.UserCenterConfigSignature=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(101),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this,t=[],n=0;for(n=100;n--;)t.unshift(n+1920);var r=t.map(function(e){return a.createElement("option",{value:e},e)});for(r.unshift(a.createElement("option",{value:9999},"保密")),r.unshift(a.createElement("option",{value:0},"未选择")),t=[],n=12;n--;)t.unshift(n+1);var o=t.map(function(e){return a.createElement("option",{value:e},e)});for(o.unshift(a.createElement("option",{value:0},"未选择")),t=[],n=31;n--;)t.unshift(n+1);var s=t.map(function(e){return a.createElement("option",{value:e},e)});return s.unshift(a.createElement("option",{value:0},"未选择")),a.createElement("div",{className:"user-center-config-others"},a.createElement("h2",null,"其他设置"),a.createElement("div",{className:"config-gender"},a.createElement("p",null,"性别："),a.createElement("select",{id:"genderSelect",name:"Gender",value:this.props.userinfo.Gender,onChange:function(t){e.props.handleChange(t.target.name,Number.parseInt(t.target.value))}},a.createElement("option",{value:1},"男"),a.createElement("option",{value:0},"女"))),a.createElement("div",{className:"config-birthday"},a.createElement("p",null,"生日："),a.createElement("select",{id:"birthdayYear",name:"birthdayYear",value:this.props.userinfo.birthdayYear,onChange:function(t){e.props.handleChange(t.target.name,Number.parseInt(t.target.value))}},r),a.createElement("p",null,"年"),a.createElement("select",{id:"birthdayMouth",name:"birthdayMouth",value:this.props.userinfo.birthdayMouth,disabled:0===this.props.userinfo.birthdayYear,onChange:function(t){e.props.handleChange(t.target.name,Number.parseInt(t.target.value))}},o),a.createElement("p",null,"月"),a.createElement("select",{id:"birthdayDay",name:"birthdayDay",value:this.props.userinfo.birthdayDay,disabled:0===this.props.userinfo.birthdayYear,onChange:function(t){e.props.handleChange(t.target.name,Number.parseInt(t.target.value))}},s),a.createElement("p",null,"日")),a.createElement("div",{className:"config-text"},a.createElement("p",null,"QQ："),a.createElement("input",{type:"number",name:"QQ",value:this.props.userinfo.QQ,maxLength:20,onChange:function(t){e.props.handleChange(t.target.name,t.target.value)}})),a.createElement("div",{className:"config-text"},a.createElement("p",null,"邮箱："),a.createElement("input",{type:"email",name:"EmailAddress",value:this.props.userinfo.EmailAddress,maxLength:150,onChange:function(t){e.props.handleChange(t.target.name,t.target.value)}})),a.createElement("div",{className:"config-introduction"},a.createElement("p",null,"个人简介："),a.createElement("div",null,a.createElement("textarea",{name:"Introduction",value:this.props.userinfo.Introduction,maxLength:100,onChange:function(t){e.props.handleChange(t.target.name,t.target.value)}}),a.createElement("p",null,"*不超过100字"))))},t}(a.Component);t.UserCenterConfigOthers=s;!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r(t,e)}(o.ChangeUserInfo)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e}();t.AppState=r;var a=function(){function e(){}return e}();t.TopicVoteState=a;var o=function(){function e(){}return e}();t.PostTopicState=o;var s=function(){function e(){}return e}();t.AuthorMessageState=s;var i=function(){function e(){}return e}();t.TopicTitleState=i;var c=function(){function e(){}return e}();t.ContentState=c;var l=function(){function e(){}return e}();t.TopicGoodState=l;var u=function(){function e(){}return e}();t.ReplierState=u;var p=function(){function e(){}return e}();t.MainPageTopicState=p;var d=function(){function e(){}return e}();t.ListHeadState=d;var m=function(){function e(){}return e}();t.ListNoticeState=m;var h=function(){function e(){}return e}();t.ListTagState=h;var f=function(){function e(){}return e}();t.ListContentState=f;var g=function(){function e(){}return e}();t.TopicTitleAndContentState=g;var v=function(){function e(){}return e}();t.ListPagerState=v;var y=function(){function e(e){this.pageNumber=e}return e}();t.PagerState=y;var b=function(){function e(e,t,n,r,a,o,s,i,c,l,u,p,d,m,h,f){this.userName=e,this.time=r,this.title=t,this.content=n,this.signature=a,this.userImgUrl=o,this.hitCount=s,this.userId=i,this.likeNumber=c,this.dislikeNumber=l,this.postId=u,this.isAnonymous=p,this.contentType=d,this.isFollowing=m,this.fanCount=h,this.masters=f}return e}();t.TopicState=b;var E=function(){function e(){}return e}();t.LoginState=E;var w=function(){function e(){}return e}();t.AlreadyLoginState=w;var N=function(){function e(e,t,n,r,a){this.name=e,this.todayPostCount=t,this.totalPostCount=n,this.id=r,this.masters=a}return e}();t.Board=N;var _=function(){function e(){}return e}();t.BoardState=_;var C=function(){function e(){}return e}();t.UserInfo=C;var I=function(){function e(){}return e}();t.UserRecentPost=I;var S=function(){function e(){}return e}();t.UserFanInfo=S;var T=function(){function e(){}return e}();t.UserFavoritesBoardInfo=T;var k=function(){function e(){}return e}();t.ChangeUserInfo=k},function(e,t){}]);