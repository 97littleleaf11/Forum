!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=180)}([function(e,t,n){var r=n(4),o=n(32),i=n(17),a=n(18),s=n(23),c=function(e,t,n){var u,l,p,f,h=e&c.F,d=e&c.G,m=e&c.S,g=e&c.P,v=e&c.B,y=d?r:m?r[t]||(r[t]={}):(r[t]||{}).prototype,b=d?o:o[t]||(o[t]={}),w=b.prototype||(b.prototype={});d&&(n=t);for(u in n)l=!h&&y&&void 0!==y[u],p=(l?y:n)[u],f=v&&l?s(p,r):g&&"function"==typeof p?s(Function.call,p):p,y&&a(y,u,p,e&c.U),b[u]!=p&&i(b,u,f),g&&w[u]!=p&&(w[u]=p)};r.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){e.exports=React},function(e,t,n){"use strict";function r(e,t,n){return Ye(this,void 0,void 0,function(){var r,o,i,a,s,c,u,l,p,f;return qe(this,function(h){switch(h.label){case 0:return h.trys.push([0,4,,5]),r=20*(e-1),o=20*e-1,[4,Te()];case 1:return i=h.sent(),a=void 0,a=20*e<=n?20:1===e&&n<19?n:n-20*(e-1),s=[],c="http://apitest.niconi.cc/Board/"+t+"/topic?from="+r+"&size="+a,[4,fetch(c,{headers:i})];case 2:switch(u=h.sent(),u.status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"]}return[4,u.json()];case 3:for(l=h.sent(),p=0;p<a;p++)s[p]=Ge({},l[p],{replyCount:l[p].replyCount||0});return[2,s];case 4:return f=h.sent(),console.error(f),[3,5];case 5:return[2]}})})}function o(e){return Ye(this,void 0,void 0,function(){var t,n,r,o,i,a,s,c,u,s,l;return qe(this,function(p){switch(p.label){case 0:return p.trys.push([0,9,,10]),[4,Te()];case 1:return t=p.sent(),[4,fetch("http://apitest.niconi.cc/Topic/"+e+"/post?from=0&size=1",{headers:t})];case 2:return n=p.sent(),[4,n.json()];case 3:return r=p.sent(),o=null,[4,M(e,r[0].id)];case 4:return i=p.sent(),[4,Z(r[0].id)];case 5:return a=p.sent(),1==r[0].isAnonymous?[3,7]:[4,Le(r[0].userId)];case 6:return s=p.sent(),o=Ge({},r[0],{userInfo:s,postId:r[0].id,likeInfo:i,awardInfo:a}),[3,8];case 7:c="匿名"+r[0].userName.toUpperCase(),u="https://www.cc98.org/pic/anonymous.gif",s={name:c,portraitUrl:u,id:null,privilege:"匿名用户",popularity:0,signatureCode:null,postCount:0},o=Ge({},r[0],{userInfo:s,postId:r[0].id,isAnonymous:!0,likeInfo:i,awardInfo:a}),p.label=8;case 8:return[2,o];case 9:return l=p.sent(),[3,10];case 10:return[2]}})})}function i(e,t,n){return Ye(this,void 0,void 0,function(){var r,o,i,a,s,c,u,l,p,f,h,d,m,g,d,d,v;return qe(this,function(y){switch(y.label){case 0:return y.trys.push([0,14,,15]),r=10*(t-1),o=10*t-1,[4,Te()];case 1:return i=y.sent(),1===t?[3,3]:[4,fetch("http://apitest.niconi.cc/Topic/"+e+"/post?from="+r+"&size=10",{headers:i})];case 2:return s=y.sent(),[3,5];case 3:return[4,fetch("http://apitest.niconi.cc/Topic/"+e+"/post?from=1&size=9",{headers:i})];case 4:s=y.sent(),y.label=5;case 5:return a=s,[4,a.json()];case 6:c=y.sent(),u=[],l=void 0,l=1!==t&&10*t<=n?10:1===t&&n>=9?9:1===t&&n<9?n:n-10*(t-1)+1,p=0,y.label=7;case 7:return p<l?[4,M(e,c[p].id)]:[3,13];case 8:return f=y.sent(),[4,Z(c[p].id)];case 9:return h=y.sent(),1==c[p].isAnonymous||1==c[p].isDeleted?[3,11]:[4,Le(c[p].userId)];case 10:return d=y.sent(),u[p]=Ge({},c[p],{userInfo:d,postId:c[p].id,likeInfo:f,awardInfo:h}),[3,12];case 11:1==c[p].isAnonymous?(m="https://www.cc98.org/pic/anonymous.gif",g="匿名"+c[p].userName.toUpperCase(),d={name:g,portraitUrl:m,id:null,privilege:"匿名用户",popularity:0,signatureCode:null,postCount:0},u[p]=Ge({},c[p],{userInfo:d,postId:c[p].id,isAnonymous:!0,likeInfo:f,awardInfo:h})):(d={name:"98Deleter",portraitUrl:"http://www.cc98.org/images/policeM.png",id:null,privilege:"匿名用户",popularity:0,signatureCode:null,postCount:0},u[p]=Ge({},c[p],{postId:c[p].id,isAnonymous:!1,isDeleted:!0,content:"该贴已被my cc98, my home",likeInfo:f,awardInfo:h})),y.label=12;case 12:return p++,[3,7];case 13:return[2,u];case 14:return v=y.sent(),console.error(v),[3,15];case 15:return[2]}})})}function a(e,t,n){return Ye(this,void 0,void 0,function(){var e,n,r,o,i;return qe(this,function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),[4,Te()];case 1:return e=a.sent(),e.append("Content-Type","application/json"),n="1",[4,fetch("http://apitest.niconi.cc/post/"+t+"/like",{method:"PUT",headers:e,body:n})];case 2:return r=a.sent(),r.status,r.status,r.status,r.status,[4,r.json()];case 3:return o=a.sent(),[2,o];case 4:return i=a.sent(),[3,5];case 5:return[2]}})})}function s(e,t,n){return Ye(this,void 0,void 0,function(){var e,n,r,o,i;return qe(this,function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),[4,Te()];case 1:return e=a.sent(),e.append("Content-Type","application/json"),n="2",[4,fetch("http://apitest.niconi.cc/post/"+t+"/like",{method:"PUT",headers:e,body:n})];case 2:return r=a.sent(),r.status,r.status,r.status,r.status,[4,r.json()];case 3:return o=a.sent(),[2,o];case 4:return i=a.sent(),[3,5];case 5:return[2]}})})}function c(e,t,n){return Ye(this,void 0,void 0,function(){var e,n,r,o;return qe(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,Te()];case 1:return e=i.sent(),[4,fetch("http://apitest.niconi.cc/post/"+t+"/like",{headers:e})];case 2:return n=i.sent(),n.status,n.status,n.status,n.status,[4,n.json()];case 3:return r=i.sent(),[2,r];case 4:return o=i.sent(),[3,5];case 5:return[2]}})})}function u(e){return Ye(this,void 0,void 0,function(){var t,n,r,o,i,a,s,c,u,l,p,f,h,l,d;return qe(this,function(m){switch(m.label){case 0:return m.trys.push([0,12,,13]),[4,Te()];case 1:return t=m.sent(),[4,fetch("http://apitest.niconi.cc/Topic/"+e+"/hot-post",{headers:t})];case 2:return n=m.sent(),[4,n.json()];case 3:r=m.sent(),o=[],i=r.length,a=0,m.label=4;case 4:return a<i?[4,M(e,r[a].id)]:[3,11];case 5:return s=m.sent(),[4,Z(r[a].id)];case 6:return c=m.sent(),1==r[a].isAnonymous?[3,9]:[4,fetch("http://apitest.niconi.cc/user/name/"+r[a].userName)];case 7:return u=m.sent(),[4,u.json()];case 8:return l=m.sent(),o[a]=Ge({},r[a],{userInfo:l,postId:r[a].id,likeInfo:s,awardInfo:c}),[3,10];case 9:p="https://www.cc98.org/pic/anonymous.gif",f="匿名"+r[a].userName.toUpperCase(),h="匿名"+r[a].lastUpdateAuthor.toUpperCase(),l={name:f,portraitUrl:p,id:null,privilege:"匿名用户",popularity:0,signatureCode:null,postCount:0},o[a]=Ge({},r[a],{userInfo:l,postId:r[a].id,likeInfo:s,awardInfo:c}),m.label=10;case 10:return a++,[3,4];case 11:return[2,o];case 12:return d=m.sent(),[3,13];case 13:return[2]}})})}function l(e){return 1===e?[]:2===e?[1,2]:3===e?[1,2,3]:4===e?[1,2,3,4]:5===e?[1,2,3,4,5]:6===e?[1,2,3,4,5,6]:7===e?[1,2,3,4,5,6,7]:[1,2,3,4,-1,e-3,e-2,e-1]}function p(e){return $e.createElement(Ve.TopicTitleAndContent,{key:e.id,title:e.title,userName:e.userName,id:e.id,userId:e.userId,lastPostTime:e.lastPostTime,lastPostUser:e.lastPostUser,likeCount:e.likeCount,dislikeCount:e.dislikeCount,replyCount:e.replyCount,highlightInfo:e.highlightInfo,topState:e.topState,state:e.state,hitCount:e.hitCount})}function f(e,t){e||(e=1);var n=[];if(1==t)n=[1];else if(t<10&&t>1)if(1==e){var r=void 0;for(r=0;r<t;r++)n[r]=r+1;n[r]=-2,n[r+1]=-4}else if(2==e){var r=void 0;for(r=1;r<=t;r++)n[r]=r;n[0]=-1,n[r]=-2,n[r+1]=-4}else if(e!=t){var r=void 0;for(r=2;r<=t+1;r++)n[r]=r-1;n[0]=-3,n[1]=-1,n[r]=-2,n[r+1]=-4}else{var r=void 0;for(r=2;r<=t+1;r++)n[r]=r-1;n[0]=-3,n[1]=-1}else if(e+5<=t)n=1==e?[1,2,3,4,5,6,7,8,9,10,-2,-4]:e>1&&e<6?[-3,-1,1,2,3,4,5,6,7,8,9,10,-2,-4]:[-3,-1,e-4,e-3,e-2,e-1,e,e+1,e+2,e+3,e+4,e+5,-2,-4];else{if(e+5>t&&e!=t)return[-3,-1,t-9,t-8,t-7,t-6,t-5,t-4,t-3,t-2,t-1,t,-2,-4];if(e==t)return[-3,-1,t-9,t-8,t-7,t-6,t-5,t-4,t-3,t-2,t-1,t]}return n}function h(e,t,n){return Ye(this,void 0,void 0,function(){var n,r,o,i,a,s;return qe(this,function(c){switch(c.label){case 0:return c.trys.push([0,6,,7]),[4,Te()];case 1:return n=c.sent(),[4,fetch("http://apitest.niconi.cc/post/topic/user?topicid="+e+"&userid="+t+"&from=0&size=1",{headers:n})];case 2:return r=c.sent(),r.status,r.status,r.status,[4,r.json()];case 3:return o=c.sent(),[4,fetch("http://apitest.niconi.cc/user/name/"+o[0].userName)];case 4:return i=c.sent(),i.status,i.status,[4,i.json()];case 5:return a=c.sent(),o[0].userImgUrl=a.portraitUrl,[2,o[0]];case 6:return s=c.sent(),[3,7];case 7:return[2]}})})}function d(e,t,n,r){return Ye(this,void 0,void 0,function(){var i,a,s,c,u,l,p,f,h,d,m,g,v,y,b,w,y,E;return qe(this,function(_){switch(_.label){case 0:return _.trys.push([0,12,,13]),[4,o(e)];case 1:return i=_.sent(),a=void 0,s=void 0,i.userName===n?(s=!0,a=1===t?10*(t-1)+1:10*(t-1)):(s=!1,a=10*(t-1)),[4,xe()];case 2:return c=_.sent(),u=new Headers,u.append("Authorization",c),[4,fetch("http://apitest.niconi.cc/Post/topic/user?topicid="+e+"&userId="+r+"&from="+a+"&size=10",{headers:u})];case 3:return l=_.sent(),[4,l.json()];case 4:p=_.sent(),f=[],h=void 0,d=p[0].count,h=1!==t&&10*t<=d?10:1===t&&d>=9&&1==s?9:1===t&&d>=9&&0==s?10:1===t&&d<9?d:d-10*(t-1),m=0,_.label=5;case 5:return m<h?[4,M(e,p[m].id)]:[3,11];case 6:return g=_.sent(),[4,Z(p[m].id)];case 7:return v=_.sent(),1==p[m].isAnonymous?[3,9]:[4,Le(p[m].userId)];case 8:return y=_.sent(),f[m]=Ge({},p[m],{userInfo:y,postId:p[m].id,likeInfo:g,awardInfo:v}),[3,10];case 9:b="https://www.cc98.org/pic/anonymous.gif",w="匿名"+p[m].userName.toUpperCase(),y={name:w,portraitUrl:b,id:null,privilege:"匿名用户",popularity:0,signatureCode:null,postCount:0},f[m]=Ge({},p[m],{userInfo:y,likeInfo:g,awardInfo:v}),_.label=10;case 10:return m++,[3,5];case 11:return[2,f];case 12:return E=_.sent(),[3,13];case 13:return[2]}})})}function m(e,t){return Ye(this,void 0,void 0,function(){var t,n,r,o,i,a,s,c,u,l,p,f,h,d,d,d,d,m;return qe(this,function(g){switch(g.label){case 0:return g.trys.push([0,13,,14]),t=20,e>80&&(t=100-e),[4,Te()];case 1:return n=g.sent(),[4,fetch("http://apitest.niconi.cc/topic/new?from="+e+"&size="+t,{headers:n})];case 2:return r=g.sent(),r.status,r.status,[4,r.json()];case 3:o=g.sent(),i=[];for(a in o)i.push(a);s=0,g.label=4;case 4:return s<i.length?(c=i[s],o[c].userId?[4,fetch("http://apitest.niconi.cc/user/follower/count?userid="+o[c].userId)]:[3,10]):[3,12];case 5:return u=g.sent(),u.status,u.status,[4,u.json()];case 6:return l=g.sent(),o[c].fanCount=l,[4,fetch("http://apitest.niconi.cc/user/basic/"+o[c].userId)];case 7:return p=g.sent(),p.status,p.status,[4,p.json()];case 8:return f=g.sent(),o[c].portraitUrl=f.portraitUrl,h=o[c],[4,I(o[c].boardId)];case 9:return h.boardName=g.sent(),o[c].hitCount>1e4&&(o[c].hitCount>1e5?(d=parseInt(""+o[c].hitCount/1e4),o[c].hitCount=d+"万"):(d=parseInt(""+o[c].hitCount/1e3)/10,o[c].hitCount=d+"万")),o[c].replyCount>1e4&&(o[c].replyCount>1e5?(d=parseInt(""+o[c].replyCount/1e4),o[c].replyCount=d+"万"):(d=parseInt(""+o[c].replyCount/1e3)/10,o[c].replyCount=d+"万")),[3,11];case 10:o[c].fanCount=0,o[c].portraitUrl="http://www.cc98.org/pic/anonymous.gif",o[c].userName="匿名用户",o[c].boardName="心灵之约",g.label=11;case 11:return s++,[3,4];case 12:return[2,o];case 13:return m=g.sent(),[3,14];case 14:return[2]}})})}function g(e,t,n,r){return Ye(this,void 0,void 0,function(){var r,o,i,a,s,c,u,l,p,f,h,d,m,g,g,g,g,v;return qe(this,function(y){switch(y.label){case 0:return y.trys.push([0,18,,19]),r=20,n>80&&(r=100-n),[4,Te()];case 1:return o=y.sent(),i=void 0,0!=e?[3,3]:[4,fetch("http://apitest.niconi.cc/me/followee/topic?from="+n+"&size="+r,{headers:o})];case 2:return i=y.sent(),[3,5];case 3:return[4,fetch("http://apitest.niconi.cc/board/"+e+"/topic?from="+n+"&size="+r,{headers:o})];case 4:i=y.sent(),y.label=5;case 5:return i.status,i.status,[4,i.json()];case 6:a=y.sent(),s=[];for(c in a)s.push(c);u=0,y.label=7;case 7:return u<s.length?(l=s[u],a[l].userId?[4,fetch("http://apitest.niconi.cc/user/follower/count?userid="+a[l].userId)]:[3,15]):[3,17];case 8:return p=y.sent(),p.status,p.status,[4,p.json()];case 9:return f=y.sent(),a[l].fanCount=f,[4,fetch("http://apitest.niconi.cc/user/basic/"+a[l].userId)];case 10:return h=y.sent(),h.status,h.status,[4,h.json()];case 11:return d=y.sent(),(a[l].portraitUrl=d.portraitUrl,0!=e)?[3,13]:(m=a[l],[4,I(a[l].boardId)]);case 12:return m.boardName=y.sent(),[3,14];case 13:a[l].boardName=t,y.label=14;case 14:return a[l].hitCount>1e4&&(a[l].hitCount>1e5?(g=parseInt(""+a[l].hitCount/1e4),a[l].hitCount=g+"万"):(g=parseInt(""+a[l].hitCount/1e3)/10,a[l].hitCount=g+"万")),a[l].replyCount>1e4&&(a[l].replyCount>1e5?(g=parseInt(""+a[l].replyCount/1e4),a[l].replyCount=g+"万"):(g=parseInt(""+a[l].replyCount/1e3)/10,a[l].replyCount=g+"万")),[3,16];case 15:a[l].fanCount=0,a[l].portraitUrl="http://www.cc98.org/pic/anonymous.gif",a[l].userName="匿名用户",a[l].boardName="心灵之约",y.label=16;case 16:return u++,[3,7];case 17:return[2,a];case 18:return v=y.sent(),[3,19];case 19:return[2]}})})}function v(e,t){return Ye(this,void 0,void 0,function(){var t,n,r,o,i,a,s,c,u,l,p,f,h,d,d,d,d,m;return qe(this,function(g){switch(g.label){case 0:return g.trys.push([0,13,,14]),t=20,e>80&&(t=100-e),[4,Te()];case 1:return n=g.sent(),[4,fetch("http://apitest.niconi.cc/me/custom-board/topic?from="+e+"&size="+t,{headers:n})];case 2:return r=g.sent(),r.status,r.status,[4,r.json()];case 3:o=g.sent(),i=[];for(a in o)i.push(a);s=0,g.label=4;case 4:return s<i.length?(c=i[s],o[c].userId?[4,fetch("http://apitest.niconi.cc/user/follower/count?userid="+o[c].userId)]:[3,10]):[3,12];case 5:return u=g.sent(),u.status,u.status,[4,u.json()];case 6:return l=g.sent(),o[c].fanCount=l,[4,fetch("http://apitest.niconi.cc/user/basic/"+o[c].userId)];case 7:return p=g.sent(),p.status,p.status,[4,p.json()];case 8:return f=g.sent(),o[c].portraitUrl=f.portraitUrl,h=o[c],[4,I(o[c].boardId)];case 9:return h.boardName=g.sent(),o[c].hitCount>1e4&&(o[c].hitCount>1e5?(d=parseInt(""+o[c].hitCount/1e4),o[c].hitCount=d+"万"):(d=parseInt(""+o[c].hitCount/1e3)/10,o[c].hitCount=d+"万")),o[c].replyCount>1e4&&(o[c].replyCount>1e5?(d=parseInt(""+o[c].replyCount/1e4),o[c].replyCount=d+"万"):(d=parseInt(""+o[c].replyCount/1e3)/10,o[c].replyCount=d+"万")),[3,11];case 10:o[c].fanCount=0,o[c].portraitUrl="http://www.cc98.org/pic/anonymous.gif",o[c].userName="匿名用户",o[c].boardName="心灵之约",g.label=11;case 11:return s++,[3,4];case 12:return[2,o];case 13:return m=g.sent(),[3,14];case 14:return[2]}})})}function y(e,t){var n=t;"object"==typeof n?(n=JSON.stringify(n),n="obj-"+n):n="str-"+n,sessionStorage.setItem(e,n)}function b(e){var t=sessionStorage.getItem(e);if(t)return 0===t.indexOf("obj-")?(t=t.slice(4),JSON.parse(t)):0===t.indexOf("str-")?t.slice(4):void 0}function w(e,t,n){void 0===n&&(n=0);var r=t;if("object"==typeof r?(r=JSON.stringify(r),r="obj-"+r):r="str-"+r,localStorage.setItem(e,r),0!==n){var o=(new Date).getTime(),i=o+1e3*n;localStorage.setItem(e+"_expirationTime",i.toString().slice(0,i.toString().length-3))}else localStorage.removeItem(e+"_expirationTime")}function E(e){var t=localStorage.getItem(e),n=localStorage.getItem(e+"_expirationTime");if(n){if((new Date).getTime()>1e3*Number.parseInt(n))return void localStorage.removeItem(e)}if(t)return 0===t.indexOf("obj-")?(t=t.slice(4),JSON.parse(t)):0===t.indexOf("str-")?t.slice(4):void 0}function _(e){"all"!=e?localStorage.removeItem(e):localStorage.clear()}function S(e){"all"!=e?sessionStorage.removeItem(e):sessionStorage.clear()}function I(e){return Ye(this,void 0,void 0,function(){var t,n,r,o,i,a,s;return qe(this,function(c){switch(c.label){case 0:return c.trys.push([0,5,,6]),t=void 0,t=E("boardId_"+e),t?[3,4]:[4,xe()];case 1:return n=c.sent(),r=new Headers,r.append("Authorization",n),o="http://apitest.niconi.cc/board/"+e,[4,fetch(o,{headers:r})];case 2:return i=c.sent(),i.status,i.status,[4,i.json()];case 3:a=c.sent(),t=a.name,w("boardId_"+e,t),c.label=4;case 4:return[2,t];case 5:return s=c.sent(),[3,6];case 6:return[2]}})})}function C(){return!!E("userName")}function N(e,t,n){return Ye(this,void 0,void 0,function(){var n,r,o,i,a,s,c,a,u;return qe(this,function(l){switch(l.label){case 0:return l.trys.push([0,6,,7]),[4,Te()];case 1:return n=l.sent(),console.log("开始获取联系人数据"),[4,fetch("http://apitest.niconi.cc/message/recent-contact-users?from="+e+"&size="+t,{headers:n})];case 2:return r=l.sent(),r.status,r.status,[4,r.json()];case 3:o=l.sent(),console.log("开始获取联系人id数组",o),i="http://apitest.niconi.cc/user/basic";for(a in o)i="0"===a?i+"?id="+o[a].userId:i+"&id="+o[a].userId;return[4,fetch(i)];case 4:return s=l.sent(),s.status,s.status,[4,s.json()];case 5:c=l.sent();for(a in c)c[a].message=[],c[a].lastContent=o[a].lastContent;return console.log("接收到没有Message的列表"),console.log(c),[2,c];case 6:return u=l.sent(),[3,7];case 7:return[2]}})})}function x(e,t,n,r){return Ye(this,void 0,void 0,function(){var r,o,i,a,s;return qe(this,function(c){switch(c.label){case 0:return c.trys.push([0,4,,5]),[4,Te()];case 1:return r=c.sent(),[4,fetch("http://apitest.niconi.cc/message/user/"+e+"?from="+t+"&size="+n,{headers:r})];case 2:return o=c.sent(),o.status,o.status,[4,o.json()];case 3:return i=c.sent(),console.log("直接获取到的Message"),console.log(i),a=T(i),[2,a];case 4:return s=c.sent(),[3,5];case 5:return[2]}})})}function T(e){if(console.log(e),e!=[]&&e){for(var t=0;t<e.length;t++)t+1==e.length?e[t].showTime=!0:P(e[t].time)-P(e[t+1].time)<6e4?e[t].showTime=!1:e[t].showTime=!0;return console.log("返回的recentMessage"),console.log(e),e}return e}function P(e){var t=moment(e).format("YYYY-MM-DD HH:mm:ss"),n=t.replace(/-/g,"/");return new Date(n).getTime()}function O(e,t){return Ye(this,void 0,void 0,function(){var n,r,o,i,a,s,c,u,l,p,f,h,o,i,d,m,c,g,s,v,p;return qe(this,function(y){switch(y.label){case 0:if(!(n=location.href.match(/id=(\S+)/)))return[3,10];for(r=parseInt(n[1]),o=0;o<e.length&&e[o].id!=r;o++);return 0!=o?[3,1]:[3,9];case 1:return o<e.length?(i=e[o],e.splice(o,1),e.unshift(i),[3,9]):[3,2];case 2:a=void 0,s=void 0,c=1,y.label=3;case 3:return y.trys.push([3,6,,7]),[4,fetch("http://apitest.niconi.cc/user/basic/"+r)];case 4:return a=y.sent(),a.status,a.status,[4,a.json()];case 5:return s=y.sent(),[3,7];case 6:return u=y.sent(),c=0,[3,7];case 7:return 1!=c?[3,9]:(l=s,[4,x(s.id,0,10,t)]);case 8:l.message=y.sent(),s.message&&(s.lastContent=s.message[0]),p=[s],e=p.concat(e),y.label=9;case 9:return[3,19];case 10:if(!(f=location.href.match(/name=(\S+)/)))return[3,19];for(h=f[1],o=0;o<e.length&&e[o].name!=h;o++);return 0!=o?[3,11]:[3,19];case 11:return o<e.length?(i=e[o],e.splice(o,1),e.unshift(i),[3,19]):[3,12];case 12:d=void 0,m=void 0,c=1,y.label=13;case 13:return y.trys.push([13,16,,17]),[4,fetch("http://apitest.niconi.cc/user/name/"+h)];case 14:return d=y.sent(),d.status,d.status,[4,d.json()];case 15:return m=y.sent(),[3,17];case 16:return g=y.sent(),c=0,[3,17];case 17:return 1!=c?[3,19]:(s={id:null,name:"",portraitUrl:"",message:[],lastContent:""},s.id=m.id,s.name=m.name,s.portraitUrl=m.portraitUrl,v=s,[4,x(s.id,0,10,t)]);case 18:v.message=y.sent(),s.message&&(s.lastContent=s.message[0]),p=[s],e=p.concat(e),y.label=19;case 19:return[2,e]}})})}function k(e){return Ye(this,void 0,void 0,function(){var t,n,r;return qe(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,Le(e)];case 1:return t=o.sent(),n={portraitUrl:t.portraitUrl,userName:t.name,fanCount:t.fanCount,displayTitle:t.displayTitle,birthday:t.birthday,prestige:t.prestige,gender:t.gender,levelTitle:t.levelTitle,isFollowing:t.isFollowing},[2,n];case 2:return r=o.sent(),[3,3];case 3:return[2]}})})}function j(e,t){return Ye(this,void 0,void 0,function(){var t,n,r,i,a,s;return qe(this,function(c){switch(c.label){case 0:return c.trys.push([0,7,,8]),[4,Te()];case 1:return t=c.sent(),[4,o(e)];case 2:return n=c.sent(),r=n.postId,[4,fetch("http://apitest.niconi.cc/post/"+r+"/like",{headers:t})];case 3:return i=c.sent(),i.status,i.status,i.status,500!==i.status?[3,4]:[3,6];case 4:return[4,i.json()];case 5:return a=c.sent(),[2,a];case 6:return[3,8];case 7:return s=c.sent(),[3,8];case 8:return[2]}})})}function M(e,t){return Ye(this,void 0,void 0,function(){var e,n,r,o;return qe(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,Te()];case 1:return e=i.sent(),[4,fetch("http://apitest.niconi.cc/post/"+t+"/like",{headers:e})];case 2:return n=i.sent(),n.status,n.status,n.status,n.status,[4,n.json()];case 3:return r=i.sent(),[2,r];case 4:return o=i.sent(),[3,5];case 5:return[2]}})})}function U(e,t){return Ye(this,void 0,void 0,function(){var t,n,r,o,i,a,s,c;return qe(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),t="http://apitest.niconi.cc/post/topic/"+e,n=testEditor.getMarkdown(),r={content:n,contentType:1,title:""},o=JSON.stringify(r),[4,xe()];case 1:return i=u.sent(),a=new Headers,a.append("Authorization",i),a.append("Content-Type","application/json"),[4,fetch(t,{method:"POST",headers:a,body:o})];case 2:return s=u.sent(),s.status,s.status,s.status,s.status,s.status,[3,4];case 3:return c=u.sent(),[3,4];case 4:return[2]}})})}function L(e){return(e-e%20)/20+1}function A(e,t,n){return Ye(this,void 0,void 0,function(){var n,r,o,i,a;return qe(this,function(s){switch(s.label){case 0:return s.trys.push([0,4,,5]),[4,Te()];case 1:return n=s.sent(),[4,fetch("http://apitest.niconi.cc/post/topic/user?topicid="+e+"&userid="+t+"&from=0&size=1",{headers:n})];case 2:return r=s.sent(),r.status,r.status,r.status,[4,r.json()];case 3:return o=s.sent(),i=o[0].count,i>10?[2,(i-i%10)/10+1]:[2,1];case 4:return a=s.sent(),[3,5];case 5:return[2]}})})}function R(e,t){return Ye(this,void 0,void 0,function(){var t,n;return qe(this,function(r){switch(r.label){case 0:return[4,Te()];case 1:return t=r.sent(),t.append("content-type","application/json"),[4,fetch("http://apitest.niconi.cc/message",{method:"POST",headers:t,body:e})];case 2:return n=r.sent(),n.status,n.status,[2,n]}})})}function B(){var e=0,t=0;return document.body&&(e=document.body.scrollTop),document.documentElement&&(t=document.documentElement.scrollTop),e-t>0?e:t}function F(){var e=0,t=0;return document.body&&(e=document.body.scrollHeight),document.documentElement&&(t=document.documentElement.scrollHeight),e-t>0?e:t}function D(){return"CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight}function H(){return B()+D()+300>F()}function z(e){return Ye(this,void 0,void 0,function(){var t,n,r,o,i,a;return qe(this,function(s){switch(s.label){case 0:return s.trys.push([0,4,,5]),t="http://apitest.niconi.cc/file",[4,Te()];case 1:return n=s.sent(),r=new FormData,r.append("files",e,e.name),r.append("contentType","multipart/form-data"),[4,fetch(t,{method:"POST",headers:n,body:r})];case 2:return o=s.sent(),[4,o.json()];case 3:if(i=s.sent(),200===o.status&&0!==i.length)return[2,{isSuccess:!0,content:i[0]}];throw{};case 4:return a=s.sent(),[2,{isSuccess:!1,content:""}];case 5:return[2]}})})}function W(){console.log("click"),Je("#upload-files").click()}function G(e){return Ye(this,void 0,void 0,function(){var t,n,r,o;return qe(this,function(i){switch(i.label){case 0:return t=e.target.files,[4,z(t[0])];case 1:return n=i.sent(),r=n.content,o="![](http://apitest.niconi.cc"+r+")",testEditor.appendMarkdown(o),console.log("upload and append"),[2]}})})}function Y(e){return Ye(this,void 0,void 0,function(){var t,n,r,o;return qe(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,Te()];case 1:return t=i.sent(),n="http://apitest.niconi.cc/me/followee/"+e,[4,fetch(n,{method:"PUT",headers:t})];case 2:if(r=i.sent(),200===r.status)return[2,!0];throw{};case 3:return o=i.sent(),[2,!1];case 4:return[2]}})})}function q(e){return Ye(this,void 0,void 0,function(){var t,n,r,o;return qe(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,Te()];case 1:return t=i.sent(),n="http://apitest.niconi.cc/me/followee/"+e,[4,fetch(n,{method:"DELETE",headers:t})];case 2:if(r=i.sent(),200===r.status)return[2,!0];throw{};case 3:return o=i.sent(),[2,!1];case 4:return[2]}})})}function $(e){return Ye(this,void 0,void 0,function(){var t,n,r,o,i,a,a,s,c;return qe(this,function(u){switch(u.label){case 0:return[4,Te()];case 1:return t=u.sent(),n="http://apitest.niconi.cc/topic/toptopics?boardid="+e,[4,fetch(n,{headers:t})];case 2:return r=u.sent(),[4,r.json()];case 3:for(o=u.sent(),i=[],a=0;a<o.length;a++)i[a]=Ge({},o[a],{replyCount:o[a].replyCount||0});for(a=0;a<i.length-1;a++)for(s=0;s<i.length-1-a;s++)i[s].topState<=i[s+1].topState&&(c=i[s],i[s]=i[s+1],i[s+1]=c);return[2,i]}})})}function V(e,t){return Ye(this,void 0,void 0,function(){var n,r,o,i,a,s,c,u,l;return qe(this,function(p){switch(p.label){case 0:return n=20*(e-1),r="http://apitest.niconi.cc/topic/best/board/"+t+"?from="+n+"&size=20",[4,Te()];case 1:return o=p.sent(),[4,fetch(r,{headers:o})];case 2:return i=p.sent(),[4,i.json()];case 3:for(a=p.sent(),s=[],c=0;c<a.topics.length;c++)s[c]=Ge({},a.topics[c],{replyCount:a.topics[c].replyCount||0});return u=a.count%20==0?a.count/20:(a.count-a.count%20)/20+1,l={boardtopics:s,totalPage:u},[2,l]}})})}function J(e,t){return Ye(this,void 0,void 0,function(){var n,r,o,i,a,s,c,u,l,p;return qe(this,function(f){switch(f.label){case 0:return n=20*(e-1),r="http://apitest.niconi.cc/topic/save/board/"+t+"?from="+n+"&size=20",[4,xe()];case 1:return o=f.sent(),i=new Headers,i.append("Authorization",o),[4,fetch(r,{headers:i})];case 2:return a=f.sent(),[4,a.json()];case 3:for(s=f.sent(),c=[],u=0;u<s.topics.length;u++)c[u]=Ge({},s.topics[u],{replyCount:s.topics[u].replyCount||0});return l=s.count%20==0?s.count/20:(s.count-s.count%20)/20+1,p={boardtopics:c,totalPage:l},[2,p]}})})}function X(e,t,n,r){return Ye(this,void 0,void 0,function(){var r,o,i,a,s,s,c,u,l,p,f,h,d,m,g,v,v,v,v,y;return qe(this,function(b){switch(b.label){case 0:console.log("开始获取搜索结果了"),b.label=1;case 1:return b.trys.push([1,20,,21]),[4,Te()];case 2:return r=b.sent(),o=JSON.stringify(t),r.append("content-type","application/json"),i=20,a=void 0,0!=e?[3,5]:[4,fetch("http://apitest.niconi.cc/topic/search?from="+n+"&size="+i,{method:"POST",headers:r,body:o})];case 3:return s=b.sent(),s.status,s.status,[4,s.json()];case 4:return a=b.sent(),[3,8];case 5:return[4,fetch("http://apitest.niconi.cc/topic/search/board/"+e+"?from="+n+"&size="+i,{method:"POST",headers:r,body:o})];case 6:return s=b.sent(),s.status,s.status,[4,s.json()];case 7:a=b.sent(),b.label=8;case 8:if(!a||a==[])return[3,18];c=[];for(u in a)c.push(u);l=0,b.label=9;case 9:return l<c.length?(p=c[l],a[p].userId?[4,fetch("http://apitest.niconi.cc/user/follower/count?userid="+a[p].userId)]:[3,15]):[3,17];case 10:return f=b.sent(),f.status,f.status,[4,f.json()];case 11:return h=b.sent(),a[p].fanCount=h,[4,fetch("http://apitest.niconi.cc/user/basic/"+a[p].userId)];case 12:return d=b.sent(),d.status,d.status,[4,d.json()];case 13:return m=b.sent(),a[p].portraitUrl=m.portraitUrl,g=a[p],[4,I(a[p].boardId)];case 14:return g.boardName=b.sent(),a[p].hitCount>1e4&&(a[p].hitCount>1e5?(v=parseInt(""+a[p].hitCount/1e4),a[p].hitCount=v+"万"):(v=parseInt(""+a[p].hitCount/1e3)/10,a[p].hitCount=v+"万")),a[p].replyCount>1e4&&(a[p].replyCount>1e5?(v=parseInt(""+a[p].replyCount/1e4),a[p].replyCount=v+"万"):(v=parseInt(""+a[p].replyCount/1e3)/10,a[p].replyCount=v+"万")),[3,16];case 15:a[p].fanCount=0,a[p].portraitUrl="http://www.cc98.org/pic/anonymous.gif",a[p].userName="匿名用户",a[p].boardName="心灵之约",b.label=16;case 16:return l++,[3,9];case 17:return[2,a];case 18:return[2,0];case 19:return[3,21];case 20:return y=b.sent(),[3,21];case 21:return[2]}})})}function Q(e,t,n){return Ye(this,void 0,void 0,function(){var r,o,i,a,s;return qe(this,function(c){switch(c.label){case 0:return[4,Te()];case 1:return r=c.sent(),r.append("Content-Type","application/json"),o={operationType:0,reason:e,wealth:t},i=JSON.stringify(o),a="http://apitest.niconi.cc/post/"+n+"/operation",[4,fetch(a,{method:"POST",headers:r,body:i})];case 2:switch(s=c.sent(),s.status){case 400:return[2,"wrong input"];case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}})})}function K(e,t,n){return Ye(this,void 0,void 0,function(){var r,o,i,a,s;return qe(this,function(c){switch(c.label){case 0:return[4,Te()];case 1:return r=c.sent(),r.append("Content-Type","application/json"),o={operationType:1,reason:e,wealth:t},i=JSON.stringify(o),a="http://apitest.niconi.cc/post/"+n+"/operation",[4,fetch(a,{method:"POST",headers:r,body:i})];case 2:switch(s=c.sent(),s.status){case 400:return[2,"wrong input"];case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}})})}function Z(e){return Ye(this,void 0,void 0,function(){var t,n,r,o;return qe(this,function(i){switch(i.label){case 0:return[4,Te()];case 1:return t=i.sent(),n="http://apitest.niconi.cc/post/"+e+"/awards",[4,fetch(n,{headers:t})];case 2:return r=i.sent(),[4,r.json()];case 3:return o=i.sent(),[2,o]}})})}function ee(e){return Ye(this,void 0,void 0,function(){var t,n,r;return qe(this,function(o){switch(o.label){case 0:return t="http://apitest.niconi.cc/user/name/"+e,[4,fetch(t)];case 1:return n=o.sent(),[4,n.json()];case 2:return r=o.sent(),[2,r.portraitUrl]}})})}function te(e){var t=[{id:"7",name:"王何宇老师答疑版"},{id:"20",name:"冯晓霞老师答疑版"},{id:"21",name:"何善蒙老师答疑版"},{id:"23",name:"肖少拥老师答疑版"},{id:"36",name:"王云武老师答疑版"},{id:"41",name:"楼学庆老师答疑版"},{id:"42",name:"杨起帆老师答疑版"},{id:"47",name:"陈越老师答疑版"},{id:"49",name:"方红光老师答疑版"},{id:"50",name:"徐镜春老师答疑版"},{id:"52",name:"陆汉权老师答疑版"},{id:"83",name:"魏宝刚老师的答疑版"},{id:"140",name:"古红英老师答疑版"},{id:"149",name:"李岩老师答疑版"},{id:"151",name:"孙建伶老师答疑版"},{id:"183",name:"陆魁军老师答疑版"},{id:"204",name:"冯雁老师答疑版"},{id:"205",name:"张引老师的答疑版"},{id:"207",name:"郑扣根老师答疑版"},{id:"208",name:"翁恺老师答疑版"},{id:"224",name:"钱抱清老师的答疑版"},{id:"279",name:"教师答疑区事务版"},{id:"292",name:"高晴老师答疑版"},{id:"311",name:"杨义群老师的答疑版"},{id:"323",name:"白洪欢老师答疑版"},{id:"325",name:"贾厚玉老师的答疑板"},{id:"375",name:"张重辉老师答疑版"},{id:"383",name:"张彤彧老师答疑版"},{id:"408",name:"陈建海老师答疑"},{id:"412",name:"精品课程C语言答疑中心"},{id:"423",name:"方宁老师答疑版"},{id:"427",name:"季江民老师答疑版块"},{id:"432",name:"陈平老师答疑版"},{id:"440",name:"丁展平老师答疑版"},{id:"442",name:"谈艺论戏"},{id:"446",name:"桥牌天地"},{id:"448",name:"张军老师答疑版"},{id:"451",name:"胡兰青老师答疑版"},{id:"452",name:"胡兰青老师答疑版"},{id:"454",name:"董亚波老师答疑版"},{id:"457",name:"史治国老师答疑版"},{id:"494",name:"方富民老师答疑版"},{id:"501",name:"外院朱晔老师答疑版"},{id:"513",name:"邢卫老师答疑版"},{id:"514",name:"周波老师答疑版"},{id:"535",name:"面向对象程序设计答疑中心"},{id:"540",name:"陆维敏老师答疑版"},{id:"546",name:"苏振华老师答疑版"},{id:"548",name:"姜晓红老师答疑版"},{id:"559",name:"吴江琴老师答疑版"},{id:"568",name:"杨万喜老师答疑版"},{id:"574",name:"胡敏老师的答疑版面"},{id:"575",name:"顾宗华老师答疑版"},{id:"578",name:"蒋文华老师答疑版"},{id:"579",name:"陈华钧老师答疑版"},{id:"588",name:"吕萍老师答疑版"},{id:"589",name:"黄正谦老师答疑版"},{id:"590",name:"王强老师答疑版"},{id:"595",name:"陈志坚老师答疑版"},{id:"599",name:"彭笑刚老师答疑版"},{id:"600",name:"楼辉老师答疑版"},{id:"601",name:"沈钦仙老师答疑版"},{id:"602",name:"孙凌云老师答疑版"},{id:"603",name:"孟涛老师答疑版"},{id:"615",name:"孟炳泉老师答疑版"},{id:"624",name:"计算机类通识课程答疑版"},{id:"626",name:"杨颖老师答疑版"},{id:"629",name:"陈实老师答疑版"},{id:"631",name:"管理学课程交流版"},{id:"632",name:"陈纯老师答疑版"},{id:"633",name:"近现代中国的人物研究答疑版"},{id:"634",name:"董平老师答疑版"},{id:"635",name:"戴俊飞老师答疑版"},{id:"640",name:"刘海风老师答疑版"},{id:"710",name:"沈语冰老师答疑版"},{id:"714",name:"王跃明老师答疑版"},{id:"723",name:"李浩然老师答疑版"},{id:"724",name:"胡吉明老师答疑版"},{id:"726",name:"董玮老师答疑版"},{id:"727",name:"王毅老师答疑版"},{id:"728",name:"陈文智老师答疑版"},{id:"733",name:"陈奇老师答疑版"},{id:"745",name:"刘新国老师答疑版"},{id:"751",name:"李啸风物理化学答疑版"},{id:"752",name:"雷勇老师答疑版"},{id:"761",name:"高在峰老师课程交流版"},{id:"68",name:"学习交流"},{id:"85",name:"English Corner"},{id:"102",name:"彼岸阳光"},{id:"263",name:"考研一族"},{id:"304",name:"二外天地"},{id:"318",name:"选课交流"},{id:"391",name:"和语瀛风"},{id:"401",name:"对外交流"},{id:"592",name:"学习天地区事务版"},{id:"593",name:"专业咨询"},{id:"594",name:"学习资源"},{id:"715",name:"在线答疑"},{id:"100",name:"校园信息"},{id:"197",name:"军训生活"},{id:"198",name:"新生宝典"},{id:"264",name:"浙大广电"},{id:"266",name:"校园动态区事务版"},{id:"372",name:"维权空间"},{id:"417",name:"毕业生"},{id:"450",name:"依依校情"},{id:"460",name:"声像浙大"},{id:"534",name:"团委学生会"},{id:"537",name:"寒假·2017"},{id:"539",name:"校园卡工作"},{id:"547",name:"青年志愿者"},{id:"570",name:"防火视窗"},{id:"571",name:"公益爱心"},{id:"581",name:"浙大研究生"},{id:"748",name:"创客在浙"},{id:"230",name:"ftp联盟"},{id:"235",name:"求职广场"},{id:"339",name:"失物招领"},{id:"357",name:"时事新闻"},{id:"392",name:"信息资讯区事务版"},{id:"459",name:"实习兼职"},{id:"473",name:"公务员考录"},{id:"515",name:"住房信息"},{id:"560",name:"证券投资"},{id:"572",name:"交通天下"},{id:"738",name:"学生资助"},{id:"101",name:"时尚空间"},{id:"147",name:"行者无疆"},{id:"157",name:"军事天地"},{id:"180",name:"数码世界"},{id:"229",name:"美食天地"},{id:"256",name:"恋车情结"},{id:"258",name:"宠物情缘"},{id:"261",name:"健康帖士"},{id:"272",name:"个性生活区事务版"},{id:"313",name:"模型世界"},{id:"316",name:"心理学与生活"},{id:"402",name:"气象万千"},{id:"518",name:"茶韵飘香"},{id:"545",name:"手工生活"},{id:"551",name:"绿色心情"},{id:"16",name:"自由贴图"},{id:"115",name:"星座物语"},{id:"135",name:"开怀一笑"},{id:"146",name:"mm图片"},{id:"148",name:"有间鬼屋"},{id:"155",name:"智力宝典"},{id:"173",name:"光影留痕"},{id:"192",name:"有家侦探社"},{id:"269",name:"休闲娱乐区事务版"},{id:"283",name:"舞动心灵"},{id:"353",name:"真我风采"},{id:"422",name:"gg图片"},{id:"430",name:"魔术与魔方"},{id:"549",name:"娱乐新闻"},{id:"15",name:"足球板块"},{id:"48",name:"台球世界"},{id:"86",name:"篮球板块"},{id:"99",name:"体育运动"},{id:"124",name:"板板一族"},{id:"128",name:"free skater"},{id:"203",name:"排球天地"},{id:"232",name:"我爱网球"},{id:"233",name:"乒乓世界"},{id:"236",name:"羽球之家"},{id:"273",name:"体育运动区事务版"},{id:"281",name:"精武门"},{id:"282",name:"跆拳道场"},{id:"288",name:"梦幻黄龙"},{id:"405",name:"精彩F1"},{id:"627",name:"伦敦奥运·2012"},{id:"731",name:"三好杯"},{id:"25",name:"天籁之音"},{id:"164",name:"如影随形"},{id:"169",name:"摇滚和独立音乐"},{id:"202",name:"网络资源"},{id:"234",name:"TV满屋"},{id:"257",name:"影视工作室"},{id:"260",name:"资源发布区"},{id:"270",name:"影音无限区事务版"},{id:"306",name:"综E在线"},{id:"308",name:"乱弹吉他"},{id:"314",name:"我的麦克风"},{id:"744",name:"NexusHD高清社区"},{id:"750",name:"戏剧联盟"},{id:"39",name:"软件荟萃"},{id:"84",name:"数字艺术"},{id:"103",name:"Web设计与开发"},{id:"104",name:"硬件天地"},{id:"105",name:"编程技术"},{id:"154",name:"Java俱乐部"},{id:"211",name:"网络技术"},{id:"212",name:"Linux天地"},{id:"226",name:"电脑医院"},{id:"268",name:"电脑技术区事务版"},{id:"9",name:"似水年华"},{id:"81",name:"情感空气"},{id:"114",name:"郁闷小屋"},{id:"152",name:"缘分天空"},{id:"182",name:"心灵之约"},{id:"186",name:"祝福许愿"},{id:"244",name:"清樽酹月"},{id:"276",name:"感性空间区事务版"},{id:"26",name:"读书时光"},{id:"144",name:"一路走来"},{id:"170",name:"史海拾贝"},{id:"271",name:"瞬间永恒区事务版"},{id:"312",name:"怪力乱神"},{id:"315",name:"98网事"},{id:"379",name:"月亮街"},{id:"406",name:"哲学思考"},{id:"749",name:"社科学术"},{id:"759",name:"曲苑杂坛"},{id:"760",name:"文学交流"},{id:"80",name:"生活点滴"},{id:"251",name:"代理专区(旧)"},{id:"399",name:"书海淘沙"},{id:"449",name:"代理审核"},{id:"562",name:"电脑数码"},{id:"563",name:"服饰美肤"},{id:"564",name:"交易代理区事务版"},{id:"569",name:"代理专区"},{id:"756",name:"电脑数码已完成交易"},{id:"58",name:"信电ISEE"},{id:"67",name:"管理学院"},{id:"145",name:"传媒与国际文化学院"},{id:"158",name:"E电园"},{id:"193",name:"生仪大家庭"},{id:"214",name:"不败光电"},{id:"217",name:"材化演绎"},{id:"241",name:"医学院"},{id:"246",name:"外语学院"},{id:"247",name:"动力机能"},{id:"278",name:"院系交流区事务版"},{id:"285",name:"碧水青禾"},{id:"294",name:"竺可桢学院"},{id:"307",name:"人文学院"},{id:"319",name:"光华法学院"},{id:"320",name:"生命科学学院"},{id:"321",name:"生工食品学院"},{id:"341",name:"药学院"},{id:"344",name:"环资经纬"},{id:"351",name:"天下为公"},{id:"352",name:"经济学院"},{id:"362",name:"教育杏坛"},{id:"363",name:"建工学院"},{id:"367",name:"理学院"},{id:"368",name:"计算机科学与技术学院"},{id:"371",name:"控制天下"},{id:"377",name:"动科天地CAS"},{id:"469",name:"航空航天学院"},{id:"582",name:"求是学院"},{id:"623",name:"海洋学院"},{id:"754",name:"我是工程师"},{id:"60",name:"MSTC Microsoft Technology Club"},{id:"72",name:"韩之恋韩语社"},{id:"129",name:"杭高毕业生专版"},{id:"165",name:"绿之源协会"},{id:"166",name:"棒垒球协会"},{id:"176",name:"Fantasy动漫社"},{id:"187",name:"科技探索者协会"},{id:"190",name:"学军中学"},{id:"194",name:"梵音剧社"},{id:"195",name:"法学研究会"},{id:"206",name:"浙大DFM街舞社"},{id:"209",name:"书院飘香"},{id:"210",name:"生命科学协会"},{id:"213",name:"墨语茗音"},{id:"215",name:"登山协会"},{id:"216",name:"梦想天堂"},{id:"219",name:"艺术插花协会"},{id:"222",name:"慈中家园"},{id:"225",name:"灵韵艺术团"},{id:"227",name:"博盟电脑俱乐部"},{id:"250",name:"奔向奥林匹克运动俱乐部"},{id:"253",name:"英语挑战者联盟CEO"},{id:"254",name:"学生旅游协会"},{id:"277",name:"社团风采区事务版"},{id:"287",name:"SCDA（就业与职业发展协会）"},{id:"297",name:"《紫金港》·星空文学"},{id:"303",name:"浙江大学国防协会"},{id:"305",name:"意灵读书者协会"},{id:"310",name:"心理学会"},{id:"322",name:"紫金港艺术团"},{id:"330",name:"学生社团联合会"},{id:"332",name:"紫金港证券投资社"},{id:"333",name:"摄协之家"},{id:"334",name:"红十字会学生分会"},{id:"335",name:"DV联盟"},{id:"336",name:"学生医学进展研究会"},{id:"337",name:"学生第一希望社"},{id:"340",name:"无我茶社"},{id:"347",name:"学生三农协会"},{id:"350",name:"创业协会"},{id:"354",name:"一方水土"},{id:"355",name:"辩论队与求是辩论社"},{id:"358",name:"浙大虫子"},{id:"359",name:"卡侬音乐"},{id:"361",name:"学生无极棋社"},{id:"369",name:"学生空手道协会"},{id:"373",name:"伊甸法国"},{id:"382",name:"文学联合会"},{id:"385",name:"【enactus(原SIFE)】浙大创行国际学生圈"},{id:"393",name:"爱心社"},{id:"395",name:"动物保护者协会"},{id:"396",name:"求是人俱乐部"},{id:"397",name:"邓研风采"},{id:"431",name:"学生校友联络协会"},{id:"434",name:"亦心·民韵舞社"},{id:"436",name:"杨式太极拳协会"},{id:"437",name:"社团百花园"},{id:"438",name:"文琴艺术总团"},{id:"439",name:"春秋社"},{id:"470",name:"腾讯创新俱乐部"},{id:"519",name:"机器人协会"},{id:"520",name:"心系西部协会"},{id:"558",name:"模拟联合国协会"},{id:"561",name:"ShARE"},{id:"566",name:"财商俱乐部"},{id:"573",name:"Power Of Voice"},{id:"576",name:"黑白剧社"},{id:"587",name:"HPA保健协会"},{id:"617",name:"浙江大学出国留学学生圈SOSA"},{id:"618",name:"成长互助训练营GCC"},{id:"628",name:"浙江大学学生E志者协会"},{id:"713",name:"未来企业家俱乐部FEC"},{id:"736",name:"浙江大学研究生创新创业中心CIE"},{id:"262",name:"天下一家"},{id:"461",name:"在浙之滨"},{id:"462",name:"天下一家区事务版"},{id:"467",name:"三湘四水"},{id:"468",name:"津门故里"},{id:"471",name:"齐鲁青未了"},{id:"472",name:"蓉汇贯川"},{id:"475",name:"三秦大地"},{id:"480",name:"八闽来风"},{id:"481",name:"江南西道"},{id:"482",name:"一皖情深"},{id:"483",name:"燕赵飞歌"},{id:"484",name:"吴韵汉风"},{id:"485",name:"辽地永宁"},{id:"486",name:"新上海滩"},{id:"489",name:"黑土风情"},{id:"491",name:"白山松水"},{id:"492",name:"巴渝人家"},{id:"493",name:"天山南北"},{id:"498",name:"晋善晋美"},{id:"502",name:"塞上风光"},{id:"503",name:"彩云之南"},{id:"504",name:"荆楚纵横"},{id:"505",name:"邦锦梅朵"},{id:"506",name:"粤来客栈"},{id:"507",name:"鼎豫中原"},{id:"511",name:"丝路花雨"},{id:"550",name:"皇城根儿"},{id:"596",name:"八桂飘香"},{id:"625",name:"黔山秀水"},{id:"642",name:"椰风海韵"},{id:"328",name:"网上冲浪"},{id:"329",name:"编程答疑"},{id:"346",name:"flash版"},{id:"394",name:"游戏编程"},{id:"499",name:"多媒体技术"},{id:"538",name:"Mac(苹果)专区"},{id:"591",name:".NET 美学"},{id:"597",name:"脚本语言"},{id:"598",name:"iOS"},{id:"621",name:"魅族 Meizu"},{id:"622",name:"Android"},{id:"711",name:"Windows Phone"},{id:"91",name:"游戏广场"},{id:"274",name:"游戏广场区事务版"},{id:"296",name:"暴雪游戏"},{id:"30",name:"动漫讨论"},{id:"139",name:"恋声症候群"},{id:"191",name:"动漫资源"},{id:"223",name:"空蝉之恋"},{id:"239",name:"贴图工坊"},{id:"275",name:"动漫天地区事务版"},{id:"327",name:"动漫文区"},{id:"376",name:"ACG音乐区"},{id:"455",name:"周边百老汇"},{id:"245",name:"技术组工作室"},{id:"249",name:"编辑部工作室"},{id:"286",name:"坛庆策划"},{id:"605",name:"策划部工作室"},{id:"606",name:"体育部工作室"},{id:"607",name:"部长联席会议"},{id:"610",name:"意见与建议"},{id:"611",name:"通知通告"},{id:"613",name:"招贤纳士"},{id:"620",name:"赞助合作"},{id:"747",name:"Banner申请"},{id:"753",name:"CC98协会"},{id:"17",name:"论坛事务"},{id:"38",name:"站规修订"},{id:"40",name:"站务讨论"},{id:"116",name:"test"},{id:"136",name:"98博物馆"},{id:"184",name:"论坛帮助"},{id:"221",name:"版主会议厅"},{id:"267",name:"社科学术区事务版"},{id:"326",name:"集思广益"},{id:"400",name:"废弃版块"},{id:"404",name:"98足迹"},{id:"433",name:"网络安全"},{id:"614",name:"莫失莫忘"}],n=[];for(var r in t)t[r].name.indexOf(e)>-1&&n.push({id:t[r].id,name:t[r].name});return n}function ne(e){if(!E("userInfo"))return!1;for(var t=E("userInfo").customBoards,n=0,r=t;n<r.length;n++){var o=r[n];if(console.log(o),o==e)return console.log("版面匹配成功"),!0}return!1}function re(e){return Ye(this,void 0,void 0,function(){var t,n,r;return qe(this,function(o){switch(o.label){case 0:return[4,Te()];case 1:return t=o.sent(),n="http://apitest.niconi.cc/me/addcustomboard/"+e,[4,fetch(n,{method:"POST",headers:t})];case 2:return r=o.sent(),r.status,r.status,oe(),S("focusBoardList"),[2]}})})}function oe(){return Ye(this,void 0,void 0,function(){var e,t,n,r,o;return qe(this,function(i){switch(i.label){case 0:return e=E("userName"),e||(t=E("userInfo"),e=t.name),[4,Te()];case 1:return n=i.sent(),[4,fetch("http://apitest.niconi.cc/user/name/"+e,{headers:n})];case 2:return r=i.sent(),[4,r.json()];case 3:return o=i.sent(),w("userInfo",o),w("userName",o.name),[2]}})})}function ie(e){return Ye(this,void 0,void 0,function(){var t,n,r;return qe(this,function(o){switch(o.label){case 0:return[4,Te()];case 1:return t=o.sent(),n="http://apitest.niconi.cc/me/removecustomboard/"+e,[4,fetch(n,{method:"DELETE",headers:t})];case 2:return r=o.sent(),r.status,r.status,oe(),S("focusBoardList"),[2]}})})}function ae(e,t,n){return Ye(this,void 0,void 0,function(){var n,r,o,i,a,s,c,u,l,p;return qe(this,function(f){switch(f.label){case 0:return f.trys.push([0,10,,11]),[4,Te()];case 1:return n=f.sent(),[4,fetch("http://apitest.niconi.cc/notification/system?from="+e+"&size="+t,{headers:n})];case 2:return r=f.sent(),r.status,r.status,[4,r.json()];case 3:o=f.sent(),i=[];for(a in o)i.push(a);s=0,f.label=4;case 4:return s<i.length?(c=i[s],o[c].postId?[4,fetch("http://apitest.niconi.cc/post/"+o[c].postId+"/basic",{headers:n})]:[3,7]):[3,9];case 5:return u=f.sent(),[4,u.json()];case 6:return l=f.sent(),o[c].floor=l.floor,[3,8];case 7:o[c].floor=0,f.label=8;case 8:return s++,[3,4];case 9:return[2,o];case 10:return p=f.sent(),[3,11];case 11:return[2]}})})}function se(e,t,n){return Ye(this,void 0,void 0,function(){var n,r,o,i,a,s,c,u,l,p,f,h,d,m;return qe(this,function(g){switch(g.label){case 0:return g.trys.push([0,15,,16]),n=[],[4,Te()];case 1:return r=g.sent(),console.log("from: number, size: number, router",e),[4,fetch("http://apitest.niconi.cc/notification/reply?from="+e+"&size="+t,{headers:r})];case 2:return o=g.sent(),o.status,o.status,[4,o.json()];case 3:if(!(i=g.sent()))return[3,14];a=[];for(s in i)a.push(s);c=0,g.label=4;case 4:return c<a.length?(u=a[c],[4,fetch("http://apitest.niconi.cc/topic/"+i[u].topicId,{headers:r})]):[3,14];case 5:return l=g.sent(),401!==l.status?[3,6]:[3,13];case 6:return 500!==l.status?[3,7]:[3,13];case 7:return 404!==l.status?[3,8]:[3,13];case 8:return[4,l.json()];case 9:return p=g.sent(),i[u].topicTitle=p.title,i[u].boardId=p.boardId,f=i[u],[4,I(p.boardId)];case 10:return f.boardName=g.sent(),i[u].postId?[4,fetch("http://apitest.niconi.cc/post/"+i[u].postId+"/basic",{headers:r})]:[3,13];case 11:return h=g.sent(),[4,h.json()];case 12:d=g.sent(),i[u].floor=d.floor,i[u].userId=d.userId,i[u].userName=d.userName,n.push(i[u]),g.label=13;case 13:return c++,[3,4];case 14:return[2,n];case 15:return m=g.sent(),[3,16];case 16:return[2]}})})}function ce(e,t,n){return Ye(this,void 0,void 0,function(){var n,r,o,i,a,s,c,u,l,p,f,h,d,m,g;return qe(this,function(v){switch(v.label){case 0:return v.trys.push([0,15,,16]),n=[],[4,xe()];case 1:return r=v.sent(),o=new Headers,o.append("Authorization",r),[4,fetch("http://apitest.niconi.cc/notification/at?from="+e+"&size="+t,{headers:o})];case 2:return i=v.sent(),i.status,i.status,[4,i.json()];case 3:if(!(a=v.sent()))return[3,14];s=[];for(c in a)s.push(c);u=0,v.label=4;case 4:return u<s.length?(l=s[u],[4,fetch("http://apitest.niconi.cc/topic/"+a[l].topicId,{headers:o})]):[3,14];case 5:return p=v.sent(),p.status,p.status,404!==p.status?[3,6]:[3,13];case 6:return[4,p.json()];case 7:return f=v.sent(),a[l].topicTitle=f.title,a[l].boardId=f.boardId,h=a[l],[4,I(f.boardId)];case 8:return h.boardName=v.sent(),a[l].postId?[3,9]:(a[l].floor=1,a[l].userId=f.userId,a[l].userName=f.userName,[3,12]);case 9:return[4,fetch("http://apitest.niconi.cc/post/"+a[l].postId+"/basic",{headers:o})];case 10:return d=v.sent(),[4,d.json()];case 11:m=v.sent(),a[l].floor=m.floor,a[l].userId=m.userId,a[l].userName=m.userName,v.label=12;case 12:n.push(a[l]),v.label=13;case 13:return u++,[3,4];case 14:return[2,n];case 15:return g=v.sent(),[3,16];case 16:return[2]}})})}function ue(e,t,n){return Ye(this,void 0,void 0,function(){var e,r,o,i,a;return qe(this,function(s){switch(s.label){case 0:return e="http://apitest.niconi.cc/post/"+t+"/rating",[4,Te()];case 1:return r=s.sent(),r.append("Content-Type","application/json"),o={value:1,reason:n},i=JSON.stringify(o),[4,fetch(e,{method:"PUT",headers:r,body:i})];case 2:switch(a=s.sent(),a.status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}})})}function le(e,t,n){return Ye(this,void 0,void 0,function(){var e,r,o,i,a;return qe(this,function(s){switch(s.label){case 0:return e="http://apitest.niconi.cc/post/"+t+"/rating",[4,Te()];case 1:return r=s.sent(),r.append("Content-Type","application/json"),o={value:-1,reason:n},i=JSON.stringify(o),[4,fetch(e,{method:"PUT",headers:r,body:i})];case 2:switch(a=s.sent(),a.status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}})})}function pe(e,t,n){return Ye(this,void 0,void 0,function(){var r,o,i,a,s;return qe(this,function(c){switch(c.label){case 0:return[4,Te()];case 1:return r=c.sent(),r.append("Content-Type","application/json"),o={operationType:0,prestige:t,reason:n},i="http://apitest.niconi.cc/post/"+e+"/operation",a=JSON.stringify(o),[4,fetch(i,{method:"POST",headers:r,body:a})];case 2:switch(s=c.sent(),s.status){case 400:return[2,"wrong input"];case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}})})}function fe(e,t,n){return Ye(this,void 0,void 0,function(){var r,o,i,a,s;return qe(this,function(c){switch(c.label){case 0:return[4,Te()];case 1:return r=c.sent(),r.append("Content-Type","application/json"),o={operationType:1,prestige:t,reason:n},i="http://apitest.niconi.cc/post/"+e+"/operation",a=JSON.stringify(o),[4,fetch(i,{method:"PUT",headers:r,body:a})];case 2:switch(s=c.sent(),s.status){case 400:return[2,"wrong input"];case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}})})}function he(e,t,n){return Ye(this,void 0,void 0,function(){var r,o,i,a;return qe(this,function(s){switch(s.label){case 0:return[4,Te()];case 1:return r=s.sent(),r.append("Content-Type","application/json"),o={reason:n},i="http://apitest.niconi.cc/manage/post?topicid="+e+"&postid="+t,[4,fetch(i,{method:"DELETE",headers:r,body:JSON.stringify(o)})];case 2:switch(a=s.sent(),a.status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}})})}function de(e,t,n){return Ye(this,void 0,void 0,function(){var r,o,i,a;return qe(this,function(s){switch(s.label){case 0:return[4,Te()];case 1:return r=s.sent(),r.append("Content-Type","application/json"),o={operationType:1,reason:t,stopPostDays:n},i="http://apitest.niconi.cc/post/"+e+"/operation",[4,fetch(i,{method:"POST",headers:r,body:JSON.stringify(o)})];case 2:switch(a=s.sent(),a.status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}})})}function me(e,t){return Ye(this,void 0,void 0,function(){var n,r,o;return qe(this,function(i){switch(i.label){case 0:return[4,Te()];case 1:return n=i.sent(),n.append("Content-Type","application/json"),r="http://apitest.niconi.cc/manage/punishment/cancelstopboardpost?userid="+e+"$boardid="+t,[4,fetch(r,{method:"PUT",headers:n})];case 2:switch(o=i.sent(),o.status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[4,o.json()];case 3:return[2,i.sent()]}})})}function ge(e,t,n,r,o){return Ye(this,void 0,void 0,function(){var t,i,a;return qe(this,function(s){switch(s.label){case 0:return[4,Te()];case 1:return t=s.sent(),t.append("Content-Type","application/json"),i={topState:n,duration:r,reason:o},[4,fetch("http://apitest.niconi.cc/topic/"+e+"/top",{method:"PUT",headers:t,body:JSON.stringify(i)})];case 2:switch(a=s.sent(),a.status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[4,a.json()];case 3:return[2,s.sent()]}})})}function ve(e,t,n){return Ye(this,void 0,void 0,function(){var t,r,o;return qe(this,function(i){switch(i.label){case 0:return[4,Te()];case 1:return t=i.sent(),t.append("Content-Type","application/json"),r=n,[4,fetch("http://apitest.niconi.cc/topic/"+e+"/top",{method:"DELETE",headers:t,body:JSON.stringify(r)})];case 2:switch(o=i.sent(),o.status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[4,o.json()];case 3:return[2,i.sent()]}})})}function ye(e){return Ye(this,void 0,void 0,function(){var t,n,r;return qe(this,function(o){switch(o.label){case 0:return[4,Te()];case 1:return t=o.sent(),[4,fetch("http://apitest.niconi.cc/me/all-message-count",{headers:t})];case 2:return n=o.sent(),[4,n.json()];case 3:switch(r=o.sent(),e){case 1:return[2,r.replyCount];case 2:return[2,r.atCount];case 3:return[2,r.systemCount]}return[2]}})})}function be(e,t){return Ye(this,void 0,void 0,function(){var n,r,o,i,a;return qe(this,function(s){switch(s.label){case 0:return[4,Te()];case 1:return n=s.sent(),n.append("Content-Type","application/json"),r="http://apitest.niconi.cc/manage/topic/"+e,o={reason:t},i=JSON.stringify(o),[4,fetch(r,{method:"DELETE",headers:n,body:i})];case 2:switch(a=s.sent(),a.status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[4,a.json()];case 3:return[2,s.sent()]}})})}function we(e,t,n,r){return Ye(this,void 0,void 0,function(){var t,o,i,a,s;return qe(this,function(c){switch(c.label){case 0:return[4,Te()];case 1:return t=c.sent(),t.append("Content-Type","application/json"),o="http://apitest.niconi.cc/topic/"+e+"/lock",i={reason:n,value:r},a=JSON.stringify(i),[4,fetch(o,{method:"PUT",headers:t,body:a})];case 2:switch(s=c.sent(),s.status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[4,s.json()];case 3:return[2,c.sent()]}})})}function Ee(e,t,n){return Ye(this,void 0,void 0,function(){var t,r,o,i,a;return qe(this,function(s){switch(s.label){case 0:return[4,Te()];case 1:return t=s.sent(),t.append("Content-Type","application/json"),r="http://apitest.niconi.cc/topic/"+e+"/lock",o={reason:n},i=JSON.stringify(o),[4,fetch(r,{method:"DELETE",headers:t,body:i})];case 2:switch(a=s.sent(),a.status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[4,a.json()];case 3:return[2,s.sent()]}})})}function _e(e,t){return Ye(this,void 0,void 0,function(){var n,r,o,i,a;return qe(this,function(s){switch(s.label){case 0:return[4,Te()];case 1:return n=s.sent(),n.append("Content-Type","application/json"),r="http://apitest.niconi.cc/manage/topic/"+e+"/best",o={reason:t},i=JSON.stringify(o),[4,fetch(r,{method:"PUT",headers:n,body:i})];case 2:switch(a=s.sent(),a.status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[4,a.json()];case 3:return[2,s.sent()]}})})}function Se(e,t){return Ye(this,void 0,void 0,function(){var n,r,o,i,a;return qe(this,function(s){switch(s.label){case 0:return[4,Te()];case 1:return n=s.sent(),n.append("Content-Type","application/json"),r="http://apitest.niconi.cc/manage/topic/"+e+"/best",o={reason:t},i=JSON.stringify(o),[4,fetch(r,{method:"DELETE",headers:n,body:i})];case 2:switch(a=s.sent(),a.status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[4,a.json()];case 3:return[2,s.sent()]}})})}function Ie(e,t){return Ye(this,void 0,void 0,function(){var n,r,o,i,a;return qe(this,function(s){switch(s.label){case 0:return[4,Te()];case 1:return n=s.sent(),n.append("Content-Type","application/json"),r="http://apitest.niconi.cc/manage/topic/"+e+"/not-hot",o={reason:t},i=JSON.stringify(o),[4,fetch(r,{method:"PUT",headers:n,body:i})];case 2:switch(a=s.sent(),a.status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[4,a.json()];case 3:return[2,s.sent()]}})})}function Ce(e,t){return Ye(this,void 0,void 0,function(){var n,r,o,i,a;return qe(this,function(s){switch(s.label){case 0:return[4,Te()];case 1:return n=s.sent(),n.append("Content-Type","application/json"),r="http://apitest.niconi.cc/manage/topic/"+e+"/not-hot",o={reason:t},i=JSON.stringify(o),[4,fetch(r,{method:"DELETE",headers:n,body:i})];case 2:switch(a=s.sent(),a.status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[4,a.json()];case 3:return[2,s.sent()]}})})}function Ne(e){var t=/(http|ftp|https)/g;if(e.match(t)){console.log("确实匹配到了");var n=/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/g,r=e.match(n),o=e.replace(n,"[url="+r+"][color=blue]"+r+"[/color][/url]").replace(/\n/g,"<br />");return o}console.log("没有匹配到了");var n=/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/g,r=e.match(n);console.log(r);var o=e.replace(n,'[url="http://'+r+'"][color=blue]'+r+"[/color][/url]").replace(/\n/g,"<br />");return o}function xe(){return Ye(this,void 0,void 0,function(){var e,t,n,r,o,i;return qe(this,function(a){switch(a.label){case 0:return E("userName")&&E("password")?E("accessToken")?[3,3]:(e="https://openid.cc98.org/connect/token",t={client_id:"9a1fd200-8687-44b1-4c20-08d50a96e5cd",client_secret:"8b53f727-08e2-4509-8857-e34bf92b27f2",grant_type:"password",username:E("userName"),password:E("password"),scope:"cc98-api openid"},n=new Headers,n.append("Content-Type","application/x-www-form-urlencoded"),[4,fetch(e,{method:"POST",headers:n,body:Je.param(t)})]):[3,4];case 1:return r=a.sent(),[4,r.json()];case 2:o=a.sent(),i="Bearer "+encodeURIComponent(o.access_token),w("accessToken",i,o.expires_in),a.label=3;case 3:return[2,E("accessToken")];case 4:return[2,null]}})})}function Te(){return Ye(this,void 0,void 0,function(){var e,t;return qe(this,function(n){switch(n.label){case 0:return[4,xe()];case 1:return e=n.sent(),t=new Headers,t.append("Authorization",e),[2,t]}})})}function Pe(e){return Ye(this,void 0,void 0,function(){var t,n,r;return qe(this,function(o){switch(o.label){case 0:return[4,Te()];case 1:return t=o.sent(),t.append("Content-Type","application/json"),n="http://apitest.niconi.cc/me/signin",[4,fetch(n,{method:"POST",headers:t,body:e})];case 2:return r=o.sent(),[2]}})})}function Oe(){return Ye(this,void 0,void 0,function(){var e,t,n,r;return qe(this,function(o){switch(o.label){case 0:return[4,Te()];case 1:return e=o.sent(),t="http://apitest.niconi.cc/me/signin",[4,fetch(t,{headers:e})];case 2:return n=o.sent(),[4,n.json()];case 3:return r=o.sent(),[2,r]}})})}function ke(){return Ye(this,void 0,void 0,function(){var e,t,n,r;return qe(this,function(o){switch(o.label){case 0:return[4,Te()];case 1:return e=o.sent(),t="http://apitest.niconi.cc/config/global",[4,fetch(t,{headers:e})];case 2:return n=o.sent(),[4,n.json()];case 3:return r=o.sent(),[2,r]}})})}function je(e){return Ye(this,void 0,void 0,function(){var t,n,r,o;return qe(this,function(i){switch(i.label){case 0:return[4,Te()];case 1:return t=i.sent(),n="http://apitest.niconi.cc/topic/"+e,[4,fetch(n,{headers:t})];case 2:switch(r=i.sent(),r.status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[4,r.json()];case 3:return o=i.sent(),[2,o]}})})}function Me(e){return Ye(this,void 0,void 0,function(){var t,n,r,o;return qe(this,function(i){switch(i.label){case 0:return[4,Te()];case 1:return t=i.sent(),n="http://apitest.niconi.cc/board/"+e,[4,fetch(n,{headers:t})];case 2:switch(r=i.sent(),r.status){case 404:return[2,"not found"];case 500:return[2,"server error"]}return[4,r.json()];case 3:return o=i.sent(),console.log(o),!1===o.canEntry?[2,"unauthorized"]:[2,o]}})})}function Ue(e){return e>=10?(e-e%10)/10+1:1}function Le(e){return Ye(this,void 0,void 0,function(){var t,n,r,o,i,a;return qe(this,function(s){switch(s.label){case 0:return t="userId_"+e,E(t)?[2,E(t)]:[4,Te()];case 1:return n=s.sent(),r="http://apitest.niconi.cc/user/"+e,[4,fetch(r,{headers:n})];case 2:return o=s.sent(),[4,o.json()];case 3:return i=s.sent(),a="userName_"+i.name,w(t,i,3600),w(a,i,3600),[2,i]}})})}function Ae(e){return Ye(this,void 0,void 0,function(){var t,n,r,o,i,a;return qe(this,function(s){switch(s.label){case 0:return t="userName_"+e,E(t)?[2,E(t)]:[4,Te()];case 1:return n=s.sent(),r="http://apitest.niconi.cc/user/name/"+e,[4,fetch(r,{headers:n})];case 2:return o=s.sent(),[4,o.json()];case 3:return i=s.sent(),a="userId_"+i.id,w(t,i,3600),w(a,i,3600),[2,i]}})})}function Re(e){if(E("userInfo")){var t=E("userInfo").privilege,n=E("userInfo").name;E("userInfo").id;if("管理员"===t||"超级版主"===t)return!0;if(e)for(var r=0;r<e.length;r++)if(n===e[r])return!0}}function Be(e){return Ye(this,void 0,void 0,function(){var t,n,r,o;return qe(this,function(i){switch(i.label){case 0:return[4,Te()];case 1:return t=i.sent(),n="http://apitest.niconi.cc/board/"+e+"/tag",[4,fetch(n,{headers:t})];case 2:return r=i.sent(),[4,r.json()];case 3:return o=i.sent(),[2,o]}})})}function Fe(e,t,n,r,o,i){return Ye(this,void 0,void 0,function(){var a,s,c,u,l;return qe(this,function(p){switch(p.label){case 0:return[4,Te()];case 1:return a=p.sent(),a.append("Content-Type","application/json"),s="http://apitest.niconi.cc/manage/topic/"+e+"/highlight",c={highlightInfo:{isBold:t,isItalic:n,color:r,duration:o,reason:i}},u=JSON.stringify(c),[4,fetch(s,{method:"PUT",headers:a,body:u})];case 2:switch(l=p.sent(),l.status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[4,l.json()];case 3:return[2,p.sent()]}})})}function De(e){return Ye(this,void 0,void 0,function(){var t,n,r;return qe(this,function(o){switch(o.label){case 0:return[4,Te()];case 1:return t=o.sent(),n="http://apitest.niconi.cc/me/favorite/"+e,[4,fetch(n,{method:"PUT",headers:t})];case 2:return r=o.sent(),[2]}})})}function He(e){return Ye(this,void 0,void 0,function(){var t,n,r;return qe(this,function(o){switch(o.label){case 0:return[4,Te()];case 1:return t=o.sent(),n="http://apitest.niconi.cc/me/favorite/"+e,[4,fetch(n,{method:"DELETE",headers:t})];case 2:return r=o.sent(),[2]}})})}function ze(e){return Ye(this,void 0,void 0,function(){var t,n,r,o;return qe(this,function(i){switch(i.label){case 0:return[4,Te()];case 1:return t=i.sent(),n="http://apitest.niconi.cc/topic/"+e+"/isfavorite",[4,fetch(n,{headers:t})];case 2:return r=i.sent(),[4,r.json()];case 3:return o=i.sent(),[2,o]}})})}function We(){return Ye(this,void 0,void 0,function(){var e,t,n,r;return qe(this,function(o){switch(o.label){case 0:return[4,Te()];case 1:return e=o.sent(),t="http://apitest.niconi.cc/me/unread-count",[4,fetch(t,{headers:e})];case 2:return n=o.sent(),[4,n.json()];case 3:return r=o.sent(),r.totalCount=r.systemCount+r.atCount+r.replyCount+r.messageCount,y("unreadCount",r),r.totalCount>0?(Je("#unreadCount-totalCount").removeClass("displaynone"),Je("#unreadCount-totalCount1").removeClass("displaynone")):(Je("#unreadCount-totalCount").addClass("displaynone"),Je("#unreadCount-totalCount1").addClass("displaynone")),r.replyCount>0?(Je("#unreadCount-replyCount").removeClass("displaynone"),Je("#unreadCount-replyCount1").removeClass("displaynone")):(Je("#unreadCount-replyCount").addClass("displaynone"),Je("#unreadCount-replyCount1").addClass("displaynone")),r.atCount>0?(Je("#unreadCount-atCount").removeClass("displaynone"),Je("#unreadCount-atCount1").removeClass("displaynone")):(Je("#unreadCount-atCount").addClass("displaynone"),Je("#unreadCount-atCount1").addClass("displaynone")),r.systemCount>0?(Je("#unreadCount-systemCount").removeClass("displaynone"),Je("#unreadCount-systemCount1").removeClass("displaynone")):(Je("#unreadCount-systemCount").addClass("displaynone"),Je("#unreadCount-systemCount1").addClass("displaynone")),r.messageCount>0?(Je("#unreadCount-messageCount").removeClass("displaynone"),Je("#unreadCount-messageCount1").removeClass("displaynone")):(Je("#unreadCount-messageCount").addClass("displaynone"),Je("#unreadCount-messageCount1").addClass("displaynone")),[2]}})})}var Ge=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ye=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},qe=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var $e=n(1),Ve=n(155),Je=n(38);t.getBoardTopicAsync=r,t.getTopic=o,t.getTopicContent=i,t.like=a,t.dislike=s,t.getLikeStateAndCount=c,t.getHotReplyContent=u,t.getListPager=l,t.convertHotTopic=p,t.getPager=f,t.getCurUserTopic=h,t.getCurUserTopicContent=d,t.getAllNewTopic=m,t.getFocusBoardTopic=g,t.getFocusTopic=v,t.setStorage=y,t.getStorage=b,t.setLocalStorage=w,t.getLocalStorage=E,t.removeLocalStorage=_,t.removeStorage=S,t.getBoardName=I,t.isLogOn=C,t.getRecentContact=N,t.getRecentMessage=x,t.sortRecentMessage=T,t.transerTime=P,t.sortContactList=O,t.getUserDetails=k,t.getLikeState=j,t.refreshLikeState=M,t.sendTopic=U,t.getListTotalPage=L,t.getCurUserTotalReplyPage=A,t.sendMessage=R,t.getScrollTop=B,t.getScrollHeight=F,t.getWindowHeight=D,t.isBottom=H,t.uploadFile=z,t.clickUploadIcon=W,t.uploadEvent=G,t.followUser=Y,t.unfollowUser=q,t.GetTopTopics=$,t.getBestTopics=V,t.getSaveTopics=J,t.getSearchTopic=X,t.awardWealth=Q,t.deductWealth=K,t.getAwardInfo=Z,t.getPortraitUrl=ee,t.getBoardId=te,t.isFollowThisBoard=ne,t.followBoard=re,t.refreshUserInfo=oe,t.unfollowBoard=ie,t.getMessageSystem=ae,t.getMessageResponse=se,t.getMessageAttme=ce,t.plus1=ue,t.minus1=le,t.addPrestige=pe,t.deductPrestige=fe,t.deletePost=he,t.stopBoardPost=de,t.cancelStopBoardPost=me,t.addBoardTopTopic=ge,t.removeBoardTopTopic=ve,t.getTotalPage=ye,t.deleteTopic=be,t.lockTopic=we,t.unLockTopic=Ee,t.setBestTopic=_e,t.cancelBestTopic=Se,t.setDisableHot=Ie,t.cancelDisableHot=Ce,t.autoAddUrl=Ne,t.getToken=xe,t.formAuthorizeHeader=Te,t.signin=Pe,t.getSigninInfo=Oe,t.getGlobalConfig=ke,t.getTopicInfo=je,t.getBoardInfo=Me,t.getTotalPageof10=Ue,t.getUserInfo=Le,t.getUserInfoByName=Ae,t.isMaster=Re,t.getBoardTag=Be,t.setHighlight=Fe,t.setFavoriteTopic=De,t.deleteFavoriteTopic=He,t.getFavState=ze,t.refreshUnReadCount=We},function(e,t,n){var r=n(7);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e}();t.UbbCodeContextData=o;var i=function(){function e(e,t){this._engine=e,this._options=t}return Object.defineProperty(e.prototype,"engine",{get:function(){return this._engine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._engine.data},enumerable:!0,configurable:!0}),e}();t.UbbCodeContext=i;var a=function(){function e(){this.autoDetectUrl=!0,this.allowExternalUrl=!0,this.allowImage=!0,this.allowMediaContent=!0,this.allowAutoPlay=!0,this.compatibility=s.Recommended}return e}();t.UbbCodeOptions=a;var s;!function(e){e[e.Transitional=0]="Transitional",e[e.Recommended=1]="Recommended",e[e.EnforceMorden=2]="EnforceMorden"}(s=t.UbbCompatiblityMode||(t.UbbCompatiblityMode={}));var c;!function(e){e[e.String=0]="String",e[e.ItemSeperator=1]="ItemSeperator",e[e.NameValueSeperator=2]="NameValueSeperator"}(c||(c={}));var u,l=function(){function e(e,t){this.type=e,this.value=t}return e.stringValue=function(t){return new e(c.String,t)},e.itemSeperator=new e(c.ItemSeperator,null),e.nameValueSeperator=new e(c.NameValueSeperator,null),e}();!function(e){e[e.Text=0]="Text",e[e.Tag=1]="Tag"}(u||(u={}));var p=function(){function e(e){this._parent=e}return Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),e}(),f=function(e){function t(t,n){var r=e.call(this,n)||this;return r._text=t,r}return r(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return u.Text},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),t.prototype.clone=function(e){return new t(this._text,e)},t}(p),h=function(e){function t(t,n){var r=e.call(this,n)||this;return r._isClosed=!1,r._subSegments=[],r._tagData=t,r}return r(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return u.Tag},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isClosed",{get:function(){return this._isClosed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tagData",{get:function(){return this._tagData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subSegments",{get:function(){return this._subSegments},enumerable:!0,configurable:!0}),t.forceClose=function(e,n){if(e.type===u.Text)n._subSegments.push(e.clone(n));else{var r=e;if(r.isClosed)n._subSegments.push(e.clone(n));else{console.warn("标签 %s 没有正确关闭，已经被转换为纯文字。",r.tagData.tagName),n._subSegments.push(new f(r.tagData.startTagString,e.parent));for(var o=0,i=r._subSegments;o<i.length;o++){var a=i[o];t.forceClose(a,n)}}}},t.prototype.close=function(){var e=this._subSegments;this._subSegments=[];for(var n=0,r=e;n<r.length;n++){var o=r[n];t.forceClose(o,this)}this._isClosed=!0},t.prototype.clone=function(e){var n=new t(this._tagData,e);n._content=this._content,n._isClosed=this._isClosed;for(var r=0,o=this._subSegments;r<o.length;r++){var i=o[r];n._subSegments.push(i.clone(n))}return n},t.prototype.getContentText=function(){for(var e=[],t=0,n=this._subSegments;t<n.length;t++){var r=n[t];r.type===u.Text?e.push(r.text):e.push(r.getFullText())}return e.join("")},t.prototype.getFullText=function(){return this.tagData.startTagString+this.getContentText()+this.tagData.endTagString},t}(p),d=function(){function e(e,t){if(!t)throw new Error("参数不能为空。");this._originalString=e,this._parameters=t,this._namedParameters={};for(var n=0,r=t;n<r.length;n++){var o=r[n];o.name&&(this._namedParameters[o.name]=o.value)}}return Object.defineProperty(e.prototype,"orignalString",{get:function(){return this._originalString},enumerable:!0,configurable:!0}),e.parse=function(t){if(!t)return null;var n=function(e){for(var t=0,n=[],r=c.ItemSeperator;;){var o=function(n){for(;;){if(t>=e.length)return null;var r=e[t];{if(!/\s/i.test(r)){if(","===r)return t++,l.itemSeperator;if("="===r)return t++,l.nameValueSeperator;if('"'===r||"'"===r)return l.stringValue(function(){var n=e[t],r=e.indexOf('"',t+1);r<0&&(console.error("UBB: 解析标签字符串 %s 时无法找到位置 %d 处 %s 对应的结束字符串。",e,t,n),r=e.length);var o=t+1;return t=r+1,e.substring(o,r)}());var o=t,i=n===c.ItemSeperator?/[=,]/i:/,/i,a=e.substring(t+1).match(i);if(a){var s=a.index+t+1;return t=s,l.stringValue(e.substring(o,s))}return t=e.length,l.stringValue(e.substring(o))}t++}}}(r);if(!o)break;n.push(o),r=o.type}return n}(t);if(0===n.length)return null;var r=function(e){var n=[];if(!e||0===e.length)return console.error("UBB: 无法将标签字符串 %s 解析为参数的集合。",t),n;for(var r=null,o=null,i=c.ItemSeperator,a=0,s=e;a<s.length;a++){var u=s[a];switch(u.type){case c.ItemSeperator:n.push(new g(r,o)),r=null,o=null,i=c.ItemSeperator;break;case c.NameValueSeperator:if(i!==c.String)throw new Error("名称值分隔符只能出现在值之后。");r=o,o=null,i=c.NameValueSeperator;break;default:if(i===c.String)throw new Error("不能连续出现多个值。");o=u.value,i=c.String}}return n.push(new g(r,o)),n[0].name||(n[0]=new g(n[0].value,null)),n}(n);return new e(t,r)},Object.defineProperty(e.prototype,"tagName",{get:function(){return this._parameters[0].name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startTagString",{get:function(){return"["+this.orignalString+"]"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endTagString",{get:function(){return"[/"+this.tagName+"]"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainValue",{get:function(){return this._parameters[0].value},enumerable:!0,configurable:!0}),e.prototype.value=function(e){if("number"==typeof e)return this._parameters[e].value;if("string"==typeof e)return this._namedParameters[e];throw new Error("参数必须是字符串或者数字。")},e.prototype.name=function(e){return this._parameters[e].name},Object.defineProperty(e.prototype,"parameterCount",{get:function(){return this._parameters.length},enumerable:!0,configurable:!0}),e.prototype.parameter=function(e){return this._parameters[e]},e}();t.UbbTagData=d;var m,g=function(){function e(e,t){this._name=e,this._value=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e}();!function(e){e[e.Recursive=0]="Recursive",e[e.Text=1]="Text",e[e.Empty=2]="Empty"}(m=t.UbbTagMode||(t.UbbTagMode={}));var v=function(){function e(){}return e}();t.UbbTextHandler=v;var y=function(){function e(){}return e.prototype.getTagMode=function(e){return m.Recursive},e.renderTagAsString=function(e,t){return[e.startTagString,t,e.endTagString]},e}();t.UbbTagHandler=y;var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.exec=function(e,t){return this.execCore(e.getContentText(),e.tagData,t)},t}(y);t.TextTagHandler=b;var w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.exec=function(e,t){for(var n=[],r=0,o=e.subSegments;r<o.length;r++){var i=o[r];n.push(t.engine.execSegment(i,t))}return this.execCore(n,e.tagData,t)},t}(y);t.RecursiveTagHandler=w;var E=function(){function e(){this._namedTagHandlerList={},this._unnamedTagHanlderList=[],this._textHandlers=[]}return e.prototype.getHandler=function(e){var t=this._namedTagHandlerList[e];if(t)return t;for(var n=0,r=this._unnamedTagHanlderList;n<r.length;n++){var o=r[n];if(o.supportedTagNames.test(e))return o}return null},e.prototype.register=function(e){this.registerInstance(new e)},e.prototype.registerInstance=function(e){if(!e||!e.supportedTagNames)throw new Error("参数 tagHandler 无效，或者未提供正确的标签名称。");"string"==typeof e.supportedTagNames?this.registerNamedCore([e.supportedTagNames],e):e.supportedTagNames instanceof Array?this.registerNamedCore(e.supportedTagNames,e):this.registerUnnamedCore(e)},e.prototype.registerText=function(e){this.registerTextInstance(new e)},e.prototype.registerTextInstance=function(e){if(!e)throw new Error("参数 textHandler 无效。");this._textHandlers.push(e)},e.prototype.registerNamedCore=function(e,t){for(var n=0,r=e;n<r.length;n++){var o=r[n];o in this._namedTagHandlerList?console.error("标签 %s 的处理程序已经被注册。",o):this._namedTagHandlerList[o]=t}},e.prototype.registerUnnamedCore=function(e){this._unnamedTagHanlderList.push(e)},e}(),_=function(){function e(){this._tagHandlers=new E,this._textHandlers=[],this._data=new o}return Object.defineProperty(e.prototype,"textHandlers",{get:function(){return this._textHandlers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tagHandlers",{get:function(){return this._tagHandlers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),e.prototype.getHandler=function(e){return this._tagHandlers.getHandler(e)},e.prototype.exec=function(e,t){var n=new i(this,t);return this.execCore(e,n)},e.tryHandleEndTag=function(e,t){for(var n=t;n&&n.tagData;){if(n.tagData.tagName===e)return n.close(),n.parent;n=n.parent}return console.warn("UBB: 找不到结束标签 %s 的开始标签，该标签将被作为一般文字处理。",e),t.subSegments.push(new f("[/"+e+"]",t)),t},e.prototype.buildSegmentsCore=function(t,n){for(var r=/([\s\S]*?)\[(.+?)]/gi;;){var o=r.lastIndex,i=r.exec(t);if(!i){var a=t.substring(o);return void(a&&n.subSegments.push(new f(a,n)))}var s=i[1],c=i[2];s&&n.subSegments.push(new f(s,n));var u=c.match(/^\/(.+)$/i);if(u){var l=u[1];n=e.tryHandleEndTag(l,n)}else try{var p=d.parse(c),g=this._tagHandlers.getHandler(p.tagName);if(!g){console.warn("标签字符串 %s 中给定的标签名 %s 没有有效的处理程序，将被视为一般文字",c,p.tagName),n.subSegments.push(new f(p.startTagString,n));continue}switch(g.getTagMode(p)){case m.Recursive:var v=new h(p,n);n.subSegments.push(v),n=v;break;case m.Text:var y=t.indexOf(p.endTagString,r.lastIndex);if(-1===y)console.warn("找不到标签字符串 %s 对应的结束标签，该内容将被视为一般文字。",p.startTagString),n.subSegments.push(new f(p.startTagString,n));else{var b=t.substring(r.lastIndex,y),w=new h(p,n);n.subSegments.push(w),n=w;var E=new f(b,w);w.subSegments.push(E),w.close(),r.lastIndex=y+p.endTagString.length}break;case m.Empty:var _=new h(p,n);n.subSegments.push(_),_.close(),t.startsWith(p.endTagString,r.lastIndex)&&(r.lastIndex+=p.endTagString.length);break;default:throw new Error("标签 "+p.tagName+" 的处理程序发生错误")}}catch(e){console.warn("标签字符串 %s 解析失败，将被视为普通文字。",c),n.subSegments.push(new f("["+c+"]",n))}}},e.prototype.execCore=function(e,t){var n=new h(null,null);this.buildSegmentsCore(e,n),n.close();for(var r=[],o=0,i=n.subSegments;o<i.length;o++){var a=i[o];r.push(this.execSegment(a,t))}return r},e.prototype.execTextCore=function(e,t){for(var n=0,r=this.textHandlers;n<r.length;n++){var o=r[n],i=e.match(o.supportedContent);if(i){var a=e.substr(0,i.index),s=e.substr(i.index+i[0].length),c=[];return a&&c.push(this.execTextCore(a,t)),c.push(o.exec(i,t)),s&&c.push(this.execTextCore(s,t)),c}}return e},e.prototype.execText=function(e,t){return this.execCore(e,t)},e.prototype.execSegment=function(e,t){if(e.type===u.Text){var n=e.text;return this.execTextCore(n,t)}var r=e,o=this.getHandler(r.tagData.tagName);return o?o.exec(r,t):(console.warn("没有找到标签 %s 的处理程序，将被视为一般文字。",r.tagData.tagName),r.getFullText())},e}();t.UbbCodeEngine=_},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(67)("wks"),o=n(41),i=n(4).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},function(e,t){e.exports=ReactRouterDOM},function(e,t,n){e.exports=!n(6)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(3),o=n(121),i=n(27),a=Object.defineProperty;t.f=n(10)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(29),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(28);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(385),a=function(){function e(){}return e}();t.UbbContainerProps=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this.props.engine||i.createEngine(),t=this.props.options||new i.UbbCodeOptions,n=this.props.code,r=e.exec(n||"",t),a={whiteSpace:"pre-wrap",width:"100%"};return t.compatibility===i.UbbCompatiblityMode.Transitional?o.createElement("blockquote",{style:a},r):o.createElement("article",{style:a},r)},t}(o.Component);t.UbbContainer=s},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(11),o=n(40);e.exports=n(10)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(4),o=n(17),i=n(16),a=n(41)("src"),s=Function.toString,c=(""+s).split("toString");n(32).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var u="function"==typeof n;u&&(i(n,"name")||o(n,"name",t)),e[t]!==n&&(u&&(i(n,a)||o(n,a,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(e,t,n){var r=n(0),o=n(6),i=n(28),a=/"/g,s=function(e,t,n,r){var o=String(i(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+o+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*o(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t,n){var r=n(60),o=n(28);e.exports=function(e){return r(o(e))}},function(e,t,n){var r=n(61),o=n(40),i=n(20),a=n(27),s=n(16),c=n(121),u=Object.getOwnPropertyDescriptor;t.f=n(10)?u:function(e,t){if(e=i(e),t=a(t,!0),c)try{return u(e,t)}catch(e){}if(s(e,t))return o(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(16),o=n(13),i=n(91)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(14);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t){e.exports=ReactRedux},function(e,t,n){var r=n(7);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(0),o=n(32),i=n(6);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*i(function(){n(1)}),"Object",a)}},function(e,t,n){var r=n(23),o=n(60),i=n(13),a=n(12),s=n(108);e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,l=4==e,p=6==e,f=5==e||p,h=t||s;return function(t,s,d){for(var m,g,v=i(t),y=o(v),b=r(s,d,3),w=a(y.length),E=0,_=n?h(t,w):c?h(t,0):void 0;w>E;E++)if((f||E in y)&&(m=y[E],g=b(m,E,v),e))if(n)_[E]=g;else if(g)switch(e){case 3:return!0;case 5:return m;case 6:return E;case 2:_.push(m)}else if(l)return!1;return p?-1:u||l?l:_}}},function(e,t){var n=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";if(n(10)){var r=n(42),o=n(4),i=n(6),a=n(0),s=n(77),c=n(114),u=n(23),l=n(48),p=n(40),f=n(17),h=n(50),d=n(29),m=n(12),g=n(147),v=n(44),y=n(27),b=n(16),w=n(62),E=n(7),_=n(13),S=n(105),I=n(45),C=n(22),N=n(46).f,x=n(107),T=n(41),P=n(8),O=n(31),k=n(68),j=n(75),M=n(110),U=n(55),L=n(72),A=n(47),R=n(109),B=n(137),F=n(11),D=n(21),H=F.f,z=D.f,W=o.RangeError,G=o.TypeError,Y=o.Uint8Array,q=Array.prototype,$=c.ArrayBuffer,V=c.DataView,J=O(0),X=O(2),Q=O(3),K=O(4),Z=O(5),ee=O(6),te=k(!0),ne=k(!1),re=M.values,oe=M.keys,ie=M.entries,ae=q.lastIndexOf,se=q.reduce,ce=q.reduceRight,ue=q.join,le=q.sort,pe=q.slice,fe=q.toString,he=q.toLocaleString,de=P("iterator"),me=P("toStringTag"),ge=T("typed_constructor"),ve=T("def_constructor"),ye=s.CONSTR,be=s.TYPED,we=s.VIEW,Ee=O(1,function(e,t){return Ne(j(e,e[ve]),t)}),_e=i(function(){return 1===new Y(new Uint16Array([1]).buffer)[0]}),Se=!!Y&&!!Y.prototype.set&&i(function(){new Y(1).set({})}),Ie=function(e,t){var n=d(e);if(n<0||n%t)throw W("Wrong offset!");return n},Ce=function(e){if(E(e)&&be in e)return e;throw G(e+" is not a typed array!")},Ne=function(e,t){if(!(E(e)&&ge in e))throw G("It is not a typed array constructor!");return new e(t)},xe=function(e,t){return Te(j(e,e[ve]),t)},Te=function(e,t){for(var n=0,r=t.length,o=Ne(e,r);r>n;)o[n]=t[n++];return o},Pe=function(e,t,n){H(e,t,{get:function(){return this._d[n]}})},Oe=function(e){var t,n,r,o,i,a,s=_(e),c=arguments.length,l=c>1?arguments[1]:void 0,p=void 0!==l,f=x(s);if(void 0!=f&&!S(f)){for(a=f.call(s),r=[],t=0;!(i=a.next()).done;t++)r.push(i.value);s=r}for(p&&c>2&&(l=u(l,arguments[2],2)),t=0,n=m(s.length),o=Ne(this,n);n>t;t++)o[t]=p?l(s[t],t):s[t];return o},ke=function(){for(var e=0,t=arguments.length,n=Ne(this,t);t>e;)n[e]=arguments[e++];return n},je=!!Y&&i(function(){he.call(new Y(1))}),Me=function(){return he.apply(je?pe.call(Ce(this)):Ce(this),arguments)},Ue={copyWithin:function(e,t){return B.call(Ce(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return K(Ce(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return R.apply(Ce(this),arguments)},filter:function(e){return xe(this,X(Ce(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return Z(Ce(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Ce(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){J(Ce(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(Ce(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Ce(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ue.apply(Ce(this),arguments)},lastIndexOf:function(e){return ae.apply(Ce(this),arguments)},map:function(e){return Ee(Ce(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(Ce(this),arguments)},reduceRight:function(e){return ce.apply(Ce(this),arguments)},reverse:function(){for(var e,t=this,n=Ce(t).length,r=Math.floor(n/2),o=0;o<r;)e=t[o],t[o++]=t[--n],t[n]=e;return t},some:function(e){return Q(Ce(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return le.call(Ce(this),e)},subarray:function(e,t){var n=Ce(this),r=n.length,o=v(e,r);return new(j(n,n[ve]))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,m((void 0===t?r:v(t,r))-o))}},Le=function(e,t){return xe(this,pe.call(Ce(this),e,t))},Ae=function(e){Ce(this);var t=Ie(arguments[1],1),n=this.length,r=_(e),o=m(r.length),i=0;if(o+t>n)throw W("Wrong length!");for(;i<o;)this[t+i]=r[i++]},Re={entries:function(){return ie.call(Ce(this))},keys:function(){return oe.call(Ce(this))},values:function(){return re.call(Ce(this))}},Be=function(e,t){return E(e)&&e[be]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Fe=function(e,t){return Be(e,t=y(t,!0))?p(2,e[t]):z(e,t)},De=function(e,t,n){return!(Be(e,t=y(t,!0))&&E(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?H(e,t,n):(e[t]=n.value,e)};ye||(D.f=Fe,F.f=De),a(a.S+a.F*!ye,"Object",{getOwnPropertyDescriptor:Fe,defineProperty:De}),i(function(){fe.call({})})&&(fe=he=function(){return ue.call(this)});var He=h({},Ue);h(He,Re),f(He,de,Re.values),h(He,{slice:Le,set:Ae,constructor:function(){},toString:fe,toLocaleString:Me}),Pe(He,"buffer","b"),Pe(He,"byteOffset","o"),Pe(He,"byteLength","l"),Pe(He,"length","e"),H(He,me,{get:function(){return this[be]}}),e.exports=function(e,t,n,c){c=!!c;var u=e+(c?"Clamped":"")+"Array",p="get"+e,h="set"+e,d=o[u],v=d||{},y=d&&C(d),b=!d||!s.ABV,_={},S=d&&d.prototype,x=function(e,n){var r=e._d;return r.v[p](n*t+r.o,_e)},T=function(e,n,r){var o=e._d;c&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),o.v[h](n*t+o.o,r,_e)},P=function(e,t){H(e,t,{get:function(){return x(this,t)},set:function(e){return T(this,t,e)},enumerable:!0})};b?(d=n(function(e,n,r,o){l(e,d,u,"_d");var i,a,s,c,p=0,h=0;if(E(n)){if(!(n instanceof $||"ArrayBuffer"==(c=w(n))||"SharedArrayBuffer"==c))return be in n?Te(d,n):Oe.call(d,n);i=n,h=Ie(r,t);var v=n.byteLength;if(void 0===o){if(v%t)throw W("Wrong length!");if((a=v-h)<0)throw W("Wrong length!")}else if((a=m(o)*t)+h>v)throw W("Wrong length!");s=a/t}else s=g(n),a=s*t,i=new $(a);for(f(e,"_d",{b:i,o:h,l:a,e:s,v:new V(i)});p<s;)P(e,p++)}),S=d.prototype=I(He),f(S,"constructor",d)):i(function(){d(1)})&&i(function(){new d(-1)})&&L(function(e){new d,new d(null),new d(1.5),new d(e)},!0)||(d=n(function(e,n,r,o){l(e,d,u);var i;return E(n)?n instanceof $||"ArrayBuffer"==(i=w(n))||"SharedArrayBuffer"==i?void 0!==o?new v(n,Ie(r,t),o):void 0!==r?new v(n,Ie(r,t)):new v(n):be in n?Te(d,n):Oe.call(d,n):new v(g(n))}),J(y!==Function.prototype?N(v).concat(N(y)):N(v),function(e){e in d||f(d,e,v[e])}),d.prototype=S,r||(S.constructor=d));var O=S[de],k=!!O&&("values"==O.name||void 0==O.name),j=Re.values;f(d,ge,!0),f(S,be,u),f(S,we,!0),f(S,ve,d),(c?new d(1)[me]==u:me in S)||H(S,me,{get:function(){return u}}),_[u]=d,a(a.G+a.W+a.F*(d!=v),_),a(a.S,u,{BYTES_PER_ELEMENT:t}),a(a.S+a.F*i(function(){v.of.call(d,1)}),u,{from:Oe,of:ke}),"BYTES_PER_ELEMENT"in S||f(S,"BYTES_PER_ELEMENT",t),a(a.P,u,Ue),A(u),a(a.P+a.F*Se,u,{set:Ae}),a(a.P+a.F*!k,u,Re),r||S.toString==fe||(S.toString=fe),a(a.P+a.F*i(function(){new d(1).slice()}),u,{slice:Le}),a(a.P+a.F*(i(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!i(function(){S.toLocaleString.call([1,2])})),u,{toLocaleString:Me}),U[u]=k?O:j,r||k||f(S,de,j)}}else e.exports=function(){}},function(e,t,n){var r=n(142),o=n(0),i=n(67)("metadata"),a=i.store||(i.store=new(n(145))),s=function(e,t,n){var o=a.get(e);if(!o){if(!n)return;a.set(e,o=new r)}var i=o.get(t);if(!i){if(!n)return;o.set(t,i=new r)}return i},c=function(e,t,n){var r=s(t,n,!1);return void 0!==r&&r.has(e)},u=function(e,t,n){var r=s(t,n,!1);return void 0===r?void 0:r.get(e)},l=function(e,t,n,r){s(n,r,!0).set(e,t)},p=function(e,t){var n=s(e,t,!1),r=[];return n&&n.forEach(function(e,t){r.push(t)}),r},f=function(e){return void 0===e||"symbol"==typeof e?e:String(e)},h=function(e){o(o.S,"Reflect",e)};e.exports={store:a,map:s,has:c,get:u,set:l,keys:p,key:f,exp:h}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e}();t.AppState=r;var o=function(){function e(){}return e}();t.TopicVoteState=o;var i=function(){function e(){}return e}();t.PostTopicState=i;var a=function(){function e(){}return e}();t.AuthorMessageState=a;var s=function(){function e(){}return e}();t.TopicTitleState=s;var c=function(){function e(){}return e}();t.ContentState=c;var u=function(){function e(){}return e}();t.TopicGoodState=u;var l=function(){function e(){}return e}();t.ReplierState=l;var p=function(){function e(){}return e}();t.MainPageTopicState=p;var f=function(){function e(){}return e}();t.ListHeadState=f;var h=function(){function e(){}return e}();t.ListNoticeState=h;var d=function(){function e(){}return e}();t.ListTagState=d;var m=function(){function e(){}return e}();t.ListContentState=m;var g=function(){function e(){}return e}();t.TopicTitleAndContentState=g;var v=function(){function e(){}return e}();t.ListPagerState=v;var y=function(){function e(e){this.pageNumber=e}return e}();t.PagerState=y;var b=function(){function e(e,t,n,r,o,i,a,s,c,u,l,p,f,h,d,m){this.userName=e,this.time=r,this.title=t,this.content=n,this.signature=o,this.userImgUrl=i,this.userId=a,this.likeNumber=s,this.dislikeNumber=c,this.postId=u,this.isAnonymous=l,this.contentType=p,this.isFollowing=f,this.fanCount=h,this.likeInfo=d,this.awardInfo=m}return e}();t.TopicState=b;var w=function(){function e(){}return e}();t.LoginState=w;var E=function(){function e(){}return e}();t.AlreadyLoginState=E;var _=function(){function e(e,t,n,r,o){this.name=e,this.todayPostCount=t,this.totalPostCount=n,this.id=r,this.masters=o}return e}();t.Board=_;var S=function(){function e(){}return e}();t.BoardState=S;var I=function(){function e(){}return e}();t.UserInfo=I;var C=function(){function e(){}return e}();t.UserRecentPost=C;var N=function(){function e(){}return e}();t.UserFanInfo=N;var x=function(){function e(){}return e}();t.UserFavoritesBoardInfo=x;var T=function(){function e(){}return e}();t.ChangeUserInfo=T},function(e,t,n){var r=n(41)("meta"),o=n(7),i=n(16),a=n(11).f,s=0,c=Object.isExtensible||function(){return!0},u=!n(6)(function(){return c(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},p=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[r].i},f=function(e,t){if(!i(e,r)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[r].w},h=function(e){return u&&d.NEED&&c(e)&&!i(e,r)&&l(e),e},d=e.exports={KEY:r,NEED:!1,fastKey:p,getWeak:f,onFreeze:h}},function(e,t,n){var r=n(8)("unscopables"),o=Array.prototype;void 0==o[r]&&n(17)(o,r,{}),e.exports=function(e){o[r][e]=!0}},function(e,t){e.exports=$},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(81);t.userLogIn=function(){return{type:r.USER_LOG_ON}},t.userLogOff=function(){return{type:r.USER_LOG_OFF}},t.changeUserInfo=function(e){return{type:r.CHANGE_USERINFO,newInfo:e}},t.throwError=function(e){return{type:r.ERROR,errorMessage:e}},t.changeCurrentVisitingUserPage=function(e,t){return{type:r.CHANGE_VISITING_USER,page:e,id:t}},t.userNotFound=function(){return{type:r.USER_NOT_FOUND}};var o=function(){function e(){this.type=r.ADD_AWARD}return e}();t.AddAwardAction=o},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=!1},function(e,t,n){var r=n(123),o=n(92);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(29),o=Math.max,i=Math.min;e.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(3),o=n(124),i=n(92),a=n(91)("IE_PROTO"),s=function(){},c=function(){var e,t=n(89)("iframe"),r=i.length;for(t.style.display="none",n(93).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c.prototype[i[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=c(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(123),o=n(92).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){"use strict";var r=n(4),o=n(11),i=n(10),a=n(8)("species");e.exports=function(e){var t=r[e];i&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(23),o=n(135),i=n(105),a=n(3),s=n(12),c=n(107),u={},l={},t=e.exports=function(e,t,n,p,f){var h,d,m,g,v=f?function(){return e}:c(e),y=r(n,p,t?2:1),b=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(i(v)){for(h=s(e.length);h>b;b++)if((g=t?y(a(d=e[b])[0],d[1]):y(e[b]))===u||g===l)return g}else for(m=v.call(e);!(d=m.next()).done;)if((g=o(m,y,d.value,t))===u||g===l)return g};t.BREAK=u,t.RETURN=l},function(e,t,n){var r=n(18);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);u.call(this,e),l.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",o)}function o(){this.allowHalfOpen||this._writableState.ended||a(i,this)}function i(e){e.end()}var a=n(88),s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var c=n(66);c.inherits=n(59);var u=n(173),l=n(178);c.inherits(r,u);for(var p=s(l.prototype),f=0;f<p.length;f++){var h=p[f];r.prototype[h]||(r.prototype[h]=l.prototype[h])}Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),a(t,e)}},function(e,t,n){var r=n(11).f,o=n(16),i=n(8)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){var r=n(0),o=n(28),i=n(6),a=n(95),s="["+a+"]",c="​",u=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),p=function(e,t,n){var o={},s=i(function(){return!!a[e]()||c[e]()!=c}),u=o[e]=s?t(f):a[e];n&&(o[n]=u),r(r.P+r.F*s,"String",o)},f=p.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(l,"")),e};e.exports=p},function(e,t){e.exports={}},function(e,t,n){var r=n(7);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(415),u=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={pager:[1,2,3,4,5]},r}return r(t,e),t.prototype.generatePageLink=function(e){return a.createElement(c.PageModel,{pageNumber:e,url:this.props.url,curPage:this.props.page,totalPage:this.props.totalPage})},t.prototype.componentWillReceiveProps=function(e){return o(this,void 0,void 0,function(){var t;return i(this,function(n){return t=s.getPager(e.page,e.totalPage),this.setState({pager:t}),[2]})})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){return e=s.getPager(this.props.page,this.props.totalPage),this.setState({pager:e}),[2]})})},t.prototype.render=function(){return a.createElement("div",{id:"pager"},a.createElement("div",{className:"row pagination"},this.state.pager.map(this.generatePageLink.bind(this))))},t}(a.Component);t.Pager=u},function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return a(e,t,n)}var i=n(86),a=i.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=i:(r(i,t),t.Buffer=o),r(a,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=a(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){var r=n(24);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(24),o=n(8)("toStringTag"),i="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),o))?n:i?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(9),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.createElement("div",null,"您当前未登录"),o.createElement(i.Link,{to:"/logon"},o.createElement("button",null,"登录")))},t}(o.Component);t.LogOut=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:"errorState"},o.createElement("div",null,o.createElement("img",{className:"errorIcon",src:"/images/404.png"})),o.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),o.createElement("div",{className:"errorText"},"帖子被删除"),o.createElement("div",{className:"row returnIndexBtn"},o.createElement(i.Link,{to:"/"},"返回首页")))},t}(o.Component);t.TopicDeleted=s;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",null,"网络连接中断")},t}(o.Component);t.Disconnected=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:"errorState"},o.createElement("div",null,o.createElement("img",{className:"errorIcon",src:"/images/401.png"})),o.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),o.createElement("div",{className:"errorText"},"您没有权限进入这个版面"),o.createElement("div",{className:"row returnIndexBtn"},o.createElement(i.Link,{to:"/"},"返回首页")))},t}(o.Component);t.UnauthorizedBoard=u;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:"errorState"},o.createElement("div",null,o.createElement("img",{className:"errorIcon",src:"/images/401.png"})),o.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),o.createElement("div",{className:"errorText"},"您没有权限进入这个主题"),o.createElement("div",{className:"row returnIndexBtn"},o.createElement(i.Link,{to:"/"},"返回首页")))},t}(o.Component);t.UnauthorizedTopic=l;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:"errorState"},o.createElement("div",null,o.createElement("img",{className:"errorIcon",src:"/images/401.png"})),o.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),o.createElement("div",{className:"errorText"},"您没有权限进行这个操作"),o.createElement("div",{className:"row returnIndexBtn"},o.createElement(i.Link,{to:"/"},"返回首页")))},t}(o.Component);t.UnauthorizedOperation=p;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:"errorState"},o.createElement("div",null,o.createElement("img",{className:"errorIcon",src:"/images/404.png"})),o.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),o.createElement("div",{className:"errorText"},"版面不存在"),o.createElement("div",{className:"row returnIndexBtn"},o.createElement(i.Link,{to:"/"},"返回首页")))},t}(o.Component);t.NotFoundBoard=f;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:"errorState"},o.createElement("div",null,o.createElement("img",{className:"errorIcon",src:"/images/404.png"})),o.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),o.createElement("div",{className:"errorText"},"帖子不存在"),o.createElement("div",{className:"row returnIndexBtn"},o.createElement(i.Link,{to:"/"},"返回首页")))},t}(o.Component);t.NotFoundTopic=h;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:"errorState"},o.createElement("div",null,o.createElement("img",{className:"errorIcon",src:"/images/404.png"})),o.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),o.createElement("div",{className:"errorText"},"用户不存在"),o.createElement("div",{className:"row returnIndexBtn"},o.createElement(i.Link,{to:"/"},"返回首页")))},t}(o.Component);t.NotFoundUser=d;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:"errorState"},o.createElement("div",null,o.createElement("img",{className:"errorIcon",src:"/images/500.png"})),o.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),o.createElement("div",{className:"errorText"},"服务器发送错误"),o.createElement("div",{className:"row returnIndexBtn"},o.createElement(i.Link,{to:"/"},"返回首页")))},t}(o.Component);t.ServerError=m;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:"errorText"},"402需要输入内容")},t}(o.Component);t.ContentNeeded=g;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:"errorState"},o.createElement("div",null,o.createElement("img",{className:"errorIcon",src:"/images/403.png"})),o.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),o.createElement("div",{className:"errorText"},"操作失败或被拒绝"),o.createElement("div",{className:"row returnIndexBtn"},o.createElement(i.Link,{to:"/"},"返回首页")))},t}(o.Component);t.OperationForbidden=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Trace=0]="Trace",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.None=4]="None"}(t.LogLevel||(t.LogLevel={}))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(e){if(p===clearTimeout)return clearTimeout(e);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function a(){m&&h&&(m=!1,h.length?d=h.concat(d):g=-1,d.length&&s())}function s(){if(!m){var e=o(a);m=!0;for(var t=d.length;t;){for(h=d,d=[];++g<t;)h&&h[g].run();g=-1,t=d.length}h=null,m=!1,i(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var l,p,f=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(e){p=r}}();var h,d=[],m=!1,g=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new c(e,t)),1!==d.length||m||o(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===g(e)}function r(e){return"boolean"==typeof e}function o(e){return null===e}function i(e){return null==e}function a(e){return"number"==typeof e}function s(e){return"string"==typeof e}function c(e){return"symbol"==typeof e}function u(e){return void 0===e}function l(e){return"[object RegExp]"===g(e)}function p(e){return"object"==typeof e&&null!==e}function f(e){return"[object Date]"===g(e)}function h(e){return"[object Error]"===g(e)||e instanceof Error}function d(e){return"function"==typeof e}function m(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function g(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=o,t.isNullOrUndefined=i,t.isNumber=a,t.isString=s,t.isSymbol=c,t.isUndefined=u,t.isRegExp=l,t.isObject=p,t.isDate=f,t.isError=h,t.isFunction=d,t.isPrimitive=m,t.isBuffer=e.isBuffer}).call(t,n(86).Buffer)},function(e,t,n){var r=n(4),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t,n){var r=n(20),o=n(12),i=n(44);e.exports=function(e){return function(t,n,a){var s,c=r(t),u=o(c.length),l=i(a,u);if(e&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(24);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(7),o=n(24),i=n(8)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},function(e,t,n){var r=n(8)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(3);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(17),o=n(18),i=n(6),a=n(28),s=n(8);e.exports=function(e,t,n){var c=s(e),u=n(a,c,""[e]),l=u[0],p=u[1];i(function(){var t={};return t[c]=function(){return 7},7!=""[e](t)})&&(o(String.prototype,e,l),r(RegExp.prototype,c,2==t?function(e,t){return p.call(e,this,t)}:function(e){return p.call(e,this)}))}},function(e,t,n){var r=n(3),o=n(14),i=n(8)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[i])?t:o(n)}},function(e,t,n){"use strict";var r=n(4),o=n(0),i=n(18),a=n(50),s=n(36),c=n(49),u=n(48),l=n(7),p=n(6),f=n(72),h=n(53),d=n(96);e.exports=function(e,t,n,m,g,v){var y=r[e],b=y,w=g?"set":"add",E=b&&b.prototype,_={},S=function(e){var t=E[e];i(E,e,"delete"==e?function(e){return!(v&&!l(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(v||E.forEach&&!p(function(){(new b).entries().next()}))){var I=new b,C=I[w](v?{}:-0,1)!=I,N=p(function(){I.has(1)}),x=f(function(e){new b(e)}),T=!v&&p(function(){for(var e=new b,t=5;t--;)e[w](t,t);return!e.has(-0)});x||(b=t(function(t,n){u(t,b,e);var r=d(new y,t,b);return void 0!=n&&c(n,g,r[w],r),r}),b.prototype=E,E.constructor=b),(N||T)&&(S("delete"),S("has"),g&&S("get")),(T||C)&&S(w),v&&E.clear&&delete E.clear}else b=m.getConstructor(t,e,g,w),a(b.prototype,n),s.NEED=!0;return h(b,e),_[e]=b,o(o.G+o.W+o.F*(b!=y),_),v||m.setStrong(b,e,g),b}},function(e,t,n){for(var r,o=n(4),i=n(17),a=n(41),s=a("typed_array"),c=a("view"),u=!(!o.ArrayBuffer||!o.DataView),l=u,p=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");p<9;)(r=o[f[p++]])?(i(r.prototype,s,!0),i(r.prototype,c,!0)):l=!1;e.exports={ABV:u,CONSTR:l,TYPED:s,VIEW:c}},function(e,t,n){"use strict";e.exports=n(42)||!n(6)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n(4)[e]})},function(e,t,n){"use strict";var r=n(0);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){"use strict";var r=n(0),o=n(14),i=n(23),a=n(49);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,c=arguments[1];return o(this),t=void 0!==c,t&&o(c),void 0==e?new this:(n=[],t?(r=0,s=i(c,arguments[2],2),a(e,!1,function(e){n.push(s(e,r++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USER_LOG_ON="USER_LOG_ON",t.USER_LOG_OFF="USER_LOG_OFF",t.GET_USER_POSTS="GET_USER_POSTS",t.CHANGE_USERINFO="CHANGE_USERINFO",t.CHANGE_VISITING_USER="CHANGE_VISITING_USER",t.USER_NOT_FOUND="USER_NOT_FOUND",t.ERROR="ERROR",t.ADD_AWARD="ADD_AWARD"},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(9),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:"user-post"},o.createElement("div",{className:"user-post-info"},o.createElement(i.Link,{className:"user-post-board",to:"/list/"+this.props.userRecentPost.boardId},this.props.userRecentPost.board),o.createElement("a",{className:"user-post-date"},this.props.userRecentPost.date),o.createElement("a",{className:"user-post-title"},this.props.userRecentPost.title)),o.createElement("div",{className:"user-post-content"},o.createElement("p",null,o.createElement(i.Link,{to:"/topic/"+this.props.userRecentPost.id},this.props.userRecentPost.content)),void 0!==this.props.userRecentPost.approval?o.createElement("a",{className:"fa-thumbs-o-up"}," "+this.props.userRecentPost.approval):null,void 0!==this.props.userRecentPost.disapproval?o.createElement("a",{className:"fa-thumbs-o-down"}," "+this.props.userRecentPost.disapproval):null))},t}(o.Component);t.UserCenterExactActivitiesPost=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(9),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e,t=this,n=[],r={backgroundColor:"#ccc",cursor:"default"};if(this.props.totalPage<=7){for(e=this.props.totalPage;e--;)n.unshift(e+1);n=n.map(function(e,n){return o.createElement("li",null,o.createElement(i.Link,{to:""+t.props.href+e},o.createElement("button",{type:"button",disabled:e==t.props.currentPage,style:e==t.props.currentPage?r:{}},e)))})}else if(this.props.currentPage-1<=3){for(e=7;e--;)n.unshift(e+1);n=n.map(function(e,n){return o.createElement("li",null,o.createElement(i.Link,{to:""+t.props.href+e},o.createElement("button",{type:"button",disabled:e==t.props.currentPage,style:e==t.props.currentPage?r:{}},e)))}),n.push(o.createElement("li",null,o.createElement("button",{disabled:!0},"···"))),n.push(o.createElement("li",null,o.createElement(i.Link,{to:""+this.props.href+this.props.totalPage},o.createElement("button",{type:"button"},this.props.totalPage))))}else if(this.props.totalPage-this.props.currentPage<=3){for(e=7;e--;)n.unshift(e-6+this.props.totalPage);n=n.map(function(e,n){return o.createElement("li",null,o.createElement(i.Link,{to:""+t.props.href+e},o.createElement("button",{type:"button",disabled:e==t.props.currentPage,style:e==t.props.currentPage?r:{}},e)))}),n.unshift(o.createElement("li",null,o.createElement("button",{disabled:!0},"···"))),n.unshift(o.createElement("li",null,o.createElement(i.Link,{to:this.props.href+"1"},o.createElement("button",{type:"button"},1))))}else{for(e=7;e--;)n.unshift(e-3+this.props.currentPage);n=n.map(function(e,n){return o.createElement("li",null,o.createElement(i.Link,{to:""+t.props.href+e},o.createElement("button",{type:"button",disabled:e==t.props.currentPage,style:e==t.props.currentPage?r:{}},e)))}),n.push(o.createElement("li",null,o.createElement("button",{disabled:!0},"···"))),n.push(o.createElement("li",null,o.createElement(i.Link,{to:""+this.props.href+this.props.totalPage},o.createElement("button",{type:"button"},this.props.totalPage)))),n.unshift(o.createElement("li",null,o.createElement("button",{disabled:!0},"···"))),n.unshift(o.createElement("li",null,o.createElement(i.Link,{to:this.props.href+"1"},o.createElement("button",{type:"button"},1))))}return this.props.hasTotal||this.props.currentPage==this.props.totalPage||n.push(o.createElement("li",null,o.createElement("button",{disabled:!0},"···"))),o.createElement("div",{id:"userCenterPageCount"},o.createElement("ul",null,n))},t}(o.Component);t.UserCenterPageCount=a;!function(){function e(){}}()},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e="/topic/"+this.props.id,t="/list/"+this.props.boardId+"/normal";return o.createElement("div",{className:"focus-topic"},o.createElement(a,{userId:this.props.userId,portraitUrl:this.props.portraitUrl}),o.createElement("div",{className:"focus-topic-info1"},o.createElement("div",{className:"focus-topic-authorInfo"},o.createElement(s,{userId:this.props.userId,userName:this.props.userName}),o.createElement("div",{className:"focus-topic-fans"},"粉丝"),o.createElement("div",{className:"focus-topic-redText"},this.props.fanCount)),o.createElement("div",{className:"focus-topic-title"},o.createElement("a",{href:e,target:"_blank"},this.props.title))),o.createElement("div",{className:"focus-topic-info2"},o.createElement("div",{className:"focus-topic-board"},o.createElement("a",{href:t,target:"_blank"},this.props.boardName),"  /  ",moment(this.props.time).format("YYYY-MM-DD HH:mm:ss")),o.createElement("div",{className:"focus-topic-response"},o.createElement("div",null,o.createElement("i",{className:"fa fa-thumbs-o-up","aria-hidden":"true"}),this.props.likeCount),o.createElement("div",null,o.createElement("i",{className:"fa fa-thumbs-o-down","aria-hidden":"true"}),this.props.dislikeCount),o.createElement("div",null,o.createElement("i",{className:"fa fa-eye","aria-hidden":"true"}),this.props.hitCount),o.createElement("div",null,o.createElement("i",{className:"fa fa-commenting-o","aria-hidden":"true"}),this.props.replyCount))))},t}(o.Component);t.FocusTopicSingle=i;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){if(this.props.userId){var e="/user/"+this.props.userId;return o.createElement("a",{href:e,target:"_blank"},o.createElement("img",{className:"focus-topic-portraitUrl",src:this.props.portraitUrl}))}return o.createElement("img",{className:"focus-topic-portraitUrl",src:this.props.portraitUrl})},t}(o.Component);t.PortaritrUrl=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){if(this.props.userId){var e="/user/"+this.props.userId;return o.createElement("a",{href:e,target:"_blank",className:"focus-topic-blackText"},o.createElement("div",{className:"focus-topic-blackText"},this.props.userName))}return o.createElement("div",{className:"focus-topic-blackText"},this.props.userName)},t}(o.Component);t.UserName=s;var c=function(){function e(){}return e}();t.PortaritrUrlProps=c;var u=function(){function e(){}return e}();t.UserNameProps=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(64),o=function(){function e(){}return e.prototype.log=function(e,t){},e}();t.NullLogger=o;var i=function(){function e(e){this.minimumLogLevel=e}return e.prototype.log=function(e,t){if(e>=this.minimumLogLevel)switch(e){case r.LogLevel.Error:console.error(r.LogLevel[e]+": "+t);break;case r.LogLevel.Warning:console.warn(r.LogLevel[e]+": "+t);break;case r.LogLevel.Information:console.info(r.LogLevel[e]+": "+t);break;default:console.log(r.LogLevel[e]+": "+t)}},e}();t.ConsoleLogger=i;!function(e){function t(e){return void 0===e?new i(r.LogLevel.Information):null===e?new o:e.log?e:new i(e)}e.createLogger=t}(t.LoggerFactory||(t.LoggerFactory={}))},function(e,t,n){"use strict";(function(e){function r(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return i.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=i.prototype):(null===e&&(e=new i(t)),e.length=t),e}function i(e,t,n){if(!(i.TYPED_ARRAY_SUPPORT||this instanceof i))return new i(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?f(e,t,n,r):"string"==typeof t?l(e,t,n):h(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,n,r){return s(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}function u(e,t){if(s(t),e=o(e,t<0?0:0|d(t)),!i.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function l(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!i.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|g(t,n);e=o(e,r);var a=e.write(t,n);return a!==r&&(e=e.slice(0,a)),e}function p(e,t){var n=t.length<0?0:0|d(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),i.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=i.prototype):e=p(e,t),e}function h(e,t){if(i.isBuffer(t)){var n=0|d(t.length);return e=o(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||J(t.length)?o(e,0):p(e,t);if("Buffer"===t.type&&K(t.data))return p(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function m(e){return+e!=e&&(e=0),i.alloc(+e)}function g(e,t){if(i.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(r)return G(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return j(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=i.from(t,r)),i.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,o);if("number"==typeof t)return t&=255,i.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,r,o){function i(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}var u;if(o){var l=-1;for(u=n;u<s;u++)if(i(e,u)===i(t,-1===l?0:u-l)){if(-1===l&&(l=u),u-l+1===c)return l*a}else-1!==l&&(u-=u-l),l=-1}else for(n+c>s&&(n=s-c),u=n;u>=0;u--){for(var p=!0,f=0;f<c;f++)if(i(e,u+f)!==i(t,f)){p=!1;break}if(p)return u}return-1}function E(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function _(e,t,n,r){return V(G(t,e.length-n),e,n,r)}function S(e,t,n,r){return V(Y(t),e,n,r)}function I(e,t,n,r){return S(e,t,n,r)}function C(e,t,n,r){return V($(t),e,n,r)}function N(e,t,n,r){return V(q(t,e.length-n),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?X.fromByteArray(e):X.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i=e[o],a=null,s=i>239?4:i>223?3:i>191?2:1;if(o+s<=n){var c,u,l,p;switch(s){case 1:i<128&&(a=i);break;case 2:c=e[o+1],128==(192&c)&&(p=(31&i)<<6|63&c)>127&&(a=p);break;case 3:c=e[o+1],u=e[o+2],128==(192&c)&&128==(192&u)&&(p=(15&i)<<12|(63&c)<<6|63&u)>2047&&(p<55296||p>57343)&&(a=p);break;case 4:c=e[o+1],u=e[o+2],l=e[o+3],128==(192&c)&&128==(192&u)&&128==(192&l)&&(p=(15&i)<<18|(63&c)<<12|(63&u)<<6|63&l)>65535&&p<1114112&&(a=p)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),o+=s}return P(r)}function P(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Z));return n}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function j(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=W(e[i]);return o}function M(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function U(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,o,a){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function A(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function R(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function B(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,o){return o||B(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,r,23,4),n+4}function D(e,t,n,r,o){return o||B(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,r,52,8),n+8}function H(e){if(e=z(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function W(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e,t){t=t||1/0;for(var n,r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Y(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function q(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function $(e){return X.toByteArray(H(e))}function V(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function J(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var X=n(468),Q=n(469),K=n(172);t.Buffer=i,t.SlowBuffer=m,t.INSPECT_MAX_BYTES=50,i.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),i.poolSize=8192,i._augment=function(e){return e.__proto__=i.prototype,e},i.from=function(e,t,n){return a(null,e,t,n)},i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0})),i.alloc=function(e,t,n){return c(null,e,t,n)},i.allocUnsafe=function(e){return u(null,e)},i.allocUnsafeSlow=function(e){return u(null,e)},i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,a=Math.min(n,r);o<a;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!K(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=i.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!i.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},i.byteLength=g,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},i.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):v.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e,t,n,r,o){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,o>>>=0,this===e)return 0;for(var a=o-r,s=n-t,c=Math.min(a,s),u=this.slice(r,o),l=e.slice(t,n),p=0;p<c;++p)if(u[p]!==l[p]){a=u[p],s=l[p];break}return a<s?-1:s<a?1:0},i.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},i.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},i.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},i.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return E(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return S(this,e,t,n);case"latin1":case"binary":return I(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;i.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(i.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=i.prototype;else{var o=t-e;r=new i(o,void 0);for(var a=0;a<o;++a)r[a]=this[a+e]}return r},i.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},i.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},i.prototype.readUInt8=function(e,t){return t||U(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return t||U(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return t||U(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return t||U(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return t||U(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},i.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},i.prototype.readInt8=function(e,t){return t||U(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){t||U(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(e,t){t||U(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(e,t){return t||U(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return t||U(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return t||U(e,4,this.length),Q.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return t||U(e,4,this.length),Q.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return t||U(e,8,this.length),Q.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return t||U(e,8,this.length),Q.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){L(this,e,t,n,Math.pow(2,8*n)-1,0)}var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},i.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){L(this,e,t,n,Math.pow(2,8*n)-1,0)}var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},i.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,255,0),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},i.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},i.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},i.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},i.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);L(this,e,t,n,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},i.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);L(this,e,t,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},i.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,127,-128),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},i.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},i.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},i.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},i.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},i.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},i.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},i.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},i.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,a=r-n;if(this===e&&n<t&&t<r)for(o=a-1;o>=0;--o)e[o+t]=this[o+n];else if(a<1e3||!i.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},i.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=i.isBuffer(e)?e:G(new i(e,r).toString()),c=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%c]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(51))},function(e,t,n){(function(t){function r(e){if(!(this instanceof r))return new r(e);if(this._bufs=[],this.length=0,"function"==typeof e){this._callback=e;var t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)})}else this.append(e);o.call(this)}var o=n(474);n(120).inherits(r,o),r.prototype._offset=function(e){var t,n=0,r=0;if(0===e)return[0,0];for(;r<this._bufs.length;r++){if(t=n+this._bufs[r].length,e<t||r==this._bufs.length-1)return[r,e-n];n=t}},r.prototype.append=function(e){var n=0;if(t.isBuffer(e))this._appendBuffer(e);else if(Array.isArray(e))for(;n<e.length;n++)this.append(e[n]);else if(e instanceof r)for(;n<e._bufs.length;n++)this.append(e._bufs[n]);else null!=e&&("number"==typeof e&&(e=e.toString()),this._appendBuffer(new t(e)));return this},r.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},r.prototype._write=function(e,t,n){this._appendBuffer(e),"function"==typeof n&&n()},r.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},r.prototype.end=function(e){o.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},r.prototype.get=function(e){return this.slice(e,e+1)[0]},r.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},r.prototype.copy=function(e,n,r,o){if(("number"!=typeof r||r<0)&&(r=0),("number"!=typeof o||o>this.length)&&(o=this.length),r>=this.length)return e||new t(0);if(o<=0)return e||new t(0);var i,a,s=!!e,c=this._offset(r),u=o-r,l=u,p=s&&n||0,f=c[1];if(0===r&&o==this.length){if(!s)return 1===this._bufs.length?this._bufs[0]:t.concat(this._bufs,this.length);for(a=0;a<this._bufs.length;a++)this._bufs[a].copy(e,p),p+=this._bufs[a].length;return e}if(l<=this._bufs[c[0]].length-f)return s?this._bufs[c[0]].copy(e,n,f,f+l):this._bufs[c[0]].slice(f,f+l);for(s||(e=new t(u)),a=c[0];a<this._bufs.length;a++){if(i=this._bufs[a].length-f,!(l>i)){this._bufs[a].copy(e,p,f,f+l);break}this._bufs[a].copy(e,p,f),p+=i,l-=i,f&&(f=0)}return e},r.prototype.shallowSlice=function(e,t){e=e||0,t=t||this.length,e<0&&(e+=this.length),t<0&&(t+=this.length);var n=this._offset(e),o=this._offset(t),i=this._bufs.slice(n[0],o[0]+1);return 0==o[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,o[1]),0!=n[1]&&(i[0]=i[0].slice(n[1])),new r(i)},r.prototype.toString=function(e,t,n){return this.slice(t,n).toString(e)},r.prototype.consume=function(e){for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},r.prototype.duplicate=function(){for(var e=0,t=new r;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},r.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var t in e)!function(t){r.prototype[t]=function(n){return this.slice(n,n+e[t])[t](0)}}(t)}(),e.exports=r}).call(t,n(86).Buffer)},function(e,t,n){"use strict";(function(t){function n(e,n,r,o){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,o)});default:for(i=new Array(s-1),a=0;a<i.length;)i[a++]=arguments[a];return t.nextTick(function(){e.apply(null,i)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=n:e.exports=t.nextTick}).call(t,n(65))},function(e,t,n){var r=n(7),o=n(4).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(4),o=n(32),i=n(42),a=n(122),s=n(11).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(67)("keys"),o=n(41);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(4).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(7),o=n(3),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(23)(Function.call,n(21).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var r=n(7),o=n(94).set;e.exports=function(e,t,n){var i,a=t.constructor;return a!==n&&"function"==typeof a&&(i=a.prototype)!==n.prototype&&r(i)&&o&&o(e,i),e}},function(e,t,n){"use strict";var r=n(29),o=n(28);e.exports=function(e){var t=String(o(this)),n="",i=r(e);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var r=n(29),o=n(28);e.exports=function(e){return function(t,n){var i,a,s=String(o(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(i=s.charCodeAt(c),i<55296||i>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):a-56320+(i-55296<<10)+65536)}}},function(e,t,n){"use strict";var r=n(42),o=n(0),i=n(18),a=n(17),s=n(16),c=n(55),u=n(102),l=n(53),p=n(22),f=n(8)("iterator"),h=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,n,m,g,v,y){u(n,t,m);var b,w,E,_=function(e){if(!h&&e in N)return N[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},S=t+" Iterator",I="values"==g,C=!1,N=e.prototype,x=N[f]||N["@@iterator"]||g&&N[g],T=x||_(g),P=g?I?_("entries"):T:void 0,O="Array"==t?N.entries||x:x;if(O&&(E=p(O.call(new e)))!==Object.prototype&&E.next&&(l(E,S,!0),r||s(E,f)||a(E,f,d)),I&&x&&"values"!==x.name&&(C=!0,T=function(){return x.call(this)}),r&&!y||!h&&!C&&N[f]||a(N,f,T),c[t]=T,c[S]=d,g)if(b={values:I?T:_("values"),keys:v?T:_("keys"),entries:P},y)for(w in b)w in N||i(N,w,b[w]);else o(o.P+o.F*(h||C),t,b);return b}},function(e,t,n){"use strict";var r=n(45),o=n(40),i=n(53),a={};n(17)(a,n(8)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t,n){var r=n(71),o=n(28);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(e))}},function(e,t,n){var r=n(8)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var r=n(55),o=n(8)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},function(e,t,n){"use strict";var r=n(11),o=n(40);e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},function(e,t,n){var r=n(62),o=n(8)("iterator"),i=n(55);e.exports=n(32).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){var r=n(272);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){"use strict";var r=n(13),o=n(44),i=n(12);e.exports=function(e){for(var t=r(this),n=i(t.length),a=arguments.length,s=o(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:o(c,n);u>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(37),o=n(138),i=n(55),a=n(20);e.exports=n(101)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t,n){var r,o,i,a=n(23),s=n(128),c=n(93),u=n(89),l=n(4),p=l.process,f=l.setImmediate,h=l.clearImmediate,d=l.MessageChannel,m=l.Dispatch,g=0,v={},y=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},b=function(e){y.call(e.data)};f&&h||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++g]=function(){s("function"==typeof e?e:Function(e),t)},r(g),g},h=function(e){delete v[e]},"process"==n(24)(p)?r=function(e){p.nextTick(a(y,e,1))}:m&&m.now?r=function(e){m.now(a(y,e,1))}:d?(o=new d,i=o.port2,o.port1.onmessage=b,r=a(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:f,clear:h}},function(e,t,n){var r=n(4),o=n(111).set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==n(24)(a);e.exports=function(){var e,t,n,u=function(){var r,o;for(c&&(r=a.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(u)};else if(i){var l=!0,p=document.createTextNode("");new i(u).observe(p,{characterData:!0}),n=function(){p.data=l=!l}}else if(s&&s.resolve){var f=s.resolve();n=function(){f.then(u)}}else n=function(){o.call(r,u)};return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=o(t),this.reject=o(n)}var o=n(14);e.exports.f=function(e){return new r(e)}},function(e,t,n){"use strict";function r(e,t,n){var r,o,i,a=Array(n),s=8*n-t-1,c=(1<<s)-1,u=c>>1,l=23===t?B(2,-24)-B(2,-77):0,p=0,f=e<0||0===e&&1/e<0?1:0;for(e=R(e),e!=e||e===L?(o=e!=e?1:0,r=c):(r=F(D(e)/H),e*(i=B(2,-r))<1&&(r--,i*=2),e+=r+u>=1?l/i:l*B(2,1-u),e*i>=2&&(r++,i/=2),r+u>=c?(o=0,r=c):r+u>=1?(o=(e*i-1)*B(2,t),r+=u):(o=e*B(2,u-1)*B(2,t),r=0));t>=8;a[p++]=255&o,o/=256,t-=8);for(r=r<<t|o,s+=t;s>0;a[p++]=255&r,r/=256,s-=8);return a[--p]|=128*f,a}function o(e,t,n){var r,o=8*n-t-1,i=(1<<o)-1,a=i>>1,s=o-7,c=n-1,u=e[c--],l=127&u;for(u>>=7;s>0;l=256*l+e[c],c--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=t;s>0;r=256*r+e[c],c--,s-=8);if(0===l)l=1-a;else{if(l===i)return r?NaN:u?-L:L;r+=B(2,t),l-=a}return(u?-1:1)*r*B(2,l-t)}function i(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function a(e){return[255&e]}function s(e){return[255&e,e>>8&255]}function c(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function u(e){return r(e,52,8)}function l(e){return r(e,23,4)}function p(e,t,n){N(e[P],t,{get:function(){return this[n]}})}function f(e,t,n,r){var o=+n,i=I(o);if(i+t>e[W])throw U(O);var a=e[z]._b,s=i+e[G],c=a.slice(s,s+t);return r?c:c.reverse()}function h(e,t,n,r,o,i){var a=+n,s=I(a);if(s+t>e[W])throw U(O);for(var c=e[z]._b,u=s+e[G],l=r(+o),p=0;p<t;p++)c[u+p]=l[i?p:t-p-1]}var d=n(4),m=n(10),g=n(42),v=n(77),y=n(17),b=n(50),w=n(6),E=n(48),_=n(29),S=n(12),I=n(147),C=n(46).f,N=n(11).f,x=n(109),T=n(53),P="prototype",O="Wrong index!",k=d.ArrayBuffer,j=d.DataView,M=d.Math,U=d.RangeError,L=d.Infinity,A=k,R=M.abs,B=M.pow,F=M.floor,D=M.log,H=M.LN2,z=m?"_b":"buffer",W=m?"_l":"byteLength",G=m?"_o":"byteOffset";if(v.ABV){if(!w(function(){k(1)})||!w(function(){new k(-1)})||w(function(){return new k,new k(1.5),new k(NaN),"ArrayBuffer"!=k.name})){k=function(e){return E(this,k),new A(I(e))};for(var Y,q=k[P]=A[P],$=C(A),V=0;$.length>V;)(Y=$[V++])in k||y(k,Y,A[Y]);g||(q.constructor=k)}var J=new j(new k(2)),X=j[P].setInt8;J.setInt8(0,2147483648),J.setInt8(1,2147483649),!J.getInt8(0)&&J.getInt8(1)||b(j[P],{setInt8:function(e,t){X.call(this,e,t<<24>>24)},setUint8:function(e,t){X.call(this,e,t<<24>>24)}},!0)}else k=function(e){E(this,k,"ArrayBuffer");var t=I(e);this._b=x.call(Array(t),0),this[W]=t},j=function(e,t,n){E(this,j,"DataView"),E(e,k,"DataView");var r=e[W],o=_(t);if(o<0||o>r)throw U("Wrong offset!");if(n=void 0===n?r-o:S(n),o+n>r)throw U("Wrong length!");this[z]=e,this[G]=o,this[W]=n},m&&(p(k,"byteLength","_l"),p(j,"buffer","_b"),p(j,"byteLength","_l"),p(j,"byteOffset","_o")),b(j[P],{getInt8:function(e){return f(this,1,e)[0]<<24>>24},getUint8:function(e){return f(this,1,e)[0]},getInt16:function(e){var t=f(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=f(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return i(f(this,4,e,arguments[1]))},getUint32:function(e){return i(f(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return o(f(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return o(f(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){h(this,1,e,a,t)},setUint8:function(e,t){h(this,1,e,a,t)},setInt16:function(e,t){h(this,2,e,s,t,arguments[2])},setUint16:function(e,t){h(this,2,e,s,t,arguments[2])},setInt32:function(e,t){h(this,4,e,c,t,arguments[2])},setUint32:function(e,t){h(this,4,e,c,t,arguments[2])},setFloat32:function(e,t){h(this,4,e,l,t,arguments[2])},setFloat64:function(e,t){h(this,8,e,u,t,arguments[2])}});T(k,"ArrayBuffer"),T(j,"DataView"),y(j[P],v.VIEW,!0),t.ArrayBuffer=k,t.DataView=j},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),Object.defineProperty(t.prototype,"match",{get:function(){return this.props.match},enumerable:!0,configurable:!0}),t}(o.Component);t.RouteComponent=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(15),u=(function(){function e(){}}(),function(){function e(){this.height=32.5,this.allowUbbTag="all"}return e}()),l=(function(){function e(){}}(),function(e){function t(t){var n=e.call(this,t)||this;return n.valueStack=[""],n.redoStack=[],n.state={selectionEnd:0,selectionStart:0,clicked:!1,extendValue:"",extendTagName:"",emojiType:"ac",emojiIsShown:!1,isPreviewing:!1,value:""},n.option=t.option||new u,n.clearAllShown=n.clearAllShown.bind(n),n.handleExtendValueChange=n.handleExtendValueChange.bind(n),n.handleTextareaChange=n.handleTextareaChange.bind(n),n.handleTextareaBlur=n.handleTextareaBlur.bind(n),n.handleButtonClick=n.handleButtonClick.bind(n),n.handleEmojiButtonClick=n.handleEmojiButtonClick.bind(n),n}return r(t,e),t.prototype.handleExtendButtonClick=function(e){this.setState(function(t){return{extendTagName:t.extendTagName!==e?e:"",emojiIsShown:!1}})},t.prototype.handleExtendValueChange=function(e){this.setState({extendValue:e})},t.prototype.handleTextareaChange=function(e){this.valueStack.push(e),this.props.update(e),this.setState({value:e})},t.prototype.handleTextareaBlur=function(e,t){this.setState({selectionEnd:t,selectionStart:e})},t.prototype.handleUpload=function(e){return o(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return[4,s.uploadFile(e)];case 1:return t=n.sent(),this.handleButtonClick(this.state.extendTagName,"http://apitest.niconi.cc"+t.content),[2]}})})},t.prototype.handleUndo=function(){var e=this;this.setState(function(t){if(1===e.valueStack.length)return{value:""};var n=e.valueStack.pop();return e.redoStack.push(n),n=e.valueStack[e.valueStack.length-1],e.props.update(n),{value:n}})},t.prototype.handleRedo=function(){var e=this;this.setState(function(t){var n;if(n=e.redoStack.pop())return e.valueStack.push(n),e.props.update(n),{value:n}})},t.prototype.handleButtonClick=function(e,t){var n=this;void 0===t&&(t="");var r=-1!==["video","audio","img","upload"].indexOf(e),o=-1!==["url"].indexOf(e);this.setState(function(i){var a=n.state.value.slice(0,i.selectionStart),s=n.state.value.slice(i.selectionStart,i.selectionEnd),c=n.state.value.slice(i.selectionEnd,n.state.value.length);return s=r?"["+e+"]"+t+"[/"+e+"]":o?"["+e+(t?"="+t:"")+"]"+(s||t)+"[/"+e+"]":"["+e+(t?"="+t:"")+"]"+s+"[/"+e+"]",n.props.update(a+s+c),n.valueStack.push(a+s+c),{selectionStart:a.length,selectionEnd:a.length+s.length,clicked:!0,value:a+s+c}})},t.prototype.handleEmojiButtonClick=function(e){var t=this;this.setState(function(n){var r=t.state.value.slice(0,n.selectionStart),o=e,i=t.state.value.slice(n.selectionEnd,t.state.value.length);return t.props.update(r+o+i),t.valueStack.push(r+o+i),{selectionStart:r.length,selectionEnd:r.length+o.length,clicked:!0,value:r+o+i}})},t.prototype.clearAllShown=function(){this.setState({emojiIsShown:!1,extendTagName:"",extendValue:""})},t.prototype.componentWillReceiveProps=function(e){this.valueStack[this.valueStack.length-1]!==e.value&&(this.valueStack.push(e.value),this.redoStack=[],this.setState({value:e.value}))},t.prototype.componentDidUpdate=function(){this.state.clicked&&!this.state.isPreviewing&&(this.content.focus(),this.content.setSelectionRange(this.state.selectionStart,this.state.selectionEnd),this.setState({clicked:!1}))},t.prototype.componentDidMount=function(){var e=this;window.addEventListener("click",this.clearAllShown),$("#color").spectrum({color:"#000",change:function(t){e.handleButtonClick("color",t.toHexString()),$("#color").spectrum("set","#000000")},showPalette:!0,palette:[["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"],["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"]],replacerClassName:"ubb-color-picker",hideAfterPaletteSelect:!0})},t.prototype.componentWillUnmount=function(){window.removeEventListener("click",this.clearAllShown)},t.prototype.render=function(){var e=this,t=this.option.height,n=["",1,2,3,4,5,6,7],r={animal:["001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016"].map(function(t){return a.createElement("img",{src:"/images/mahjong/animal2017/"+t+".png",onClick:function(){e.handleEmojiButtonClick("[a:"+t+"]")}})}),carton:["003.png","018.gif","019.png","046.png","049.gif","059.png","096.gif","134.png","189.png","217.png"].map(function(t){return a.createElement("img",{src:"/images/mahjong/carton2017/"+t,onClick:function(){e.handleEmojiButtonClick("[c:"+t.slice(0,3)+"]")}})}),face:new Array(208).fill(0).map(function(e,t){return t<9?"00"+(t+1):t<99?"0"+(t+1):""+(t+1)}).map(function(e,t){return-1!==[4,9,56,61,62,87,115,120,137,168,169,175,206].indexOf(t+1)?e+".gif":e+".png"}).map(function(t){return a.createElement("img",{src:"/images/mahjong/face2017/"+t,onClick:function(){e.handleEmojiButtonClick("[f:"+t.slice(0,3)+"]")}})})},o={em:new Array(92).fill(0).map(function(e,t){return t<10?"0"+t:t<43||70<t&&t<92?""+t:void 0}).map(function(t){return t?a.createElement("img",{src:"http://www.cc98.org/emot/emot"+t+".gif",onClick:function(){e.handleEmojiButtonClick("[em"+t+"]")}}):null}),ac:new Array(149).fill(0).map(function(e,t){return t<9?"0"+(t+1):t<54?""+(t+1):t<94?""+(t+947):""+(t+1907)}).map(function(t){return a.createElement("img",{src:"/images/ac/"+t+".png",onClick:function(){e.handleEmojiButtonClick("[ac"+t+"]")}})}),mj:r.animal.concat(r.carton,r.face)};return a.createElement("div",{className:"ubb-editor",style:{maxHeight:t+6.125+"rem"}},a.createElement("div",{className:"editor-buttons"},a.createElement("div",{style:{height:"2rem",display:"flex",transitionDuration:".5s",overflow:"hidden",width:this.state.isPreviewing?"0rem":"50rem"}},a.createElement("div",{className:"editor-buttons-styles"},a.createElement("button",{className:"fa-bold",type:"button",title:"加粗",onClick:function(){e.handleButtonClick("b")}}),a.createElement("button",{className:"fa-italic",type:"button",title:"斜体",onClick:function(){e.handleButtonClick("i")}}),a.createElement("button",{className:"fa-underline",type:"button",title:"下划线",onClick:function(){e.handleButtonClick("u")}}),a.createElement("button",{className:"fa-strikethrough",type:"button",title:"删除线",onClick:function(){e.handleButtonClick("del")}}),a.createElement("button",{className:"fa-align-left",type:"button",title:"左对齐",onClick:function(){e.handleButtonClick("align","left")}}),a.createElement("button",{className:"fa-align-center",type:"button",title:"居中",onClick:function(){e.handleButtonClick("align","center")}}),a.createElement("button",{className:"fa-align-right",type:"button",title:"右对齐",onClick:function(){e.handleButtonClick("align","right")}}),a.createElement("button",{className:"fa-eye-slash",type:"button",title:"回复后可见",onClick:function(){e.handleButtonClick("replyview")}})),a.createElement("div",{className:"editor-buttons-selects"},a.createElement("p",{className:"fa-text-height"}),a.createElement("select",{onChange:function(t){e.handleButtonClick("size",t.target.value),t.target.value=0},onClick:function(){e.clearAllShown()},value:0},n.map(function(e,t){return a.createElement("option",{value:t,disabled:0===t,style:{display:0===t?"none":""}},e)})),a.createElement("p",{className:"fa-eyedropper"}),a.createElement("input",{id:"color"})),a.createElement("div",{className:"editor-buttons-extends"},a.createElement("button",{className:"fa-smile-o",type:"button",title:"插入表情",onClick:function(t){t.stopPropagation(),e.setState(function(e){return{emojiIsShown:!e.emojiIsShown,extendTagName:"",extendValue:""}})}}),a.createElement("button",{className:"fa-link",type:"button",title:"插入url",onClick:function(t){t.stopPropagation(),e.handleExtendButtonClick("url")}}),a.createElement("button",{className:"fa-picture-o",type:"button",title:"插入图片",onClick:function(t){t.stopPropagation(),e.handleExtendButtonClick("img")}}),a.createElement("button",{className:"fa-film",type:"button",title:"插入视频",onClick:function(t){t.stopPropagation(),e.handleExtendButtonClick("video")}}),a.createElement("button",{className:"fa-music",type:"button",title:"插入音频",onClick:function(t){t.stopPropagation(),e.handleExtendButtonClick("audio")}}),a.createElement("label",{className:"fa-file",htmlFor:"upload",title:"上传文件",onClick:function(t){t.stopPropagation(),e.setState({extendTagName:"upload"})}}))),a.createElement("div",{style:{flexGrow:1}}),a.createElement("button",{className:"fa-undo",type:"button",title:"撤销",onClick:function(){e.handleUndo()}}),a.createElement("button",{className:"fa-repeat",type:"button",title:"重做",onClick:function(){e.handleRedo()}}),a.createElement("button",{type:"button",title:"切换预览",onClick:function(){e.setState(function(e){return{isPreviewing:!e.isPreviewing,clicked:!0}})},className:"fa-window-maximize"})),a.createElement("div",{className:"ubb-extend",style:{height:this.state.extendTagName&&"upload"!==this.state.extendTagName?"2rem":"0rem"}},a.createElement("input",{type:"text",placeholder:"在此输入地址",value:this.state.extendValue,onChange:function(t){e.handleExtendValueChange(t.target.value)},onClick:function(e){e.stopPropagation()},ref:function(t){e.input=t}}),"img"===this.state.extendTagName?a.createElement("label",{onClick:function(e){e.stopPropagation()},className:"fa-upload",htmlFor:"upload",title:"上传本地图片"}):null,a.createElement("button",{className:"fa-check",type:"button",onClick:function(t){t.stopPropagation(),e.handleButtonClick(e.state.extendTagName,e.state.extendValue)}}),a.createElement("button",{className:"fa-remove",type:"button",onClick:function(){e.setState({clicked:!0})}}),a.createElement("input",{type:"file",id:"upload",accept:"img"===this.state.extendTagName?"image/*":"",style:{display:"none"},onClick:function(e){e.stopPropagation()},onChange:function(t){t.target.files[0]&&(e.handleUpload(t.target.files[0]),t.target.value="")}})),a.createElement("div",{className:"ubb-content"},this.state.isPreviewing?a.createElement("div",{className:"ubb-editor-preview"},a.createElement(c.UbbContainer,{code:this.props.value})):a.createElement("textarea",{value:this.state.value,onChange:function(t){e.handleTextareaChange(t.target.value)},onInput:function(t){e.redoStack=[]},onFocus:function(){e.clearAllShown()},onBlur:function(t){var n=t.target;e.handleTextareaBlur(n.selectionStart,n.selectionEnd)},onKeyDown:function(t){t.ctrlKey&&"z"===t.key?(t.preventDefault(),e.handleUndo()):t.ctrlKey&&"y"===t.key&&(t.preventDefault(),e.handleRedo())},ref:function(t){e.content=t},style:{height:this.state.extendTagName&&"upload"!==this.state.extendTagName?t+"rem":t+2+"rem"},spellCheck:!1})),a.createElement("div",{className:"ubb-emoji",style:this.state.emojiIsShown?{height:"22rem",borderWidth:"1px",top:"-"+(t+4)+"rem"}:{height:"0rem",top:"-"+(t+4)+"rem"}},a.createElement("div",{className:"ubb-emoji-buttons"},a.createElement("button",{type:"button",className:"ac"===this.state.emojiType?"ubb-emoji-button-active":"ubb-emoji-button",onClick:function(t){t.stopPropagation(),e.setState({emojiType:"ac"})}},"AC娘"),a.createElement("button",{type:"button",className:"mj"===this.state.emojiType?"ubb-emoji-button-active":"ubb-emoji-button",onClick:function(t){t.stopPropagation(),e.setState({emojiType:"mj"})}},"麻将脸"),a.createElement("button",{type:"button",className:"em"===this.state.emojiType?"ubb-emoji-button-active":"ubb-emoji-button",onClick:function(t){t.stopPropagation(),e.setState({emojiType:"em"})}},"经典")),a.createElement("div",{className:"ubb-emoji-content ubb-emoji-content-"+this.state.emojiType},o[this.state.emojiType])))},t}(a.Component));t.UbbEditor=l},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(118),a=n(170),s=n(64),c=n(85),u=function(){function e(e,t){void 0===t&&(t={}),this.features={},this.logger=c.LoggerFactory.createLogger(t.logging),this.baseUrl=this.resolveUrl(e),t=t||{},this.httpClient=t.httpClient||new a.HttpClient,this.connectionState=2,this.options=t}return e.prototype.start=function(){return r(this,void 0,void 0,function(){return o(this,function(e){return 2!==this.connectionState?[2,Promise.reject(new Error("Cannot start a connection that is not in the 'Disconnected' state."))]:(this.connectionState=0,this.startPromise=this.startInternal(),[2,this.startPromise])})})},e.prototype.startInternal=function(){return r(this,void 0,void 0,function(){var e,t,n,r,a,c,u=this;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,6,,7]),this.options.transport!==i.TransportType.WebSockets?[3,1]:(this.url=this.baseUrl,this.transport=this.createTransport(this.options.transport,[i.TransportType[i.TransportType.WebSockets]]),[3,4]);case 1:return e=new Headers,this.options.jwtBearer&&e.append("Authorization",""+this.options.jwtBearer()),[4,fetch(this.baseUrl,{method:"OPTIONS",headers:e})];case 2:return t=o.sent(),console.log("negotiatePayloadafter"),console.log(t),[4,t.json()];case 3:if(n=o.sent(),this.connectionId=n.connectionId,2==this.connectionState)return[2];this.connectionId&&(this.url=this.baseUrl+(-1===this.baseUrl.indexOf("?")?"?":"&")+"id="+this.connectionId,this.transport=this.createTransport(this.options.transport,n.availableTransports)),o.label=4;case 4:return this.transport.onreceive=this.onreceive,this.transport.onclose=function(e){return u.stopConnection(!0,e)},r=2===this.features.transferMode?2:1,a=this.features,[4,this.transport.connect(this.url,r,this)];case 5:return a.transferMode=o.sent(),this.changeState(0,1),[3,7];case 6:throw c=o.sent(),this.logger.log(s.LogLevel.Error,"Failed to start the connection. "+c),this.connectionState=2,this.transport=null,c;case 7:return[2]}})})},e.prototype.createTransport=function(e,t){if((null===e||void 0===e)&&t.length>0&&(e=i.TransportType[t[0]]),e===i.TransportType.WebSockets&&t.indexOf(i.TransportType[e])>=0)return new i.WebSocketTransport(this.options.jwtBearer,this.logger);if(e===i.TransportType.ServerSentEvents&&t.indexOf(i.TransportType[e])>=0)return new i.ServerSentEventsTransport(this.httpClient,this.options.jwtBearer,this.logger);if(e===i.TransportType.LongPolling&&t.indexOf(i.TransportType[e])>=0)return new i.LongPollingTransport(this.httpClient,this.options.jwtBearer,this.logger);if(this.isITransport(e))return e;throw new Error("No available transports found.")},e.prototype.isITransport=function(e){return"object"==typeof e&&"connect"in e},e.prototype.changeState=function(e,t){return this.connectionState==e&&(this.connectionState=t,!0)},e.prototype.send=function(e){if(1!=this.connectionState)throw new Error("Cannot send data if the connection is not in the 'Connected' State");return this.transport.send(e)},e.prototype.stop=function(e){return r(this,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:t=this.connectionState,this.connectionState=2,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.startPromise];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),[3,4];case 4:return this.stopConnection(1==t,e),[2]}})})},e.prototype.stopConnection=function(e,t){this.transport&&(this.transport.stop(),this.transport=null),this.connectionState=2,e&&this.onclose&&this.onclose(t)},e.prototype.resolveUrl=function(e){if(0===e.lastIndexOf("https://",0)||0===e.lastIndexOf("http://",0))return e;if("undefined"==typeof window||!window||!window.document)throw new Error("Cannot resolve '"+e+"'.");var t=window.document.createElement("a");t.href=e;var n=t.protocol&&":"!==t.protocol?t.protocol+"//"+t.host:window.document.location.protocol+"//"+(t.host||window.document.location.host);e&&"/"==e[0]||(e="/"+e);var r=n+e;return this.logger.log(s.LogLevel.Information,"Normalizing '"+e+"' to '"+r+"'"),r},e.prototype.resolveNegotiateUrl=function(e){var t=e.indexOf("?"),n=e.substring(0,-1===t?e.length:t);return"/"!==n[n.length-1]&&(n+="/"),n+=-1===t?"":e.substring(t)},e}();t.HttpConnection=u},function(e,t,n){"use strict";function r(e,t,n,r){return o(this,void 0,void 0,function(){var o;return i(this,function(i){switch(i.label){case 0:return n&&(o=new Map,o.set("Authorization","Bearer "+n())),[4,e.post(t,r,o)];case 1:return i.sent(),[2]}})})}var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(169),s=n(64);!function(e){e[e.WebSockets=0]="WebSockets",e[e.ServerSentEvents=1]="ServerSentEvents",e[e.LongPolling=2]="LongPolling"}(t.TransportType||(t.TransportType={}));var c=function(){function e(e,t){this.logger=t,this.jwtBearer=e}return e.prototype.connect=function(e,t,n){var r=this;return new Promise(function(n,o){if(e=e.replace(/^http/,"ws"),r.jwtBearer){var i=r.jwtBearer();e+=(e.indexOf("?")<0?"?":"&")+"Authorization="+i}var a=new WebSocket(e);2==t&&(a.binaryType="arraybuffer"),a.onopen=function(o){r.logger.log(s.LogLevel.Information,"WebSocket connected to "+e),r.webSocket=a,n(t)},a.onerror=function(e){o()},a.onmessage=function(e){r.logger.log(s.LogLevel.Trace,"(WebSockets transport) data received: "+e.data),r.onreceive&&r.onreceive(e.data)},a.onclose=function(e){r.onclose&&r.webSocket&&(!1===e.wasClean||1e3!==e.code?r.onclose(new Error("Websocket closed with status code: "+e.code+" ("+e.reason+")")):r.onclose())}})},e.prototype.send=function(e){return this.webSocket&&this.webSocket.readyState===WebSocket.OPEN?(this.webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")},e.prototype.stop=function(){this.webSocket&&(this.webSocket.close(),this.webSocket=null)},e}();t.WebSocketTransport=c;var u=function(){function e(e,t,n){this.httpClient=e,this.jwtBearer=t,this.logger=n}return e.prototype.connect=function(e,t,n){var r=this;return"undefined"==typeof EventSource&&Promise.reject("EventSource not supported by the browser."),this.url=e,new Promise(function(t,n){if(r.jwtBearer){var o=r.jwtBearer();e+=(e.indexOf("?")<0?"?":"&")+"Authorization="+o}var i=new EventSource(e);try{i.onmessage=function(e){if(r.onreceive)try{r.logger.log(s.LogLevel.Trace,"(SSE transport) data received: "+e.data),r.onreceive(e.data)}catch(e){return void(r.onclose&&r.onclose(e))}},i.onerror=function(e){n(),r.eventSource&&r.onclose&&r.onclose(new Error(e.message||"Error occurred"))},i.onopen=function(){r.logger.log(s.LogLevel.Information,"SSE connected to "+r.url),r.eventSource=i,t(1)}}catch(e){return Promise.reject(e)}})},e.prototype.send=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return[2,r(this.httpClient,this.url,this.jwtBearer,e)]})})},e.prototype.stop=function(){this.eventSource&&(this.eventSource.close(),this.eventSource=null)},e}();t.ServerSentEventsTransport=u;var l=function(){function e(e,t,n){this.httpClient=e,this.jwtBearer=t,this.logger=n}return e.prototype.connect=function(e,t,n){if(this.url=e,this.shouldPoll=!0,n.features.inherentKeepAlive=!0,2===t&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");return this.poll(this.url,t),Promise.resolve(t)},e.prototype.poll=function(e,t){var n=this;if(this.shouldPoll){var r=new XMLHttpRequest;r.onload=function(){if(200==r.status){if(n.onreceive)try{var o=1===t?r.responseText:r.response;o?(n.logger.log(s.LogLevel.Trace,"(LongPolling transport) data received: "+o),n.onreceive(o)):n.logger.log(s.LogLevel.Information,"(LongPolling transport) timed out")}catch(e){return void(n.onclose&&n.onclose(e))}n.poll(e,t)}else 204==n.pollXhr.status?n.onclose&&n.onclose():n.onclose&&n.onclose(new a.HttpError(r.statusText,r.status))},r.onerror=function(){n.onclose&&n.onclose(new Error("Sending HTTP request failed."))},r.ontimeout=function(){n.poll(e,t)},this.pollXhr=r,this.pollXhr.open("GET",e+"&_="+Date.now(),!0),this.jwtBearer&&this.pollXhr.setRequestHeader("Authorization","Bearer "+this.jwtBearer()),2===t&&(this.pollXhr.responseType="arraybuffer"),this.pollXhr.timeout=12e4,this.pollXhr.send()}},e.prototype.send=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return[2,r(this.httpClient,this.url,this.jwtBearer,e)]})})},e.prototype.stop=function(){this.shouldPoll=!1,this.pollXhr&&(this.pollXhr.abort(),this.pollXhr=null)},e}();t.LongPollingTransport=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){function t(e){return""+e+r}function n(e){if(e[e.length-1]!=r)throw new Error("Message is incomplete.");var t=e.split(r);return t.pop(),t}var r=String.fromCharCode(30);e.write=t,e.parse=n}(t.TextMessageFormat||(t.TextMessageFormat={}));!function(e){function t(e){var t=e.byteLength||e.length,n=[];do{var r=127&t;t>>=7,t>0&&(r|=128),n.push(r)}while(t>0);t=e.byteLength||e.length;var o=new Uint8Array(n.length+t);return o.set(n,0),o.set(e,n.length),o.buffer}function n(e){for(var t=[],n=new Uint8Array(e),r=[0,7,14,21,28],o=0;o<e.byteLength;){var i=0,a=0,s=void 0;do{s=n[o+i],a|=(127&s)<<r[i],i++}while(i<Math.min(5,e.byteLength-o)&&0!=(128&s));if(0!=(128&s)&&i<5)throw new Error("Cannot read message size.");if(5===i&&s>7)throw new Error("Messages bigger than 2GB are not supported.");if(!(n.byteLength>=o+i+a))throw new Error("Incomplete message.");t.push(n.slice?n.slice(o+i,o+i+a):n.subarray(o+i,o+i+a)),o=o+i+a}return t}e.write=t,e.parse=n}(t.BinaryMessageFormat||(t.BinaryMessageFormat={}))},function(e,t,n){(function(e,r){function o(e,n){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(n)?r.showHidden=n:n&&t._extend(r,n),E(r.showHidden)&&(r.showHidden=!1),E(r.depth)&&(r.depth=2),E(r.colors)&&(r.colors=!1),E(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),c(r,e,r.depth)}function i(e,t){var n=o.styles[t];return n?"["+o.colors[n][0]+"m"+e+"["+o.colors[n][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,n,r){if(e.customInspect&&n&&N(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return b(o)||(o=c(e,o,r)),o}var i=u(e,n);if(i)return i;var a=Object.keys(n),m=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),C(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(n);if(0===a.length){if(N(n)){var g=n.name?": "+n.name:"";return e.stylize("[Function"+g+"]","special")}if(_(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(I(n))return e.stylize(Date.prototype.toString.call(n),"date");if(C(n))return l(n)}var v="",y=!1,w=["{","}"];if(d(n)&&(y=!0,w=["[","]"]),N(n)){v=" [Function"+(n.name?": "+n.name:"")+"]"}if(_(n)&&(v=" "+RegExp.prototype.toString.call(n)),I(n)&&(v=" "+Date.prototype.toUTCString.call(n)),C(n)&&(v=" "+l(n)),0===a.length&&(!y||0==n.length))return w[0]+v+w[1];if(r<0)return _(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var E;return E=y?p(e,n,r,m,a):a.map(function(t){return f(e,n,r,m,t,y)}),e.seen.pop(),h(E,v,w)}function u(e,t){if(E(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,o){for(var i=[],a=0,s=t.length;a<s;++a)k(t,String(a))?i.push(f(e,t,n,r,String(a),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(f(e,t,n,r,o,!0))}),i}function f(e,t,n,r,o,i){var a,s,u;if(u=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),k(r,o)||(a="["+o+"]"),s||(e.seen.indexOf(u.value)<0?(s=g(n)?c(e,u.value,null):c(e,u.value,n-1),s.indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),E(a)){if(i&&o.match(/^\d+$/))return s;a=JSON.stringify(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function h(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function E(e){return void 0===e}function _(e){return S(e)&&"[object RegExp]"===T(e)}function S(e){return"object"==typeof e&&null!==e}function I(e){return S(e)&&"[object Date]"===T(e)}function C(e){return S(e)&&("[object Error]"===T(e)||e instanceof Error)}function N(e){return"function"==typeof e}function x(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function T(e){return Object.prototype.toString.call(e)}function P(e){return e<10?"0"+e.toString(10):e.toString(10)}function O(){var e=new Date,t=[P(e.getHours()),P(e.getMinutes()),P(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var j=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,a=String(e).replace(j,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<i;s=r[++n])g(s)||!S(s)?a+=" "+s:a+=" "+o(s);return a},t.deprecate=function(n,o){function i(){if(!a){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?console.trace(o):console.error(o),a=!0}return n.apply(this,arguments)}if(E(e.process))return function(){return t.deprecate(n,o).apply(this,arguments)};if(!0===r.noDeprecation)return n;var a=!1;return i};var M,U={};t.debuglog=function(e){if(E(M)&&(M=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!U[e])if(new RegExp("\\b"+e+"\\b","i").test(M)){var n=r.pid;U[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else U[e]=function(){};return U[e]},t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=m,t.isNull=g,t.isNullOrUndefined=v,t.isNumber=y,t.isString=b,t.isSymbol=w,t.isUndefined=E,t.isRegExp=_,t.isObject=S,t.isDate=I,t.isError=C,t.isFunction=N,t.isPrimitive=x,t.isBuffer=n(472);var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",O(),t.format.apply(t,arguments))},t.inherits=n(473),t._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,n(51),n(65))},function(e,t,n){e.exports=!n(10)&&!n(6)(function(){return 7!=Object.defineProperty(n(89)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){t.f=n(8)},function(e,t,n){var r=n(16),o=n(20),i=n(68)(!1),a=n(91)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~i(u,n)||u.push(n));return u}},function(e,t,n){var r=n(11),o=n(3),i=n(43);e.exports=n(10)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),s=a.length,c=0;s>c;)r.f(e,n=a[c++],t[n]);return e}},function(e,t,n){var r=n(20),o=n(46).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?s(e):o(r(e))}},function(e,t,n){"use strict";var r=n(43),o=n(69),i=n(61),a=n(13),s=n(60),c=Object.assign;e.exports=!c||n(6)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=a(e),c=arguments.length,u=1,l=o.f,p=i.f;c>u;)for(var f,h=s(arguments[u++]),d=l?r(h).concat(l(h)):r(h),m=d.length,g=0;m>g;)p.call(h,f=d[g++])&&(n[f]=h[f]);return n}:c},function(e,t,n){"use strict";var r=n(14),o=n(7),i=n(128),a=[].slice,s={},c=function(e,t,n){if(!(t in s)){for(var r=[],o=0;o<t;o++)r[o]="a["+o+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?c(t,r.length,r):i(t,r,e)};return o(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(4).parseInt,o=n(54).trim,i=n(95),a=/^[-+]?0[xX]/;e.exports=8!==r(i+"08")||22!==r(i+"0x16")?function(e,t){var n=o(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t,n){var r=n(4).parseFloat,o=n(54).trim;e.exports=1/r(n(95)+"-0")!=-1/0?function(e){var t=o(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){var r=n(24);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){var r=n(7),o=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&o(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){var r=n(98),o=Math.pow,i=o(2,-52),a=o(2,-23),s=o(2,127)*(2-a),c=o(2,-126),u=function(e){return e+1/i-1/i};e.exports=Math.fround||function(e){var t,n,o=Math.abs(e),l=r(e);return o<c?l*u(o/c/a)*c*a:(t=(1+a/i)*o,n=t-(t-o),n>s||n!=n?l*(1/0):l*n)}},function(e,t,n){var r=n(3);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},function(e,t,n){var r=n(14),o=n(13),i=n(60),a=n(12);e.exports=function(e,t,n,s,c){r(t);var u=o(e),l=i(u),p=a(u.length),f=c?p-1:0,h=c?-1:1;if(n<2)for(;;){if(f in l){s=l[f],f+=h;break}if(f+=h,c?f<0:p<=f)throw TypeError("Reduce of empty array with no initial value")}for(;c?f>=0:p>f;f+=h)f in l&&(s=t(s,l[f],f,u));return s}},function(e,t,n){"use strict";var r=n(13),o=n(44),i=n(12);e.exports=[].copyWithin||function(e,t){var n=r(this),a=i(n.length),s=o(e,a),c=o(t,a),u=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===u?a:o(u,a))-c,a-s),p=1;for(c<s&&s<c+l&&(p=-1,c+=l-1,s+=l-1);l-- >0;)c in n?n[s]=n[c]:delete n[s],s+=p,c+=p;return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){n(10)&&"g"!=/./g.flags&&n(11).f(RegExp.prototype,"flags",{configurable:!0,get:n(73)})},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(3),o=n(7),i=n(113);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(143),o=n(56);e.exports=n(76)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(o(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(o(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(11).f,o=n(45),i=n(50),a=n(23),s=n(48),c=n(49),u=n(101),l=n(138),p=n(47),f=n(10),h=n(36).fastKey,d=n(56),m=f?"_s":"size",g=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var l=e(function(e,r){s(e,l,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=r&&c(r,n,e[u],e)});return i(l.prototype,{clear:function(){for(var e=d(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=d(this,t),r=g(n,e);if(r){var o=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=o),o&&(o.p=i),n._f==r&&(n._f=o),n._l==r&&(n._l=i),n[m]--}return!!r},forEach:function(e){d(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!g(d(this,t),e)}}),f&&r(l.prototype,"size",{get:function(){return d(this,t)[m]}}),l},def:function(e,t,n){var r,o,i=g(e,t);return i?i.v=n:(e._l=i={i:o=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=i),r&&(r.n=i),e[m]++,"F"!==o&&(e._i[o]=i)),e},getEntry:g,setStrong:function(e,t,n){u(e,t,function(e,n){this._t=d(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?l(0,n.k):"values"==t?l(0,n.v):l(0,[n.k,n.v]):(e._t=void 0,l(1))},n?"entries":"values",!n,!0),p(t)}}},function(e,t,n){"use strict";var r=n(143),o=n(56);e.exports=n(76)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(o(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r,o=n(31)(0),i=n(18),a=n(36),s=n(126),c=n(146),u=n(7),l=n(6),p=n(56),f=a.getWeak,h=Object.isExtensible,d=c.ufstore,m={},g=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(e){if(u(e)){var t=f(e);return!0===t?d(p(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(p(this,"WeakMap"),e,t)}},y=e.exports=n(76)("WeakMap",g,v,c,!0,!0);l(function(){return 7!=(new y).set((Object.freeze||Object)(m),7).get(m)})&&(r=c.getConstructor(g,"WeakMap"),s(r.prototype,v),a.NEED=!0,o(["delete","has","get","set"],function(e){var t=y.prototype,n=t[e];i(t,e,function(t,o){if(u(t)&&!h(t)){this._f||(this._f=new r);var i=this._f[e](t,o);return"set"==e?this:i}return n.call(this,t,o)})}))},function(e,t,n){"use strict";var r=n(50),o=n(36).getWeak,i=n(3),a=n(7),s=n(48),c=n(49),u=n(31),l=n(16),p=n(56),f=u(5),h=u(6),d=0,m=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},v=function(e,t){return f(e.a,function(e){return e[0]===t})};g.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var n=v(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=h(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,i){var u=e(function(e,r){s(e,u,t,"_i"),e._t=t,e._i=d++,e._l=void 0,void 0!=r&&c(r,n,e[i],e)});return r(u.prototype,{delete:function(e){if(!a(e))return!1;var n=o(e);return!0===n?m(p(this,t)).delete(e):n&&l(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=o(e);return!0===n?m(p(this,t)).has(e):n&&l(n,this._i)}}),u},def:function(e,t,n){var r=o(i(t),!0);return!0===r?m(e).set(t,n):r[e._i]=n,e},ufstore:m}},function(e,t,n){var r=n(29),o=n(12);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=o(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var r=n(46),o=n(69),i=n(3),a=n(4).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(i(e)),n=o.f;return n?t.concat(n(e)):t}},function(e,t,n){"use strict";function r(e,t,n,u,l,p,f,h){for(var d,m,g=l,v=0,y=!!f&&s(f,h,3);v<u;){if(v in n){if(d=y?y(n[v],v,t):n[v],m=!1,i(d)&&(m=d[c],m=void 0!==m?!!m:o(d)),m&&p>0)g=r(e,t,d,a(d.length),g,p-1)-1;else{if(g>=9007199254740991)throw TypeError();e[g]=d}g++}v++}return g}var o=n(70),i=n(7),a=n(12),s=n(23),c=n(8)("isConcatSpreadable");e.exports=r},function(e,t,n){var r=n(12),o=n(97),i=n(28);e.exports=function(e,t,n,a){var s=String(i(e)),c=s.length,u=void 0===n?" ":String(n),l=r(t);if(l<=c||""==u)return s;var p=l-c,f=o.call(u,Math.ceil(p/u.length));return f.length>p&&(f=f.slice(0,p)),a?f+s:s+f}},function(e,t,n){var r=n(43),o=n(20),i=n(61).f;e.exports=function(e){return function(t){for(var n,a=o(t),s=r(a),c=s.length,u=0,l=[];c>u;)i.call(a,n=s[u++])&&l.push(e?[n,a[n]]:a[n]);return l}}},function(e,t,n){var r=n(62),o=n(153);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return o(this)}}},function(e,t,n){var r=n(49);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t){e.exports=Math.scale||function(e,t,n,r,o){return 0===arguments.length||e!=e||t!=t||n!=n||r!=r||o!=o?NaN:e===1/0||e===-1/0?e:(e-t)*(o-r)/(n-t)+r}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(15),u=n(9),l=n(57),p=n(63),f=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),Object.defineProperty(t.prototype,"match",{get:function(){return this.props.match},enumerable:!0,configurable:!0}),t}(a.Component);t.RouteComponent=f;var h=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={boardId:null,boardInfo:{bigPaper:"",masters:[],name:""},page:1,fetchState:"ok"},r}return r(t,e),t.prototype.componentWillReceiveProps=function(e){return o(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return[4,s.getBoardInfo(e.match.params.boardId)];case 1:return t=n.sent(),this.setState({boardInfo:t,boardId:this.match.params.boardId}),[2]}})})},t.prototype.componentWillMount=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,s.getBoardInfo(this.match.params.boardId)];case 1:return e=t.sent(),this.setState({boardInfo:e,boardId:this.match.params.boardId,fetchState:e}),[2]}})})},t.prototype.render=function(){switch(this.state.fetchState){case"ok":return a.createElement("div",null);case"not found":return a.createElement(p.NotFoundTopic,null);case"unauthorized":return a.createElement(p.UnauthorizedBoard,null);case"server error":return a.createElement(p.ServerError,null)}var e;return e=this.state.boardInfo.bigPaper?a.createElement(g,{bigPaper:this.state.boardInfo.bigPaper}):null,a.createElement("div",{id:"listRoot"},a.createElement(d,{boardId:this.match.params.boardId,boardInfo:this.state.boardInfo}),a.createElement(m,{key:this.state.page,boardId:this.match.params.boardId}),e,a.createElement(u.Switch,null,a.createElement(u.Route,{exact:!0,path:"/list/:boardId/:page?",component:E}),a.createElement(u.Route,{exact:!0,path:"/list/:boardId/best/:page?",component:_}),a.createElement(u.Route,{exact:!0,path:"/list/:boardId/save/:page?",component:S})))},t}(f);t.List=h;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e="/list/"+this.props.boardId;return a.createElement("div",{className:"row",style:{alignItems:"baseline",width:"100% ",justifyContent:"flex-start",color:"grey",fontSize:"0.75rem",marginBottom:"1rem"}},a.createElement("a",{style:{color:"grey",fontSize:"1rem",marginRight:"0.5rem"},href:" / "},"首页"),a.createElement("i",{className:"fa fa-chevron-right"}),a.createElement("a",{style:{color:"grey",fontSize:"1rem",marginLeft:"0.5rem"},href:e},this.props.boardInfo.name))},t}(a.Component);t.Category=d;var m=function(e){function t(t,n){var r=e.call(this,t,n)||this,o=s.isFollowThisBoard(r.props.boardId);return r.follow=r.follow.bind(r),r.unfollow=r.unfollow.bind(r),r.state={imgUrl:"/images/ListImg.jpg",listName:"学术信息",todayTopics:210,totalTopics:12e3,adsUrl:"/images/ads.jpg",listManager:[],isAnomynous:!1,isEncrypted:!1,isHidden:!1,isLocked:!1,isFollow:o},r}return r(t,e),t.prototype.follow=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,s.followBoard(this.props.boardId)];case 1:return e.sent(),this.setState({isFollow:!0}),[2]}})})},t.prototype.unfollow=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,s.unfollowBoard(this.props.boardId)];case 1:return e.sent(),this.setState({isFollow:!1}),[2]}})})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,s.getBoardInfo(this.props.boardId)];case 1:return e=t.sent(),this.setState({listName:e.name,todayTopics:e.todayCount,totalTopics:e.topicCount,listManager:e.boardMasters}),[2]}})})},t.prototype.componentWillRecieveProps=function(e){return o(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return[4,s.getBoardInfo(e.boardId)];case 1:return t=n.sent(),this.setState({listName:t.name,todayTopics:t.todayCount,totalTopics:t.topicCount,listManager:t.boardMasters}),[2]}})})},t.prototype.generateMasters=function(e){var t=e.toString(),n=encodeURIComponent(e.toString()),r="/user/name/"+n;return a.createElement("div",{style:{marginRight:"10px"}},a.createElement("a",{href:r},t))},t.prototype.render=function(){return a.createElement("div",{className:"column",style:{width:"100%"}},a.createElement("div",{className:"row",style:{flexDirection:"row",justifyContent:"space-between"}},a.createElement("div",{style:{flexgrow:"1",flexDirection:"row",display:"flex"}},a.createElement("div",{id:"ListImg"},a.createElement("img",{src:this.state.imgUrl})),a.createElement("div",{className:"column",style:{marginTop:"1.25rem",marginLeft:"0.625rem"}},a.createElement("div",{className:"row",style:{marginTop:"0.625rem"}},a.createElement("div",null,"今日主题"),a.createElement("div",{style:{marginLeft:"0.625rem"}},this.state.todayTopics)),a.createElement("div",{className:"row",style:{marginTop:"0.625rem"}},a.createElement("div",null,"总主题"),a.createElement("div",{style:{marginLeft:"1.25rem"}},this.state.totalTopics)))),a.createElement("div",{className:"column",style:{flexgrow:"0"}},a.createElement("div",{id:"like"},a.createElement("button",{onClick:this.state.isFollow?this.unfollow:this.follow,className:"followBoard"},this.state.isFollow?"取消关注":"关注版面"),"  "),a.createElement("div",null,a.createElement("img",{src:this.state.adsUrl,style:{width:"15.625rem",height:"3.75rem"}})))),a.createElement("div",{className:"row",style:{marginTop:"0.3125rem"}},a.createElement("span",null,"版主 : "),a.createElement("div",{className:"row",style:{marginLeft:"0.3125rem"}},this.state.listManager.map(this.generateMasters))))},t}(f);t.ListHead=m;var g=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={notice:"1. 请大家首先阅读心灵之约版规再发帖，如有违规不接受pm卖萌求情；2. 诚征新版主，请去论坛事务版搜之前的版面负责人申请帖并遵循格式发帖，如有不明可以站短站务组组长咨询。3. 不要留联系方式！不要留联系方式！不要留联系方式！重要的事说三遍！，留任何联系方式tp1000天。 4. 更新了版规，增加了tp规则：成功诱导对方留联系方式的，tp1000天；修订了锁沉规则：有意义言之有物、希望继续讨论的长篇读后感将给予保留。5. 请理性讨论，不要人身攻击。违者tp1天起，累犯或严重的，上不封顶。"},r}return r(t,e),t.prototype.render=function(){return a.createElement("div",{className:"notice",style:{marginTop:"0.625rem"}},a.createElement("div",{style:{backgroundColor:"#3399FE"}},a.createElement("div",{style:{marginLeft:"0.9375rem",marginTop:"0.5rem",marginBottom:"0.5rem",fontSize:"1rem",color:"#FFFFFF"}},"本版公告")),a.createElement("div",{className:"substance"},a.createElement(c.UbbContainer,{code:this.props.bigPaper})))},t}(f);t.ListNotice=g;var v=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={pager:[1,2,3,4,5]},r}return r(t,e),t.prototype.componentWillReceiveProps=function(e){return o(this,void 0,void 0,function(){var t;return i(this,function(n){return t=s.getPager(e.page,e.totalPage),this.setState({pager:t}),[2]})})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){return e=s.getPager(this.props.page,this.props.totalPage),this.setState({pager:e}),[2]})})},t.prototype.render=function(){var e="/createTopic/"+this.props.boardid;return a.createElement("div",{className:"row",style:{width:"100%",marginLeft:"0.3125rem",marginRight:"0.3125rem",marginTop:"0.9375rem",justifyContent:"space-between",alignItems:"flex-end"}},a.createElement("div",{style:{marginBottom:"1.25rem"}},a.createElement(u.Link,{className:"button orange",to:e},"发主题"),a.createElement("button",{className:"button green",style:{marginLeft:"1.25rem"}},"发投票")),a.createElement(l.Pager,{page:this.props.page,url:this.props.url,totalPage:this.props.totalPage}))},t}(a.Component);t.ListButtonAndPager=v;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.generateTagLayer=function(e){return a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",width:"100%",marginLeft:"0.3125rem",marginRight:"0.3125rem",borderTop:"dashed #EAEAEA thin",marginTop:"1.5625rem",marginBottom:"25px"}},a.createElement("div",{className:"row"},"  ",a.createElement("button",{id:"tagButton"},"全部"),e.tags.map(this.generateTagButton)))},t.prototype.generateTagButton=function(e){return a.createElement("button",{className:"chooseTag"},e,a.createElement("span",{className:"tagNumber"}))},t.prototype.render=function(){return a.createElement("div",{className:"column",style:{width:"100%"}},this.props.tags.map(this.generateTagLayer.bind(this)))},t}(a.Component);t.ListTag=y;var b=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={data:[]},r}return r(t,e),t.prototype.convertTopicToElement=function(e){return a.createElement(I,{key:e.id,title:e.title,userName:e.userName,id:e.id,userId:e.userId,lastPostTime:e.lastPostTime,lastPostUser:e.lastPostUser,likeCount:e.likeCount,dislikeCount:e.dislikeCount,replyCount:e.replyCount,highlightInfo:e.highlightInfo,topState:e.topState,state:e.state,hitCount:e.hitCount})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,s.GetTopTopics(this.props.boardId)];case 1:return e=t.sent(),this.setState({data:e}),[2]}})})},t.prototype.render=function(){return a.createElement("div",null,this.state.data.map(this.convertTopicToElement))},t}(a.Component);t.ListTopContent=b;var w=function(e){function t(t){var n=e.call(this,t)||this;return n.state={data:[]},n}return r(t,e),t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,s.getBestTopics(this.props.boardId,this.props.curPage)];case 1:return e=t.sent(),this.setState({data:e}),[2]}})})},t.prototype.convertTopicToElement=function(e){return a.createElement(I,{key:e.id,title:e.title,userName:e.userName,id:e.id,userId:e.userId,lastPostTime:e.lastPostTime,lastPostUser:e.lastPostUser,likeCount:e.likeCount,dislikeCount:e.dislikeCount,replyCount:e.replyCount,highlightInfo:e.highlightInfo,topState:e.topState,state:e.state,hitCount:e.hitCount})},t.prototype.render=function(){return a.createElement("div",null,this.state.data.map(this.convertTopicToElement))},t}(a.Component);t.BestTopics=w;var E=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={items:[],totalPage:0,boardInfo:{masters:[],topicCount:1},fetchState:"ok",tags:[]},r}return r(t,e),t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t,n,r;return i(this,function(o){switch(o.label){case 0:return[4,s.getBoardInfo(this.match.params.boardId)];case 1:return e=o.sent(),[4,s.getBoardTopicAsync(1,this.match.params.boardId,e.topicCount)];case 2:return t=o.sent(),n=this.getTotalListPage(e.topicCount),[4,s.getBoardTag(this.match.params.boardId)];case 3:return r=o.sent(),this.setState({items:t,totalPage:n,boardInfo:e,fetchState:t,tags:r}),[2]}})})},t.prototype.convertTopicToElement=function(e){return a.createElement(I,{key:e.id,title:e.title,userName:e.userName,id:e.id,userId:e.userId,lastPostTime:e.lastPostTime,lastPostUser:e.lastPostUser,likeCount:e.likeCount,dislikeCount:e.dislikeCount,replyCount:e.replyCount,highlightInfo:e.highlightInfo,topState:e.topState,state:e.state,hitCount:e.hitCount})},t.prototype.componentWillReceiveProps=function(e){return o(this,void 0,void 0,function(){var t,n,r,o,a;return i(this,function(i){switch(i.label){case 0:return n=e.match.params.page,t=n?parseInt(n):1,[4,s.getBoardInfo(this.match.params.boardId)];case 1:return r=i.sent(),o=this.getTotalListPage(this.state.boardInfo.topicCount),[4,s.getBoardTopicAsync(t,e.match.params.boardId,r.topicCount)];case 2:return a=i.sent(),this.setState({items:a,totalPage:o}),[2]}})})},t.prototype.getTotalListPage=function(e){return s.getListTotalPage(e)},t.prototype.render=function(){var e=this.match.params.page?parseInt(this.match.params.page):1,t=null;1!==parseInt(this.match.params.page)&&this.match.params.page||(t=a.createElement("div",null,a.createElement(b,{boardId:this.match.params.boardId})));var n=this.state.items.map(this.convertTopicToElement),r="/list/"+this.match.params.boardId+"/best/",o="/list/"+this.match.params.boardId+"/save/",i="/list/"+this.match.params.boardId+"/";return a.createElement("div",{className:"listContent "},a.createElement(v,{page:e,totalPage:this.state.totalPage,boardid:this.match.params.boardId,url:i}),a.createElement(y,{tags:this.state.tags}),a.createElement("div",{className:"column",style:{width:"100%",border:"#eaeaea solid thin"}},a.createElement("div",{className:"row",style:{justifyContent:"space-between"}},a.createElement("div",{className:"row",style:{alignItems:"center"}},a.createElement("div",{className:"listContentTag"},"全部"),a.createElement("div",{className:"listContentTag"},a.createElement(u.Link,{to:r},"精华")),a.createElement("div",{className:"listContentTag"},a.createElement(u.Link,{to:o},"保存"))),a.createElement("div",{className:"row",style:{alignItems:"center"}},a.createElement("div",{style:{marginRight:"19.3rem"}},a.createElement("span",null,"作者")),a.createElement("div",{style:{marginRight:"7.6875rem"}},a.createElement("span",null,"最后回复")))),t,a.createElement("div",null,n)),a.createElement(l.Pager,{page:e,totalPage:this.state.totalPage,url:i}))},t}(f);t.ListContent=E;var _=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={items:[],totalPage:0,tags:[]},r}return r(t,e),t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t,n;return i(this,function(r){switch(r.label){case 0:return[4,s.getBestTopics(1,this.match.params.boardId)];case 1:return e=r.sent(),[4,s.getBoardTag(this.match.params.boardId)];case 2:return t=r.sent(),n=e.totalPage,this.setState({items:e.boardtopics,totalPage:n,tags:t}),[2]}})})},t.prototype.convertTopicToElement=function(e){return a.createElement(I,{key:e.id,title:e.title,userName:e.userName,id:e.id,userId:e.userId,lastPostTime:e.lastPostTime,lastPostUser:e.lastPostUser,likeCount:e.likeCount,dislikeCount:e.dislikeCount,replyCount:e.replyCount,highlightInfo:e.highlightInfo,topState:e.topState,state:e.state,hitCount:e.hitCount})},t.prototype.componentWillReceiveProps=function(e){return o(this,void 0,void 0,function(){var t,n,r,o;return i(this,function(i){switch(i.label){case 0:return n=e.match.params.page,t=n?parseInt(n):1,[4,s.getBestTopics(t,e.match.params.boardId)];case 1:return r=i.sent(),o=r.totalPage,this.setState({items:r.boardtopics,totalPage:o}),[2]}})})},t.prototype.render=function(){var e=this.match.params.page?parseInt(this.match.params.page):1,t=null;1!==parseInt(this.match.params.page)&&this.match.params.page||(t=a.createElement("div",null,a.createElement(b,{boardId:this.match.params.boardId})));var n=this.state.items.map(this.convertTopicToElement),r="/list/"+this.match.params.boardId+"/best/",o="/list/"+this.match.params.boardId+"/save/",i="/list/"+this.match.params.boardId+"/";return a.createElement("div",{className:"listContent "},a.createElement(v,{page:e,totalPage:this.state.totalPage,boardid:this.match.params.boardId,url:r}),a.createElement(y,{tags:this.state.tags}),a.createElement("div",{className:"row",style:{justifyContent:"space-between"}},a.createElement("div",{className:"row",style:{alignItems:"center"}},a.createElement("div",{className:"listContentTag"},a.createElement(u.Link,{to:i},"全部")),a.createElement("div",{className:"listContentTag"},"精华"),a.createElement("div",{className:"listContentTag"},a.createElement(u.Link,{to:o},"保存"))),a.createElement("div",{className:"row",style:{alignItems:"center"}},a.createElement("div",{style:{marginRight:"19.3rem"}},a.createElement("span",null,"作者")),a.createElement("div",{style:{marginRight:"7.6875rem"}},a.createElement("span",null,"最后回复")))),t,a.createElement("div",null,n),a.createElement(l.Pager,{page:e,totalPage:this.state.totalPage,url:r}))},t}(f);t.ListBestContent=_;var S=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={items:[],totalPage:0,tags:[]},r}return r(t,e),t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t,n;return i(this,function(r){switch(r.label){case 0:return[4,s.getSaveTopics(1,this.match.params.boardId)];case 1:return e=r.sent(),t=e.totalPage,[4,s.getBoardTag(this.match.params.boardId)];case 2:return n=r.sent(),this.setState({items:e.boardtopics,totalPage:t,tags:n}),[2]}})})},t.prototype.convertTopicToElement=function(e){return a.createElement(I,{key:e.id,title:e.title,userName:e.userName,id:e.id,userId:e.userId,lastPostTime:e.lastPostTime,lastPostUser:e.lastPostUser,likeCount:e.likeCount,dislikeCount:e.dislikeCount,replyCount:e.replyCount,highlightInfo:e.highlightInfo,topState:e.topState,state:e.state,hitCount:e.hitCount})},t.prototype.componentWillReceiveProps=function(e){return o(this,void 0,void 0,function(){var t,n,r;return i(this,function(o){switch(o.label){case 0:return n=e.match.params.page,t=n?parseInt(n):1,[4,s.getSaveTopics(t,e.match.params.boardId)];case 1:return r=o.sent(),this.setState({items:r.boardtopics}),[2]}})})},t.prototype.render=function(){var e=this.match.params.page?parseInt(this.match.params.page):1,t=null;1!==parseInt(this.match.params.page)&&this.match.params.page||(t=a.createElement("div",null,a.createElement(b,{boardId:this.match.params.boardId}))),console.log(this.state.items);var n=this.state.items.map(this.convertTopicToElement),r=(this.match.params.boardId,"/list/"+this.match.params.boardId+"/save/"),o="/list/"+this.match.params.boardId+"/";return a.createElement("div",{className:"listContent "},a.createElement(v,{page:e,totalPage:this.state.totalPage,boardid:this.match.params.boardId,url:r}),a.createElement(y,{tags:this.state.tags}),a.createElement("div",{className:"row",style:{justifyContent:"space-between"}},a.createElement("div",{className:"row",style:{alignItems:"center"}},a.createElement("div",{className:"listContentTag"},a.createElement(u.Link,{to:o},"全部")),a.createElement("div",{className:"listContentTag"},"精华"),a.createElement("div",{className:"listContentTag"},a.createElement(u.Link,{to:r},"保存"))),a.createElement("div",{className:"row",style:{alignItems:"center"}},a.createElement("div",{style:{marginRight:"19.3rem"}},a.createElement("span",null,"作者")),a.createElement("div",{style:{marginRight:"7.6875rem"}},a.createElement("span",null,"最后回复")))),t,a.createElement("div",null,n),a.createElement(l.Pager,{page:e,totalPage:this.state.totalPage,url:r}))},t}(f);t.ListSaveContent=S;var I=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={pager:[]},r}return r(t,e),t.prototype.componentWillMount=function(){var e=this.props.replyCount+1,t=e/10==0?e/10:(e-e%10)/10+1,n=s.getListPager(t);this.props.id;this.setState({pager:n})},t.prototype.componentDidMount=function(){var e="#title"+this.props.id;null!=this.props.highlightInfo&&(1==this.props.highlightInfo.isBold&&$(e).css("font-weight","bold"),1==this.props.highlightInfo.isItalic&&$(e).css("font-style","italic"),null!=this.props.highlightInfo.color&&$(e).css("color",this.props.highlightInfo.color))},t.prototype.generateListPager=function(e){var t="/topic/"+this.props.id+"/"+e;return-1!=e?a.createElement("div",{style:{marginRight:"0.3rem"}},a.createElement(u.Link,{style:{color:"red"},to:t},e)):a.createElement("div",{style:{marginRight:"0.3rem"}},"...")},t.prototype.render=function(){var e;e=0===this.props.topState?"changeColor":"changeTopColor";var t,n="topic"+this.props.id,r="/topic/"+this.props.id,o="title"+this.props.id;0===this.props.topState?t=a.createElement("i",{style:{color:"#B0B0B0"},className:"fa fa-envelope fa-lg"}):2===this.props.topState?t=a.createElement("i",{style:{color:"orange"},className:"fa fa-chevron-circle-up fa-lg"}):4===this.props.topState&&(t=a.createElement("i",{style:{color:"red"},className:"fa fa-arrow-circle-up fa-lg"})),this.props.replyCount>100&&0===this.props.topState&&(t=a.createElement("i",{style:{color:"red"},className:"fa fa-envelope-open fa-lg"}));var i;i=s.getLocalStorage("userInfo")?s.getLocalStorage("userInfo").name:"",i===this.props.userName&&(t=a.createElement("i",{style:{color:"#FFC90E"},className:"fa fa-envelope fa-lg"})),1===this.props.state&&(t=a.createElement("i",{style:{color:"#B0B0B0"},className:"fa fa-lock fa-lg"}));var c=this.props.hitCount;return this.props.hitCount>1e5?c=((this.props.hitCount-this.props.hitCount%1e4)/1e4).toString()+"万":this.props.hitCount>1e4&&(c=(this.props.hitCount/1e4).toFixed(1).toString()+"万"),a.createElement("div",{id:e},a.createElement(u.Link,{to:r},a.createElement("div",{className:"row topicInList",id:n},a.createElement("div",{style:{display:"flex",marginLeft:"0.5rem",alignItems:"flex-end"}},a.createElement("div",{className:"row",style:{alignItems:"center"}},t,a.createElement("div",{className:"listTitle",id:o,style:{marginLeft:"0.5rem"}}," ",this.props.title)),a.createElement("div",{style:{display:"flex",fontSize:"0.75rem",marginLeft:"1rem"}},this.state.pager.map(this.generateListPager.bind(this)))),a.createElement("div",{className:"row",style:{width:"50%",flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between",fontSize:"0.75rem",marginBottom:"-4px"}},a.createElement("div",{style:{width:"8rem",textAlign:"center"}}," ",a.createElement("span",null,a.createElement("a",null,this.props.userName||"匿名"))),a.createElement("div",{className:"row",style:{width:"10rem"}},a.createElement("div",{id:"liked",style:{display:"flex",width:"2rem"}},a.createElement("i",{className:"fa fa-thumbs-o-up fa-lg"}),a.createElement("span",{className:"timeProp tagSize"},this.props.likeCount)),a.createElement("div",{id:"disliked",style:{display:"flex",width:"4.5rem"}},a.createElement("i",{className:"fa fa-eye fa-lg"}),a.createElement("span",{className:"timeProp tagSize"},c)),a.createElement("div",{id:"commentsAmount",style:{display:"flex",width:"3.5rem"}},a.createElement("i",{className:"fa fa-commenting-o fa-lg"}),a.createElement("span",{className:"timeProp tagSize"},this.props.replyCount))),a.createElement("div",{id:"lastReply",style:{width:"8rem",textAlign:"center"}},a.createElement("div",null,this.props.lastPostUser," ")),a.createElement("div",{style:{width:"12rem",textAlign:"center"}},a.createElement("div",{style:{wordBreak:"keepAll"}},moment(this.props.lastPostTime).format("YY-MM-DD HH:mm")))))))},t}(a.Component);t.TopicTitleAndContent=I},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"img"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=e,a=t.value("title"),c=parseInt(t.value("img"));return n.options.allowImage?n.options.compatibility===i.UbbCompatiblityMode.EnforceMorden?1===c?o.createElement(s,{imageUri:r,title:a,isShowed:!1}):o.createElement("figure",null,o.createElement(s,{imageUri:r,title:a,isShowed:!0}),o.createElement("figcaption",null,a)):1===c?o.createElement(s,{imageUri:r,title:a,isShowed:!1}):o.createElement(s,{imageUri:r,title:a,isShowed:!0}):o.createElement(s,{imageUri:r,title:a,isShowed:!1})},t}(i.TextTagHandler);t.ImageTagHandler=a;var s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isShowed:n.props.isShowed},n.toggleIsShowed=n.toggleIsShowed.bind(n),n}return r(t,e),t.prototype.toggleIsShowed=function(){console.log("显示图片！"),this.setState(function(e){return{isShowed:!e.isShowed}})},t.prototype.render=function(){return this.state.isShowed?o.createElement("img",{style:{maxWidth:"100%"},src:this.props.imageUri,alt:this.props.title}):o.createElement("div",{className:"hiddenImage",onClick:this.toggleIsShowed},"点击查看图片")},t}(o.Component);t.Image=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(38),u=n(115),l=n(158),p=n(419),f=n(57),h=n(159),d=n(166),m=n(63),g=n(422);t.Constants||(t.Constants={});var v=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.update=r.update.bind(r),r.handleChange=r.handleChange.bind(r),r.quote=r.quote.bind(r),r.state={page:1,shouldRender:!0,topicid:r.match.params.topicid,totalPage:1,userName:null,boardId:7,topicInfo:{replyCount:0},boardInfo:{masters:[],id:7},fetchState:"ok",quote:""},r}return r(t,e),t.prototype.quote=function(e,t,n,r){var o=c("#sendTopicInfo").offset().top;scrollTo(0,o),this.setState({quote:{content:e,userName:t,replyTime:n,floor:r}})},t.prototype.update=function(){this.setState({})},t.prototype.handleChange=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a,c;return i(this,function(i){switch(i.label){case 0:return[4,s.getTopicInfo(this.match.params.topicid)];case 1:return e=i.sent(),t=e.replyCount%10==0?e.replyCount/10:(e.replyCount-e.replyCount%10)/10+1,n=this.match.params.page?parseInt(this.match.params.page):1,[4,this.getTotalPage(e.replyCount)];case 2:return r=i.sent(),o=this.match.params.userName,a=e.replyCount%10,n!==t&&(n=t,c="/topic/"+e.id+"/"+n+"#"+a,window.history.pushState({},"0","http://"+window.location.host+c)),this.setState({page:n,topicid:this.match.params.topicid,totalPage:r,userName:o,topicInfo:e,quote:""}),[2]}})})},t.prototype.componentWillReceiveProps=function(e){return o(this,void 0,void 0,function(){var t,n,r,o,a,c;return i(this,function(i){switch(i.label){case 0:return t=e.match.params.page?parseInt(e.match.params.page):1,console.log("newProps topic page"),console.log(e.match.params.page),n=e.match.params.userName,[4,s.getTopicInfo(this.match.params.topicid)];case 1:return r=i.sent(),o=r.boardId,[4,s.getBoardInfo(o)];case 2:return a=i.sent(),c=this.getTotalPage(r.replyCount),this.setState({page:t,topicid:e.match.params.topicid,totalPage:c,userName:n,boardId:o,topicInfo:r,boardInfo:a}),[2]}})})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a;return i(this,function(i){switch(i.label){case 0:return e=this.match.params.page?parseInt(this.match.params.page):1,t=this.match.params.userName,[4,s.getTopicInfo(this.match.params.topicid)];case 1:return n=i.sent(),console.log("topicdidmount"+e),r=n.boardId,[4,s.getBoardInfo(r)];case 2:return o=i.sent(),a=this.getTotalPage(n.replyCount),this.setState({page:e,topicid:this.match.params.topicid,totalPage:a,userName:t,boardId:r,topicInfo:n,boardInfo:o,fetchState:n}),[2]}})})},t.prototype.getTotalPage=function(e){return s.getTotalPageof10(e)},t.prototype.render=function(){switch(this.state.fetchState){case"ok":return a.createElement("div",null);case"not found":return a.createElement(m.NotFoundTopic,null);case"unauthorized":return a.createElement(m.UnauthorizedTopic,null);case"server error":return a.createElement(m.ServerError,null)}var e=null,t=null,n=null;1!==parseInt(this.match.params.page)&&this.match.params.page||(console.log("in"),n=a.createElement(g.TopicInfo,{topicInfo:this.state.topicInfo,tag:null,boardInfo:this.state.boardInfo,adsUrl:"/images/ads.jpg"}),e=a.createElement(h.PostTopic,{imgUrl:"/images/ads.jpg",page:this.state.page,topicid:this.state.topicid,userId:null,topicInfo:this.state.topicInfo,boardInfo:this.state.boardInfo,quote:this.quote}),t=a.createElement(d.Reply,{topicInfo:this.state.topicInfo,page:this.match.params.page,topicId:this.match.params.topicid,boardInfo:this.state.boardInfo,quote:this.quote,isTrace:!1,isHot:!0,userId:null}));var r="/topic/"+this.state.topicid+"/";return a.createElement("div",{className:"center"},a.createElement("div",{className:"row",style:{width:"100%",justifyContent:"space-between",alignItems:"center"}},a.createElement(p.Category,{topicId:this.state.topicid,topicInfo:this.state.topicInfo,boardInfo:this.state.boardInfo}),a.createElement(f.Pager,{page:this.state.page,url:r,totalPage:this.state.totalPage})),n,e,t,a.createElement(d.Reply,{topicInfo:this.state.topicInfo,page:this.match.params.page,topicId:this.match.params.topicid,boardInfo:this.state.boardInfo,quote:this.quote,isHot:!1,isTrace:!1,userId:null}),a.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"flex-end",marginTop:"3rem"}},a.createElement(f.Pager,{page:this.state.page,url:r,totalPage:this.state.totalPage})),a.createElement(l.SendTopic,{onChange:this.handleChange,topicid:this.state.topicid,boardId:this.state.boardId,boardInfo:this.state.boardInfo,content:this.state.quote,userId:this.state.topicInfo.userId}))},t}(u.RouteComponent);t.Post=v},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(38),u=n(157),l=n(116),p=n(418),f=function(e){function t(t){var n=e.call(this,t)||this;return n.sendUbbTopic=n.sendUbbTopic.bind(n),n.changeEditor=n.changeEditor.bind(n),n.showManagement=n.showManagement.bind(n),n.onChange=n.onChange.bind(n),n.close=n.close.bind(n),n.update=n.update.bind(n),n.state={content:"",mode:0,masters:[]},n}return r(t,e),t.prototype.update=function(e){this.setState({content:e})},t.prototype.onChange=function(){this.props.onChange()},t.prototype.showManagement=function(){var e="#manage"+this.props.topicid;c(e).css("display","")},t.prototype.close=function(){var e="#manage"+this.props.topicid;c(e).css("display","none")},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,o;return i(this,function(i){return s.isMaster(this.props.boardInfo.masters)&&c("#topicManagementBTN").css("display",""),s.getLocalStorage("userInfo")&&(e=s.getLocalStorage("userInfo").id,"全站贵宾"===s.getLocalStorage("userInfo").privilege&&e===this.props.userId&&c("#topicManagementBTN").css("display","")),1===this.state.mode&&(editormd.emoji.path="/images/emoji/",u.Constants.testEditor=editormd("test-editormd",{width:"100%",height:640,path:"/scripts/lib/editor.md/lib/",saveHTMLToTextarea:!1,imageUpload:!1,imageFormats:["jpg","jpeg","gif","png","bmp","webp"],imageUploadURL:"http://apitest.niconi.cc/file/",emoji:!0,toolbarIcons:function(){return["undo","redo","|","emoji","bold","del","italic","quote","|","h1","h2","h3","h4","|","list-ul","list-ol","hr","|","link","image","code","table","html-entities"]},toolbarCustomIcons:{file:"<input type='file' id='upload-files' style=' display: none ' onchange='uploadEvent()' />",faicon:"<i class='fa fa-upload' onclick='clickUploadIcon()' style='cursor: pointer '></i>"}})),t=moment(this.props.content.replyTime).format("YYYY-MM-DD HH:mm:ss"),n="/topic/"+this.props.topicid+"#"+this.props.content.floor,r=this.props.boardInfo.masters,this.props.content&&(1===this.state.mode?(o=">**以下是引用"+this.props.content.floor+"楼：用户"+this.props.content.userName+"在"+t+"的发言：**\n"+this.props.content.content,u.Constants.testEditor.appendMarkdown(o),this.setState({masters:r})):(o="\n[quote][b]以下是引用"+this.props.content.floor+"楼：用户"+this.props.content.userName+"在"+t+"的发言：\n[color=blue][url="+n+"]>>查看原帖<<[/url][/color][/b]"+this.props.content.content+"[/quote]",this.setState({masters:r,content:this.state.content+o}))),[2]})})},t.prototype.componentWillReceiveProps=function(e){if(s.isMaster(e.boardInfo.masters)&&c("#topicManagementBTN").css("display",""),s.getLocalStorage("userInfo")){var t=s.getLocalStorage("userInfo").id;"全站贵宾"===s.getLocalStorage("userInfo").privilege&&t===e.userId&&c("#topicManagementBTN").css("display","")}var n=moment(e.content.replyTime).format("YYYY-MM-DD HH:mm:ss");if(e.content)if(1===this.state.mode){var r=">**以下是引用"+e.content.floor+"楼：用户"+e.content.userName+"在"+n+"的发言：**\n"+e.content.content;u.Constants.testEditor.appendMarkdown(r)}else{var o="/topic/"+this.props.topicid+"#"+e.content.floor,r="[quote][b]以下是引用"+e.content.floor+"楼：用户"+e.content.userName+"在"+n+"的发言：[color=blue][url="+o+"]>>查看原帖<<[/url][/color][/b]\n"+e.content.content+"[/quote]";this.setState({content:this.state.content+r})}},t.prototype.componentDidUpdate=function(){if(editormd.emoji.path="/images/emoji/",1===this.state.mode){u.Constants.testEditor=editormd("test-editormd",{width:"100%",height:640,path:"/scripts/lib/editor.md/lib/",saveHTMLToTextarea:!1,imageUpload:!1,imageFormats:["jpg","jpeg","gif","png","bmp","webp"],imageUploadURL:"http://apitest.niconi.cc/file/",emoji:!0,toolbarIcons:function(){return["undo","redo","|","emoji","bold","del","italic","quote","|","h1","h2","h3","h4","|","list-ul","list-ol","hr","|","link","image","code","table","html-entities"]},toolbarCustomIcons:{file:"<input type='file' id='upload-files' style=' display: none ' onchange='uploadEvent()' />",faicon:"<i class='fa-upload' onclick='clickUploadIcon()' style='cursor: pointer '></i>"}}),console.log("append");c(".fa-copyright").parent("a").parent("li").parent("ul").append("<li><form method='post' enctype='multipart/form-data'><input type='file' id='upload-files' style=' display: none ' onchange='uploadEvent()' /><div class='row'><label class='fa-upload' htmlfor='upload-files' style='font-family: fontAwesome;cursor: pointer '></label></div></form></li>")}},t.prototype.sendUbbTopic=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a;return i(this,function(i){switch(i.label){case 0:return e="http://apitest.niconi.cc/topic/"+this.props.topicid+"/post",t={content:this.state.content,contentType:0,title:""},n=JSON.stringify(t),r=s.getLocalStorage("accessToken"),o=new Headers,o.append("Authorization",r),o.append("Content-Type","application/json"),[4,fetch(e,{method:"POST",headers:o,body:n})];case 1:return a=i.sent(),403===a.status&&alert("你太快啦 请慢一点~"),401===a.status&&(window.location.href="/status/logout"),402===a.status&&(window.location.href="/status/contentneeded"),500===a.status&&(window.location.href="/status/servererror"),this.props.onChange(),this.setState({content:""}),[2]}})})},t.prototype.sendMdTopic=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a,c,l;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),e="http://apitest.niconi.cc/topic/"+this.props.topicid+"/post",t=u.Constants.testEditor.getMarkdown(),n={content:t,contentType:1,title:""},r=JSON.stringify(n),o=s.getLocalStorage("accessToken"),a=new Headers,a.append("Authorization",o),a.append("Content-Type","application/json"),[4,fetch(e,{method:"POST",headers:a,body:r})];case 1:return c=i.sent(),403===c.status&&alert("你太快啦 请慢一点~"),402===c.status&&alert("请输入内容"),u.Constants.testEditor.setMarkdown(""),this.props.onChange(),editormd.emoji.path="/images/emoji/",1===this.state.mode&&(u.Constants.testEditor=editormd("test-editormd",{width:"100%",height:640,path:"/scripts/lib/editor.md/lib/",saveHTMLToTextarea:!1,imageUpload:!1,imageFormats:["jpg","jpeg","gif","png","bmp","webp"],imageUploadURL:"http://apitest.niconi.cc/file/",emoji:!0,toolbarIcons:function(){return["undo","redo","|","emoji","bold","del","italic","quote","|","h1","h2","h3","h4","|","list-ul","list-ol","hr","|","link","image","code","table","html-entities"]}})),this.setState({content:""}),[3,3];case 2:return l=i.sent(),console.log("Error"),console.log(l),[3,3];case 3:return[2]}})})},t.prototype.changeEditor=function(){0===this.state.mode?this.setState({mode:1}):this.setState({mode:0})},t.prototype.getInitialState=function(){return{value:""}},t.prototype.handleChange=function(e){this.setState({content:e.target.value})},t.prototype.render=function(){var e;0===this.state.mode?("使用UBB模式编辑",e=a.createElement("div",null,a.createElement(l.UbbEditor,{update:this.update,value:this.state.content}),a.createElement("div",{className:"row",style:{justifyContent:"center",marginBottom:"1.25rem "}},a.createElement("div",{id:"post-topic-button",onClick:this.sendUbbTopic,className:"button blue",style:{marginTop:"1.25rem",width:"4.5rem",letterSpacing:"0.3125rem"}},"回复")))):("使用Markdown编辑",e=a.createElement("div",{id:"sendTopic"},a.createElement("form",null,a.createElement("div",{id:"test-editormd",className:"editormd"},a.createElement("textarea",{className:"editormd-markdown-textarea",name:"test-editormd-markdown-doc"}))),a.createElement("div",{className:"row",style:{justifyContent:"center",marginBottom:"1.25rem "}},a.createElement("div",{id:"post-topic-button",onClick:this.sendMdTopic.bind(this),className:"button blue",style:{marginTop:"1.25rem",width:"4.5rem",letterSpacing:"0.3125rem"}},"回复"))));return this.state.mode,a.createElement("div",{id:"sendTopicInfo",style:{width:"100%",display:"flex",flexDirection:"column"}},a.createElement("div",{className:"row",style:{justifyContent:1===this.state.mode?"space-between":"flex-end"}},null,a.createElement("div",{id:"post-topic-changeMode",onClick:this.changeEditor.bind(this),className:"button blue",style:{width:"16rem",height:"0.8rem",letterSpacing:"0.3125rem"}},1===this.state.mode?"切换到Ubb编辑器":"切换到Markdown编辑器")),e,a.createElement("button",{id:"topicManagementBTN",style:{display:"none"},onClick:this.showManagement},"管理"),a.createElement(p.TopicManagement,{topicId:this.props.topicid,update:this.onChange,boardId:this.props.boardId,updateTime:Date.now()}))},t}(a.Component);t.SendTopic=f},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(160),u=n(161),l=n(162),p=n(163),f=n(164),h=n(165),d=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.update=r.update.bind(r),r.quote=r.quote.bind(r),r.state={topicMessage:{title:"加载中...",time:"",content:"",signature:"",postId:0,likeInfo:{likeCount:0,dislikeCount:0,likeState:0},awardInfo:[]},masters:[]},r}return r(t,e),t.prototype.quote=function(e,t,n,r){this.props.quote(e,t,n,r)},t.prototype.update=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,s.getTopic(this.props.topicid)];case 1:return e=t.sent(),this.setState({topicMessage:e}),[2]}})})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t;return i(this,function(n){switch(n.label){case 0:return[4,s.getTopic(this.props.topicid)];case 1:return e=n.sent(),t=this.props.boardInfo.boardMasters,this.setState({topicMessage:e,masters:t}),[2]}})})},t.prototype.render=function(){var e=null;return s.getLocalStorage("userInfo")&&(e=s.getLocalStorage("userInfo").privilege),null!=this.state.topicMessage.userInfo?a.createElement("div",{className:"reply",id:"1"},a.createElement(p.Replier,{key:this.state.topicMessage.postId,userInfo:this.state.topicMessage.userInfo,isAnonymous:this.state.topicMessage.isAnonymous,topicid:this.state.topicMessage.topicId,replyTime:this.state.topicMessage.time,floor:this.state.topicMessage.floor,isDeleted:this.state.topicMessage.isDeleted,content:this.state.topicMessage.content,quote:this.quote,traceMode:!1,isHot:!1}),a.createElement("div",{className:"column",style:{justifyContent:"space-between",width:"85%"}},a.createElement(l.Judge,{userId:this.state.topicMessage.userId,postId:this.state.topicMessage.postId,update:this.update,topicId:this.state.topicMessage.topicId}),a.createElement(u.PostManagement,{topicId:this.state.topicMessage.topicId,postId:this.state.topicMessage.postId,userId:this.state.topicMessage.userId,update:this.update,privilege:e}),a.createElement(f.ReplyContent,{key:this.state.topicMessage.content,postid:this.state.topicMessage.postId,content:this.state.topicMessage.content,contentType:this.state.topicMessage.contentType}),a.createElement(c.Award,{postId:this.state.topicMessage.postId,updateTime:Date.now(),awardInfo:this.state.topicMessage.awardInfo}),a.createElement(h.ReplierSignature,{signature:this.state.topicMessage.userInfo.signatureCode,topicid:this.state.topicMessage.topicId,userId:this.state.topicMessage.userId,masters:this.state.masters,postid:this.state.topicMessage.postId,likeInfo:this.state.topicMessage.likeInfo}))):null},t}(a.Component);t.PostTopic=d},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(420),u=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.showAll=r.showAll.bind(r),r.hideAll=r.hideAll.bind(r),r.state={info:[],shortInfo:[],count:0,showAll:!1},r}return r(t,e),t.prototype.hideAll=function(){this.setState({showAll:!1})},t.prototype.showAll=function(){this.setState({showAll:!0})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a,s;return i(this,function(i){switch(i.label){case 0:if(e=[],t=this.props.awardInfo,!(t.length>10))return[3,4];n=0,i.label=1;case 1:return n<10?(r=e,o=n,[4,this.generateAwardInfo(t[n])]):[3,4];case 2:r[o]=i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return a=t.map(this.generateAwardInfo.bind(this)),[4,Promise.all(a)];case 5:return s=i.sent(),this.setState({info:s,shortInfo:e,count:t.length}),[2]}})})},t.prototype.componentWillReceiveProps=function(e){return o(this,void 0,void 0,function(){var t,n,r,o,a,s,c;return i(this,function(i){switch(i.label){case 0:if(t=[],n=e.awardInfo,!(n.length>10))return[3,4];r=0,i.label=1;case 1:return r<10?(o=t,a=r,[4,this.generateAwardInfo(n[r])]):[3,4];case 2:o[a]=i.sent(),i.label=3;case 3:return r++,[3,1];case 4:return s=n.map(this.generateAwardInfo.bind(this)),[4,Promise.all(s)];case 5:return c=i.sent(),this.setState({info:c,shortInfo:t,count:n.length}),[2]}})})},t.prototype.generateAwardInfo=function(e){return o(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return[4,s.getPortraitUrl(e.operatorName)];case 1:return t=n.sent(),[2,a.createElement(c.AwardInfo,{postId:this.props.postId,userImgUrl:t,content:e.content,reason:e.reason,userName:e.operatorName})]}})})},t.prototype.render=function(){var e="#awardInfo"+this.props.postId,t="awardInfo"+this.props.postId;$(e).css("display",""),0!==this.state.info.length?this.state.info.length<10&&$(e).css("display",""):$(e).css("display","none");var n=a.createElement("button",{onClick:this.state.showAll?this.hideAll:this.showAll},this.state.showAll?"收起":"显示全部");return a.createElement("div",{className:"column awardInfo",id:t},a.createElement("div",{className:"row",style:{width:"25rem",fontSize:"0.8rem"}},a.createElement("div",{style:{marginLeft:"3.1rem"}},"用户"),a.createElement("div",{style:{marginLeft:"4.7rem"}},"操作"),a.createElement("div",{style:{marginLeft:"8.9rem"}},"理由")),this.state.count>10?this.state.showAll?this.state.info:this.state.shortInfo:this.state.info,this.state.count>10?n:null)},t}(a.Component);t.Award=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(38),u=function(e){function t(t){var n=e.call(this,t)||this;return n.wealthInput=n.wealthInput.bind(n),n.prestigeInput=n.prestigeInput.bind(n),n.reasonInput=n.reasonInput.bind(n),n.tpdaysInput=n.tpdaysInput.bind(n),n.confirm=n.confirm.bind(n),n.showAwardUI=n.showAwardUI.bind(n),n.showPunishUI=n.showPunishUI.bind(n),n.showDeleteUI=n.showDeleteUI.bind(n),n.showOtherUI=n.showOtherUI.bind(n),n.close=n.close.bind(n),n.state={wealth:1e3,prestige:0,reason:"",tpdays:0,UI:"Award",tips:"",fetchState:"ok"},n}return r(t,e),t.prototype.showAwardUI=function(){this.setState({UI:"Award",wealth:1e3})},t.prototype.showPunishUI=function(){this.setState({UI:"Punish",wealth:0})},t.prototype.showDeleteUI=function(){this.setState({UI:"Delete"})},t.prototype.showOtherUI=function(){this.setState({UI:"Other"})},t.prototype.confirm=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,o,o;return i(this,function(i){switch(i.label){case 0:switch(e="ok",t="ok",n="ok",r=this.state.UI){case"Award":return[3,1];case"Punish":return[3,13];case"Delete":return[3,30]}return[3,33];case 1:return c("input[name='reason']:checked").val()?"自定义"===c("input[name='reason']:checked").val()?[3,6]:0===this.state.wealth?[3,3]:[4,s.awardWealth(c("input[name='reason']:checked").val(),this.state.wealth,this.props.postId)]:[3,11];case 2:e=i.sent(),i.label=3;case 3:return 0===this.state.prestige?[3,5]:[4,s.addPrestige(this.props.postId,this.state.prestige,c("input[name='reason']:checked").val())];case 4:t=i.sent(),i.label=5;case 5:return[3,10];case 6:return 0===this.state.wealth?[3,8]:[4,s.awardWealth(this.state.reason,this.state.wealth,this.props.postId)];case 7:e=i.sent(),i.label=8;case 8:return 0===this.state.prestige?[3,10]:[4,s.addPrestige(this.props.postId,this.state.prestige,this.state.reason)];case 9:t=i.sent(),i.label=10;case 10:if("ok"===e&&"ok"===t)o="#manage"+this.props.postId,c(o).css("display","none"),this.props.update();else{switch(e){case"wrong input":this.setState({tips:"输入错误"});case"unauthorized":this.setState({tips:"你没有权限进行此操作"})}switch(t){case"wrong input":this.setState({tips:"输入错误"});case"unauthorized":this.setState({tips:"你没有权限进行此操作"})}}return[3,12];case 11:this.setState({tips:"请输入原因！"}),i.label=12;case 12:return[3,33];case 13:return c("input[name='reason']:checked").val()?"自定义"===c("input[name='reason']:checked").val()?[3,19]:[4,s.deductWealth(c("input[name='reason']:checked").val(),this.state.wealth,this.props.postId)]:[3,28];case 14:return e=i.sent(),0===this.state.prestige?[3,16]:[4,s.deductPrestige(this.props.postId,this.state.prestige,c("input[name='reason']:checked").val())];case 15:t=i.sent(),i.label=16;case 16:return 0===this.state.tpdays?[3,18]:[4,s.stopBoardPost(this.props.postId,c("input[name='reason']:checked").val(),this.state.tpdays)];case 17:n=i.sent(),i.label=18;case 18:return[3,27];case 19:return this.state.reason?[4,s.deductWealth(this.state.reason,this.state.wealth,this.props.postId)]:[3,25];case 20:return e=i.sent(),0===this.state.prestige?[3,22]:[4,s.deductPrestige(this.props.postId,this.state.prestige,this.state.reason)];case 21:t=i.sent(),i.label=22;case 22:return 0===this.state.tpdays?[3,24]:[4,s.stopBoardPost(this.props.postId,this.state.reason,this.state.tpdays)];case 23:n=i.sent(),i.label=24;case 24:return[3,26];case 25:this.setState({tips:"请输入原因！"}),i.label=26;case 26:if("ok"===e&&"ok"===t&&"ok"===n)o="#manage"+this.props.postId,c(o).css("display","none"),this.props.update();else{switch(e){case"wrong input":this.setState({tips:"输入错误"});case"unauthorized":this.setState({tips:"你没有权限进行此操作"})}switch(t){case"wrong input":this.setState({tips:"输入错误"});case"unauthorized":this.setState({tips:"你没有权限进行此操作"})}}i.label=27;case 27:return[3,29];case 28:this.setState({tips:"请选一个选项！"}),i.label=29;case 29:return[3,33];case 30:return this.state.reason?[4,s.deletePost(this.props.topicId,this.props.postId,this.state.reason)]:[3,32];case 31:if("ok"===(e=i.sent()))o="#manage"+this.props.postId,c(o).css("display","none"),this.props.update();else switch(e){case"wrong input":this.setState({tips:"输入错误"});case"unauthorized":this.setState({tips:"你没有权限进行此操作"})}return[3,33];case 32:this.setState({tips:"请输入原因！"}),i.label=33;case 33:return[2]}})})},t.prototype.wealthInput=function(e){this.setState({wealth:e.target.value})},t.prototype.prestigeInput=function(e){this.setState({prestige:e.target.value})},t.prototype.reasonInput=function(e){this.setState({reason:e.target.value})},t.prototype.tpdaysInput=function(e){this.setState({tpdays:e.target.value})},t.prototype.close=function(){var e="#manage"+this.props.postId;c(e).css("display","none")},t.prototype.componentDidMount=function(){var e=(this.props.postId,"#manageOptions-award"+this.props.postId),t=(this.props.postId,"#manageOptions-punish"+this.props.postId),n=(this.props.postId,"#manageOptions-delete"+this.props.postId);"Award"===this.state.UI&&(c(e).css("background-color","#b9d3ee"),c(t).css("background-color","#fffacd"),c(n).css("background-color","#fffacd")),"Punish"===this.state.UI&&(c(e).css("background-color","#fffacd"),c(t).css("background-color","#b9d3ee"),c(n).css("background-color","#fffacd")),"Delete"===this.state.UI&&(c(e).css("background-color","#fffacd"),c(t).css("background-color","#fffacd"),c(n).css("background-color","#b9d3ee")),"管理员"!==this.props.privilege?c(".managePrestige").css("display","none"):c(".managePrestige").css("display","")},t.prototype.componentDidUpdate=function(){"管理员"!==this.props.privilege?c(".managePrestige").css("display","none"):c(".managePrestige").css("display","")},t.prototype.render=function(){var e,t=a.createElement("div",{className:"column manageInfo",id:"award"},a.createElement("div",{className:"row manageOperation"},a.createElement("div",{className:"manageObject"},"财富值"),a.createElement("input",{type:"text",value:this.state.wealth,onChange:this.wealthInput})),a.createElement("div",{className:"row manageOperation managePrestige"},a.createElement("div",{className:"manageObject"},"威望"),a.createElement("input",{type:"text",value:this.state.prestige,onChange:this.prestigeInput})),a.createElement("div",{className:"column manageOperation"},a.createElement("div",{className:"row",style:{justifyContent:"space-around",marginTop:"1rem"}},a.createElement("div",null,"原因"),a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"reason",value:"好文章"}),a.createElement("div",null,"好文章")),a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"reason",value:"有用资源"}),a.createElement("div",null,"有用资源")),a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"reason",value:"热心回复"}),a.createElement("div",null,"热心回复"))),a.createElement("div",{className:"row",style:{justifyContent:"space-around",marginTop:"1rem"}},a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"reason",value:"自定义"}),a.createElement("div",null,"自定义")),a.createElement("input",{type:"text",value:this.state.reason,onChange:this.reasonInput})),a.createElement("div",null,this.state.tips))),n=a.createElement("div",{className:"column manageInfo",id:"punish"},a.createElement("div",{className:"row manageOperation"},a.createElement("div",{className:"manageObject"},"扣财富值"),a.createElement("input",{type:"text",value:this.state.wealth,onChange:this.wealthInput})),a.createElement("div",{className:"row manageOperation"},a.createElement("div",{className:"manageObject"},"扣威望"),a.createElement("input",{type:"text",value:this.state.prestige,onChange:this.prestigeInput})),a.createElement("div",{className:"row manageOperation"},a.createElement("div",{className:"manageObject"},"禁止发言(天)"),a.createElement("input",{type:"text",value:this.state.tpdays,onChange:this.tpdaysInput})),a.createElement("div",{className:"column manageOperation"},a.createElement("div",{className:"row",style:{justifyContent:"space-around",marginTop:"1rem"}},a.createElement("div",null,"原因"),a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"reason",value:"人身攻击"}),a.createElement("div",null,"人身攻击")),a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"reason",value:"恶意灌水"}),a.createElement("div",null,"恶意灌水")),a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"reason",value:"违反版规"}),a.createElement("div",null,"违反版规"))),a.createElement("div",{className:"row",style:{justifyContent:"space-around",marginTop:"1rem"}},a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"reason",value:"自定义"}),a.createElement("div",null,"自定义")),a.createElement("input",{type:"text",value:this.state.reason,onChange:this.reasonInput})),a.createElement("div",null,this.state.tips))),r=a.createElement("div",{className:"column manageInfo",id:"punish"},a.createElement("div",{className:"row manageOperation"},a.createElement("div",{className:"manageObject"},"删除原因"),a.createElement("input",{type:"text",value:this.state.reason,onChange:this.reasonInput}))),o=a.createElement("div",{className:"column manageInfo",id:"other"},a.createElement("div",{className:"row manageOperation"},a.createElement("div",{className:"manageObject"},"消费财富值"),a.createElement("input",{type:"text",value:this.state.wealth,onChange:this.wealthInput})),a.createElement("div",{className:"row manageOperation"},a.createElement("div",{className:"manageObject"},"原因"),a.createElement("input",{type:"text",value:this.state.reason,onChange:this.reasonInput}))),i="manage"+this.props.postId;e=t;var s="manageOptions-award"+this.props.postId,u="#manageOptions-award"+this.props.postId,l="manageOptions-punish"+this.props.postId,p="#manageOptions-punish"+this.props.postId,f="manageOptions-delete"+this.props.postId,h="#manageOptions-delete"+this.props.postId,d="manageOptions-other"+this.props.postId,m="#manageOptions-other"+this.props.postId;return"Award"===this.state.UI&&(e=t,c(u).css("background-color","#b9d3ee"),c(p).css("background-color","#fffacd"),c(h).css("background-color","#fffacd"),c(m).css("background-color","#fffacd")),"Punish"===this.state.UI&&(e=n,c(u).css("background-color","#fffacd"),c(p).css("background-color","#b9d3ee"),c(h).css("background-color","#fffacd"),c(m).css("background-color","#fffacd")),"Delete"===this.state.UI&&(e=r,c(u).css("background-color","#fffacd"),c(p).css("background-color","#fffacd"),c(h).css("background-color","#b9d3ee"),c(m).css("background-color","#fffacd")),"Other"===this.state.UI&&(e=o,c(u).css("background-color","#fffacd"),c(p).css("background-color","#fffacd"),c(h).css("background-color","#fffacd"),c(m).css("background-color","#b9d3ee")),a.createElement("div",{style:{display:"none"},id:i,className:"postManagement"},a.createElement("div",{className:"manageUI"},a.createElement("div",{className:"row manageOptions"},a.createElement("div",{className:"manageOptions-icon",id:s,onClick:this.showAwardUI,style:{color:"#FF7F00"}},"奖励"),a.createElement("div",{className:"manageOptions-icon",id:l,onClick:this.showPunishUI,style:{color:"red"}},"惩罚"),a.createElement("div",{className:"manageOptions-icon",id:f,onClick:this.showDeleteUI},"删除"),a.createElement("div",{className:"manageOptions-icon",id:d,onClick:this.showOtherUI},"其他"))),e,a.createElement("div",{className:"row",style:{justifyContent:"space-around"}},a.createElement("button",{onClick:this.confirm,className:"confirmManagement"},"确认"),a.createElement("button",{onClick:this.close,className:"confirmManagement"},"关闭")))},t}(a.Component);t.PostManagement=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(38),u=function(e){function t(t){var n=e.call(this,t)||this;return n.showMinus1UI=n.showMinus1UI.bind(n),n.showPlus1UI=n.showPlus1UI.bind(n),n.reasonInput=n.reasonInput.bind(n),n.confirm=n.confirm.bind(n),n.close=n.close.bind(n),n.state={reason:"",tips:"",UI:"plus1"},n}return r(t,e),t.prototype.confirm=function(){return o(this,void 0,void 0,function(){var e,t,t;return i(this,function(n){switch(n.label){case 0:if("plus1"!==c("input[name='option']:checked").val()&&"minus1"!==c("input[name='option']:checked").val())return[3,16];switch(e=this.state.UI){case"plus1":return[3,1];case"minus1":return[3,8]}return[3,15];case 1:return c("input[name='reason']:checked").val()?(t="#judge"+this.props.postId,"自定义"===c("input[name='reason']:checked").val()?[3,3]:(console.log(c("input[name='reason']:checked").val()),[4,s.plus1(this.props.topicId,this.props.postId,c("input[name='reason']:checked").val())])):[3,6];case 2:return n.sent(),[3,5];case 3:return[4,s.plus1(this.props.topicId,this.props.postId,this.state.reason)];case 4:n.sent(),n.label=5;case 5:return c(t).css("display","none"),this.props.update(),[3,7];case 6:this.setState({tips:"请输入原因！"}),n.label=7;case 7:return[3,15];case 8:return c("input[name='reason']:checked").val()?(t="#judge"+this.props.postId,"自定义"===c("input[name='reason']:checked").val()?[3,10]:[4,s.minus1(this.props.topicId,this.props.postId,c("input[name='reason']:checked").val())]):[3,13];case 9:return n.sent(),[3,12];case 10:return[4,s.minus1(this.props.topicId,this.props.postId,this.state.reason)];case 11:n.sent(),n.label=12;case 12:return c(t).css("display","none"),this.props.update(),[3,14];case 13:this.setState({tips:"请输入原因！"}),n.label=14;case 14:return[3,15];case 15:return[3,17];case 16:this.setState({tips:"请选择+1或-1"}),n.label=17;case 17:return[2]}})})},t.prototype.reasonInput=function(e){this.setState({reason:e.target.value})},t.prototype.close=function(){var e="#judge"+this.props.postId;c(e).css("display","none")},t.prototype.showPlus1UI=function(){this.setState({UI:"plus1"})},t.prototype.showMinus1UI=function(){this.setState({UI:"minus1"})},t.prototype.render=function(){var e,t=a.createElement("div",{className:"column",id:"award"},a.createElement("div",{className:"column manageOperation"},a.createElement("div",{className:"manageObject"},"原因"),a.createElement("div",{className:"row",style:{justifyContent:"space-around",marginTop:"2rem"}},a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"reason",value:"所言极是"}),a.createElement("div",null,"所言极是")),a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"reason",value:"momo"}),a.createElement("div",null,"momo")),a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"reason",value:"好人一生平安"}),a.createElement("div",null,"好人一生平安"))),a.createElement("div",{className:"row",style:{marginTop:"1rem",justifyContent:"space-around"}},a.createElement("div",{className:"judgeOption"},a.createElement("input",{type:"radio",name:"reason",value:"自定义"}),a.createElement("div",null,"自定义")),a.createElement("input",{type:"text",value:this.state.reason,onChange:this.reasonInput})),a.createElement("div",null,this.state.tips))),n=a.createElement("div",{className:"column",id:"award"},a.createElement("div",{className:"column manageOperation"},a.createElement("div",{className:"manageObject"},"原因"),a.createElement("div",{className:"row",style:{marginTop:"1rem",justifyContent:"space-around"}},a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"reason",value:"太不求是"}),a.createElement("div",null,"太不求是")),a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"reason",value:"呵呵"}),a.createElement("div",null,"呵呵")),a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"reason",value:"被你暴击"}),a.createElement("div",null,"被你暴击"))),a.createElement("div",{className:"row",style:{marginTop:"1rem",justifyContent:"space-around"}},a.createElement("div",{className:"judgeOption"},a.createElement("input",{type:"radio",name:"reason",value:"自定义"}),a.createElement("div",null,"自定义")),a.createElement("input",{type:"text",value:this.state.reason,onChange:this.reasonInput})),a.createElement("div",null,this.state.tips)));e="minus1"===this.state.UI?n:t;var r="judge"+this.props.postId;return a.createElement("div",{style:{display:"none"},id:r,className:"judgeManagement"},a.createElement("div",{className:"judgeUI column"},a.createElement("div",{className:"row judgeName"},"风评值"),a.createElement("div",{className:"row judgeOptions"},a.createElement("div",{className:"judgeOption"},a.createElement("input",{type:"radio",name:"option",value:"plus1",onClick:this.showPlus1UI}),a.createElement("div",null,"风评+1")),a.createElement("div",{className:"judgeOption"},a.createElement("input",{type:"radio",name:"option",value:"minus1",onClick:this.showMinus1UI}),a.createElement("div",null,"风评-1")))),e,a.createElement("div",{className:"row",style:{justifyContent:"space-around"}},a.createElement("button",{onClick:this.confirm,className:"confirmManagement"},"确认"),a.createElement("button",{onClick:this.close,style:{marginRight:"2rem"},className:"confirmManagement"},"关闭")))},t}(a.Component);t.Judge=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(9),c=n(115),u=n(421),l=n(2),p=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.quote=r.quote.bind(r),r.follow=r.follow.bind(r),r.unfollow=r.unfollow.bind(r),r.changeTraceMode=r.changeTraceMode.bind(r),r.state={traceMode:r.props.traceMode,buttonInfo:"关注",buttonIsDisabled:!1,isFollowing:!1},r}return r(t,e),t.prototype.quote=function(){this.props.quote(this.props.content,this.props.userInfo.name,this.props.replyTime,this.props.floor)},t.prototype.changeTraceMode=function(){this.setState({traceMode:!0!==this.state.traceMode})},t.prototype.unfollow=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.setState({buttonIsDisabled:!0,buttonInfo:"..."}),e=l.getLocalStorage("accessToken"),t=this.props.userInfo.id,n="http://apitest.niconi.cc/me/followee/"+t,r=new Headers,r.append("Authorization",e),[4,fetch(n,{method:"DELETE",headers:r})];case 1:if(o=i.sent(),200!==o.status)throw{};return this.setState({buttonIsDisabled:!1,buttonInfo:"关注",isFollowing:!1}),[3,3];case 2:return a=i.sent(),alert("网络错误"),[3,3];case 3:return[2]}})})},t.prototype.follow=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.setState({buttonIsDisabled:!0,buttonInfo:"..."}),e=l.getLocalStorage("accessToken"),t=this.props.userInfo.id,n="http://apitest.niconi.cc/me/followee/"+t,r=new Headers,r.append("Authorization",e),[4,fetch(n,{method:"PUT",headers:r})];case 1:if(o=i.sent(),200!==o.status)throw{};return this.setState({buttonIsDisabled:!1,buttonInfo:"取关",isFollowing:!0}),[3,3];case 2:return a=i.sent(),alert("网络错误"),[3,3];case 3:return[2]}})})},t.prototype.render=function(){var e="/user/id/"+this.props.userInfo.id,t=encodeURI(e),n="/message/message?id="+this.props.userInfo.id,r=a.createElement("a",{href:t},a.createElement("img",{className:"userPortrait",src:this.props.userInfo.portraitUrl}));1==this.props.isAnonymous&&(r=a.createElement("img",{src:this.props.userInfo.portraitUrl}));var o="/topic/"+this.props.topicid+"/user/id/"+this.props.userInfo.id,i="/topic/"+this.props.topicid;this.props.userInfo.id;1!=this.props.isAnonymous&&1!=this.props.isDeleted&&a.createElement(u.UserDetails,{userName:this.props.userInfo.name,userId:this.props.userInfo.id});var c=a.createElement(s.Link,{style:{color:"#fff"},to:e},this.props.userInfo.name);"匿名"!=this.props.userInfo.privilege&&"匿名用户"!==this.props.userInfo.privilege||(c=a.createElement("div",{style:{color:"white"}},this.props.userInfo.name));this.props.isAnonymous||a.createElement("button",{className:"operation"},a.createElement(s.Link,{to:n},"私信"));this.props.isAnonymous||a.createElement(s.Link,{className:"operation",to:!0===this.state.traceMode?i:o,onClick:this.changeTraceMode},!0===this.state.traceMode?"返回":"只看此用户");a.createElement("div",{style:{color:"red",marginLeft:"1rem"}},a.createElement("span",null,"最热回复"),a.createElement("span",null,"(第"),a.createElement("span",null,this.props.floor),a.createElement("span",null,"楼)")),a.createElement("div",{style:{marginLeft:"0.625rem"}},a.createElement("span",null,"第"),a.createElement("span",{style:{color:"red"}},this.props.floor),a.createElement("span",null,"楼"));return a.createElement("div",{className:"userMessage"},a.createElement("div",{className:"userGender"},0===this.props.userInfo.gender?a.createElement("i",{className:"fa fa-venus",style:{color:"#fff"}}):a.createElement("i",{className:"fa fa-mars",style:{color:"#fff"}})),a.createElement("div",{style:{width:"100%",justifyContent:"center",display:"flex"}},r),a.createElement("div",{className:"rpyClr",style:{width:"100%",marginTop:"1rem",paddingLeft:"3rem"}},c),a.createElement("div",{className:"row",style:{width:"100%",paddingLeft:"3rem",marginTop:"0.4rem",alignItems:"center"}},a.createElement("div",null,this.props.userInfo.birthday?moment(this.props.userInfo.birthday).format("YYYY-MM-DD"):null),a.createElement("div",{style:{marginLeft:"0.6rem"}},"粉丝 ",this.props.userInfo.fanCount)),a.createElement("div",{className:"row",style:{width:"100%"}},a.createElement("div",{className:"column",style:{width:"60%",alignItems:"flex-start",paddingLeft:"1.6rem"}},a.createElement("div",{className:"userMessageOpt"},"帖数 ",this.props.userInfo.postCount),a.createElement("div",{className:"userMessageOpt"},"威望 ",this.props.userInfo.prestige),a.createElement("div",{className:"userMessageOpt"},"风评 ",this.props.userInfo.popularity)),a.createElement("div",{className:"column",style:{width:"40%",alignItems:"flex-start",paddingLeft:"1rem",justifyContent:"flex-end",marginBottom:"-0.25rem"}},a.createElement("button",{className:"replierBtn",id:this.state.isFollowing?"":"follow",onClick:this.state.isFollowing?this.unfollow:this.follow,disabled:this.state.buttonIsDisabled,style:{border:"none",marginBottom:"0.6rem"}},this.state.buttonInfo),a.createElement(s.Link,{to:n},a.createElement("button",{className:"replierBtn"},"私信")))))},t}(c.RouteComponent);t.Replier=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(15),c=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={postId:r.props.postid},r}return r(t,e),t.prototype.componentDidUpdate=function(){var e="doc-content"+this.props.postid;editormd.markdownToHTML(e,{htmlDecode:"style,script,iframe",emoji:!0,taskList:!0,tex:!0,flowChart:!0,sequenceDiagram:!0,codeFold:!0})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){return e="doc-content"+this.props.postid,editormd.markdownToHTML(e,{htmlDecode:"style,script,iframe",emoji:!0,taskList:!0,tex:!0,flowChart:!0,sequenceDiagram:!0,codeFold:!0}),this.setState({}),[2]})})},t.prototype.render=function(){var e,t="doc-content"+this.props.postid,n=a.createElement(s.UbbContainer,{code:this.props.content}),r=a.createElement("div",{id:t},a.createElement("textarea",{name:"editormd-markdown-doc",style:{display:"none"}},this.props.content));return e=n,1===this.props.contentType&&(e=r),a.createElement("div",{className:"reply-content"},a.createElement("div",{className:"substance"},e))},t}(a.Component);t.ReplyContent=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(15),u=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.showManageUI=r.showManageUI.bind(r),r.showJudgeUI=r.showJudgeUI.bind(r),r.state={likeNumber:r.props.likeInfo.likeCount,dislikeNumber:r.props.likeInfo.dislikeCount,likeState:r.props.likeInfo.likeState},r}return r(t,e),t.prototype.showManageUI=function(){var e="#manage"+this.props.postid;$(e).css("display","")},t.prototype.showJudgeUI=function(){var e="#judge"+this.props.postid;$(e).css("display","")},t.prototype.like=function(){return o(this,void 0,void 0,function(){var e,t,n;return i(this,function(r){switch(r.label){case 0:return e="#like"+this.props.postid,t="#dislike"+this.props.postid,1!==this.state.likeState?[3,2]:[4,s.like(this.props.topicid,this.props.postid,this.context.router)];case 1:return r.sent(),$(e).css("color","black"),[3,7];case 2:return 2!==this.state.likeState?[3,5]:[4,s.dislike(this.props.topicid,this.props.postid,this.context.router)];case 3:return r.sent(),[4,s.like(this.props.topicid,this.props.postid,this.context.router)];case 4:return r.sent(),$(e).css("color","red"),$(t).css("color","black"),[3,7];case 5:return[4,s.like(this.props.topicid,this.props.postid,this.context.router)];case 6:r.sent(),$(e).css("color","red"),r.label=7;case 7:return[4,s.refreshLikeState(this.props.topicid,this.props.postid)];case 8:return n=r.sent(),this.setState({likeNumber:n.likeCount,dislikeNumber:n.dislikeCount,likeState:n.likeState}),[2]}})})},t.prototype.dislike=function(){return o(this,void 0,void 0,function(){var e,t,n;return i(this,function(r){switch(r.label){case 0:return e="#like"+this.props.postid,t="#dislike"+this.props.postid,2!==this.state.likeState?[3,2]:[4,s.dislike(this.props.topicid,this.props.postid,this.context.router)];case 1:return r.sent(),$(t).css("color","black"),[3,7];case 2:return 1!==this.state.likeState?[3,5]:[4,s.like(this.props.topicid,this.props.postid,this.context.router)];case 3:return r.sent(),[4,s.dislike(this.props.topicid,this.props.postid,this.context.router)];case 4:return r.sent(),$(e).css("color","black"),$(t).css("color","red"),[3,7];case 5:return[4,s.dislike(this.props.topicid,this.props.postid,this.context.router)];case 6:r.sent(),$(t).css("color","red"),r.label=7;case 7:return[4,s.refreshLikeState(this.props.topicid,this.props.postid)];case 8:return n=r.sent(),this.setState({likeNumber:n.likeCount,dislikeNumber:n.dislikeCount,likeState:n.likeState}),[2]}})})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t,n,r;return i(this,function(o){return e="#like"+this.props.postid,t="#dislike"+this.props.postid,1===this.state.likeState?$(e).css("color","red"):2===this.state.likeState&&$(t).css("color","red"),n="icon"+this.props.postid,r="#icon"+this.props.postid,s.isMaster(this.props.masters)&&$(r).css("display",""),[2]})})},t.prototype.render=function(){var e="icon"+this.props.postid,t="like"+this.props.postid,n="dislike"+this.props.postid,r=a.createElement("div",{className:"signature",style:{borderTop:"#eaeaea solid thin",width:"100%"}},a.createElement(c.UbbContainer,{code:this.props.signature}));return this.props.signature||(r=null),a.createElement("div",{className:"column"},a.createElement("div",{className:"comment1"},a.createElement("div",{id:t,className:"upup",style:{marginRight:"0.7rem"},onClick:this.like.bind(this)},a.createElement("i",{title:"赞",className:"fa fa-thumbs-o-up fa-lg"}),a.createElement("span",{className:"commentProp"}," ",this.state.likeNumber)),a.createElement("div",{id:n,className:"downdown",onClick:this.dislike.bind(this)},a.createElement("i",{title:"踩",className:"fa fa-thumbs-o-down fa-lg"}),a.createElement("span",{className:"commentProp"}," ",this.state.dislikeNumber)),a.createElement("div",{id:"commentlike"},a.createElement("div",{style:{cursor:"pointer"},className:"commentbutton",onClick:this.showJudgeUI},"   评分"),a.createElement("div",{className:"operation1",id:e,style:{display:"none",cursor:"pointer"},onClick:this.showManageUI},"管理"))),a.createElement("div",{className:"row",style:{width:"100%"}},"  ",r))},t}(a.Component);t.ReplierSignature=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(163),u=n(164),l=n(160),p=n(161),f=n(162),h=n(165),d=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.update=r.update.bind(r),r.quote=r.quote.bind(r),r.state={inWaiting:!0,contents:[],masters:[]},r}return r(t,e),t.prototype.quote=function(e,t,n,r){this.props.quote(e,t,n,r)},t.prototype.update=function(){return o(this,void 0,void 0,function(){var e,t,n,r;return i(this,function(o){switch(o.label){case 0:return e=this.props.page||1,this.props.isHot?[4,s.getHotReplyContent(this.props.topicId)]:[3,2];case 1:return t=o.sent(),[3,7];case 2:return this.props.isTrace?[4,s.getUserInfo(this.props.userId)]:[3,5];case 3:return n=o.sent(),r=n.name,[4,s.getCurUserTopicContent(this.props.topicId,e,r,this.props.userId)];case 4:return t=o.sent(),[3,7];case 5:return[4,s.getTopicContent(this.props.topicId,e,this.props.topicInfo.replyCount)];case 6:t=o.sent(),o.label=7;case 7:return this.setState({contents:t}),[2]}})})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o;return i(this,function(i){switch(i.label){case 0:return this.setState({inWaiting:!0}),e=this.props.page||1,this.props.isHot?[4,s.getHotReplyContent(this.props.topicId)]:[3,2];case 1:return t=i.sent(),t||this.setState({inWaiting:!1,contents:[]}),[3,7];case 2:return this.props.isTrace?[4,s.getUserInfo(this.props.userId)]:[3,5];case 3:return n=i.sent(),r=n.name,[4,s.getCurUserTopicContent(this.props.topicId,e,r,this.props.userId)];case 4:return t=i.sent(),[3,7];case 5:return[4,s.getTopicContent(this.props.topicId,e,this.props.topicInfo.replyCount)];case 6:t=i.sent(),i.label=7;case 7:return o=this.props.boardInfo.boardMasters,this.setState({inWaiting:!1,contents:t,masters:o}),[2]}})})},t.prototype.componentWillReceiveProps=function(e){return o(this,void 0,void 0,function(){var t,n,r,o;return i(this,function(i){switch(i.label){case 0:return this.setState({inWaiting:!0}),t=e.page||1,console.log("newprops reply"),console.log(t),e.isHot?[4,s.getHotReplyContent(e.topicId)]:[3,2];case 1:return n=i.sent(),n||this.setState({inWaiting:!1,contents:[]}),[3,7];case 2:return e.isTrace?[4,s.getUserInfo(e.userId)]:[3,5];case 3:return r=i.sent(),o=r.name,[4,s.getCurUserTopicContent(e.topicId,t,o,e.userId)];case 4:return n=i.sent(),[3,7];case 5:return[4,s.getTopicContent(e.topicId,t,e.topicInfo.replyCount)];case 6:n=i.sent(),i.label=7;case 7:return this.setState({inWaiting:!1,contents:n}),[2]}})})},t.prototype.generateContents=function(e){var t=null;s.getLocalStorage("userInfo")&&(t=s.getLocalStorage("userInfo").privilege);var n=e.floor%10;return a.createElement("div",{className:"reply",id:n.toString()},a.createElement(c.Replier,{key:e.postId,userInfo:e.userInfo,isAnonymous:e.isAnonymous,topicid:e.topicId,replyTime:e.time,floor:e.floor,isDeleted:e.isDeleted,content:e.content,quote:this.quote,traceMode:!!this.props.isTrace,isHot:!!this.props.isHot}),a.createElement("div",{className:"column",style:{justifyContent:"space-between",width:"85%"}},a.createElement(f.Judge,{userId:e.userId,postId:e.postId,update:this.update,topicId:e.topicId}),a.createElement(p.PostManagement,{topicId:e.topicId,postId:e.postId,userId:e.userId,update:this.update,privilege:t}),a.createElement(u.ReplyContent,{key:e.content,postid:e.postId,content:e.content,contentType:e.contentType}),a.createElement(l.Award,{postId:e.postId,updateTime:Date.now(),awardInfo:e.awardInfo}),a.createElement(h.ReplierSignature,{signature:e.userInfo.signatureCode,topicid:e.topicId,userId:e.userId,masters:this.state.masters,postid:e.postId,likeInfo:e.likeInfo})))},t.prototype.componentDidUpdate=function(){if(window.location.hash&&"#"!==window.location.hash){var e=window.location.hash,t=e.split("#"),n=t[1];document.getElementById(n).scrollIntoView()}},t.prototype.render=function(){return this.props.isHot&&this.state.inWaiting?null:this.state.inWaiting?a.createElement("img",{src:"/images/waiting.gif"}):a.createElement("div",{className:"center",style:{width:"100%"}},this.state.contents.map(this.generateContents.bind(this)))},t}(a.Component);t.Reply=d;var m=function(){function e(){}return e}();t.ContentState=m},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:"user-avatar"},o.createElement("img",{className:"user-avatar-img",src:this.props.userAvatarImgURL}),o.createElement("div",{className:"user-badge"}))},t}(o.Component);t.UserCenterExactAvatar=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(9),u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={buttonInfo:n.props.userFanInfo.isFollowing?"已关注":"关注",buttonIsDisabled:!1,isFollowing:n.props.userFanInfo.isFollowing},n.unfollow=n.unfollow.bind(n),n.follow=n.follow.bind(n),n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){this.setState({buttonInfo:e.userFanInfo.isFollowing?"已关注":"关注",buttonIsDisabled:!1,isFollowing:e.userFanInfo.isFollowing})},t.prototype.unfollow=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){return this.setState({buttonIsDisabled:!0,buttonInfo:"取关中"}),e=s.unfollowUser(this.props.userFanInfo.id),e?this.setState({buttonIsDisabled:!1,buttonInfo:"重新关注",isFollowing:!1}):this.setState({buttonIsDisabled:!1,buttonInfo:"取关失败",isFollowing:!0}),[2]})})},t.prototype.follow=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return this.setState({buttonIsDisabled:!0,buttonInfo:"关注中"}),[4,s.followUser(this.props.userFanInfo.id)];case 1:return e=t.sent(),e?this.setState({buttonIsDisabled:!1,buttonInfo:"已关注",isFollowing:!0}):this.setState({buttonIsDisabled:!1,buttonInfo:"关注失败",isFollowing:!1}),[2]}})})},t.prototype.render=function(){var e=this;return a.createElement("div",{className:"user-center-myfollowings-user"},a.createElement("img",{src:this.props.userFanInfo.avatarImgURL}),a.createElement("p",null,a.createElement("span",{className:"user-center-myfollowings-user-id"},a.createElement(c.Link,{to:"/user/id/"+this.props.userFanInfo.id},this.props.userFanInfo.name)),"主题",a.createElement("span",{className:"user-center-myfollowings-user-posts"},this.props.userFanInfo.posts),"粉丝",a.createElement("span",{className:"user-center-myfollowings-user-fans"},this.props.userFanInfo.fans)),a.createElement("button",{key:this.props.userFanInfo.id,type:"button",className:this.state.isFollowing?"":"user-follow",onMouseOver:function(){e.state.isFollowing&&!e.state.buttonIsDisabled&&e.setState({buttonInfo:"取消关注"})},onMouseLeave:function(){e.state.isFollowing&&!e.state.buttonIsDisabled&&e.setState({buttonInfo:"已关注"})},onClick:this.state.isFollowing?this.unfollow:this.follow,disabled:this.state.buttonIsDisabled},this.state.buttonInfo),a.createElement(c.Link,{to:"/message/message?id="+this.props.userFanInfo.id},a.createElement("button",{className:"user-message",type:"button"},"私信")))},t}(a.Component);t.UserCenterMyFollowingsUser=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n){var r=e.call(this,t)||this;return r.statusCode=n,r}return r(t,e),t}(Error);t.HttpError=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(169),o=function(){function e(){}return e.prototype.get=function(e,t){return this.xhr("GET",e,t)},e.prototype.post=function(e,t,n){return this.xhr("POST",e,n,t)},e.prototype.xhr=function(e,t,n,o){return new Promise(function(i,a){var s=new XMLHttpRequest;s.open(e,t,!0),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),n&&n.forEach(function(e,t){return s.setRequestHeader(t,e)}),s.send(o),s.onload=function(){s.status>=200&&s.status<300?i(s.response||s.responseText):a(new r.HttpError(s.statusText,s.status))},s.onerror=function(){a(new r.HttpError(s.statusText,s.status))}})},e}();t.HttpClient=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(119),o=function(){function e(){this.name="json",this.type=1}return e.prototype.parseMessages=function(e){if(!e)return[];for(var t=r.TextMessageFormat.parse(e),n=[],o=0;o<t.length;++o)n.push(JSON.parse(t[o]));return n},e.prototype.writeMessage=function(e){return r.TextMessageFormat.write(JSON.stringify(e))},e}();t.JsonHubProtocol=o},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";(function(t,r){function o(e){return R.from(e)}function i(e){return R.isBuffer(e)||e instanceof B}function a(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?U(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function s(e,t){M=M||n(52),e=e||{},this.objectMode=!!e.objectMode,t instanceof M&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new W,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(z||(z=n(177).StringDecoder),this.decoder=new z(e.encoding),this.encoding=e.encoding)}function c(e){if(M=M||n(52),!(this instanceof c))return new c(e);this._readableState=new s(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),A.call(this)}function u(e,t,n,r,i){var a=e._readableState;if(null===t)a.reading=!1,m(e,a);else{var s;i||(s=p(a,t)),s?e.emit("error",s):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===R.prototype||(t=o(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):l(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?l(e,a,t,!1):y(e,a)):l(e,a,t,!1))):r||(a.reading=!1)}return f(a)}function l(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&g(e)),y(e,t)}function p(e,t){var n;return i(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function f(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function h(e){return e>=q?e=q:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function d(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=h(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function m(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,g(e)}}function g(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(H("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?j(v,e):v(e))}function v(e){H("emit readable"),e.emit("readable"),I(e)}function y(e,t){t.readingMore||(t.readingMore=!0,j(b,e,t))}function b(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(H("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function w(e){return function(){var t=e._readableState;H("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&L(e,"data")&&(t.flowing=!0,I(e))}}function E(e){H("readable nexttick read 0"),e.read(0)}function _(e,t){t.resumeScheduled||(t.resumeScheduled=!0,j(S,e,t))}function S(e,t){t.reading||(H("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),I(e),t.flowing&&!t.reading&&e.read(0)}function I(e){var t=e._readableState;for(H("flow",t.flowing);t.flowing&&null!==e.read(););}function C(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=N(e,t.buffer,t.decoder),n}function N(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?x(e,t):T(e,t),r}function x(e,t){var n=t.head,r=1,o=n.data;for(e-=o.length;n=n.next;){var i=n.data,a=e>i.length?i.length:e;if(a===i.length?o+=i:o+=i.slice(0,e),0===(e-=a)){a===i.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(a));break}++r}return t.length-=r,o}function T(e,t){var n=R.allocUnsafe(e),r=t.head,o=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var i=r.data,a=e>i.length?i.length:e;if(i.copy(n,n.length-e,0,a),0===(e-=a)){a===i.length?(++o,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(a));break}++o}return t.length-=o,n}function P(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,j(O,t,e))}function O(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function k(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var j=n(88);e.exports=c;var M,U=n(172);c.ReadableState=s;var L=(n(174).EventEmitter,function(e,t){return e.listeners(t).length}),A=n(175),R=n(58).Buffer,B=t.Uint8Array||function(){},F=n(66);F.inherits=n(59);var D=n(475),H=void 0;H=D&&D.debuglog?D.debuglog("stream"):function(){};var z,W=n(476),G=n(176);F.inherits(c,A);var Y=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),c.prototype.destroy=G.destroy,c.prototype._undestroy=G.undestroy,c.prototype._destroy=function(e,t){this.push(null),t(e)},c.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=R.from(e,t),t=""),n=!0),u(this,e,t,!1,n)},c.prototype.unshift=function(e){return u(this,e,null,!0,!1)},c.prototype.isPaused=function(){return!1===this._readableState.flowing},c.prototype.setEncoding=function(e){return z||(z=n(177).StringDecoder),this._readableState.decoder=new z(e),this._readableState.encoding=e,this};var q=8388608;c.prototype.read=function(e){H("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return H("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?P(this):g(this),null;if(0===(e=d(e,t))&&t.ended)return 0===t.length&&P(this),null;var r=t.needReadable;H("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,H("length less than watermark",r)),t.ended||t.reading?(r=!1,H("reading or ended",r)):r&&(H("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=d(n,t)));var o;return o=e>0?C(e,t):null,null===o?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&P(this)),null!==o&&this.emit("data",o),o},c.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},c.prototype.pipe=function(e,t){function n(e,t){H("onunpipe"),e===f&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,i())}function o(){H("onend"),e.end()}function i(){H("cleanup"),e.removeListener("close",u),e.removeListener("finish",l),e.removeListener("drain",g),e.removeListener("error",c),e.removeListener("unpipe",n),f.removeListener("end",o),f.removeListener("end",p),f.removeListener("data",s),v=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function s(t){H("ondata"),y=!1,!1!==e.write(t)||y||((1===h.pipesCount&&h.pipes===e||h.pipesCount>1&&-1!==k(h.pipes,e))&&!v&&(H("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,y=!0),f.pause())}function c(t){H("onerror",t),p(),e.removeListener("error",c),0===L(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",l),p()}function l(){H("onfinish"),e.removeListener("close",u),p()}function p(){H("unpipe"),f.unpipe(e)}var f=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,H("pipe count=%d opts=%j",h.pipesCount,t);var d=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr,m=d?o:p;h.endEmitted?j(m):f.once("end",m),e.on("unpipe",n);var g=w(f);e.on("drain",g);var v=!1,y=!1;return f.on("data",s),a(e,"error",c),e.once("close",u),e.once("finish",l),e.emit("pipe",f),h.flowing||(H("pipe resume"),f.resume()),e},c.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)r[i].emit("unpipe",this,n);return this}var a=k(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},c.prototype.on=function(e,t){var n=A.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&g(this):j(E,this))}return n},c.prototype.addListener=c.prototype.on,c.prototype.resume=function(){var e=this._readableState;return e.flowing||(H("resume"),e.flowing=!0,_(this,e)),this},c.prototype.pause=function(){return H("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(H("pause"),this._readableState.flowing=!1,this.emit("pause")),this},c.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(H("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(o){if(H("wrapped data"),t.decoder&&(o=t.decoder.write(o)),(!t.objectMode||null!==o&&void 0!==o)&&(t.objectMode||o&&o.length)){r.push(o)||(n=!0,e.pause())}});for(var o in e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var i=0;i<Y.length;i++)e.on(Y[i],r.emit.bind(r,Y[i]));return r._read=function(t){H("wrapped _read",t),n&&(n=!1,e.resume())},r},c._fromList=C}).call(t,n(51),n(65))},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,s,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),u=n.slice(),o=u.length,c=0;c<o;c++)u[c].apply(this,s);return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var o=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,o,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){e.exports=n(174).EventEmitter},function(e,t,n){"use strict";function r(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;if(r||o)return void(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||a(i,this,e));this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(a(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(e,t){e.emit("error",t)}var a=n(88);e.exports={destroy:r,undestroy:o}},function(e,t,n){"use strict";function r(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function o(e){var t=r(e);if("string"!=typeof t&&(y.isEncoding===b||!b(e)))throw new Error("Unknown encoding: "+e);return t||e}function i(e){this.encoding=o(e);var t;switch(this.encoding){case"utf16le":this.text=f,this.end=h,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=d,this.end=m,t=3;break;default:return this.write=g,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=y.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function s(e,t,n){var r=t.length-1;if(r<n)return 0;var o=a(t[r]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--r<n?0:(o=a(t[r]))>=0?(o>0&&(e.lastNeed=o-2),o):--r<n?0:(o=a(t[r]),o>=0?(o>0&&(2===o?o=0:e.lastNeed=o-3),o):0)}function c(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�".repeat(n);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�".repeat(n+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�".repeat(n+2)}}function u(e){var t=this.lastTotal-this.lastNeed,n=c(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){var n=s(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function p(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�".repeat(this.lastTotal-this.lastNeed):t}function f(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function h(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function d(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function m(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function g(e){return e.toString(this.encoding)}function v(e){return e&&e.length?this.write(e):""}var y=n(58).Buffer,b=y.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};t.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=p,i.prototype.text=l,i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";(function(t,r,o){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){x(t,e)}}function a(e){return U.from(e)}function s(e){return U.isBuffer(e)||e instanceof L}function c(){}function u(e,t){P=P||n(52),e=e||{},this.objectMode=!!e.objectMode,t instanceof P&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){y(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function l(e){if(P=P||n(52),!(R.call(l,this)||this instanceof P))return new l(e);this._writableState=new u(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),M.call(this)}function p(e,t){var n=new Error("write after end");e.emit("error",n),T(t,n)}function f(e,t,n,r){var o=!0,i=!1;return null===n?i=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),T(r,i),o=!1),o}function h(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=U.from(t,n)),t}function d(e,t,n,r,o,i){if(!n){var a=h(t,r,o);r!==a&&(n=!0,o="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:o,isBuf:n,callback:i,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else m(e,t,!1,s,r,o,i);return c}function m(e,t,n,r,o,i,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function g(e,t,n,r,o){--t.pendingcb,n?(T(o,r),T(C,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(o(r),e._writableState.errorEmitted=!0,e.emit("error",r),C(e,t))}function v(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function y(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if(v(n),t)g(e,n,r,t,o);else{var i=_(n);i||n.corked||n.bufferProcessing||!n.bufferedRequest||E(e,n),r?O(b,e,n,i,o):b(e,n,i,o)}}function b(e,t,n,r){n||w(e,t),t.pendingcb--,r(),C(e,t)}function w(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function E(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,c=!0;n;)o[s]=n,n.isBuf||(c=!1),n=n.next,s+=1;o.allBuffers=c,m(e,t,!0,t.length,o,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new i(t)}else{for(;n;){var u=n.chunk,l=n.encoding,p=n.callback;if(m(e,t,!1,t.objectMode?1:u.length,u,l,p),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function _(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function S(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),C(e,t)})}function I(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,T(S,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function C(e,t){var n=_(t);return n&&(I(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function N(e,t,n){t.ending=!0,C(e,t),n&&(t.finished?T(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function x(e,t,n){var r=e.entry;for(e.entry=null;r;){var o=r.callback;t.pendingcb--,o(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var T=n(88);e.exports=l;var P,O=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:T;l.WritableState=u;var k=n(66);k.inherits=n(59);var j={deprecate:n(479)},M=n(175),U=n(58).Buffer,L=o.Uint8Array||function(){},A=n(176);k.inherits(l,M),u.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(u.prototype,"buffer",{get:j.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var R;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(R=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(e){return!!R.call(this,e)||e&&e._writableState instanceof u}})):R=function(e){return e instanceof this},l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},l.prototype.write=function(e,t,n){var r=this._writableState,o=!1,i=s(e)&&!r.objectMode;return i&&!U.isBuffer(e)&&(e=a(e)),"function"==typeof t&&(n=t,t=null),i?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=c),r.ended?p(this,n):(i||f(this,r,e,n))&&(r.pendingcb++,o=d(this,r,i,e,t,n)),o},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||E(this,e))},l.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},l.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},l.prototype._writev=null,l.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||N(this,r,n)},Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),l.prototype.destroy=A.destroy,l.prototype._undestroy=A.undestroy,l.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,n(65),n(477).setImmediate,n(51))},function(e,t,n){"use strict";function r(e){this.afterTransform=function(t,n){return o(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function o(e,t,n){var r=e._transformState;r.transforming=!1;var o=r.writecb;if(!o)return e.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),o(t);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);s.call(this,e),this._transformState=new r(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,n){a(t,e,n)}):a(t)})}function a(e,t,n){if(t)return e.emit("error",t);null!==n&&void 0!==n&&e.push(n);var r=e._writableState,o=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(o.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=i;var s=n(52),c=n(66);c.inherits=n(59),c.inherits(i,s),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var n=this;s.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},function(e,t,n){n(181),n(378),e.exports=n(501)},function(e,t,n){n(182),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(262),n(263),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(110),n(286),n(287),n(139),n(288),n(289),n(290),n(291),n(292),n(142),n(144),n(145),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),e.exports=n(32)},function(e,t,n){"use strict";var r=n(4),o=n(16),i=n(10),a=n(0),s=n(18),c=n(36).KEY,u=n(6),l=n(67),p=n(53),f=n(41),h=n(8),d=n(122),m=n(90),g=n(183),v=n(70),y=n(3),b=n(20),w=n(27),E=n(40),_=n(45),S=n(125),I=n(21),C=n(11),N=n(43),x=I.f,T=C.f,P=S.f,O=r.Symbol,k=r.JSON,j=k&&k.stringify,M=h("_hidden"),U=h("toPrimitive"),L={}.propertyIsEnumerable,A=l("symbol-registry"),R=l("symbols"),B=l("op-symbols"),F=Object.prototype,D="function"==typeof O,H=r.QObject,z=!H||!H.prototype||!H.prototype.findChild,W=i&&u(function(){return 7!=_(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=x(F,t);r&&delete F[t],T(e,t,n),r&&e!==F&&T(F,t,r)}:T,G=function(e){var t=R[e]=_(O.prototype);return t._k=e,t},Y=D&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},q=function(e,t,n){return e===F&&q(B,t,n),y(e),t=w(t,!0),y(n),o(R,t)?(n.enumerable?(o(e,M)&&e[M][t]&&(e[M][t]=!1),n=_(n,{enumerable:E(0,!1)})):(o(e,M)||T(e,M,E(1,{})),e[M][t]=!0),W(e,t,n)):T(e,t,n)},$=function(e,t){y(e);for(var n,r=g(t=b(t)),o=0,i=r.length;i>o;)q(e,n=r[o++],t[n]);return e},V=function(e,t){return void 0===t?_(e):$(_(e),t)},J=function(e){var t=L.call(this,e=w(e,!0));return!(this===F&&o(R,e)&&!o(B,e))&&(!(t||!o(this,e)||!o(R,e)||o(this,M)&&this[M][e])||t)},X=function(e,t){if(e=b(e),t=w(t,!0),e!==F||!o(R,t)||o(B,t)){var n=x(e,t);return!n||!o(R,t)||o(e,M)&&e[M][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=P(b(e)),r=[],i=0;n.length>i;)o(R,t=n[i++])||t==M||t==c||r.push(t);return r},K=function(e){for(var t,n=e===F,r=P(n?B:b(e)),i=[],a=0;r.length>a;)!o(R,t=r[a++])||n&&!o(F,t)||i.push(R[t]);return i};D||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===F&&t.call(B,n),o(this,M)&&o(this[M],e)&&(this[M][e]=!1),W(this,e,E(1,n))};return i&&z&&W(F,e,{configurable:!0,set:t}),G(e)},s(O.prototype,"toString",function(){return this._k}),I.f=X,C.f=q,n(46).f=S.f=Q,n(61).f=J,n(69).f=K,i&&!n(42)&&s(F,"propertyIsEnumerable",J,!0),d.f=function(e){return G(h(e))}),a(a.G+a.W+a.F*!D,{Symbol:O});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)h(Z[ee++]);for(var te=N(h.store),ne=0;te.length>ne;)m(te[ne++]);a(a.S+a.F*!D,"Symbol",{for:function(e){return o(A,e+="")?A[e]:A[e]=O(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in A)if(A[t]===e)return t},useSetter:function(){z=!0},useSimple:function(){z=!1}}),a(a.S+a.F*!D,"Object",{create:V,defineProperty:q,defineProperties:$,getOwnPropertyDescriptor:X,getOwnPropertyNames:Q,getOwnPropertySymbols:K}),k&&a(a.S+a.F*(!D||u(function(){var e=O();return"[null]"!=j([e])||"{}"!=j({a:e})||"{}"!=j(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!Y(e)){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);return t=r[1],"function"==typeof t&&(n=t),!n&&v(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!Y(t))return t}),r[1]=t,j.apply(k,r)}}}),O.prototype[U]||n(17)(O.prototype,U,O.prototype.valueOf),p(O,"Symbol"),p(Math,"Math",!0),p(r.JSON,"JSON",!0)},function(e,t,n){var r=n(43),o=n(69),i=n(61);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var a,s=n(e),c=i.f,u=0;s.length>u;)c.call(e,a=s[u++])&&t.push(a);return t}},function(e,t,n){var r=n(0);r(r.S,"Object",{create:n(45)})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(10),"Object",{defineProperty:n(11).f})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(10),"Object",{defineProperties:n(124)})},function(e,t,n){var r=n(20),o=n(21).f;n(30)("getOwnPropertyDescriptor",function(){return function(e,t){return o(r(e),t)}})},function(e,t,n){var r=n(13),o=n(22);n(30)("getPrototypeOf",function(){return function(e){return o(r(e))}})},function(e,t,n){var r=n(13),o=n(43);n(30)("keys",function(){return function(e){return o(r(e))}})},function(e,t,n){n(30)("getOwnPropertyNames",function(){return n(125).f})},function(e,t,n){var r=n(7),o=n(36).onFreeze;n(30)("freeze",function(e){return function(t){return e&&r(t)?e(o(t)):t}})},function(e,t,n){var r=n(7),o=n(36).onFreeze;n(30)("seal",function(e){return function(t){return e&&r(t)?e(o(t)):t}})},function(e,t,n){var r=n(7),o=n(36).onFreeze;n(30)("preventExtensions",function(e){return function(t){return e&&r(t)?e(o(t)):t}})},function(e,t,n){var r=n(7);n(30)("isFrozen",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){var r=n(7);n(30)("isSealed",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){var r=n(7);n(30)("isExtensible",function(e){return function(t){return!!r(t)&&(!e||e(t))}})},function(e,t,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(126)})},function(e,t,n){var r=n(0);r(r.S,"Object",{is:n(199)})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){var r=n(0);r(r.S,"Object",{setPrototypeOf:n(94).set})},function(e,t,n){"use strict";var r=n(62),o={};o[n(8)("toStringTag")]="z",o+""!="[object z]"&&n(18)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,n){var r=n(0);r(r.P,"Function",{bind:n(127)})},function(e,t,n){var r=n(11).f,o=Function.prototype,i=/^\s*function ([^ (]*)/;"name"in o||n(10)&&r(o,"name",{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(7),o=n(22),i=n(8)("hasInstance"),a=Function.prototype;i in a||n(11).f(a,i,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=o(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(0),o=n(129);r(r.G+r.F*(parseInt!=o),{parseInt:o})},function(e,t,n){var r=n(0),o=n(130);r(r.G+r.F*(parseFloat!=o),{parseFloat:o})},function(e,t,n){"use strict";var r=n(4),o=n(16),i=n(24),a=n(96),s=n(27),c=n(6),u=n(46).f,l=n(21).f,p=n(11).f,f=n(54).trim,h=r.Number,d=h,m=h.prototype,g="Number"==i(n(45)(m)),v="trim"in String.prototype,y=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=v?t.trim():f(t,3);var n,r,o,i=t.charCodeAt(0);if(43===i||45===i){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+t}for(var a,c=t.slice(2),u=0,l=c.length;u<l;u++)if((a=c.charCodeAt(u))<48||a>o)return NaN;return parseInt(c,r)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof h&&(g?c(function(){m.valueOf.call(n)}):"Number"!=i(n))?a(new d(y(t)),n,h):y(t)};for(var b,w=n(10)?u(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;w.length>E;E++)o(d,b=w[E])&&!o(h,b)&&p(h,b,l(d,b));h.prototype=m,m.constructor=h,n(18)(r,"Number",h)}},function(e,t,n){"use strict";var r=n(0),o=n(29),i=n(131),a=n(97),s=1..toFixed,c=Math.floor,u=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",p=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*u[n],u[n]=r%1e7,r=c(r/1e7)},f=function(e){for(var t=6,n=0;--t>=0;)n+=u[t],u[t]=c(n/e),n=n%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==u[e]){var n=String(u[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t},d=function(e,t,n){return 0===t?n:t%2==1?d(e,t-1,n*e):d(e*e,t/2,n)},m=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(6)(function(){s.call({})})),"Number",{toFixed:function(e){var t,n,r,s,c=i(this,l),u=o(e),g="",v="0";if(u<0||u>20)throw RangeError(l);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(g="-",c=-c),c>1e-21)if(t=m(c*d(2,69,1))-69,n=t<0?c*d(2,-t,1):c/d(2,t,1),n*=4503599627370496,(t=52-t)>0){for(p(0,n),r=u;r>=7;)p(1e7,0),r-=7;for(p(d(10,r,1),0),r=t-1;r>=23;)f(1<<23),r-=23;f(1<<r),p(1,1),f(2),v=h()}else p(0,n),p(1<<-t,0),v=h()+a.call("0",u);return u>0?(s=v.length,v=g+(s<=u?"0."+a.call("0",u-s)+v:v.slice(0,s-u)+"."+v.slice(s-u))):v=g+v,v}})},function(e,t,n){"use strict";var r=n(0),o=n(6),i=n(131),a=1..toPrecision;r(r.P+r.F*(o(function(){return"1"!==a.call(1,void 0)})||!o(function(){a.call({})})),"Number",{toPrecision:function(e){var t=i(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(0),o=n(4).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&o(e)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{isInteger:n(132)})},function(e,t,n){var r=n(0);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(0),o=n(132),i=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return o(e)&&i(e)<=9007199254740991}})},function(e,t,n){var r=n(0);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(0);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(0),o=n(130);r(r.S+r.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},function(e,t,n){var r=n(0),o=n(129);r(r.S+r.F*(Number.parseInt!=o),"Number",{parseInt:o})},function(e,t,n){var r=n(0),o=n(133),i=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:o(e-1+i(e-1)*i(e+1))}})},function(e,t,n){function r(e){return isFinite(e=+e)&&0!=e?e<0?-r(-e):Math.log(e+Math.sqrt(e*e+1)):e}var o=n(0),i=Math.asinh;o(o.S+o.F*!(i&&1/i(0)>0),"Math",{asinh:r})},function(e,t,n){var r=n(0),o=Math.atanh;r(r.S+r.F*!(o&&1/o(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(0),o=n(98);r(r.S,"Math",{cbrt:function(e){return o(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(0),o=Math.exp;r(r.S,"Math",{cosh:function(e){return(o(e=+e)+o(-e))/2}})},function(e,t,n){var r=n(0),o=n(99);r(r.S+r.F*(o!=Math.expm1),"Math",{expm1:o})},function(e,t,n){var r=n(0);r(r.S,"Math",{fround:n(134)})},function(e,t,n){var r=n(0),o=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,i=0,a=0,s=arguments.length,c=0;a<s;)n=o(arguments[a++]),c<n?(r=c/n,i=i*r*r+1,c=n):n>0?(r=n/c,i+=r*r):i+=n;return c===1/0?1/0:c*Math.sqrt(i)}})},function(e,t,n){var r=n(0),o=Math.imul;r(r.S+r.F*n(6)(function(){return-5!=o(4294967295,5)||2!=o.length}),"Math",{imul:function(e,t){var n=+e,r=+t,o=65535&n,i=65535&r;return 0|o*i+((65535&n>>>16)*i+o*(65535&r>>>16)<<16>>>0)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log1p:n(133)})},function(e,t,n){var r=n(0);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(0);r(r.S,"Math",{sign:n(98)})},function(e,t,n){var r=n(0),o=n(99),i=Math.exp;r(r.S+r.F*n(6)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(o(e)-o(-e))/2:(i(e-1)-i(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(0),o=n(99),i=Math.exp;r(r.S,"Math",{tanh:function(e){var t=o(e=+e),n=o(-e);return t==1/0?1:n==1/0?-1:(t-n)/(i(e)+i(-e))}})},function(e,t,n){var r=n(0);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var r=n(0),o=n(44),i=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],o(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?i(t):i(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(0),o=n(20),i=n(12);r(r.S,"String",{raw:function(e){for(var t=o(e.raw),n=i(t.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){"use strict";n(54)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){"use strict";var r=n(100)(!0);n(101)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";var r=n(0),o=n(100)(!1);r(r.P,"String",{codePointAt:function(e){return o(this,e)}})},function(e,t,n){"use strict";var r=n(0),o=n(12),i=n(103),a="".endsWith;r(r.P+r.F*n(104)("endsWith"),"String",{endsWith:function(e){var t=i(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=o(t.length),s=void 0===n?r:Math.min(o(n),r),c=String(e);return a?a.call(t,c,s):t.slice(s-c.length,s)===c}})},function(e,t,n){"use strict";var r=n(0),o=n(103);r(r.P+r.F*n(104)("includes"),"String",{includes:function(e){return!!~o(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(0);r(r.P,"String",{repeat:n(97)})},function(e,t,n){"use strict";var r=n(0),o=n(12),i=n(103),a="".startsWith;r(r.P+r.F*n(104)("startsWith"),"String",{startsWith:function(e){var t=i(this,e,"startsWith"),n=o(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return a?a.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(19)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,n){"use strict";n(19)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,n){"use strict";n(19)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,n){"use strict";n(19)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,n){"use strict";n(19)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,n){"use strict";n(19)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,n){"use strict";n(19)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,n){"use strict";n(19)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,n){"use strict";n(19)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,n){"use strict";n(19)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,n){"use strict";n(19)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,n){"use strict";n(19)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,n){"use strict";n(19)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,n){var r=n(0);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(0),o=n(13),i=n(27);r(r.P+r.F*n(6)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=o(this),n=i(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(0),o=n(261);r(r.P+r.F*(Date.prototype.toISOString!==o),"Date",{toISOString:o})},function(e,t,n){"use strict";var r=n(6),o=Date.prototype.getTime,i=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=i.call(new Date(-5e13-1))})||!r(function(){i.call(new Date(NaN))})?function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:i},function(e,t,n){var r=Date.prototype,o=r.toString,i=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(18)(r,"toString",function(){var e=i.call(this);return e===e?o.call(this):"Invalid Date"})},function(e,t,n){var r=n(8)("toPrimitive"),o=Date.prototype;r in o||n(17)(o,r,n(264))},function(e,t,n){"use strict";var r=n(3),o=n(27);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return o(r(this),"number"!=e)}},function(e,t,n){var r=n(0);r(r.S,"Array",{isArray:n(70)})},function(e,t,n){"use strict";var r=n(23),o=n(0),i=n(13),a=n(135),s=n(105),c=n(12),u=n(106),l=n(107);o(o.S+o.F*!n(72)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,o,p,f=i(e),h="function"==typeof this?this:Array,d=arguments.length,m=d>1?arguments[1]:void 0,g=void 0!==m,v=0,y=l(f);if(g&&(m=r(m,d>2?arguments[2]:void 0,2)),void 0==y||h==Array&&s(y))for(t=c(f.length),n=new h(t);t>v;v++)u(n,v,g?m(f[v],v):f[v]);else for(p=y.call(f),n=new h;!(o=p.next()).done;v++)u(n,v,g?a(p,m,[o.value,v],!0):o.value);return n.length=v,n}})},function(e,t,n){"use strict";var r=n(0),o=n(106);r(r.S+r.F*n(6)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)o(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(0),o=n(20),i=[].join;r(r.P+r.F*(n(60)!=Object||!n(25)(i)),"Array",{join:function(e){return i.call(o(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(0),o=n(93),i=n(24),a=n(44),s=n(12),c=[].slice;r(r.P+r.F*n(6)(function(){o&&c.call(o)}),"Array",{slice:function(e,t){var n=s(this.length),r=i(this);if(t=void 0===t?n:t,"Array"==r)return c.call(this,e,t);for(var o=a(e,n),u=a(t,n),l=s(u-o),p=Array(l),f=0;f<l;f++)p[f]="String"==r?this.charAt(o+f):this[o+f];return p}})},function(e,t,n){"use strict";var r=n(0),o=n(14),i=n(13),a=n(6),s=[].sort,c=[1,2,3];r(r.P+r.F*(a(function(){c.sort(void 0)})||!a(function(){c.sort(null)})||!n(25)(s)),"Array",{sort:function(e){return void 0===e?s.call(i(this)):s.call(i(this),o(e))}})},function(e,t,n){"use strict";var r=n(0),o=n(31)(0),i=n(25)([].forEach,!0);r(r.P+r.F*!i,"Array",{forEach:function(e){return o(this,e,arguments[1])}})},function(e,t,n){var r=n(7),o=n(70),i=n(8)("species");e.exports=function(e){var t;return o(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(0),o=n(31)(1);r(r.P+r.F*!n(25)([].map,!0),"Array",{map:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),o=n(31)(2);r(r.P+r.F*!n(25)([].filter,!0),"Array",{filter:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),o=n(31)(3);r(r.P+r.F*!n(25)([].some,!0),"Array",{some:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),o=n(31)(4);r(r.P+r.F*!n(25)([].every,!0),"Array",{every:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),o=n(136);r(r.P+r.F*!n(25)([].reduce,!0),"Array",{reduce:function(e){return o(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(0),o=n(136);r(r.P+r.F*!n(25)([].reduceRight,!0),"Array",{reduceRight:function(e){return o(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(0),o=n(68)(!1),i=[].indexOf,a=!!i&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(25)(i)),"Array",{indexOf:function(e){return a?i.apply(this,arguments)||0:o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),o=n(20),i=n(29),a=n(12),s=[].lastIndexOf,c=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(c||!n(25)(s)),"Array",{lastIndexOf:function(e){if(c)return s.apply(this,arguments)||0;var t=o(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,i(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(0);r(r.P,"Array",{copyWithin:n(137)}),n(37)("copyWithin")},function(e,t,n){var r=n(0);r(r.P,"Array",{fill:n(109)}),n(37)("fill")},function(e,t,n){"use strict";var r=n(0),o=n(31)(5),i=!0;"find"in[]&&Array(1).find(function(){i=!1}),r(r.P+r.F*i,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(37)("find")},function(e,t,n){"use strict";var r=n(0),o=n(31)(6),i="findIndex",a=!0;i in[]&&Array(1)[i](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(37)(i)},function(e,t,n){n(47)("Array")},function(e,t,n){var r=n(4),o=n(96),i=n(11).f,a=n(46).f,s=n(71),c=n(73),u=r.RegExp,l=u,p=u.prototype,f=/a/g,h=/a/g,d=new u(f)!==f;if(n(10)&&(!d||n(6)(function(){return h[n(8)("match")]=!1,u(f)!=f||u(h)==h||"/a/i"!=u(f,"i")}))){u=function(e,t){var n=this instanceof u,r=s(e),i=void 0===t;return!n&&r&&e.constructor===u&&i?e:o(d?new l(r&&!i?e.source:e,t):l((r=e instanceof u)?e.source:e,r&&i?c.call(e):t),n?this:p,u)};for(var m=a(l),g=0;m.length>g;)!function(e){e in u||i(u,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})}(m[g++]);p.constructor=u,u.prototype=p,n(18)(r,"RegExp",u)}n(47)("RegExp")},function(e,t,n){"use strict";n(139);var r=n(3),o=n(73),i=n(10),a=/./.toString,s=function(e){n(18)(RegExp.prototype,"toString",e,!0)};n(6)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?s(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!i&&e instanceof RegExp?o.call(e):void 0)}):"toString"!=a.name&&s(function(){return a.call(this)})},function(e,t,n){n(74)("match",1,function(e,t,n){return[function(n){"use strict";var r=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},n]})},function(e,t,n){n(74)("replace",2,function(e,t,n){return[function(r,o){"use strict";var i=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,i,o):n.call(String(i),r,o)},n]})},function(e,t,n){n(74)("search",1,function(e,t,n){return[function(n){"use strict";var r=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},n]})},function(e,t,n){n(74)("split",2,function(e,t,r){"use strict";var o=n(71),i=r,a=[].push,s="length";if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[s]||2!="ab".split(/(?:ab)*/)[s]||4!=".".split(/(.?)(.?)/)[s]||".".split(/()()/)[s]>1||"".split(/.?/)[s]){var c=void 0===/()??/.exec("")[1];r=function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!o(e))return i.call(n,e,t);var r,u,l,p,f,h=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,g=void 0===t?4294967295:t>>>0,v=new RegExp(e.source,d+"g");for(c||(r=new RegExp("^"+v.source+"$(?!\\s)",d));(u=v.exec(n))&&!((l=u.index+u[0][s])>m&&(h.push(n.slice(m,u.index)),!c&&u[s]>1&&u[0].replace(r,function(){for(f=1;f<arguments[s]-2;f++)void 0===arguments[f]&&(u[f]=void 0)}),u[s]>1&&u.index<n[s]&&a.apply(h,u.slice(1)),p=u[0][s],m=l,h[s]>=g));)v.lastIndex===u.index&&v.lastIndex++;return m===n[s]?!p&&v.test("")||h.push(""):h.push(n.slice(m)),h[s]>g?h.slice(0,g):h}}else"0".split(void 0,0)[s]&&(r=function(e,t){return void 0===e&&0===t?[]:i.call(this,e,t)});return[function(n,o){var i=e(this),a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,i,o):r.call(String(i),n,o)},r]})},function(e,t,n){"use strict";var r,o,i,a,s=n(42),c=n(4),u=n(23),l=n(62),p=n(0),f=n(7),h=n(14),d=n(48),m=n(49),g=n(75),v=n(111).set,y=n(112)(),b=n(113),w=n(140),E=n(141),_=c.TypeError,S=c.process,I=c.Promise,C="process"==l(S),N=function(){},x=o=b.f,T=!!function(){try{var e=I.resolve(1),t=(e.constructor={})[n(8)("species")]=function(e){e(N,N)};return(C||"function"==typeof PromiseRejectionEvent)&&e.then(N)instanceof t}catch(e){}}(),P=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},O=function(e,t){if(!e._n){e._n=!0;var n=e._c;y(function(){for(var r=e._v,o=1==e._s,i=0;n.length>i;)!function(t){var n,i,a=o?t.ok:t.fail,s=t.resolve,c=t.reject,u=t.domain;try{a?(o||(2==e._h&&M(e),e._h=1),!0===a?n=r:(u&&u.enter(),n=a(r),u&&u.exit()),n===t.promise?c(_("Promise-chain cycle")):(i=P(n))?i.call(n,s,c):s(n)):c(r)}catch(e){c(e)}}(n[i++]);e._c=[],e._n=!1,t&&!e._h&&k(e)})}},k=function(e){v.call(c,function(){var t,n,r,o=e._v,i=j(e);if(i&&(t=w(function(){C?S.emit("unhandledRejection",o,e):(n=c.onunhandledrejection)?n({promise:e,reason:o}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=C||j(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},j=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!j(t.promise))return!1;return!0},M=function(e){v.call(c,function(){var t;C?S.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})})},U=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),O(t,!0))},L=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw _("Promise can't be resolved itself");(t=P(e))?y(function(){var r={_w:n,_d:!1};try{t.call(e,u(L,r,1),u(U,r,1))}catch(e){U.call(r,e)}}):(n._v=e,n._s=1,O(n,!1))}catch(e){U.call({_w:n,_d:!1},e)}}};T||(I=function(e){d(this,I,"Promise","_h"),h(e),r.call(this);try{e(u(L,this,1),u(U,this,1))}catch(e){U.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(50)(I.prototype,{then:function(e,t){var n=x(g(this,I));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=C?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&O(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r;this.promise=e,this.resolve=u(L,e,1),this.reject=u(U,e,1)},b.f=x=function(e){return e===I||e===a?new i(e):o(e)}),p(p.G+p.W+p.F*!T,{Promise:I}),n(53)(I,"Promise"),n(47)("Promise"),a=n(32).Promise,p(p.S+p.F*!T,"Promise",{reject:function(e){var t=x(this);return(0,t.reject)(e),t.promise}}),p(p.S+p.F*(s||!T),"Promise",{resolve:function(e){return E(s&&this===a?I:this,e)}}),p(p.S+p.F*!(T&&n(72)(function(e){I.all(e).catch(N)})),"Promise",{all:function(e){var t=this,n=x(t),r=n.resolve,o=n.reject,i=w(function(){var n=[],i=0,a=1;m(e,!1,function(e){var s=i++,c=!1;n.push(void 0),a++,t.resolve(e).then(function(e){c||(c=!0,n[s]=e,--a||r(n))},o)}),--a||r(n)});return i.e&&o(i.v),n.promise},race:function(e){var t=this,n=x(t),r=n.reject,o=w(function(){m(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},function(e,t,n){"use strict";var r=n(146),o=n(56);n(76)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(o(this,"WeakSet"),e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(0),o=n(77),i=n(114),a=n(3),s=n(44),c=n(12),u=n(7),l=n(4).ArrayBuffer,p=n(75),f=i.ArrayBuffer,h=i.DataView,d=o.ABV&&l.isView,m=f.prototype.slice,g=o.VIEW;r(r.G+r.W+r.F*(l!==f),{ArrayBuffer:f}),r(r.S+r.F*!o.CONSTR,"ArrayBuffer",{isView:function(e){return d&&d(e)||u(e)&&g in e}}),r(r.P+r.U+r.F*n(6)(function(){return!new f(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==m&&void 0===t)return m.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),o=s(void 0===t?n:t,n),i=new(p(this,f))(c(o-r)),u=new h(this),l=new h(i),d=0;r<o;)l.setUint8(d++,u.getUint8(r++));return i}}),n(47)("ArrayBuffer")},function(e,t,n){var r=n(0);r(r.G+r.W+r.F*!n(77).ABV,{DataView:n(114).DataView})},function(e,t,n){n(33)("Int8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(33)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(33)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}},!0)},function(e,t,n){n(33)("Int16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(33)("Uint16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(33)("Int32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(33)("Uint32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(33)("Float32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(33)("Float64",8,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){var r=n(0),o=n(14),i=n(3),a=(n(4).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(6)(function(){a(function(){})}),"Reflect",{apply:function(e,t,n){var r=o(e),c=i(n);return a?a(r,t,c):s.call(r,t,c)}})},function(e,t,n){var r=n(0),o=n(45),i=n(14),a=n(3),s=n(7),c=n(6),u=n(127),l=(n(4).Reflect||{}).construct,p=c(function(){function e(){}return!(l(function(){},[],e)instanceof e)}),f=!c(function(){l(function(){})});r(r.S+r.F*(p||f),"Reflect",{construct:function(e,t){i(e),a(t);var n=arguments.length<3?e:i(arguments[2]);if(f&&!p)return l(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var c=n.prototype,h=o(s(c)?c:Object.prototype),d=Function.apply.call(e,h,t);return s(d)?d:h}})},function(e,t,n){var r=n(11),o=n(0),i=n(3),a=n(27);o(o.S+o.F*n(6)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){i(e),t=a(t,!0),i(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(0),o=n(21).f,i=n(3);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=o(i(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var r=n(0),o=n(3),i=function(e){this._t=o(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(102)(i,"Object",function(){var e,t=this,n=t._k;do{if(t._i>=n.length)return{value:void 0,done:!0}}while(!((e=n[t._i++])in t._t));return{value:e,done:!1}}),r(r.S,"Reflect",{enumerate:function(e){return new i(e)}})},function(e,t,n){function r(e,t){var n,s,l=arguments.length<3?e:arguments[2];return u(e)===l?e[t]:(n=o.f(e,t))?a(n,"value")?n.value:void 0!==n.get?n.get.call(l):void 0:c(s=i(e))?r(s,t,l):void 0}var o=n(21),i=n(22),a=n(16),s=n(0),c=n(7),u=n(3);s(s.S,"Reflect",{get:r})},function(e,t,n){var r=n(21),o=n(0),i=n(3);o(o.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(i(e),t)}})},function(e,t,n){var r=n(0),o=n(22),i=n(3);r(r.S,"Reflect",{getPrototypeOf:function(e){return o(i(e))}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(0),o=n(3),i=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return o(e),!i||i(e)}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{ownKeys:n(148)})},function(e,t,n){var r=n(0),o=n(3),i=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){o(e);try{return i&&i(e),!0}catch(e){return!1}}})},function(e,t,n){function r(e,t,n){var c,f,h=arguments.length<4?e:arguments[3],d=i.f(l(e),t);if(!d){if(p(f=a(e)))return r(f,t,n,h);d=u(0)}return s(d,"value")?!(!1===d.writable||!p(h))&&(c=i.f(h,t)||u(0),c.value=n,o.f(h,t,c),!0):void 0!==d.set&&(d.set.call(h,n),!0)}var o=n(11),i=n(21),a=n(22),s=n(16),c=n(0),u=n(40),l=n(3),p=n(7);c(c.S,"Reflect",{set:r})},function(e,t,n){var r=n(0),o=n(94);o&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){o.check(e,t);try{return o.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){"use strict";var r=n(0),o=n(68)(!0);r(r.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(37)("includes")},function(e,t,n){"use strict";var r=n(0),o=n(149),i=n(13),a=n(12),s=n(14),c=n(108);r(r.P,"Array",{flatMap:function(e){var t,n,r=i(this);return s(e),t=a(r.length),n=c(r,0),o(n,r,r,t,0,1,e,arguments[1]),n}}),n(37)("flatMap")},function(e,t,n){"use strict";var r=n(0),o=n(149),i=n(13),a=n(12),s=n(29),c=n(108);r(r.P,"Array",{flatten:function(){var e=arguments[0],t=i(this),n=a(t.length),r=c(t,0);return o(r,t,t,n,0,void 0===e?1:s(e)),r}}),n(37)("flatten")},function(e,t,n){"use strict";var r=n(0),o=n(100)(!0);r(r.P,"String",{at:function(e){return o(this,e)}})},function(e,t,n){"use strict";var r=n(0),o=n(150);r(r.P,"String",{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){"use strict";var r=n(0),o=n(150);r(r.P,"String",{padEnd:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";n(54)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,n){"use strict";n(54)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,n){"use strict";var r=n(0),o=n(28),i=n(12),a=n(71),s=n(73),c=RegExp.prototype,u=function(e,t){this._r=e,this._s=t};n(102)(u,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),r(r.P,"String",{matchAll:function(e){if(o(this),!a(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in c?String(e.flags):s.call(e),r=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=i(e.lastIndex),new u(r,t)}})},function(e,t,n){n(90)("asyncIterator")},function(e,t,n){n(90)("observable")},function(e,t,n){var r=n(0),o=n(148),i=n(20),a=n(21),s=n(106);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=i(e),c=a.f,u=o(r),l={},p=0;u.length>p;)void 0!==(n=c(r,t=u[p++]))&&s(l,t,n);return l}})},function(e,t,n){var r=n(0),o=n(151)(!1);r(r.S,"Object",{values:function(e){return o(e)}})},function(e,t,n){var r=n(0),o=n(151)(!0);r(r.S,"Object",{entries:function(e){return o(e)}})},function(e,t,n){"use strict";var r=n(0),o=n(13),i=n(14),a=n(11);n(10)&&r(r.P+n(78),"Object",{__defineGetter__:function(e,t){a.f(o(this),e,{get:i(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(0),o=n(13),i=n(14),a=n(11);n(10)&&r(r.P+n(78),"Object",{__defineSetter__:function(e,t){a.f(o(this),e,{set:i(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(0),o=n(13),i=n(27),a=n(22),s=n(21).f;n(10)&&r(r.P+n(78),"Object",{__lookupGetter__:function(e){var t,n=o(this),r=i(e,!0);do{if(t=s(n,r))return t.get}while(n=a(n))}})},function(e,t,n){"use strict";var r=n(0),o=n(13),i=n(27),a=n(22),s=n(21).f;n(10)&&r(r.P+n(78),"Object",{__lookupSetter__:function(e){var t,n=o(this),r=i(e,!0);do{if(t=s(n,r))return t.set}while(n=a(n))}})},function(e,t,n){var r=n(0);r(r.P+r.R,"Map",{toJSON:n(152)("Map")})},function(e,t,n){var r=n(0);r(r.P+r.R,"Set",{toJSON:n(152)("Set")})},function(e,t,n){n(79)("Map")},function(e,t,n){n(79)("Set")},function(e,t,n){n(79)("WeakMap")},function(e,t,n){n(79)("WeakSet")},function(e,t,n){n(80)("Map")},function(e,t,n){n(80)("Set")},function(e,t,n){n(80)("WeakMap")},function(e,t,n){n(80)("WeakSet")},function(e,t,n){var r=n(0);r(r.G,{global:n(4)})},function(e,t,n){var r=n(0);r(r.S,"System",{global:n(4)})},function(e,t,n){var r=n(0),o=n(24);r(r.S,"Error",{isError:function(e){return"Error"===o(e)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{clamp:function(e,t,n){return Math.min(n,Math.max(t,e))}})},function(e,t,n){var r=n(0);r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,n){var r=n(0),o=180/Math.PI;r(r.S,"Math",{degrees:function(e){return e*o}})},function(e,t,n){var r=n(0),o=n(154),i=n(134);r(r.S,"Math",{fscale:function(e,t,n,r,a){return i(o(e,t,n,r,a))}})},function(e,t,n){var r=n(0);r(r.S,"Math",{iaddh:function(e,t,n,r){var o=e>>>0,i=t>>>0,a=n>>>0;return i+(r>>>0)+((o&a|(o|a)&~(o+a>>>0))>>>31)|0}})},function(e,t,n){var r=n(0);r(r.S,"Math",{isubh:function(e,t,n,r){var o=e>>>0,i=t>>>0,a=n>>>0;return i-(r>>>0)-((~o&a|~(o^a)&o-a>>>0)>>>31)|0}})},function(e,t,n){var r=n(0);r(r.S,"Math",{imulh:function(e,t){var n=+e,r=+t,o=65535&n,i=65535&r,a=n>>16,s=r>>16,c=(a*i>>>0)+(o*i>>>16);return a*s+(c>>16)+((o*s>>>0)+(65535&c)>>16)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,n){var r=n(0),o=Math.PI/180;r(r.S,"Math",{radians:function(e){return e*o}})},function(e,t,n){var r=n(0);r(r.S,"Math",{scale:n(154)})},function(e,t,n){var r=n(0);r(r.S,"Math",{umulh:function(e,t){var n=+e,r=+t,o=65535&n,i=65535&r,a=n>>>16,s=r>>>16,c=(a*i>>>0)+(o*i>>>16);return a*s+(c>>>16)+((o*s>>>0)+(65535&c)>>>16)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}})},function(e,t,n){"use strict";var r=n(0),o=n(32),i=n(4),a=n(75),s=n(141);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,o.Promise||i.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var r=n(0),o=n(113),i=n(140);r(r.S,"Promise",{try:function(e){var t=o.f(this),n=i(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){var r=n(34),o=n(3),i=r.key,a=r.set;r.exp({defineMetadata:function(e,t,n,r){a(e,t,o(n),i(r))}})},function(e,t,n){var r=n(34),o=n(3),i=r.key,a=r.map,s=r.store;r.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:i(arguments[2]),r=a(o(t),n,!1);if(void 0===r||!r.delete(e))return!1;if(r.size)return!0;var c=s.get(t);return c.delete(n),!!c.size||s.delete(t)}})},function(e,t,n){var r=n(34),o=n(3),i=n(22),a=r.has,s=r.get,c=r.key,u=function(e,t,n){if(a(e,t,n))return s(e,t,n);var r=i(t);return null!==r?u(e,r,n):void 0};r.exp({getMetadata:function(e,t){return u(e,o(t),arguments.length<3?void 0:c(arguments[2]))}})},function(e,t,n){var r=n(144),o=n(153),i=n(34),a=n(3),s=n(22),c=i.keys,u=i.key,l=function(e,t){var n=c(e,t),i=s(e);if(null===i)return n;var a=l(i,t);return a.length?n.length?o(new r(n.concat(a))):a:n};i.exp({getMetadataKeys:function(e){return l(a(e),arguments.length<2?void 0:u(arguments[1]))}})},function(e,t,n){var r=n(34),o=n(3),i=r.get,a=r.key;r.exp({getOwnMetadata:function(e,t){return i(e,o(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var r=n(34),o=n(3),i=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(e){return i(o(e),arguments.length<2?void 0:a(arguments[1]))}})},function(e,t,n){var r=n(34),o=n(3),i=n(22),a=r.has,s=r.key,c=function(e,t,n){if(a(e,t,n))return!0;var r=i(t);return null!==r&&c(e,r,n)};r.exp({hasMetadata:function(e,t){return c(e,o(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){var r=n(34),o=n(3),i=r.has,a=r.key;r.exp({hasOwnMetadata:function(e,t){return i(e,o(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var r=n(34),o=n(3),i=n(14),a=r.key,s=r.set;r.exp({metadata:function(e,t){return function(n,r){s(e,t,(void 0!==r?o:i)(n),a(r))}}})},function(e,t,n){var r=n(0),o=n(112)(),i=n(4).process,a="process"==n(24)(i);r(r.G,{asap:function(e){var t=a&&i.domain;o(t?t.bind(e):e)}})},function(e,t,n){"use strict";var r=n(0),o=n(4),i=n(32),a=n(112)(),s=n(8)("observable"),c=n(14),u=n(3),l=n(48),p=n(50),f=n(17),h=n(49),d=h.RETURN,m=function(e){return null==e?void 0:c(e)},g=function(e){var t=e._c;t&&(e._c=void 0,t())},v=function(e){return void 0===e._o},y=function(e){v(e)||(e._o=void 0,g(e))},b=function(e,t){u(e),this._c=void 0,this._o=e,e=new w(this);try{var n=t(e),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:c(n),this._c=n)}catch(t){return void e.error(t)}v(this)&&g(this)};b.prototype=p({},{unsubscribe:function(){y(this)}});var w=function(e){this._s=e};w.prototype=p({},{next:function(e){var t=this._s;if(!v(t)){var n=t._o;try{var r=m(n.next);if(r)return r.call(n,e)}catch(e){try{y(t)}finally{throw e}}}},error:function(e){var t=this._s;if(v(t))throw e;var n=t._o;t._o=void 0;try{var r=m(n.error);if(!r)throw e;e=r.call(n,e)}catch(e){try{g(t)}finally{throw e}}return g(t),e},complete:function(e){var t=this._s;if(!v(t)){var n=t._o;t._o=void 0;try{var r=m(n.complete);e=r?r.call(n,e):void 0}catch(e){try{g(t)}finally{throw e}}return g(t),e}}});var E=function(e){l(this,E,"Observable","_f")._f=c(e)};p(E.prototype,{subscribe:function(e){return new b(e,this._f)},forEach:function(e){var t=this;return new(i.Promise||o.Promise)(function(n,r){c(e);var o=t.subscribe({next:function(t){try{return e(t)}catch(e){r(e),o.unsubscribe()}},error:r,complete:n})})}}),p(E,{from:function(e){var t="function"==typeof this?this:E,n=m(u(e)[s]);if(n){var r=u(n.call(e));return r.constructor===t?r:new t(function(e){return r.subscribe(e)})}return new t(function(t){var n=!1;return a(function(){if(!n){try{if(h(e,!1,function(e){if(t.next(e),n)return d})===d)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}}),function(){n=!0}})},of:function(){for(var e=0,t=arguments.length,n=Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:E)(function(e){var t=!1;return a(function(){if(!t){for(var r=0;r<n.length;++r)if(e.next(n[r]),t)return;e.complete()}}),function(){t=!0}})}}),f(E.prototype,s,function(){return this}),r(r.G,{Observable:E}),n(47)("Observable")},function(e,t,n){var r=n(4),o=n(0),i=r.navigator,a=[].slice,s=!!i&&/MSIE .\./.test(i.userAgent),c=function(e){return function(t,n){var r=arguments.length>2,o=!!r&&a.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,o)}:t,n)}};o(o.G+o.B+o.F*s,{setTimeout:c(r.setTimeout),setInterval:c(r.setInterval)})},function(e,t,n){var r=n(0),o=n(111);r(r.G+r.B,{setImmediate:o.set,clearImmediate:o.clear})},function(e,t,n){for(var r=n(110),o=n(43),i=n(18),a=n(4),s=n(17),c=n(55),u=n(8),l=u("iterator"),p=u("toStringTag"),f=c.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=o(h),m=0;m<d.length;m++){var g,v=d[m],y=h[v],b=a[v],w=b&&b.prototype;if(w&&(w[l]||s(w,l,f),w[p]||s(w,p,v),c[v]=f,y))for(g in r)w[g]||i(w,g,r[g],!0)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(379),i=n(380),a=n(26);n(416);var s=n(417);o.render(r.createElement(a.Provider,{store:i.default},r.createElement(s.App,null)),document.getElementById("root"))},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(381),o=n(382),i=n(383),a=n(384),s=r.combineReducers({error:o.default,post:i.default,userInfo:a.default}),c=function(e){return function(t){return function(n){console.log(n.type);var r=t(n);return console.log(e.getState()),r}}};t.default=r.createStore(s,r.applyMiddleware(c))},function(e,t){e.exports=Redux},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(81),i=function(){function e(){this.isError=!1,this.errorMessage=""}return e}();t.default=function(e,t){switch(void 0===e&&(e=new i),t.type){case o.ERROR:return r({},e,{isError:!0,errorMessage:t.errorMessage});default:return e}}},function(e,t,n){"use strict";function r(e,t){return void 0===e&&(e=new s),o(this,void 0,void 0,function(){return i(this,function(n){switch(t.type){case a.ADD_AWARD:return[2,{post:e.post,postTopic:e.postTopic,user:e.user,award:{updateTime:Date.now()}}];default:return[2,e]}return[2]})})}var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(81),s=function(){function e(){}return e}();(function(){function e(){}})(),function(){function e(){}}(),function(){function e(){}}(),function(){function e(){}}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(81),i=n(2),a=n(35),s=function(){function e(){this.isLogOn=i.isLogOn(),this.currentUserInfo=i.getLocalStorage("userInfo")||new a.UserInfo,this.currentVisitingUserPage="exact",this.currentVisitingUserId=0,this.currentVisitingUserIsExisted=!0}return e}();t.default=function(e,t){switch(void 0===e&&(e=new s),t.type){case o.USER_LOG_ON:return r({},e,{isLogOn:!0});case o.USER_LOG_OFF:return r({},e,{isLogOn:!1});case o.CHANGE_USERINFO:return i.setLocalStorage("userInfo",t.newInfo),r({},e,{currentUserInfo:t.newInfo});case o.CHANGE_VISITING_USER:return r({},e,{currentVisitingUserPage:t.page,currentVisitingUserId:t.id});case o.USER_NOT_FOUND:return r({},e,{currentVisitingUserIsExisted:!1});default:return e}}},function(e,t,n){"use strict";function r(){var e=new o.UbbCodeEngine;return e.tagHandlers.register(i.BTagHandler),e.tagHandlers.register(a.ImageTagHandler),e.tagHandlers.register(s.ITagHandler),e.tagHandlers.register(c.SizeTagHandler),e.tagHandlers.register(u.QuoteTagHandler),e.tagHandlers.register(l.ColorTagHandler),e.tagHandlers.register(p.UrlTagHandler),e.tagHandlers.register(f.UTagHandler),e.tagHandlers.register(h.DelTagHandler),e.tagHandlers.register(d.MP3TagHandler),e.tagHandlers.register(m.CursorTagHandler),e.tagHandlers.register(g.EnglishTagHandler),e.tagHandlers.register(v.UserTagHandler),e.tagHandlers.register(y.CodeTagHandler),e.tagHandlers.register(b.FontTagHandler),e.tagHandlers.register(w.AlignTagHandler),e.tagHandlers.register(E.UploadTagHandler),e.tagHandlers.register(_.LeftTagHandler),e.tagHandlers.register(S.CenterTagHandler),e.tagHandlers.register(I.RightTagHandler),e.tagHandlers.register(C.TableTagHandler),e.tagHandlers.register(N.TdTagHandler),e.tagHandlers.register(x.ThTagHandler),e.tagHandlers.register(T.TrTagHandler),e.tagHandlers.register(P.TopicTagHandler),e.tagHandlers.register(O.MdTagHandler),e.tagHandlers.register(k.default),e.tagHandlers.register(j.default),e.tagHandlers.register(M.default),e.tagHandlers.registerText(U.default),e}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),i=n(386),a=n(156),s=n(387),c=n(388),u=n(389),l=n(390),p=n(391),f=n(392),h=n(393),d=n(394),m=n(395),g=n(396),v=n(397),y=n(398),b=n(399),w=n(400),E=n(401),_=n(402),S=n(403),I=n(404),C=n(405),N=n(406),x=n(407),T=n(408),P=n(409),O=n(410),k=n(411),j=n(412),M=n(413),U=n(414);t.createEngine=r,function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(5))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"b"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){return o.createElement("span",{style:{fontWeight:"bold"}},e)},t}(i.RecursiveTagHandler);t.BTagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"i"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){return o.createElement("i",null,e)},t}(i.RecursiveTagHandler);t.ITagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"size"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=parseInt(t.value("size"));if(isNaN(r)||r<=0)return e;r=r>7?3.5:r/2,r/=1.5;var i={fontSize:r+"rem"};return o.createElement("span",{style:i},e)},t}(i.RecursiveTagHandler);t.SizeTagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return["quote","quotex"]},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r={padding:"13px 19px 13px 17px",backgroundColor:"#F5FAFF",border:"1px solid rgb(204,204,204)",marginLeft:"30px",marginRight:"30px",marginTop:"30px",maxHeight:"800px",overflowY:"auto"};return o.createElement("div",{style:r},e)},t}(i.RecursiveTagHandler);t.QuoteTagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"color"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=t.value("color"),i={color:r};return o.createElement("span",{style:i},e)},t}(i.RecursiveTagHandler);t.ColorTagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"url"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=t.value("url");return r||(r=e),!1===n.options.allowExternalUrl&&0===r.indexOf("http")&&r.split("/").length>1&&"www.cc98.org"!==r.split("/")[2]?e:o.createElement("a",{href:r,target:"_blank"},e)},t}(i.RecursiveTagHandler);t.UrlTagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"u"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r={textDecoration:"underline"};return n.options.compatibility===i.UbbCompatiblityMode.EnforceMorden?o.createElement("span",{style:r},e):o.createElement("u",null,e)},t}(i.RecursiveTagHandler);t.UTagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"del"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r={textDecoration:"line-through"};return o.createElement("span",{style:r},e)},t}(i.RecursiveTagHandler);t.DelTagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"mp3"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){if(!1===n.options.allowMediaContent)return e;var r=!1;return"1"===t.value("mp3")&&!0===n.options.allowAutoPlay&&(r=!0),o.createElement("audio",{src:e,controls:!0,autoPlay:r})},t}(i.TextTagHandler);t.MP3TagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"cursor"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=t.value("cursor"),i={cursor:r};return o.createElement("span",{style:i},e)},t}(i.RecursiveTagHandler);t.CursorTagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"english"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r={fontFamily:"Arial"};return o.createElement("span",{style:r},e)},t}(i.RecursiveTagHandler);t.EnglishTagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"user"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=e,i={cursor:"pointer"};return o.createElement("a",{href:"/user/name"+encodeURI(r),style:i},r)},t}(i.TextTagHandler);t.UserTagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"code"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=e.split("\n").map(function(e,t){return o.createElement("li",null,e)});return o.createElement("div",{className:"ubb-code"},o.createElement("ol",null,r))},t}(i.TextTagHandler);t.CodeTagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"font"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=t.value("font"),i={fontFamily:r};return o.createElement("span",{style:i},e)},t}(i.RecursiveTagHandler);t.FontTagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"align"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=t.value("align"),i={textAlign:r};return o.createElement("span",{style:i},o.createElement("div",null,e))},t}(i.RecursiveTagHandler);t.AlignTagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=n(156),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"upload"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r,s=e,c=t.value(0);switch(1===t.parameterCount&&(r=0),2===t.parameterCount&&(r=parseInt(t.value(1))),c){case"jpg":case"jpeg":case"png":case"gif":case"bmp":case"webp":return n.options.allowImage?n.options.compatibility===i.UbbCompatiblityMode.EnforceMorden?1===r?o.createElement(a.Image,{imageUri:s,title:"upload图片",isShowed:!1}):o.createElement("figure",null,o.createElement(a.Image,{imageUri:s,title:"upload图片",isShowed:!0}),o.createElement("figcaption",null,"upload图片")):1===r?o.createElement(a.Image,{imageUri:s,title:"upload图片",isShowed:!1}):o.createElement(a.Image,{imageUri:s,title:"upload图片",isShowed:!0}):o.createElement(a.Image,{imageUri:s,title:"upload图片",isShowed:!1});default:return o.createElement("a",{href:s},"点击浏览该文件")}},t}(i.TextTagHandler);t.UploadTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"left"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r={textAlign:"left"};return o.createElement("span",{style:r},o.createElement("div",null,e))},t}(i.RecursiveTagHandler);t.LeftTagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"center"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r={textAlign:"center"};return o.createElement("span",{style:r},o.createElement("div",null,e))},t}(i.RecursiveTagHandler);t.CenterTagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"right"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r={textAlign:"right"};return o.createElement("span",{style:r},o.createElement("div",null,e))},t}(i.RecursiveTagHandler);t.RightTagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"table"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){return o.createElement("table",{className:"UBBTableTag"},e)},t}(i.RecursiveTagHandler);t.TableTagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"td"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=1,i=1;return 2===t.parameterCount&&(r=parseInt(t.value(0)),i=parseInt(t.value(1))),o.createElement("td",{rowSpan:r,colSpan:i},e)},t}(i.RecursiveTagHandler);t.TdTagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"th"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=1,i=1;return 2===t.parameterCount&&(r=parseInt(t.value(0)),i=parseInt(t.value(1))),o.createElement("th",{rowSpan:r,colSpan:i},e)},t}(i.RecursiveTagHandler);t.ThTagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"tr"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){return o.createElement("tr",null,e)},t}(i.RecursiveTagHandler);t.TrTagHandler=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=n(9),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"topic"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r,i=e;t.value(0);1===t.parameterCount&&(r=parseInt(t.value(0))),2===t.parameterCount&&(r=parseInt(t.value(1)));var s="/topic/"+r;return o.createElement(a.Link,{to:s},i)},t}(i.RecursiveTagHandler);t.TopicTagHandler=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"md"},enumerable:!0,configurable:!0}),t.prototype.execCore=function(e,t,n){var r=e;return o.createElement(s,{content:r})},t}(i.TextTagHandler);t.MdTagHandler=a;var s=function(e){function t(t,n){var r=e.call(this,t,n)||this,o=Math.floor(1e6*Math.random());return r.state={divid:"Markdown"+o},r}return r(t,e),t.prototype.componentDidMount=function(){editormd.markdownToHTML(this.state.divid,{htmlDecode:"style,script,iframe",emoji:!0,taskList:!0,tex:!0,flowChart:!0,sequenceDiagram:!0,codeFold:!0})},t.prototype.render=function(){return o.createElement("div",{id:this.state.divid,style:{maxWidth:"80%"}},o.createElement("textarea",{name:"editormd-markdown-doc",style:{display:"none"}},this.props.content))},t}(o.Component);t.MarkdownParser=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return/em\d{2}/i},enumerable:!0,configurable:!0}),t.prototype.getTagMode=function(e){return i.UbbTagMode.Empty},t.prototype.execCore=function(e,t,n){var r=t.tagName,i=r.match(/\d{2}/).toString(),a=parseInt(i)+1,s="http://www.cc98.org/emot/em"+a+".gif";return o.createElement("div",null,o.createElement("img",{src:s,alt:""}),e)},t}(i.RecursiveTagHandler);t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return/ac\d{2}/i},enumerable:!0,configurable:!0}),t.prototype.getTagMode=function(e){return i.UbbTagMode.Empty},t.prototype.execCore=function(e,t,n){var r=/ac/g,i=t.tagName,a=i.replace(r,""),s="/images/ac/"+a+".png";return o.createElement("div",null,o.createElement("img",{src:s,alt:""}),e)},t}(i.RecursiveTagHandler);t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return/[acf]:/i},enumerable:!0,configurable:!0}),t.prototype.getTagMode=function(e){return i.UbbTagMode.Empty},t.prototype.getAnimalUrl=function(e){return"/images/mahjong/animal2017/"+e+".png"},t.prototype.getCartoonUrl=function(e){switch(e){case"018":case"049":case"096":return"/images/mahjong/carton2017/"+e+".gif";default:return"/images/mahjong/carton2017/"+e+".png"}},t.prototype.getFaceUrl=function(e){switch(e){case"004":case"009":case"056":case"061":case"062":case"087":case"115":case"120":case"137":case"168":case"169":case"175":case"206":return"/images/mahjong/face2017/"+e+".gif";default:return"/images/mahjong/face2017/"+e+".png"}},t.prototype.execCore=function(e,t,n){var r=/[acf]/g,i=t.tagName,a=i.match(r)[0],s=i.replace(a+":",""),c="";switch(a){case"a":c=this.getAnimalUrl(s);break;case"c":c=this.getCartoonUrl(s);break;case"f":c=this.getFaceUrl(s)}return o.createElement("div",null,o.createElement("img",{src:c,alt:""}),e)},t}(i.RecursiveTagHandler);t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._pattern=/(https?|ftp|file):\/\/[-A-Za-z0-9+&@#\/%?=~_|!:,.;]+[-A-Za-z0-9+&@#\/%=~_|]/i,t}return r(t,e),Object.defineProperty(t.prototype,"supportedContent",{get:function(){return this._pattern},enumerable:!0,configurable:!0}),t.prototype.exec=function(e,t){var n=e[0];return t.options.autoDetectUrl?o.createElement("a",{href:n},n):n},t}(i.UbbTextHandler);t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(9),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.cancelFocus=function(){},t.prototype.render=function(){var e;return this.props.pageNumber>0?(e=""+this.props.url+this.props.pageNumber+"#1",this.props.pageNumber!==this.props.curPage?o.createElement("li",{className:"page-item"},o.createElement(i.Link,{to:e,className:"page-link",onClick:this.cancelFocus},this.props.pageNumber)):o.createElement("li",{className:"page-item active"},o.createElement(i.Link,{to:e,onClick:this.cancelFocus,className:"page-link "},this.props.pageNumber))):-1==this.props.pageNumber?(e=""+this.props.url+(this.props.curPage-1)+"#1",o.createElement("li",{className:"page-item"},o.createElement(i.Link,{onClick:this.cancelFocus,className:"page-link",to:e},"‹"))):-2==this.props.pageNumber?(e=""+this.props.url+(this.props.curPage+1)+"#1",o.createElement("li",{className:"page-item"},o.createElement(i.Link,{onClick:this.cancelFocus,className:"page-link",to:e},"›"))):-3==this.props.pageNumber?(e=this.props.url+"1#1",o.createElement("li",{className:"page-item"}," ",o.createElement(i.Link,{onClick:this.cancelFocus,className:"page-link",to:e},"«"))):-4==this.props.pageNumber?(e=""+this.props.url+this.props.totalPage+"#1",o.createElement("li",{className:"page-item"},o.createElement(i.Link,{onClick:this.cancelFocus,className:"page-link",to:e},"»"))):null},t}(o.Component);t.PageModel=a},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return v.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function c(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function u(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(v.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(v.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(v.arrayBuffer&&v.blob&&b(e))this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return c(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(u(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return E.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var n=t.body;if(e instanceof h){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=f(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function m(e){var t=new o;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}}),t}function g(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var v={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(v.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&y.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,r){e=t(e),r=n(r);var o=this.map[e];this.map[e]=o?o+","+r:r},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,r){this.map[t(e)]=n(r)},o.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},v.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},p.call(h.prototype),p.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var _=[301,302,303,307,308];g.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=h,e.Response=g,e.fetch=function(e,t){return new Promise(function(n,r){var o=new h(e,t),i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:m(i.getAllResponseHeaders()||"")};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var t="response"in i?i.response:i.responseText;n(new g(t,e))},i.onerror=function(){r(new TypeError("Network request failed"))},i.ontimeout=function(){r(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials&&(i.withCredentials=!0),"responseType"in i&&v.blob&&(i.responseType="blob"),o.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(9),a=n(157),s=n(155),c=n(423),u=n(424),l=n(425),p=n(444),f=n(456),h=n(457),d=n(461),m=n(485),g=n(486),v=n(487),y=n(493),b=n(496),w=n(63),E=n(497),_=n(498),S=n(499),I=n(500),C=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.match=t.match,r}return r(t,e),t}(o.Component);t.RouteComponent=C;var N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{style:{width:"100%"}},o.createElement(i.BrowserRouter,null,o.createElement("div",{style:{backGroundColor:"#F5FAFD",justifyContent:"center",display:"flex",flexDirection:"column",alignItems:"center",width:"100%",minWidth:"1140px"}},o.createElement(d.Header,null),o.createElement(i.Switch,null,o.createElement(i.Route,{exact:!0,path:"/",component:g.MainPage}),o.createElement(i.Route,{exact:!0,path:"/topic/:topicid/:page?",component:a.Post}),o.createElement(i.Route,{exact:!0,path:"/topic/:topicid/user/:userId/:page?",component:c.CurUserPost}),o.createElement(i.Route,{path:"/list/:boardId/:type?/:page?",component:s.List}),o.createElement(i.Route,{exact:!0,path:"/boardlist",component:u.BoardList}),o.createElement(i.Route,{path:"/usercenter",component:l.UserCenter}),o.createElement(i.Route,{path:"/message",component:p.Message}),o.createElement(i.Route,{path:"/focus",component:h.Focus}),o.createElement(i.Route,{path:"/newtopics",component:f.AllNewTopic}),o.createElement(i.Route,{path:"/user/:method/:id",component:v.User}),o.createElement(i.Route,{path:"/logon",component:y.LogOn}),o.createElement(i.Route,{path:"/search",component:E.Search}),o.createElement(i.Route,{path:"/searchBoard",component:_.SearchBoard}),o.createElement(i.Route,{path:"/createtopic/:boardId",component:b.CreateTopic}),o.createElement(i.Route,{path:"/signin",component:S.Signin}),o.createElement(i.Route,{path:"/sitemanage",component:I.SiteManage}),o.createElement(i.Route,{path:"/status/notfoundtopic",component:w.NotFoundTopic}),o.createElement(i.Route,{path:"/status/notfoundboard",component:w.NotFoundBoard}),o.createElement(i.Route,{path:"/status/logout",component:w.LogOut}),o.createElement(i.Route,{path:"/status/topicdeleted",component:w.TopicDeleted}),o.createElement(i.Route,{path:"/status/unauthorizedtopic",component:w.UnauthorizedTopic}),o.createElement(i.Route,{path:"/status/unauthorizedboard",component:w.UnauthorizedBoard}),o.createElement(i.Route,{path:"/status/unauthorizedoperation",component:w.UnauthorizedOperation}),o.createElement(i.Route,{path:"/status/notfounduser",component:w.NotFoundUser}),o.createElement(i.Route,{path:"/status/servererror",component:w.ServerError}),o.createElement(i.Route,{path:"/status/contentneeded",component:w.ContentNeeded}),o.createElement(i.Route,{path:"/status/operationforbidden",component:w.OperationForbidden}),o.createElement(i.Route,{component:function(){return o.createElement("div",null,"页面不存在")}})),o.createElement(m.Footer,null))))},t}(o.Component);t.App=N},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),c=function(e){function t(t){var n=e.call(this,t)||this;return n.confirm=n.confirm.bind(n),n.close=n.close.bind(n),n.showHighlight=n.showHighlight.bind(n),n.showNormal=n.showNormal.bind(n),n.showNoReason=n.showNoReason.bind(n),n.showDays=n.showDays.bind(n),n.showBoard=n.showBoard.bind(n),n.reasonInput=n.reasonInput.bind(n),n.daysInput=n.daysInput.bind(n),n.boardInput=n.boardInput.bind(n),n.state={state:"normal",reason:"",tips:"",days:0,board:null,topicInfo:{state:0,topState:0,bestState:0},fetchState:"ok"},n}return r(t,e),t.prototype.showNormal=function(){this.setState({state:"normal"})},t.prototype.showNoReason=function(){this.setState({state:"noReason"})},t.prototype.showDays=function(){this.setState({state:"days"})},t.prototype.showHighlight=function(){this.setState({state:"highlight"})},t.prototype.showBoard=function(){this.setState({state:"board"})},t.prototype.confirm=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o;return i(this,function(i){switch(i.label){case 0:switch(e="ok",t=this.state.state){case"normal":return[3,1];case"highlight":return[3,21];case"days":return[3,22]}return[3,32];case 1:if(""===this.state.reason)return[3,19];switch(n=$("input[name='option']:checked").val()){case"取消固顶":return[3,2];case"取消全站固顶":return[3,4];case"删除":return[3,6];case"加精":return[3,8];case"解除精华":return[3,10];case"解除锁定":return[3,12];case"禁止热门":return[3,14];case"允许热门":return[3,16]}return[3,18];case 2:return[4,s.removeBoardTopTopic(this.props.topicId,this.props.boardId,this.state.reason)];case 3:e=i.sent(),this.setState({fetchState:e}),i.label=4;case 4:return[4,s.removeBoardTopTopic(this.props.topicId,this.props.boardId,this.state.reason)];case 5:return e=i.sent(),this.setState({fetchState:e}),[3,18];case 6:return[4,s.deleteTopic(this.props.topicId,this.state.reason)];case 7:return e=i.sent(),this.setState({fetchState:e}),[3,18];case 8:return[4,s.setBestTopic(this.props.topicId,this.state.reason)];case 9:return e=i.sent(),this.setState({fetchState:e}),[3,18];case 10:return[4,s.cancelBestTopic(this.props.topicId,this.state.reason)];case 11:return e=i.sent(),this.setState({fetchState:e}),[3,18];case 12:return[4,s.unLockTopic(this.props.topicId,this.props.boardId,this.state.reason)];case 13:return e=i.sent(),this.setState({fetchState:e}),[3,18];case 14:return[4,s.setDisableHot(this.props.topicId,this.state.reason)];case 15:return e=i.sent(),this.setState({fetchState:e}),[3,18];case 16:return[4,s.cancelDisableHot(this.props.topicId,this.state.reason)];case 17:return e=i.sent(),this.setState({fetchState:e}),[3,18];case 18:return[3,20];case 19:this.setState({tips:"请输入原因！"}),i.label=20;case 20:return[3,32];case 21:return""===this.state.reason?(console.log("isBold"+$("input[name='bold']:checked")),console.log("isItalic"+$("input[name='italic']:checked")),console.log("color"+$("#colorInput").val())):this.setState({tips:"请输入原因！"}),[3,32];case 22:if(this.state.reason)return[3,30];switch(r=$("input[name='option']:checked").val()){case"固顶":return[3,23];case"全站固顶":return[3,25];case"锁定":return[3,27]}return[3,29];case 23:return[4,s.addBoardTopTopic(this.props.topicId,this.props.boardId,2,this.state.days,this.state.reason)];case 24:return e=i.sent(),this.setState({fetchState:e}),[3,29];case 25:return console.log("全站固定"),[4,s.addBoardTopTopic(this.props.topicId,this.props.boardId,4,this.state.days,this.state.reason)];case 26:return e=i.sent(),this.setState({fetchState:e}),[3,29];case 27:return console.log("suoding"),[4,s.lockTopic(this.props.topicId,this.props.boardId,this.state.reason,this.state.days)];case 28:return e=i.sent(),this.setState({fetchState:e}),[3,29];case 29:return[3,31];case 30:this.setState({tips:"请输入原因！"}),i.label=31;case 31:return[3,32];case 32:return o="#manage"+this.props.topicId,$(o).css("display","none"),this.props.update(),[2]}})})},t.prototype.close=function(){var e="#manage"+this.props.topicId;$(e).css("display","none")},t.prototype.reasonInput=function(e){this.setState({reason:e.target.value})},t.prototype.daysInput=function(e){this.setState({days:e.target.value})},t.prototype.boardInput=function(e){this.setState({board:e.target.value})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,s.getTopic(this.props.topicId)];case 1:return e=t.sent(),this.setState({topicInfo:e}),[2]}})})},t.prototype.componentDidUpdate=function(){$("#custom").spectrum({color:"#f00"})},t.prototype.componentWillRecieveProps=function(e){return o(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return[4,s.getTopic(e.topicId)];case 1:return t=n.sent(),this.setState({topicInfo:t}),[2]}})})},t.prototype.render=function(){var e,t=a.createElement("div",{className:"column"},a.createElement("div",{className:"row manageOperation",style:{justifyContent:"space-around",marginTop:"1rem"}},a.createElement("div",null,"原因"),a.createElement("input",{type:"text",value:this.state.reason,onChange:this.reasonInput})),a.createElement("div",null,this.state.tips)),n=a.createElement("div",{className:"column"},a.createElement("div",{className:"row manageOperation",style:{justifyContent:"space-around",marginTop:"1rem"}},a.createElement("div",null,"天数"),a.createElement("input",{type:"text",value:this.state.days,onChange:this.daysInput})),a.createElement("div",{className:"row manageOperation",style:{justifyContent:"space-around",marginTop:"1rem"}},a.createElement("div",null,"原因"),a.createElement("input",{type:"text",value:this.state.reason,onChange:this.reasonInput})),a.createElement("div",null,this.state.tips)),r=a.createElement("div",{className:"column"},a.createElement("div",{className:"row manageOperation",style:{justifyContent:"space-around",marginTop:"1rem"}},a.createElement("div",null,"版面"),a.createElement("input",{type:"text",value:this.state.board,onChange:this.boardInput})),a.createElement("div",{className:"row manageOperation",style:{justifyContent:"space-around",marginTop:"1rem"}},a.createElement("div",null,"原因"),a.createElement("input",{type:"text",value:this.state.reason,onChange:this.reasonInput})),a.createElement("div",null,this.state.tips)),o=a.createElement("div",{className:"column"},a.createElement("div",{className:"row manageOperation",style:{justifyContent:"space-around",marginTop:"1rem"}},a.createElement("div",null,"加粗"),a.createElement("input",{type:"radio",value:"加粗",name:"bold"})),a.createElement("div",{className:"row manageOperation",style:{justifyContent:"space-around",marginTop:"1rem"}},a.createElement("div",null,"斜体"),a.createElement("input",{type:"radio",value:"斜体",name:"italic"})),a.createElement("div",{className:"row manageOperation",style:{justifyContent:"space-around",marginTop:"1rem"}},a.createElement("div",null,"颜色"),a.createElement("input",{type:"text",id:"custom"})),a.createElement("div",{className:"row manageOperation",style:{justifyContent:"space-around",marginTop:"1rem"}},a.createElement("div",null,"原因"),a.createElement("input",{type:"text",value:this.state.reason,onChange:this.reasonInput})),a.createElement("div",null,this.state.tips));switch(this.state.state){case"normal":e=t;break;case"noReason":e=null;break;case"days":e=n;break;case"board":e=r;break;case"highlight":e=o}var i=a.createElement("div",{className:"column manageInfo",id:"award"},a.createElement("div",{className:"column",style:{alignItems:"center"}},a.createElement("div",{className:"row"},a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"option",value:"查看IP",onClick:this.showNoReason}),a.createElement("div",null,"查看IP")),a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"option",value:1===this.state.topicInfo.state?"解锁":"锁定",onClick:this.showDays}),a.createElement("div",null,1===this.state.topicInfo.state?"解锁":"锁定")),a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"option",value:this.state.topicInfo.disableHot?"允许热门":"禁止热门",onClick:this.showNormal}),a.createElement("div",null,this.state.topicInfo.disableHot?"允许热门":"禁止热门"))),a.createElement("div",{className:"row",style:{marginTop:"1rem"}},a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"option",value:"删除",onClick:this.showNormal}),a.createElement("div",null,"删除")),a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"option",value:"修复",onClick:this.showNoReason}),a.createElement("div",null,"修复")),a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"option",value:"移动",onClick:this.showBoard}),a.createElement("div",null,"移动"))),a.createElement("div",{className:"row",style:{marginTop:"1rem"}},a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"option",value:2===this.state.topicInfo.topState?"取消固顶":"固顶",onClick:2===this.state.topicInfo.topState?this.showNormal:this.showDays}),a.createElement("div",null,2===this.state.topicInfo.topState?"取消固顶":"固顶")),a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"option",value:4===this.state.topicInfo.topState?"取消全站固顶":"全站固顶",onClick:4===this.state.topicInfo.topState?this.showNormal:this.showDays}),a.createElement("div",null,4===this.state.topicInfo.topState?"取消全站固顶":"全站固顶")),a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"option",value:1===this.state.topicInfo.bestState?"解除精华":"加精",onClick:this.showNormal}),a.createElement("div",null,1===this.state.topicInfo.bestState?"解除精华":"加精")),a.createElement("div",{className:"row"},a.createElement("input",{type:"radio",name:"option",value:"高亮",onClick:this.showHighlight}),a.createElement("div",null,"高亮")))),e),s="manage"+this.props.topicId;this.props.topicId;return a.createElement("div",{style:{display:"none"},id:s,className:"topicManagement"},i,a.createElement("div",{className:"row",style:{justifyContent:"space-around"}},a.createElement("button",{onClick:this.confirm,className:"confirmManagement"},"确认"),a.createElement("button",{onClick:this.close,className:"confirmManagement"},"关闭")))},t}(a.Component);t.TopicManagement=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(9),a=function(e){function t(t){var n=e.call(this,t)||this;return n.state={boardId:"",topicId:"",boardName:"",title:""},n}return r(t,e),t.prototype.componentDidMount=function(){this.setState({boardId:this.props.topicInfo.boardId,topicId:this.props.topicId,boardName:this.props.boardInfo.name,title:this.props.topicInfo.title})},t.prototype.componentWillReceiveProps=function(e){this.setState({boardId:e.topicInfo.boardId,topicId:e.topicId,boardName:e.boardInfo.name,title:e.topicInfo.title})},t.prototype.render=function(){var e="/list/"+this.state.boardId,t="/topic/"+this.state.topicId;return o.createElement("div",{className:"row",style:{alignItems:"baseline",justifyContent:"flex-start",color:"grey",fontSize:"0.75rem",marginBottom:"1rem"}},o.createElement(i.Link,{style:{color:"grey",fontSize:"1rem",marginRight:"0.5rem"},to:"/"},"首页"),o.createElement("i",{className:"fa fa-chevron-right"}),o.createElement(i.Link,{style:{color:"grey",fontSize:"1rem",marginLeft:"0.5rem",marginRight:"0.5rem"},to:e},this.state.boardName),o.createElement("i",{className:"fa fa-chevron-right"}),o.createElement(i.Link,{style:{color:"grey",fontSize:"1rem",marginLeft:"0.5rem",marginRight:"0.5rem"},to:t},o.createElement("div",{style:{overflow:"hidden",textOverflow:"ellipsis",maxWidth:"15rem",whiteSpace:"nowrap"}},this.state.title)," "))},t}(o.Component);t.Category=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:"good tagSize"},o.createElement("div",{className:"userImage"},o.createElement("img",{src:this.props.userImgUrl})," "),o.createElement("div",{className:"userName"},this.props.userName),o.createElement("div",{className:"grades"},this.props.content),o.createElement("div",{className:"credit"},o.createElement("span",null,this.props.reason)))},t}(o.Component);t.AwardInfo=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),c=function(e){function t(t){var n=e.call(this,t)||this;return n.unfollow=n.unfollow.bind(n),n.follow=n.follow.bind(n),n.state={portraitUrl:null,userName:null,fanCount:null,displayTitle:null,birthday:null,gender:null,prestige:null,levelTitle:null,buttonInfo:"关注",buttonIsDisabled:!1,isFollowing:!1},n}return r(t,e),t.prototype.unfollow=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.setState({buttonIsDisabled:!0,buttonInfo:"取关中"}),e=s.getLocalStorage("accessToken"),t=this.props.userId,n="http://apitest.niconi.cc/me/followee/"+t,r=new Headers,r.append("Authorization",e),[4,fetch(n,{method:"DELETE",headers:r})];case 1:if(o=i.sent(),200!==o.status)throw{};return this.setState({buttonIsDisabled:!1,buttonInfo:"重新关注",isFollowing:!1}),[3,3];case 2:return a=i.sent(),this.setState({buttonIsDisabled:!1,buttonInfo:"取关失败",isFollowing:!0}),[3,3];case 3:return[2]}})})},t.prototype.follow=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.setState({buttonIsDisabled:!0,buttonInfo:"关注中"}),e=s.getLocalStorage("accessToken"),t=this.props.userId,n="http://apitest.niconi.cc/me/followee/"+t,r=new Headers,r.append("Authorization",e),[4,fetch(n,{method:"PUT",headers:r})];case 1:if(o=i.sent(),200!==o.status)throw{};return this.setState({buttonIsDisabled:!1,buttonInfo:"取消关注",isFollowing:!0}),[3,3];case 2:return a=i.sent(),this.setState({buttonIsDisabled:!1,buttonInfo:"关注失败",isFollowing:!1}),[3,3];case 3:return[2]}})})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,s.getUserDetails(this.props.userId)];case 1:return e=t.sent(),this.setState({portraitUrl:e.portraitUrl,userName:e.userName,fanCount:e.fanCount,displayTitle:e.displayTitle,birthday:e.birthday,prestige:e.prestige,gender:e.gender,levelTitle:e.levelTitle,isFollowing:e.isFollowing,buttonInfo:e.isFollowing?"取消关注":"关注"}),[2]}})})},t.prototype.render=function(){var e=this.state.displayTitle;null===this.state.displayTitle&&(e=this.state.levelTitle);var t,n=moment(this.state.birthday).format("YYYY");t="9999"===n?moment(this.state.birthday).format("MM-DD"):moment(this.state.birthday).format("YYYY-MM-DD"),null==this.state.birthday&&(t="保密");var r;r=0===this.state.gender?a.createElement("i",{style:{color:"pink"},className:"fa fa-venus fa-lg fa-fw"}):a.createElement("i",{style:{color:"blue"},className:"fa fa-mars fa-lg fa-fw"});var o="/user/name/"+this.props.userName,i=encodeURI(o),s=a.createElement("a",{href:i},a.createElement("img",{src:this.state.portraitUrl}),a.createElement("div",{className:"photoFrame"},a.createElement("img",{src:"/images/圣诞帽.png"})));return a.createElement("div",{className:"popup"},a.createElement("div",{className:"popup_title"},a.createElement("div",{className:"row"},a.createElement("div",{className:"row authorImg",style:{marginLeft:"10px",marginTop:"10px"}},s),a.createElement("div",{className:"column",style:{marginLeft:"1.6rem",marginTop:"2rem"}},a.createElement("div",{className:"row"},a.createElement("div",{style:{fontFamily:"微软雅黑",color:"blue",marginRight:"0.63rem",width:"8rem"}}," ",this.state.userName),a.createElement("div",{style:{marginRight:"0.63rem",fontSize:"1rem"}},"   粉丝  "),a.createElement("div",{style:{color:"red",fontSize:"1rem"}},this.state.fanCount)),a.createElement("div",{className:"row",style:{marginTop:"0.63rem",fontSize:"0.87rem"}},e)),a.createElement("div",null,a.createElement("button",{className:"followuser",id:this.state.isFollowing?"":"follow",onClick:this.state.isFollowing?this.unfollow:this.follow,disabled:this.state.buttonIsDisabled},this.state.buttonInfo))),a.createElement("div",{className:"row",style:{fontSize:"0.87rem"}},a.createElement("div",{style:{marginLeft:"7.2rem"}},"威望 ",this.state.prestige),a.createElement("div",{style:{marginLeft:"1rem"}},"生日 ",t),a.createElement("div",{style:{marginLeft:"1rem"}},r))))},t}(a.Component);t.UserDetails=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e="/images/_"+this.props.boardInfo.name+".png";return o.createElement("div",{className:"topicInfo-info"},o.createElement("div",{className:"topicInfo-boardInfo"},o.createElement("div",{className:"topicInfo-boardImage"},o.createElement("img",{className:"topicInfo-boardImage",src:e})),o.createElement("div",{className:"topicInfo-boardMessage"},o.createElement("div",null,this.props.boardInfo.name),o.createElement("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem"}},this.props.boardInfo.todayCount," / ",this.props.boardInfo.topicCount))),o.createElement("div",{className:"topicInfo-title"},o.createElement("div",{className:"column",id:"topicTitleProp"},o.createElement("div",{id:"essay1",className:"row"},this.props.topicInfo.title),o.createElement("div",{className:"row",id:"essayProp"},o.createElement("div",{id:"tags"},o.createElement("div",{className:"tagProp tagSize"},"标签： ",this.props.tag),o.createElement("div",{className:"tagProp"})),o.createElement("div",{id:"time"},o.createElement("div",{className:"viewProp"},o.createElement("i",{className:"fa fa-clock-o fa-lg fa-fw"}))," ",o.createElement("div",{className:"timeProp tagSize"},moment(this.props.topicInfo.time).format("YYYY-MM-DD HH:mm:ss"))),o.createElement("div",{id:"viewtimes"},o.createElement("div",{className:"viewProp"},o.createElement("i",{className:"fa fa-eye fa-lg fa-fw"}),"  ")," ",o.createElement("div",{className:"timeProp tagSize"},this.props.topicInfo.hitCount))))),o.createElement("div",{className:"topicInfo-ads"},o.createElement("img",{className:"topicInfo-ads",src:this.props.adsUrl})))},t}(o.Component);t.TopicInfo=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(159),u=n(57),l=n(115),p=n(158),f=n(166),h=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.quote=r.quote.bind(r),r.shouldRender=r.shouldRender.bind(r),r.handleChange=r.handleChange.bind(r),r.state={page:1,topicid:r.match.params.topicid,totalPage:1,userId:r.match.params.userId,topicInfo:{replyCount:0},boardInfo:{masters:[],id:7},content:"",shouldRender:!1},r}return r(t,e),t.prototype.quote=function(e){this.setState({content:e})},t.prototype.handleChange=function(){return o(this,void 0,void 0,function(){var e,t,n;return i(this,function(r){switch(r.label){case 0:return[4,s.getTopicInfo(this.match.params.topicid)];case 1:return e=r.sent(),t=this.match.params.page?parseInt(this.match.params.page):1,[4,this.getTotalPage(this.state.topicInfo.replyCount)];case 2:return n=r.sent(),this.setState({page:t,topicid:this.match.params.topicid,totalPage:n,topicInfo:e}),[2]}})})},t.prototype.componentWillReceiveProps=function(e){return o(this,void 0,void 0,function(){var t,n,r,o,a,c;return i(this,function(i){switch(i.label){case 0:return t=e.match.params.page?parseInt(e.match.params.page):1,n=e.match.params.userId,[4,this.getTotalPage.bind(this)(this.match.params.topicid)];case 1:return r=i.sent(),[4,s.getTopicInfo(this.match.params.topicid)];case 2:return o=i.sent(),a=o.boardId,c=s.getBoardInfo(a),this.setState({page:t,topicid:e.match.params.topicid,totalPage:r,userId:e.match.params.userId,topicInfo:o,boardInfo:c}),[2]}})})},t.prototype.shouldRender=function(e){e?this.setState({shouldRender:!0}):this.setState({shouldRender:!1})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a;return i(this,function(i){switch(i.label){case 0:return e=this.match.params.page?parseInt(this.match.params.page):1,[4,this.getTotalPage.bind(this)(this.match.params.topicid)];case 1:return t=i.sent(),n=this.match.params.userId,[4,s.getTopicInfo(this.match.params.topicid)];case 2:return r=i.sent(),o=r.boardId,a=s.getBoardInfo(o),this.setState({page:e,topicid:this.match.params.topicid,totalPage:t,userId:n,topicInfo:r,boardInfo:a}),[2]}})})},t.prototype.getTotalPage=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,s.getCurUserTotalReplyPage(e,this.match.params.userId,this.context.router)];case 1:return[2,t.sent()]}})})},t.prototype.render=function(){var e=null;1==this.state.page&&(e=a.createElement(c.PostTopic,{imgUrl:"/images/ads.jpg",page:this.state.page,topicid:this.state.topicid,userId:this.state.userId,topicInfo:this.state.topicInfo,boardInfo:this.state.boardInfo,quote:this.quote}));var t="/topic/"+this.match.params.topicid+"/user/"+this.match.params.userId+"/";return this.state.shouldRender?a.createElement("div",{className:"center",style:{width:"1140px"}},a.createElement("div",{style:{width:"100%"}},a.createElement(u.Pager,{page:this.state.page,totalPage:this.state.totalPage,url:t})),e,a.createElement(f.Reply,{topicInfo:this.state.topicInfo,boardInfo:this.state.boardInfo,page:this.state.page,topicId:this.state.topicid,userId:this.state.userId,quote:this.quote,isTrace:!0,isHot:!1}),a.createElement("div",{style:{width:"100%"}},a.createElement(u.Pager,{page:this.state.page,totalPage:this.state.totalPage,url:t})),a.createElement(p.SendTopic,{onChange:this.handleChange,topicid:this.state.topicid,boardId:this.state.boardInfo.id,boardInfo:this.state.boardInfo,content:this.state.content,userId:this.state.userId})):a.createElement("img",{src:"/images/waiting.gif"})},t}(l.RouteComponent);t.CurUserPost=h;var d=function(){function e(){}return e}();t.ContentState=d},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(35),c=n(2),u=n(9),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={thisBoardState:[]},n}return r(t,e),t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,o;return i(this,function(i){switch(i.label){case 0:return e=[],t=[],c.getStorage("board_2")?[3,3]:[4,fetch("http://apitest.niconi.cc/Board/Root")];case 1:return n=i.sent(),[4,n.json()];case 2:for(r=i.sent(),o=0;o<20;o++)t[o]=new s.Board(r[o].name,r[o].todayCount,r[o].postCount,r[o].id,r[o].boardMastersString),c.setStorage("board_"+r[o].id.toString(),t[o]),e[o]="board_"+r[o].id.toString();return c.setStorage("boardList",e),[3,4];case 3:for(e=c.getStorage("boardList"),o=0;o<20;o++)t[o]=c.getStorage(e[o]);i.label=4;case 4:return this.setState({thisBoardState:t}),[2]}})})},t.prototype.scroll=function(e){document.getElementById(e).scrollIntoView()},t.prototype.generateRootBoard=function(e){return a.createElement(p,{board:e})},t.prototype.generateBoardGuide=function(e){var t=this,n=""+e.name;return a.createElement("div",{onClick:function(){return t.scroll(n)},className:"row boardOption"},e.name)},t.prototype.render=function(){return a.createElement("div",{className:"row",style:{width:"1140px"}},a.createElement("div",{className:"boardList"},this.state.thisBoardState.map(this.generateRootBoard)),a.createElement("div",{className:"boardGuide"},this.state.thisBoardState.map(this.generateBoardGuide.bind(this))))},t}(a.Component);t.BoardList=l;var p=function(e){function t(t){var n=e.call(this,t)||this,r=n.props.board;return 2===r.id||29===r.id||35===r.id||37===r.id?n.state={isExpanded:!1}:n.state={isExpanded:!0},n.toggleIsExpanded=n.toggleIsExpanded.bind(n),n}return r(t,e),t.prototype.toggleIsExpanded=function(){this.setState(function(e){return{isExpanded:!e.isExpanded}})},t.prototype.render=function(){var e=this.state.isExpanded?"flex":"none",t=this.state.isExpanded?a.createElement("div",null,"收起"):a.createElement("div",null,"展开"),n=this.props.board;return 758===n.id?a.createElement("div",{className:"anArea",id:"似水流年"},a.createElement("div",{className:"column",style:{border:"2px solid #e9e9e9"}},a.createElement("div",{className:"row",style:{marginTop:"15px",marginBottom:"15px",justifyContent:"space-around"}},a.createElement("div",{className:"areaName"},a.createElement(u.Link,{to:"/list/758"},n.name)),a.createElement("div",{className:"areaName"},"主管：",n.masters)))):a.createElement("div",{className:"anArea",id:n.name},a.createElement("div",{className:"column",style:{border:"2px solid #e9e9e9"}},a.createElement("div",{className:"row",style:{marginTop:"15px",marginBottom:"15px",justifyContent:"space-between"}},a.createElement("div",{className:"areaName"},n.name),a.createElement("div",{className:"row",style:{marginRight:"1rem"}},a.createElement("div",{className:"areaName"},"主管：",n.masters),a.createElement("div",{onClick:this.toggleIsExpanded,style:{marginLeft:"1rem",cursor:"pointer"}}," ",t))),a.createElement("div",{className:"hiddenContent",style:{display:e}}," ",a.createElement(f,{boardid:n.id}))))},t}(a.Component);t.RootBoard=p;var f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={thisBoardState:[]},n}return r(t,e),t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a;return i(this,function(i){switch(i.label){case 0:return e=c.getLocalStorage("accessToken"),t=new Headers,t.append("Authorization",e),n=[],[4,fetch("http://apitest.niconi.cc/Board/"+this.props.boardid+"/Sub",{headers:t})];case 1:return r=i.sent(),[4,r.json()];case 2:for(o=i.sent(),a=0;a<o.length;a++)n[a]=new s.Board(o[a].name,o[a].todayCount,o[a].postCount,o[a].id,o[a].masters);return this.setState({thisBoardState:n}),[2]}})})},t.prototype.convertChildBoard=function(e){var t="url(/images/_"+e.name+".png)";return a.createElement("div",{className:"boardContent"},a.createElement(u.Link,{to:"/list/"+e.id},a.createElement("div",{className:"greenBackdrop",style:{backgroundImage:t}})),a.createElement("div",{className:"column boardBlock"},a.createElement(u.Link,{to:"/list/"+e.id},a.createElement("div",{className:"boardName2",style:{fontSize:"1.2rem",fontWeight:"bold"}},e.name)),a.createElement("div",{className:"boardInfo"},e.todayPostCount," / ",e.totalPostCount)))},t.prototype.convertNoImgChildBoard=function(e){return a.createElement("div",{className:"noImgBoardContent"},a.createElement(u.Link,{to:"/list/"+e.id},a.createElement("div",{className:"boardName2"},e.name)))},t.prototype.render=function(){return 2===this.props.boardid||29===this.props.boardid||35===this.props.boardid||37===this.props.boardid?a.createElement("div",{className:"areaContent"},this.state.thisBoardState.map(this.convertNoImgChildBoard)):a.createElement("div",{className:"areaContent"},this.state.thisBoardState.map(this.convertChildBoard))},t}(a.Component);t.ChildBoard=f},function(e,t,n){"use strict";function r(e){return{isLogOn:e.userInfo.isLogOn}}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(26),s=n(426),c=n(427),u=n(63),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){return this.props.isLogOn?i.createElement("div",{className:"user-center"},i.createElement("div",{className:"user-center-content"},i.createElement("div",{className:"user-center-head"},i.createElement("p",null,"个人中心")),i.createElement("div",{className:"user-center-body"},i.createElement(s.UserCenterNavigation,null),i.createElement(c.UserCenterRouter,null)))):i.createElement(u.LogOut,null)},t}(i.Component);t.UserCenterBeforeConnect=l,t.UserCenter=a.connect(r,null)(l)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(9),a=n(38),s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isScroll:!1,buttonClassName:"",navigationClassName:"user-center-navigation"},n.handleScroll=n.handleScroll.bind(n),n}return r(t,e),t.prototype.handleScroll=function(e){window.pageYOffset>234&&!this.state.isScroll&&this.setState({isScroll:!0,buttonClassName:"btn-show",navigationClassName:"user-center-navigation"}),window.pageYOffset<234&&this.state.isScroll&&this.setState(function(e){return""===e.buttonClassName?{isScroll:!1}:{isScroll:!1,buttonClassName:"btn-disappare",navigationClassName:"user-center-navigation"}})},t.prototype.componentDidMount=function(){document.addEventListener("scroll",this.handleScroll)},t.prototype.componentWillUnmount=function(){document.removeEventListener("scroll",this.handleScroll)},t.prototype.scrollToTop=function(){a("body,html").animate({scrollTop:0},500)},t.prototype.render=function(){return o.createElement("div",{className:this.state.navigationClassName,id:"userCenterNavigation"},o.createElement("ul",null,o.createElement("li",null,o.createElement(i.NavLink,{to:"/usercenter",exact:!0,activeClassName:"user-center-navigation-active",className:"fa-home"},o.createElement("p",null,"主页"))),o.createElement("hr",null),o.createElement("li",null,o.createElement(i.NavLink,{to:"/usercenter/config",activeClassName:"user-center-navigation-active",className:"fa-cog"},o.createElement("p",null,"修改个人资料"))),o.createElement("hr",null),o.createElement("li",null,o.createElement(i.NavLink,{to:"/usercenter/myposts",activeClassName:"user-center-navigation-active",className:"fa-pencil-square-o"},o.createElement("p",null,"我的主题"))),o.createElement("hr",null),o.createElement("li",null,o.createElement(i.NavLink,{to:"/usercenter/myfavorites",activeClassName:"user-center-navigation-active",className:"fa-star"},o.createElement("p",null,"我的收藏"))),o.createElement("hr",null),o.createElement("li",null,o.createElement(i.NavLink,{to:"/usercenter/myfollowings",activeClassName:"user-center-navigation-active",className:"fa-heart"},o.createElement("p",null,"我的关注"))),o.createElement("hr",null),o.createElement("li",null,o.createElement(i.NavLink,{to:"/usercenter/myfans",activeClassName:"user-center-navigation-active",className:"fa-users"},o.createElement("p",null,"我的粉丝")))),o.createElement("button",{type:"button",id:"scrollToTop",className:this.state.buttonClassName,onClick:this.scrollToTop},"回到顶部"))},t}(o.Component);t.UserCenterNavigation=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(9),a=n(428),s=n(432),c=n(433),u=n(434),l=n(435),p=n(439),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:"user-center-router"},o.createElement(i.Route,{exact:!0,path:"/usercenter/",component:a.default}),o.createElement(i.Route,{path:"/usercenter/myfollowings/:page?",component:s.UserCenterMyFollowings}),o.createElement(i.Route,{path:"/usercenter/myfans/:page?",component:c.UserCenterMyFans}),o.createElement(i.Route,{path:"/usercenter/myposts/:page?",component:u.UserCenterMyPostsExact}),o.createElement(i.Route,{path:"/usercenter/myfavorites",component:l.UserCenterMyFavorites}),o.createElement(i.Route,{path:"/usercenter/config",component:p.UserCenterConfig}))},t}(o.Component);t.UserCenterRouter=f},function(e,t,n){"use strict";function r(e){return{userInfo:e.userInfo.currentUserInfo}}function o(e){return{changeUserInfo:function(t){e(h.changeUserInfo(t))}}}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var c=n(1),u=n(429),l=n(430),p=n(167),f=n(2),h=n(39),d=n(26),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r,o;return s(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,f.getToken()];case 1:return e=i.sent(),t=new Headers,t.append("Authorization",e),[4,fetch("http://apitest.niconi.cc/user/"+this.props.userInfo.id,{headers:t})];case 2:return n=i.sent(),[4,n.json()];case 3:return r=i.sent(),f.setLocalStorage("userInfo",r),this.props.changeUserInfo(r),[3,5];case 4:return o=i.sent(),console.log("用户中心错误"),[3,5];case 5:return[2]}})})},t.prototype.render=function(){return c.createElement("div",{className:"user-center-exact"},c.createElement(p.UserCenterExactAvatar,{userAvatarImgURL:this.props.userInfo.portraitUrl}),c.createElement(u.UserCenterExactProfile,{userInfo:this.props.userInfo}),c.createElement(l.UserCenterExactActivities,null))},t}(c.Component);t.default=d.connect(r,o)(m)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(9),a=n(15),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getPrivilegeColor=function(){switch(this.props.userInfo.privilege){case"注册用户":return"grey";case"超级版主":return"pink";case"全站贵宾":return"blue";case"管理员":return"red"}},t.prototype.render=function(){var e=!1;if(this.props.userInfo.birthday){var t=this.props.userInfo.birthday.match(/\d+-(\d+)-(\d+)/),n=new Date;Number.parseInt(t[1])===n.getMonth()+1&&Number.parseInt(t[2])===n.getDate()&&(e=!0)}return o.createElement("div",{className:"user-profile"},o.createElement("div",{id:"userId"},o.createElement("p",null,this.props.userInfo.name,o.createElement("span",{style:{fontSize:"12px",color:this.getPrivilegeColor(),marginLeft:"2rem"}},this.props.userInfo.privilege)),o.createElement(i.Link,{to:"/message/message"},o.createElement("button",{type:"button"},"私信"))),o.createElement("div",{id:"userIntroducion"},this.props.userInfo.introduction),o.createElement("div",{id:"userGenderAndBirthday"},o.createElement("p",null,"性别：  ",1===this.props.userInfo.gender?"男":"女"," "),null===this.props.userInfo.birthday?null:o.createElement("p",null,"生日：  ",this.props.userInfo.birthday.slice(0,this.props.userInfo.birthday.indexOf("T")).replace("9999-",""),e?o.createElement("span",{style:{fontFamily:"FontAwesome",marginLeft:"1rem"},className:"fa-birthday-cake",title:"生日快乐~"}):null),this.props.userInfo.emailAddress?o.createElement("p",null,"邮箱：  ",this.props.userInfo.emailAddress):null,this.props.userInfo.qq?o.createElement("p",null,"QQ：  ",this.props.userInfo.qq):null,o.createElement("p",null,"发帖数：  ",this.props.userInfo.postCount),this.props.userInfo.displayTitle?o.createElement("p",null,"用户组：  ",this.props.userInfo.displayTitle):null,o.createElement("p",null,"威望：  ",this.props.userInfo.prestige),o.createElement("div",null,this.props.userInfo.registerTime?o.createElement("p",null,"注册时间：  ",this.props.userInfo.registerTime.replace("T"," ")):null,this.props.userInfo.lastLogOnTime?o.createElement("p",null,"最后登录：  ",this.props.userInfo.lastLogOnTime.replace("T"," ")):null)),this.props.userInfo.signatureCode?o.createElement("div",{className:"user-description"},o.createElement("p",null,"个性签名"),o.createElement(a.UbbContainer,{code:this.props.userInfo.signatureCode})):null)},t}(o.Component);t.UserCenterExactProfile=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(431),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:"user-activities"},o.createElement("p",null,"发表的主题"),o.createElement(i.UserCenterExactActivitiesPosts,null))},t}(o.Component);t.UserCenterExactActivities=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(82),c=n(35),u=n(2),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={userRecentPosts:[],isLoading:!1},n.scrollHandler=n.scrollHandler.bind(n),n}return r(t,e),t.prototype.scrollHandler=function(e){return o(this,void 0,void 0,function(){var e,t,n,r,o,a,s,c,l,p;return i(this,function(i){switch(i.label){case 0:if(!((e=document.body.scrollHeight-window.pageYOffset)<1500&&!1===this.state.isLoading))return[3,11];i.label=1;case 1:return i.trys.push([1,10,,11]),this.setState({isLoading:!0}),t="http://apitest.niconi.cc/me/recent-topic?from="+this.state.userRecentPosts.length+"&size=11",[4,u.getToken()];case 2:return n=i.sent(),r=new Headers,r.append("Authorization",n),[4,fetch(t,{headers:r})];case 3:return o=i.sent(),200!==o.status?[3,8]:[4,o.json()];case 4:a=i.sent(),a.length<11&&window.removeEventListener("scroll",this.scrollHandler),s=this.state.userRecentPosts,c=11===a.length?10:a.length,i.label=5;case 5:return c--?[4,this.item2post(a[c])]:[3,7];case 6:return l=i.sent(),s.push(l),[3,5];case 7:return this.setState({userRecentPosts:s,isLoading:!1}),[3,9];case 8:throw{};case 9:return[3,11];case 10:return p=i.sent(),this.setState({isLoading:!1}),console.log("用户中心滚动加载失败"),[3,11];case 11:return[2]}})})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a,s,c,l;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,8,,9]),e="http://apitest.niconi.cc/me/recent-topic?from=0&size=10",t=u.getLocalStorage("accessToken"),n=new Headers,n.append("Authorization",t),[4,fetch(e,{headers:n})];case 1:return r=i.sent(),200!==r.status?[3,6]:[4,r.json()];case 2:o=i.sent(),console.log(o),a=[],s=o.length,i.label=3;case 3:return s--?[4,this.item2post(o[s])]:[3,5];case 4:return c=i.sent(),a.unshift(c),[3,3];case 5:return this.setState({userRecentPosts:a}),10===o.length&&window.addEventListener("scroll",this.scrollHandler),[3,7];case 6:throw{};case 7:return[3,9];case 8:return l=i.sent(),console.log("用户中心帖子加载失败"),[3,9];case 9:return[2]}})})},t.prototype.componentWillUnmount=function(){window.removeEventListener("scroll",this.scrollHandler)},t.prototype.item2post=function(e){return o(this,void 0,void 0,function(){var t,n;return i(this,function(r){switch(r.label){case 0:return t=new c.UserRecentPost,t.approval=e.likeCount,n=t,[4,u.getBoardName(e.boardId)];case 1:return n.board=r.sent(),t.date=e.time.replace("T"," ").slice(0,19),t.disapproval=e.dislikeCount,t.content=e.title,t.id=e.id,t.boardId=e.boardId,t.name=e.userName,t.isAnonymous=e.isAnonymous,[2,t]}})})},t.prototype.render=function(){if(0===this.state.userRecentPosts.length){var e={marginLeft:"2rem"};return a.createElement("div",{className:"user-posts",style:e},"没有主题")}for(var t=this.state.userRecentPosts.map(function(e){return a.createElement(s.UserCenterExactActivitiesPost,{userRecentPost:e})}),n=1;n<t.length;n+=2)t.splice(n,0,a.createElement("hr",null));return a.createElement("div",{className:"user-posts"},t)},t}(a.Component);t.UserCenterExactActivitiesPosts=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(35),c=n(168),u=n(83),l=n(2),p=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.getInfo=function(e){return void 0===e&&(e=1),o(r,void 0,void 0,function(){var t,n,r,o,a,c,u,p,f;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),window.scroll(0,0),this.setState({isLoading:!0}),[4,l.getToken()];case 1:return t=i.sent(),n="http://apitest.niconi.cc/me/followee?from="+10*(e-1)+"&size=10",r=new Headers,r.append("Authorization",t),[4,fetch(n,{headers:r})];case 2:if(o=i.sent(),200!==o.status)throw{};return[4,o.json()];case 3:return a=i.sent(),a&&a.length?[4,Promise.all(a.map(function(e){return n="http://apitest.niconi.cc/user/"+e,fetch(n,{headers:r})}))]:(this.setState({info:"没有粉丝",isLoading:!1}),[2,!1]);case 4:return c=i.sent(),[4,Promise.all(c.map(function(e){return e.json()}))];case 5:return u=i.sent(),p=u.map(function(e){var t=new s.UserFanInfo;return t.name=e.name,t.avatarImgURL=e.portraitUrl,t.posts=e.postCount,t.id=e.id,t.fans=e.fanCount,t.isFollowing=e.isFollowing,t}),this.setState({userFollowings:p,isLoading:!1}),[3,7];case 6:return f=i.sent(),[3,7];case 7:return[2]}})})},r.state={userFollowings:[],totalPage:2,info:"加载中",currentPage:r.props.match.params.page,isLoading:!0},r}return r(t,e),t.prototype.componentDidUpdate=function(){this.state.currentPage!==this.props.match.params.page&&(this.setState({currentPage:this.props.match.params.page}),this.getInfo(this.props.match.params.page))},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o;return i(this,function(i){switch(i.label){case 0:this.getInfo(this.props.match.params.page),i.label=1;case 1:return i.trys.push([1,4,,5]),e=l.getLocalStorage("userInfo").id,t="http://apitest.niconi.cc/user/followee/count?userid="+e,[4,fetch(t)];case 2:if(n=i.sent(),200!==n.status)throw new Error;return[4,n.json()];case 3:return r=i.sent(),this.setState({totalPage:r%10==0?r/10:Math.floor(r/10)+1}),[3,5];case 4:return o=i.sent(),console.log("我的关注加载失败"),[3,5];case 5:return[2]}})})},t.prototype.render=function(){if(this.state.isLoading)return a.createElement("div",{className:"user-center-loading"},a.createElement("p",{className:"fa fa-spinner fa-pulse fa-2x fa-fw"}));if(0===this.state.userFollowings.length)return a.createElement("div",{className:"user-center-myfollowings"},this.state.info);for(var e=this.state.userFollowings.map(function(e){return a.createElement(c.UserCenterMyFollowingsUser,{userFanInfo:e})}),t=1;t<e.length;t+=2)e.splice(t,0,a.createElement("hr",null));var n=this.props.match.params.page||1;return a.createElement("div",{className:"user-center-myfollowings"},a.createElement("div",{className:"user-center-myfollowings-exact"},e),a.createElement(u.UserCenterPageCount,{currentPage:n,totalPage:this.state.totalPage,href:"/usercenter/myfollowings/",hasTotal:!0}))},t}(a.Component);t.UserCenterMyFollowings=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(35),c=n(168),u=n(83),l=n(2),p=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.getInfo=function(e){return void 0===e&&(e=1),o(r,void 0,void 0,function(){var t,n,r,o,a,c,u,p,f;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),window.scroll(0,0),this.setState({isLoading:!0}),[4,l.getToken()];case 1:return t=i.sent(),n="http://apitest.niconi.cc/me/follower?from="+10*(e-1)+"&size=10",r=new Headers,r.append("Authorization",t),[4,fetch(n,{headers:r})];case 2:return o=i.sent(),[4,o.json()];case 3:return a=i.sent(),a&&a.length?[4,Promise.all(a.map(function(e){return n="http://apitest.niconi.cc/user/"+e,fetch(n,{headers:r})}))]:(this.setState({info:"没有关注",isLoading:!1}),[2,!1]);case 4:return c=i.sent(),[4,Promise.all(c.map(function(e){return e.json()}))];case 5:return u=i.sent(),p=u.map(function(e){var t=new s.UserFanInfo;return t.name=e.name,t.avatarImgURL=e.portraitUrl,t.posts=e.postCount,t.id=e.id,t.fans=e.fanCount,t.isFollowing=e.isFollowing,t}),this.setState({userFans:p,isLoading:!1}),[3,7];case 6:return f=i.sent(),console.log("我的粉丝加载失败"),[3,7];case 7:return[2]}})})},r.state={userFans:[],totalPage:2,info:"加载中",currentPage:r.props.match.params.page,isLoading:!0},r}return r(t,e),t.prototype.componentDidUpdate=function(){this.state.currentPage!==this.props.match.params.page&&(this.setState({currentPage:this.props.match.params.page}),this.getInfo(this.props.match.params.page))},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o;return i(this,function(i){switch(i.label){case 0:this.getInfo(this.props.match.params.page),e=l.getLocalStorage("userInfo").id,i.label=1;case 1:return i.trys.push([1,4,,5]),t="http://apitest.niconi.cc/user/follower/count?userid="+e,[4,fetch(t)];case 2:return n=i.sent(),[4,n.json()];case 3:return r=i.sent(),this.setState({totalPage:r%10==0?r/10:Math.floor(r/10)+1}),[3,5];case 4:return o=i.sent(),[3,5];case 5:return[2]}})})},t.prototype.render=function(){if(this.state.isLoading)return a.createElement("div",{className:"user-center-loading"},a.createElement("p",{className:"fa fa-spinner fa-pulse fa-2x fa-fw"}));if(0===this.state.userFans.length)return a.createElement("div",{className:"user-center-myfans"},this.state.info);for(var e=this.state.userFans.map(function(e){return a.createElement(c.UserCenterMyFollowingsUser,{userFanInfo:e})}),t=1;t<e.length;t+=2)e.splice(t,0,a.createElement("hr",null));return a.createElement("div",{className:"user-center-myfans"},a.createElement("div",{className:"user-center-myfans-exact"},e),a.createElement(u.UserCenterPageCount,{currentPage:parseInt(this.props.match.params.page||1),totalPage:this.state.totalPage,href:"/usercenter/myfans/",hasTotal:!0}))},t}(a.Component);t.UserCenterMyFans=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(82),u=n(35),l=n(83),p=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.getInfo=function(e){return void 0===e&&(e=1),o(r,void 0,void 0,function(){var t,n,r,o,a,c,u,l,p,f=this;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),window.scroll(0,0),this.setState({isLoading:!0}),t="http://apitest.niconi.cc/me/recent-topic?from="+10*(e-1)+"&size=11",[4,s.getToken()];case 1:return n=i.sent(),r=new Headers,r.append("Authorization",n),[4,fetch(t,{headers:r})];case 2:if(o=i.sent(),200!==o.status)throw{};return[4,o.json()];case 3:return a=i.sent(),c=a.length,u=void 0,c<=10?(u=Number.parseInt(this.props.match.params.page),this.setState({hasTotal:!0})):(u=Math.max(Number.parseInt(this.props.match.params.page||1)+1,this.state.totalPage),a.pop(),c=10),[4,Promise.all(a.map(function(e){return f.item2post(e)}))];case 4:return l=i.sent(),this.setState({userRecentPosts:l,totalPage:u,isLoading:!1}),[3,6];case 5:return p=i.sent(),console.log("我的主题加载失败"),[3,6];case 6:return[2]}})})};s.getLocalStorage("userInfo").postCount;return r.state={userRecentPosts:[],totalPage:(r.props.match.params.page||1)+1,currentPage:r.props.match.params.page,hasTotal:!1,isLoading:!0},r}return r(t,e),t.prototype.componentDidUpdate=function(){this.state.currentPage!==this.props.match.params.page&&(this.setState({currentPage:this.props.match.params.page}),this.getInfo(this.props.match.params.page))},t.prototype.componentDidMount=function(){this.getInfo(this.props.match.params.page)},t.prototype.item2post=function(e){return o(this,void 0,void 0,function(){var t,n;return i(this,function(r){switch(r.label){case 0:return t=new u.UserRecentPost,t.approval=e.likeCount,n=t,[4,s.getBoardName(e.boardId)];case 1:return n.board=r.sent(),t.date=e.time.replace("T"," ").slice(0,19),t.disapproval=e.dislikeCount,t.content=e.title,t.id=e.id,t.boardId=e.boardId,t.name=e.userName,t.isAnonymous=e.isAnonymous,[2,t]}})})},t.prototype.render=function(){if(this.state.isLoading)return a.createElement("div",{className:"user-center-loading"},a.createElement("p",{className:"fa fa-spinner fa-pulse fa-2x fa-fw"}));if(0===this.state.userRecentPosts.length)return a.createElement("div",{className:"user-posts"},"没有主题");for(var e=this.state.userRecentPosts.map(function(e){return a.createElement(c.UserCenterExactActivitiesPost,{userRecentPost:e})}),t=1;t<e.length;t+=2)e.splice(t,0,a.createElement("hr",null));return a.createElement("div",{className:"user-posts"},e,a.createElement(l.UserCenterPageCount,{currentPage:this.props.match.params.page||1,totalPage:this.state.totalPage,href:"/usercenter/myposts/",hasTotal:this.state.hasTotal}))},t}(a.Component);t.UserCenterMyPostsExact=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(9),a=n(436),s=n(437),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:"user-center-myfavorites"},o.createElement(u,{to:"/usercenter/myfavorites/posts",label:"文章"})," | ",o.createElement(u,{to:"/usercenter/myfavorites/boards",label:"版面"}),o.createElement(i.Switch,null,o.createElement(i.Route,{path:"/usercenter/myfavorites/boards",component:s.UserCenterMyFavoritesBoards}),o.createElement(i.Route,{path:"/usercenter/myfavorites/posts/:page?",component:a.UserCenterMyFavoritesPosts}),o.createElement(i.Redirect,{to:"/usercenter/myfavorites/posts"})))},t}(o.Component);t.UserCenterMyFavorites=c;var u=function(e){var t=e.label,n=e.to;return o.createElement(i.Route,{path:n,children:function(e){var r=e.match;return o.createElement(i.Link,{className:r?"user-activities-active":"",to:n},t)}})}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(82),c=n(35),u=n(2),l=n(83),p=function(e){function t(t){var n=e.call(this,t)||this;return n.getInfo=function(e){return void 0===e&&(e=1),o(n,void 0,void 0,function(){var t,n,r,o,a,s,l,p,f,h;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),window.scroll(0,0),this.setState({isLoading:!0}),[4,u.getToken()];case 1:return t=i.sent(),n="http://apitest.niconi.cc/topic/me/favorite?from="+10*(e-1)+"&size=11",r=new Headers,r.append("Authorization",t),[4,fetch(n,{headers:r})];case 2:if(o=i.sent(),200!==o.status)throw new Error(o.status.toString());return[4,o.json()];case 3:if(a=i.sent(),0===a.length)return this.setState({info:"没有主题",isLoading:!1}),[2];for(s=[],l=a.length,p=void 0,l<=10?(p=Number.parseInt(this.props.match.params.page)||1,this.setState({hasTotal:!0})):(l=10,p=Math.max((Number.parseInt(this.props.match.params.page)||1)+1,this.state.totalPage));l--;)f=new c.UserRecentPost,f.board=a[l].boardName,f.boardId=a[l].boardId,f.content=a[l].title,f.date=a[l].time.replace("T"," ").slice(0,19),f.id=a[l].id,s.unshift(f);return this.setState({userRecentPosts:s,totalPage:p,isLoading:!1}),[3,5];case 4:return h=i.sent(),console.log("加载收藏失败"),[3,5];case 5:return[2]}})})},n.state={userRecentPosts:[],info:"加载中",totalPage:(Number.parseInt(n.props.match.params.page)||1)+1,currentPage:n.props.match.params.page,hasTotal:!1,isLoading:!0},n}return r(t,e),t.prototype.componentDidUpdate=function(){this.state.currentPage!==this.props.match.params.page&&(this.setState({currentPage:this.props.match.params.page}),this.getInfo(this.props.match.params.page))},t.prototype.componentDidMount=function(){this.getInfo(this.props.match.params.page)},t.prototype.render=function(){if(this.state.isLoading)return a.createElement("div",{className:"user-center-loading"},a.createElement("p",{className:"fa fa-spinner fa-pulse fa-2x fa-fw"}));if(!this.state.userRecentPosts||0===this.state.userRecentPosts.length)return a.createElement("div",{className:"user-posts"},this.state.info);for(var e=this.state.userRecentPosts.map(function(e){return a.createElement(s.UserCenterExactActivitiesPost,{userRecentPost:e})}),t=1;t<e.length;t+=2)e.splice(t,0,a.createElement("hr",null));return a.createElement("div",{className:"user-posts"},e,a.createElement(l.UserCenterPageCount,{currentPage:this.props.match.params.page||1,totalPage:this.state.totalPage,href:"/usercenter/myfavorites/posts/",hasTotal:this.state.hasTotal}))},t}(a.Component);t.UserCenterMyFavoritesPosts=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(438),u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={boards:[],info:"加载中",isLoading:!1},n}return r(t,e),t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a,c,u,l,p,f;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),this.setState({isLoading:!0}),[4,s.getToken()];case 1:return e=i.sent(),t=s.getLocalStorage("userName"),n=new Headers,n.append("Authorization",e),[4,fetch("http://apitest.niconi.cc/user/name/"+t,{headers:n})];case 2:if(r=i.sent(),200!==r.status)throw{};return[4,r.json()];case 3:return o=i.sent(),(a=o.customBoards)&&0!==a.length?(c=a.join("&id="),u="http://apitest.niconi.cc/board/?id="+c,n=new Headers,n.append("Authorization",e),[4,fetch(u,{headers:n})]):(this.setState({info:"没有关注"}),[2]);case 4:if(l=i.sent(),200!==l.status)throw{};return[4,l.json()];case 5:return p=i.sent(),this.setState({boards:p,isLoading:!1}),[3,7];case 6:return f=i.sent(),console.log("版面加载失败"),[3,7];case 7:return[2]}})})},t.prototype.render=function(){var e={marginTop:"2rem"};if(this.state.isLoading)return a.createElement("div",{className:"user-center-loading"},a.createElement("p",{className:"fa fa-spinner fa-pulse fa-2x fa-fw"}));if(0===this.state.boards.length)return a.createElement("div",{style:e},this.state.info);for(var t=this.state.boards.map(function(e){return a.createElement(c.UserCenterMyFavoritesBoard,{UserFavoritesBoard:e})}),n=1;n<t.length;n+=2)t.splice(n,0,a.createElement("hr",null));return a.createElement("div",null,t)},t}(a.Component);t.UserCenterMyFavoritesBoards=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(9),u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={buttonInfo:"取消关注",buttonIsDisabled:!1,isFollowing:!0},n.unfollow=n.unfollow.bind(n),n.follow=n.follow.bind(n),n}return r(t,e),t.prototype.unfollow=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a;return i(this,function(i){switch(i.label){case 0:this.setState({buttonIsDisabled:!0,buttonInfo:"取关中"}),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,s.getToken()];case 2:return e=i.sent(),t=this.props.UserFavoritesBoard.id,n="http://apitest.niconi.cc/me/custom-board/"+t,r=new Headers,r.append("Authorization",e),[4,fetch(n,{method:"DELETE",headers:r})];case 3:if(o=i.sent(),200!==o.status)throw{};return this.setState({buttonIsDisabled:!1,buttonInfo:"重新关注",isFollowing:!1}),[3,5];case 4:return a=i.sent(),this.setState({buttonIsDisabled:!1,buttonInfo:"取关失败",isFollowing:!0}),[3,5];case 5:return[2]}})})},t.prototype.follow=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a;return i(this,function(i){switch(i.label){case 0:this.setState({buttonIsDisabled:!0,buttonInfo:"关注中"}),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,s.getToken()];case 2:return e=i.sent(),t=this.props.UserFavoritesBoard.id,n="http://apitest.niconi.cc/me/custom-board/"+t,r=new Headers,r.append("Authorization",e),[4,fetch(n,{method:"PUT",headers:r})];case 3:if(o=i.sent(),200!==o.status)throw{};return this.setState({buttonIsDisabled:!1,buttonInfo:"取消关注",isFollowing:!0}),[3,5];case 4:return a=i.sent(),this.setState({buttonIsDisabled:!1,buttonInfo:"关注失败",isFollowing:!1}),[3,5];case 5:return[2]}})})},t.prototype.render=function(){return a.createElement("div",{className:"user-center-myfavorite-board"},a.createElement(c.Link,{to:"/list/"+this.props.UserFavoritesBoard.id,title:this.props.UserFavoritesBoard.name},a.createElement("img",null)),a.createElement("div",{className:"user-center-myfavorite-board-info"},a.createElement("p",null,"版主：",this.props.UserFavoritesBoard.boardMasters.join(" ")),a.createElement("p",null,"今日主题 ",this.props.UserFavoritesBoard.todayCount," / 总主题 ",this.props.UserFavoritesBoard.topicCount)),a.createElement("button",{type:"button",className:this.state.isFollowing?"":"user-follow-board",onClick:this.state.isFollowing?this.unfollow:this.follow,disabled:this.state.buttonIsDisabled},this.state.buttonInfo))},t}(a.Component);t.UserCenterMyFavoritesBoard=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),c=n(2),u=n(35),l=n(440),p=n(441),f=n(442),h=function(e){function t(t){var n=e.call(this,t)||this,r=c.getLocalStorage("userInfo"),o={EmailAddress:r.emailAddress,Gender:r.gender,Introduction:r.introduction,QQ:r.qq,SignatureCode:r.signatureCode,Birthday:r.birthday,birthdayYear:r.birthday?Number.parseInt(r.birthday.slice(0,4)):0,birthdayMouth:r.birthday?Number.parseInt(r.birthday.slice(5,7)):0,birthdayDay:r.birthday?Number.parseInt(r.birthday.slice(8,10)):0};return n.state={userInfo:o,info:"",isLoading:!1},n.handleSignatureChange=n.handleSignatureChange.bind(n),n.handleChange=n.handleChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.handleReset=n.handleReset.bind(n),n}return r(t,e),t.prototype.handleReset=function(){var e=c.getLocalStorage("userInfo"),t={EmailAddress:e.emailAddress,Gender:e.gender,Introduction:e.introduction,QQ:e.qq,SignatureCode:e.signatureCode,Birthday:e.birthday,birthdayYear:e.birthday?Number.parseInt(e.birthday.slice(0,4)):0,birthdayMouth:e.birthday?Number.parseInt(e.birthday.slice(5,7)):0,birthdayDay:e.birthday?Number.parseInt(e.birthday.slice(8,10)):0};this.setState({userInfo:t})},t.prototype.handleSignatureChange=function(e){this.setState(function(t){return{userInfo:o({},t.userInfo,{SignatureCode:e})}})},t.prototype.handleChange=function(e,t){this.setState(function(n){return{userInfo:o({},n.userInfo,(r={},r[e]=t,r))};var r})},t.prototype.handleSubmit=function(){return i(this,void 0,void 0,function(){var e,t,n,r,o,i,s,u,l,p=this;return a(this,function(a){switch(a.label){case 0:this.setState({isLoading:!0,info:"修改中"}),a.label=1;case 1:if(a.trys.push([1,8,,9]),e={Birthday:0!==this.state.userInfo.birthdayYear?this.state.userInfo.birthdayYear+"-"+this.state.userInfo.birthdayMouth+"-"+this.state.userInfo.birthdayDay:"",EmailAddress:this.state.userInfo.EmailAddress,Gender:this.state.userInfo.Gender,Introduction:this.state.userInfo.Introduction,QQ:this.state.userInfo.QQ,SignatureCode:this.state.userInfo.SignatureCode},e.EmailAddress&&!e.EmailAddress.match(/[\S]+@[\S]+\.[\S]+/))throw new Error("请检查邮箱地址");if(e.QQ&&(Number.parseInt(e.QQ)<=0||Number.parseInt(e.QQ).toString()!==e.QQ))throw new Error("请检查QQ是否正确");return[4,c.getToken()];case 2:return t=a.sent(),n="http://apitest.niconi.cc/me",r=new Headers,r.append("Authorization",t),r.append("Content-Type","application/json"),[4,fetch(n,{method:"PUT",headers:r,body:JSON.stringify(e)})];case 3:return o=a.sent(),200!==o.status?[3,6]:(i=new Headers,i.append("Authorization",t),[4,fetch("http://apitest.niconi.cc/user/"+c.getLocalStorage("userInfo").id,{headers:i})]);case 4:return s=a.sent(),[4,s.json()];case 5:return u=a.sent(),c.setLocalStorage("userInfo",u),this.setState({info:"修改成功",isLoading:!1}),setTimeout(function(){p.setState({info:""})},1e3),[3,7];case 6:throw new Error(o.status.toString());case 7:return[3,9];case 8:return l=a.sent(),this.setState({info:l.message,isLoading:!1}),[3,9];case 9:return[2]}})})},t.prototype.render=function(){return s.createElement("div",{className:"user-center-config"},s.createElement(l.default,null),s.createElement("hr",null),s.createElement(p.UserCenterConfigSignature,{signature:this.state.userInfo.SignatureCode,onchange:this.handleSignatureChange}),s.createElement("hr",null),s.createElement(f.UserCenterConfigOthers,{userinfo:this.state.userInfo,handleChange:this.handleChange}),s.createElement("hr",null),s.createElement("div",{className:"config-submit"},s.createElement("h2",null,"提交修改"),s.createElement("div",{className:"config-buttons"},s.createElement("button",{className:"config-submit-button",type:"button",disabled:this.state.isLoading,onClick:this.handleSubmit},"提交"),s.createElement("button",{type:"button",onClick:this.handleReset},"重置")),s.createElement("p",{style:{height:""===this.state.info?"0":"1rem",color:"red"}},this.state.info)))},t}(s.Component);t.UserCenterConfig=h;!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r(t,e)}(u.ChangeUserInfo)},function(e,t,n){"use strict";function r(e){return{changeUserInfo:function(t){e(u.changeUserInfo(t))}}}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),c=n(2),u=n(39),l=n(26),p=function(e){function t(t){var n=e.call(this,t)||this,r=c.getLocalStorage("userInfo");return n.state={avatarURL:"",info:"",isShown:!1,divheight:0,divWidth:0,selectorWidth:160,selectorLeft:0,selectorTop:0,avatarNow:r.portraitUrl,isLoading:!1,naturalWidth:0,naturalHeight:0,img:null,NUM_MAX:0,scaling:1},n.handleChange=n.handleChange.bind(n),n.handleIMGLoad=n.handleIMGLoad.bind(n),n.handleSelectorMove=n.handleSelectorMove.bind(n),n.handleResizeMove=n.handleResizeMove.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.handleCoverMouseMove=n.handleCoverMouseMove.bind(n),n.handleMouseUp=n.handleMouseUp.bind(n),n}return o(t,e),t.prototype.handleChange=function(e){var t=this,n=e.target.files[0];if(!n.type.match("image.*"))return this.setState({info:"请选择图片文件",isShown:!1,divheight:0}),!1;var r=new FileReader;r.readAsDataURL(n),r.addEventListener("load",function(e){t.setState({isShown:!0,avatarURL:e.target.result})})},t.prototype.handleIMGLoad=function(e,t,n){if(e<160||t<160)return void this.setState({info:"图片至少为 160*160",isShown:!1,divheight:0});for(var r=this.myCanvas.getContext("2d"),o=this.state.scaling;e/o>800;)o*=1.1;this.myCanvas.width=e/o,this.myCanvas.height=t/o,r.drawImage(n,0,0,e,t,0,0,e/o,t/o),this.setState({divheight:t/o+50,divWidth:e/o+50,isShown:!0,info:"请选择要显示的区域",selectorLeft:e/o/4,selectorTop:t/o/4,selectorWidth:Math.min(t/o,e/o)/2,naturalWidth:e/o,naturalHeight:t/o,img:n,NUM_MAX:Math.min(500,e/o,t/o),scaling:o})},t.prototype.handleMouseUp=function(){this.dragging=null},t.prototype.componentDidMount=function(){this.selector.addEventListener("mousedown",this.handleSelectorMove),this.selector.addEventListener("mousemove",this.handleSelectorMove),this.selector.addEventListener("mouseup",this.handleSelectorMove),this.resize.addEventListener("mousedown",this.handleResizeMove),this.resize.addEventListener("mousemove",this.handleResizeMove),this.resize.addEventListener("mouseup",this.handleResizeMove),this.cover.addEventListener("mousemove",this.handleCoverMouseMove),this.cover.addEventListener("mouseup",this.handleCoverMouseMove),window.addEventListener("mouseup",this.handleMouseUp)},t.prototype.componentWillUnmount=function(){this.selector.removeEventListener("mousedown",this.handleSelectorMove),this.selector.removeEventListener("mousemove",this.handleSelectorMove),this.selector.removeEventListener("mouseup",this.handleSelectorMove),this.resize.removeEventListener("mousedown",this.handleResizeMove),this.resize.removeEventListener("mousemove",this.handleResizeMove),this.resize.removeEventListener("mouseup",this.handleResizeMove),this.cover.removeEventListener("mousemove",this.handleCoverMouseMove),this.cover.removeEventListener("mouseup",this.handleCoverMouseMove),window.removeEventListener("mouseup",this.handleMouseUp)},t.prototype.handleSelectorMove=function(e){var t=this;if(void 0!==this.dragging&&null!==this.dragging&&"resize"===this.dragging.id)this.handleCoverMouseMove(e);else switch(e.type){case"mousedown":this.diffX=e.clientX-e.target.offsetLeft,this.diffY=e.clientY-e.target.offsetTop,this.dragging=e.target;break;case"mousemove":if(null!==this.dragging){var n=e.clientY-this.diffY,r=e.clientX-this.diffX;this.setState(function(e){return n<0&&(n=0),r<0&&(r=0),n>e.naturalHeight-t.state.selectorWidth&&(n=e.naturalHeight-t.state.selectorWidth),r>e.naturalWidth-t.state.selectorWidth&&(r=e.naturalWidth-t.state.selectorWidth),{selectorTop:n,selectorLeft:r}})}break;case"mouseup":case"mouseleave":this.dragging=null}},t.prototype.handleSubmit=function(){var e=this,t=this.newAvatar,n=t.getContext("2d"),r=this.state.selectorLeft,o=this.state.selectorTop,s=this.state.selectorWidth;t.width=s,t.height=s,n.drawImage(this.state.img,r*this.state.scaling,o*this.state.scaling,s*this.state.scaling,s*this.state.scaling,0,0,s,s),t.toBlob(function(t){return i(e,void 0,void 0,function(){var e,n,r,o,i,s,u,l,p;return a(this,function(a){switch(a.label){case 0:return e=new Blob([t],{type:"image/jpeg"}),e.lastModifiedDate=Date.now(),e.name="头像.jpg",[4,c.uploadFile(e)];case 1:n=a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),this.setState({isLoading:!0}),r=c.getLocalStorage("accessToken"),o="http://apitest.niconi.cc/me/portrait",i=new Headers,i.append("Content-Type","application/json"),i.append("Authorization",r),s="http://apitest.niconi.cc"+n.content,[4,fetch(o,{method:"PUT",headers:i,body:JSON.stringify(s)})];case 3:if(u=a.sent(),200!==u.status)throw{};return this.setState({info:"修改成功",avatarNow:s,isLoading:!1,isShown:!1,divheight:0}),l=c.getLocalStorage("userInfo"),l.portraitUrl=s,this.props.changeUserInfo(l),[3,5];case 4:return p=a.sent(),this.setState({info:"修改失败",isLoading:!1,isShown:!1,divheight:0}),[3,5];case 5:return[2]}})})},"image/jpeg",.75)},t.prototype.handleResizeMove=function(e){var t=this;switch(e.type){case"mousedown":this.diffX=e.clientX-e.target.offsetLeft,this.dragging=e.target;break;case"mousemove":null!==this.dragging&&(this.diffY=e.clientX-e.target.offsetLeft,this.setState(function(e){var n=e.selectorWidth+t.diffY-t.diffX,r=Math.min(e.NUM_MAX,e.naturalWidth-e.selectorLeft,e.naturalHeight-e.selectorTop);return isNaN(n)||(n<100&&(n=100),n>r&&(n=r)),{selectorWidth:isNaN(n)?e.selectorWidth:n}}));break;case"mouseup":case"mouseleave":this.dragging=null}},t.prototype.handleCoverMouseMove=function(e){var t=this;switch(e.type){case"mouseup":this.dragging=null;break;case"mousemove":if(void 0!==this.dragging&&null!==this.dragging&&"resize"===this.dragging.id)this.diffY=e.clientX-this.dragging.offsetLeft,this.setState(function(e){var n=e.selectorWidth+t.diffY-t.diffX;if(!isNaN(n)){var r=Math.min(e.NUM_MAX,e.naturalWidth-e.selectorLeft,e.naturalHeight-e.selectorTop);n<100&&(n=100),n>r&&(n=r)}return{selectorWidth:isNaN(n)?e.selectorWidth:n}});else if(void 0!==this.dragging&&null!==this.dragging&&"selector"===this.dragging.id){var n=e.clientY-this.diffY,r=e.clientX-this.diffX;this.setState(function(e){return n<0&&(n=0),r<0&&(r=0),n>e.naturalHeight-t.state.selectorWidth&&(n=e.naturalHeight-t.state.selectorWidth),r>e.naturalWidth-t.state.selectorWidth&&(r=e.naturalWidth-t.state.selectorWidth),{selectorTop:n,selectorLeft:r}})}}},t.prototype.render=function(){var e=this,t={display:"none"};c.getLocalStorage("userInfo");return s.createElement("div",null,s.createElement("h2",null,"修改头像"),s.createElement("div",{className:"user-center-config-avatar"},s.createElement("img",{src:this.state.avatarNow}),s.createElement("div",null,s.createElement("button",{id:"chooseDefaultAvatar",type:"button"},"选择论坛头像"),s.createElement("div",null,s.createElement("input",{onChange:this.handleChange,id:"uploadAvatar",type:"file",accept:"image/*",style:t}),s.createElement("label",{htmlFor:"uploadAvatar"},s.createElement("p",null,"选择本地图片")),s.createElement("p",{style:{color:"red"}},this.state.info),s.createElement("button",{type:"button",className:"config-submit-button",style:this.state.isShown?{}:t,onClick:this.handleSubmit,disabled:this.state.isLoading},"提交"))),s.createElement("div",{className:"user-center-config-avatar-preview",style:this.state.isShown?{opacity:1,marginTop:"2rem"}:{zIndex:-1}},s.createElement("div",{style:{position:"absolute",width:"824px",overflow:"hidden",paddingBottom:"50px"}},s.createElement("canvas",{id:"newAvatar",style:t,ref:function(t){e.newAvatar=t}}),s.createElement("canvas",{ref:function(t){e.myCanvas=t},style:this.state.isShown?{position:"relative"}:{display:"none"}}),s.createElement("div",{id:"cover",ref:function(t){e.cover=t},style:{width:this.state.divWidth+"px",height:this.state.divheight+"px",top:0}}),s.createElement("div",{className:"imgdata",style:this.state.isShown?{width:this.state.selectorWidth+"px",height:this.state.selectorWidth+"px",borderRadius:this.state.selectorWidth/2+"px",top:this.state.selectorTop+"px",left:this.state.selectorLeft+"px"}:t},s.createElement("img",{src:this.state.avatarURL,style:{position:"relative",top:"-"+this.state.selectorTop+"px",left:"-"+this.state.selectorLeft+"px",width:this.state.naturalWidth+"px",height:this.state.naturalHeight+"px"}})),s.createElement("div",{id:"selector",ref:function(t){e.selector=t},style:this.state.isShown?{width:this.state.selectorWidth+"px",height:this.state.selectorWidth+"px",borderRadius:this.state.selectorWidth/2+"px",top:this.state.selectorTop+"px",left:this.state.selectorLeft+"px"}:t}),s.createElement("span",{id:"resize",ref:function(t){e.resize=t},style:{top:this.state.selectorWidth+this.state.selectorTop+"px",left:this.state.selectorWidth+this.state.selectorLeft+"px"}})),s.createElement("img",{onLoad:function(t){e.handleIMGLoad(t.target.naturalWidth,t.target.naturalHeight,t.target)},style:t,src:this.state.avatarURL})),s.createElement("div",{style:{width:"100%",height:this.state.divheight+"px",transitionDuration:".5s"}})))},t}(s.Component);t.default=l.connect(function(){return null},r)(p)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this;return o.createElement("div",null,o.createElement("h2",null,"修改签名档"),o.createElement("div",{className:"user-center-config-signature"},o.createElement("textarea",{id:"signature",onChange:function(t){e.props.onchange(t.target.value)},value:this.props.signature}),o.createElement("div",null,o.createElement("p",null,"注* 个性签名将在个人主页、发布文章、回复文章中显示，允许使用UBB代码"))))},t}(o.Component);t.UserCenterConfigSignature=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(443),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this,t=[],n=0;for(n=100;n--;)t.unshift(n+1920);var r=t.map(function(e){return o.createElement("option",{value:e},e)});for(r.unshift(o.createElement("option",{value:9999},"保密")),r.unshift(o.createElement("option",{value:0},"未选择")),t=[],n=12;n--;)t.unshift(n+1);var i=t.map(function(e){return o.createElement("option",{value:e},e)});for(i.unshift(o.createElement("option",{value:0},"未选择")),t=[],n=31;n--;)t.unshift(n+1);var a=t.map(function(e){return o.createElement("option",{value:e},e)});return a.unshift(o.createElement("option",{value:0},"未选择")),o.createElement("div",{className:"user-center-config-others"},o.createElement("h2",null,"其他设置"),o.createElement("div",{className:"config-gender"},o.createElement("p",null,"性别："),o.createElement("select",{id:"genderSelect",name:"Gender",value:this.props.userinfo.Gender,onChange:function(t){e.props.handleChange(t.target.name,Number.parseInt(t.target.value))}},o.createElement("option",{value:1},"男"),o.createElement("option",{value:0},"女"))),o.createElement("div",{className:"config-birthday"},o.createElement("p",null,"生日："),o.createElement("select",{id:"birthdayYear",name:"birthdayYear",value:this.props.userinfo.birthdayYear,onChange:function(t){e.props.handleChange(t.target.name,Number.parseInt(t.target.value))}},r),o.createElement("p",null,"年"),o.createElement("select",{id:"birthdayMouth",name:"birthdayMouth",value:this.props.userinfo.birthdayMouth,disabled:0===this.props.userinfo.birthdayYear,onChange:function(t){e.props.handleChange(t.target.name,Number.parseInt(t.target.value))}},i),o.createElement("p",null,"月"),o.createElement("select",{id:"birthdayDay",name:"birthdayDay",value:this.props.userinfo.birthdayDay,disabled:0===this.props.userinfo.birthdayYear,onChange:function(t){e.props.handleChange(t.target.name,Number.parseInt(t.target.value))}},a),o.createElement("p",null,"日")),o.createElement("div",{className:"config-text"},o.createElement("p",null,"QQ："),o.createElement("input",{type:"text",name:"QQ",value:this.props.userinfo.QQ,maxLength:20,onChange:function(t){e.props.handleChange(t.target.name,t.target.value)}})),o.createElement("div",{className:"config-text"},o.createElement("p",null,"邮箱："),o.createElement("input",{type:"email",name:"EmailAddress",value:this.props.userinfo.EmailAddress,maxLength:150,onChange:function(t){e.props.handleChange(t.target.name,t.target.value)}})),o.createElement("div",{className:"config-introduction"},o.createElement("p",null,"个人简介："),o.createElement("div",null,o.createElement("textarea",{name:"Introduction",value:this.props.userinfo.Introduction,maxLength:100,onChange:function(t){e.props.handleChange(t.target.name,t.target.value)}}),o.createElement("p",null,"*不超过100字"))))},t}(o.Component);t.UserCenterConfigOthers=a;!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r(t,e)}(i.ChangeUserInfo)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e}();t.AppState=r;var o=function(){function e(){}return e}();t.TopicVoteState=o;var i=function(){function e(){}return e}();t.PostTopicState=i;var a=function(){function e(){}return e}();t.AuthorMessageState=a;var s=function(){function e(){}return e}();t.TopicTitleState=s;var c=function(){function e(){}return e}();t.ContentState=c;var u=function(){function e(){}return e}();t.TopicGoodState=u;var l=function(){function e(){}return e}();t.ReplierState=l;var p=function(){function e(){}return e}();t.MainPageTopicState=p;var f=function(){function e(){}return e}();t.ListHeadState=f;var h=function(){function e(){}return e}();t.ListNoticeState=h;var d=function(){function e(){}return e}();t.ListTagState=d;var m=function(){function e(){}return e}();t.ListContentState=m;var g=function(){function e(){}return e}();t.TopicTitleAndContentState=g;var v=function(){function e(){}return e}();t.ListPagerState=v;var y=function(){function e(e){this.pageNumber=e}return e}();t.PagerState=y;var b=function(){function e(e,t,n,r,o,i,a,s,c,u,l,p,f,h,d,m){this.userName=e,this.time=r,this.title=t,this.content=n,this.signature=o,this.userImgUrl=i,this.userId=a,this.likeNumber=s,this.dislikeNumber=c,this.postId=u,this.isAnonymous=l,this.contentType=p,this.isFollowing=f,this.fanCount=h,this.likeInfo=d,this.awardInfo=m}return e}();t.TopicState=b;var w=function(){function e(){}return e}();t.LoginState=w;var E=function(){function e(){}return e}();t.AlreadyLoginState=E;var _=function(){function e(e,t,n,r,o){this.name=e,this.todayPostCount=t,this.totalPostCount=n,this.id=r,this.masters=o}return e}();t.Board=_;var S=function(){function e(){}return e}();t.BoardState=S;var I=function(){function e(){}return e}();t.UserInfo=I;var C=function(){function e(){}return e}();t.UserRecentPost=C;var N=function(){function e(){}return e}();t.UserFanInfo=N;var x=function(){function e(){}return e}();t.UserFavoritesBoardInfo=x;var T=function(){function e(){}return e}();t.ChangeUserInfo=T},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(445),a=n(450),s=n(452),c=n(454),u=n(2),l=n(9),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){u.refreshUnReadCount();var e={totalCount:0,replyCount:0,atCount:0,systemCount:0,messageCount:0};return u.getStorage("unreadCount")&&(e=u.getStorage("unreadCount")),o.createElement("div",{className:"message-root"},o.createElement("div",{className:"message"},o.createElement("div",{className:"message-title"},"我的消息"),o.createElement(l.BrowserRouter,null,o.createElement("div",{className:"message-content"},o.createElement("div",{className:"message-nav"},o.createElement(l.NavLink,{to:"/message/response"},o.createElement("div",{id:"response",className:"nav-div"},"回复我的",o.createElement("div",{className:"message-counterNav displaynone",id:"unreadCount-replyCount1"},e.replyCount))),o.createElement(l.NavLink,{to:"/message/attme"},o.createElement("div",{id:"attme",className:"nav-div"},"@ 我的",o.createElement("div",{className:"message-counterNav displaynone",id:"unreadCount-atCount1"},e.atCount))),o.createElement(l.NavLink,{to:"/message/system"},o.createElement("div",{id:"system",className:"nav-div"},"系统通知",o.createElement("div",{className:"message-counterNav displaynone",id:"unreadCount-systemCount1"},e.systemCount))),o.createElement(l.NavLink,{to:"/message/message"},o.createElement("div",{id:"message",className:"nav-div"},"我的私信",o.createElement("div",{className:"message-counterNav displaynone",id:"unreadCount-messageCount1"},e.messageCount)))),o.createElement(l.Route,{path:"/message/response/:page?",component:a.MessageResponse}),o.createElement(l.Route,{path:"/message/attme/:page?",component:s.MessageAttme}),o.createElement(l.Route,{path:"/message/system/:page?",component:c.MessageSystem}),o.createElement(l.Route,{path:"/message/message/:page?",component:i.MessageMessage})))))},t}(o.Component);t.Message=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(446),c=n(447),u=n(2),l=function(e){function t(t){var n=e.call(this,t)||this;return n.coverMessagePerson=function(e){var t=function(){n.setState({chatObj:e}),$(".message-message-pList > div").removeClass("message-message-pFocus"),$("#"+e.name).addClass("message-message-pFocus")};return a.createElement("div",{onClick:t,id:""+e.name},a.createElement(s.MessagePerson,{data:e}))},n.state={data:null,chatObj:null},n.getMoreContact=n.getMoreContact.bind(n),n.onChange=n.onChange.bind(n),n}return r(t,e),t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t,n,r;return i(this,function(o){switch(o.label){case 0:return e=u.getLocalStorage("accessToken"),(t=u.getLocalStorage("userInfo"),n=u.getStorage("recentContact"),console.log("第一次获取联系人缓存"),console.log(n),n&&0!==n.length)?[3,2]:(console.log("没有获取到缓存，自己取"),[4,u.getRecentContact(0,7,this.context.router)]);case 1:n=o.sent(),console.log("取到了数据，然后呢"),console.log(n),u.setStorage("recentContact",n),o.label=2;case 2:return[4,u.sortContactList(n,this.context.router)];case 3:return n=o.sent(),console.log("联系人列表重新排序后"),console.log(n),n&&this.setState({data:n,chatObj:n[0]}),r=this.state.chatObj,r&&$("#"+r.name).addClass("message-message-pFocus"),[2]}})})},t.prototype.getMoreContact=function(){return o(this,void 0,void 0,function(){var e,t;return i(this,function(n){switch(n.label){case 0:return"none"!=$("#moreDone").css("display")?[3,2]:($("#moreImg").removeClass("displaynone"),$("#moreDot").addClass("displaynone"),$("#moreShow").addClass("displaynone"),e=u.getStorage("recentContact"),[4,u.getRecentContact(e.length,7,this.context.router)]);case 1:t=n.sent(),e=e.concat(t),this.setState({data:e}),u.setStorage("recentContact",e),t.length<7?($("#moreImg").addClass("displaynone"),$("#moreDone").removeClass("displaynone")):($("#moreImg").addClass("displaynone"),$("#moreDot").removeClass("displaynone"),$("#moreShow").removeClass("displaynone")),n.label=2;case 2:return[2]}})})},t.prototype.onChange=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){return e=u.getStorage("recentContact"),this.setState({data:e,chatObj:e[0]}),$(".message-message-pList > div").removeClass("message-message-pFocus"),$("#"+this.state.chatObj.name).addClass("message-message-pFocus"),[2]})})},t.prototype.render=function(){$(".message-nav > div").removeClass("message-nav-focus"),$("#message").addClass("message-nav-focus");var e=this.state.data,t=this.state.chatObj;return t||(t={id:9898,name:"",portraitUrl:"http://file.cc98.org/uploadfile/2017/12/4/1636327542.png",message:[{id:9898,senderId:9898,receiverId:9898,content:"",isRead:!0,time:new Date,showTime:!0}],lastContent:""}),e||(e=[t]),console.log("message正式开始数据填充的时候"),console.log(e),console.log(t),a.createElement("div",{className:"message-message"},a.createElement("div",{className:"message-message-people"},a.createElement("div",{className:"message-message-pTitle"},"近期私信"),a.createElement("div",{className:"message-message-pList"},e.map(this.coverMessagePerson),a.createElement("div",{className:"message-message-plMore",onClick:this.getMoreContact},a.createElement("img",{id:"moreImg",src:"http://file.cc98.org/uploadfile/2017/11/19/2348481046.gif",className:"displaynone"}),a.createElement("div",{id:"moreDot"},"..."),a.createElement("div",{id:"moreShow"},"显示更多小伙伴~"),a.createElement("div",{id:"moreDone",className:"displaynone"},"小伙伴们都出来了~")))),a.createElement(c.MessageWindow,{data:t,onChange:this.onChange}))},t}(a.Component);t.MessageMessage=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(15),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this.props.data;return e.lastContent||(e.lastContent=""),console.log("单个联系人开始渲染"),console.log(e),o.createElement("div",{className:"message-message-person"},o.createElement("img",{className:"message-message-pPortraitUrl",src:e.portraitUrl}),o.createElement("div",{className:"message-message-pInfo"},o.createElement("div",{className:"message-message-pName"},e.name),o.createElement("div",{className:"message-message-pMessage"},o.createElement(i.UbbContainer,{code:e.lastContent}))))},t}(o.Component);t.MessagePerson=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(448),c=n(449),u=n(2),l=function(e){function t(t){var n=e.call(this,t)||this;return n.coverMessageProps=function(e){var t=u.getLocalStorage("userInfo"),r=n.props.data;return e.receiverId==t.id?a.createElement(c.MessageReceiver,{id:e.id,senderName:r.name,receiverName:t.name,senderPortraitUrl:r.portraitUrl,receiverPortraitUrl:t.portraitUrl,content:e.content,isRead:e.isRead,time:e.time,showTime:e.showTime}):e.senderId==t.id?a.createElement(s.MessageSender,{id:e.id,senderName:t.name,receiverName:r.name,senderPortraitUrl:t.portraitUrl,receiverPortraitUrl:r.portraitUrl,content:e.content,isRead:e.isRead,time:e.time,showTime:e.showTime}):void 0},n.report=function(){alert("举报他人恶意私信请到【论坛事务】按照格式发帖投诉，记得截图保留证据，管理员会及时进行处理！感谢您对CC98的支持！")},n.state={data:[]},n.handleScroll=n.handleScroll.bind(n),n.getNewMessage=n.getNewMessage.bind(n),n.postMessage=n.postMessage.bind(n),n}return r(t,e),t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return this.getData(this.props),[2]})})},t.prototype.getData=function(e){return o(this,void 0,void 0,function(){var t,n,r,o,r;return i(this,function(i){switch(i.label){case 0:return[4,u.getRecentMessage(e.data.id,0,10,this.context.router)];case 1:if((t=i.sent())&&t.length>0){if((n=e.data.message)&&n.length>0)for(r in t)if(t[r].id==n[0].id){t=t.slice(0,r).concat(n),t=u.sortRecentMessage(t);break}if(o=u.getStorage("recentContact")){for(r in o)if(o[r].id==e.data.id){o[r].message=t;break}u.setStorage("recentContact",o)}this.setState({data:t})}return document.getElementById("messageContent").addEventListener("scroll",this.handleScroll),[2]}})})},t.prototype.componentWillReceiveProps=function(e){return o(this,void 0,void 0,function(){var t;return i(this,function(n){return t=document.getElementById("messageContent"),t.scrollTop=t.scrollHeight,this.getData(e),[2]})})},t.prototype.handleScroll=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a;return i(this,function(i){switch(i.label){case 0:return 0!=(e=$("#messageContent")[0].scrollTop)?[3,2]:(console.log("到顶啦"),$("#wcLoadingImg").removeClass("displaynone"),t=this.state.data,[4,u.getRecentMessage(this.props.data.id,t.length,10,this.context.router)]);case 1:if((n=i.sent())&&n.length>0){if(r=t.concat(n),r=u.sortRecentMessage(r),this.setState({data:r}),o=u.getStorage("recentContact")){for(a in o)if(o[a].id==this.props.data.id){o[a].message=r;break}u.setStorage("recentContact",o)}}else $("#wcLoadingImg").addClass("displaynone"),$("#wcLoadingText").removeClass("displaynone");i.label=2;case 2:return[2]}})})},t.prototype.getNewMessage=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a,s,c;return i(this,function(i){switch(i.label){case 0:return e=document.getElementById("messageContent"),e.scrollTop=e.scrollHeight,[4,u.getRecentMessage(this.props.data.id,0,10,this.context.router)];case 1:if(t=i.sent(),n=[],r=u.getStorage("recentContact")){for(o=0;o<r.length;o++)if(r[o].id==this.props.data.id){if((n=r[o].message)!=[])for(a=0;a<t.length;a++)if(t[a].id==n[0].id){t=t.slice(0,a).concat(n),t=u.sortRecentMessage(t);break}r[o].message=t,r[o].lastContent=t[0].content;break}o==r.length?(s=[this.props.data],s[0].message=t,s[0].lastContent=t[0].content,r=s.concat(r),u.setStorage("recentContact",r),this.props.onChange()):0==o?(u.setStorage("recentContact",r),this.setState({data:t}),this.props.onChange()):(c=r[o],r.splice(o,1),r.unshift(c),u.setStorage("recentContact",r),this.props.onChange())}return[2]}})})},t.prototype.handleFocus=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return $("#wPostNotice").addClass("displaynone"),$("#wPostError").addClass("displaynone"),$("#postContent")[0].focus(),[2]})})},t.prototype.handleBlur=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return""==$("#postContent").val()&&("none"==$("#wPostNotice").css("display")?$("#wPostNotice").removeClass("displaynone"):$("#wPostNotice").addClass("displaynone")),[2]})})},t.prototype.postMessage=function(){return o(this,void 0,void 0,function(){var e,t,n;return i(this,function(r){switch(r.label){case 0:return""==$("#postContent").val()?[2]:(e={receiverId:this.props.data.id,content:$("#postContent").val()},t=JSON.stringify(e),[4,u.sendMessage(t,this.context.router)]);case 1:return n=r.sent(),403==n.status?($("#postContent").val(""),$("#wPostError").removeClass("displaynone"),[2]):(setTimeout(this.getNewMessage,200),$("#postContent").val(""),[2])}})})},t.prototype.render=function(){var e=this.props.data;return console.log(this.state.data),a.createElement("div",{className:"message-message-window"},a.createElement("div",{className:"message-message-wHeader"},a.createElement("div",{className:"message-message-wReport"}),a.createElement("div",{className:"message-message-wTitle"},"与 ",e.name," 的私信"),a.createElement("div",{className:"message-message-wReport"},a.createElement("button",{onClick:this.report},"举报"))),a.createElement("div",{className:"message-message-wContent",id:"messageContent"},this.state.data.map(this.coverMessageProps),a.createElement("div",{className:"message-message-wcLoading"},a.createElement("img",{src:"http://file.cc98.org/uploadfile/2017/11/19/2348481046.gif",id:"wcLoadingImg",className:"displaynone"}),a.createElement("div",{id:"wcLoadingText",className:"message-message-wcLoadingText displaynone"},"没有更多消息了~"))),a.createElement("div",{className:"message-message-wPost"},a.createElement("textarea",{className:"message-message-wPostArea",id:"postContent",onFocus:this.handleFocus,onBlur:this.handleBlur}),a.createElement("div",{id:"wPostNotice",className:"message-message-wPostNotice",onClick:this.handleFocus},"请在这里填入您要发送的私信内容"),a.createElement("div",{id:"wPostError",className:"message-message-wPostError displaynone",onClick:this.handleFocus},"您的发送过快，请稍作歇息~"),a.createElement("button",{className:"message-message-wPostBtn",onClick:this.postMessage},"发送")))},t}(a.Component);t.MessageWindow=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(15),a=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e,t="/user/name/"+this.props.senderName;e=this.props.showTime?"message-message-wcTime":"displaynone";var n=a.autoAddUrl(this.props.content);return o.createElement("div",{className:"message-message-wc"},o.createElement("div",{className:e},moment(this.props.time).format("YYYY-MM-DD HH:mm:ss")),o.createElement("div",{className:"message-message-wcSender"},o.createElement("a",{href:t,target:"_blank"},o.createElement("img",{className:"message-message-wcPortraitUrl",src:this.props.senderPortraitUrl})),o.createElement("div",{className:"message-message-wcContent"},o.createElement("div",{id:String(this.props.id),className:"message-message-wcText"},o.createElement(i.UbbContainer,{code:n}))),o.createElement("div",{className:"message-message-wcRead1"},o.createElement("div",{className:"message-message-wcRead2"},this.props.isRead?"已读":"未读"))))},t}(o.Component);t.MessageSender=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(15),a=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e,t="/user/name/"+this.props.senderName;e=this.props.showTime?"message-message-wcTime":"displaynone";var n=a.autoAddUrl(this.props.content);return o.createElement("div",{className:"message-message-wc"},o.createElement("div",{className:e},moment(this.props.time).format("YYYY-MM-DD HH:mm:ss")),o.createElement("div",{className:"message-message-wcReceiver"},o.createElement("a",{href:t,target:"_blank"},o.createElement("img",{className:"message-message-wcPortraitUrl",src:this.props.senderPortraitUrl})),o.createElement("div",{className:"message-message-wcContent"},o.createElement("div",{className:"message-message-wcText",id:String(this.props.id)},o.createElement(i.UbbContainer,{code:n})))))},t}(o.Component);t.MessageReceiver=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(451),c=n(2),u=n(57),l=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.coverMessageResponse=function(e){return a.createElement(s.MessageResponsebox,{id:e.id,type:e.type,time:e.time,topicId:e.topicId,topicTitle:e.topicTitle,floor:e.floor,userId:e.userId,userName:e.userName,boardId:e.boardId,boardName:e.boardName,isRead:e.isRead})},r.state={data:[],from:0,loading:!0,totalPage:1},r}return r(t,e),t.prototype.getData=function(e){return o(this,void 0,void 0,function(){var t,n,r,o,a;return i(this,function(i){switch(i.label){case 0:return $(".message-nav > div").removeClass("message-nav-focus"),$("#response").addClass("message-nav-focus"),[4,c.getTotalPage(1)];case 1:return t=i.sent(),n=t/7,r=parseInt(n)+1,console.log("总消息条数和页码",t,r),o=e.match.params.page-1,(!o||o<0)&&(o=0),[4,c.getMessageResponse(7*o,7,this.context.router)];case 2:return a=i.sent(),console.log("获取到了回复消息",a),a&&this.setState({data:a,from:o+1,totalPage:r}),[2]}})})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return this.getData(this.props),[2]})})},t.prototype.componentWillReceiveProps=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return this.getData(e),[2]})})},t.prototype.render=function(){return a.createElement("div",{className:"message-right"},a.createElement("div",{className:"message-response"},this.state.data.map(this.coverMessageResponse)),a.createElement("div",{className:"message-pager"},a.createElement(u.Pager,{url:"/message/response/",page:this.state.from,totalPage:this.state.totalPage})))},t}(a.Component);t.MessageResponse=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(15),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e,t=window.location.host,n="[url=http://"+t+"/list/"+this.props.boardId+"/normal][color=dodgerblue]"+this.props.boardName+"[/color][/url]",r=this.props.floor/10+1,a=parseInt(r),s=this.props.floor+10-10*a;return e=this.props.isRead?"[url=http://"+t+"/user/name/"+this.props.userName+"][color=gray]"+this.props.userName+"[/color][/url] [color=gray]在《"+this.props.topicTitle+"》中回复了你。[/color][url=http://"+t+"/topic/"+this.props.topicId+"/"+a+"#"+s+"][color=blue]http://"+t+"/topic/"+this.props.topicId+"[/color][/url]":"[url=http://"+t+"/user/name/"+this.props.userName+"][color=black][b]"+this.props.userName+"[/b][/color][/url] [color=black][b]在《"+this.props.topicTitle+"》中回复了你。[/b][/color][url=http://"+t+"/topic/"+this.props.topicId+"/"+a+"#"+s+"][color=blue][b]http://"+t+"/topic/"+this.props.topicId+"[/b][/color][/url]",o.createElement("div",{className:"message-response-box"},o.createElement("div",{className:"message-response-box-middle"},o.createElement("div",{className:"message-response-box-middle1"},o.createElement("div",{className:"message-response-box-middle-title"},o.createElement(i.UbbContainer,{code:n})),o.createElement("div",{className:"message-response-box-middle-date"},moment(this.props.time).format("YYYY-MM-DD HH:mm:ss"))),o.createElement("div",{className:"message-response-box-middle-content"},o.createElement(i.UbbContainer,{code:e}))))},t}(o.Component);t.MessageResponsebox=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(453),c=n(2),u=n(57),l=function(e){function t(t){var n=e.call(this,t)||this;return n.coverMessageAttme=function(e){return a.createElement(s.MessageAttmebox,{id:e.id,type:e.type,time:e.time,topicId:e.topicId,topicTitle:e.topicTitle,floor:e.floor,userId:e.userId,userName:e.userName,boardId:e.boardId,boardName:e.boardName,isRead:e.isRead})},n.state={data:[],from:0,loading:!0,totalPage:1},n}return r(t,e),t.prototype.getData=function(e){return o(this,void 0,void 0,function(){var t,n,r,o,a;return i(this,function(i){switch(i.label){case 0:return $(".message-nav > div").removeClass("message-nav-focus"),$("#attme").addClass("message-nav-focus"),[4,c.getTotalPage(2)];case 1:return t=i.sent(),n=t/7,r=parseInt(n),o=e.match.params.page-1,(!o||o<0)&&(o=0),[4,c.getMessageAttme(7*o,7,this.context.router)];case 2:return a=i.sent(),console.log("显示获取到的@消息",a),a&&this.setState({data:a,from:o+1,totalPage:r}),[2]}})})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return this.getData(this.props),[2]})})},t.prototype.componentWillReceiveProps=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return this.getData(e),[2]})})},t.prototype.render=function(){return a.createElement("div",{className:"message-right"},a.createElement("div",{className:"message-response"},this.state.data.map(this.coverMessageAttme)),a.createElement("div",{className:"message-pager"},a.createElement(u.Pager,{url:"/message/attme/",page:this.state.from,totalPage:this.state.totalPage})))},t}(a.Component);t.MessageAttme=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(15),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e,t=window.location.host,n="[url=http://"+t+"/list/"+this.props.boardId+"/normal][color=dodgerblue]"+this.props.boardName+"[/color][/url]",r=this.props.floor/10+1,a=parseInt(r),s=this.props.floor+10-10*a;return e=this.props.isRead?"[url=http://"+t+"/user/name/"+this.props.userName+"][color=gray]"+this.props.userName+"[/color][/url] [color=gray]在《"+this.props.topicTitle+"》中@了你。[/color][url=http://"+t+"/topic/"+this.props.topicId+"/"+a+"#"+s+"][color=blue]http://"+t+"/topic/"+this.props.topicId+"[/color][/url]":"[url=http://"+t+"/user/name/"+this.props.userName+"][color=black][b]"+this.props.userName+"[/b][/color][/url] [color=black][b]在《"+this.props.topicTitle+"》中@了你。[/b][/color][url=http://"+t+"/topic/"+this.props.topicId+"/"+a+"#"+s+"][color=blue][b]http://"+t+"/topic/"+this.props.topicId+"[/b][/color][/url]",o.createElement("div",{className:"message-response-box"},o.createElement("div",{className:"message-response-box-middle"},o.createElement("div",{className:"message-response-box-middle1"},o.createElement("div",{className:"message-response-box-middle-title"},o.createElement(i.UbbContainer,{code:n})),o.createElement("div",{className:"message-response-box-middle-date"},moment(this.props.time).format("YYYY-MM-DD HH:mm:ss"))),o.createElement("div",{className:"message-response-box-middle-content"},o.createElement(i.UbbContainer,{code:e}))))},t}(o.Component);t.MessageAttmebox=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(455),c=n(2),u=n(57),l=function(e){function t(t){var n=e.call(this,t)||this;return n.coverMessageSystem=function(e){return a.createElement(s.MessageSystembox,{id:e.id,type:e.type,title:e.title,content:e.content,time:e.time,topicId:e.topicId,floor:e.floor,isRead:e.isRead})},n.state={data:[],from:0,loading:!0,totalPage:1},n}return r(t,e),t.prototype.getData=function(e){return o(this,void 0,void 0,function(){var t,n,r,o,a;return i(this,function(i){switch(i.label){case 0:return $(".message-nav > div").removeClass("message-nav-focus"),$("#system").addClass("message-nav-focus"),[4,c.getTotalPage(3)];case 1:return t=i.sent(),n=t/7,r=parseInt(n)+1,o=e.match.params.page-1,(!o||o<0)&&(o=0),[4,c.getMessageSystem(7*o,7,this.context.router)];case 2:return a=i.sent(),console.log("这是获取到的处理后系统消息"),console.log(a),a&&this.setState({data:a,from:o+1,totalPage:r}),[2]}})})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return this.getData(this.props),[2]})})},t.prototype.componentWillReceiveProps=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return this.getData(e),[2]})})},t.prototype.render=function(){return a.createElement("div",{className:"message-right"},a.createElement("div",{className:"message-system"},this.state.data.map(this.coverMessageSystem)),a.createElement("div",{className:"message-pager"},a.createElement(u.Pager,{url:"/message/system/",page:this.state.from,totalPage:this.state.totalPage})))},t}(a.Component);t.MessageSystem=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(15),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e;if(this.props.topicId){var t=window.location.host;if(this.props.floor){var n=this.props.floor/10+1,r=parseInt(n),a=this.props.floor+10-10*r;e=this.props.isRead?"[url=http://"+t+"/topic/"+this.props.topicId+"/"+r+"#"+a+"][color=gray]"+this.props.content+"[/color][color=blue]http://"+t+"/topic/"+this.props.topicId+"[/color][/url]":"[url=http://"+t+"/topic/"+this.props.topicId+"/"+r+"#"+a+"][b][color=black]"+this.props.content+"[/color][color=blue]http://"+t+"/topic/"+this.props.topicId+"[/color][/b][/url]"}else e=this.props.isRead?"[url=http://"+t+"/topic/"+this.props.topicId+"][color=gray]"+this.props.content+"[/color][color=blue]http://"+t+"/topic/"+this.props.topicId+"[/color][/url]":"[url=http://"+t+"/topic/"+this.props.topicId+"][b][color=black]"+this.props.content+"[/color][color=blue]http://"+t+"/topic/"+this.props.topicId+"[/color][/b][/url]"}else e=this.props.isRead?"[color=gray]"+this.props.content+"[/color]":"[color=black][b]"+this.props.content+"[/b][/color]";return o.createElement("div",{className:"message-system-box"},o.createElement("div",{className:"message-system-box-bar"},o.createElement("div",{className:"message-system-box-title"},this.props.title),o.createElement("div",{className:"message-system-box-date"},moment(this.props.time).format("YYYY-MM-DD HH:mm:ss"))),o.createElement("div",{className:"message-system-box-content"},o.createElement(i.UbbContainer,{code:e})))},t}(o.Component);t.MessageSystembox=a},function(e,t,n){"use strict";function r(e){return s.createElement(c.FocusTopicSingle,{title:e.title,hitCount:e.hitCount,id:e.id,boardId:e.boardId,boardName:e.boardName,replyCount:e.replyCount,userId:e.userId,userName:e.userName,portraitUrl:e.portraitUrl,time:e.time,likeCount:e.likeCount,dislikeCount:e.dislikeCount,fanCount:e.fanCount})}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),c=n(84),u=n(2),l=function(e){function t(t){var n=e.call(this,t)||this,r=u.getStorage("AllNewTopic");return r||(r=[]),n.state={data:r,from:0,loading:!0},n.handleScroll=n.handleScroll.bind(n),n}return o(t,e),t.prototype.componentDidMount=function(){return i(this,void 0,void 0,function(){var e,t,n;return a(this,function(r){switch(r.label){case 0:return[4,u.getAllNewTopic(0,this.context.router)];case 1:if(e=r.sent(),t=u.getStorage("AllNewTopic"))for(n=0;n<e.length;n++)if(e[n].id==t[0].id){e=e.slice(0,n).concat(t);break}return e.length>100&&(e=e.slice(0,100)),u.setStorage("AllNewTopic",e),this.setState({data:e,from:e.length}),document.addEventListener("scroll",this.handleScroll),[2]}})})},t.prototype.componentWillUnmount=function(){return i(this,void 0,void 0,function(){return a(this,function(e){return document.removeEventListener("scroll",this.handleScroll),[2]})})},t.prototype.handleScroll=function(){return i(this,void 0,void 0,function(){var e,t,n;return a(this,function(r){switch(r.label){case 0:if(!u.isBottom()||!this.state.loading)return[3,5];if(this.state.from>=99)return $("#focus-topic-loading").addClass("displaynone"),$("#focus-topic-loaddone").removeClass("displaynone"),[2];this.setState({loading:!1}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,u.getAllNewTopic(this.state.from,this.context.router)];case 2:return e=r.sent(),[3,4];case 3:return t=r.sent(),this.setState({loading:!0}),[2];case 4:n=this.state.data.concat(e),this.setState({data:n,from:n.length,loading:!0}),u.setStorage("AllNewTopic",n),r.label=5;case 5:return[2]}})})},t.prototype.render=function(){return s.createElement("div",{className:"focus-root"},s.createElement("div",{className:"focus"},s.createElement("div",{className:"focus-allNewTopic"},s.createElement("i",{className:"fa fa-home","aria-hidden":"true"}),"首页/全站新帖"),s.createElement("div",{className:"focus-topic-area"},s.createElement("div",{className:"focus-topic-topicArea"},this.state.data.map(r)),s.createElement("div",{className:"focus-topic-loading",id:"focus-topic-loading"},s.createElement("img",{src:"http://ww3.sinaimg.cn/large/0060lm7Tgy1fitwrd6yv0g302s0093y9.gif"})),s.createElement("div",{className:"focus-topic-loaddone displaynone",id:"focus-topic-loaddone"},"没有更多帖子啦~"))))},t}(s.Component);t.AllNewTopic=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(458),a=n(459),s=n(460),c=n(2),u=function(e){function t(t){var n=e.call(this,t)||this;return n.changeFocusBoard=function(){var e=c.getStorage("currentFocusBoard");e?n.setState({id:e.boardId,name:e.boardName}):n.setState({id:null,name:null})},n.state={id:null,name:null},n}return r(t,e),t.prototype.render=function(){return this.state.id?o.createElement("div",{className:"focus-root"},o.createElement("div",{className:"focus"},o.createElement("div",{className:"focus-title"},"我的关注"),o.createElement(i.FocusBoardArea,{onChange:this.changeFocusBoard}),o.createElement(s.FocusBoardTopicArea,{boardId:this.state.id,boardNme:this.state.name}))):o.createElement("div",{className:"focus-root"},o.createElement("div",{className:"focus"},o.createElement("div",{className:"focus-title"},"我的关注"),o.createElement(i.FocusBoardArea,{onChange:this.changeFocusBoard}),o.createElement(a.FocusTopicArea,null)))},t}(o.Component);t.Focus=u;var l=function(){function e(){}return e}();t.FocusState=l},function(e,t,n){"use strict";function r(e){return s.createElement("div",{className:"focus-board",id:""+e.id},e.name)}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),c=n(2),u=function(e){function t(t){var n=e.call(this,t)||this,r=c.getStorage("focusBoardList");return console.log(r),r||(r=[]),n.state={data:r},n}return o(t,e),t.prototype.componentDidMount=function(){return i(this,void 0,void 0,function(){var e,t,n,r,o,i,s,u,l,p,f,h,d;return a(this,function(a){switch(a.label){case 0:return(e=c.getStorage("focusBoardList"))?(this.setState({data:e}),[3,7]):[3,1];case 1:e=[],t=c.getLocalStorage("accessToken"),n=c.getLocalStorage("userInfo"),r=n.customBoards,console.log(r),o=new Headers,o.append("Authorization",t),i=[];for(s in r)i.push(s);u=0,a.label=2;case 2:return u<i.length?(l=i[u],[4,fetch("http://apitest.niconi.cc/board/"+r[l],{headers:o})]):[3,6];case 3:return p=a.sent(),[4,p.json()];case 4:f=a.sent(),e.push({id:r[l],name:f.name}),a.label=5;case 5:return u++,[3,2];case 6:this.setState({data:e}),c.setStorage("focusBoardList",e),a.label=7;case 7:return h=c.getStorage("currentFocusBoard"),h&&($(".focus-board").removeClass("focus-hover"),$("boardId_"+h.id).addClass("focus-hover")),d=this,$(".focus-board").click(function(){if("focus-board"==this.className){var e={boardId:this.id,boardName:this.innerHTML};c.setStorage("currentFocusBoard",e),$(".focus-board").removeClass("focus-hover"),$(this).addClass("focus-hover"),d.props.onChange()}else"focus-board focus-hover"==this.className&&(c.removeStorage("currentFocusBoard"),$(".focus-board").removeClass("focus-hover"),d.props.onChange())}),[2]}})})},t.prototype.render=function(){return s.createElement("div",{className:"focus-board-area"},s.createElement("div",{className:"focus-board",id:"0"},"关注用户"),this.state.data.map(r))},t}(s.Component);t.FocusBoardArea=u;var l=function(){function e(){}return e}();t.FocusProps=l},function(e,t,n){"use strict";function r(e){return s.createElement(c.FocusTopicSingle,{title:e.title,hitCount:e.hitCount,id:e.id,boardId:e.boardId,boardName:e.boardName,replyCount:e.replyCount,userId:e.userId,userName:e.userName,portraitUrl:e.portraitUrl,time:e.time,likeCount:e.likeCount,dislikeCount:e.dislikeCount,fanCount:e.fanCount})}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),c=n(84),u=n(2),l=function(e){function t(t){var n=e.call(this,t)||this,r=u.getStorage("focusBoardTopic");return r||(r=[]),n.state={data:r,from:0,loading:!0},n.handleScroll=n.handleScroll.bind(n),n}return o(t,e),t.prototype.componentDidMount=function(){return i(this,void 0,void 0,function(){var e,t,n;return a(this,function(r){switch(r.label){case 0:return[4,u.getFocusTopic(this.state.from,this.context.router)];case 1:if(e=r.sent(),t=u.getStorage("focusBoardTopic"))for(n=0;n<e.length;n++)if(e[n].id==t[0].id){e=e.slice(0,n).concat(t);break}return e.length>100&&(e=e.slice(0,100)),this.setState({data:e,from:e.length}),u.setStorage("focusBoardTopic",e),document.addEventListener("scroll",this.handleScroll),[2]}})})},t.prototype.componentWillUnmount=function(){return i(this,void 0,void 0,function(){return a(this,function(e){return document.removeEventListener("scroll",this.handleScroll),[2]})})},t.prototype.handleScroll=function(){return i(this,void 0,void 0,function(){var e,t,n;return a(this,function(r){switch(r.label){case 0:if(!u.isBottom()||!this.state.loading)return[3,5];if(this.state.from>=99)return $("#focus-topic-loading").addClass("displaynone"),$("#focus-topic-loaddone").removeClass("displaynone"),[2];this.setState({loading:!1}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,u.getFocusTopic(this.state.from,this.context.router)];case 2:return e=r.sent(),[3,4];case 3:return t=r.sent(),this.setState({loading:!0}),[2];case 4:n=this.state.data.concat(e),this.setState({data:n,from:n.length,loading:!0}),u.setStorage("focusBoardTopic",n),r.label=5;case 5:return[2]}})})},t.prototype.render=function(){return s.createElement("div",{className:"focus-topic-area"},s.createElement("div",{className:"focus-topic-topicArea"},this.state.data.map(r)),s.createElement("div",{className:"focus-topic-loading",id:"focus-topic-loading"},s.createElement("img",{src:"http://ww3.sinaimg.cn/large/0060lm7Tgy1fitwrd6yv0g302s0093y9.gif"})),s.createElement("div",{className:"focus-topic-loaddone displaynone",id:"focus-topic-loaddone"},"已加载100条新帖，无法加载更多了~"))},t}(s.Component);t.FocusTopicArea=l},function(e,t,n){"use strict";function r(e){return s.createElement(c.FocusTopicSingle,{title:e.title,hitCount:e.hitCount,id:e.id,boardId:e.boardId,boardName:e.boardName,replyCount:e.replyCount,userId:e.userId,userName:e.userName,portraitUrl:e.portraitUrl,time:e.time,likeCount:e.likeCount,dislikeCount:e.dislikeCount,fanCount:e.fanCount})}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),c=n(84),u=n(2),l=function(e){function t(t){var n=e.call(this,t)||this,r=u.getStorage("focusBoard_"+n.props.boardId);return r||(r=[]),n.state={data:r,from:0,loading:!0},n.handleScroll=n.handleScroll.bind(n),n}return o(t,e),t.prototype.componentWillReceiveProps=function(e){return i(this,void 0,void 0,function(){return a(this,function(t){return this.getData(e),[2]})})},t.prototype.componentDidMount=function(){return i(this,void 0,void 0,function(){return a(this,function(e){return this.getData(this.props),[2]})})},t.prototype.getData=function(e){return i(this,void 0,void 0,function(){var t,n,r;return a(this,function(o){switch(o.label){case 0:return[4,u.getFocusBoardTopic(e.boardId,e.boardNme,0,this.context.router)];case 1:if(t=o.sent(),n=u.getStorage("focusBoard_"+e.boardId))for(r=0;r<t.length;r++)if(t[r].id==n[0].id){t=t.slice(0,r).concat(n);break}return t.length>100&&(t=t.slice(0,100)),this.setState({data:t,from:t.length}),u.setStorage("focusBoard_"+e.boardId,t),document.addEventListener("scroll",this.handleScroll),[2]}})})},t.prototype.componentWillUnmount=function(){return i(this,void 0,void 0,function(){return a(this,function(e){return document.removeEventListener("scroll",this.handleScroll),[2]})})},t.prototype.handleScroll=function(){return i(this,void 0,void 0,function(){var e,t,n;return a(this,function(r){switch(r.label){case 0:if(!u.isBottom()||!this.state.loading)return[3,5];if(this.state.from>=99)return $("#focus-topic-loading").addClass("displaynone"),$("#focus-topic-loaddone").removeClass("displaynone"),[2];this.setState({loading:!1}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,u.getFocusBoardTopic(this.props.boardId,this.props.boardNme,this.state.from,this.context.router)];case 2:return e=r.sent(),[3,4];case 3:return t=r.sent(),this.setState({loading:!0}),[2];case 4:n=this.state.data.concat(e),this.setState({data:n,from:n.length,loading:!0}),u.setStorage("focusBoard_"+this.props.boardId,n),r.label=5;case 5:return[2]}})})},t.prototype.render=function(){return s.createElement("div",{className:"focus-topic-area"},s.createElement("div",{className:"focus-topic-topicArea"},this.state.data.map(r)),s.createElement("div",{className:"focus-topic-loading",id:"focus-topic-loading"},s.createElement("img",{src:"http://ww3.sinaimg.cn/large/0060lm7Tgy1fitwrd6yv0g302s0093y9.gif"})),s.createElement("div",{className:"focus-topic-loaddone displaynone",id:"focus-topic-loaddone"},"已加载100条新帖，无法加载更多了~"))},t}(s.Component);t.FocusBoardTopicArea=l;var p=function(){function e(){}return e}();t.FocusBoardTopicProps=p},function(e,t,n){"use strict";function r(e){return{userInfo:e.userInfo.currentUserInfo,isLogOn:e.userInfo.isLogOn}}function o(e){return{logOff:function(){e(h.userLogOff())}}}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),l=n(2),p=n(38),f=n(26),h=n(39),d=n(9),m=n(462),g=function(e){function t(t){var n=e.call(this,t)||this;return n.state={hoverElement:null,unreadCount:0},n}return i(t,e),t.prototype.componentDidMount=function(){this.props.isLogOn&&m.startSignalRConnection(),m.addSignalRListener({type:"NotifyMessageReceive",handler:function(e){console.log("NotifyMessageReceive"),console.log(e)}})},t.prototype.componentWillReceiveProps=function(e){!this.props.isLogOn&&e.isLogOn?m.startSignalRConnection():e.isLogOn||m.stopSignalRConnection()},t.prototype.logOff=function(){this.handleMouseEvent("mouseout","userName"),l.removeLocalStorage("accessToken"),console.log("after remove token="+l.getLocalStorage("accessToken")),l.removeLocalStorage("userName"),l.removeLocalStorage("password"),l.removeLocalStorage("userInfo"),l.removeStorage("all"),this.props.logOff()},t.prototype.handleMouseEvent=function(e,t){switch(e){case"mouseover":this.setState({hoverElement:t});break;case"mouseout":this.setState({hoverElement:null})}},t.prototype.render=function(){var e=this;if(this.props.isLogOn){var t={display:"block",transitionDuration:".2s",height:"0px"};l.refreshUnReadCount();var n={totalCount:0,replyCount:0,atCount:0,systemCount:0,messageCount:0};return l.getStorage("unreadCount")&&(n=l.getStorage("unreadCount")),u.createElement("div",{id:"dropdown"},u.createElement("div",{className:"box"},u.createElement("div",{className:"userInfo"},u.createElement("div",{className:"userImg"},u.createElement("img",{src:this.props.userInfo.portraitUrl})),u.createElement("div",{className:"userName",onMouseOut:function(t){e.handleMouseEvent(t.type,"userName")},onMouseOver:function(t){e.handleMouseEvent(t.type,"userName")}},this.props.userInfo.name)),u.createElement("div",{className:"topBarText"}," ",u.createElement(d.Link,{to:"/",style:{color:"#fff"}},"首页")),u.createElement("div",{className:"topBarText",id:"userMessage",onMouseOut:function(t){e.handleMouseEvent(t.type,"topBarText")},onMouseOver:function(t){e.handleMouseEvent(t.type,"topBarText")}}," ",u.createElement(d.Link,{to:"/message/response",className:"messageTopBar"},"消息",u.createElement("div",{className:"message-counter displaynone",id:"unreadCount-totalCount"},n.totalCount))),u.createElement("div",{className:"topBarText"}," ",u.createElement(d.Link,{to:"/focus",style:{color:"#fff"}},"关注")),u.createElement("div",{className:"topBarText"}," ",u.createElement(d.Link,{to:"/newTopics",style:{color:"#fff"}},"新帖")),u.createElement(d.Link,{to:"/boardList"},u.createElement("div",{className:"boardListLink",style:{margin:"0 0 0 10px"}},u.createElement("div",{style:{marginTop:"16px",color:"#fff"}},"版面")))),u.createElement("div",{className:"dropDownSubBox",onMouseOut:function(t){e.handleMouseEvent(t.type,"userName")},onMouseOver:function(t){e.handleMouseEvent(t.type,"userName")},style:a({},t,{overflow:"hidden",height:"userName"===this.state.hoverElement?"90px":"0px"})},u.createElement("ul",{className:"dropDownSub",style:{display:"inherit"}},u.createElement(d.Link,{to:"/usercenter"}," ",u.createElement("li",null,"个人中心")),u.createElement(d.Link,{to:"/signin"},u.createElement("li",null,"签到")),u.createElement("li",{onClick:this.logOff.bind(this)},"注销"))),u.createElement("div",{className:"dropDownSubBoxMessage",onMouseOut:function(t){e.handleMouseEvent(t.type,"topBarText")},onMouseOver:function(t){e.handleMouseEvent(t.type,"topBarText")},style:a({},t,{overflow:"hidden",zIndex:100,position:"absolute",top:"55px",height:"topBarText"===this.state.hoverElement?"120px":"0px"})},u.createElement("ul",{className:"dropDownSubMessage",style:{display:"inherit"}},u.createElement(d.Link,{to:"/message/response"},u.createElement("li",null,"回复我的",u.createElement("div",{className:"message-counterLi displaynone",id:"unreadCount-replyCount"},n.replyCount))),u.createElement(d.Link,{to:"/message/attme"},u.createElement("li",null,"@ 我的",u.createElement("div",{className:"message-counterLi displaynone",id:"unreadCount-atCount"},n.atCount))),u.createElement(d.Link,{to:"/message/system"},u.createElement("li",null,"系统通知",u.createElement("div",{className:"message-counterLi displaynone",id:"unreadCount-systemCount"},n.systemCount))),u.createElement(d.Link,{to:"/message/message"},u.createElement("li",null,"我的私信",u.createElement("div",{className:"message-counterLi displaynone",id:"unreadCount-messageCount"},n.messageCount))))))}return u.createElement("div",{id:"dropdown"},u.createElement("div",{className:"box"},u.createElement("div",{className:"topBarText",style:{margin:"0 10px 0 10px"}}," ",u.createElement(d.Link,{to:"/",style:{color:"#fff"}},"首页")),u.createElement("div",{className:"topBarText",style:{margin:"0 10px 0 10px"}}," ",u.createElement(d.Link,{to:"/logOn",style:{color:"#fff"}},"登录")),u.createElement("div",{className:"topBarText",style:{margin:"0 10px 0 10px"}}," ",u.createElement(d.Link,{to:"/newTopics",style:{color:"#fff"}},"新帖")),u.createElement(d.Link,{to:"/boardList"},u.createElement("div",{className:"boardListLink",style:{margin:"0 0 0 10px"}},u.createElement("div",{style:{marginTop:"16px",color:"#fff"}},"版面")))))},t}(u.Component),v=f.connect(r,o)(g),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.componentDidMount=function(){return s(this,void 0,void 0,function(){var e,t,n,r,o,i,a,u,f,h,d,m,g,v,y=this;return c(this,function(b){switch(b.label){case 0:return e=p(".searchBoxSelect"),(t=p(".downArrow"),n=p(".searchBoxSub"),r=p(".searchIco"),o=n.find("li"),i=location.href.match(/\/topic\/(\S+)\/+?/),a=location.href.match(/\/list\/(\S+)\/+?/),u=location.href.match(/\/(search)/),f=0,h="全站",i)?(d=i[1],[4,l.getTopicInfo(d)]):[3,3];case 1:return m=b.sent(),f=m.boardId,[4,l.getBoardName(f)];case 2:return h=b.sent(),[3,6];case 3:return a?(f=parseInt(a[1]),[4,l.getBoardName(f)]):[3,5];case 4:return h=b.sent(),[3,6];case 5:u&&(g=l.getStorage("searchInfo"))&&(f=g.boardId,h=g.boardName),b.label=6;case 6:return p(document).click(function(){n.css("display","none")}),e.click(function(){return"block"===n.css("display")?n.css("display","none"):n.css("display","block"),!1}),t.click(function(){return"block"===n.css("display")?n.css("display","none"):n.css("display","block"),!1}),o.click(function(){e.text(p(this).text())}),o.mouseover(function(){this.className="hover"}),o.mouseout(function(){this.className=""}),v=this,r.click(function(){return s(y,void 0,void 0,function(){var t,n,r,n,r,o,i;return c(this,function(a){switch(a.label){case 0:return(t=p("#searchText").val())&&""!=t?"主题"!=e.text()&&"全站"!=e.text()?[3,1]:(n=t.split(" "),n&&(n.length>5?alert("关键词过多，请不要超过5个！"):(r={boardId:0,boardName:"全站",words:n},l.setStorage("searchInfo",r),this.props.history.push("/search"))),[3,5]):[3,5];case 1:return"版内"!=e.text()?[3,2]:(n=t.split(" "),n&&(n.length>5?alert("关键词过多，请不要超过5个！"):(r={boardId:f,boardName:h,words:n},l.setStorage("searchInfo",r),this.props.history.push("/search"))),[3,5]);case 2:return"用户"!=e.text()?[3,4]:[4,l.getUserInfoByName(t)];case 3:return a.sent()?this.props.history.push("/user/name/"+t):(l.removeStorage("searchInfo"),this.props.history.push("/search")),[3,5];case 4:"版面"==e.text()&&(o=window.location.host,i=l.getBoardId(t),i?i==[]?(l.removeStorage("searchInfo"),this.props.history.push("/search")):1==i.length?this.props.history.push("/list/"+i[0].id+"/normal/"):i.length>1?(l.setStorage("searchBoardInfo",i),this.props.history.push("/searchBoard")):(l.removeStorage("searchInfo"),this.props.history.push("/search")):(l.removeStorage("searchInfo"),this.props.history.push("/search"))),a.label=5;case 5:return[2]}})})}),[2]}})})},t.prototype.render=function(){var e=location.href.match(/\/topic\/(\S+)\/+?/),t=location.href.match(/\/list\/(\S+)\/+?/),n=location.href.match(/\/(search)/),r=1;if(e)console.log(e[1]),r=0;else if(t)console.log(t[1]),r=0;else if(n){var o=l.getStorage("searchInfo");o&&0!=o.boardId&&(r=0)}return r?u.createElement("div",{id:"search"},u.createElement("div",{className:"box"},u.createElement("div",{className:"searchBoxSelect"},"主题"),u.createElement("div",{className:"downArrow"},u.createElement("img",{src:"/images/downArrow.png",width:"12",height:"12"})),u.createElement("input",{id:"searchText",type:"text",placeholder:"猜猜能搜到什么..."}),u.createElement("div",{className:"searchIco"},u.createElement("img",{src:"/images/searchIco.ico",width:"15",height:"15"}))),u.createElement("ul",{className:"searchBoxSub"},u.createElement("li",null,"主题"),u.createElement("li",null,"用户"),u.createElement("li",null,"版面"))):u.createElement("div",{id:"search"},u.createElement("div",{className:"box"},u.createElement("div",{className:"searchBoxSelect"},"版内"),u.createElement("div",{className:"downArrow"},u.createElement("img",{src:"/images/downArrow.png",width:"12",height:"12"})),u.createElement("input",{id:"searchText",type:"text",placeholder:"猜猜能搜到什么..."}),u.createElement("div",{className:"searchIco"},u.createElement("img",{src:"/images/searchIco.ico",width:"15",height:"15"}))),u.createElement("ul",{className:"searchBoxSub"},u.createElement("li",null,"版内"),u.createElement("li",null,"全站"),u.createElement("li",null,"用户"),u.createElement("li",null,"版面")))},t}(u.Component);t.SearchBeforeConnent=y,t.Search=d.withRouter(y);var b=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i(n,e),n.prototype.render=function(){return u.createElement("div",{className:"header"},u.createElement("div",{className:"topBar"},u.createElement("div",{className:"topBarRow"},u.createElement("div",{className:"row"},u.createElement("div",{style:{margin:"10px 0 0 0"}}," ",u.createElement(d.Link,{to:"/"},u.createElement("img",{src:"/images/矢量智能对象.ico"}))),u.createElement("div",{style:{margin:"15px 0 0 5px"}},u.createElement(d.Link,{to:"/"},u.createElement("img",{src:"/images/CC98.ico"})))),u.createElement(v,null))),u.createElement("div",{className:"headerContent"},u.createElement("div",{className:"headerRow"},u.createElement("div",{className:"linkBar"},u.createElement("div",{className:"row",style:{margin:"0 10px 0 10px"}},u.createElement("div",{style:{margin:"3px 10px 0 0"}},u.createElement("img",{src:"/images/网盘.ico",width:"15",height:"15"})),u.createElement("div",null,u.createElement("a",{href:"http://share.cc98.org/",className:"linkText"},"网盘"))),u.createElement("div",{className:"row",style:{margin:"0 10px 0 10px"}},u.createElement("div",{style:{margin:"3px 10px 0 0"}},u.createElement("img",{src:"/images/游戏.ico",width:"15",height:"15"})),u.createElement("div",null,u.createElement("a",{href:"http://www.cc98.org/game.asp",className:"linkText"},"游戏"))),u.createElement("div",{className:"row",style:{margin:"0 10px 0 10px"}},u.createElement("div",{style:{margin:"3px 10px 0 0"}},u.createElement("img",{src:"/images/勋章.ico",width:"15",height:"15"})),u.createElement("div",null,u.createElement("a",{href:"http://v2.cc98.org/app/medalmanager.aspx",className:"linkText"},"勋章"))),u.createElement("div",{className:"row",style:{margin:"0 10px 0 10px"}},u.createElement("div",{style:{margin:"3px 10px 0 0"}},u.createElement("img",{src:"/images/抽卡.ico",width:"15",height:"15"})),u.createElement("div",null,u.createElement("a",{href:"http://card.cc98.org/",className:"linkText"},"抽卡"))),u.createElement("div",{className:"row",style:{margin:"0 10px 0 10px"}},u.createElement("div",{style:{margin:"3px 10px 0 0"}},u.createElement("img",{src:"/images/gamble.ico",width:"15",height:"15"})),u.createElement("div",null,u.createElement("a",{href:"http://gaming.cc98.org",className:"linkText"},"竞猜"))),u.createElement("div",{className:"row",style:{margin:"0 10px 0 10px"}},u.createElement("div",{style:{margin:"3px 10px 0 0"}},u.createElement("img",{src:"/images/NexusHD.jpg",width:"15",height:"15"})),u.createElement("div",null,u.createElement("a",{href:"http://www.nexushd.org",className:"linkText"},"NexusHD")))),u.createElement(d.Route,{component:t.Search}))))},n}(u.Component);t.Header=b},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},i=this;Object.defineProperty(t,"__esModule",{value:!0});var a=n(463),s=n(2),c=new a.HubConnection("");t.addSignalRListener=function(e){c.on(e.type,e.handler)},t.removeSignalRListener=function(e){c.off(e.type,e.handler)},t.startSignalRConnection=function(){return r(i,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:return[4,s.getToken()];case 1:return e=n.sent(),t="http://apitest.niconi.cc/signalr/notification",c=new a.HubConnection(t,{jwtBearer:function(){return e}}),c.on("NotifyMessageReceive",function(e){console.log("NotifyMessageReceive"),console.log(e)}),c.on("NotifyTopicChange",function(e){console.log("NotifyTopicChange"),console.log(e)}),c.on("NotifyNotificationChange",function(e){console.log("NotifyNotificationChange"),console.log(e)}),c.start(),[2]}})})},t.stopSignalRConnection=function(){c.stop()}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(117)),r(n(170)),r(n(464)),r(n(118)),r(n(85)),r(n(467))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(117),a=n(465),s=n(171),c=n(119),u=n(466),l=n(64),p=n(85),f=n(118);t.TransportType=f.TransportType;var h=n(117);t.HttpConnection=h.HttpConnection;var d=n(171);t.JsonHubProtocol=d.JsonHubProtocol;var m=n(64);t.LogLevel=m.LogLevel;var g=n(85);t.ConsoleLogger=g.ConsoleLogger,t.NullLogger=g.NullLogger;var v=3e4,y=function(){function e(e,t){void 0===t&&(t={});var n=this;t=t||{},this.serverTimeoutInMilliseconds=t.serverTimeoutInMilliseconds||v,this.connection="string"==typeof e?new i.HttpConnection(e,t):e,this.logger=p.LoggerFactory.createLogger(t.logging),this.protocol=t.protocol||new s.JsonHubProtocol,this.connection.onreceive=function(e){return n.processIncomingData(e)},this.connection.onclose=function(e){return n.connectionClosed(e)},this.callbacks=new Map,this.methods=new Map,this.closedCallbacks=[],this.id=0}return e.prototype.processIncomingData=function(e){void 0!==this.timeoutHandle&&clearTimeout(this.timeoutHandle);for(var t=this.protocol.parseMessages(e),n=0;n<t.length;++n){var r=t[n];switch(r.type){case 1:this.invokeClientMethod(r);break;case 2:case 3:var o=this.callbacks.get(r.invocationId);null!=o&&(3===r.type&&this.callbacks.delete(r.invocationId),o(r));break;case 6:break;default:this.logger.log(l.LogLevel.Warning,"Invalid message type: "+e)}}this.configureTimeout()},e.prototype.configureTimeout=function(){var e=this;this.connection.features&&this.connection.features.inherentKeepAlive||(this.timeoutHandle=setTimeout(function(){return e.serverTimeout()},this.serverTimeoutInMilliseconds))},e.prototype.serverTimeout=function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))},e.prototype.invokeClientMethod=function(e){var t=this,n=this.methods.get(e.target.toLowerCase());n?(n.forEach(function(n){return n.apply(t,e.arguments)}),e.nonblocking):this.logger.log(l.LogLevel.Warning,"No client method with the name '"+e.target+"' found.")},e.prototype.connectionClosed=function(e){var t=this;this.callbacks.forEach(function(t){t(void 0,e||new Error("Invocation canceled due to connection being closed."))}),this.callbacks.clear(),this.closedCallbacks.forEach(function(n){return n.apply(t,[e])})},e.prototype.start=function(){return r(this,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:return e=2===this.protocol.type?2:1,this.connection.features.transferMode=e,[4,this.connection.start()];case 1:return n.sent(),t=this.connection.features.transferMode,[4,this.connection.send(c.TextMessageFormat.write(JSON.stringify({protocol:this.protocol.name})))];case 2:return n.sent(),this.logger.log(l.LogLevel.Information,"Using HubProtocol '"+this.protocol.name+"'."),2===e&&1===t&&(this.protocol=new u.Base64EncodedHubProtocol(this.protocol)),this.configureTimeout(),[2]}})})},e.prototype.stop=function(){return this.timeoutHandle&&clearTimeout(this.timeoutHandle),this.connection.stop()},e.prototype.stream=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.createStreamInvocation(e,n),i=new a.Subject;this.callbacks.set(o.invocationId,function(e,t){if(t)return void i.error(t);if(3===e.type){var n=e;n.error?i.error(new Error(n.error)):i.complete()}else i.next(e.item)});var s=this.protocol.writeMessage(o);return this.connection.send(s).catch(function(e){i.error(e),t.callbacks.delete(o.invocationId)}),i},e.prototype.send=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.createInvocation(e,t,!0),o=this.protocol.writeMessage(r);return this.connection.send(o)},e.prototype.invoke=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.createInvocation(e,n,!1);return new Promise(function(e,n){t.callbacks.set(o.invocationId,function(t,r){if(r)return void n(r);if(3===t.type){var o=t;o.error?n(new Error(o.error)):e(o.result)}else n(new Error("Unexpected message type: "+t.type))});var r=t.protocol.writeMessage(o);t.connection.send(r).catch(function(e){n(e),t.callbacks.delete(o.invocationId)})})},e.prototype.on=function(e,t){e&&t&&(e=e.toLowerCase(),this.methods.has(e)||this.methods.set(e,[]),this.methods.get(e).push(t))},e.prototype.off=function(e,t){if(e&&t){e=e.toLowerCase();var n=this.methods.get(e);if(n){var r=n.indexOf(t);-1!=r&&n.splice(r,1)}}},e.prototype.onclose=function(e){e&&this.closedCallbacks.push(e)},e.prototype.createInvocation=function(e,t,n){var r=this.id;return this.id++,{type:1,invocationId:r.toString(),target:e,arguments:t,nonblocking:n}},e.prototype.createStreamInvocation=function(e,t){var n=this.id;return this.id++,{type:4,invocationId:n.toString(),target:e,arguments:t}},e}();t.HubConnection=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.observers=[]}return e.prototype.next=function(e){for(var t=0,n=this.observers;t<n.length;t++){n[t].next(e)}},e.prototype.error=function(e){for(var t=0,n=this.observers;t<n.length;t++){var r=n[t];r.error&&r.error(e)}},e.prototype.complete=function(){for(var e=0,t=this.observers;e<t.length;e++){var n=t[e];n.complete&&n.complete()}},e.prototype.subscribe=function(e){this.observers.push(e)},e}();t.Subject=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.wrappedProtocol=e,this.name=this.wrappedProtocol.name,this.type=1}return e.prototype.parseMessages=function(e){var t=e.indexOf(":");if(-1==t||";"!=e[e.length-1])throw new Error("Invalid payload.");var n=e.substring(0,t);if(!/^[0-9]+$/.test(n))throw new Error("Invalid length: '"+n+"'");if(parseInt(n,10)!=e.length-t-2)throw new Error("Invalid message size.");for(var r=e.substring(t+1,e.length-1),o=atob(r),i=new Uint8Array(o.length),a=0;a<i.length;a++)i[a]=o.charCodeAt(a);return this.wrappedProtocol.parseMessages(i.buffer)},e.prototype.writeMessage=function(e){for(var t=new Uint8Array(this.wrappedProtocol.writeMessage(e)),n="",r=0;r<t.byteLength;r++)n+=String.fromCharCode(t[r]);var o=btoa(n);return o.length.toString()+":"+o+";"},e}();t.Base64EncodedHubProtocol=r},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(119),o=n(470),i=function(){function t(){this.name="messagepack",this.type=2}return t.prototype.parseMessages=function(e){var t=this;return r.BinaryMessageFormat.parse(e).map(function(e){return t.parseMessage(e)})},t.prototype.parseMessage=function(t){if(0==t.length)throw new Error("Invalid payload.");var n=o(),r=n.decode(new e(t));if(0==r.length||!(r instanceof Array))throw new Error("Invalid payload.");switch(r[0]){case 1:return this.createInvocationMessage(r);case 2:return this.createStreamItemMessage(r);case 3:return this.createCompletionMessage(r);case 6:return this.createPingMessage(r);default:throw new Error("Invalid message type.")}},t.prototype.createPingMessage=function(e){if(1!=e.length)throw new Error("Invalid payload for Ping message.");return{type:e[0]}},t.prototype.createInvocationMessage=function(e){if(5!=e.length)throw new Error("Invalid payload for Invocation message.");return{type:1,invocationId:e[1],nonblocking:e[2],target:e[3],arguments:e[4]}},t.prototype.createStreamItemMessage=function(e){if(3!=e.length)throw new Error("Invalid payload for stream Result message.");return{type:2,invocationId:e[1],item:e[2]}},t.prototype.createCompletionMessage=function(e){if(e.length<3)throw new Error("Invalid payload for Completion message.");var t=e[2];if(2===t&&3!=e.length||2!==t&&4!=e.length)throw new Error("Invalid payload for Completion message.");var n={type:3,invocationId:e[1],error:null,result:null};switch(t){case 1:n.error=e[3];break;case 3:n.result=e[3]}return n},t.prototype.writeMessage=function(e){switch(e.type){case 1:return this.writeInvocation(e);case 4:return this.writeStreamInvocation(e);case 2:case 3:throw new Error("Writing messages of type '"+e.type+"' is not supported.");default:throw new Error("Invalid message type.")}},t.prototype.writeInvocation=function(e){var t=o(),n=t.encode([1,e.invocationId,e.nonblocking,e.target,e.arguments]);return r.BinaryMessageFormat.write(n.slice())},t.prototype.writeStreamInvocation=function(e){var t=o(),n=t.encode([4,e.invocationId,e.target,e.arguments]);return r.BinaryMessageFormat.write(n.slice())},t}();t.MessagePackHubProtocol=i}).call(t,n(86).Buffer)},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function o(e){return 3*e.length/4-r(e)}function i(e){var t,n,o,i,a,s=e.length;i=r(e),a=new p(3*s/4-i),n=i>0?s-4:s;var c=0;for(t=0;t<n;t+=4)o=l[e.charCodeAt(t)]<<18|l[e.charCodeAt(t+1)]<<12|l[e.charCodeAt(t+2)]<<6|l[e.charCodeAt(t+3)],a[c++]=o>>16&255,a[c++]=o>>8&255,a[c++]=255&o;return 2===i?(o=l[e.charCodeAt(t)]<<2|l[e.charCodeAt(t+1)]>>4,a[c++]=255&o):1===i&&(o=l[e.charCodeAt(t)]<<10|l[e.charCodeAt(t+1)]<<4|l[e.charCodeAt(t+2)]>>2,a[c++]=o>>8&255,a[c++]=255&o),a}function a(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function s(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16)+(e[i+1]<<8)+e[i+2],o.push(a(r));return o.join("")}function c(e){for(var t,n=e.length,r=n%3,o="",i=[],a=0,c=n-r;a<c;a+=16383)i.push(s(e,a,a+16383>c?c:a+16383));return 1===r?(t=e[n-1],o+=u[t>>2],o+=u[t<<4&63],o+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],o+=u[t>>10],o+=u[t>>4&63],o+=u[t<<2&63],o+="="),i.push(o),i.join("")}t.byteLength=o,t.toByteArray=i,t.fromByteArray=c;for(var u=[],l=[],p="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,d=f.length;h<d;++h)u[h]=f[h],l[f.charCodeAt(h)]=h;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,c=(1<<s)-1,u=c>>1,l=-7,p=n?o-1:0,f=n?-1:1,h=e[t+p];for(p+=f,i=h&(1<<-l)-1,h>>=-l,l+=s;l>0;i=256*i+e[t+p],p+=f,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+e[t+p],p+=f,l-=8);if(0===i)i=1-u;else{if(i===c)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),i-=u}return(h?-1:1)*a*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var a,s,c,u=8*i-o-1,l=(1<<u)-1,p=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,d=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),t+=a+p>=1?f/c:f*Math.pow(2,1-p),t*c>=2&&(a++,c/=2),a+p>=l?(s=0,a=l):a+p>=1?(s=(t*c-1)*Math.pow(2,o),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,o),a=0));o>=8;e[n+h]=255&s,h+=d,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[n+h]=255&a,h+=d,a/=256,u-=8);e[n+h-d]|=128*m}},function(e,t,n){"use strict";function r(e){function t(e,t){return i(e,"must have an encode function"),i(t,"must have an encode function"),l.push({check:e,encode:t}),this}function n(e,t){return i(e>=0,"must have a non-negative type"),i(t,"must have a decode function"),p.push({type:e,decode:t}),this}function r(e,t,n,r){function s(e){return e instanceof t}function c(t){var r=a(),i=o.allocUnsafe(1);return i.writeInt8(e,0),r.append(i),r.append(n(t)),r}return i(t,"must have a constructor"),i(n,"must have an encode function"),i(e>=0,"must have a non-negative type"),i(r,"must have a decode function"),this.registerEncoder(s,c),this.registerDecoder(e,r),this}var l=[],p=[];return e=e||{forceFloat64:!1,compatibilityMode:!1},{encode:u(l,e.forceFloat64,e.compatibilityMode),decode:c(p),register:r,registerEncoder:t,registerDecoder:n,encoder:s.encoder,decoder:s.decoder,buffer:!0,type:"msgpack5",IncompleteBufferError:c.IncompleteBufferError}}var o=n(58).Buffer,i=n(471),a=n(87),s=n(480),c=n(483),u=n(484);e.exports=r},function(e,t,n){"use strict";(function(t){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0}function o(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function i(e){return Object.prototype.toString.call(e)}function a(e){return!o(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function s(e){if(w.isFunction(e)){if(S)return e.name;var t=e.toString(),n=t.match(C);return n&&n[1]}}function c(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function u(e){if(S||!w.isFunction(e))return w.inspect(e);var t=s(e);return"[Function"+(t?": "+t:"")+"]"}function l(e){return c(u(e.actual),128)+" "+e.operator+" "+c(u(e.expected),128)}function p(e,t,n,r,o){throw new I.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:o})}function f(e,t){e||p(e,!0,t,"==",I.ok)}function h(e,t,n,s){if(e===t)return!0;if(o(e)&&o(t))return 0===r(e,t);if(w.isDate(e)&&w.isDate(t))return e.getTime()===t.getTime();if(w.isRegExp(e)&&w.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(a(e)&&a(t)&&i(e)===i(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(o(e)!==o(t))return!1;s=s||{actual:[],expected:[]};var c=s.actual.indexOf(e);return-1!==c&&c===s.expected.indexOf(t)||(s.actual.push(e),s.expected.push(t),m(e,t,n,s))}return n?e===t:e==t}function d(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function m(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(w.isPrimitive(e)||w.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=d(e),i=d(t);if(o&&!i||!o&&i)return!1;if(o)return e=_.call(e),t=_.call(t),h(e,t,n);var a,s,c=N(e),u=N(t);if(c.length!==u.length)return!1;for(c.sort(),u.sort(),s=c.length-1;s>=0;s--)if(c[s]!==u[s])return!1;for(s=c.length-1;s>=0;s--)if(a=c[s],!h(e[a],t[a],n,r))return!1;return!0}function g(e,t,n){h(e,t,!0)&&p(e,t,n,"notDeepStrictEqual",g)}function v(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function y(e){var t;try{e()}catch(e){t=e}return t}function b(e,t,n,r){var o;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),o=y(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!o&&p(o,n,"Missing expected exception"+r);var i="string"==typeof r,a=!e&&w.isError(o),s=!e&&o&&!n;if((a&&i&&v(o,n)||s)&&p(o,n,"Got unwanted exception"+r),e&&o&&n&&!v(o,n)||!e&&o)throw o}var w=n(120),E=Object.prototype.hasOwnProperty,_=Array.prototype.slice,S=function(){return"foo"===function(){}.name}(),I=e.exports=f,C=/\s*function\s+([^\(\s]*)\s*/;I.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=l(this),this.generatedMessage=!0);var t=e.stackStartFunction||p;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,o=s(t),i=r.indexOf("\n"+o);if(i>=0){var a=r.indexOf("\n",i+1);r=r.substring(a+1)}this.stack=r}}},w.inherits(I.AssertionError,Error),I.fail=p,I.ok=f,I.equal=function(e,t,n){e!=t&&p(e,t,n,"==",I.equal)},I.notEqual=function(e,t,n){e==t&&p(e,t,n,"!=",I.notEqual)},I.deepEqual=function(e,t,n){h(e,t,!1)||p(e,t,n,"deepEqual",I.deepEqual)},I.deepStrictEqual=function(e,t,n){h(e,t,!0)||p(e,t,n,"deepStrictEqual",I.deepStrictEqual)},I.notDeepEqual=function(e,t,n){h(e,t,!1)&&p(e,t,n,"notDeepEqual",I.notDeepEqual)},I.notDeepStrictEqual=g,I.strictEqual=function(e,t,n){e!==t&&p(e,t,n,"===",I.strictEqual)},I.notStrictEqual=function(e,t,n){e===t&&p(e,t,n,"!==",I.notStrictEqual)},I.throws=function(e,t,n){b(!0,e,t,n)},I.doesNotThrow=function(e,t,n){b(!1,e,t,n)},I.ifError=function(e){if(e)throw e};var N=Object.keys||function(e){var t=[];for(var n in e)E.call(e,n)&&t.push(n);return t}}).call(t,n(51))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){e.exports=n(52)},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){e.copy(t,n)}var i=n(58).Buffer;e.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t=i.allocUnsafe(e>>>0),n=this.head,r=0;n;)o(n.data,t,r),r+=n.data.length,n=n.next;return t},e}()},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(478),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return u[c]=r,s(c),c++}function o(e){delete u[e]}function i(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function a(e){if(l)setTimeout(a,0,e);else{var t=u[e];if(t){l=!0;try{i(t)}finally{o(e),l=!1}}}}if(!e.setImmediate){var s,c=1,u={},l=!1,p=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),s=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},s=function(t){e.port2.postMessage(t)}}():p&&"onreadystatechange"in p.createElement("script")?function(){var e=p.documentElement;s=function(t){var n=p.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){s=function(e){setTimeout(a,0,e)}}(),f.setImmediate=r,f.clearImmediate=o}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(51),n(65))},function(e,t,n){(function(t){function n(e,t){function n(){if(!o){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),o=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var o=!1;return n}function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=n}).call(t,n(51))},function(e,t,n){"use strict";function r(e){e=e||{},e.objectMode=!0,e.highWaterMark=16,a.call(this,e),this._msgpack=e.msgpack}function o(e){if(!(this instanceof o))return e=e||{},e.msgpack=this,new o(e);r.call(this,e)}function i(e){if(!(this instanceof i))return e=e||{},e.msgpack=this,new i(e);r.call(this,e),this._chunks=c()}var a=n(481).Transform,s=n(59),c=n(87);s(r,a),s(o,r),o.prototype._transform=function(e,t,n){var r=null;try{r=this._msgpack.encode(e).slice(0)}catch(e){return this.emit("error",e),n()}this.push(r),n()},s(i,r),i.prototype._transform=function(e,t,n){e&&this._chunks.append(e);try{var r=this._msgpack.decode(this._chunks);this.push(r)}catch(e){return void(e instanceof this._msgpack.IncompleteBufferError?n():this.emit("error",e))}this._chunks.length>0?this._transform(null,t,n):n()},e.exports.decoder=i,e.exports.encoder=o},function(e,t,n){t=e.exports=n(173),t.Stream=t,t.Readable=t,t.Writable=n(178),t.Duplex=n(52),t.Transform=n(179),t.PassThrough=n(482)},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);o.call(this,e)}e.exports=r;var o=n(179),i=n(66);i.inherits=n(59),i.inherits(r,o),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){function r(e){Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=e||"unable to decode"}var o=n(87);n(120).inherits(r,Error),e.exports=function(e){function t(e){switch(e){case 196:return 2;case 197:return 3;case 198:return 5;case 199:return 3;case 200:return 4;case 201:return 6;case 202:return 5;case 203:return 9;case 204:return 2;case 205:return 3;case 206:return 5;case 207:return 9;case 208:return 2;case 209:return 3;case 210:return 5;case 211:return 9;case 212:return 3;case 213:return 4;case 214:return 6;case 215:return 10;case 216:return 18;case 217:return 2;case 218:return 3;case 219:return 5;case 222:return 3;default:return-1}}function n(e,n){var r=t(e);return!(-1!==r&&n<r)}function i(e,t,n){return t>=n+e}function a(e,t){return{value:e,bytesConsumed:t}}function s(e){e instanceof o||(e=o().append(e));var t=c(e);if(t)return e.consume(t.bytesConsumed),t.value;throw new r}function c(e,t){t=void 0===t?0:t;var r=e.length-t;if(r<=0)return null;var o,s,c,d=e.readUInt8(t),m=0;if(!n(d,r))return null;switch(d){case 192:return a(null,1);case 194:return a(!1,1);case 195:return a(!0,1);case 204:return m=e.readUInt8(t+1),a(m,2);case 205:return m=e.readUInt16BE(t+1),a(m,3);case 206:return m=e.readUInt32BE(t+1),a(m,5);case 207:for(c=7;c>=0;c--)m+=e.readUInt8(t+c+1)*Math.pow(2,8*(7-c));return a(m,9);case 208:return m=e.readInt8(t+1),a(m,2);case 209:return m=e.readInt16BE(t+1),a(m,3);case 210:return m=e.readInt32BE(t+1),a(m,5);case 211:return m=u(e.slice(t+1,t+9),0),a(m,9);case 202:return m=e.readFloatBE(t+1),a(m,5);case 203:return m=e.readDoubleBE(t+1),a(m,9);case 217:return o=e.readUInt8(t+1),i(o,r,2)?(m=e.toString("utf8",t+2,t+2+o),a(m,2+o)):null;case 218:return o=e.readUInt16BE(t+1),i(o,r,3)?(m=e.toString("utf8",t+3,t+3+o),a(m,3+o)):null;case 219:return o=e.readUInt32BE(t+1),i(o,r,5)?(m=e.toString("utf8",t+5,t+5+o),a(m,5+o)):null;case 196:return o=e.readUInt8(t+1),i(o,r,2)?(m=e.slice(t+2,t+2+o),a(m,2+o)):null;case 197:return o=e.readUInt16BE(t+1),i(o,r,3)?(m=e.slice(t+3,t+3+o),a(m,3+o)):null;case 198:return o=e.readUInt32BE(t+1),i(o,r,5)?(m=e.slice(t+5,t+5+o),a(m,5+o)):null;case 220:return r<3?null:(o=e.readUInt16BE(t+1),l(e,t,o,3));case 221:return r<5?null:(o=e.readUInt32BE(t+1),l(e,t,o,5));case 222:return o=e.readUInt16BE(t+1),p(e,t,o,3);case 223:throw new Error("map too big to decode in JS");case 212:return f(e,t,1);case 213:return f(e,t,2);case 214:return f(e,t,4);case 215:return f(e,t,8);case 216:return f(e,t,16);case 199:return o=e.readUInt8(t+1),s=e.readUInt8(t+2),i(o,r,3)?h(e,t,s,o,3):null;case 200:return o=e.readUInt16BE(t+1),s=e.readUInt8(t+3),i(o,r,4)?h(e,t,s,o,4):null;case 201:return o=e.readUInt32BE(t+1),s=e.readUInt8(t+5),i(o,r,6)?h(e,t,s,o,6):null}if(144==(240&d))return o=15&d,l(e,t,o,1);if(128==(240&d))return o=15&d,p(e,t,o,1);if(160==(224&d))return o=31&d,i(o,r,1)?(m=e.toString("utf8",t+1,t+o+1),a(m,o+1)):null;if(d>=224)return m=d-256,a(m,1);if(d<128)return a(d,1);throw new Error("not implemented yet")}function u(e,t){var n=128==(128&e[t]);if(n)for(var r=1,o=t+7;o>=t;o--){var i=(255^e[o])+r;e[o]=255&i,r=i>>8}return(4294967296*e.readUInt32BE(t+0)+e.readUInt32BE(t+4))*(n?-1:1)}function l(e,t,n,r){var o,i=[],s=0;for(t+=r,o=0;o<n;o++){var u=c(e,t);if(!u)return null;i.push(u.value),t+=u.bytesConsumed,s+=u.bytesConsumed}return a(i,r+s)}function p(e,t,n,r){var o,i,s={},u=0;for(t+=r,i=0;i<n;i++){var l=c(e,t);if(!l)return null;t+=l.bytesConsumed;var p=c(e,t);if(!p)return null;o=l.value,s[o]=p.value,t+=p.bytesConsumed,u+=l.bytesConsumed+p.bytesConsumed}return a(s,r+u)}function f(e,t,n){return h(e,t,e.readUInt8(t+1),n,2)}function h(t,n,r,o,i){var s,c;for(n+=i,s=0;s<e.length;s++)if(r===e[s].type){c=t.slice(n,n+o);var u=e[s].decode(c);return a(u,i+o)}throw new Error("unable to find ext type "+r)}return s},e.exports.IncompleteBufferError=r},function(e,t,n){"use strict";function r(e,t){for(var n=7;n>=0;n--)e[n+1]=255&t,t/=256}function o(e,t,n){var r=n<0;r&&(n=Math.abs(n));var o=n%4294967296,i=n/4294967296;if(e.writeUInt32BE(Math.floor(i),t+0),e.writeUInt32BE(o,t+4),r)for(var a=1,s=t+7;s>=t;s--){var c=(255^e[s])+a;e[s]=255&c,a=c>>8}}function i(e){return e!==Math.floor(e)}function a(e,t){var n;return n=s.allocUnsafe(5),n[0]=202,n.writeFloatBE(e,1),(t||Math.abs(e-n.readFloatBE(1))>u)&&(n=s.allocUnsafe(9),n[0]=203,n.writeDoubleBE(e,1)),n}var s=n(58).Buffer,c=n(87),u=.1;e.exports=function(e,t,n){function u(e,f){var h,d;if(void 0===e)throw new Error("undefined is not encodable in msgpack!");if(null===e)h=s.allocUnsafe(1),h[0]=192;else if(!0===e)h=s.allocUnsafe(1),h[0]=195;else if(!1===e)h=s.allocUnsafe(1),h[0]=194;else if("string"==typeof e)d=s.byteLength(e),d<32?(h=s.allocUnsafe(1+d),h[0]=160|d,d>0&&h.write(e,1)):d<=255&&!n?(h=s.allocUnsafe(2+d),h[0]=217,h[1]=d,h.write(e,2)):d<=65535?(h=s.allocUnsafe(3+d),h[0]=218,h.writeUInt16BE(d,1),h.write(e,3)):(h=s.allocUnsafe(5+d),h[0]=219,h.writeUInt32BE(d,1),h.write(e,5));else if(e&&(e.readUInt32LE||e instanceof Uint8Array))e instanceof Uint8Array&&(e=s.from(e)),e.length<=255?(h=s.allocUnsafe(2),h[0]=196,h[1]=e.length):e.length<=65535?(h=s.allocUnsafe(3),h[0]=197,h.writeUInt16BE(e.length,1)):(h=s.allocUnsafe(5),h[0]=198,h.writeUInt32BE(e.length,1)),h=c([h,e]);else if(Array.isArray(e))e.length<16?(h=s.allocUnsafe(1),h[0]=144|e.length):e.length<65536?(h=s.allocUnsafe(3),h[0]=220,h.writeUInt16BE(e.length,1)):(h=s.allocUnsafe(5),h[0]=221,h.writeUInt32BE(e.length,1)),h=e.reduce(function(e,t){return e.append(u(t,!0)),e},c().append(h));else if("object"==typeof e)h=l(e)||p(e);else if("number"==typeof e){if(i(e))return a(e,t);if(e>=0)if(e<128)h=s.allocUnsafe(1),h[0]=e;else if(e<256)h=s.allocUnsafe(2),h[0]=204,h[1]=e;else if(e<65536)h=s.allocUnsafe(3),h[0]=205,h.writeUInt16BE(e,1);else if(e<=4294967295)h=s.allocUnsafe(5),h[0]=206,h.writeUInt32BE(e,1);else{if(!(e<=9007199254740991))return a(e,!0);h=s.allocUnsafe(9),h[0]=207,r(h,e)}else if(e>=-32)h=s.allocUnsafe(1),h[0]=256+e;else if(e>=-128)h=s.allocUnsafe(2),h[0]=208,h.writeInt8(e,1);else if(e>=-32768)h=s.allocUnsafe(3),h[0]=209,h.writeInt16BE(e,1);else if(e>-214748365)h=s.allocUnsafe(5),h[0]=210,h.writeInt32BE(e,1);else{if(!(e>=-9007199254740991))return a(e,!0);h=s.allocUnsafe(9),h[0]=211,o(h,1,e)}}if(!h)throw new Error("not implemented yet");return f?h:h.slice()}function l(t){var n,r,o=-1,i=[];for(n=0;n<e.length;n++)if(e[n].check(t)){r=e[n].encode(t);break}return r?(o=r.length-1,1===o?i.push(212):2===o?i.push(213):4===o?i.push(214):8===o?i.push(215):16===o?i.push(216):o<256?(i.push(199),i.push(o)):o<65536?(i.push(200),i.push(o>>8),i.push(255&o)):(i.push(201),i.push(o>>24),i.push(o>>16&255),i.push(o>>8&255),i.push(255&o)),c().append(s.from(i)).append(r)):null}function p(e){var t,n,r=[],o=0;for(t in e)e.hasOwnProperty(t)&&void 0!==e[t]&&"function"!=typeof e[t]&&(++o,r.push(u(t,!0)),r.push(u(e[t],!0)));return o<16?(n=s.allocUnsafe(1),n[0]=128|o):(n=s.allocUnsafe(3),n[0]=222,n.writeUInt16BE(o,1)),r.unshift(n),r.reduce(function(e,t){return e.append(t)},c())}return u}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:"footer"},o.createElement("div",{className:"column"},o.createElement("div",{className:"footerRow"},o.createElement("div",{style:{marginRight:"15px",color:"#000"}},"友情链接"),o.createElement("a",{href:"http://www.zju.edu.cn/"},"浙江大学"),"|",o.createElement("a",{href:"http://www.cs.zju.edu.cn/"},"浙江大学计算机学院"),"|",o.createElement("a",{href:"http://www.zju88.org/agent/index.do"},"飘渺水云间"),"|",o.createElement("a",{href:"http://www.qsc.zju.edu.cn/"},"求是潮"),"|",o.createElement("a",{href:"http://luckweb.057101.com/bt2/index.asp"},"缘网"),"|",o.createElement("a",{href:"http://www.nexushd.org/login.php"},"NexusHD"),"|",o.createElement("a",{href:"https://www.zdgd.zju.edu.cn/"},"浙江大学广播电视网"),"|",o.createElement("a",{href:"http://zy.zju.edu.cn/"},"浙大搜索")),o.createElement("div",{className:"footerRow"},"Copyright © 2003-2017 CC98 . Email: contact@cc98.org",o.createElement("a",{href:"http://www.cc98.org/onlineshow.asp"}," 论坛统计"))))},t}(o.Component);t.Footer=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(15),c=n(9),u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={announcementContent:"加载中……"},n}return r(t,e),t.prototype.getAnnouncement=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a,s,c;return i(this,function(i){switch(i.label){case 0:return[4,fetch("http://apitest.niconi.cc/config/global")];case 1:return e=i.sent(),[4,e.json()];case 2:return t=i.sent(),n=t.announcement,r=/\[list\][\s\S]*?\[align=left\]/gim,o=/\[\*\]/gim,a=/red/gim,s=n.match(r),c=s[0],c=c.replace("[list]",""),c=c.replace("[align=left]",""),c=c.replace(o,""),c=c.replace(a,"orchid"),[2,c]}})})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,this.getAnnouncement()];case 1:return e=t.sent(),this.setState({announcementContent:e}),[2]}})})},t.prototype.render=function(){return a.createElement("div",{className:"announcement"},a.createElement("div",{className:"mainPageTitle1"},a.createElement("div",{className:"mainPageTitleRow"},a.createElement("i",{className:"fa fa-volume-up"}),a.createElement("div",{className:"mainPageTitleText"},"全站公告"))),a.createElement("div",{className:"announcementContent"},a.createElement(s.UbbContainer,{code:this.state.announcementContent})))},t}(a.Component);t.AnnouncementComponent=u;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return a.createElement("div",{className:"recommendedReading"},a.createElement("div",{className:"mainPageTitle2"},a.createElement("div",{className:"mainPageTitleRow"},a.createElement("i",{className:"fa fa-volume-up"}),a.createElement("div",{className:"mainPageTitleText"},"推荐阅读"))),a.createElement("div",{className:"recommendedReadingContent"},a.createElement("div",{className:"recommendedReadingImage"},a.createElement("img",{src:"/images/推荐阅读.jpg"})),a.createElement("div",{className:"column",style:{flexGrow:1}},a.createElement("div",{className:"recommendedReadingTitle"},"推荐阅读标题"),a.createElement("div",{className:"recommendedReadingAbstract"},"推荐阅读内容"),a.createElement("div",{className:"recommendedReadingButtons"},a.createElement("div",{className:"recommendedReadingButton"}),a.createElement("div",{className:"recommendedReadingButton"}),a.createElement("div",{className:"recommendedReadingButton"}),a.createElement("div",{className:"recommendedReadingButton"}),a.createElement("div",{className:"recommendedReadingButton"})))))},t}(a.Component);t.RecommendedReadingComponent=l;var p=function(){function e(e,t,n,r){this.title=e,this.id=t,this.boardName=n,this.boardid=r}return e}();t.MainPageTopic=p;var f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={mainPageTopicState:new Array},n}return r(t,e),t.prototype.getTopicInfo=function(){return o(this,void 0,void 0,function(){var e,t,n,r;return i(this,function(o){switch(o.label){case 0:return e=[],[4,fetch("http://apitest.niconi.cc/Topic/Hot")];case 1:return t=o.sent(),[4,t.json()];case 2:for(n=o.sent(),r=0;r<10;r++)e[r]=new p(n[r].title,n[r].id,n[r].boardName,n[r].boardId);return[2,e]}})})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,this.getTopicInfo()];case 1:return e=t.sent(),this.setState({mainPageTopicState:e}),[2]}})})},t.prototype.convertMainPageTopic=function(e){var t="/list/"+e.boardid,n="/topic/"+e.id;return a.createElement("div",{className:"mainPageListRow"},a.createElement("div",{className:"mainPageListBoardName"}," ",a.createElement(c.Link,{to:t},"[",e.boardName,"]")),a.createElement("div",{className:"mainPageListTitle"},a.createElement(c.Link,{to:n},e.title)))},t.prototype.render=function(){return a.createElement("div",{className:"mainPageList"},a.createElement("div",{className:"mainPageTitle1"},a.createElement("div",{className:"mainPageTitleRow"},a.createElement("i",{className:"fa fa-volume-up"}),a.createElement("div",{className:"mainPageTitleText"},"热门话题"))),a.createElement("div",{className:"mainPageListContent1"},this.state.mainPageTopicState.map(this.convertMainPageTopic)))},t}(a.Component);t.HotTopicComponent=f;var h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={mainPageTopicState:new Array},n}return r(t,e),t.prototype.getTopicInfo=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a;return i(this,function(i){switch(i.label){case 0:return e=[],t="http://apitest.niconi.cc/Board/459/topic?from=0&size=10",n=new Headers,[4,fetch(t,{headers:n})];case 1:return r=i.sent(),[4,r.json()];case 2:for(o=i.sent(),a=0;a<10;a++)e[a]=new p(o[a].title,o[a].id,o[a].boardName,o[a].boardId);return[2,e]}})})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,this.getTopicInfo()];case 1:return e=t.sent(),this.setState({mainPageTopicState:e}),[2]}})})},t.prototype.convertMainPageTopic=function(e){var t="/topic/"+e.id;return a.createElement("div",{className:"mainPageListRow"},a.createElement("div",{className:"mainPageListTitle"},a.createElement(c.Link,{to:t},e.title)))},t.prototype.render=function(){return a.createElement("div",{className:"mainPageList"},a.createElement("div",{className:"mainPageTitle2"},a.createElement("div",{className:"mainPageTitleRow"},a.createElement("i",{className:"fa fa-volume-up"}),a.createElement("div",{className:"mainPageTitleText"},"实习兼职")),a.createElement("div",{className:"mainPageTitleText"},a.createElement(c.Link,{to:"/list/459"},"更多"))),a.createElement("div",{className:"mainPageListContent2"},this.state.mainPageTopicState.map(this.convertMainPageTopic)))},t}(a.Component);t.Shixijianzhi=h;var d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={testContent:""},n.handleChange=n.handleChange.bind(n),n.urlTextHanderler=n.urlTextHanderler.bind(n),n}return r(t,e),t.prototype.handleChange=function(e){this.setState({testContent:e.target.value})},t.prototype.urlTextHanderler=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a,s,c;return i(this,function(i){return e=/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+/gim,t=/cc98\.org/i,n=/zju\.edu\.cn/i,r=/nexushd\.org/i,o=this.state.testContent,a=o.match(e),a?(s=a[0],c=t.test(s)||n.test(s)||r.test(s),console.log(c)):console.log("这不是链接！"),[2]})})},t.prototype.render=function(){return a.createElement("div",null,a.createElement("div",null,"这里是可爱的adddna测试的地方~"),a.createElement("input",{name:"testContent",type:"text",id:"loginName",onChange:this.handleChange,value:this.state.testContent}),a.createElement("div",{onClick:this.urlTextHanderler},"点这里测试输入的内容是否是内链"))},t}(a.Component);t.Test=d;var m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return r(t,e),t.prototype.render=function(){return a.createElement("div",{className:"recommendedFunction"},a.createElement("div",{className:"mainPageTitle1"},a.createElement("div",{className:"mainPageTitleRow"},a.createElement("i",{className:"fa fa-volume-up"}),a.createElement("div",{className:"mainPageTitleText"},"推荐功能"))),a.createElement("div",{className:"recommendedFunctionContent"},a.createElement("div",{className:"recommendedFunctionRow"},a.createElement("div",{className:"recommendedFunctionImage"},a.createElement("img",{src:"/images/推荐功能.jpg"})),a.createElement("div",{className:"recommendedFunctionTitle"},"广播台点歌通道")),a.createElement("div",{className:"recommendedFunctionRow"},a.createElement("div",{className:"recommendedFunctionImage"},a.createElement("img",{src:"/images/推荐功能.jpg"})),a.createElement("div",{className:"recommendedFunctionTitle"},"CC98抽卡游戏")),a.createElement("div",{className:"recommendedFunctionRow"},a.createElement("div",{className:"recommendedFunctionImage"},a.createElement("img",{src:"/images/推荐功能.jpg"})),a.createElement("div",{className:"recommendedFunctionTitle"},"CC98 share")),a.createElement("div",{className:"recommendedFunctionRow"},a.createElement("div",{className:"recommendedFunctionImage"},a.createElement("img",{src:"/images/推荐功能.jpg"})),a.createElement("div",{className:"recommendedFunctionTitle"},"推荐阅读投稿")),a.createElement("div",{className:"recommendedFunctionRow"},a.createElement("div",{className:"recommendedFunctionImage"},a.createElement("img",{src:"/images/推荐功能.jpg"})),a.createElement("div",{className:"recommendedFunctionTitle"},"社团及学生组织用户申请"))))},t}(a.Component);t.RecommendedFunctionComponent=m;var g=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return r(t,e),t.prototype.render=function(){return a.createElement("div",{className:"schoolNews"},a.createElement("div",{className:"mainPageTitle2"},a.createElement("div",{className:"mainPageTitleRow"},a.createElement("i",{className:"fa fa-volume-up"}),a.createElement("div",{className:"mainPageTitleText"},"校园新闻"))),a.createElement("div",{className:"schoolNewsContent"},a.createElement("div",{className:"schoolNewsRow"},a.createElement("div",{className:"schoolNewsTitle"},"[公告] 浙江杭州 Dead论坛 CC98 倒闭啦 王八蛋站长带着小姨子主席逃跑了!")),a.createElement("div",{className:"schoolNewsRow"},a.createElement("div",{className:"schoolNewsTitle"},"[公告] 浙江杭州 Dead论坛 CC98 倒闭啦 王八蛋站长带着小姨子主席逃跑了!")),a.createElement("div",{className:"schoolNewsRow"},a.createElement("div",{className:"schoolNewsTitle"},"[公告] 浙江杭州 Dead论坛 CC98 倒闭啦 王八蛋站长带着小姨子主席逃跑了!")),a.createElement("div",{className:"schoolNewsRow"},a.createElement("div",{className:"schoolNewsTitle"},"[公告] 浙江杭州 Dead论坛 CC98 倒闭啦 王八蛋站长带着小姨子主席逃跑了!")),a.createElement("div",{className:"schoolNewsRow"},a.createElement("div",{className:"schoolNewsTitle"},"[公告] 浙江杭州 Dead论坛 CC98 倒闭啦 王八蛋站长带着小姨子主席逃跑了!")),a.createElement("div",{className:"schoolNewsRow"},a.createElement("div",{className:"schoolNewsTitle"},"[公告] 浙江杭州 Dead论坛 CC98 倒闭啦 王八蛋站长带着小姨子主席逃跑了!")),a.createElement("div",{className:"schoolNewsRow"},a.createElement("div",{className:"schoolNewsTitle"},"[公告] 浙江杭州 Dead论坛 CC98 倒闭啦 王八蛋站长带着小姨子主席逃跑了!")),a.createElement("div",{className:"schoolNewsRow"},a.createElement("div",{className:"schoolNewsTitle"},"[公告] 浙江杭州 Dead论坛 CC98 倒闭啦 王八蛋站长带着小姨子主席逃跑了!")),a.createElement("div",{className:"schoolNewsRow"},a.createElement("div",{className:"schoolNewsTitle"},"[公告] 浙江杭州 Dead论坛 CC98 倒闭啦 王八蛋站长带着小姨子主席逃跑了!")),a.createElement("div",{className:"schoolNewsRow"},a.createElement("div",{className:"schoolNewsTitle"},"[公告] 浙江杭州 Dead论坛 CC98 倒闭啦 王八蛋站长带着小姨子主席逃跑了!"))))},t}(a.Component);t.SchoolNewsComponent=g;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return a.createElement("div",{className:"mainPage"},a.createElement("div",{className:"leftPart"},a.createElement(u,null),a.createElement(l,null),a.createElement("div",{className:"row",style:{justifyContent:"space-between"}},a.createElement(f,null),a.createElement(f,null)),a.createElement("div",{className:"row",style:{justifyContent:"space-between"}},a.createElement(h,null),a.createElement(h,null)),a.createElement("div",{className:"row",style:{justifyContent:"space-between"}},a.createElement(f,null),a.createElement(f,null)),a.createElement("div",{className:"row",style:{justifyContent:"space-between"}},a.createElement(h,null),a.createElement(h,null))),a.createElement("div",{className:"rightPart"},a.createElement(m,null),a.createElement(g,null),a.createElement("div",{className:"mainPageAd"},a.createElement("img",{src:"/images/首页广告.jpg"}))))},t}(a.Component);t.MainPage=v},function(e,t,n){"use strict";function r(e){return{isError:!e.userInfo.currentVisitingUserIsExisted}}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(26),s=n(488),c=n(489),u=n(63),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){return this.props.isError?i.createElement(u.NotFoundUser,null):i.createElement("div",{className:"user-center"},i.createElement("div",{className:"user-center-content"},i.createElement("div",{className:"user-center-head"},i.createElement("p",null,"用户详情")),i.createElement("div",{className:"user-center-body"},i.createElement(s.UserNavigation,null),i.createElement(c.UserRouter,null))))},t}(i.Component);t.User=a.connect(r,null)(l)},function(e,t,n){"use strict";function r(e){return{isManager:"管理员"===e.userInfo.currentUserInfo.privilege,currentVisitingUserPage:e.userInfo.currentVisitingUserPage,id:e.userInfo.currentVisitingUserId}}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(9),s=n(26),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){return i.createElement("div",{className:"user-center-navigation",id:"userCenterNavigation"},i.createElement("ul",null,i.createElement("li",null,i.createElement(a.Link,{to:"/user/id/"+this.props.id,className:"exact"===this.props.currentVisitingUserPage?"user-center-navigation-active fa-home":"fa-home"},i.createElement("span",{style:{width:"0.5rem"}}),"主页")),i.createElement("hr",null),i.createElement("li",null,i.createElement(a.Link,{to:"/user/id/"+this.props.id+"/manage",className:"manage"===this.props.currentVisitingUserPage?"user-center-navigation-active fa-cog":"fa-cog"},i.createElement("span",{style:{width:"0.5rem"}}),"管理"))))},t}(i.Component);t.UserNavigation=s.connect(r,null)(c)},function(e,t,n){"use strict";function r(e){return{changePage:function(t,n){e(d.changeCurrentVisitingUserPage(t,n))},notFoundUser:function(){e(d.userNotFound())}}}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),c=n(9),u=n(26),l=n(490),p=n(491),f=n(492),h=n(167),d=n(39),m=n(2),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){return s.createElement("div",{className:"user-center-router"},s.createElement(c.Route,{path:"/user/:method/:id?",exact:!0,component:y}),s.createElement(c.Route,{path:"/user/:method/:id/manage",component:l.default}))},t}(s.Component);t.UserRouter=g;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.componentDidMount=function(){return i(this,void 0,void 0,function(){var e,t,n,r,o,i,s,c,u,l,p;return a(this,function(a){switch(a.label){case 0:if(a.trys.push([0,4,,5]),e=void 0,t=this.props.match.params,n=t.id,r=t.method,o=new Headers,!n)throw new Error;return"name"===r?e="http://apitest.niconi.cc/User/Name/"+n:"id"===r&&(e="http://apitest.niconi.cc/User/"+n),s=(i=o).append,c=["Authorization"],[4,m.getToken()];case 1:return s.apply(i,c.concat([a.sent()])),[4,fetch(e,{headers:o})];case 2:return u=a.sent(),[4,u.json()];case 3:return l=a.sent(),console.log(l),this.props.history.replace("/user/id/"+l.id),this.props.changePage("exact",l.id),this.setState({userInfo:l,userAvatarImgURL:l.portraitUrl,responseState:u.status}),[3,5];case 4:return p=a.sent(),this.props.notFoundUser(),[3,5];case 5:return[2]}})})},t.prototype.render=function(){return null!==this.state&&200===this.state.responseState?s.createElement("div",{className:"user-center-exact"},s.createElement(h.UserCenterExactAvatar,{userAvatarImgURL:this.state.userAvatarImgURL}),s.createElement(p.UserExactProfile,{userInfo:this.state.userInfo}),s.createElement(f.UserRouterActivities,{id:this.state.userInfo.id})):s.createElement("div",{className:"user-center-loading"},s.createElement("p",{className:"fa fa-spinner fa-pulse fa-2x fa-fw"}))},t}(s.Component),y=u.connect(null,r)(c.withRouter(v))},function(e,t,n){"use strict";function r(e){return{id:e.userInfo.currentVisitingUserId}}function o(e){return{changePage:function(t,n){e(l.changeCurrentVisitingUserPage(t,n))},notFoundUser:function(){e(l.userNotFound())}}}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var c=n(1),u=n(2),l=n(39),p=n(26),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r,o,i,a,c,l;return s(this,function(s){switch(s.label){case 0:e=0===this.props.id?this.props.match.params.id:this.props.id,this.props.changePage("manage",e),s.label=1;case 1:return s.trys.push([1,5,,6]),t="http://apitest.niconi.cc/User/"+e,n=new Headers,o=(r=n).append,i=["Authorization"],[4,u.getToken()];case 2:return o.apply(r,i.concat([s.sent()])),[4,fetch(t,{headers:n})];case 3:return a=s.sent(),[4,a.json()];case 4:return c=s.sent(),[3,6];case 5:return l=s.sent(),this.props.notFoundUser(),[3,6];case 6:return[2]}})})},t.prototype.render=function(){return c.createElement("div",null)},t}(c.Component);t.default=p.connect(r,o)(f)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(9),c=n(15),u=n(2),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isFollowing:n.props.userInfo.isFollowing,buttonIsDisabled:!1,buttonInfo:n.props.userInfo.isFollowing?"已关注":"关注"},n.unfollow=n.unfollow.bind(n),n.follow=n.follow.bind(n),n}return r(t,e),t.prototype.follow=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return this.setState({buttonIsDisabled:!0,buttonInfo:"关注中"}),[4,u.followUser(Number.parseInt(this.props.userInfo.id))];case 1:return e=t.sent(),e?this.setState({buttonIsDisabled:!1,buttonInfo:"已关注",isFollowing:!0}):this.setState({buttonIsDisabled:!1,buttonInfo:"关注失败",isFollowing:!1}),[2]}})})},t.prototype.getPrivilegeColor=function(){switch(this.props.userInfo.privilege){case"注册用户":return"grey";case"超级版主":return"pink";case"全站贵宾":return"blue";case"管理员":return"red"}},t.prototype.unfollow=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return this.setState({buttonIsDisabled:!0,buttonInfo:"取关中"}),[4,u.unfollowUser(Number.parseInt(this.props.userInfo.id))];case 1:return e=t.sent(),!0===e?this.setState({buttonIsDisabled:!1,buttonInfo:"重新关注",isFollowing:!1}):this.setState({buttonIsDisabled:!1,buttonInfo:"取关失败",isFollowing:!0}),[2]}})})},t.prototype.render=function(){var e=this,t=!1;if(this.props.userInfo.birthday){var n=this.props.userInfo.birthday.match(/\d+-(\d+)-(\d+)/),r=new Date;Number.parseInt(n[1])===r.getMonth()+1&&Number.parseInt(n[2])===r.getDate()&&(t=!0)}return a.createElement("div",{className:"user-profile"},a.createElement("div",{id:"userId"},a.createElement("div",{id:"userId"},a.createElement("p",null,this.props.userInfo.name,a.createElement("span",{style:{fontSize:"12px",color:this.getPrivilegeColor(),marginLeft:"2rem"}},this.props.userInfo.privilege)),a.createElement(s.Link,{to:"/message/message?id="+this.props.userInfo.id},a.createElement("button",{type:"button"},"私信")),a.createElement("button",{type:"button",id:this.state.isFollowing?"unfollow":"",onClick:this.state.isFollowing?this.unfollow:this.follow,disabled:this.state.buttonIsDisabled,onMouseOver:function(){e.state.isFollowing&&!e.state.buttonIsDisabled&&e.setState({buttonInfo:"取消关注"})},onMouseLeave:function(){e.state.isFollowing&&!e.state.buttonIsDisabled&&e.setState({buttonInfo:"已关注"})}},this.state.buttonInfo))),a.createElement("div",{id:"userIntroducion"},this.props.userInfo.introduction),a.createElement("div",{id:"userGenderAndBirthday"},a.createElement("p",null,"性别：  ",1===this.props.userInfo.gender?"男":"女"," "),null===this.props.userInfo.birthday?null:a.createElement("p",null,"生日：  ",this.props.userInfo.birthday.slice(0,this.props.userInfo.birthday.indexOf("T")).replace("9999-",""),t?a.createElement("span",{style:{fontFamily:"FontAwesome",marginLeft:"1rem"},className:"fa-birthday-cake",title:"生日快乐~"}):null),this.props.userInfo.emailAddress?a.createElement("p",null,"邮箱：  ",this.props.userInfo.emailAddress):null,this.props.userInfo.qq?a.createElement("p",null,"QQ：  ",this.props.userInfo.qq):null,this.props.userInfo.postCount?a.createElement("p",null,"发帖数：  ",this.props.userInfo.postCount):null,this.props.userInfo.prestige?a.createElement("p",null,"威望：  ",this.props.userInfo.prestige):null,this.props.userInfo.displayTitle?a.createElement("p",null,"用户组：  ",this.props.userInfo.displayTitle):null,a.createElement("div",null,this.props.userInfo.registerTime?a.createElement("p",null,"注册时间：  ",this.props.userInfo.registerTime.replace("T"," ")):null,this.props.userInfo.lastLogOnTime?a.createElement("p",null,"最后登录时间：  ",this.props.userInfo.lastLogOnTime.replace("T"," ")):null)),this.props.userInfo.signatureCode?a.createElement("div",{className:"user-description"},a.createElement("p",null,"个性签名"),a.createElement(c.UbbContainer,{code:this.props.userInfo.signatureCode})):null)},t}(a.Component);t.UserExactProfile=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(82),c=n(35),u=n(2),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={userRecentPosts:[],isLoading:!1},n.scrollHandler=n.scrollHandler.bind(n),n}return r(t,e),t.prototype.scrollHandler=function(e){return o(this,void 0,void 0,function(){var e,t,n,r,o,a,s,c,l=this;return i(this,function(i){switch(i.label){case 0:if(!((e=document.body.scrollHeight-window.pageYOffset)<1500&&!1===this.state.isLoading))return[3,9];i.label=1;case 1:return i.trys.push([1,8,,9]),this.setState({isLoading:!0}),t="http://apitest.niconi.cc/user/"+this.props.id+"/recent-topic?userid="+this.props.id+"&from="+this.state.userRecentPosts.length+"&size=11",[4,u.getToken()];case 2:return n=i.sent(),r=new Headers,r.append("Authorization",n),[4,fetch(t,{headers:r})];case 3:return o=i.sent(),200!==o.status?[3,6]:[4,o.json()];case 4:return a=i.sent(),a.length<10?window.removeEventListener("scroll",this.scrollHandler):a.pop(),[4,Promise.all(a.map(function(e){return l.item2post(e)}))];case 5:return s=i.sent(),this.setState(function(e){return{userRecentPosts:e.userRecentPosts.concat(s),isLoading:!1}}),[3,7];case 6:throw{};case 7:return[3,9];case 8:return c=i.sent(),this.setState({isLoading:!1}),console.log("用户中心滚动加载失败"),[3,9];case 9:return[2]}})})},t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a,s,c,l;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,9,,10]),e="http://apitest.niconi.cc/user/"+this.props.id+"/recent-topic?userid="+this.props.id+"&from="+this.state.userRecentPosts.length+"&size=11",[4,u.getToken()];case 1:return t=i.sent(),n=new Headers,n.append("Authorization",t),[4,fetch(e,{headers:n})];case 2:return r=i.sent(),200!==r.status?[3,7]:[4,r.json()];case 3:o=i.sent(),a=[],s=o.length,i.label=4;case 4:return s--?[4,this.item2post(o[s])]:[3,6];case 5:return c=i.sent(),a.unshift(c),[3,4];case 6:return this.setState({userRecentPosts:a}),10===o.length&&window.addEventListener("scroll",this.scrollHandler),[3,8];case 7:throw{};case 8:return[3,10];case 9:return l=i.sent(),console.log("用户中心帖子加载失败"),[3,10];case 10:return[2]}})})},t.prototype.componentWillUnmount=function(){window.removeEventListener("scroll",this.scrollHandler)},t.prototype.item2post=function(e){return o(this,void 0,void 0,function(){var t,n;return i(this,function(r){switch(r.label){case 0:return t=new c.UserRecentPost,t.approval=e.likeCount,n=t,[4,u.getBoardName(e.boardId)];case 1:return n.board=r.sent(),t.date=e.time.replace("T"," ").slice(0,19),t.disapproval=e.dislikeCount,t.content=e.title,t.id=e.id,t.boardId=e.boardId,t.name=e.userName,t.isAnonymous=e.isAnonymous,[2,t]}})})},t.prototype.render=function(){if(0===this.state.userRecentPosts.length){var e={marginLeft:"2rem"};return a.createElement("div",{className:"user-activities"},a.createElement("p",null,"发表的主题"),a.createElement("div",{className:"user-posts",style:e},"没有主题"))}for(var t=this.state.userRecentPosts.map(function(e){return a.createElement(s.UserCenterExactActivitiesPost,{userRecentPost:e})}),n=1;n<t.length;n+=2)t.splice(n,0,a.createElement("hr",null));return a.createElement("div",{className:"user-activities"},a.createElement("p",null,"发表的主题"),a.createElement("div",{className:"user-posts"},t))},t}(a.Component);t.UserRouterActivities=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(9),a=n(494),s=n(495),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",null,o.createElement(i.Route,{path:"/logon",exact:!0,component:a.default}),o.createElement(i.Route,{path:"/logon/logoff",component:s.LogOff}))},t}(o.Component);t.LogOn=c},function(e,t,n){"use strict";function r(e){return{isLogOn:e.userInfo.isLogOn}}function o(e){return{logOn:function(){e(p.userLogIn())},logOff:function(){e(p.userLogOff())},changeUserInfo:function(t){e(h.changeUserInfo(t))}}}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var c=n(1),u=n(38),l=n(2),p=n(39),f=n(26),h=n(39),d=n(9),m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={loginName:"",loginPassword:"",loginMessage:"",isLoging:!1},n.handleNameChange=n.handleNameChange.bind(n),n.handlePasswordChange=n.handlePasswordChange.bind(n),n.handleLogin=n.handleLogin.bind(n),n}return i(t,e),t.prototype.shake=function(e){return e.classList.add("shake"),setTimeout(function(){e.classList.remove("shake")},500),e},t.prototype.handleNameChange=function(e){this.setState({loginName:e.target.value})},t.prototype.handlePasswordChange=function(e){this.setState({loginPassword:e.target.value})},t.prototype.handleLogin=function(e){return a(this,void 0,void 0,function(){var t,n,r,o,i,a,c,p,f=this;return s(this,function(s){switch(s.label){case 0:if(e.preventDefault(),this.state.isLoging)return[2,!1];if(!this.state.loginName)return this.setState({loginMessage:"请输入用户名"}),this.shake(document.getElementById("loginName")).focus(),[2,!1];if(!this.state.loginPassword)return this.setState({loginMessage:"请输入密码"}),this.shake(document.getElementById("loginPassword")).focus(),[2,!1];this.setState({loginMessage:"登录中",isLoging:!0}),this.props.logOff(),s.label=1;case 1:return s.trys.push([1,5,,6]),t="https://openid.cc98.org/connect/token",n={client_id:"9a1fd200-8687-44b1-4c20-08d50a96e5cd",client_secret:"8b53f727-08e2-4509-8857-e34bf92b27f2",grant_type:"password",username:this.state.loginName,password:this.state.loginPassword,scope:"cc98-api openid"},r=new Headers,r.append("Content-Type","application/x-www-form-urlencoded"),[4,fetch(t,{method:"POST",headers:r,body:u.param(n)})];case 2:if(o=s.sent(),200!==o.status)throw new Error(o.status.toString());return[4,o.json()];case 3:return i=s.sent(),a="Bearer "+encodeURIComponent(i.access_token),l.setLocalStorage("accessToken",a,i.expires_in),l.setLocalStorage("userName",this.state.loginName),l.setLocalStorage("password",this.state.loginPassword),[4,l.refreshUserInfo()];case 4:return s.sent(),this.setState({loginMessage:"登录成功 正在返回"}),this.props.logOn(),this.props.changeUserInfo(l.getLocalStorage("userInfo")),setTimeout(function(){1===f.props.history.length?f.props.history.push("/"):f.props.history.go(-1)},100),[3,6];case 5:switch(c=s.sent(),p=void 0,c.message){case"400":p="密码错误";break;default:p="未知错误 "+c.message}return this.setState({loginMessage:"登录失败 "+p,isLoging:!1}),this.props.logOff(),[3,6];case 6:return[2]}})})},t.prototype.render=function(){return c.createElement("div",{className:"login"},c.createElement("div",null,c.createElement("img",{src:"/images/login.png"}),c.createElement("div",null,c.createElement("img",{src:"/images/login_welcome.png"}),c.createElement("form",{onSubmit:this.handleLogin,autoComplete:"on"},c.createElement("div",{className:"login-form"},c.createElement("p",null,"用户名"),c.createElement("input",{name:"username",type:"text",id:"loginName",onChange:this.handleNameChange,value:this.state.loginName,autoComplete:"username"})),c.createElement("div",{className:"login-form"},c.createElement("p",null,"密码"),c.createElement("input",{name:"password",type:"password",id:"loginPassword",onChange:this.handlePasswordChange,autoComplete:"current-password"})),c.createElement("p",{id:"loginMessage"},this.state.loginMessage),c.createElement("button",{type:"submit",disabled:this.state.isLoging},"登录账号")),c.createElement("p",null,c.createElement("span",null,"还没账号？我要 ",c.createElement("a",{href:""},"注册"))))))},t}(c.Component);!function(){function e(){}}();t.default=f.connect(r,o)(d.withRouter(m))},function(e,t,n){"use strict";function r(e){return{logOff:function(){e(s.userLogOff())}}}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(26),s=n(39),c=n(9),u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={logOffInfo:"登出中"},n}return o(t,e),t.prototype.componentDidMount=function(){var e=this;localStorage.removeItem("accessToken"),localStorage.removeItem("userName"),this.setState({logOffInfo:"登出成功 正在前往登录页"}),setTimeout(function(){e.props.history.push("/logon")},2e3)},t.prototype.render=function(){return i.createElement("div",{className:"login"},i.createElement("div",null,i.createElement("img",{src:"/images/login.png"}),i.createElement("div",null,i.createElement("p",{className:"LogOffInfo"},this.state.logOffInfo))))},t}(i.Component);t.LogOff=a.connect(function(){return null},r)(c.withRouter(u))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a,s=n(1),c=n(2),u=n(116);a=t.Constants||(t.Constants={});var l=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),Object.defineProperty(t.prototype,"match",{get:function(){return this.props.match},enumerable:!0,configurable:!0}),t}(s.Component);t.RouteComponent=l;var p=function(e){function t(t){var n=e.call(this,t)||this;return n.update=n.update.bind(n),n.changeEditor=n.changeEditor.bind(n),n.state={topicId:null,title:"",content:"",ready:!1,mode:0,boardName:"",tags:[]},n}return r(t,e),t.prototype.componentWillMount=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a,s;return i(this,function(i){switch(i.label){case 0:return e=c.getLocalStorage("accessToken"),t="http://apitest.niconi.cc/Board/"+this.match.params.boardId,n=new Headers,n.append("Authorization",e),[4,fetch(t,{headers:n})];case 1:return r=i.sent(),[4,r.json()];case 2:return o=i.sent(),a=o.name,[4,c.getBoardTag(this.match.params.boardId)];case 3:return s=i.sent(),this.setState({boardName:a,tags:s}),[2]}})})},t.prototype.ready=function(){this.setState({ready:!0})},t.prototype.changeEditor=function(){0===this.state.mode?this.setState({mode:1}):this.setState({mode:0})},t.prototype.update=function(e){this.setState({content:e})},t.prototype.sendMdTopic=function(e){return o(this,void 0,void 0,function(){var t,n,r,o,a,s,u,l;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t="http://apitest.niconi.cc/board/"+this.match.params.boardId+"/topic",n={content:e,contentType:1,title:this.state.title},r=JSON.stringify(n),o=c.getLocalStorage("accessToken"),a=new Headers,a.append("Authorization",o),a.append("Content-Type","application/json"),[4,fetch(t,{method:"POST",headers:a,body:r})];case 1:return s=i.sent(),402===s.status&&alert("请输入内容"),[4,s.text()];case 2:return u=i.sent(),window.location.href="/topic/"+u,[3,4];case 3:return l=i.sent(),console.log("Error"),console.log(l),[3,4];case 4:return[2]}})})},t.prototype.sendUbbTopic=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a,s,u,l,p,f,h;return i(this,function(i){switch(i.label){case 0:return e="http://apitest.niconi.cc/board/"+this.match.params.boardId+"/topic",t={content:this.state.content,contentType:0,title:this.state.title},n=JSON.stringify(t),r=c.getLocalStorage("accessToken"),o=new Headers,o.append("Authorization",r),o.append("Content-Type","application/json"),[4,fetch(e,{method:"POST",headers:o,body:n})];case 1:return a=i.sent(),[4,a.text()];case 2:return s=i.sent(),(u=this.atHanderler(this.state.content))?(l=JSON.stringify(u),p="http://apitest.niconi.cc/notification/atuser?topicid="+s,f=new Headers,f.append("Content-Type","application/json"),f.append("Authorization",r),[4,fetch(p,{method:"POST",headers:f,body:l})]):[3,4];case 3:h=i.sent(),i.label=4;case 4:return window.location.href="/topic/"+s,[2]}})})},t.prototype.atHanderler=function(e){var t=new RegExp("@[^ \n]{1,10}?[ \n]","gm"),n=new RegExp("[^@ ]+");if(e.match(t)){var r=e.match(t).length;r>10&&(r=10);for(var o=new Array,i=0;i<r;i++){var a=e.match(t)[i];console.log(a);var s=n.exec(a)[0];console.log(s),o[i]=s}return console.log(o),o}return console.log("不存在合法的@"),!1},t.prototype.onTitleChange=function(e){this.setState({title:e})},t.prototype.onUbbChange=function(e){this.setState({content:e})},t.prototype.render=function(){var e=this.state.mode,t="/list/"+this.match.params.boardId+"/normal";return 0===e?s.createElement("div",{className:"createTopic"},s.createElement(f,{url:t,boardName:this.state.boardName}),s.createElement(h,{boardId:this.match.params.boardId,tags:this.state.tags,onChange:this.onTitleChange.bind(this)}),s.createElement("div",{className:"createTopicType"},s.createElement("div",{className:"createTopicListName"},"发帖类型"),s.createElement("input",{type:"radio",checked:!0,name:"type",value:"normal"})," 普通",s.createElement("input",{type:"radio",name:"type",value:"academic"})," 学术信息",s.createElement("div",{style:{color:"rgb(255,0,0)"}},"（活动帖和学术贴请选择正确的发帖类型）")),s.createElement("div",{className:"createTopicOption"},s.createElement("div",{className:"createTopicListName"},"选项"),s.createElement("input",{type:"radio",checked:!0,name:"option",value:"all"}),"回复所有人可见",s.createElement("input",{type:"radio",name:"option",value:"host"}),"回复仅楼主可见",s.createElement("input",{type:"radio",name:"option",value:"special"}),"回复仅特定用户可见"),s.createElement("div",{className:"createTopicContent"},s.createElement("div",{className:"createTopicListName"},"主题内容"),s.createElement("div",{id:"post-topic-changeMode",onClick:this.changeEditor,className:"button blue",style:{width:"13.5rem"}},"切换到Markdown编辑器")),s.createElement(u.UbbEditor,{update:this.update,value:this.state.content}),s.createElement("div",{className:"row",style:{justifyContent:"center"}},s.createElement("div",{id:"post-topic-button",onClick:this.sendUbbTopic.bind(this),className:"button blue",style:{marginTop:"1.25rem",marginBottom:"1.25rem",width:"4.5rem",letterSpacing:"0.3125rem",alignSelf:"center"}},"发帖"))):s.createElement("div",{className:"createTopic"},s.createElement(f,{url:t,boardName:this.state.boardName}),s.createElement(h,{boardId:this.match.params.boardId,tags:this.state.tags,onChange:this.onTitleChange.bind(this)}),s.createElement("div",{className:"createTopicType"},s.createElement("div",{className:"createTopicListName"},"发帖类型"),s.createElement("input",{type:"radio",checked:!0,name:"type",value:"normal"})," 普通",s.createElement("input",{type:"radio",name:"type",value:"academic"})," 学术信息",s.createElement("div",{style:{color:"rgb(255,0,0)"}},"（活动帖和学术贴请选择正确的发帖类型）")),s.createElement("div",{className:"createTopicOption"},s.createElement("div",{className:"createTopicListName"},"选项"),s.createElement("input",{type:"radio",checked:!0,name:"option",value:"all"}),"回复所有人可见",s.createElement("input",{type:"radio",name:"option",value:"host"}),"回复仅楼主可见",s.createElement("input",{type:"radio",name:"option",value:"special"}),"回复仅特定用户可见"),s.createElement("div",{className:"createTopicContent"},s.createElement("div",{className:"createTopicListName"},"主题内容"),s.createElement("div",{id:"post-topic-changeMode",onClick:this.changeEditor,className:"button blue",style:{width:"13.5rem",letterSpacing:"0.3125rem"}},"切换到UBB编辑器")),s.createElement(d,{onChange:this.sendMdTopic.bind(this),ready:this.state.ready}))},t}(l);t.CreateTopic=p;var f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={url:"",boardName:""},n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){this.setState({url:e.url,boardName:e.boardName})},t.prototype.render=function(){return s.createElement("div",{className:"row",style:{alignItems:"baseline",justifyContent:"flex-start",color:"grey",fontSize:"0.75rem",marginBottom:"1rem"}},s.createElement("a",{style:{color:"grey",fontSize:"1rem",marginRight:"0.5rem"},href:"/"},"首页"),s.createElement("i",{className:"fa fa-chevron-right"}),s.createElement("a",{style:{color:"grey",fontSize:"1rem",marginLeft:"0.5rem",marginRight:"0.5rem"},href:this.state.url},this.state.boardName),s.createElement("i",{className:"fa fa-chevron-right"}),s.createElement("div",{style:{color:"grey",fontSize:"1rem",marginLeft:"0.5rem",marginRight:"0.5rem"}},"发表主题"))},t}(s.Component);t.Category=f;var h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={title:""},n}return r(t,e),t.prototype.handleTitleChange=function(e){this.props.onChange(e.target.value),this.setState({title:e.target.value})},t.prototype.componentWillReceiveProps=function(e){var t=e.tags;t.length},t.prototype.render=function(){return s.createElement("div",{className:"createTopicTitle"},s.createElement("div",{className:"createTopicListName"},"主题标题"),s.createElement("div",{className:"createTopicListName"},"标签1"),s.createElement("div",{className:"createTopicListName"},"标签2"),s.createElement("input",{value:this.state.title,placeholder:"请输入新主题的标题",onChange:this.handleTitleChange.bind(this)}))},t}(s.Component);t.InputTitle=h;var d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={content:""},n}return r(t,e),t.prototype.componentDidUpdate=function(){editormd.emoji.path="/images/emoji/",a.testEditor=editormd("test-editormd",{width:"100%",height:680,path:"/scripts/lib/editor.md/lib/",saveHTMLToTextarea:!1,emoji:!0,toolbarIcons:function(){return["undo","redo","|","emoji","bold","del","italic","quote","|","h1","h2","h3","h4","|","list-ul","list-ol","hr","|","link","image","code","table","html-entities"]}})},t.prototype.componentDidMount=function(){editormd.emoji.path="/images/emoji/",a.testEditor=editormd("test-editormd",{width:"100%",height:680,path:"/scripts/lib/editor.md/lib/",saveHTMLToTextarea:!1,emoji:!0,toolbarIcons:function(){return["undo","redo","|","emoji","bold","del","italic","quote","|","h1","h2","h3","h4","|","list-ul","list-ol","hr","|","link","image","code","table","html-entities"]}})},t.prototype.send=function(){var e=a.testEditor.getMarkdown();this.props.onChange(e)},t.prototype.render=function(){return s.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column"}},s.createElement("div",{id:"sendTopic"},s.createElement("form",null,s.createElement("div",{id:"test-editormd",className:"editormd"},s.createElement("textarea",{className:"editormd-markdown-textarea",name:"test-editormd-markdown-doc"}))),s.createElement("div",{className:"row",style:{justifyContent:"center",marginBottom:"1.25rem "}},s.createElement("div",{id:"post-topic-button",className:"button blue",style:{marginTop:"1.25rem",width:"4.5rem",letterSpacing:"0.3125rem"},onClick:this.send.bind(this)},"发帖"))))},t}(s.Component);t.InputMdContent=d},function(e,t,n){"use strict";function r(e){return s.createElement(c.FocusTopicSingle,{title:e.title,hitCount:e.hitCount,id:e.id,boardId:e.boardId,boardName:e.boardName,replyCount:e.replyCount,userId:e.userId,userName:e.userName,portraitUrl:e.portraitUrl,time:e.time,likeCount:e.likeCount,dislikeCount:e.dislikeCount,fanCount:e.fanCount})}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),c=n(84),u=n(2),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={boardId:0,boardName:"全站",words:[],data:[],from:0,loading:!0},n.handleScroll=n.handleScroll.bind(n),n}return o(t,e),t.prototype.componentDidMount=function(){return i(this,void 0,void 0,function(){var e,t;return a(this,function(n){switch(n.label){case 0:return(e=u.getStorage("searchInfo"))?[3,1]:(this.showNoResult(),this.setState({loading:!1}),[3,3]);case 1:return[4,u.getSearchTopic(e.boardId,e.words,this.state.from,this.context.router)];case 2:t=n.sent(),0==t?(console.log("没有搜索结果"),this.showNoResult(),this.setState({loading:!1})):t.length<20?(this.setState({boardId:e.boardId,boardName:e.boardName,words:e.words,data:t,from:t.length,loading:!1}),$("#focus-topic-loading").addClass("displaynone"),$("#focus-topic-loaddone").removeClass("displaynone")):this.setState({boardId:e.boardId,boardName:e.boardName,words:e.words,data:t,from:t.length,loading:!0}),n.label=3;case 3:return document.addEventListener("scroll",this.handleScroll),[2]}})})},t.prototype.handleScroll=function(){return i(this,void 0,void 0,function(){var e,t,n,n;return a(this,function(r){switch(r.label){case 0:if(!u.isBottom()||!this.state.loading)return[3,5];this.setState({loading:!1}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,u.getSearchTopic(this.state.boardId,this.state.words,this.state.from,this.context.router)];case 2:return e=r.sent(),[3,4];case 3:return t=r.sent(),this.setState({loading:!0}),[2];case 4:if(!e)return $("#focus-topic-loading").addClass("displaynone"),$("#focus-topic-loaddone").removeClass("displaynone"),this.setState({loading:!1}),[2];e.length<20?($("#focus-topic-loading").addClass("displaynone"),$("#focus-topic-loaddone").removeClass("displaynone"),n=this.state.data.concat(e),this.setState({data:n,from:n.length,loading:!1})):(n=this.state.data.concat(e),this.setState({data:n,from:n.length,loading:!0})),r.label=5;case 5:return[2]}})})},t.prototype.showNoResult=function(){$("#focus-topic-area").addClass("displaynone"),$("#noResult").removeClass("displaynone")},t.prototype.render=function(){return s.createElement("div",{className:"focus-root"},s.createElement("div",{className:"focus"},s.createElement("div",{className:"focus-allNewTopic"},s.createElement("i",{className:"fa fa-home","aria-hidden":"true"}),"搜索/",this.state.boardName),s.createElement("div",{className:"focus-topic-area",id:"focus-topic-area"},s.createElement("div",{className:"focus-topic-topicArea"},this.state.data.map(r)),s.createElement("div",{className:"focus-topic-loading",id:"focus-topic-loading"},s.createElement("img",{src:"http://ww3.sinaimg.cn/large/0060lm7Tgy1fitwrd6yv0g302s0093y9.gif"})),s.createElement("div",{className:"focus-topic-loaddone displaynone",id:"focus-topic-loaddone"}," 没有更多帖子啦~")),s.createElement("div",{id:"noResult",className:"noResult displaynone"},"没有符合条件的搜索结果")))},t}(s.Component);t.Search=l},function(e,t,n){"use strict";function r(e){var t="/list/"+e.id+"/normal/";return i.createElement("a",{href:t,target:"_blank"},i.createElement("div",{className:"focus-board"},e.name))}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(2),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){var e=a.getStorage("searchBoardInfo");return i.createElement("div",{className:"focus-root"},i.createElement("div",{className:"focus"},i.createElement("div",{className:"focus-title"},i.createElement("i",{className:"fa fa-home","aria-hidden":"true"}),"搜索/版面"),i.createElement("div",{className:"focus-board-area"},e.map(r))))},t}(i.Component);t.SearchBoard=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(116),u=function(e){function t(t){var n=e.call(this,t)||this;return n.update=n.update.bind(n),n.signin=n.signin.bind(n),n.state={signinInfo:{lastSignInCount:0,lastSignInTime:0},content:""},n}return r(t,e),t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,s.getSigninInfo()];case 1:return e=t.sent(),this.setState({signinInfo:e}),[2]}})})},t.prototype.update=function(e){this.setState({content:e})},t.prototype.signin=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o;return i(this,function(i){switch(i.label){case 0:return s.signin(this.state.content),[4,s.getGlobalConfig()];case 1:return e=i.sent(),t=e.signInTopicId,[4,s.getTopicInfo(t)];case 2:return n=i.sent(),r=n.replyCount,o=s.getTotalPageof10(r),window.location.href="/topic/"+t+"#"+o,this.setState({content:""}),[2]}})})},t.prototype.render=function(){var e;return e=this.state.signinInfo.hasSignedInToday?a.createElement("div",null,a.createElement("div",{className:"row",style:{justifyContent:"center"}},"你上次的签到日期是",moment(this.state.signinInfo.lastSignInTime).format("YYYY-MM-DD HH:mm:ss")),a.createElement("div",{className:"row",style:{justifyContent:"center"}},"你已经连续签到了",this.state.signinInfo.lastSignInCount,"天")):a.createElement("div",{className:"column"},a.createElement("div",{className:"row"},"你今天还未签到"),a.createElement("div",{style:{marginTop:"1.5rem"}},a.createElement(c.UbbEditor,{update:this.update,value:this.state.content}),a.createElement("div",{className:"row",style:{justifyContent:"center",marginBottom:"1.25rem "}},a.createElement("div",{id:"post-topic-button",onClick:this.signin,className:"button blue",style:{marginTop:"1.25rem",width:"4.5rem",letterSpacing:"0.3125rem"}},"签到")))),a.createElement("div",{className:"column",style:{width:"1140px",fontFamily:"微软雅黑",padding:"2rem",backgroundColor:"#fff",marginBottom:"1rem",fontSize:"1rem"}},a.createElement("div",{className:"column",style:{width:"100%"}},a.createElement("div",{className:"row",style:{width:"100%",justifyContent:"center"}},"论坛签到"),a.createElement("div",{className:"row"},"签到功能是 CC98 论坛提供的一项娱乐功能。每个用户每天可以签到一次，并获得额外的论坛财富值奖励。如果连续多日签到，则奖励会不断增加。目前财富值的奖励情况如下表所示："),a.createElement("div",{className:"column",style:{marginLeft:"2rem"}},a.createElement("div",{className:"row"},"第 1 天： 600 到 1200 论坛财富值"),a.createElement("div",{className:"row"},"第 2 天： 700 到 1400 论坛财富值"),a.createElement("div",{className:"row"},"第 3 天： 800 到 1600 论坛财富值"),a.createElement("div",{className:"row"},"第 4 天： 900 到 1800 论坛财富值"),a.createElement("div",{className:"row"},"第 5 天及以后： 1000 到 2000 论坛财富值"))),e)},t}(a.Component);t.Signin=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(15),u=(function(){function e(){}}(),function(e){function t(t){var n=e.call(this,t)||this;return n.state={announcement:"加载中",info:""},n.changeSiteAnnouncement=n.changeSiteAnnouncement.bind(n),n}return r(t,e),t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){var e,t,n;return i(this,function(r){switch(r.label){case 0:return e="http://apitest.niconi.cc/config/global",[4,fetch(e)];case 1:return t=r.sent(),[4,t.json()];case 2:return n=r.sent(),this.setState({announcement:n.announcement}),[2]}})})},t.prototype.changeSiteAnnouncement=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a=this;return i(this,function(i){switch(i.label){case 0:return e="http://apitest.niconi.cc/config/global/announcement",[4,s.getToken()];case 1:return t=i.sent(),n=this.state.announcement,r=new Headers,r.append("Authorization",t),r.append("Content-Type","application/json"),[4,fetch(e,{method:"PUT",headers:r,body:JSON.stringify({announcement:n})})];case 2:return o=i.sent(),200===o.status&&(this.setState({info:"修改全站公告成功"}),setTimeout(function(){a.setState({info:""})},1e3)),[2]}})})},t.prototype.render=function(){var e=this;return a.createElement("div",null,a.createElement("p",null,"全站管理"),a.createElement("div",null,a.createElement("p",{style:{height:"2rem"}},this.state.info),a.createElement("div",null,a.createElement("p",null,"全站公告",a.createElement("button",{type:"button",onClick:this.changeSiteAnnouncement},"提交修改")),a.createElement("textarea",{style:{width:"100%",height:"20rem",resize:"none"},onChange:function(t){e.setState({announcement:t.target.value})},value:this.state.announcement}),a.createElement(c.UbbContainer,{code:this.state.announcement}))))},t}(a.Component));t.SiteManage=u},function(e,t){}]);