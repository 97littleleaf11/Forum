/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 182);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(5);
var core = __webpack_require__(32);
var hide = __webpack_require__(17);
var redefine = __webpack_require__(18);
var ctx = __webpack_require__(23);
var PROTOTYPE = 'prototype';

var $export = function (type, name, source) {
  var IS_FORCED = type & $export.F;
  var IS_GLOBAL = type & $export.G;
  var IS_STATIC = type & $export.S;
  var IS_PROTO = type & $export.P;
  var IS_BIND = type & $export.B;
  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE];
  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});
  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});
  var key, own, out, exp;
  if (IS_GLOBAL) source = name;
  for (key in source) {
    // contains in native
    own = !IS_FORCED && target && target[key] !== undefined;
    // export native or passed
    out = (own ? target : source)[key];
    // bind timers to global for call from export context
    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;
    // extend global
    if (target) redefine(target, key, out, type & $export.U);
    // export
    if (exports[key] != out) hide(exports, key, exp);
    if (IS_PROTO && expProto[key] != out) expProto[key] = out;
  }
};
global.core = core;
// type bitmap
$export.F = 1;   // forced
$export.G = 2;   // global
$export.S = 4;   // static
$export.P = 8;   // proto
$export.B = 16;  // bind
$export.W = 32;  // wrap
$export.U = 64;  // safe
$export.R = 128; // real proto method for `library`
module.exports = $export;


/***/ }),
/* 1 */
/***/ (function(module, exports) {

module.exports = React;

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Store_1 = __webpack_require__(156);
//import { browserHistory } from 'react-router';
var Board_1 = __webpack_require__(157);
var $ = __webpack_require__(35);
var Actions_1 = __webpack_require__(36);
var Constant_1 = __webpack_require__(83);
function getBoardTopicAsync(curPage, boardId, totalTopicCount) {
    return __awaiter(this, void 0, void 0, function () {
        var startPage, endPage, headers, topicNumberInPage, boardtopics, url, response, data, i, e_1;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 4, , 5]);
                    startPage = (curPage - 1) * 20;
                    endPage = curPage * 20 - 1;
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    topicNumberInPage = void 0;
                    if (curPage * 20 <= totalTopicCount) {
                        topicNumberInPage = 20;
                    }
                    else if (curPage === 1 && totalTopicCount < 19) {
                        topicNumberInPage = totalTopicCount;
                    }
                    else {
                        topicNumberInPage = (totalTopicCount - (curPage - 1) * 20);
                    }
                    boardtopics = [];
                    url = "/Board/" + boardId + "/topic?from=" + startPage + "&size=" + topicNumberInPage;
                    return [4 /*yield*/, cc98Fetch(url, { headers: headers })];
                case 2:
                    response = _a.sent();
                    //无权限进版面
                    switch (response.status) {
                        case 401:
                            return [2 /*return*/, 'unauthorized'];
                        case 404:
                            return [2 /*return*/, 'not found'];
                    }
                    return [4 /*yield*/, response.json()];
                case 3:
                    data = _a.sent();
                    for (i = 0; i < topicNumberInPage; i++) {
                        boardtopics[i] = __assign({}, data[i], { replyCount: data[i].replyCount || 0 });
                    }
                    return [2 /*return*/, boardtopics];
                case 4:
                    e_1 = _a.sent();
                    console.error(e_1);
                    return [3 /*break*/, 5];
                case 5: return [2 /*return*/];
            }
        });
    });
}
exports.getBoardTopicAsync = getBoardTopicAsync;
function getTopic(topicid) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, response, data, topicMessage, likeInfo, awardInfo, userMesJson, anonymousUserName, purl, userMesJson, e_2;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 9, , 10]);
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    return [4 /*yield*/, cc98Fetch("/Topic/" + topicid + "/post?from=0&size=1", {
                            headers: headers
                        })];
                case 2:
                    response = _a.sent();
                    return [4 /*yield*/, response.json()];
                case 3:
                    data = _a.sent();
                    topicMessage = null;
                    return [4 /*yield*/, refreshLikeState(topicid, data[0].id)];
                case 4:
                    likeInfo = _a.sent();
                    return [4 /*yield*/, getAwardInfo(data[0].id)];
                case 5:
                    awardInfo = _a.sent();
                    if (!(data[0].isAnonymous != true)) return [3 /*break*/, 7];
                    return [4 /*yield*/, getUserInfo(data[0].userId)];
                case 6:
                    userMesJson = _a.sent();
                    topicMessage = __assign({}, data[0], { userInfo: userMesJson, postId: data[0].id, likeInfo: likeInfo, awardInfo: awardInfo });
                    return [3 /*break*/, 8];
                case 7:
                    anonymousUserName = "\u533F\u540D" + data[0].userName.toUpperCase();
                    purl = 'https://www.cc98.org/pic/anonymous.gif';
                    userMesJson = { name: anonymousUserName, portraitUrl: purl, id: null, privilege: '匿名用户', popularity: 0, signatureCode: "", postCount: 0 };
                    topicMessage = __assign({}, data[0], { userInfo: userMesJson, postId: data[0].id, isAnonymous: true, likeInfo: likeInfo, awardInfo: awardInfo });
                    _a.label = 8;
                case 8: return [2 /*return*/, topicMessage];
                case 9:
                    e_2 = _a.sent();
                    return [3 /*break*/, 10];
                case 10: return [2 /*return*/];
            }
        });
    });
}
exports.getTopic = getTopic;
function getTopicContent(topicid, curPage, replyCount) {
    return __awaiter(this, void 0, void 0, function () {
        var startPage, endPage, headers, topic, _a, content, post, topicNumberInPage, i, likeInfo, awardInfo, userMesJson, purl, anonymousUserName, userMesJson, userMesJson, e_3;
        return __generator(this, function (_b) {
            switch (_b.label) {
                case 0:
                    _b.trys.push([0, 14, , 15]);
                    startPage = (curPage - 1) * 10;
                    endPage = curPage * 10 - 1;
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _b.sent();
                    if (!(curPage != 1)) return [3 /*break*/, 3];
                    return [4 /*yield*/, cc98Fetch("/Topic/" + topicid + "/post?from=" + startPage + "&size=10", { headers: headers })];
                case 2:
                    _a = _b.sent();
                    return [3 /*break*/, 5];
                case 3: return [4 /*yield*/, cc98Fetch("/Topic/" + topicid + "/post?from=1&size=9", { headers: headers })];
                case 4:
                    _a = _b.sent();
                    _b.label = 5;
                case 5:
                    topic = _a;
                    console.log(topicid);
                    console.log(startPage);
                    console.log("status" + topic.status);
                    return [4 /*yield*/, topic.json()];
                case 6:
                    content = _b.sent();
                    console.log("1");
                    console.log(content);
                    post = [];
                    topicNumberInPage = void 0;
                    if (curPage != 1 && curPage * 10 <= replyCount) {
                        topicNumberInPage = 10;
                    }
                    else if (curPage == 1 && replyCount >= 9) {
                        topicNumberInPage = 9;
                    }
                    else if (curPage == 1 && replyCount < 9) {
                        topicNumberInPage = replyCount;
                    }
                    else {
                        topicNumberInPage = (replyCount - (curPage - 1) * 10 + 1);
                    }
                    i = 0;
                    _b.label = 7;
                case 7:
                    if (!(i < topicNumberInPage)) return [3 /*break*/, 13];
                    return [4 /*yield*/, refreshLikeState(topicid, content[i].id)];
                case 8:
                    likeInfo = _b.sent();
                    return [4 /*yield*/, getAwardInfo(content[i].id)];
                case 9:
                    awardInfo = _b.sent();
                    if (!(content[i].isAnonymous != true && content[i].isDeleted != true)) return [3 /*break*/, 11];
                    return [4 /*yield*/, getUserInfo(content[i].userId)];
                case 10:
                    userMesJson = _b.sent();
                    post[i] = __assign({}, content[i], { userInfo: userMesJson, postId: content[i].id, likeInfo: likeInfo, awardInfo: awardInfo });
                    return [3 /*break*/, 12];
                case 11:
                    if (content[i].isAnonymous == true) {
                        purl = 'https://www.cc98.org/pic/anonymous.gif';
                        anonymousUserName = "\u533F\u540D" + content[i].userName.toUpperCase();
                        userMesJson = { name: anonymousUserName, portraitUrl: purl, id: null, privilege: '匿名用户', popularity: 0, signatureCode: null, postCount: 0 };
                        post[i] = __assign({}, content[i], { userInfo: userMesJson, postId: content[i].id, isAnonymous: true, likeInfo: likeInfo, awardInfo: awardInfo });
                    }
                    else {
                        userMesJson = { name: '98Deleter', portraitUrl: 'http://www.cc98.org/images/policeM.png', id: null, privilege: '匿名用户', popularity: 0, signatureCode: null, postCount: 0 };
                        post[i] = __assign({}, content[i], { postId: content[i].id, isAnonymous: false, isDeleted: true, content: "该贴已被my cc98, my home", likeInfo: likeInfo, awardInfo: awardInfo });
                    }
                    _b.label = 12;
                case 12:
                    i++;
                    return [3 /*break*/, 7];
                case 13:
                    console.log("2");
                    return [2 /*return*/, post];
                case 14:
                    e_3 = _b.sent();
                    console.error(e_3);
                    return [3 /*break*/, 15];
                case 15: return [2 /*return*/];
            }
        });
    });
}
exports.getTopicContent = getTopicContent;
function like(topicid, postid, router) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, content, response, data, e_4;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 4, , 5]);
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", "application/json");
                    content = "1";
                    return [4 /*yield*/, cc98Fetch("/post/" + postid + "/like", { method: "PUT", headers: headers, body: content })];
                case 2:
                    response = _a.sent();
                    if (response.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response.status === 403) {
                        window.location.href = "/status/OperationForbidden";
                    }
                    if (response.status === 404) {
                        window.location.href = "/status/NotFoundTopic";
                    }
                    if (response.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, response.json()];
                case 3:
                    data = _a.sent();
                    return [2 /*return*/, data];
                case 4:
                    e_4 = _a.sent();
                    return [3 /*break*/, 5];
                case 5: return [2 /*return*/];
            }
        });
    });
}
exports.like = like;
function dislike(topicid, postid, router) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, content, response, data, e_5;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 4, , 5]);
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", "application/json");
                    content = "2";
                    return [4 /*yield*/, cc98Fetch("/post/" + postid + "/like", { method: "PUT", headers: headers, body: content })];
                case 2:
                    response = _a.sent();
                    if (response.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response.status === 403) {
                        window.location.href = "/status/OperationForbidden";
                    }
                    if (response.status === 404) {
                        window.location.href = "/status/NotFoundTopic";
                    }
                    if (response.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, response.json()];
                case 3:
                    data = _a.sent();
                    return [2 /*return*/, data];
                case 4:
                    e_5 = _a.sent();
                    return [3 /*break*/, 5];
                case 5: return [2 /*return*/];
            }
        });
    });
}
exports.dislike = dislike;
function getLikeStateAndCount(topicid, postid, router) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, response, data, e_6;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 4, , 5]);
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    return [4 /*yield*/, cc98Fetch("/post/" + postid + "/like", { headers: headers })];
                case 2:
                    response = _a.sent();
                    if (response.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response.status === 403) {
                        window.location.href = "/status/OperationForbidden";
                    }
                    if (response.status === 404) {
                        window.location.href = "/status/NotFoundTopic";
                    }
                    if (response.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, response.json()];
                case 3:
                    data = _a.sent();
                    return [2 /*return*/, data];
                case 4:
                    e_6 = _a.sent();
                    return [3 /*break*/, 5];
                case 5: return [2 /*return*/];
            }
        });
    });
}
exports.getLikeStateAndCount = getLikeStateAndCount;
function getHotReplyContent(topicid) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, response, content, post, topicNumberInPage, i, likeInfo, awardInfo, userMesResponse, userMesJson, purl, anonymousUserName, anonymousLastReplierName, userMesJson, e_7;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 12, , 13]);
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    return [4 /*yield*/, cc98Fetch("/Topic/" + topicid + "/hot-post", { headers: headers })];
                case 2:
                    response = _a.sent();
                    return [4 /*yield*/, response.json()];
                case 3:
                    content = _a.sent();
                    post = [];
                    topicNumberInPage = content.length;
                    i = 0;
                    _a.label = 4;
                case 4:
                    if (!(i < topicNumberInPage)) return [3 /*break*/, 11];
                    return [4 /*yield*/, refreshLikeState(topicid, content[i].id)];
                case 5:
                    likeInfo = _a.sent();
                    return [4 /*yield*/, getAwardInfo(content[i].id)];
                case 6:
                    awardInfo = _a.sent();
                    if (!(content[i].isAnonymous != true)) return [3 /*break*/, 9];
                    return [4 /*yield*/, cc98Fetch("/user/name/" + content[i].userName)];
                case 7:
                    userMesResponse = _a.sent();
                    return [4 /*yield*/, userMesResponse.json()];
                case 8:
                    userMesJson = _a.sent();
                    post[i] = __assign({}, content[i], { userInfo: userMesJson, postId: content[i].id, likeInfo: likeInfo, awardInfo: awardInfo });
                    return [3 /*break*/, 10];
                case 9:
                    purl = 'https://www.cc98.org/pic/anonymous.gif';
                    anonymousUserName = "\u533F\u540D" + content[i].userName.toUpperCase();
                    anonymousLastReplierName = "\u533F\u540D" + content[i].lastUpdateAuthor.toUpperCase();
                    userMesJson = { name: anonymousUserName, portraitUrl: purl, id: null, privilege: '匿名用户', popularity: 0, signatureCode: null, postCount: 0 };
                    post[i] = __assign({}, content[i], { userInfo: userMesJson, postId: content[i].id, likeInfo: likeInfo, awardInfo: awardInfo });
                    _a.label = 10;
                case 10:
                    i++;
                    return [3 /*break*/, 4];
                case 11: return [2 /*return*/, post];
                case 12:
                    e_7 = _a.sent();
                    return [3 /*break*/, 13];
                case 13: return [2 /*return*/];
            }
        });
    });
}
exports.getHotReplyContent = getHotReplyContent;
function getListPager(totalPage) {
    if (totalPage === 1) {
        return [];
    }
    else if (totalPage === 2) {
        return [1, 2];
    }
    else if (totalPage === 3) {
        return [1, 2, 3];
    }
    else if (totalPage === 4) {
        return [1, 2, 3, 4];
    }
    else if (totalPage === 5) {
        return [1, 2, 3, 4, 5];
    }
    else if (totalPage === 6) {
        return [1, 2, 3, 4, 5, 6];
    }
    else if (totalPage === 7) {
        return [1, 2, 3, 4, 5, 6, 7];
    }
    else {
        return [1, 2, 3, 4, -1, totalPage - 3, totalPage - 2, totalPage - 1];
    }
}
exports.getListPager = getListPager;
function convertHotTopic(item) {
    return React.createElement(Board_1.TopicTitleAndContent, { key: item.id, title: item.title, userName: item.userName, id: item.id, userId: item.userId, lastPostTime: item.lastPostTime, lastPostUser: item.lastPostUser, likeCount: item.likeCount, dislikeCount: item.dislikeCount, replyCount: item.replyCount, highlightInfo: item.highlightInfo, topState: item.topState, state: item.state, hitCount: item.hitCount });
}
exports.convertHotTopic = convertHotTopic;
function getPager(curPage, totalPage) {
    if (!curPage) {
        curPage = 1;
    }
    var pages = [];
    if (totalPage == 1) {
        pages = [1];
    }
    else if (totalPage < 10 && totalPage > 1) {
        if (curPage == 1) {
            var i = void 0;
            for (i = 0; i < totalPage; i++) {
                pages[i] = i + 1;
            }
            pages[i] = -2;
            pages[i + 1] = -4;
        }
        else if (curPage == 2) {
            var i = void 0;
            for (i = 1; i <= totalPage; i++) {
                pages[i] = i;
            }
            pages[0] = -1;
            pages[i] = -2;
            pages[i + 1] = -4;
        }
        else if (curPage != totalPage) {
            var i = void 0;
            for (i = 2; i <= totalPage + 1; i++) {
                pages[i] = i - 1;
            }
            pages[0] = -3;
            pages[1] = -1;
            pages[i] = -2;
            pages[i + 1] = -4;
        }
        else {
            var i = void 0;
            for (i = 2; i <= totalPage + 1; i++) {
                pages[i] = i - 1;
            }
            pages[0] = -3;
            pages[1] = -1;
        }
    }
    else {
        if (curPage + 5 <= totalPage) {
            if (curPage == 1) {
                pages = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, -2, -4];
            }
            else if (curPage > 1 && curPage < 6) {
                pages = [-3, -1, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, -2, -4];
            }
            else {
                pages = [-3, -1, curPage - 4, curPage - 3, curPage - 2, curPage - 1, curPage, curPage + 1, curPage + 2, curPage + 3, curPage + 4, curPage + 5, -2, -4];
            }
        }
        else if (curPage + 5 > totalPage && curPage != totalPage) {
            return [-3, -1, totalPage - 9, totalPage - 8, totalPage - 7, totalPage - 6, totalPage - 5, totalPage - 4, totalPage - 3, totalPage - 2, totalPage - 1, totalPage, -2, -4];
        }
        else if (curPage == totalPage) {
            return [-3, -1, totalPage - 9, totalPage - 8, totalPage - 7, totalPage - 6, totalPage - 5, totalPage - 4, totalPage - 3, totalPage - 2, totalPage - 1, totalPage];
        }
    }
    return pages;
}
exports.getPager = getPager;
function getCurUserTopic(topicid, userId, router) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, response, data, userMesResponse, userMesJson, e_8;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 6, , 7]);
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    return [4 /*yield*/, cc98Fetch("/post/topic/user?topicid=" + topicid + "&userid=" + userId + "&from=0&size=1", { headers: headers })];
                case 2:
                    response = _a.sent();
                    if (response.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response.status === 404) {
                        window.location.href = "/status/NotFoundTopic";
                    }
                    if (response.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, response.json()];
                case 3:
                    data = _a.sent();
                    return [4 /*yield*/, cc98Fetch("/user/name/" + data[0].userName)];
                case 4:
                    userMesResponse = _a.sent();
                    if (userMesResponse.status === 404) {
                        window.location.href = "/status/NotFoundUser";
                    }
                    if (userMesResponse.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, userMesResponse.json()];
                case 5:
                    userMesJson = _a.sent();
                    data[0].userImgUrl = userMesJson.portraitUrl;
                    return [2 /*return*/, data[0]];
                case 6:
                    e_8 = _a.sent();
                    return [3 /*break*/, 7];
                case 7: return [2 /*return*/];
            }
        });
    });
}
exports.getCurUserTopic = getCurUserTopic;
function getCurUserTopicContent(topicid, curPage, userName, userId) {
    return __awaiter(this, void 0, void 0, function () {
        var topicMessage, start, isUserPoster, token, headers, topic, content, post, topicNumberInPage, replyCount, i, likeInfo, awardInfo, userMesJson, purl, anonymousUserName, userMesJson, e_9;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 12, , 13]);
                    return [4 /*yield*/, getTopic(topicid)];
                case 1:
                    topicMessage = _a.sent();
                    start = void 0;
                    isUserPoster = void 0;
                    if (topicMessage.userName === userName) {
                        isUserPoster = true;
                        if (curPage === 1)
                            start = (curPage - 1) * 10 + 1;
                        else
                            start = (curPage - 1) * 10;
                    }
                    else {
                        isUserPoster = false;
                        start = (curPage - 1) * 10;
                    }
                    return [4 /*yield*/, getToken()];
                case 2:
                    token = _a.sent();
                    headers = new Headers();
                    headers.append('Authorization', token);
                    return [4 /*yield*/, cc98Fetch("/Post/topic/user?topicid=" + topicid + "&userId=" + userId + "&from=" + start + "&size=10", { headers: headers })];
                case 3:
                    topic = _a.sent();
                    return [4 /*yield*/, topic.json()];
                case 4:
                    content = _a.sent();
                    post = [];
                    topicNumberInPage = void 0;
                    replyCount = content[0].count;
                    if (curPage !== 1 && curPage * 10 <= replyCount) {
                        topicNumberInPage = 10;
                    }
                    else if (curPage === 1 && replyCount >= 9 && isUserPoster == true) {
                        topicNumberInPage = 9;
                    }
                    else if (curPage === 1 && replyCount >= 9 && isUserPoster == false) {
                        topicNumberInPage = 10;
                    }
                    else if (curPage === 1 && replyCount < 9) {
                        topicNumberInPage = replyCount;
                    }
                    else {
                        topicNumberInPage = (replyCount - (curPage - 1) * 10);
                    }
                    i = 0;
                    _a.label = 5;
                case 5:
                    if (!(i < topicNumberInPage)) return [3 /*break*/, 11];
                    return [4 /*yield*/, refreshLikeState(topicid, content[i].id)];
                case 6:
                    likeInfo = _a.sent();
                    return [4 /*yield*/, getAwardInfo(content[i].id)];
                case 7:
                    awardInfo = _a.sent();
                    if (!(content[i].isAnonymous != true)) return [3 /*break*/, 9];
                    return [4 /*yield*/, getUserInfo(content[i].userId)];
                case 8:
                    userMesJson = _a.sent();
                    post[i] = __assign({}, content[i], { userInfo: userMesJson, postId: content[i].id, likeInfo: likeInfo, awardInfo: awardInfo });
                    return [3 /*break*/, 10];
                case 9:
                    purl = 'https://www.cc98.org/pic/anonymous.gif';
                    anonymousUserName = "\u533F\u540D" + content[i].userName.toUpperCase();
                    userMesJson = { name: anonymousUserName, portraitUrl: purl, id: null, privilege: '匿名用户', popularity: 0, signatureCode: null, postCount: 0 };
                    post[i] = __assign({}, content[i], { userInfo: userMesJson, likeInfo: likeInfo, awardInfo: awardInfo });
                    _a.label = 10;
                case 10:
                    i++;
                    return [3 /*break*/, 5];
                case 11: return [2 /*return*/, post];
                case 12:
                    e_9 = _a.sent();
                    return [3 /*break*/, 13];
                case 13: return [2 /*return*/];
            }
        });
    });
}
exports.getCurUserTopicContent = getCurUserTopicContent;
/**
 * 获取全站新帖
 * @param curPage
 */
function getAllNewTopic(from, router) {
    return __awaiter(this, void 0, void 0, function () {
        var size, headers, response, newTopic, _a, _b, _i, i, userFan0, userFan1, userInfo0, userInfo1, _c, index, index, index, index, _d, _e, e_10;
        return __generator(this, function (_f) {
            switch (_f.label) {
                case 0:
                    _f.trys.push([0, 16, , 17]);
                    size = 20;
                    if (from > 80) {
                        size = 100 - from;
                    }
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _f.sent();
                    return [4 /*yield*/, cc98Fetch("/topic/new?from=" + from + "&size=" + size, { headers: headers })];
                case 2:
                    response = _f.sent();
                    if (response.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response.status === 403) {
                        window.location.href = "/status/OperationForbidden";
                    }
                    if (response.status === 404) {
                        window.location.href = "/status/NotFoundTopic";
                    }
                    if (response.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, response.json()];
                case 3:
                    newTopic = _f.sent();
                    _a = [];
                    for (_b in newTopic)
                        _a.push(_b);
                    _i = 0;
                    _f.label = 4;
                case 4:
                    if (!(_i < _a.length)) return [3 /*break*/, 15];
                    i = _a[_i];
                    if (!newTopic[i].userId) return [3 /*break*/, 10];
                    return [4 /*yield*/, cc98Fetch("/user/follower/count?userid=" + newTopic[i].userId)];
                case 5:
                    userFan0 = _f.sent();
                    if (userFan0.status === 404) {
                        window.location.href = "/status/NotFoundUser";
                    }
                    if (userFan0.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, userFan0.json()];
                case 6:
                    userFan1 = _f.sent();
                    newTopic[i].fanCount = userFan1;
                    return [4 /*yield*/, cc98Fetch("/user/basic/" + newTopic[i].userId)];
                case 7:
                    userInfo0 = _f.sent();
                    if (userInfo0.status === 404) {
                        window.location.href = "/status/NotFoundUser";
                    }
                    if (userInfo0.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, userInfo0.json()];
                case 8:
                    userInfo1 = _f.sent();
                    newTopic[i].portraitUrl = userInfo1.portraitUrl;
                    //获取所在版面名称
                    _c = newTopic[i];
                    return [4 /*yield*/, getBoardName(newTopic[i].boardId)];
                case 9:
                    //获取所在版面名称
                    _c.boardName = _f.sent();
                    return [3 /*break*/, 11];
                case 10:
                    newTopic[i].fanCount = 0;
                    newTopic[i].portraitUrl = "http://www.cc98.org/pic/anonymous.gif";
                    newTopic[i].userName = "匿名用户";
                    newTopic[i].boardName = "心灵之约";
                    _f.label = 11;
                case 11:
                    //时间转换
                    newTopic[i].time = transerRecentTime(newTopic[i].time);
                    newTopic[i].lastPostTime = transerRecentTime(newTopic[i].lastPostTime);
                    //阅读数转换
                    if (newTopic[i].hitCount > 10000) {
                        if (newTopic[i].hitCount > 100000) {
                            index = parseInt("" + newTopic[i].hitCount / 10000);
                            newTopic[i].hitCount = index + "\u4E07";
                        }
                        else {
                            index = parseInt("" + newTopic[i].hitCount / 1000) / 10;
                            newTopic[i].hitCount = index + "\u4E07";
                        }
                    }
                    //回复数转换
                    if (newTopic[i].replyCount > 10000) {
                        if (newTopic[i].replyCount > 100000) {
                            index = parseInt("" + newTopic[i].replyCount / 10000);
                            newTopic[i].replyCount = index + "\u4E07";
                        }
                        else {
                            index = parseInt("" + newTopic[i].replyCount / 1000) / 10;
                            newTopic[i].replyCount = index + "\u4E07";
                        }
                    }
                    if (!newTopic[i].tag1) return [3 /*break*/, 14];
                    _d = newTopic[i];
                    return [4 /*yield*/, getTagNamebyId(newTopic[i].tag1)];
                case 12:
                    _d.tag1 = _f.sent();
                    if (!newTopic[i].tag2) return [3 /*break*/, 14];
                    _e = newTopic[i];
                    return [4 /*yield*/, getTagNamebyId(newTopic[i].tag2)];
                case 13:
                    _e.tag2 = _f.sent();
                    _f.label = 14;
                case 14:
                    _i++;
                    return [3 /*break*/, 4];
                case 15: return [2 /*return*/, newTopic];
                case 16:
                    e_10 = _f.sent();
                    return [3 /*break*/, 17];
                case 17: return [2 /*return*/];
            }
        });
    });
}
exports.getAllNewTopic = getAllNewTopic;
/**
 * 获取关注帖子,boardId == -1为关注用户帖子, boardId === 0 为全部关注版面帖子, boardId > 0则为对应版面帖子
 * @param curPage
 */
function getFocusTopic(boardId, boardName, from, router) {
    return __awaiter(this, void 0, void 0, function () {
        var size, headers, response, newTopic, _a, _b, _i, i, userFan0, userFan1, userInfo0, userInfo1, _c, index, index, index, index, _d, _e, e_11;
        return __generator(this, function (_f) {
            switch (_f.label) {
                case 0:
                    _f.trys.push([0, 21, , 22]);
                    size = 20;
                    if (from > 80) {
                        size = 100 - from;
                    }
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _f.sent();
                    response = void 0;
                    if (!(boardId === -1)) return [3 /*break*/, 3];
                    return [4 /*yield*/, cc98Fetch("/me/followee/topic?from=" + from + "&size=" + size, { headers: headers })];
                case 2:
                    response = _f.sent();
                    return [3 /*break*/, 7];
                case 3:
                    if (!(boardId === 0)) return [3 /*break*/, 5];
                    return [4 /*yield*/, cc98Fetch("/me/custom-board/topic?from=" + from + "&size=" + size, { headers: headers })];
                case 4:
                    response = _f.sent();
                    return [3 /*break*/, 7];
                case 5: return [4 /*yield*/, cc98Fetch("/board/" + boardId + "/topic?from=" + from + "&size=" + size, { headers: headers })];
                case 6:
                    response = _f.sent();
                    _f.label = 7;
                case 7:
                    if (response.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response.status === 403) {
                        window.location.href = "/status/OperationForbidden";
                    }
                    if (response.status === 404) {
                        window.location.href = "/status/NotFoundTopic";
                    }
                    if (response.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, response.json()];
                case 8:
                    newTopic = _f.sent();
                    console.log("最后回复", newTopic);
                    _a = [];
                    for (_b in newTopic)
                        _a.push(_b);
                    _i = 0;
                    _f.label = 9;
                case 9:
                    if (!(_i < _a.length)) return [3 /*break*/, 20];
                    i = _a[_i];
                    if (!newTopic[i].userId) return [3 /*break*/, 15];
                    return [4 /*yield*/, cc98Fetch("/user/follower/count?userid=" + newTopic[i].userId)];
                case 10:
                    userFan0 = _f.sent();
                    if (userFan0.status === 404) {
                        window.location.href = "/status/NotFoundUser";
                    }
                    if (userFan0.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, userFan0.json()];
                case 11:
                    userFan1 = _f.sent();
                    newTopic[i].fanCount = userFan1;
                    return [4 /*yield*/, cc98Fetch("/user/basic/" + newTopic[i].userId)];
                case 12:
                    userInfo0 = _f.sent();
                    if (userInfo0.status === 404) {
                        window.location.href = "/status/NotFoundUser";
                    }
                    if (userInfo0.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, userInfo0.json()];
                case 13:
                    userInfo1 = _f.sent();
                    newTopic[i].portraitUrl = userInfo1.portraitUrl;
                    //获取所在版面名称
                    _c = newTopic[i];
                    return [4 /*yield*/, getBoardName(newTopic[i].boardId)];
                case 14:
                    //获取所在版面名称
                    _c.boardName = _f.sent();
                    return [3 /*break*/, 16];
                case 15:
                    newTopic[i].fanCount = 0;
                    newTopic[i].portraitUrl = "http://www.cc98.org/pic/anonymous.gif";
                    newTopic[i].userName = "匿名用户";
                    newTopic[i].boardName = "心灵之约";
                    _f.label = 16;
                case 16:
                    //时间转换
                    newTopic[i].time = transerRecentTime(newTopic[i].time);
                    newTopic[i].lastPostTime = transerRecentTime(newTopic[i].lastPostTime);
                    //阅读数转换
                    if (newTopic[i].hitCount > 10000) {
                        if (newTopic[i].hitCount > 100000) {
                            index = parseInt("" + newTopic[i].hitCount / 10000);
                            newTopic[i].hitCount = index + "\u4E07";
                        }
                        else {
                            index = parseInt("" + newTopic[i].hitCount / 1000) / 10;
                            newTopic[i].hitCount = index + "\u4E07";
                        }
                    }
                    //回复数转换
                    if (newTopic[i].replyCount > 10000) {
                        if (newTopic[i].replyCount > 100000) {
                            index = parseInt("" + newTopic[i].replyCount / 10000);
                            newTopic[i].replyCount = index + "\u4E07";
                        }
                        else {
                            index = parseInt("" + newTopic[i].replyCount / 1000) / 10;
                            newTopic[i].replyCount = index + "\u4E07";
                        }
                    }
                    if (!newTopic[i].tag1) return [3 /*break*/, 19];
                    _d = newTopic[i];
                    return [4 /*yield*/, getTagNamebyId(newTopic[i].tag1)];
                case 17:
                    _d.tag1 = _f.sent();
                    if (!newTopic[i].tag2) return [3 /*break*/, 19];
                    _e = newTopic[i];
                    return [4 /*yield*/, getTagNamebyId(newTopic[i].tag2)];
                case 18:
                    _e.tag2 = _f.sent();
                    _f.label = 19;
                case 19:
                    _i++;
                    return [3 /*break*/, 9];
                case 20: return [2 /*return*/, newTopic];
                case 21:
                    e_11 = _f.sent();
                    return [3 /*break*/, 22];
                case 22: return [2 /*return*/];
            }
        });
    });
}
exports.getFocusTopic = getFocusTopic;
//与缓存相关的函数
function setStorage(key, value) {
    var v = value;
    if (typeof v == 'object') {
        v = JSON.stringify(v);
        v = "obj-" + v;
    }
    else {
        v = "str-" + v;
    }
    sessionStorage.setItem(key, v);
}
exports.setStorage = setStorage;
function getStorage(key) {
    var v = sessionStorage.getItem(key);
    if (!v) {
        return;
    }
    if (v.indexOf('obj-') === 0) {
        v = v.slice(4);
        return JSON.parse(v);
    }
    else if (v.indexOf('str-') === 0) {
        return v.slice(4);
    }
}
exports.getStorage = getStorage;
function setLocalStorage(key, value, expireIn) {
    if (expireIn === void 0) { expireIn = 0; }
    var v = value;
    if (typeof v == 'object') {
        v = JSON.stringify(v);
        v = "obj-" + v;
    }
    else {
        v = "str-" + v;
    }
    localStorage.setItem(key, v);
    if (expireIn !== 0) {
        var now = new Date().getTime();
        var expirationTime = now + expireIn * 1000;
        localStorage.setItem(key + "_expirationTime", expirationTime.toString().slice(0, expirationTime.toString().length - 3));
    }
    else {
        localStorage.removeItem(key + "_expirationTime");
    }
}
exports.setLocalStorage = setLocalStorage;
function getLocalStorage(key) {
    var v = localStorage.getItem(key);
    var expirationTime = localStorage.getItem(key + "_expirationTime");
    if (expirationTime) {
        var now = new Date().getTime();
        var time = Number.parseInt(expirationTime) * 1000;
        if (now > time) {
            localStorage.removeItem(key);
            return;
        }
    }
    if (!v) {
        return;
    }
    if (v.indexOf('obj-') === 0) {
        v = v.slice(4);
        return JSON.parse(v);
    }
    else if (v.indexOf('str-') === 0) {
        return v.slice(4);
    }
}
exports.getLocalStorage = getLocalStorage;
function removeLocalStorage(key) {
    if (key != 'all') {
        localStorage.removeItem(key);
    }
    else {
        localStorage.clear();
    }
    return;
}
exports.removeLocalStorage = removeLocalStorage;
function removeStorage(key) {
    if (key != 'all') {
        sessionStorage.removeItem(key);
    }
    else {
        sessionStorage.clear();
    }
    return;
}
exports.removeStorage = removeStorage;
/*
* 根据boardId返回boardName
*/
function getBoardName(boardId) {
    return __awaiter(this, void 0, void 0, function () {
        var boardName, token, headers, url, res, data, e_12;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 5, , 6]);
                    boardName = void 0;
                    boardName = getLocalStorage("boardId_" + boardId);
                    if (!!boardName) return [3 /*break*/, 4];
                    return [4 /*yield*/, getToken()];
                case 1:
                    token = _a.sent();
                    headers = new Headers();
                    headers.append('Authorization', token);
                    url = "/board/" + boardId;
                    return [4 /*yield*/, cc98Fetch(url, { headers: headers })];
                case 2:
                    res = _a.sent();
                    if (res.status === 404) {
                        window.location.href = "/status/NotFoundBoard";
                    }
                    if (res.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, res.json()];
                case 3:
                    data = _a.sent();
                    boardName = data.name;
                    setLocalStorage("boardId_" + boardId, boardName);
                    _a.label = 4;
                case 4: return [2 /*return*/, boardName];
                case 5:
                    e_12 = _a.sent();
                    return [3 /*break*/, 6];
                case 6: return [2 /*return*/];
            }
        });
    });
}
exports.getBoardName = getBoardName;
/*
* 返回用户是否登陆
*/
function isLogOn() {
    var token = getLocalStorage("userName");
    return !!token;
}
exports.isLogOn = isLogOn;
/*
* 获取最近N个联系人的信息
*/
function getRecentContact(from, size, router) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, response, recentContactId, url, i, response1, recentContact, i, e_13;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 6, , 7]);
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    console.log("开始获取联系人数据");
                    return [4 /*yield*/, cc98Fetch("/message/recent-contact-users?from=" + from + "&size=" + size, { headers: headers })];
                case 2:
                    response = _a.sent();
                    if (response.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response.status === 403) {
                        window.location.href = "/status/OperationForbidden";
                    }
                    if (response.status === 404) {
                        window.location.href = "/status/NotFoundTopic";
                    }
                    if (response.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, response.json()];
                case 3:
                    recentContactId = _a.sent();
                    console.log("开始获取联系人id数组", recentContactId);
                    url = "/user/basic";
                    for (i in recentContactId) {
                        if (i === "0") {
                            url = url + "?id=" + recentContactId[i].userId;
                        }
                        else {
                            url = url + "&id=" + recentContactId[i].userId;
                        }
                    }
                    return [4 /*yield*/, cc98Fetch(url)];
                case 4:
                    response1 = _a.sent();
                    if (response1.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response1.status === 403) {
                        window.location.href = "/status/OperationForbidden";
                    }
                    if (response1.status === 404) {
                        window.location.href = "/status/NotFoundTopic";
                    }
                    if (response1.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, response1.json()];
                case 5:
                    recentContact = _a.sent();
                    for (i in recentContact) {
                        recentContact[i].message = [];
                        recentContact[i].lastContent = recentContactId[i].lastContent;
                        recentContact[i].isRead = recentContactId[i].isRead;
                    }
                    console.log("接收到没有Message的列表");
                    console.log(recentContact);
                    return [2 /*return*/, recentContact];
                case 6:
                    e_13 = _a.sent();
                    window.location.href = ("/status/Disconnected");
                    return [3 /*break*/, 7];
                case 7: return [2 /*return*/];
            }
        });
    });
}
exports.getRecentContact = getRecentContact;
/*
* 获取最近N个联系人的信息
*/
function getRecentMessage(userId, from, size, router) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, response, response1, recentMessage, e_14;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 4, , 5]);
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    return [4 /*yield*/, cc98Fetch("/message/user/" + userId + "?from=" + from + "&size=" + size, { headers: headers })];
                case 2:
                    response = _a.sent();
                    if (response.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response.status === 403) {
                        window.location.href = "/status/OperationForbidden";
                    }
                    if (response.status === 404) {
                        window.location.href = "/status/NotFoundTopic";
                    }
                    if (response.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, response.json()];
                case 3:
                    response1 = _a.sent();
                    console.log("直接获取到的Message");
                    console.log(response1);
                    recentMessage = sortRecentMessage(response1);
                    return [2 /*return*/, recentMessage];
                case 4:
                    e_14 = _a.sent();
                    window.location.href = ("/status/Disconnected");
                    return [3 /*break*/, 5];
                case 5: return [2 /*return*/];
            }
        });
    });
}
exports.getRecentMessage = getRecentMessage;
/**
 * 处理最新消息列表，时间间隔短的消息只显示第一条消息的时间
 * @param recentMessage
 */
function sortRecentMessage(recentMessage) {
    console.log(recentMessage);
    if (recentMessage == [] || !recentMessage) {
        return recentMessage;
    }
    else {
        for (var i = 0; i < recentMessage.length; i++) {
            if (i + 1 == recentMessage.length) {
                recentMessage[i].showTime = true;
            }
            else if (transerTime(recentMessage[i].time) - transerTime(recentMessage[i + 1].time) < 60000) {
                recentMessage[i].showTime = false;
            }
            else {
                recentMessage[i].showTime = true;
            }
        }
        console.log("返回的recentMessage");
        console.log(recentMessage);
        return recentMessage;
    }
}
exports.sortRecentMessage = sortRecentMessage;
/**
 * api返回的UTC时间格式转换成时间戳的函数
 * @param time
 */
function transerTime(time) {
    var timestamp = new Date(time).getTime();
    return timestamp;
}
exports.transerTime = transerTime;
/**
 * api返回的UTC时间格式转换成"1分钟前，昨天18：45"这样的形式
 * @param time
 */
function transerRecentTime(time) {
    var thatDate = new Date(time);
    var thatTime = thatDate.getTime();
    var thisDate = new Date();
    var thisTime = new Date().getTime();
    var delta = (new Date(new Date().toLocaleDateString()).getTime() + 86400000 - thatTime) / 1000;
    var month = thatDate.getMonth() + 1;
    if (month < 10) {
        month = "0" + month;
    }
    var date = thatDate.getDate();
    if (date < 10) {
        date = "0" + date;
    }
    var hours = thatDate.getHours();
    if (hours < 10) {
        hours = "0" + hours;
    }
    var min = thatDate.getMinutes();
    if (min < 10) {
        min = "0" + min;
    }
    var sec = thatDate.getSeconds();
    if (sec < 10) {
        sec = "0" + sec;
    }
    if (delta > 259200) {
        var strTime = thatDate.getFullYear() + "-" + month + "-" + date + " " + hours + ":" + min + ":" + sec;
        return strTime;
    }
    else if (delta > 172800) {
        var strTime = hours + ":" + min + ":" + sec;
        return "\u524D\u5929 " + strTime;
    }
    else if (delta > 86400) {
        var strTime = hours + ":" + min + ":" + sec;
        return "\u6628\u5929 " + strTime;
    }
    else if (thisTime - thatTime > 3600) {
        var strTime = hours + ":" + min + ":" + sec;
        return "\u4ECA\u5929 " + strTime;
    }
    else {
        var min0 = (thisTime - thatTime) / 60;
        min = parseInt(min0);
        return min + "\u5206\u949F\u524D";
    }
}
exports.transerRecentTime = transerRecentTime;
/**
 * 对联系人列表重新排序，看是否有从其他页面发起的聊天
 * @param recentContact
 */
function sortContactList(recentContact, router) {
    return __awaiter(this, void 0, void 0, function () {
        var urlId, chatManId, response, chatMan, flag, e_15, _a, i, indexData, response, chatMan, flag, e_16, _b, chatContact, urlName, chatManName, response0, response1, flag, e_17, chatMan, _c, i, indexData, response0, response1, flag, e_18, chatMan, _d, chatContact;
        return __generator(this, function (_e) {
            switch (_e.label) {
                case 0:
                    urlId = location.href.match(/id=(\S+)/);
                    if (!urlId) return [3 /*break*/, 18];
                    chatManId = parseInt(urlId[1]);
                    if (!(!recentContact || recentContact.length === 0)) return [3 /*break*/, 8];
                    response = void 0;
                    chatMan = void 0;
                    flag = 1;
                    _e.label = 1;
                case 1:
                    _e.trys.push([1, 4, , 5]);
                    return [4 /*yield*/, cc98Fetch("/user/basic/" + chatManId)];
                case 2:
                    response = _e.sent();
                    if (response.status === 404) {
                        window.location.href = ("/status/NotFoundUser");
                    }
                    if (response.status === 500) {
                        window.location.href = ("/status/ServerError");
                    }
                    return [4 /*yield*/, response.json()];
                case 3:
                    chatMan = _e.sent();
                    return [3 /*break*/, 5];
                case 4:
                    e_15 = _e.sent();
                    window.location.href = ("/status/Disconnected");
                    flag = 0;
                    return [3 /*break*/, 5];
                case 5:
                    if (!(flag === 1)) return [3 /*break*/, 7];
                    _a = chatMan;
                    return [4 /*yield*/, getRecentMessage(chatMan.id, 0, 10, router)];
                case 6:
                    _a.message = _e.sent();
                    if (chatMan.message) {
                        chatMan.lastContent = chatMan.message[0];
                    }
                    chatMan.isRead = true;
                    recentContact = [chatMan];
                    _e.label = 7;
                case 7: return [3 /*break*/, 17];
                case 8:
                    //先看一下该聊天对象在不在联系人列表里
                    for (i = 0; i < recentContact.length; i++) {
                        if (recentContact[i].id == chatManId) {
                            break;
                        }
                    }
                    if (!(i == 0)) return [3 /*break*/, 9];
                    recentContact[0].isRead = true;
                    return [3 /*break*/, 17];
                case 9:
                    if (!(i < recentContact.length)) return [3 /*break*/, 10];
                    indexData = recentContact[i];
                    indexData.isRead = true;
                    recentContact.splice(i, 1);
                    recentContact.unshift(indexData);
                    return [3 /*break*/, 17];
                case 10:
                    response = void 0;
                    chatMan = void 0;
                    flag = 1;
                    _e.label = 11;
                case 11:
                    _e.trys.push([11, 14, , 15]);
                    return [4 /*yield*/, cc98Fetch("/user/basic/" + chatManId)];
                case 12:
                    response = _e.sent();
                    if (response.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response.status === 403) {
                        window.location.href = "/status/OperationForbidden";
                    }
                    if (response.status === 404) {
                        window.location.href = "/status/NotFoundTopic";
                    }
                    if (response.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, response.json()];
                case 13:
                    chatMan = _e.sent();
                    return [3 /*break*/, 15];
                case 14:
                    e_16 = _e.sent();
                    window.location.href = ("/status/Disconnected");
                    flag = 0;
                    return [3 /*break*/, 15];
                case 15:
                    if (!(flag === 1)) return [3 /*break*/, 17];
                    _b = chatMan;
                    return [4 /*yield*/, getRecentMessage(chatMan.id, 0, 10, router)];
                case 16:
                    _b.message = _e.sent();
                    if (chatMan.message) {
                        chatMan.lastContent = chatMan.message[0];
                    }
                    chatMan.isRead = true;
                    chatContact = [chatMan];
                    recentContact = chatContact.concat(recentContact);
                    _e.label = 17;
                case 17: return [3 /*break*/, 35];
                case 18:
                    urlName = location.href.match(/name=(\S+)/);
                    if (!urlName) return [3 /*break*/, 35];
                    chatManName = urlName[1];
                    if (!(!recentContact || recentContact.length === 0)) return [3 /*break*/, 26];
                    response0 = void 0;
                    response1 = void 0;
                    flag = 1;
                    _e.label = 19;
                case 19:
                    _e.trys.push([19, 22, , 23]);
                    return [4 /*yield*/, cc98Fetch("/user/name/" + chatManName)];
                case 20:
                    response0 = _e.sent();
                    if (response0.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response0.status === 403) {
                        window.location.href = "/status/OperationForbidden";
                    }
                    if (response0.status === 404) {
                        window.location.href = "/status/NotFoundTopic";
                    }
                    if (response0.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, response0.json()];
                case 21:
                    response1 = _e.sent();
                    return [3 /*break*/, 23];
                case 22:
                    e_17 = _e.sent();
                    window.location.href = ("/status/Disconnected");
                    flag = 0;
                    return [3 /*break*/, 23];
                case 23:
                    if (!(flag == 1)) return [3 /*break*/, 25];
                    chatMan = { id: response1.id, name: response1.name, portraitUrl: response1.portraitUrl, message: [], lastContent: '', isRead: true };
                    _c = chatMan;
                    return [4 /*yield*/, getRecentMessage(chatMan.id, 0, 10, router)];
                case 24:
                    _c.message = _e.sent();
                    if (chatMan.message) {
                        chatMan.lastContent = chatMan.message[0];
                    }
                    recentContact = [chatMan];
                    _e.label = 25;
                case 25: return [3 /*break*/, 35];
                case 26:
                    //先看一下该聊天对象在不在联系人列表里
                    for (i = 0; i < recentContact.length; i++) {
                        if (recentContact[i].name == chatManName) {
                            break;
                        }
                    }
                    if (!(i == 0)) return [3 /*break*/, 27];
                    return [3 /*break*/, 35];
                case 27:
                    if (!(i < recentContact.length)) return [3 /*break*/, 28];
                    indexData = recentContact[i];
                    recentContact.splice(i, 1);
                    recentContact.unshift(indexData);
                    return [3 /*break*/, 35];
                case 28:
                    response0 = void 0;
                    response1 = void 0;
                    flag = 1;
                    _e.label = 29;
                case 29:
                    _e.trys.push([29, 32, , 33]);
                    return [4 /*yield*/, cc98Fetch("/user/name/" + chatManName)];
                case 30:
                    response0 = _e.sent();
                    if (response0.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response0.status === 403) {
                        window.location.href = "/status/OperationForbidden";
                    }
                    if (response0.status === 404) {
                        window.location.href = "/status/NotFoundTopic";
                    }
                    if (response0.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, response0.json()];
                case 31:
                    response1 = _e.sent();
                    return [3 /*break*/, 33];
                case 32:
                    e_18 = _e.sent();
                    window.location.href = ("/status/Disconnected");
                    flag = 0;
                    return [3 /*break*/, 33];
                case 33:
                    if (!(flag == 1)) return [3 /*break*/, 35];
                    chatMan = { id: response1.id, name: response1.name, portraitUrl: response1.portraitUrl, message: [], lastContent: '', isRead: true };
                    _d = chatMan;
                    return [4 /*yield*/, getRecentMessage(chatMan.id, 0, 10, router)];
                case 34:
                    _d.message = _e.sent();
                    if (chatMan.message) {
                        chatMan.lastContent = chatMan.message[0];
                    }
                    chatContact = [chatMan];
                    recentContact = chatContact.concat(recentContact);
                    _e.label = 35;
                case 35: return [2 /*return*/, recentContact];
            }
        });
    });
}
exports.sortContactList = sortContactList;
/*export async function getTotalReplyCount(topicid, router) {
    try {
        let token = await await getToken();
        const headers = new Headers();
        headers.append('Authorization', token);
        const replyCountResponse = await cc98Fetch(`/Topic/${topicid}`, { headers });
        if (replyCountResponse.status === 401) {
            window.location.href = "/status/UnauthorizedTopic";
        }
        if (replyCountResponse.status === 404) {
            window.location.href = "/status/NotFoundTopic";
        }
        if (replyCountResponse.status === 500) {
            window.location.href = "/status/ServerError";
        }
        const replyCountJson = await replyCountResponse.json();
        const replyCount = replyCountJson.replyCount;
        if (replyCount >= 10) {
            return (replyCount - replyCount % 10) / 10 + 1;
        } else {
            return 1;
        }
    } catch (e) {
        //window.location.href = "/status/Disconnected";
    }
}
*/
function getUserDetails(userId) {
    return __awaiter(this, void 0, void 0, function () {
        var data, body, e_19;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 2, , 3]);
                    return [4 /*yield*/, getUserInfo(userId)];
                case 1:
                    data = _a.sent();
                    body = { portraitUrl: data.portraitUrl, userName: data.name, fanCount: data.fanCount, displayTitle: data.displayTitle, birthday: data.birthday, prestige: data.prestige, gender: data.gender, levelTitle: data.levelTitle, isFollowing: data.isFollowing };
                    return [2 /*return*/, body];
                case 2:
                    e_19 = _a.sent();
                    return [3 /*break*/, 3];
                case 3: return [2 /*return*/];
            }
        });
    });
}
exports.getUserDetails = getUserDetails;
function getLikeState(topicid, router) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, topic, postId, response, data, e_20;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 7, , 8]);
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    return [4 /*yield*/, getTopic(topicid)];
                case 2:
                    topic = _a.sent();
                    postId = topic.postId;
                    return [4 /*yield*/, cc98Fetch("/post/" + postId + "/like", { headers: headers })];
                case 3:
                    response = _a.sent();
                    if (response.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response.status === 403) {
                        window.location.href = "/status/OperationForbidden";
                    }
                    if (response.status === 404) {
                        window.location.href = "/status/NotFoundTopic";
                    }
                    if (!(response.status === 500)) return [3 /*break*/, 4];
                    window.location.href = "/status/ServerError";
                    return [3 /*break*/, 6];
                case 4: return [4 /*yield*/, response.json()];
                case 5:
                    data = _a.sent();
                    return [2 /*return*/, data];
                case 6: return [3 /*break*/, 8];
                case 7:
                    e_20 = _a.sent();
                    return [3 /*break*/, 8];
                case 8: return [2 /*return*/];
            }
        });
    });
}
exports.getLikeState = getLikeState;
function refreshLikeState(topicId, postId) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, response, data, e_21;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 4, , 5]);
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    return [4 /*yield*/, cc98Fetch("/post/" + postId + "/like", { headers: headers })];
                case 2:
                    response = _a.sent();
                    if (response.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response.status === 403) {
                        window.location.href = "/status/OperationForbidden";
                    }
                    if (response.status === 404) {
                        window.location.href = "/status/NotFoundTopic";
                    }
                    if (response.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, response.json()];
                case 3:
                    data = _a.sent();
                    return [2 /*return*/, data];
                case 4:
                    e_21 = _a.sent();
                    return [3 /*break*/, 5];
                case 5: return [2 /*return*/];
            }
        });
    });
}
exports.refreshLikeState = refreshLikeState;
function sendTopic(topicId, router) {
    return __awaiter(this, void 0, void 0, function () {
        var url, c, content, contentJson, token, myHeaders, mes, e_22;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 3, , 4]);
                    url = "/post/topic/" + topicId;
                    c = Constant_1.Constants.testEditor.getMarkdown();
                    content = {
                        content: c,
                        contentType: 1,
                        title: ""
                    };
                    contentJson = JSON.stringify(content);
                    return [4 /*yield*/, getToken()];
                case 1:
                    token = _a.sent();
                    myHeaders = new Headers();
                    myHeaders.append("Authorization", token);
                    myHeaders.append("Content-Type", 'application/json');
                    return [4 /*yield*/, cc98Fetch(url, {
                            method: 'POST',
                            headers: myHeaders,
                            body: contentJson
                        })];
                case 2:
                    mes = _a.sent();
                    if (mes.status === 401) {
                        window.location.href = "/status/Logout";
                    }
                    if (mes.status === 402) {
                        window.location.href = "/status/ContentNeeded";
                    }
                    if (mes.status === 403) {
                        window.location.href = "/status/OperationForbidden";
                    }
                    if (mes.status === 404) {
                        window.location.href = "/status/NotFoundTopic";
                    }
                    if (mes.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [3 /*break*/, 4];
                case 3:
                    e_22 = _a.sent();
                    return [3 /*break*/, 4];
                case 4: return [2 /*return*/];
            }
        });
    });
}
exports.sendTopic = sendTopic;
function getListTotalPage(totalTopicCount) {
    return (totalTopicCount - totalTopicCount % 20) / 20 + 1;
}
exports.getListTotalPage = getListTotalPage;
function getCurUserTotalReplyPage(topicId, userId, router) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, replyCountResponse, replyCountJson, replyCount, e_23;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 4, , 5]);
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    return [4 /*yield*/, cc98Fetch("/post/topic/user?topicid=" + topicId + "&userid=" + userId + "&from=0&size=1", { headers: headers })];
                case 2:
                    replyCountResponse = _a.sent();
                    if (replyCountResponse.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (replyCountResponse.status === 404) {
                        window.location.href = "/status/NotFoundBoard";
                    }
                    if (replyCountResponse.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, replyCountResponse.json()];
                case 3:
                    replyCountJson = _a.sent();
                    replyCount = replyCountJson[0].count;
                    if (replyCount > 10) {
                        return [2 /*return*/, (replyCount - replyCount % 10) / 10 + 1];
                    }
                    else {
                        return [2 /*return*/, 1];
                    }
                    return [3 /*break*/, 5];
                case 4:
                    e_23 = _a.sent();
                    return [3 /*break*/, 5];
                case 5: return [2 /*return*/];
            }
        });
    });
}
exports.getCurUserTotalReplyPage = getCurUserTotalReplyPage;
/**
 * 发送私信的函数
 * @param bodyContent
 */
function sendMessage(bodyContent, router) {
    return __awaiter(this, void 0, void 0, function () {
        var myHeaders, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    myHeaders = _a.sent();
                    myHeaders.append('content-type', 'application/json');
                    return [4 /*yield*/, cc98Fetch('/message', {
                            method: 'POST',
                            headers: myHeaders,
                            body: bodyContent
                        })];
                case 2:
                    response = _a.sent();
                    if (response.status === 401) {
                        window.location.href = "/status/Loggout";
                    }
                    if (response.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [2 /*return*/, response];
            }
        });
    });
}
exports.sendMessage = sendMessage;
/**
*滚动条在Y轴上的滚动距离,为isBottom()服务
*/
function getScrollTop() {
    var scrollTop = 0;
    var bodyScrollTop = 0;
    var documentScrollTop = 0;
    if (document.body) {
        bodyScrollTop = document.body.scrollTop;
    }
    if (document.documentElement) {
        documentScrollTop = document.documentElement.scrollTop;
    }
    scrollTop = (bodyScrollTop - documentScrollTop > 0) ? bodyScrollTop : documentScrollTop;
    return scrollTop;
}
exports.getScrollTop = getScrollTop;
/**
*文档的总高度，为isBottom()服务
*/
function getScrollHeight() {
    var scrollHeight = 0;
    var bodyScrollHeight = 0;
    var documentScrollHeight = 0;
    if (document.body) {
        bodyScrollHeight = document.body.scrollHeight;
    }
    if (document.documentElement) {
        documentScrollHeight = document.documentElement.scrollHeight;
    }
    scrollHeight = (bodyScrollHeight - documentScrollHeight > 0) ? bodyScrollHeight : documentScrollHeight;
    return scrollHeight;
}
exports.getScrollHeight = getScrollHeight;
/**
*浏览器视口的高度，为isBottom()服务
*/
function getWindowHeight() {
    var windowHeight = 0;
    if (document.compatMode == 'CSS1Compat') {
        windowHeight = document.documentElement.clientHeight;
    }
    else {
        windowHeight = document.body.clientHeight;
    }
    return windowHeight;
}
exports.getWindowHeight = getWindowHeight;
/**
*判断滚动条是否滚动到底部
*/
function isBottom() {
    /*
    *预留100px给“正在加载”的提示标志
    */
    if (getScrollTop() + getWindowHeight() + 300 > getScrollHeight()) {
        return true;
    }
    else {
        return false;
    }
}
exports.isBottom = isBottom;
/**
 * 上传文件
 * @param file
 */
function uploadFile(file) {
    return __awaiter(this, void 0, void 0, function () {
        var url, myHeaders, formdata, res, data, e_24;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 4, , 5]);
                    url = "/file";
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    myHeaders = _a.sent();
                    formdata = new FormData();
                    formdata.append('files', file, file.name);
                    formdata.append('contentType', "multipart/form-data");
                    return [4 /*yield*/, cc98Fetch(url, {
                            method: 'POST',
                            headers: myHeaders,
                            body: formdata
                        })];
                case 2:
                    res = _a.sent();
                    return [4 /*yield*/, res.json()];
                case 3:
                    data = _a.sent();
                    if (res.status === 200 && data.length !== 0) {
                        return [2 /*return*/, {
                                isSuccess: true,
                                content: data[0]
                            }];
                    }
                    else {
                        throw {};
                    }
                    return [3 /*break*/, 5];
                case 4:
                    e_24 = _a.sent();
                    return [2 /*return*/, {
                            isSuccess: false,
                            content: ''
                        }];
                case 5: return [2 /*return*/];
            }
        });
    });
}
exports.uploadFile = uploadFile;
function clickUploadIcon() {
    console.log("click");
    $("#upload-files").click();
}
exports.clickUploadIcon = clickUploadIcon;
function uploadEvent(e) {
    return __awaiter(this, void 0, void 0, function () {
        var files, res, url, baseUrl, str;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    files = e.target.files;
                    return [4 /*yield*/, uploadFile(files[0])];
                case 1:
                    res = _a.sent();
                    url = res.content;
                    baseUrl = getApiUrl();
                    str = "![](" + baseUrl + url + ")";
                    Constant_1.Constants.testEditor.appendMarkdown(str);
                    return [2 /*return*/];
            }
        });
    });
}
exports.uploadEvent = uploadEvent;
/**
 * 关注指定id的用户
 * @param userId
 */
function followUser(userId) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, res, _a, e_25;
        return __generator(this, function (_b) {
            switch (_b.label) {
                case 0:
                    _b.trys.push([0, 6, , 7]);
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _b.sent();
                    url = "/me/followee/" + userId;
                    return [4 /*yield*/, cc98Fetch(url, {
                            method: 'PUT',
                            headers: headers
                        })];
                case 2:
                    res = _b.sent();
                    if (!(res.status === 200)) return [3 /*break*/, 3];
                    return [2 /*return*/, true];
                case 3:
                    _a = Error.bind;
                    return [4 /*yield*/, res.text()];
                case 4: throw new (_a.apply(Error, [void 0, _b.sent()]))();
                case 5: return [3 /*break*/, 7];
                case 6:
                    e_25 = _b.sent();
                    return [2 /*return*/, e_25.message];
                case 7: return [2 /*return*/];
            }
        });
    });
}
exports.followUser = followUser;
/**
 * 取关指定id的用户
 * @param userId
 */
function unfollowUser(userId) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, res, e_26;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 3, , 4]);
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    url = "/me/followee/" + userId;
                    return [4 /*yield*/, cc98Fetch(url, {
                            method: 'DELETE',
                            headers: headers
                        })];
                case 2:
                    res = _a.sent();
                    if (res.status === 200) {
                        return [2 /*return*/, true];
                    }
                    else {
                        throw new Error(res.statusText);
                    }
                    return [3 /*break*/, 4];
                case 3:
                    e_26 = _a.sent();
                    return [2 /*return*/, false];
                case 4: return [2 /*return*/];
            }
        });
    });
}
exports.unfollowUser = unfollowUser;
function GetTopTopics(boardId) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, response, data, topics, i, i, j, temp;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    url = "/topic/toptopics?boardid=" + boardId;
                    return [4 /*yield*/, cc98Fetch(url, { headers: headers })];
                case 2:
                    response = _a.sent();
                    return [4 /*yield*/, response.json()];
                case 3:
                    data = _a.sent();
                    topics = [];
                    for (i = 0; i < data.length; i++) {
                        topics[i] = __assign({}, data[i], { replyCount: data[i].replyCount || 0 });
                    }
                    for (i = 0; i < topics.length - 1; i++) {
                        for (j = 0; j < topics.length - 1 - i; j++) {
                            if (topics[j].topState <= topics[j + 1].topState) {
                                temp = topics[j];
                                topics[j] = topics[j + 1];
                                topics[j + 1] = temp;
                            }
                        }
                    }
                    return [2 /*return*/, topics];
            }
        });
    });
}
exports.GetTopTopics = GetTopTopics;
function getBestTopics(curPage, boardId) {
    return __awaiter(this, void 0, void 0, function () {
        var start, url, headers, response, data, boardtopics, i, totalPage, obj;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    start = (curPage - 1) * 20;
                    url = "/topic/best/board/" + boardId + "?from=" + start + "&size=20";
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    return [4 /*yield*/, cc98Fetch(url, { headers: headers })];
                case 2:
                    response = _a.sent();
                    return [4 /*yield*/, response.json()];
                case 3:
                    data = _a.sent();
                    boardtopics = [];
                    for (i = 0; i < data.topics.length; i++) {
                        boardtopics[i] = __assign({}, data.topics[i], { replyCount: data.topics[i].replyCount || 0 });
                    }
                    totalPage = data.count % 20 === 0 ? data.count / 20 : (data.count - data.count % 20) / 20 + 1;
                    obj = { boardtopics: boardtopics, totalPage: totalPage };
                    return [2 /*return*/, obj];
            }
        });
    });
}
exports.getBestTopics = getBestTopics;
function getSaveTopics(curPage, boardId) {
    return __awaiter(this, void 0, void 0, function () {
        var start, url, token, headers, response, data, boardtopics, i, totalPage, obj;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    start = (curPage - 1) * 20;
                    url = "/topic/save/board/" + boardId + "?from=" + start + "&size=20";
                    return [4 /*yield*/, getToken()];
                case 1:
                    token = _a.sent();
                    headers = new Headers();
                    headers.append("Authorization", token);
                    return [4 /*yield*/, cc98Fetch(url, { headers: headers })];
                case 2:
                    response = _a.sent();
                    return [4 /*yield*/, response.json()];
                case 3:
                    data = _a.sent();
                    boardtopics = [];
                    for (i = 0; i < data.topics.length; i++) {
                        boardtopics[i] = __assign({}, data.topics[i], { replyCount: data.topics[i].replyCount || 0 });
                    }
                    totalPage = data.count % 20 === 0 ? data.count / 20 : (data.count - data.count % 20) / 20 + 1;
                    obj = { boardtopics: boardtopics, totalPage: totalPage };
                    return [2 /*return*/, obj];
            }
        });
    });
}
exports.getSaveTopics = getSaveTopics;
/**
 * 搜索指定关键词主题
 * @param boardId
 * @param words
 * @param from
 * @param rouer
 */
function getSearchTopic(boardId, words, from, router) {
    return __awaiter(this, void 0, void 0, function () {
        var myHeaders, bodyCotent, size, newTopic, response, response, _a, _b, _i, i, userFan0, userFan1, userInfo0, userInfo1, _c, index, index, index, index, _d, _e, e_27;
        return __generator(this, function (_f) {
            switch (_f.label) {
                case 0:
                    console.log("开始获取搜索结果了");
                    _f.label = 1;
                case 1:
                    _f.trys.push([1, 23, , 24]);
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 2:
                    myHeaders = _f.sent();
                    bodyCotent = JSON.stringify(words);
                    myHeaders.append('content-type', 'application/json');
                    size = 20;
                    newTopic = void 0;
                    if (!(boardId == 0)) return [3 /*break*/, 5];
                    return [4 /*yield*/, cc98Fetch("/topic/search?from=" + from + "&size=" + size, {
                            method: 'POST',
                            headers: myHeaders,
                            body: bodyCotent
                        })];
                case 3:
                    response = _f.sent();
                    if (response.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response.status === 403) {
                        window.location.href = "/status/OperationForbidden";
                    }
                    if (response.status === 404) {
                        window.location.href = "/status/NotFoundTopic";
                    }
                    if (response.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, response.json()];
                case 4:
                    newTopic = _f.sent();
                    return [3 /*break*/, 8];
                case 5: return [4 /*yield*/, cc98Fetch("/topic/search/board/" + boardId + "?from=" + from + "&size=" + size, {
                        method: 'POST',
                        headers: myHeaders,
                        body: bodyCotent
                    })];
                case 6:
                    response = _f.sent();
                    if (response.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, response.json()];
                case 7:
                    newTopic = _f.sent();
                    _f.label = 8;
                case 8:
                    if (!(newTopic && newTopic != [])) return [3 /*break*/, 21];
                    _a = [];
                    for (_b in newTopic)
                        _a.push(_b);
                    _i = 0;
                    _f.label = 9;
                case 9:
                    if (!(_i < _a.length)) return [3 /*break*/, 20];
                    i = _a[_i];
                    if (!newTopic[i].userId) return [3 /*break*/, 15];
                    return [4 /*yield*/, cc98Fetch("/user/follower/count?userid=" + newTopic[i].userId)];
                case 10:
                    userFan0 = _f.sent();
                    if (userFan0.status === 404) {
                        window.location.href = "/status/NotFoundUser";
                    }
                    if (userFan0.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, userFan0.json()];
                case 11:
                    userFan1 = _f.sent();
                    newTopic[i].fanCount = userFan1;
                    return [4 /*yield*/, cc98Fetch("/user/basic/" + newTopic[i].userId)];
                case 12:
                    userInfo0 = _f.sent();
                    if (userInfo0.status === 404) {
                        window.location.href = "/status/NotFoundUser";
                    }
                    if (userInfo0.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, userInfo0.json()];
                case 13:
                    userInfo1 = _f.sent();
                    newTopic[i].portraitUrl = userInfo1.portraitUrl;
                    //获取所在版面名称
                    _c = newTopic[i];
                    return [4 /*yield*/, getBoardName(newTopic[i].boardId)];
                case 14:
                    //获取所在版面名称
                    _c.boardName = _f.sent();
                    return [3 /*break*/, 16];
                case 15:
                    newTopic[i].fanCount = 0;
                    newTopic[i].portraitUrl = "http://www.cc98.org/pic/anonymous.gif";
                    newTopic[i].userName = "匿名用户";
                    newTopic[i].boardName = "心灵之约";
                    _f.label = 16;
                case 16:
                    //阅读数转换
                    if (newTopic[i].hitCount > 10000) {
                        if (newTopic[i].hitCount > 100000) {
                            index = parseInt("" + newTopic[i].hitCount / 10000);
                            newTopic[i].hitCount = index + "\u4E07";
                        }
                        else {
                            index = parseInt("" + newTopic[i].hitCount / 1000) / 10;
                            newTopic[i].hitCount = index + "\u4E07";
                        }
                    }
                    //回复数转换
                    if (newTopic[i].replyCount > 10000) {
                        if (newTopic[i].replyCount > 100000) {
                            index = parseInt("" + newTopic[i].replyCount / 10000);
                            newTopic[i].replyCount = index + "\u4E07";
                        }
                        else {
                            index = parseInt("" + newTopic[i].replyCount / 1000) / 10;
                            newTopic[i].replyCount = index + "\u4E07";
                        }
                    }
                    if (!newTopic[i].tag1) return [3 /*break*/, 19];
                    _d = newTopic[i];
                    return [4 /*yield*/, getTagNamebyId(newTopic[i].tag1)];
                case 17:
                    _d.tag1 = _f.sent();
                    if (!newTopic[i].tag2) return [3 /*break*/, 19];
                    _e = newTopic[i];
                    return [4 /*yield*/, getTagNamebyId(newTopic[i].tag2)];
                case 18:
                    _e.tag2 = _f.sent();
                    _f.label = 19;
                case 19:
                    _i++;
                    return [3 /*break*/, 9];
                case 20: return [2 /*return*/, newTopic];
                case 21: return [2 /*return*/, 0];
                case 22: return [3 /*break*/, 24];
                case 23:
                    e_27 = _f.sent();
                    return [3 /*break*/, 24];
                case 24: return [2 /*return*/];
            }
        });
    });
}
exports.getSearchTopic = getSearchTopic;
function awardWealth(reason, value, postId) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, body, str, url, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", "application/json");
                    body = {
                        operationType: 0,
                        reason: reason,
                        wealth: value
                    };
                    str = JSON.stringify(body);
                    url = "/post/" + postId + "/operation";
                    if (!value) return [3 /*break*/, 3];
                    return [4 /*yield*/, cc98Fetch(url, { method: "POST", headers: headers, body: str })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 400:
                            return [2 /*return*/, 'wrong input'];
                        case 401:
                            return [2 /*return*/, 'unauthorized'];
                        case 404:
                            return [2 /*return*/, 'not found'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    _a.label = 3;
                case 3: return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.awardWealth = awardWealth;
function deductWealth(reason, value, postId) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, body, str, url, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", "application/json");
                    body = {
                        operationType: 1,
                        reason: reason,
                        wealth: value
                    };
                    str = JSON.stringify(body);
                    url = "/post/" + postId + "/operation";
                    if (!(value != 0)) return [3 /*break*/, 3];
                    return [4 /*yield*/, cc98Fetch(url, { method: "POST", headers: headers, body: str })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 400:
                            return [2 /*return*/, 'wrong input'];
                        case 401:
                            return [2 /*return*/, 'unauthorized'];
                        case 404:
                            return [2 /*return*/, 'not found'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    _a.label = 3;
                case 3: return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.deductWealth = deductWealth;
function getAwardInfo(postId) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, response, data;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    url = "/post/" + postId + "/awards";
                    return [4 /*yield*/, cc98Fetch(url, { headers: headers })];
                case 2:
                    response = _a.sent();
                    return [4 /*yield*/, response.json()];
                case 3:
                    data = _a.sent();
                    return [2 /*return*/, data];
            }
        });
    });
}
exports.getAwardInfo = getAwardInfo;
function getPortraitUrl(userName) {
    return __awaiter(this, void 0, void 0, function () {
        var url, response, data;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    url = "/user/name/" + userName;
                    return [4 /*yield*/, cc98Fetch(url)];
                case 1:
                    response = _a.sent();
                    return [4 /*yield*/, response.json()];
                case 2:
                    data = _a.sent();
                    return [2 /*return*/, data.portraitUrl];
            }
        });
    });
}
exports.getPortraitUrl = getPortraitUrl;
function getBoardId(boardName) {
    var boardInfo = [
        { id: "7", name: "王何宇老师答疑版" },
        { id: "20", name: "冯晓霞老师答疑版" },
        { id: "21", name: "何善蒙老师答疑版" },
        { id: "23", name: "肖少拥老师答疑版" },
        { id: "36", name: "王云武老师答疑版" },
        { id: "41", name: "楼学庆老师答疑版" },
        { id: "42", name: "杨起帆老师答疑版" },
        { id: "47", name: "陈越老师答疑版" },
        { id: "49", name: "方红光老师答疑版" },
        { id: "50", name: "徐镜春老师答疑版" },
        { id: "52", name: "陆汉权老师答疑版" },
        { id: "83", name: "魏宝刚老师的答疑版" },
        { id: "140", name: "古红英老师答疑版" },
        { id: "149", name: "李岩老师答疑版" },
        { id: "151", name: "孙建伶老师答疑版" },
        { id: "183", name: "陆魁军老师答疑版" },
        { id: "204", name: "冯雁老师答疑版" },
        { id: "205", name: "张引老师的答疑版" },
        { id: "207", name: "郑扣根老师答疑版" },
        { id: "208", name: "翁恺老师答疑版" },
        { id: "224", name: "钱抱清老师的答疑版" },
        { id: "279", name: "教师答疑区事务版" },
        { id: "292", name: "高晴老师答疑版" },
        { id: "311", name: "杨义群老师的答疑版" },
        { id: "323", name: "白洪欢老师答疑版" },
        { id: "325", name: "贾厚玉老师的答疑板" },
        { id: "375", name: "张重辉老师答疑版" },
        { id: "383", name: "张彤彧老师答疑版" },
        { id: "408", name: "陈建海老师答疑" },
        { id: "412", name: "精品课程C语言答疑中心" },
        { id: "423", name: "方宁老师答疑版" },
        { id: "427", name: "季江民老师答疑版块" },
        { id: "432", name: "陈平老师答疑版" },
        { id: "440", name: "丁展平老师答疑版" },
        { id: "442", name: "谈艺论戏" },
        { id: "446", name: "桥牌天地" },
        { id: "448", name: "张军老师答疑版" },
        { id: "451", name: "胡兰青老师答疑版" },
        { id: "452", name: "胡兰青老师答疑版" },
        { id: "454", name: "董亚波老师答疑版" },
        { id: "457", name: "史治国老师答疑版" },
        { id: "494", name: "方富民老师答疑版" },
        { id: "501", name: "外院朱晔老师答疑版" },
        { id: "513", name: "邢卫老师答疑版" },
        { id: "514", name: "周波老师答疑版" },
        { id: "535", name: "面向对象程序设计答疑中心" },
        { id: "540", name: "陆维敏老师答疑版" },
        { id: "546", name: "苏振华老师答疑版" },
        { id: "548", name: "姜晓红老师答疑版" },
        { id: "559", name: "吴江琴老师答疑版" },
        { id: "568", name: "杨万喜老师答疑版" },
        { id: "574", name: "胡敏老师的答疑版面" },
        { id: "575", name: "顾宗华老师答疑版" },
        { id: "578", name: "蒋文华老师答疑版" },
        { id: "579", name: "陈华钧老师答疑版" },
        { id: "588", name: "吕萍老师答疑版" },
        { id: "589", name: "黄正谦老师答疑版" },
        { id: "590", name: "王强老师答疑版" },
        { id: "595", name: "陈志坚老师答疑版" },
        { id: "599", name: "彭笑刚老师答疑版" },
        { id: "600", name: "楼辉老师答疑版" },
        { id: "601", name: "沈钦仙老师答疑版" },
        { id: "602", name: "孙凌云老师答疑版" },
        { id: "603", name: "孟涛老师答疑版" },
        { id: "615", name: "孟炳泉老师答疑版" },
        { id: "624", name: "计算机类通识课程答疑版" },
        { id: "626", name: "杨颖老师答疑版" },
        { id: "629", name: "陈实老师答疑版" },
        { id: "631", name: "管理学课程交流版" },
        { id: "632", name: "陈纯老师答疑版" },
        { id: "633", name: "近现代中国的人物研究答疑版" },
        { id: "634", name: "董平老师答疑版" },
        { id: "635", name: "戴俊飞老师答疑版" },
        { id: "640", name: "刘海风老师答疑版" },
        { id: "710", name: "沈语冰老师答疑版" },
        { id: "714", name: "王跃明老师答疑版" },
        { id: "723", name: "李浩然老师答疑版" },
        { id: "724", name: "胡吉明老师答疑版" },
        { id: "726", name: "董玮老师答疑版" },
        { id: "727", name: "王毅老师答疑版" },
        { id: "728", name: "陈文智老师答疑版" },
        { id: "733", name: "陈奇老师答疑版" },
        { id: "745", name: "刘新国老师答疑版" },
        { id: "751", name: "李啸风物理化学答疑版" },
        { id: "752", name: "雷勇老师答疑版" },
        { id: "761", name: "高在峰老师课程交流版" },
        { id: "68", name: "学习交流" },
        { id: "85", name: "English Corner" },
        { id: "102", name: "彼岸阳光" },
        { id: "263", name: "考研一族" },
        { id: "304", name: "二外天地" },
        { id: "318", name: "选课交流" },
        { id: "391", name: "和语瀛风" },
        { id: "401", name: "对外交流" },
        { id: "592", name: "学习天地区事务版" },
        { id: "593", name: "专业咨询" },
        { id: "594", name: "学习资源" },
        { id: "715", name: "在线答疑" },
        { id: "100", name: "校园信息" },
        { id: "197", name: "军训生活" },
        { id: "198", name: "新生宝典" },
        { id: "264", name: "浙大广电" },
        { id: "266", name: "校园动态区事务版" },
        { id: "372", name: "维权空间" },
        { id: "417", name: "毕业生" },
        { id: "450", name: "依依校情" },
        { id: "460", name: "声像浙大" },
        { id: "534", name: "团委学生会" },
        { id: "537", name: "寒假·2017" },
        { id: "539", name: "校园卡工作" },
        { id: "547", name: "青年志愿者" },
        { id: "570", name: "防火视窗" },
        { id: "571", name: "公益爱心" },
        { id: "581", name: "浙大研究生" },
        { id: "748", name: "创客在浙" },
        { id: "230", name: "ftp联盟" },
        { id: "235", name: "求职广场" },
        { id: "339", name: "失物招领" },
        { id: "357", name: "时事新闻" },
        { id: "392", name: "信息资讯区事务版" },
        { id: "459", name: "实习兼职" },
        { id: "473", name: "公务员考录" },
        { id: "515", name: "住房信息" },
        { id: "560", name: "证券投资" },
        { id: "572", name: "交通天下" },
        { id: "738", name: "学生资助" },
        { id: "101", name: "时尚空间" },
        { id: "147", name: "行者无疆" },
        { id: "157", name: "军事天地" },
        { id: "180", name: "数码世界" },
        { id: "229", name: "美食天地" },
        { id: "256", name: "恋车情结" },
        { id: "258", name: "宠物情缘" },
        { id: "261", name: "健康帖士" },
        { id: "272", name: "个性生活区事务版" },
        { id: "313", name: "模型世界" },
        { id: "316", name: "心理学与生活" },
        { id: "402", name: "气象万千" },
        { id: "518", name: "茶韵飘香" },
        { id: "545", name: "手工生活" },
        { id: "551", name: "绿色心情" },
        { id: "16", name: "自由贴图" },
        { id: "115", name: "星座物语" },
        { id: "135", name: "开怀一笑" },
        { id: "146", name: "mm图片" },
        { id: "148", name: "有间鬼屋" },
        { id: "155", name: "智力宝典" },
        { id: "173", name: "光影留痕" },
        { id: "192", name: "有家侦探社" },
        { id: "269", name: "休闲娱乐区事务版" },
        { id: "283", name: "舞动心灵" },
        { id: "353", name: "真我风采" },
        { id: "422", name: "gg图片" },
        { id: "430", name: "魔术与魔方" },
        { id: "549", name: "娱乐新闻" },
        { id: "15", name: "足球板块" },
        { id: "48", name: "台球世界" },
        { id: "86", name: "篮球板块" },
        { id: "99", name: "体育运动" },
        { id: "124", name: "板板一族" },
        { id: "128", name: "free skater" },
        { id: "203", name: "排球天地" },
        { id: "232", name: "我爱网球" },
        { id: "233", name: "乒乓世界" },
        { id: "236", name: "羽球之家" },
        { id: "273", name: "体育运动区事务版" },
        { id: "281", name: "精武门" },
        { id: "282", name: "跆拳道场" },
        { id: "288", name: "梦幻黄龙" },
        { id: "405", name: "精彩F1" },
        { id: "627", name: "伦敦奥运·2012" },
        { id: "731", name: "三好杯" },
        { id: "25", name: "天籁之音" },
        { id: "164", name: "如影随形" },
        { id: "169", name: "摇滚和独立音乐" },
        { id: "202", name: "网络资源" },
        { id: "234", name: "TV满屋" },
        { id: "257", name: "影视工作室" },
        { id: "260", name: "资源发布区" },
        { id: "270", name: "影音无限区事务版" },
        { id: "306", name: "综E在线" },
        { id: "308", name: "乱弹吉他" },
        { id: "314", name: "我的麦克风" },
        { id: "744", name: "NexusHD高清社区" },
        { id: "750", name: "戏剧联盟" },
        { id: "39", name: "软件荟萃" },
        { id: "84", name: "数字艺术" },
        { id: "103", name: "Web设计与开发" },
        { id: "104", name: "硬件天地" },
        { id: "105", name: "编程技术" },
        { id: "154", name: "Java俱乐部" },
        { id: "211", name: "网络技术" },
        { id: "212", name: "Linux天地" },
        { id: "226", name: "电脑医院" },
        { id: "268", name: "电脑技术区事务版" },
        { id: "9", name: "似水年华" },
        { id: "81", name: "情感空气" },
        { id: "114", name: "郁闷小屋" },
        { id: "152", name: "缘分天空" },
        { id: "182", name: "心灵之约" },
        { id: "186", name: "祝福许愿" },
        { id: "244", name: "清樽酹月" },
        { id: "276", name: "感性空间区事务版" },
        { id: "26", name: "读书时光" },
        { id: "144", name: "一路走来" },
        { id: "170", name: "史海拾贝" },
        { id: "271", name: "瞬间永恒区事务版" },
        { id: "312", name: "怪力乱神" },
        { id: "315", name: "98网事" },
        { id: "379", name: "月亮街" },
        { id: "406", name: "哲学思考" },
        { id: "749", name: "社科学术" },
        { id: "759", name: "曲苑杂坛" },
        { id: "760", name: "文学交流" },
        { id: "80", name: "生活点滴" },
        { id: "251", name: "代理专区(旧)" },
        { id: "399", name: "书海淘沙" },
        { id: "449", name: "代理审核" },
        { id: "562", name: "电脑数码" },
        { id: "563", name: "服饰美肤" },
        { id: "564", name: "交易代理区事务版" },
        { id: "569", name: "代理专区" },
        { id: "756", name: "电脑数码已完成交易" },
        { id: "58", name: "信电ISEE" },
        { id: "67", name: "管理学院" },
        { id: "145", name: "传媒与国际文化学院" },
        { id: "158", name: "E电园" },
        { id: "193", name: "生仪大家庭" },
        { id: "214", name: "不败光电" },
        { id: "217", name: "材化演绎" },
        { id: "241", name: "医学院" },
        { id: "246", name: "外语学院" },
        { id: "247", name: "动力机能" },
        { id: "278", name: "院系交流区事务版" },
        { id: "285", name: "碧水青禾" },
        { id: "294", name: "竺可桢学院" },
        { id: "307", name: "人文学院" },
        { id: "319", name: "光华法学院" },
        { id: "320", name: "生命科学学院" },
        { id: "321", name: "生工食品学院" },
        { id: "341", name: "药学院" },
        { id: "344", name: "环资经纬" },
        { id: "351", name: "天下为公" },
        { id: "352", name: "经济学院" },
        { id: "362", name: "教育杏坛" },
        { id: "363", name: "建工学院" },
        { id: "367", name: "理学院" },
        { id: "368", name: "计算机科学与技术学院" },
        { id: "371", name: "控制天下" },
        { id: "377", name: "动科天地CAS" },
        { id: "469", name: "航空航天学院" },
        { id: "582", name: "求是学院" },
        { id: "623", name: "海洋学院" },
        { id: "754", name: "我是工程师" },
        { id: "60", name: "MSTC Microsoft Technology Club" },
        { id: "72", name: "韩之恋韩语社" },
        { id: "129", name: "杭高毕业生专版" },
        { id: "165", name: "绿之源协会" },
        { id: "166", name: "棒垒球协会" },
        { id: "176", name: "Fantasy动漫社" },
        { id: "187", name: "科技探索者协会" },
        { id: "190", name: "学军中学" },
        { id: "194", name: "梵音剧社" },
        { id: "195", name: "法学研究会" },
        { id: "206", name: "浙大DFM街舞社" },
        { id: "209", name: "书院飘香" },
        { id: "210", name: "生命科学协会" },
        { id: "213", name: "墨语茗音" },
        { id: "215", name: "登山协会" },
        { id: "216", name: "梦想天堂" },
        { id: "219", name: "艺术插花协会" },
        { id: "222", name: "慈中家园" },
        { id: "225", name: "灵韵艺术团" },
        { id: "227", name: "博盟电脑俱乐部" },
        { id: "250", name: "奔向奥林匹克运动俱乐部" },
        { id: "253", name: "英语挑战者联盟CEO" },
        { id: "254", name: "学生旅游协会" },
        { id: "277", name: "社团风采区事务版" },
        { id: "287", name: "SCDA（就业与职业发展协会）" },
        { id: "297", name: "《紫金港》·星空文学" },
        { id: "303", name: "浙江大学国防协会" },
        { id: "305", name: "意灵读书者协会" },
        { id: "310", name: "心理学会" },
        { id: "322", name: "紫金港艺术团" },
        { id: "330", name: "学生社团联合会" },
        { id: "332", name: "紫金港证券投资社" },
        { id: "333", name: "摄协之家" },
        { id: "334", name: "红十字会学生分会" },
        { id: "335", name: "DV联盟" },
        { id: "336", name: "学生医学进展研究会" },
        { id: "337", name: "学生第一希望社" },
        { id: "340", name: "无我茶社" },
        { id: "347", name: "学生三农协会" },
        { id: "350", name: "创业协会" },
        { id: "354", name: "一方水土" },
        { id: "355", name: "辩论队与求是辩论社" },
        { id: "358", name: "浙大虫子" },
        { id: "359", name: "卡侬音乐" },
        { id: "361", name: "学生无极棋社" },
        { id: "369", name: "学生空手道协会" },
        { id: "373", name: "伊甸法国" },
        { id: "382", name: "文学联合会" },
        { id: "385", name: "【enactus(原SIFE)】浙大创行国际学生圈" },
        { id: "393", name: "爱心社" },
        { id: "395", name: "动物保护者协会" },
        { id: "396", name: "求是人俱乐部" },
        { id: "397", name: "邓研风采" },
        { id: "431", name: "学生校友联络协会" },
        { id: "434", name: "亦心·民韵舞社" },
        { id: "436", name: "杨式太极拳协会" },
        { id: "437", name: "社团百花园" },
        { id: "438", name: "文琴艺术总团" },
        { id: "439", name: "春秋社" },
        { id: "470", name: "腾讯创新俱乐部" },
        { id: "519", name: "机器人协会" },
        { id: "520", name: "心系西部协会" },
        { id: "558", name: "模拟联合国协会" },
        { id: "561", name: "ShARE" },
        { id: "566", name: "财商俱乐部" },
        { id: "573", name: "Power Of Voice" },
        { id: "576", name: "黑白剧社" },
        { id: "587", name: "HPA保健协会" },
        { id: "617", name: "浙江大学出国留学学生圈SOSA" },
        { id: "618", name: "成长互助训练营GCC" },
        { id: "628", name: "浙江大学学生E志者协会" },
        { id: "713", name: "未来企业家俱乐部FEC" },
        { id: "736", name: "浙江大学研究生创新创业中心CIE" },
        { id: "262", name: "天下一家" },
        { id: "461", name: "在浙之滨" },
        { id: "462", name: "天下一家区事务版" },
        { id: "467", name: "三湘四水" },
        { id: "468", name: "津门故里" },
        { id: "471", name: "齐鲁青未了" },
        { id: "472", name: "蓉汇贯川" },
        { id: "475", name: "三秦大地" },
        { id: "480", name: "八闽来风" },
        { id: "481", name: "江南西道" },
        { id: "482", name: "一皖情深" },
        { id: "483", name: "燕赵飞歌" },
        { id: "484", name: "吴韵汉风" },
        { id: "485", name: "辽地永宁" },
        { id: "486", name: "新上海滩" },
        { id: "489", name: "黑土风情" },
        { id: "491", name: "白山松水" },
        { id: "492", name: "巴渝人家" },
        { id: "493", name: "天山南北" },
        { id: "498", name: "晋善晋美" },
        { id: "502", name: "塞上风光" },
        { id: "503", name: "彩云之南" },
        { id: "504", name: "荆楚纵横" },
        { id: "505", name: "邦锦梅朵" },
        { id: "506", name: "粤来客栈" },
        { id: "507", name: "鼎豫中原" },
        { id: "511", name: "丝路花雨" },
        { id: "550", name: "皇城根儿" },
        { id: "596", name: "八桂飘香" },
        { id: "625", name: "黔山秀水" },
        { id: "642", name: "椰风海韵" },
        { id: "328", name: "网上冲浪" },
        { id: "329", name: "编程答疑" },
        { id: "346", name: "flash版" },
        { id: "394", name: "游戏编程" },
        { id: "499", name: "多媒体技术" },
        { id: "538", name: "Mac(苹果)专区" },
        { id: "591", name: ".NET 美学" },
        { id: "597", name: "脚本语言" },
        { id: "598", name: "iOS" },
        { id: "621", name: "魅族 Meizu" },
        { id: "622", name: "Android" },
        { id: "711", name: "Windows Phone" },
        { id: "91", name: "游戏广场" },
        { id: "274", name: "游戏广场区事务版" },
        { id: "296", name: "暴雪游戏" },
        { id: "30", name: "动漫讨论" },
        { id: "139", name: "恋声症候群" },
        { id: "191", name: "动漫资源" },
        { id: "223", name: "空蝉之恋" },
        { id: "239", name: "贴图工坊" },
        { id: "275", name: "动漫天地区事务版" },
        { id: "327", name: "动漫文区" },
        { id: "376", name: "ACG音乐区" },
        { id: "455", name: "周边百老汇" },
        { id: "245", name: "技术组工作室" },
        { id: "249", name: "编辑部工作室" },
        { id: "286", name: "坛庆策划" },
        { id: "605", name: "策划部工作室" },
        { id: "606", name: "体育部工作室" },
        { id: "607", name: "部长联席会议" },
        { id: "610", name: "意见与建议" },
        { id: "611", name: "通知通告" },
        { id: "613", name: "招贤纳士" },
        { id: "620", name: "赞助合作" },
        { id: "747", name: "Banner申请" },
        { id: "753", name: "CC98协会" },
        { id: "17", name: "论坛事务" },
        { id: "38", name: "站规修订" },
        { id: "40", name: "站务讨论" },
        { id: "116", name: "test" },
        { id: "136", name: "98博物馆" },
        { id: "184", name: "论坛帮助" },
        { id: "221", name: "版主会议厅" },
        { id: "267", name: "社科学术区事务版" },
        { id: "326", name: "集思广益" },
        { id: "400", name: "废弃版块" },
        { id: "404", name: "98足迹" },
        { id: "433", name: "网络安全" },
        { id: "614", name: "莫失莫忘" }
    ];
    var boardResult = [];
    //看是否包含
    for (var i in boardInfo) {
        if (boardInfo[i].name.indexOf(boardName) > -1) {
            boardResult.push({ id: boardInfo[i].id, name: boardInfo[i].name });
        }
    }
    return boardResult;
}
exports.getBoardId = getBoardId;
function isFollowThisBoard(boardId) {
    if (!getLocalStorage("userInfo"))
        return false;
    var customBoards = getLocalStorage("userInfo").customBoards;
    for (var _i = 0, customBoards_1 = customBoards; _i < customBoards_1.length; _i++) {
        var item = customBoards_1[_i];
        console.log(item);
        if (item == boardId) {
            console.log("版面匹配成功");
            return true;
        }
    }
    return false;
}
exports.isFollowThisBoard = isFollowThisBoard;
function followBoard(boardId) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    url = "/me/custom-board/" + boardId;
                    return [4 /*yield*/, cc98Fetch(url, { method: "PUT", headers: headers })];
                case 2:
                    response = _a.sent();
                    refreshUserInfo();
                    removeStorage("focusBoardList");
                    return [2 /*return*/];
            }
        });
    });
}
exports.followBoard = followBoard;
function refreshUserInfo() {
    return __awaiter(this, void 0, void 0, function () {
        var userName, userInfo_1, headers, response, userInfo;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    userName = getLocalStorage("userName");
                    if (!userName) {
                        userInfo_1 = getLocalStorage("userInfo");
                        userName = userInfo_1.name;
                    }
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    return [4 /*yield*/, cc98Fetch("/user/name/" + userName, {
                            headers: headers
                        })];
                case 2:
                    response = _a.sent();
                    return [4 /*yield*/, response.json()];
                case 3:
                    userInfo = _a.sent();
                    Store_1.default.dispatch(Actions_1.changeUserInfo(userInfo));
                    setLocalStorage("userInfo", userInfo);
                    setLocalStorage("userName", userInfo.name);
                    return [2 /*return*/];
            }
        });
    });
}
exports.refreshUserInfo = refreshUserInfo;
function unfollowBoard(boardId) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    url = "/me/custom-board/" + boardId;
                    return [4 /*yield*/, cc98Fetch(url, { method: "DELETE", headers: headers })];
                case 2:
                    response = _a.sent();
                    refreshUserInfo();
                    removeStorage("focusBoardList");
                    return [2 /*return*/];
            }
        });
    });
}
exports.unfollowBoard = unfollowBoard;
//获取系统通知
function getMessageSystem(from, size, router) {
    return __awaiter(this, void 0, void 0, function () {
        var myHeaders, response, newTopic, _a, _b, _i, i, response0, response1, e_28;
        return __generator(this, function (_c) {
            switch (_c.label) {
                case 0:
                    _c.trys.push([0, 10, , 11]);
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    myHeaders = _c.sent();
                    return [4 /*yield*/, cc98Fetch("/notification/system?from=" + from + "&size=" + size, { headers: myHeaders })];
                case 2:
                    response = _c.sent();
                    if (response.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, response.json()];
                case 3:
                    newTopic = _c.sent();
                    _a = [];
                    for (_b in newTopic)
                        _a.push(_b);
                    _i = 0;
                    _c.label = 4;
                case 4:
                    if (!(_i < _a.length)) return [3 /*break*/, 9];
                    i = _a[_i];
                    if (!newTopic[i].postId) return [3 /*break*/, 7];
                    return [4 /*yield*/, cc98Fetch("/post/" + newTopic[i].postId + "/basic", { headers: myHeaders })];
                case 5:
                    response0 = _c.sent();
                    return [4 /*yield*/, response0.json()];
                case 6:
                    response1 = _c.sent();
                    newTopic[i].floor = response1.floor;
                    return [3 /*break*/, 8];
                case 7:
                    newTopic[i].floor = 0;
                    _c.label = 8;
                case 8:
                    _i++;
                    return [3 /*break*/, 4];
                case 9: return [2 /*return*/, newTopic];
                case 10:
                    e_28 = _c.sent();
                    return [3 /*break*/, 11];
                case 11: return [2 /*return*/];
            }
        });
    });
}
exports.getMessageSystem = getMessageSystem;
//获取回复我的通知
function getMessageResponse(from, size, router) {
    return __awaiter(this, void 0, void 0, function () {
        var result, myHeaders, response, newTopic, _a, _b, _i, i, response0, response1, _c, response2, response3, e_29;
        return __generator(this, function (_d) {
            switch (_d.label) {
                case 0:
                    _d.trys.push([0, 15, , 16]);
                    result = [];
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    myHeaders = _d.sent();
                    console.log("from: number, size: number, router", from);
                    return [4 /*yield*/, cc98Fetch("/notification/reply?from=" + from + "&size=" + size, { headers: myHeaders })];
                case 2:
                    response = _d.sent();
                    if (response.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, response.json()];
                case 3:
                    newTopic = _d.sent();
                    if (!newTopic) return [3 /*break*/, 14];
                    _a = [];
                    for (_b in newTopic)
                        _a.push(_b);
                    _i = 0;
                    _d.label = 4;
                case 4:
                    if (!(_i < _a.length)) return [3 /*break*/, 14];
                    i = _a[_i];
                    return [4 /*yield*/, cc98Fetch("/topic/" + newTopic[i].topicId, { headers: myHeaders })];
                case 5:
                    response0 = _d.sent();
                    if (!(response0.status === 401)) return [3 /*break*/, 6];
                    window.location.href = "/status/UnauthorizedTopic";
                    return [3 /*break*/, 13];
                case 6:
                    if (!(response0.status === 500)) return [3 /*break*/, 7];
                    window.location.href = "/status/ServerError";
                    return [3 /*break*/, 13];
                case 7:
                    if (!(response0.status === 404)) return [3 /*break*/, 8];
                    window.location.href = "/status/ServerError";
                    return [3 /*break*/, 13];
                case 8: return [4 /*yield*/, response0.json()];
                case 9:
                    response1 = _d.sent();
                    newTopic[i].topicTitle = response1.title;
                    newTopic[i].boardId = response1.boardId;
                    _c = newTopic[i];
                    return [4 /*yield*/, getBoardName(response1.boardId)];
                case 10:
                    _c.boardName = _d.sent();
                    if (!newTopic[i].postId) return [3 /*break*/, 13];
                    return [4 /*yield*/, cc98Fetch("/post/" + newTopic[i].postId + "/basic", { headers: myHeaders })];
                case 11:
                    response2 = _d.sent();
                    return [4 /*yield*/, response2.json()];
                case 12:
                    response3 = _d.sent();
                    newTopic[i].floor = response3.floor;
                    newTopic[i].userId = response3.userId;
                    newTopic[i].userName = response3.userName;
                    result.push(newTopic[i]);
                    _d.label = 13;
                case 13:
                    _i++;
                    return [3 /*break*/, 4];
                case 14: return [2 /*return*/, result];
                case 15:
                    e_29 = _d.sent();
                    return [3 /*break*/, 16];
                case 16: return [2 /*return*/];
            }
        });
    });
}
exports.getMessageResponse = getMessageResponse;
//获取@我的通知
function getMessageAttme(from, size, router) {
    return __awaiter(this, void 0, void 0, function () {
        var result, token, myHeaders, response, newTopic, _a, _b, _i, i, response0, response1, _c, response2, response3, e_30;
        return __generator(this, function (_d) {
            switch (_d.label) {
                case 0:
                    _d.trys.push([0, 15, , 16]);
                    result = [];
                    return [4 /*yield*/, getToken()];
                case 1:
                    token = _d.sent();
                    myHeaders = new Headers();
                    myHeaders.append('Authorization', token);
                    return [4 /*yield*/, cc98Fetch("/notification/at?from=" + from + "&size=" + size, { headers: myHeaders })];
                case 2:
                    response = _d.sent();
                    if (response.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, response.json()];
                case 3:
                    newTopic = _d.sent();
                    if (!newTopic) return [3 /*break*/, 14];
                    _a = [];
                    for (_b in newTopic)
                        _a.push(_b);
                    _i = 0;
                    _d.label = 4;
                case 4:
                    if (!(_i < _a.length)) return [3 /*break*/, 14];
                    i = _a[_i];
                    return [4 /*yield*/, cc98Fetch("/topic/" + newTopic[i].topicId, { headers: myHeaders })];
                case 5:
                    response0 = _d.sent();
                    if (response0.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response0.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    if (!(response0.status === 404)) return [3 /*break*/, 6];
                    window.location.href = "/status/ServerError";
                    return [3 /*break*/, 13];
                case 6: return [4 /*yield*/, response0.json()];
                case 7:
                    response1 = _d.sent();
                    newTopic[i].topicTitle = response1.title;
                    newTopic[i].boardId = response1.boardId;
                    _c = newTopic[i];
                    return [4 /*yield*/, getBoardName(response1.boardId)];
                case 8:
                    _c.boardName = _d.sent();
                    if (!!newTopic[i].postId) return [3 /*break*/, 9];
                    newTopic[i].floor = 1;
                    newTopic[i].userId = response1.userId;
                    newTopic[i].userName = response1.userName;
                    return [3 /*break*/, 12];
                case 9: return [4 /*yield*/, cc98Fetch("/post/" + newTopic[i].postId + "/basic", { headers: myHeaders })];
                case 10:
                    response2 = _d.sent();
                    return [4 /*yield*/, response2.json()];
                case 11:
                    response3 = _d.sent();
                    newTopic[i].floor = response3.floor;
                    newTopic[i].userId = response3.userId;
                    newTopic[i].userName = response3.userName;
                    _d.label = 12;
                case 12:
                    result.push(newTopic[i]);
                    _d.label = 13;
                case 13:
                    _i++;
                    return [3 /*break*/, 4];
                case 14: return [2 /*return*/, result];
                case 15:
                    e_30 = _d.sent();
                    return [3 /*break*/, 16];
                case 16: return [2 /*return*/];
            }
        });
    });
}
exports.getMessageAttme = getMessageAttme;
function plus1(topicId, postId, reason) {
    return __awaiter(this, void 0, void 0, function () {
        var url, headers, bodyinfo, body, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    url = "/post/" + postId + "/rating";
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", "application/json");
                    bodyinfo = { value: 1, reason: reason };
                    body = JSON.stringify(bodyinfo);
                    return [4 /*yield*/, cc98Fetch(url, { method: "PUT", headers: headers, body: body })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 401:
                            return [2 /*return*/, 'not allowed'];
                        case 403:
                            return [2 /*return*/, 'already'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.plus1 = plus1;
function minus1(topicId, postId, reason) {
    return __awaiter(this, void 0, void 0, function () {
        var url, headers, bodyinfo, body, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    url = "/post/" + postId + "/rating";
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", "application/json");
                    bodyinfo = { value: -1, reason: reason };
                    body = JSON.stringify(bodyinfo);
                    return [4 /*yield*/, cc98Fetch(url, { method: "PUT", headers: headers, body: body })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 401:
                            return [2 /*return*/, 'not allowed'];
                        case 403:
                            return [2 /*return*/, 'already'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.minus1 = minus1;
function addPrestige(postId, value, reason) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, bodyinfo, url, body, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", "application/json");
                    bodyinfo = { operationType: 0, prestige: value, reason: reason };
                    url = "/post/" + postId + "/operation";
                    body = JSON.stringify(bodyinfo);
                    if (!value) return [3 /*break*/, 3];
                    return [4 /*yield*/, cc98Fetch(url, { method: "POST", headers: headers, body: body })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 400:
                            return [2 /*return*/, 'wrong input'];
                        case 401:
                            return [2 /*return*/, 'unauthorized'];
                        case 404:
                            return [2 /*return*/, 'not found'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    _a.label = 3;
                case 3: return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.addPrestige = addPrestige;
function deductPrestige(postId, value, reason) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, bodyinfo, url, body, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", "application/json");
                    bodyinfo = { operationType: 1, prestige: value, reason: reason };
                    url = "/post/" + postId + "/operation";
                    body = JSON.stringify(bodyinfo);
                    if (!value) return [3 /*break*/, 3];
                    return [4 /*yield*/, cc98Fetch(url, { method: "POST", headers: headers, body: body })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 400:
                            return [2 /*return*/, 'wrong input'];
                        case 401:
                            return [2 /*return*/, 'unauthorized'];
                        case 404:
                            return [2 /*return*/, 'not found'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    _a.label = 3;
                case 3: return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.deductPrestige = deductPrestige;
function deletePost(topicId, postId, reason) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, bodyinfo, url, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", 'application/json');
                    bodyinfo = { reason: reason };
                    url = "/post/" + postId;
                    return [4 /*yield*/, cc98Fetch(url, { method: "DELETE", headers: headers, body: JSON.stringify(bodyinfo) })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 401:
                            return [2 /*return*/, 'unauthorized'];
                        case 404:
                            return [2 /*return*/, 'not found'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.deletePost = deletePost;
function stopBoardPost(postId, reason, days) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, bodyinfo, url, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", 'application/json');
                    bodyinfo = { operationType: 1, reason: reason, stopPostDays: days };
                    url = "/post/" + postId + "/operation";
                    return [4 /*yield*/, cc98Fetch(url, { method: "POST", headers: headers, body: JSON.stringify(bodyinfo) })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 401:
                            return [2 /*return*/, 'unauthorized'];
                        case 404:
                            return [2 /*return*/, 'not found'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.stopBoardPost = stopBoardPost;
function cancelStopBoardPost(userId, boardId) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", 'application/json');
                    url = "/manage/punishment/cancelstopboardpost?userid=" + userId + "$boardid=" + boardId;
                    return [4 /*yield*/, cc98Fetch(url, { method: "PUT", headers: headers })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 401:
                            return [2 /*return*/, 'unauthorized'];
                        case 404:
                            return [2 /*return*/, 'not found'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.cancelStopBoardPost = cancelStopBoardPost;
function addBoardTopTopic(topicId, boardId, topState, days, reason) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, content, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", "application/json");
                    content = { 'topState': topState, 'duration': days, 'reason': reason };
                    return [4 /*yield*/, cc98Fetch("/topic/" + topicId + "/top", {
                            method: "PUT",
                            headers: headers,
                            body: JSON.stringify(content)
                        })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 401:
                            return [2 /*return*/, 'unauthorized'];
                        case 404:
                            return [2 /*return*/, 'not found'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.addBoardTopTopic = addBoardTopTopic;
function removeBoardTopTopic(topicId, boardId, reason) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, content, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", "application/json");
                    content = reason;
                    return [4 /*yield*/, cc98Fetch("/topic/" + topicId + "/top", {
                            method: "DELETE",
                            headers: headers,
                            body: JSON.stringify(content)
                        })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 401:
                            return [2 /*return*/, 'unauthorized'];
                        case 404:
                            return [2 /*return*/, 'not found'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.removeBoardTopTopic = removeBoardTopTopic;
//获取特定类型的消息的总数，1为回复消息，2为@消息，3为系统消息
function getTotalPage(type) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, response, totalPage;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    return [4 /*yield*/, cc98Fetch("/me/all-message-count", { headers: headers })];
                case 2:
                    response = _a.sent();
                    return [4 /*yield*/, response.json()];
                case 3:
                    totalPage = _a.sent();
                    switch (type) {
                        case 1:
                            return [2 /*return*/, totalPage.replyCount];
                        case 2:
                            return [2 /*return*/, totalPage.atCount];
                        case 3:
                            return [2 /*return*/, totalPage.systemCount];
                        default:
                            break;
                    }
                    return [2 /*return*/];
            }
        });
    });
}
exports.getTotalPage = getTotalPage;
function deleteTopic(topicId, reason) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, bodyInfo, body, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", "application/json");
                    url = "/topic/" + topicId;
                    bodyInfo = { 'reason': reason };
                    body = JSON.stringify(bodyInfo);
                    return [4 /*yield*/, cc98Fetch(url, { method: "DELETE", headers: headers, body: body })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 401:
                            return [2 /*return*/, 'unauthorized'];
                        case 404:
                            return [2 /*return*/, 'not found'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.deleteTopic = deleteTopic;
function lockTopic(topicId, boardId, reason, days) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, bodyInfo, body, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", "application/json");
                    url = "/topic/" + topicId + "/lock";
                    bodyInfo = { 'reason': reason, 'value': days };
                    body = JSON.stringify(bodyInfo);
                    return [4 /*yield*/, cc98Fetch(url, { method: "PUT", headers: headers, body: body })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 401:
                            return [2 /*return*/, 'unauthorized'];
                        case 404:
                            return [2 /*return*/, 'not found'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.lockTopic = lockTopic;
function unLockTopic(topicId, boardId, reason) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, bodyInfo, body, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", "application/json");
                    url = "/topic/" + topicId + "/lock";
                    bodyInfo = { 'reason': reason };
                    body = JSON.stringify(bodyInfo);
                    return [4 /*yield*/, cc98Fetch(url, { method: "DELETE", headers: headers, body: body })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 401:
                            return [2 /*return*/, 'unauthorized'];
                        case 404:
                            return [2 /*return*/, 'not found'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.unLockTopic = unLockTopic;
function setBestTopic(topicId, reason) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, bodyInfo, body, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", "application/json");
                    url = "/topic/" + topicId + "/best";
                    bodyInfo = { 'reason': reason };
                    body = JSON.stringify(bodyInfo);
                    return [4 /*yield*/, cc98Fetch(url, { method: "PUT", headers: headers, body: body })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 401:
                            return [2 /*return*/, 'unauthorized'];
                        case 404:
                            return [2 /*return*/, 'not found'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.setBestTopic = setBestTopic;
function cancelBestTopic(topicId, reason) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, bodyInfo, body, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", "application/json");
                    url = "/topic/" + topicId + "/best";
                    bodyInfo = { 'reason': reason };
                    body = JSON.stringify(bodyInfo);
                    return [4 /*yield*/, cc98Fetch(url, { method: "DELETE", headers: headers, body: body })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 401:
                            return [2 /*return*/, 'unauthorized'];
                        case 404:
                            return [2 /*return*/, 'not found'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.cancelBestTopic = cancelBestTopic;
function setDisableHot(topicId, reason) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, bodyInfo, body, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", "application/json");
                    url = "/topic/" + topicId + "/not-hot";
                    bodyInfo = { 'reason': reason };
                    body = JSON.stringify(bodyInfo);
                    return [4 /*yield*/, cc98Fetch(url, { method: "PUT", headers: headers, body: body })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 401:
                            return [2 /*return*/, 'unauthorized'];
                        case 404:
                            return [2 /*return*/, 'not found'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.setDisableHot = setDisableHot;
function cancelDisableHot(topicId, reason) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, bodyInfo, body, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", "application/json");
                    url = "/topic/" + topicId + "/not-hot";
                    bodyInfo = { 'reason': reason };
                    body = JSON.stringify(bodyInfo);
                    return [4 /*yield*/, cc98Fetch(url, { method: "DELETE", headers: headers, body: body })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 401:
                            return [2 /*return*/, 'unauthorized'];
                        case 404:
                            return [2 /*return*/, 'not found'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.cancelDisableHot = cancelDisableHot;
//自动识别内容中的链接并添加ubb代码
function autoAddUrl(v) {
    var flag = /(http|ftp|https)/g;
    var arr = v.match(flag);
    if (arr) {
        var reg = /(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?/g;
        var abb = v.match(reg);
        var result = v.replace(reg, "[url=" + abb + "][color=blue]" + abb + "[/color][/url]").replace(/\n/g, "<br />");
        return result;
    }
    else {
        var reg = /[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?/g;
        var abb = v.match(reg);
        console.log(abb);
        var result = v.replace(reg, "[url=\"http://" + abb + "\"][color=blue]" + abb + "[/color][/url]").replace(/\n/g, "<br />");
        return result;
    }
}
exports.autoAddUrl = autoAddUrl;
function getToken() {
    return __awaiter(this, void 0, void 0, function () {
        var url, requestBody, headers, response, data, token;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    if (!(getLocalStorage("userName") && getLocalStorage("password"))) return [3 /*break*/, 4];
                    if (!!getLocalStorage("accessToken")) return [3 /*break*/, 3];
                    url = 'https://openid.cc98.org/connect/token';
                    requestBody = {
                        'client_id': '9a1fd200-8687-44b1-4c20-08d50a96e5cd',
                        'client_secret': '8b53f727-08e2-4509-8857-e34bf92b27f2',
                        'grant_type': 'password',
                        'username': getLocalStorage("userName"),
                        'password': getLocalStorage("password"),
                        'scope': "cc98-api openid"
                    };
                    headers = new Headers();
                    headers.append('Content-Type', 'application/x-www-form-urlencoded');
                    return [4 /*yield*/, fetch(url, {
                            method: "POST",
                            headers: headers,
                            body: $.param(requestBody)
                        })];
                case 1:
                    response = _a.sent();
                    return [4 /*yield*/, response.json()];
                case 2:
                    data = _a.sent();
                    token = "Bearer " + encodeURIComponent(data.access_token);
                    setLocalStorage("accessToken", token, data.expires_in);
                    _a.label = 3;
                case 3: return [2 /*return*/, getLocalStorage("accessToken")];
                case 4: return [2 /*return*/, null];
            }
        });
    });
}
exports.getToken = getToken;
function formAuthorizeHeader() {
    return __awaiter(this, void 0, void 0, function () {
        var token, headers;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, getToken()];
                case 1:
                    token = _a.sent();
                    headers = new Headers();
                    headers.append("Authorization", token);
                    return [2 /*return*/, headers];
            }
        });
    });
}
exports.formAuthorizeHeader = formAuthorizeHeader;
function signin(content) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", "application/json");
                    url = "/me/signin";
                    return [4 /*yield*/, cc98Fetch(url, { method: "POST", headers: headers, body: content })];
                case 2:
                    response = _a.sent();
                    return [2 /*return*/];
            }
        });
    });
}
exports.signin = signin;
function getSigninInfo() {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, response, data;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    url = "/me/signin";
                    return [4 /*yield*/, cc98Fetch(url, { headers: headers })];
                case 2:
                    response = _a.sent();
                    return [4 /*yield*/, response.json()];
                case 3:
                    data = _a.sent();
                    return [2 /*return*/, data];
            }
        });
    });
}
exports.getSigninInfo = getSigninInfo;
function getGlobalConfig() {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, response, data;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    url = "/config/global";
                    return [4 /*yield*/, cc98Fetch(url, { headers: headers })];
                case 2:
                    response = _a.sent();
                    return [4 /*yield*/, response.json()];
                case 3:
                    data = _a.sent();
                    return [2 /*return*/, data];
            }
        });
    });
}
exports.getGlobalConfig = getGlobalConfig;
function getTopicInfo(topicId) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, response, data;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    url = "/topic/" + topicId;
                    return [4 /*yield*/, cc98Fetch(url, { headers: headers })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 401:
                            return [2 /*return*/, 'unauthorized'];
                        case 404:
                            return [2 /*return*/, 'not found'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    return [4 /*yield*/, response.json()];
                case 3:
                    data = _a.sent();
                    return [2 /*return*/, data];
            }
        });
    });
}
exports.getTopicInfo = getTopicInfo;
function getBoardInfo(boardId) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, response, data;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    url = "/board/" + boardId;
                    return [4 /*yield*/, cc98Fetch(url, { headers: headers })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 404:
                            return [2 /*return*/, 'not found'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    return [4 /*yield*/, response.json()];
                case 3:
                    data = _a.sent();
                    if (data.canEntry === false) {
                        return [2 /*return*/, 'unauthorized'];
                    }
                    return [2 /*return*/, data];
            }
        });
    });
}
exports.getBoardInfo = getBoardInfo;
function getTotalPageof10(replyCount) {
    if (replyCount >= 10) {
        return (replyCount - replyCount % 10) / 10 + 1;
    }
    else {
        return 1;
    }
}
exports.getTotalPageof10 = getTotalPageof10;
function getUserInfo(userId) {
    return __awaiter(this, void 0, void 0, function () {
        var key, headers, url, response, data, key1;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    key = "userId_" + userId;
                    if (getLocalStorage(key))
                        return [2 /*return*/, getLocalStorage(key)];
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    url = "/user/" + userId;
                    return [4 /*yield*/, cc98Fetch(url, { headers: headers })];
                case 2:
                    response = _a.sent();
                    if (response.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response.status === 403) {
                        window.location.href = "/status/OperationForbidden";
                    }
                    if (response.status === 404) {
                        window.location.href = "/status/NotFoundTopic";
                    }
                    if (response.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, response.json()];
                case 3:
                    data = _a.sent();
                    key1 = "userName_" + data.name;
                    setLocalStorage(key, data, 3600);
                    setLocalStorage(key1, data, 3600);
                    return [2 /*return*/, data];
            }
        });
    });
}
exports.getUserInfo = getUserInfo;
function getUserInfoByName(userName) {
    return __awaiter(this, void 0, void 0, function () {
        var key, headers, url, response, data, key1;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    key = "userName_" + userName;
                    if (getLocalStorage(key))
                        return [2 /*return*/, getLocalStorage(key)];
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    url = "/user/name/" + userName;
                    return [4 /*yield*/, cc98Fetch(url, { headers: headers })];
                case 2:
                    response = _a.sent();
                    if (response.status === 401) {
                        window.location.href = "/status/UnauthorizedTopic";
                    }
                    if (response.status === 403) {
                        window.location.href = "/status/OperationForbidden";
                    }
                    if (response.status === 404) {
                        window.location.href = "/status/NotFoundTopic";
                    }
                    if (response.status === 500) {
                        window.location.href = "/status/ServerError";
                    }
                    return [4 /*yield*/, response.json()];
                case 3:
                    data = _a.sent();
                    key1 = "userId_" + data.id;
                    setLocalStorage(key, data, 3600);
                    setLocalStorage(key1, data, 3600);
                    return [2 /*return*/, data];
            }
        });
    });
}
exports.getUserInfoByName = getUserInfoByName;
function isMaster(masters) {
    if (getLocalStorage("userInfo")) {
        var privilege = getLocalStorage("userInfo").privilege;
        var myName = getLocalStorage("userInfo").name;
        var myId = getLocalStorage("userInfo").id;
        if (privilege === '管理员' || privilege === '超级版主') {
            return true;
        }
        if (masters) {
            for (var i = 0; i < masters.length; i++) {
                if (myName === masters[i]) {
                    return true;
                }
            }
        }
    }
}
exports.isMaster = isMaster;
function getBoardTag(boardId) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, response, data;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    url = "/board/" + boardId + "/tag";
                    return [4 /*yield*/, cc98Fetch(url, { headers: headers })];
                case 2:
                    response = _a.sent();
                    return [4 /*yield*/, response.json()];
                case 3:
                    data = _a.sent();
                    return [2 /*return*/, data];
            }
        });
    });
}
exports.getBoardTag = getBoardTag;
function setHighlight(topicId, isBold, isItalic, color, duration, reason) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, bodyInfo, body, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    headers.append("Content-Type", "application/json");
                    url = "/topic/" + topicId + "/highlight";
                    bodyInfo = {
                        isBold: isBold, isItalic: isItalic, color: color, duration: duration, reason: reason
                    };
                    body = JSON.stringify(bodyInfo);
                    return [4 /*yield*/, cc98Fetch(url, { method: "PUT", headers: headers, body: body })];
                case 2:
                    response = _a.sent();
                    switch (response.status) {
                        case 401:
                            return [2 /*return*/, 'unauthorized'];
                        case 404:
                            return [2 /*return*/, 'not found'];
                        case 500:
                            return [2 /*return*/, 'server error'];
                    }
                    return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.setHighlight = setHighlight;
function setFavoriteTopic(topicId) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, reponse;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    url = "/me/favorite/" + topicId;
                    return [4 /*yield*/, cc98Fetch(url, { method: "PUT", headers: headers })];
                case 2:
                    reponse = _a.sent();
                    return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.setFavoriteTopic = setFavoriteTopic;
function deleteFavoriteTopic(topicId) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, reponse;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    url = "/me/favorite/" + topicId;
                    return [4 /*yield*/, cc98Fetch(url, { method: "DELETE", headers: headers })];
                case 2:
                    reponse = _a.sent();
                    return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.deleteFavoriteTopic = deleteFavoriteTopic;
function getFavState(topicId) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, response, data;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    url = "/topic/" + topicId + "/isfavorite";
                    return [4 /*yield*/, cc98Fetch(url, { headers: headers })];
                case 2:
                    response = _a.sent();
                    return [4 /*yield*/, response.json()];
                case 3:
                    data = _a.sent();
                    return [2 /*return*/, data];
            }
        });
    });
}
exports.getFavState = getFavState;
//更新未读消息数量
function refreshUnReadCount() {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, response, unreadCount;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    url = "/me/unread-count";
                    return [4 /*yield*/, cc98Fetch(url, { headers: headers })];
                case 2:
                    response = _a.sent();
                    return [4 /*yield*/, response.json()];
                case 3:
                    unreadCount = _a.sent();
                    unreadCount.totalCount = unreadCount.systemCount + unreadCount.atCount + unreadCount.replyCount + unreadCount.messageCount;
                    if (unreadCount.totalCount > 0) {
                        $('#unreadCount-totalCount').removeClass('displaynone');
                        $('#unreadCount-totalCount').text(unreadCount.totalCount);
                    }
                    else {
                        $('#unreadCount-totalCount').addClass('displaynone');
                    }
                    if (unreadCount.replyCount > 0) {
                        $('#unreadCount-replyCount').removeClass('displaynone');
                        $('#unreadCount-replyCount').text(unreadCount.replyCount);
                        $('#unreadCount-replyCount1').removeClass('displaynone');
                        $('#unreadCount-replyCount1').text(unreadCount.replyCount);
                    }
                    else {
                        $('#unreadCount-replyCount').addClass('displaynone');
                        $('#unreadCount-replyCount1').addClass('displaynone');
                    }
                    if (unreadCount.atCount > 0) {
                        $('#unreadCount-atCount').removeClass('displaynone');
                        $('#unreadCount-atCount').text(unreadCount.atCount);
                        $('#unreadCount-atCount1').removeClass('displaynone');
                        $('#unreadCount-atCount1').text(unreadCount.atCount);
                    }
                    else {
                        $('#unreadCount-atCount').addClass('displaynone');
                        $('#unreadCount-atCount1').addClass('displaynone');
                    }
                    if (unreadCount.systemCount > 0) {
                        $('#unreadCount-systemCount').removeClass('displaynone');
                        $('#unreadCount-systemCount').text(unreadCount.systemCount);
                        $('#unreadCount-systemCount1').removeClass('displaynone');
                        $('#unreadCount-systemCount1').text(unreadCount.systemCount);
                    }
                    else {
                        $('#unreadCount-systemCount').addClass('displaynone');
                        $('#unreadCount-systemCount1').addClass('displaynone');
                    }
                    if (unreadCount.messageCount > 0) {
                        $('#unreadCount-messageCount').removeClass('displaynone');
                        $('#unreadCount-messageCount').text(unreadCount.messageCount);
                        $('#unreadCount-messageCount1').removeClass('displaynone');
                        $('#unreadCount-messageCount1').text(unreadCount.messageCount);
                    }
                    else {
                        $('#unreadCount-messageCount').addClass('displaynone');
                        $('#unreadCount-messageCount1').addClass('displaynone');
                    }
                    setStorage("unreadCount", unreadCount);
                    return [2 /*return*/, unreadCount];
            }
        });
    });
}
exports.refreshUnReadCount = refreshUnReadCount;
function editPost(postId, contentType, title, content) {
    return __awaiter(this, void 0, void 0, function () {
        var headers, url, bodyInfo, body, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    url = "/post/" + postId;
                    bodyInfo = { content: content, title: title, contentType: contentType };
                    body = JSON.stringify(bodyInfo);
                    return [4 /*yield*/, cc98Fetch(url, { method: "PUT", headers: headers, body: body })];
                case 2:
                    response = _a.sent();
                    return [2 /*return*/, 'ok'];
            }
        });
    });
}
exports.editPost = editPost;
function cc98Fetch(url, init) {
    return __awaiter(this, void 0, void 0, function () {
        var baseUrl, _url, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    baseUrl = 'http://apitest.niconi.cc';
                    _url = "" + baseUrl + url;
                    if (!init) return [3 /*break*/, 2];
                    return [4 /*yield*/, fetch(_url, init)];
                case 1:
                    response = _a.sent();
                    return [3 /*break*/, 4];
                case 2: return [4 /*yield*/, fetch(_url)];
                case 3:
                    response = _a.sent();
                    _a.label = 4;
                case 4: return [2 /*return*/, response];
            }
        });
    });
}
exports.cc98Fetch = cc98Fetch;
/**
 * 获取 API 的 URL 基础路径。
 */
function getApiUrl() {
    return Constant_1.Constants.config.apiUrl;
}
exports.getApiUrl = getApiUrl;
function getTagInfo() {
    return __awaiter(this, void 0, void 0, function () {
        var url, headers, response, data;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    if (!getLocalStorage("tagInfo")) return [3 /*break*/, 1];
                    return [2 /*return*/, getLocalStorage("tagInfo")];
                case 1:
                    url = "/config/global/alltag";
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 2:
                    headers = _a.sent();
                    return [4 /*yield*/, cc98Fetch(url, { headers: headers })];
                case 3:
                    response = _a.sent();
                    return [4 /*yield*/, response.json()];
                case 4:
                    data = _a.sent();
                    setLocalStorage("tagInfo", data);
                    return [2 /*return*/, data];
            }
        });
    });
}
exports.getTagInfo = getTagInfo;
function getTagIdbyName(name) {
    return __awaiter(this, void 0, void 0, function () {
        var tagInfo, _i, tagInfo_1, item;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, getTagInfo()];
                case 1:
                    tagInfo = _a.sent();
                    for (_i = 0, tagInfo_1 = tagInfo; _i < tagInfo_1.length; _i++) {
                        item = tagInfo_1[_i];
                        if (item.name === name)
                            return [2 /*return*/, item.id];
                    }
                    return [2 /*return*/, false];
            }
        });
    });
}
exports.getTagIdbyName = getTagIdbyName;
function getTagNamebyId(id) {
    return __awaiter(this, void 0, void 0, function () {
        var tagInfo, _i, tagInfo_2, item;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, getTagInfo()];
                case 1:
                    tagInfo = _a.sent();
                    for (_i = 0, tagInfo_2 = tagInfo; _i < tagInfo_2.length; _i++) {
                        item = tagInfo_2[_i];
                        if (item.id === id)
                            return [2 /*return*/, item.name];
                    }
                    return [2 /*return*/, false];
            }
        });
    });
}
exports.getTagNamebyId = getTagNamebyId;
function getTopicByOneTag(tagId, boardId, layer, page) {
    return __awaiter(this, void 0, void 0, function () {
        var start, url, headers, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    start = (page - 1) * 10;
                    url = "/topic/search/board/" + boardId + "/tag?tag" + layer + "=" + tagId + "&from=" + start + "&size=20";
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    return [4 /*yield*/, cc98Fetch(url, { headers: headers })];
                case 2:
                    response = _a.sent();
                    return [4 /*yield*/, response.json()];
                case 3: return [2 /*return*/, _a.sent()];
            }
        });
    });
}
exports.getTopicByOneTag = getTopicByOneTag;
function getTopicByTwoTags(tag1Id, tag2Id, boardId, page) {
    return __awaiter(this, void 0, void 0, function () {
        var start, url, headers, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    start = (page - 1) * 10;
                    url = "/topic/search/board/" + boardId + "/tag?tag1=" + tag1Id + "&tag2=" + tag2Id + "&from=" + start + "&size=20";
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    return [4 /*yield*/, cc98Fetch(url, { headers: headers })];
                case 2:
                    response = _a.sent();
                    return [4 /*yield*/, response.json()];
                case 3: return [2 /*return*/, _a.sent()];
            }
        });
    });
}
exports.getTopicByTwoTags = getTopicByTwoTags;
function updateUserInfo(id) {
    return __awaiter(this, void 0, void 0, function () {
        var key, userInfo, name, key1;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    key = "userId_" + id;
                    return [4 /*yield*/, getUserInfo(id)];
                case 1:
                    userInfo = _a.sent();
                    name = userInfo.name;
                    key1 = "userName_" + name;
                    removeLocalStorage(key);
                    removeLocalStorage(key1);
                    return [4 /*yield*/, getUserInfo(id)];
                case 2:
                    _a.sent();
                    return [2 /*return*/];
            }
        });
    });
}
exports.updateUserInfo = updateUserInfo;
function getTagLayer(tagId, tags) {
    for (var _i = 0, tags_1 = tags; _i < tags_1.length; _i++) {
        var item = tags_1[_i];
        for (var _a = 0, _b = item.tags; _a < _b.length; _a++) {
            var tag = _b[_a];
            if (tag.id == tagId)
                return item.layer;
        }
    }
    return false;
}
exports.getTagLayer = getTagLayer;
function findIP(topicId) {
    return __awaiter(this, void 0, void 0, function () {
        var url, headers, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    url = "/topic/" + topicId + "/look-ip";
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    return [4 /*yield*/, cc98Fetch(url, { headers: headers })];
                case 2:
                    response = _a.sent();
                    return [4 /*yield*/, response.json()];
                case 3: return [2 /*return*/, _a.sent()];
            }
        });
    });
}
exports.findIP = findIP;
function moveTopic(topicId, boardId, reason) {
    return __awaiter(this, void 0, void 0, function () {
        var url, headers, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    url = "/topic/" + topicId + "/moveto/" + boardId;
                    return [4 /*yield*/, formAuthorizeHeader()];
                case 1:
                    headers = _a.sent();
                    return [4 /*yield*/, cc98Fetch(url, { method: "PUT", headers: headers, body: JSON.stringify(reason) })];
                case 2:
                    response = _a.sent();
                    if (response.status === 200)
                        return [2 /*return*/, 'ok'];
                    else
                        return [2 /*return*/, 'error'];
                    return [2 /*return*/];
            }
        });
    });
}
exports.moveTopic = moveTopic;


/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(7);
module.exports = function (it) {
  if (!isObject(it)) throw TypeError(it + ' is not an object!');
  return it;
};


/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * 提供 UBB 处理上下文所需要的相关数据。
 */
var UbbCodeContextData = /** @class */ (function () {
    function UbbCodeContextData() {
    }
    return UbbCodeContextData;
}());
exports.UbbCodeContextData = UbbCodeContextData;
/**
 * 处理 UBB 编码时可用于存储相关信息的上下文对象。
 */
var UbbCodeContext = /** @class */ (function () {
    /**
     * 初始化一个上下文对象的新实例。
     * @param engine 引擎对象。
     * @param options 处理选项。
     */
    function UbbCodeContext(engine, options) {
        this._engine = engine;
        this._options = options;
    }
    Object.defineProperty(UbbCodeContext.prototype, "engine", {
        /**
         * 获取关联到本次处理上下文的处理引擎对象。
         * @returns {UbbCodeEngine} 关联到本次处理上下文的处理引擎对象。
         */
        get: function () {
            return this._engine;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UbbCodeContext.prototype, "options", {
        /**
         * 获取处理 UBB 需要注意的选项。
         * @returns {UbbCodeOptions} 处理 UBB 需要注意的选项。
         */
        get: function () {
            return this._options;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UbbCodeContext.prototype, "data", {
        /**
         * 获取上下文相关的数据。
         * @returns {UbbCodeContextData} 上下文相关的数据。
         */
        get: function () {
            return this._engine.data;
        },
        enumerable: true,
        configurable: true
    });
    return UbbCodeContext;
}());
exports.UbbCodeContext = UbbCodeContext;
/**
 * 控制 UBB 编码的选项。在 UBB 编码过程中，需要考虑这些选项。
 */
var UbbCodeOptions = /** @class */ (function () {
    function UbbCodeOptions() {
        /**
         * 是否自动检测 URL 并添加链接效果。
         */
        this.autoDetectUrl = true;
        /**
         * 是否允许外部链接。
         */
        this.allowExternalUrl = true;
        /**
         * 是否允许显示图像。
         */
        this.allowImage = true;
        /**
         * 是否允许多媒体资源，如视频，音频，Flash 等。
         */
        this.allowMediaContent = true;
        /**
         * 是否允许自动播放多媒体资源。
         */
        this.allowAutoPlay = true;
        /**
         * UBB 处理中的兼容性控制选项。
         */
        this.compatibility = UbbCompatiblityMode.Recommended;
    }
    return UbbCodeOptions;
}());
exports.UbbCodeOptions = UbbCodeOptions;
/**
 * 定义 UBB 呈现时使用的兼容性模式。
 */
var UbbCompatiblityMode;
(function (UbbCompatiblityMode) {
    /**
     * 使用最低级别兼容性，尽可能保持 UBB 代码的原始含义，即使可能会带来显示效果问题。
     */
    UbbCompatiblityMode[UbbCompatiblityMode["Transitional"] = 0] = "Transitional";
    /**
     * 如果能在不改变语义的情况下使用较新的呈现技术，则使用新技术；如果不能保证语义一致则不进行更改。
     */
    UbbCompatiblityMode[UbbCompatiblityMode["Recommended"] = 1] = "Recommended";
    /**
     * 强制使用对现代浏览器更友好的新技术呈现，即使可能在一定程度上改变语义。
     */
    UbbCompatiblityMode[UbbCompatiblityMode["EnforceMorden"] = 2] = "EnforceMorden";
})(UbbCompatiblityMode = exports.UbbCompatiblityMode || (exports.UbbCompatiblityMode = {}));
/**
         * 定义符号的类型。
         */
var TokenType;
(function (TokenType) {
    /**
     * 一串文本。
     */
    TokenType[TokenType["String"] = 0] = "String";
    /**
     * 项目之间的分隔符。
     */
    TokenType[TokenType["ItemSeperator"] = 1] = "ItemSeperator";
    /**
     * 单个项目内名称和值的分隔符。
     */
    TokenType[TokenType["NameValueSeperator"] = 2] = "NameValueSeperator";
})(TokenType || (TokenType = {}));
/**
 * 表示一个符号。
 */
var Token = /** @class */ (function () {
    /**
     * 初始化一个符号对象的新实例。
     * @param type 符号的类型。
     * @param value 符号的值。
     */
    function Token(type, value) {
        this.type = type;
        this.value = value;
    }
    /**
     * 创建一个表示一串文本的符号。
     * @param value 文本的值内容。
     */
    Token.stringValue = function (value) {
        return new Token(TokenType.String, value);
    };
    /**
     * 获取表示项目分隔符的符号。
     */
    Token.itemSeperator = new Token(TokenType.ItemSeperator, null);
    /**
     * 获取表示值分隔符的符号。
     */
    Token.nameValueSeperator = new Token(TokenType.NameValueSeperator, null);
    return Token;
}());
/**
 * 定义 UBB 片段的类型。
 */
var UbbSegmentType;
(function (UbbSegmentType) {
    /**
     * 纯文字片段。
     */
    UbbSegmentType[UbbSegmentType["Text"] = 0] = "Text";
    /**
     * 标签片段。
     */
    UbbSegmentType[UbbSegmentType["Tag"] = 1] = "Tag";
})(UbbSegmentType || (UbbSegmentType = {}));
/**
 * 表示 UBB 内容的一个片段。
 */
var UbbSegment = /** @class */ (function () {
    /**
     * 初始化一个 UBB 片段的新实例。
     * @param parent 新片段的上级。
     */
    function UbbSegment(parent) {
        this._parent = parent;
    }
    Object.defineProperty(UbbSegment.prototype, "parent", {
        /**
         * 获取该对象的上级片段。
         * @returns {UbbSegment} 该对象的上级片段。
         */
        get: function () { return this._parent; },
        enumerable: true,
        configurable: true
    });
    ;
    return UbbSegment;
}());
/**
 * 表示 UBB 的文字片段。
 */
var UbbTextSegment = /** @class */ (function (_super) {
    __extends(UbbTextSegment, _super);
    /**
     * 创建一个新的 UbbTextSegment 对象。
     * @param text 新片段包含的文字。
     */
    function UbbTextSegment(text, parent) {
        var _this = _super.call(this, parent) || this;
        _this._text = text;
        return _this;
    }
    Object.defineProperty(UbbTextSegment.prototype, "type", {
        get: function () { return UbbSegmentType.Text; },
        enumerable: true,
        configurable: true
    });
    ;
    Object.defineProperty(UbbTextSegment.prototype, "text", {
        /**
         * 获取片段中包含的文字。
         * @returns {string} 片段中包含的文字。
         */
        get: function () { return this._text; },
        enumerable: true,
        configurable: true
    });
    ;
    UbbTextSegment.prototype.clone = function (newParent) {
        return new UbbTextSegment(this._text, newParent);
    };
    return UbbTextSegment;
}(UbbSegment));
/**
 * 表示 UBB 的标签片段。
 */
var UbbTagSegment = /** @class */ (function (_super) {
    __extends(UbbTagSegment, _super);
    function UbbTagSegment(tagData, parent) {
        var _this = _super.call(this, parent) || this;
        /**
         * 标签片段是否关闭。
         */
        _this._isClosed = false;
        /**
         * 标签中包含的子标签数据。
         */
        _this._subSegments = [];
        _this._tagData = tagData;
        return _this;
    }
    Object.defineProperty(UbbTagSegment.prototype, "type", {
        get: function () { return UbbSegmentType.Tag; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UbbTagSegment.prototype, "isClosed", {
        /**
         * 获取一个值，指示标签是否关闭。
         * @returns {boolean}
         */
        get: function () { return this._isClosed; },
        enumerable: true,
        configurable: true
    });
    ;
    Object.defineProperty(UbbTagSegment.prototype, "tagData", {
        get: function () { return this._tagData; },
        enumerable: true,
        configurable: true
    });
    ;
    Object.defineProperty(UbbTagSegment.prototype, "subSegments", {
        get: function () { return this._subSegments; },
        enumerable: true,
        configurable: true
    });
    ;
    /**
     * 强制关闭一个标签，并将标签挂接到新的上级标签。
     * @param segment 要关闭的标签。
     * @param newParent 新的上级标签。
     * @returns {UbbSegment[]} 产生的新的标签的集合。
     */
    UbbTagSegment.forceClose = function (segment, newParent) {
        // 文字标签无需关闭
        if (segment.type === UbbSegmentType.Text) {
            newParent._subSegments.push(segment.clone(newParent));
        }
        else {
            // 已经关闭的标签也无需关闭
            var seg = segment;
            if (seg.isClosed) {
                newParent._subSegments.push(segment.clone(newParent));
            }
            else {
                console.warn('标签 %s 没有正确关闭，已经被转换为纯文字。', seg.tagData.tagName);
                // 未关闭标签，自己将被转换为纯文字
                newParent._subSegments.push(new UbbTextSegment(seg.tagData.startTagString, segment.parent));
                // 自己的下级将被递归强制关闭，并提升为和自己同级
                for (var _i = 0, _a = seg._subSegments; _i < _a.length; _i++) {
                    var sub = _a[_i];
                    UbbTagSegment.forceClose(sub, newParent);
                }
            }
        }
    };
    /**
     * 关闭该标签，并强制处理所有未关闭的下级标签。
     */
    UbbTagSegment.prototype.close = function () {
        // 复制自己的下级并清空数组。
        var subs = this._subSegments;
        this._subSegments = [];
        for (var _i = 0, subs_1 = subs; _i < subs_1.length; _i++) {
            var item = subs_1[_i];
            UbbTagSegment.forceClose(item, this);
        }
        // 设置关闭状态
        this._isClosed = true;
    };
    UbbTagSegment.prototype.clone = function (newParent) {
        var result = new UbbTagSegment(this._tagData, newParent);
        result._content = this._content;
        result._isClosed = this._isClosed;
        for (var _i = 0, _a = this._subSegments; _i < _a.length; _i++) {
            var item = _a[_i];
            result._subSegments.push(item.clone(result));
        }
        return result;
    };
    /**
     * 获取标签的内部内容，不包括标签自身。
     */
    UbbTagSegment.prototype.getContentText = function () {
        var subContents = [];
        for (var _i = 0, _a = this._subSegments; _i < _a.length; _i++) {
            var subItem = _a[_i];
            if (subItem.type === UbbSegmentType.Text) {
                subContents.push(subItem.text);
            }
            else {
                subContents.push(subItem.getFullText());
            }
        }
        return subContents.join('');
    };
    /**
     * 获取标签的全部文字内容。
     */
    UbbTagSegment.prototype.getFullText = function () {
        return this.tagData.startTagString + this.getContentText() + this.tagData.endTagString;
    };
    return UbbTagSegment;
}(UbbSegment));
/**
 * 定义 UBB 标签中包含的数据。
 */
var UbbTagData = /** @class */ (function () {
    function UbbTagData(orignalString, parameters) {
        if (!parameters) {
            throw new Error('参数不能为空。');
        }
        this._originalString = orignalString;
        this._parameters = parameters;
        // 填充命名参数
        this._namedParameters = {};
        for (var _i = 0, parameters_1 = parameters; _i < parameters_1.length; _i++) {
            var item = parameters_1[_i];
            if (item.name) {
                this._namedParameters[item.name] = item.value;
            }
        }
    }
    Object.defineProperty(UbbTagData.prototype, "orignalString", {
        /**
         * 获取标签包含的原始文字。
         * @returns {string} 标签包含的原始文字。
         */
        get: function () { return this._originalString; },
        enumerable: true,
        configurable: true
    });
    ;
    UbbTagData.parse = function (tagString) {
        // 空字符串处理
        if (!tagString) {
            return null;
        }
        var tokens = getAllTokens(tagString);
        // 无法分割标签
        if (tokens.length === 0) {
            return null;
        }
        var result = convertTokens(tokens);
        return new UbbTagData(tagString, result);
        /**
         * 提取字符串中的所有符号。
         */
        function getAllTokens(tokenString) {
            var index = 0;
            /**
             * 从字符串中扫描获得下一个完整的语义符号。
             * @returns {string} 下一个完整的语义符号。
             */
            function scanToken(lastTokenType) {
                /**
                 * 从当前位置开始扫描字符串，直到找到对应的结束字符。
                 * @returns {string} 从当前位置开始到相同字符结束的字符串。
                 */
                function scanQuoted() {
                    // 开始字符串。
                    var quoteMark = tokenString[index];
                    var endMarkLocation = tokenString.indexOf('"', index + 1);
                    // 找不到结束符号
                    if (endMarkLocation < 0) {
                        console.error('UBB: 解析标签字符串 %s 时无法找到位置 %d 处 %s 对应的结束字符串。', tokenString, index, quoteMark);
                        endMarkLocation = tokenString.length;
                    }
                    var start = index + 1;
                    index = endMarkLocation + 1;
                    return tokenString.substring(start, endMarkLocation);
                }
                while (true) {
                    // 超过范围。
                    if (index >= tokenString.length) {
                        return null;
                    }
                    var c = tokenString[index];
                    if (/\s/i.test(c)) {
                        index++;
                        continue;
                    }
                    else if (c === ',') {
                        index++;
                        return Token.itemSeperator;
                    }
                    else if (c === '=') {
                        index++;
                        return Token.nameValueSeperator;
                    }
                    else if (c === '"' || c === '\'') {
                        return Token.stringValue(scanQuoted());
                    }
                    else {
                        var start = index;
                        // 根据最后一个标记的类型，本次标记的终止符会有所变化
                        var matchExp = lastTokenType === TokenType.ItemSeperator ? /[=,]/i : /,/i;
                        // 寻找下个分隔符
                        var nextSeperator = tokenString.substring(index + 1).match(matchExp);
                        if (nextSeperator) {
                            // 结束位置
                            var endMarkLocation = nextSeperator.index + index + 1;
                            index = endMarkLocation;
                            return Token.stringValue(tokenString.substring(start, endMarkLocation));
                        }
                        else {
                            index = tokenString.length;
                            return Token.stringValue(tokenString.substring(start));
                        }
                    }
                }
            }
            var allTokens = [];
            var lastTokenType = TokenType.ItemSeperator;
            while (true) {
                var newToken = scanToken(lastTokenType);
                if (newToken) {
                    allTokens.push(newToken);
                    lastTokenType = newToken.type;
                }
                else {
                    break;
                }
            }
            return allTokens;
        }
        /**
         * 将令牌转换为参数集合。
         * @param tokens 要转换的令牌的数组。
         */
        function convertTokens(tokens) {
            var parameters = [];
            if (!tokens || tokens.length === 0) {
                console.error('UBB: 无法将标签字符串 %s 解析为参数的集合。', tagString);
                return parameters;
            }
            var lastName = null;
            var lastValue = null;
            var lastTokenType = TokenType.ItemSeperator;
            for (var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++) {
                var token = tokens_1[_i];
                switch (token.type) {
                    case TokenType.ItemSeperator:
                        parameters.push(new UbbTagParameter(lastName, lastValue));
                        lastName = null;
                        lastValue = null;
                        lastTokenType = TokenType.ItemSeperator;
                        break;
                    case TokenType.NameValueSeperator:
                        if (lastTokenType !== TokenType.String) {
                            throw new Error('名称值分隔符只能出现在值之后。');
                        }
                        lastName = lastValue;
                        lastValue = null;
                        lastTokenType = TokenType.NameValueSeperator;
                        break;
                    default:
                        if (lastTokenType === TokenType.String) {
                            throw new Error('不能连续出现多个值。');
                        }
                        lastValue = token.value;
                        lastTokenType = TokenType.String;
                        break;
                }
            }
            // 添加最后一个值
            parameters.push(new UbbTagParameter(lastName, lastValue));
            // 第一个项目需要特殊处理，默认是名称而非值
            if (!parameters[0].name) {
                parameters[0] = new UbbTagParameter(parameters[0].value, null);
            }
            return parameters;
        }
    };
    Object.defineProperty(UbbTagData.prototype, "tagName", {
        /**
         * 获取标签的名称。
         * @returns {string} 标签的名称。
         */
        get: function () {
            return this._parameters[0].name;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UbbTagData.prototype, "startTagString", {
        /**
         * 获取标签的开始标记字符串。
         * @returns {string} 标签的开始标记字符串。
         */
        get: function () {
            return "[" + this.orignalString + "]";
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UbbTagData.prototype, "endTagString", {
        /**
         * 获取标签的结束标记字符串。
         * @returns {string} 标签的结束标记字符串。
         */
        get: function () {
            return "[/" + this.tagName + "]";
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UbbTagData.prototype, "mainValue", {
        /**
         * 获取标签的主要值，也即紧跟在标签名称和等号后的值。
         * @returns {string} 标签的主要值。
         */
        get: function () {
            return this._parameters[0].value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * 获取给定参数的值。
     * @param indexOrName 要获取的参数的索引或者名称。
     * @returns {string} 给定位置参数的值。
     */
    UbbTagData.prototype.value = function (indexOrName) {
        if (typeof indexOrName === 'number') {
            return this._parameters[indexOrName].value;
        }
        else if (typeof indexOrName === 'string') {
            return this._namedParameters[indexOrName];
        }
        else {
            throw new Error('参数必须是字符串或者数字。');
        }
    };
    /**
     * 获取给定参数的名称。
     * @param index 要获取的参数的索引。
     * @returns {string} 给定位置参数的名称。
     */
    UbbTagData.prototype.name = function (index) {
        return this._parameters[index].name;
    };
    Object.defineProperty(UbbTagData.prototype, "parameterCount", {
        /**
         * 获取当前标签中包含的参数的个数。
         */
        get: function () {
            return this._parameters.length;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * 获取给定的参数。
     * @param index 要获取的参数的索引。
     * @returns {UbbTagParameter} 给定位置的参数。
     */
    UbbTagData.prototype.parameter = function (index) {
        return this._parameters[index];
    };
    return UbbTagData;
}());
exports.UbbTagData = UbbTagData;
/**
 * 表示 UBB 标签中单个参数的内容。
 */
var UbbTagParameter = /** @class */ (function () {
    /**
     * 初始化一个对象的新实例。
     * @param name 新参数的名称。
     * @param value 新参数的值。
     */
    function UbbTagParameter(name, value) {
        this._name = name;
        this._value = value;
    }
    Object.defineProperty(UbbTagParameter.prototype, "name", {
        /**
         * 获取参数的名称。如果参数没有名称，则该属性为 null。
         */
        get: function () {
            return this._name;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UbbTagParameter.prototype, "value", {
        /**
         * 获取参数的值。如果该参数没有值，则该属性为 null。
         */
        get: function () {
            return this._value;
        },
        enumerable: true,
        configurable: true
    });
    return UbbTagParameter;
}());
/**
 * 定义标签的处理模式。
 */
var UbbTagMode;
(function (UbbTagMode) {
    /**
     * 标签内部允许其它 UBB 标签。处理程序将递归处理子内容，直到遇到该标签的结束标签。
     */
    UbbTagMode[UbbTagMode["Recursive"] = 0] = "Recursive";
    /**
     * 标签内部只允许纯文字，处理程序将不在递归解析内容，而是直接寻找结束标签，并将中间的内容作为纯文字进行处理。
     */
    UbbTagMode[UbbTagMode["Text"] = 1] = "Text";
    /**
     * 标签是不允许内容。在这种状况下，标签之后的内容将被视为和标签同级的新内容；一个例外情况是在标签标记后直接写入结束标记，如果遇到这种情况，则忽略结束标记。
     */
    UbbTagMode[UbbTagMode["Empty"] = 2] = "Empty";
})(UbbTagMode = exports.UbbTagMode || (exports.UbbTagMode = {}));
/**
 * 表示 UBB 文字处理程序的基类。
 */
var UbbTextHandler = /** @class */ (function () {
    function UbbTextHandler() {
    }
    return UbbTextHandler;
}());
exports.UbbTextHandler = UbbTextHandler;
/**
 * 定义 UBB 处理程序的基类。
 */
var UbbTagHandler = /** @class */ (function () {
    function UbbTagHandler() {
    }
    /**
     * 通过对标签的分析，判断该标签的类型。
     * @param tagData 标签中包含的内容。
     */
    UbbTagHandler.prototype.getTagMode = function (tagData) {
        return UbbTagMode.Recursive;
    };
    /**
     * 在解析完成处理标签内部的内容后，将标签本身作为文本处理。
     * @param tagData 标签相关的数据。
     * @param content 标签的内容。
     */
    UbbTagHandler.renderTagAsString = function (tagData, content) {
        return [
            tagData.startTagString,
            content,
            tagData.endTagString
        ];
    };
    return UbbTagHandler;
}());
exports.UbbTagHandler = UbbTagHandler;
/**
 * 定义基于文字的 UBB 标签处理程序的基类。
 */
var TextTagHandler = /** @class */ (function (_super) {
    __extends(TextTagHandler, _super);
    function TextTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    TextTagHandler.prototype.exec = function (tagSegment, context) {
        return this.execCore(tagSegment.getContentText(), tagSegment.tagData, context);
    };
    return TextTagHandler;
}(UbbTagHandler));
exports.TextTagHandler = TextTagHandler;
/**
 * 定义递归处理内容的标签处理程序的基类。
 */
var RecursiveTagHandler = /** @class */ (function (_super) {
    __extends(RecursiveTagHandler, _super);
    function RecursiveTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    RecursiveTagHandler.prototype.exec = function (tagSegment, context) {
        var result = [];
        for (var _i = 0, _a = tagSegment.subSegments; _i < _a.length; _i++) {
            var subSeg = _a[_i];
            result.push(context.engine.execSegment(subSeg, context));
        }
        return this.execCore(result, tagSegment.tagData, context);
    };
    return RecursiveTagHandler;
}(UbbTagHandler));
exports.RecursiveTagHandler = RecursiveTagHandler;
/**
 * 定义 UBB 处理程序列表。
 */
var UbbHandlerList = /** @class */ (function () {
    function UbbHandlerList() {
        /**
         * 命名的内部标签处理器列表。
         */
        this._namedTagHandlerList = {};
        /**
         * 未命名的内部标签处理程序列表。
         */
        this._unnamedTagHanlderList = [];
        /**
         * 文字处理标签程序列表。
         */
        this._textHandlers = [];
    }
    /**
     * 获取给定标签名称的处理程序。
     * @param supportedTagNames 标签名称。
     * @returns {UbbTagHandler} 标签处理程序。
     */
    UbbHandlerList.prototype.getHandler = function (tagName) {
        // 首先寻找命名的标签处理程序
        var namedTagHandler = this._namedTagHandlerList[tagName];
        // 找到
        if (namedTagHandler) {
            return namedTagHandler;
        }
        // 寻找未命名的标签处理程序
        for (var _i = 0, _a = this._unnamedTagHanlderList; _i < _a.length; _i++) {
            var handler = _a[_i];
            if (handler.supportedTagNames.test(tagName)) {
                return handler;
            }
        }
        // 找不到任何标签处理程序
        return null;
    };
    /**
     * 注册一个给定的标签处理程序。
     * @param tagHandlerClass 处理程序对象的类型。
     */
    UbbHandlerList.prototype.register = function (tagHandlerClass) {
        // ReSharper disable once InconsistentNaming
        this.registerInstance(new tagHandlerClass());
    };
    /**
     * 注册一个给定的处理程序实例。
     * @param tagHandler 要注册的标签处理器。
     */
    UbbHandlerList.prototype.registerInstance = function (tagHandler) {
        if (!tagHandler || !tagHandler.supportedTagNames) {
            throw new Error('参数 tagHandler 无效，或者未提供正确的标签名称。');
        }
        if (typeof tagHandler.supportedTagNames === 'string') {
            this.registerNamedCore([tagHandler.supportedTagNames], tagHandler);
        }
        else if (tagHandler.supportedTagNames instanceof Array) {
            this.registerNamedCore(tagHandler.supportedTagNames, tagHandler);
        }
        else {
            this.registerUnnamedCore(tagHandler);
        }
    };
    /**
     * 注册一个给定的文字处理程序。
     * @param textHandlerClass 文字处理程序对象的类型。
     */
    UbbHandlerList.prototype.registerText = function (textHandlerClass) {
        // ReSharper disable once InconsistentNaming
        this.registerTextInstance(new textHandlerClass());
    };
    /**
     * 注册一个文本处理程序实例。
     * @param textHandler 要注册的文本处理程序。
     */
    UbbHandlerList.prototype.registerTextInstance = function (textHandler) {
        if (!textHandler) {
            throw new Error('参数 textHandler 无效。');
        }
        this._textHandlers.push(textHandler);
    };
    /**
     * 注册命名处理程序的核心方法。
     * @param tagNames 处理程序关联的一个或多个标签名。
     * @param tagHandler 处理程序对象。
     */
    UbbHandlerList.prototype.registerNamedCore = function (tagNames, tagHandler) {
        for (var _i = 0, tagNames_1 = tagNames; _i < tagNames_1.length; _i++) {
            var tagName = tagNames_1[_i];
            if (tagName in this._namedTagHandlerList) {
                console.error('标签 %s 的处理程序已经被注册。', tagName);
            }
            else {
                this._namedTagHandlerList[tagName] = tagHandler;
            }
        }
    };
    /**
     * 注册未命名处理程序的核心方法。
     * @param tagHandler 处理程序对象。
     */
    UbbHandlerList.prototype.registerUnnamedCore = function (tagHandler) {
        this._unnamedTagHanlderList.push(tagHandler);
    };
    return UbbHandlerList;
}());
/**
 * 提供处理 UBB 程序的核心方法。
 */
var UbbCodeEngine = /** @class */ (function () {
    function UbbCodeEngine() {
        /**
         * 获取该引擎中注册的处理程序。
         */
        this._tagHandlers = new UbbHandlerList();
        /**
         * 获取或设置该引擎中注册的文字处理程序。
         */
        this._textHandlers = [];
        /**
         * 引擎保存的上下文数据。
         */
        this._data = new UbbCodeContextData();
    }
    Object.defineProperty(UbbCodeEngine.prototype, "textHandlers", {
        /**
         * 获取该引擎中注册的文字处理程序。
         * @returns {UbbTextHandler[]} 该引擎中注册的文字处理程序。
         */
        get: function () {
            return this._textHandlers;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UbbCodeEngine.prototype, "tagHandlers", {
        /**
         * 该引擎中注册的处理程序。
         */
        get: function () {
            return this._tagHandlers;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UbbCodeEngine.prototype, "data", {
        /**
         * 获取引擎保存的上下文数据。
         * @returns {UbbCodeContextData} 引擎保存的上下文数据。
         */
        get: function () {
            return this._data;
        },
        enumerable: true,
        configurable: true
    });
    ;
    /**
     * 获取给定标签名称的处理程序。
     * @param supportedTagNames 给定的标签名称。
     * @returns {UbbTagHandler} 给定标签名称的处理程序。
     */
    UbbCodeEngine.prototype.getHandler = function (tagName) {
        return this._tagHandlers.getHandler(tagName);
    };
    /**
     * 执行 UBB 解析的核心函数。
     * @param content 要解析的内容。
     * @param options 解析使用的相关选项。
     * @returns {string} 解析后的 HTML 代码。
     */
    UbbCodeEngine.prototype.exec = function (content, options) {
        var context = new UbbCodeContext(this, options);
        return this.execCore(content, context);
    };
    /**
     * 尝试找到关闭标记对应的开始标记，并关闭该标记。
     * @param supportedTagNames 标记名称。
     * @param parent 该标记的第一个上级。
     * @returns {UbbTagSegment} 新的上级标签。
     */
    UbbCodeEngine.tryHandleEndTag = function (tagName, parent) {
        var p = parent;
        // 循环找到合适的上级，并关闭上级
        while (p && p.tagData) {
            if (p.tagData.tagName === tagName) {
                p.close();
                return p.parent;
            }
            p = p.parent;
        }
        // 没有找到任何上级
        console.warn('UBB: 找不到结束标签 %s 的开始标签，该标签将被作为一般文字处理。', tagName);
        parent.subSegments.push(new UbbTextSegment("[/" + tagName + "]", parent));
        return parent;
    };
    /**
     * 构建标签的核心方法。
     * @param content 包含多个标签的字符串。
     * @param parent 字符串的上级容器。
     */
    UbbCodeEngine.prototype.buildSegmentsCore = function (content, parent) {
        var tagMatchRegExp = /([\s\S]*?)\[(.+?)]/gi;
        while (true) {
            var startIndex = tagMatchRegExp.lastIndex;
            var tagMatch = tagMatchRegExp.exec(content);
            // 未找到标记，则这是最后一个标签。
            if (!tagMatch) {
                // 提取最后一段内容，如果找到，附加到最后
                var remainContent = content.substring(startIndex);
                if (remainContent) {
                    parent.subSegments.push(new UbbTextSegment(remainContent, parent));
                }
                return;
            }
            var beforeText = tagMatch[1], tagString = tagMatch[2];
            // 添加前面的文字。
            if (beforeText) {
                parent.subSegments.push(new UbbTextSegment(beforeText, parent));
            }
            // 检测是否是结束标记
            var endTagMatch = tagString.match(/^\/(.+)$/i);
            if (endTagMatch) {
                var endTagName = endTagMatch[1];
                parent = UbbCodeEngine.tryHandleEndTag(endTagName, parent);
            }
            else {
                try {
                    // 提取新的标签数据
                    var tagData = UbbTagData.parse(tagString);
                    // 获得处理程序
                    var handler = this._tagHandlers.getHandler(tagData.tagName);
                    // 没有处理程序，输出警告
                    if (!handler) {
                        console.warn('标签字符串 %s 中给定的标签名 %s 没有有效的处理程序，将被视为一般文字', tagString, tagData.tagName);
                        parent.subSegments.push(new UbbTextSegment(tagData.startTagString, parent));
                        continue;
                    }
                    // 获取标签类型。
                    var tagMode = handler.getTagMode(tagData);
                    switch (tagMode) {
                        // 递归处理
                        case UbbTagMode.Recursive:
                            var newTag = new UbbTagSegment(tagData, parent);
                            parent.subSegments.push(newTag);
                            parent = newTag;
                            break;
                        // 文本模式下，直接寻找结束标签
                        case UbbTagMode.Text:
                            var endTagMatch_1 = content.indexOf(tagData.endTagString, tagMatchRegExp.lastIndex);
                            // 没找到结束标签
                            if (endTagMatch_1 === -1) {
                                console.warn('找不到标签字符串 %s 对应的结束标签，该内容将被视为一般文字。', tagData.startTagString);
                                parent.subSegments.push(new UbbTextSegment(tagData.startTagString, parent));
                            }
                            else {
                                // 直接创建新标签及其子标签，忽略中间内容
                                var innerContent = content.substring(tagMatchRegExp.lastIndex, endTagMatch_1);
                                var newTag_1 = new UbbTagSegment(tagData, parent);
                                parent.subSegments.push(newTag_1);
                                parent = newTag_1;
                                var subTag = new UbbTextSegment(innerContent, newTag_1);
                                newTag_1.subSegments.push(subTag);
                                newTag_1.close();
                                // 让下次标签搜索直接从之后开始
                                tagMatchRegExp.lastIndex = endTagMatch_1 + tagData.endTagString.length;
                            }
                            break;
                        // 单模式标签
                        case UbbTagMode.Empty:
                            // 创建新标签并直接结束
                            var newEmptyTag = new UbbTagSegment(tagData, parent);
                            parent.subSegments.push(newEmptyTag);
                            newEmptyTag.close();
                            // 如果紧跟着结束标签，则忽略结束标签
                            if (content.startsWith(tagData.endTagString, tagMatchRegExp.lastIndex)) {
                                tagMatchRegExp.lastIndex += tagData.endTagString.length;
                            }
                            break;
                        default:
                            throw new Error("\u6807\u7B7E " + tagData.tagName + " \u7684\u5904\u7406\u7A0B\u5E8F\u53D1\u751F\u9519\u8BEF");
                    }
                }
                catch (error) {
                    // 提取数据失败，则视为没有匹配
                    console.warn('标签字符串 %s 解析失败，将被视为普通文字。', tagString);
                    parent.subSegments.push(new UbbTextSegment("[" + tagString + "]", parent));
                }
            }
        }
    };
    /**
     * 执行 UBB 处理的核心函数。
     * @param content 要处理的内容。
     * @param context UBB 处理上下文。
     * @returns {JSX.Element} 处理完成的 HTML 内容。
     */
    UbbCodeEngine.prototype.execCore = function (content, context) {
        var root = new UbbTagSegment(null, null);
        this.buildSegmentsCore(content, root);
        root.close();
        var result = [];
        for (var _i = 0, _a = root.subSegments; _i < _a.length; _i++) {
            var item = _a[_i];
            result.push(this.execSegment(item, context));
        }
        return result;
    };
    /**
     * 执行文本替换的核心方法。
     * @param text 文本内容。
     * @param context UBB 上下文对象。
     */
    UbbCodeEngine.prototype.execTextCore = function (text, context) {
        for (var _i = 0, _a = this.textHandlers; _i < _a.length; _i++) {
            var textHandler = _a[_i];
            // 尝试匹配内容
            var matchResult = text.match(textHandler.supportedContent);
            // 如果未匹配到内容，返回下一个
            if (!matchResult) {
                continue;
            }
            var before = text.substr(0, matchResult.index);
            var after = text.substr(matchResult.index + matchResult[0].length);
            var result = [];
            if (before) {
                result.push(this.execTextCore(before, context));
            }
            result.push(textHandler.exec(matchResult, context));
            if (after) {
                result.push(this.execTextCore(after, context));
            }
            return result;
        }
        // 未找到任何处理程序
        return text;
    };
    /**
     * 对给定的 UBB 文本执行文本替换。
     * @param text 要替换的内容。
     * @param context 替换后的结果。
     */
    UbbCodeEngine.prototype.execText = function (text, context) {
        return this.execCore(text, context);
    };
    UbbCodeEngine.prototype.execSegment = function (segment, context) {
        if (segment.type === UbbSegmentType.Text) {
            var text = segment.text;
            return this.execTextCore(text, context);
        }
        else {
            var tag = segment;
            var handler = this.getHandler(tag.tagData.tagName);
            if (!handler) {
                console.warn('没有找到标签 %s 的处理程序，将被视为一般文字。', tag.tagData.tagName);
                return tag.getFullText();
            }
            return handler.exec(tag, context);
        }
    };
    return UbbCodeEngine;
}());
exports.UbbCodeEngine = UbbCodeEngine;


/***/ }),
/* 5 */
/***/ (function(module, exports) {

// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
var global = module.exports = typeof window != 'undefined' && window.Math == Math
  ? window : typeof self != 'undefined' && self.Math == Math ? self
  // eslint-disable-next-line no-new-func
  : Function('return this')();
if (typeof __g == 'number') __g = global; // eslint-disable-line no-undef


/***/ }),
/* 6 */
/***/ (function(module, exports) {

module.exports = function (exec) {
  try {
    return !!exec();
  } catch (e) {
    return true;
  }
};


/***/ }),
/* 7 */
/***/ (function(module, exports) {

module.exports = function (it) {
  return typeof it === 'object' ? it !== null : typeof it === 'function';
};


/***/ }),
/* 8 */
/***/ (function(module, exports) {

module.exports = ReactRouterDOM;

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

var store = __webpack_require__(68)('wks');
var uid = __webpack_require__(42);
var Symbol = __webpack_require__(5).Symbol;
var USE_SYMBOL = typeof Symbol == 'function';

var $exports = module.exports = function (name) {
  return store[name] || (store[name] =
    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));
};

$exports.store = store;


/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

// Thank's IE8 for his funny defineProperty
module.exports = !__webpack_require__(6)(function () {
  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;
});


/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

var anObject = __webpack_require__(3);
var IE8_DOM_DEFINE = __webpack_require__(122);
var toPrimitive = __webpack_require__(27);
var dP = Object.defineProperty;

exports.f = __webpack_require__(10) ? Object.defineProperty : function defineProperty(O, P, Attributes) {
  anObject(O);
  P = toPrimitive(P, true);
  anObject(Attributes);
  if (IE8_DOM_DEFINE) try {
    return dP(O, P, Attributes);
  } catch (e) { /* empty */ }
  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');
  if ('value' in Attributes) O[P] = Attributes.value;
  return O;
};


/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

// 7.1.15 ToLength
var toInteger = __webpack_require__(29);
var min = Math.min;
module.exports = function (it) {
  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991
};


/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

// 7.1.13 ToObject(argument)
var defined = __webpack_require__(28);
module.exports = function (it) {
  return Object(defined(it));
};


/***/ }),
/* 14 */
/***/ (function(module, exports) {

module.exports = function (it) {
  if (typeof it != 'function') throw TypeError(it + ' is not a function!');
  return it;
};


/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(386);
/**
 * 定义 UBBContainer 组件需要使用的属性。
 */
var UbbContainerProps = /** @class */ (function () {
    function UbbContainerProps() {
    }
    return UbbContainerProps;
}());
exports.UbbContainerProps = UbbContainerProps;
/**
 * 提供用于解析 UBB 的核心组件。
 */
var UbbContainer = /** @class */ (function (_super) {
    __extends(UbbContainer, _super);
    function UbbContainer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    UbbContainer.prototype.render = function () {
        // 获取引擎对象，如果不使用引擎对象则创建一个默认的
        var engine = this.props.engine || Ubb.createEngine();
        // 获取选项，如果不设置选项则创建一个默认的
        var options = this.props.options || new Ubb.UbbCodeOptions();
        //code为一段UBB字符串
        var code = this.props.code;
        //替换掉code中形如&#\d{5};的部分
        //let r = /&#(\d{5});/gi;
        //code = code.replace(r, (match, grp) => (String.fromCharCode(grp)));
        var ubbHtml = engine.exec(code || '', options);
        //打开回车与空格
        var style = {
            whiteSpace: 'pre-wrap',
            width: "100%"
        };
        // 注意兼容性设置， HTML4 不支持 article 标签
        if (options.compatibility === Ubb.UbbCompatiblityMode.Transitional) {
            return React.createElement("blockquote", { style: style }, ubbHtml);
        }
        else {
            return React.createElement("article", { style: style }, ubbHtml);
        }
    };
    return UbbContainer;
}(React.Component));
exports.UbbContainer = UbbContainer;


/***/ }),
/* 16 */
/***/ (function(module, exports) {

var hasOwnProperty = {}.hasOwnProperty;
module.exports = function (it, key) {
  return hasOwnProperty.call(it, key);
};


/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

var dP = __webpack_require__(11);
var createDesc = __webpack_require__(41);
module.exports = __webpack_require__(10) ? function (object, key, value) {
  return dP.f(object, key, createDesc(1, value));
} : function (object, key, value) {
  object[key] = value;
  return object;
};


/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(5);
var hide = __webpack_require__(17);
var has = __webpack_require__(16);
var SRC = __webpack_require__(42)('src');
var TO_STRING = 'toString';
var $toString = Function[TO_STRING];
var TPL = ('' + $toString).split(TO_STRING);

__webpack_require__(32).inspectSource = function (it) {
  return $toString.call(it);
};

(module.exports = function (O, key, val, safe) {
  var isFunction = typeof val == 'function';
  if (isFunction) has(val, 'name') || hide(val, 'name', key);
  if (O[key] === val) return;
  if (isFunction) has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));
  if (O === global) {
    O[key] = val;
  } else if (!safe) {
    delete O[key];
    hide(O, key, val);
  } else if (O[key]) {
    O[key] = val;
  } else {
    hide(O, key, val);
  }
// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative
})(Function.prototype, TO_STRING, function toString() {
  return typeof this == 'function' && this[SRC] || $toString.call(this);
});


/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
var fails = __webpack_require__(6);
var defined = __webpack_require__(28);
var quot = /"/g;
// B.2.3.2.1 CreateHTML(string, tag, attribute, value)
var createHTML = function (string, tag, attribute, value) {
  var S = String(defined(string));
  var p1 = '<' + tag;
  if (attribute !== '') p1 += ' ' + attribute + '="' + String(value).replace(quot, '&quot;') + '"';
  return p1 + '>' + S + '</' + tag + '>';
};
module.exports = function (NAME, exec) {
  var O = {};
  O[NAME] = exec(createHTML);
  $export($export.P + $export.F * fails(function () {
    var test = ''[NAME]('"');
    return test !== test.toLowerCase() || test.split('"').length > 3;
  }), 'String', O);
};


/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

// to indexed object, toObject with fallback for non-array-like ES3 strings
var IObject = __webpack_require__(59);
var defined = __webpack_require__(28);
module.exports = function (it) {
  return IObject(defined(it));
};


/***/ }),
/* 21 */
/***/ (function(module, exports, __webpack_require__) {

var pIE = __webpack_require__(60);
var createDesc = __webpack_require__(41);
var toIObject = __webpack_require__(20);
var toPrimitive = __webpack_require__(27);
var has = __webpack_require__(16);
var IE8_DOM_DEFINE = __webpack_require__(122);
var gOPD = Object.getOwnPropertyDescriptor;

exports.f = __webpack_require__(10) ? gOPD : function getOwnPropertyDescriptor(O, P) {
  O = toIObject(O);
  P = toPrimitive(P, true);
  if (IE8_DOM_DEFINE) try {
    return gOPD(O, P);
  } catch (e) { /* empty */ }
  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);
};


/***/ }),
/* 22 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)
var has = __webpack_require__(16);
var toObject = __webpack_require__(13);
var IE_PROTO = __webpack_require__(93)('IE_PROTO');
var ObjectProto = Object.prototype;

module.exports = Object.getPrototypeOf || function (O) {
  O = toObject(O);
  if (has(O, IE_PROTO)) return O[IE_PROTO];
  if (typeof O.constructor == 'function' && O instanceof O.constructor) {
    return O.constructor.prototype;
  } return O instanceof Object ? ObjectProto : null;
};


/***/ }),
/* 23 */
/***/ (function(module, exports, __webpack_require__) {

// optional / simple context binding
var aFunction = __webpack_require__(14);
module.exports = function (fn, that, length) {
  aFunction(fn);
  if (that === undefined) return fn;
  switch (length) {
    case 1: return function (a) {
      return fn.call(that, a);
    };
    case 2: return function (a, b) {
      return fn.call(that, a, b);
    };
    case 3: return function (a, b, c) {
      return fn.call(that, a, b, c);
    };
  }
  return function (/* ...args */) {
    return fn.apply(that, arguments);
  };
};


/***/ }),
/* 24 */
/***/ (function(module, exports) {

var toString = {}.toString;

module.exports = function (it) {
  return toString.call(it).slice(8, -1);
};


/***/ }),
/* 25 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__(6);

module.exports = function (method, arg) {
  return !!method && fails(function () {
    // eslint-disable-next-line no-useless-call
    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);
  });
};


/***/ }),
/* 26 */
/***/ (function(module, exports) {

module.exports = ReactRedux;

/***/ }),
/* 27 */
/***/ (function(module, exports, __webpack_require__) {

// 7.1.1 ToPrimitive(input [, PreferredType])
var isObject = __webpack_require__(7);
// instead of the ES6 spec version, we didn't implement @@toPrimitive case
// and the second argument - flag - preferred type is a string
module.exports = function (it, S) {
  if (!isObject(it)) return it;
  var fn, val;
  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;
  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;
  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;
  throw TypeError("Can't convert object to primitive value");
};


/***/ }),
/* 28 */
/***/ (function(module, exports) {

// 7.2.1 RequireObjectCoercible(argument)
module.exports = function (it) {
  if (it == undefined) throw TypeError("Can't call method on  " + it);
  return it;
};


/***/ }),
/* 29 */
/***/ (function(module, exports) {

// 7.1.4 ToInteger
var ceil = Math.ceil;
var floor = Math.floor;
module.exports = function (it) {
  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);
};


/***/ }),
/* 30 */
/***/ (function(module, exports, __webpack_require__) {

// most Object methods by ES6 should accept primitives
var $export = __webpack_require__(0);
var core = __webpack_require__(32);
var fails = __webpack_require__(6);
module.exports = function (KEY, exec) {
  var fn = (core.Object || {})[KEY] || Object[KEY];
  var exp = {};
  exp[KEY] = exec(fn);
  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);
};


/***/ }),
/* 31 */
/***/ (function(module, exports, __webpack_require__) {

// 0 -> Array#forEach
// 1 -> Array#map
// 2 -> Array#filter
// 3 -> Array#some
// 4 -> Array#every
// 5 -> Array#find
// 6 -> Array#findIndex
var ctx = __webpack_require__(23);
var IObject = __webpack_require__(59);
var toObject = __webpack_require__(13);
var toLength = __webpack_require__(12);
var asc = __webpack_require__(110);
module.exports = function (TYPE, $create) {
  var IS_MAP = TYPE == 1;
  var IS_FILTER = TYPE == 2;
  var IS_SOME = TYPE == 3;
  var IS_EVERY = TYPE == 4;
  var IS_FIND_INDEX = TYPE == 6;
  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;
  var create = $create || asc;
  return function ($this, callbackfn, that) {
    var O = toObject($this);
    var self = IObject(O);
    var f = ctx(callbackfn, that, 3);
    var length = toLength(self.length);
    var index = 0;
    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;
    var val, res;
    for (;length > index; index++) if (NO_HOLES || index in self) {
      val = self[index];
      res = f(val, index, O);
      if (TYPE) {
        if (IS_MAP) result[index] = res;   // map
        else if (res) switch (TYPE) {
          case 3: return true;             // some
          case 5: return val;              // find
          case 6: return index;            // findIndex
          case 2: result.push(val);        // filter
        } else if (IS_EVERY) return false; // every
      }
    }
    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;
  };
};


/***/ }),
/* 32 */
/***/ (function(module, exports) {

var core = module.exports = { version: '2.5.1' };
if (typeof __e == 'number') __e = core; // eslint-disable-line no-undef


/***/ }),
/* 33 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

if (__webpack_require__(10)) {
  var LIBRARY = __webpack_require__(43);
  var global = __webpack_require__(5);
  var fails = __webpack_require__(6);
  var $export = __webpack_require__(0);
  var $typed = __webpack_require__(78);
  var $buffer = __webpack_require__(116);
  var ctx = __webpack_require__(23);
  var anInstance = __webpack_require__(49);
  var propertyDesc = __webpack_require__(41);
  var hide = __webpack_require__(17);
  var redefineAll = __webpack_require__(51);
  var toInteger = __webpack_require__(29);
  var toLength = __webpack_require__(12);
  var toIndex = __webpack_require__(148);
  var toAbsoluteIndex = __webpack_require__(45);
  var toPrimitive = __webpack_require__(27);
  var has = __webpack_require__(16);
  var classof = __webpack_require__(61);
  var isObject = __webpack_require__(7);
  var toObject = __webpack_require__(13);
  var isArrayIter = __webpack_require__(107);
  var create = __webpack_require__(46);
  var getPrototypeOf = __webpack_require__(22);
  var gOPN = __webpack_require__(47).f;
  var getIterFn = __webpack_require__(109);
  var uid = __webpack_require__(42);
  var wks = __webpack_require__(9);
  var createArrayMethod = __webpack_require__(31);
  var createArrayIncludes = __webpack_require__(69);
  var speciesConstructor = __webpack_require__(76);
  var ArrayIterators = __webpack_require__(112);
  var Iterators = __webpack_require__(55);
  var $iterDetect = __webpack_require__(73);
  var setSpecies = __webpack_require__(48);
  var arrayFill = __webpack_require__(111);
  var arrayCopyWithin = __webpack_require__(138);
  var $DP = __webpack_require__(11);
  var $GOPD = __webpack_require__(21);
  var dP = $DP.f;
  var gOPD = $GOPD.f;
  var RangeError = global.RangeError;
  var TypeError = global.TypeError;
  var Uint8Array = global.Uint8Array;
  var ARRAY_BUFFER = 'ArrayBuffer';
  var SHARED_BUFFER = 'Shared' + ARRAY_BUFFER;
  var BYTES_PER_ELEMENT = 'BYTES_PER_ELEMENT';
  var PROTOTYPE = 'prototype';
  var ArrayProto = Array[PROTOTYPE];
  var $ArrayBuffer = $buffer.ArrayBuffer;
  var $DataView = $buffer.DataView;
  var arrayForEach = createArrayMethod(0);
  var arrayFilter = createArrayMethod(2);
  var arraySome = createArrayMethod(3);
  var arrayEvery = createArrayMethod(4);
  var arrayFind = createArrayMethod(5);
  var arrayFindIndex = createArrayMethod(6);
  var arrayIncludes = createArrayIncludes(true);
  var arrayIndexOf = createArrayIncludes(false);
  var arrayValues = ArrayIterators.values;
  var arrayKeys = ArrayIterators.keys;
  var arrayEntries = ArrayIterators.entries;
  var arrayLastIndexOf = ArrayProto.lastIndexOf;
  var arrayReduce = ArrayProto.reduce;
  var arrayReduceRight = ArrayProto.reduceRight;
  var arrayJoin = ArrayProto.join;
  var arraySort = ArrayProto.sort;
  var arraySlice = ArrayProto.slice;
  var arrayToString = ArrayProto.toString;
  var arrayToLocaleString = ArrayProto.toLocaleString;
  var ITERATOR = wks('iterator');
  var TAG = wks('toStringTag');
  var TYPED_CONSTRUCTOR = uid('typed_constructor');
  var DEF_CONSTRUCTOR = uid('def_constructor');
  var ALL_CONSTRUCTORS = $typed.CONSTR;
  var TYPED_ARRAY = $typed.TYPED;
  var VIEW = $typed.VIEW;
  var WRONG_LENGTH = 'Wrong length!';

  var $map = createArrayMethod(1, function (O, length) {
    return allocate(speciesConstructor(O, O[DEF_CONSTRUCTOR]), length);
  });

  var LITTLE_ENDIAN = fails(function () {
    // eslint-disable-next-line no-undef
    return new Uint8Array(new Uint16Array([1]).buffer)[0] === 1;
  });

  var FORCED_SET = !!Uint8Array && !!Uint8Array[PROTOTYPE].set && fails(function () {
    new Uint8Array(1).set({});
  });

  var toOffset = function (it, BYTES) {
    var offset = toInteger(it);
    if (offset < 0 || offset % BYTES) throw RangeError('Wrong offset!');
    return offset;
  };

  var validate = function (it) {
    if (isObject(it) && TYPED_ARRAY in it) return it;
    throw TypeError(it + ' is not a typed array!');
  };

  var allocate = function (C, length) {
    if (!(isObject(C) && TYPED_CONSTRUCTOR in C)) {
      throw TypeError('It is not a typed array constructor!');
    } return new C(length);
  };

  var speciesFromList = function (O, list) {
    return fromList(speciesConstructor(O, O[DEF_CONSTRUCTOR]), list);
  };

  var fromList = function (C, list) {
    var index = 0;
    var length = list.length;
    var result = allocate(C, length);
    while (length > index) result[index] = list[index++];
    return result;
  };

  var addGetter = function (it, key, internal) {
    dP(it, key, { get: function () { return this._d[internal]; } });
  };

  var $from = function from(source /* , mapfn, thisArg */) {
    var O = toObject(source);
    var aLen = arguments.length;
    var mapfn = aLen > 1 ? arguments[1] : undefined;
    var mapping = mapfn !== undefined;
    var iterFn = getIterFn(O);
    var i, length, values, result, step, iterator;
    if (iterFn != undefined && !isArrayIter(iterFn)) {
      for (iterator = iterFn.call(O), values = [], i = 0; !(step = iterator.next()).done; i++) {
        values.push(step.value);
      } O = values;
    }
    if (mapping && aLen > 2) mapfn = ctx(mapfn, arguments[2], 2);
    for (i = 0, length = toLength(O.length), result = allocate(this, length); length > i; i++) {
      result[i] = mapping ? mapfn(O[i], i) : O[i];
    }
    return result;
  };

  var $of = function of(/* ...items */) {
    var index = 0;
    var length = arguments.length;
    var result = allocate(this, length);
    while (length > index) result[index] = arguments[index++];
    return result;
  };

  // iOS Safari 6.x fails here
  var TO_LOCALE_BUG = !!Uint8Array && fails(function () { arrayToLocaleString.call(new Uint8Array(1)); });

  var $toLocaleString = function toLocaleString() {
    return arrayToLocaleString.apply(TO_LOCALE_BUG ? arraySlice.call(validate(this)) : validate(this), arguments);
  };

  var proto = {
    copyWithin: function copyWithin(target, start /* , end */) {
      return arrayCopyWithin.call(validate(this), target, start, arguments.length > 2 ? arguments[2] : undefined);
    },
    every: function every(callbackfn /* , thisArg */) {
      return arrayEvery(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    },
    fill: function fill(value /* , start, end */) { // eslint-disable-line no-unused-vars
      return arrayFill.apply(validate(this), arguments);
    },
    filter: function filter(callbackfn /* , thisArg */) {
      return speciesFromList(this, arrayFilter(validate(this), callbackfn,
        arguments.length > 1 ? arguments[1] : undefined));
    },
    find: function find(predicate /* , thisArg */) {
      return arrayFind(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);
    },
    findIndex: function findIndex(predicate /* , thisArg */) {
      return arrayFindIndex(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);
    },
    forEach: function forEach(callbackfn /* , thisArg */) {
      arrayForEach(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    },
    indexOf: function indexOf(searchElement /* , fromIndex */) {
      return arrayIndexOf(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);
    },
    includes: function includes(searchElement /* , fromIndex */) {
      return arrayIncludes(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);
    },
    join: function join(separator) { // eslint-disable-line no-unused-vars
      return arrayJoin.apply(validate(this), arguments);
    },
    lastIndexOf: function lastIndexOf(searchElement /* , fromIndex */) { // eslint-disable-line no-unused-vars
      return arrayLastIndexOf.apply(validate(this), arguments);
    },
    map: function map(mapfn /* , thisArg */) {
      return $map(validate(this), mapfn, arguments.length > 1 ? arguments[1] : undefined);
    },
    reduce: function reduce(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars
      return arrayReduce.apply(validate(this), arguments);
    },
    reduceRight: function reduceRight(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars
      return arrayReduceRight.apply(validate(this), arguments);
    },
    reverse: function reverse() {
      var that = this;
      var length = validate(that).length;
      var middle = Math.floor(length / 2);
      var index = 0;
      var value;
      while (index < middle) {
        value = that[index];
        that[index++] = that[--length];
        that[length] = value;
      } return that;
    },
    some: function some(callbackfn /* , thisArg */) {
      return arraySome(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    },
    sort: function sort(comparefn) {
      return arraySort.call(validate(this), comparefn);
    },
    subarray: function subarray(begin, end) {
      var O = validate(this);
      var length = O.length;
      var $begin = toAbsoluteIndex(begin, length);
      return new (speciesConstructor(O, O[DEF_CONSTRUCTOR]))(
        O.buffer,
        O.byteOffset + $begin * O.BYTES_PER_ELEMENT,
        toLength((end === undefined ? length : toAbsoluteIndex(end, length)) - $begin)
      );
    }
  };

  var $slice = function slice(start, end) {
    return speciesFromList(this, arraySlice.call(validate(this), start, end));
  };

  var $set = function set(arrayLike /* , offset */) {
    validate(this);
    var offset = toOffset(arguments[1], 1);
    var length = this.length;
    var src = toObject(arrayLike);
    var len = toLength(src.length);
    var index = 0;
    if (len + offset > length) throw RangeError(WRONG_LENGTH);
    while (index < len) this[offset + index] = src[index++];
  };

  var $iterators = {
    entries: function entries() {
      return arrayEntries.call(validate(this));
    },
    keys: function keys() {
      return arrayKeys.call(validate(this));
    },
    values: function values() {
      return arrayValues.call(validate(this));
    }
  };

  var isTAIndex = function (target, key) {
    return isObject(target)
      && target[TYPED_ARRAY]
      && typeof key != 'symbol'
      && key in target
      && String(+key) == String(key);
  };
  var $getDesc = function getOwnPropertyDescriptor(target, key) {
    return isTAIndex(target, key = toPrimitive(key, true))
      ? propertyDesc(2, target[key])
      : gOPD(target, key);
  };
  var $setDesc = function defineProperty(target, key, desc) {
    if (isTAIndex(target, key = toPrimitive(key, true))
      && isObject(desc)
      && has(desc, 'value')
      && !has(desc, 'get')
      && !has(desc, 'set')
      // TODO: add validation descriptor w/o calling accessors
      && !desc.configurable
      && (!has(desc, 'writable') || desc.writable)
      && (!has(desc, 'enumerable') || desc.enumerable)
    ) {
      target[key] = desc.value;
      return target;
    } return dP(target, key, desc);
  };

  if (!ALL_CONSTRUCTORS) {
    $GOPD.f = $getDesc;
    $DP.f = $setDesc;
  }

  $export($export.S + $export.F * !ALL_CONSTRUCTORS, 'Object', {
    getOwnPropertyDescriptor: $getDesc,
    defineProperty: $setDesc
  });

  if (fails(function () { arrayToString.call({}); })) {
    arrayToString = arrayToLocaleString = function toString() {
      return arrayJoin.call(this);
    };
  }

  var $TypedArrayPrototype$ = redefineAll({}, proto);
  redefineAll($TypedArrayPrototype$, $iterators);
  hide($TypedArrayPrototype$, ITERATOR, $iterators.values);
  redefineAll($TypedArrayPrototype$, {
    slice: $slice,
    set: $set,
    constructor: function () { /* noop */ },
    toString: arrayToString,
    toLocaleString: $toLocaleString
  });
  addGetter($TypedArrayPrototype$, 'buffer', 'b');
  addGetter($TypedArrayPrototype$, 'byteOffset', 'o');
  addGetter($TypedArrayPrototype$, 'byteLength', 'l');
  addGetter($TypedArrayPrototype$, 'length', 'e');
  dP($TypedArrayPrototype$, TAG, {
    get: function () { return this[TYPED_ARRAY]; }
  });

  // eslint-disable-next-line max-statements
  module.exports = function (KEY, BYTES, wrapper, CLAMPED) {
    CLAMPED = !!CLAMPED;
    var NAME = KEY + (CLAMPED ? 'Clamped' : '') + 'Array';
    var GETTER = 'get' + KEY;
    var SETTER = 'set' + KEY;
    var TypedArray = global[NAME];
    var Base = TypedArray || {};
    var TAC = TypedArray && getPrototypeOf(TypedArray);
    var FORCED = !TypedArray || !$typed.ABV;
    var O = {};
    var TypedArrayPrototype = TypedArray && TypedArray[PROTOTYPE];
    var getter = function (that, index) {
      var data = that._d;
      return data.v[GETTER](index * BYTES + data.o, LITTLE_ENDIAN);
    };
    var setter = function (that, index, value) {
      var data = that._d;
      if (CLAMPED) value = (value = Math.round(value)) < 0 ? 0 : value > 0xff ? 0xff : value & 0xff;
      data.v[SETTER](index * BYTES + data.o, value, LITTLE_ENDIAN);
    };
    var addElement = function (that, index) {
      dP(that, index, {
        get: function () {
          return getter(this, index);
        },
        set: function (value) {
          return setter(this, index, value);
        },
        enumerable: true
      });
    };
    if (FORCED) {
      TypedArray = wrapper(function (that, data, $offset, $length) {
        anInstance(that, TypedArray, NAME, '_d');
        var index = 0;
        var offset = 0;
        var buffer, byteLength, length, klass;
        if (!isObject(data)) {
          length = toIndex(data);
          byteLength = length * BYTES;
          buffer = new $ArrayBuffer(byteLength);
        } else if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {
          buffer = data;
          offset = toOffset($offset, BYTES);
          var $len = data.byteLength;
          if ($length === undefined) {
            if ($len % BYTES) throw RangeError(WRONG_LENGTH);
            byteLength = $len - offset;
            if (byteLength < 0) throw RangeError(WRONG_LENGTH);
          } else {
            byteLength = toLength($length) * BYTES;
            if (byteLength + offset > $len) throw RangeError(WRONG_LENGTH);
          }
          length = byteLength / BYTES;
        } else if (TYPED_ARRAY in data) {
          return fromList(TypedArray, data);
        } else {
          return $from.call(TypedArray, data);
        }
        hide(that, '_d', {
          b: buffer,
          o: offset,
          l: byteLength,
          e: length,
          v: new $DataView(buffer)
        });
        while (index < length) addElement(that, index++);
      });
      TypedArrayPrototype = TypedArray[PROTOTYPE] = create($TypedArrayPrototype$);
      hide(TypedArrayPrototype, 'constructor', TypedArray);
    } else if (!fails(function () {
      TypedArray(1);
    }) || !fails(function () {
      new TypedArray(-1); // eslint-disable-line no-new
    }) || !$iterDetect(function (iter) {
      new TypedArray(); // eslint-disable-line no-new
      new TypedArray(null); // eslint-disable-line no-new
      new TypedArray(1.5); // eslint-disable-line no-new
      new TypedArray(iter); // eslint-disable-line no-new
    }, true)) {
      TypedArray = wrapper(function (that, data, $offset, $length) {
        anInstance(that, TypedArray, NAME);
        var klass;
        // `ws` module bug, temporarily remove validation length for Uint8Array
        // https://github.com/websockets/ws/pull/645
        if (!isObject(data)) return new Base(toIndex(data));
        if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {
          return $length !== undefined
            ? new Base(data, toOffset($offset, BYTES), $length)
            : $offset !== undefined
              ? new Base(data, toOffset($offset, BYTES))
              : new Base(data);
        }
        if (TYPED_ARRAY in data) return fromList(TypedArray, data);
        return $from.call(TypedArray, data);
      });
      arrayForEach(TAC !== Function.prototype ? gOPN(Base).concat(gOPN(TAC)) : gOPN(Base), function (key) {
        if (!(key in TypedArray)) hide(TypedArray, key, Base[key]);
      });
      TypedArray[PROTOTYPE] = TypedArrayPrototype;
      if (!LIBRARY) TypedArrayPrototype.constructor = TypedArray;
    }
    var $nativeIterator = TypedArrayPrototype[ITERATOR];
    var CORRECT_ITER_NAME = !!$nativeIterator
      && ($nativeIterator.name == 'values' || $nativeIterator.name == undefined);
    var $iterator = $iterators.values;
    hide(TypedArray, TYPED_CONSTRUCTOR, true);
    hide(TypedArrayPrototype, TYPED_ARRAY, NAME);
    hide(TypedArrayPrototype, VIEW, true);
    hide(TypedArrayPrototype, DEF_CONSTRUCTOR, TypedArray);

    if (CLAMPED ? new TypedArray(1)[TAG] != NAME : !(TAG in TypedArrayPrototype)) {
      dP(TypedArrayPrototype, TAG, {
        get: function () { return NAME; }
      });
    }

    O[NAME] = TypedArray;

    $export($export.G + $export.W + $export.F * (TypedArray != Base), O);

    $export($export.S, NAME, {
      BYTES_PER_ELEMENT: BYTES
    });

    $export($export.S + $export.F * fails(function () { Base.of.call(TypedArray, 1); }), NAME, {
      from: $from,
      of: $of
    });

    if (!(BYTES_PER_ELEMENT in TypedArrayPrototype)) hide(TypedArrayPrototype, BYTES_PER_ELEMENT, BYTES);

    $export($export.P, NAME, proto);

    setSpecies(NAME);

    $export($export.P + $export.F * FORCED_SET, NAME, { set: $set });

    $export($export.P + $export.F * !CORRECT_ITER_NAME, NAME, $iterators);

    if (!LIBRARY && TypedArrayPrototype.toString != arrayToString) TypedArrayPrototype.toString = arrayToString;

    $export($export.P + $export.F * fails(function () {
      new TypedArray(1).slice();
    }), NAME, { slice: $slice });

    $export($export.P + $export.F * (fails(function () {
      return [1, 2].toLocaleString() != new TypedArray([1, 2]).toLocaleString();
    }) || !fails(function () {
      TypedArrayPrototype.toLocaleString.call([1, 2]);
    })), NAME, { toLocaleString: $toLocaleString });

    Iterators[NAME] = CORRECT_ITER_NAME ? $nativeIterator : $iterator;
    if (!LIBRARY && !CORRECT_ITER_NAME) hide(TypedArrayPrototype, ITERATOR, $iterator);
  };
} else module.exports = function () { /* empty */ };


/***/ }),
/* 34 */
/***/ (function(module, exports, __webpack_require__) {

var Map = __webpack_require__(143);
var $export = __webpack_require__(0);
var shared = __webpack_require__(68)('metadata');
var store = shared.store || (shared.store = new (__webpack_require__(146))());

var getOrCreateMetadataMap = function (target, targetKey, create) {
  var targetMetadata = store.get(target);
  if (!targetMetadata) {
    if (!create) return undefined;
    store.set(target, targetMetadata = new Map());
  }
  var keyMetadata = targetMetadata.get(targetKey);
  if (!keyMetadata) {
    if (!create) return undefined;
    targetMetadata.set(targetKey, keyMetadata = new Map());
  } return keyMetadata;
};
var ordinaryHasOwnMetadata = function (MetadataKey, O, P) {
  var metadataMap = getOrCreateMetadataMap(O, P, false);
  return metadataMap === undefined ? false : metadataMap.has(MetadataKey);
};
var ordinaryGetOwnMetadata = function (MetadataKey, O, P) {
  var metadataMap = getOrCreateMetadataMap(O, P, false);
  return metadataMap === undefined ? undefined : metadataMap.get(MetadataKey);
};
var ordinaryDefineOwnMetadata = function (MetadataKey, MetadataValue, O, P) {
  getOrCreateMetadataMap(O, P, true).set(MetadataKey, MetadataValue);
};
var ordinaryOwnMetadataKeys = function (target, targetKey) {
  var metadataMap = getOrCreateMetadataMap(target, targetKey, false);
  var keys = [];
  if (metadataMap) metadataMap.forEach(function (_, key) { keys.push(key); });
  return keys;
};
var toMetaKey = function (it) {
  return it === undefined || typeof it == 'symbol' ? it : String(it);
};
var exp = function (O) {
  $export($export.S, 'Reflect', O);
};

module.exports = {
  store: store,
  map: getOrCreateMetadataMap,
  has: ordinaryHasOwnMetadata,
  get: ordinaryGetOwnMetadata,
  set: ordinaryDefineOwnMetadata,
  keys: ordinaryOwnMetadataKeys,
  key: toMetaKey,
  exp: exp
};


/***/ }),
/* 35 */
/***/ (function(module, exports) {

module.exports = $;

/***/ }),
/* 36 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
Object.defineProperty(exports, "__esModule", { value: true });
var ActionTypes = __webpack_require__(82);
exports.userLogIn = function () { return ({
    type: ActionTypes.USER_LOG_ON
}); };
exports.userLogOff = function () { return ({
    type: ActionTypes.USER_LOG_OFF
}); };
exports.changeUserInfo = function (newInfo) { return ({
    type: ActionTypes.CHANGE_USERINFO,
    newInfo: newInfo
}); };
exports.throwError = function (errorMessage) { return ({
    type: ActionTypes.ERROR,
    errorMessage: errorMessage
}); };
exports.changeCurrentVisitingUserPage = function (page, id) { return ({
    type: ActionTypes.CHANGE_VISITING_USER,
    page: page,
    id: id
}); };
exports.userNotFound = function () { return ({
    type: ActionTypes.USER_NOT_FOUND
}); };
var AddAwardAction = /** @class */ (function () {
    function AddAwardAction() {
        this.type = ActionTypes.ADD_AWARD;
    }
    return AddAwardAction;
}());
exports.AddAwardAction = AddAwardAction;


/***/ }),
/* 37 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
/**
 * 表示应用程序的状态。
 */
var AppState = /** @class */ (function () {
    function AppState() {
    }
    return AppState;
}());
exports.AppState = AppState;
/**
 * 投票状态
 */
var TopicVoteState = /** @class */ (function () {
    function TopicVoteState() {
    }
    return TopicVoteState;
}());
exports.TopicVoteState = TopicVoteState;
/**
 * 发帖内容状态
 */
var PostTopicState = /** @class */ (function () {
    function PostTopicState() {
    }
    return PostTopicState;
}());
exports.PostTopicState = PostTopicState;
/**
 * 作者信息状态
 */
var AuthorMessageState = /** @class */ (function () {
    function AuthorMessageState() {
    }
    return AuthorMessageState;
}());
exports.AuthorMessageState = AuthorMessageState;
/**
 * 题目信息状态
 */
var TopicTitleState = /** @class */ (function () {
    function TopicTitleState() {
    }
    return TopicTitleState;
}());
exports.TopicTitleState = TopicTitleState;
/**
 * 文章内容
 */
var ContentState = /** @class */ (function () {
    function ContentState() {
    }
    return ContentState;
}());
exports.ContentState = ContentState;
/**
 * 点赞信息状态
 */
var TopicGoodState = /** @class */ (function () {
    function TopicGoodState() {
    }
    return TopicGoodState;
}());
exports.TopicGoodState = TopicGoodState;
/**
 * 回复者状态
 */
var ReplierState = /** @class */ (function () {
    function ReplierState() {
    }
    return ReplierState;
}());
exports.ReplierState = ReplierState;
var ListHeadState = /** @class */ (function () {
    function ListHeadState() {
    }
    return ListHeadState;
}());
exports.ListHeadState = ListHeadState;
var ListNoticeState = /** @class */ (function () {
    function ListNoticeState() {
    }
    return ListNoticeState;
}());
exports.ListNoticeState = ListNoticeState;
var ListTagState = /** @class */ (function () {
    function ListTagState() {
    }
    return ListTagState;
}());
exports.ListTagState = ListTagState;
/**
 * 内容列表页面的状态。
 */
var ListContentState = /** @class */ (function () {
    function ListContentState() {
    }
    return ListContentState;
}());
exports.ListContentState = ListContentState;
var TopicTitleAndContentState = /** @class */ (function () {
    /*  constructor(title, authorName, lastReply) {
          this.authorName = authorName;
          this.lastReply = lastReply;
            this.title = title;
      }*/
    function TopicTitleAndContentState() {
        //this.userName = userName;
        //this.title = title;
        //this.id = topicid;
        //this.userId = userId;
        //this.lastPostUser = lastPostUser;
        //this.lastPostTime = lastPostTime;
        //this.likeCount = likeCount;
        //this.dislikeCount = dislikeCount;
        //this.replyCount = replyCount;
        //this.highlightInfo = highlightInfo;
        //this.topState = topState;
        //this.state = state;
    }
    return TopicTitleAndContentState;
}());
exports.TopicTitleAndContentState = TopicTitleAndContentState;
/**
 * 定义页码列表组件的状态。
 */
var ListPagerState = /** @class */ (function () {
    function ListPagerState() {
    }
    return ListPagerState;
}());
exports.ListPagerState = ListPagerState;
var PagerState = /** @class */ (function () {
    function PagerState(page) {
        this.pageNumber = page;
    }
    return PagerState;
}());
exports.PagerState = PagerState;
var TopicState = /** @class */ (function () {
    function TopicState(userName, title, content, time, signature, userImgUrl, userId, likeNumber, dislikeNumber, postId, isAnonymous, contentType, isFollowing, fanCount, likeInfo, awardInfo) {
        this.userName = userName;
        this.time = time;
        this.title = title;
        this.content = content;
        this.signature = signature;
        this.userImgUrl = userImgUrl;
        this.userId = userId;
        this.likeNumber = likeNumber;
        this.dislikeNumber = dislikeNumber;
        this.postId = postId;
        this.isAnonymous = isAnonymous;
        this.contentType = contentType;
        this.isFollowing = isFollowing;
        this.fanCount = fanCount;
        this.likeInfo = likeInfo;
        this.awardInfo = awardInfo;
    }
    return TopicState;
}());
exports.TopicState = TopicState;
/**
 * 登录状态
 */
var LoginState = /** @class */ (function () {
    function LoginState() {
    }
    return LoginState;
}());
exports.LoginState = LoginState;
/**
 * 已登录状态
 */
var AlreadyLoginState = /** @class */ (function () {
    function AlreadyLoginState() {
    }
    return AlreadyLoginState;
}());
exports.AlreadyLoginState = AlreadyLoginState;
/**
 * 版面类
 */
var Board = /** @class */ (function () {
    //构造方法
    function Board(name, todayPostCount, totalPostCount, boardID, master) {
        this.name = name;
        this.todayPostCount = todayPostCount;
        this.totalPostCount = totalPostCount;
        this.id = boardID;
        this.masters = master;
    }
    return Board;
}());
exports.Board = Board;
var BoardState = /** @class */ (function () {
    function BoardState() {
    }
    return BoardState;
}());
exports.BoardState = BoardState;
/**
* 用户信息
*/
var UserInfo = /** @class */ (function () {
    function UserInfo() {
    }
    return UserInfo;
}());
exports.UserInfo = UserInfo;
/**
* 表示用户最近帖子
*/
var UserRecentPost = /** @class */ (function () {
    function UserRecentPost() {
    }
    return UserRecentPost;
}());
exports.UserRecentPost = UserRecentPost;
/**
 * 表示用户粉丝信息
 */
var UserFanInfo = /** @class */ (function () {
    function UserFanInfo() {
    }
    return UserFanInfo;
}());
exports.UserFanInfo = UserFanInfo;
/**
* 用户收藏的版面信息
*/
var UserFavoritesBoardInfo = /** @class */ (function () {
    function UserFavoritesBoardInfo() {
    }
    return UserFavoritesBoardInfo;
}());
exports.UserFavoritesBoardInfo = UserFavoritesBoardInfo;
/**
* 修改用户信息所要提交的body
*/
var ChangeUserInfo = /** @class */ (function () {
    function ChangeUserInfo() {
    }
    return ChangeUserInfo;
}());
exports.ChangeUserInfo = ChangeUserInfo;


/***/ }),
/* 38 */
/***/ (function(module, exports, __webpack_require__) {

var META = __webpack_require__(42)('meta');
var isObject = __webpack_require__(7);
var has = __webpack_require__(16);
var setDesc = __webpack_require__(11).f;
var id = 0;
var isExtensible = Object.isExtensible || function () {
  return true;
};
var FREEZE = !__webpack_require__(6)(function () {
  return isExtensible(Object.preventExtensions({}));
});
var setMeta = function (it) {
  setDesc(it, META, { value: {
    i: 'O' + ++id, // object ID
    w: {}          // weak collections IDs
  } });
};
var fastKey = function (it, create) {
  // return primitive with prefix
  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;
  if (!has(it, META)) {
    // can't set metadata to uncaught frozen object
    if (!isExtensible(it)) return 'F';
    // not necessary to add metadata
    if (!create) return 'E';
    // add missing metadata
    setMeta(it);
  // return object ID
  } return it[META].i;
};
var getWeak = function (it, create) {
  if (!has(it, META)) {
    // can't set metadata to uncaught frozen object
    if (!isExtensible(it)) return true;
    // not necessary to add metadata
    if (!create) return false;
    // add missing metadata
    setMeta(it);
  // return hash weak collections IDs
  } return it[META].w;
};
// add metadata on freeze-family methods calling
var onFreeze = function (it) {
  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);
  return it;
};
var meta = module.exports = {
  KEY: META,
  NEED: false,
  fastKey: fastKey,
  getWeak: getWeak,
  onFreeze: onFreeze
};


/***/ }),
/* 39 */
/***/ (function(module, exports, __webpack_require__) {

// 22.1.3.31 Array.prototype[@@unscopables]
var UNSCOPABLES = __webpack_require__(9)('unscopables');
var ArrayProto = Array.prototype;
if (ArrayProto[UNSCOPABLES] == undefined) __webpack_require__(17)(ArrayProto, UNSCOPABLES, {});
module.exports = function (key) {
  ArrayProto[UNSCOPABLES][key] = true;
};


/***/ }),
/* 40 */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || Function("return this")() || (1,eval)("this");
} catch(e) {
	// This works if the window reference is available
	if(typeof window === "object")
		g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),
/* 41 */
/***/ (function(module, exports) {

module.exports = function (bitmap, value) {
  return {
    enumerable: !(bitmap & 1),
    configurable: !(bitmap & 2),
    writable: !(bitmap & 4),
    value: value
  };
};


/***/ }),
/* 42 */
/***/ (function(module, exports) {

var id = 0;
var px = Math.random();
module.exports = function (key) {
  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));
};


/***/ }),
/* 43 */
/***/ (function(module, exports) {

module.exports = false;


/***/ }),
/* 44 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.14 / 15.2.3.14 Object.keys(O)
var $keys = __webpack_require__(124);
var enumBugKeys = __webpack_require__(94);

module.exports = Object.keys || function keys(O) {
  return $keys(O, enumBugKeys);
};


/***/ }),
/* 45 */
/***/ (function(module, exports, __webpack_require__) {

var toInteger = __webpack_require__(29);
var max = Math.max;
var min = Math.min;
module.exports = function (index, length) {
  index = toInteger(index);
  return index < 0 ? max(index + length, 0) : min(index, length);
};


/***/ }),
/* 46 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])
var anObject = __webpack_require__(3);
var dPs = __webpack_require__(125);
var enumBugKeys = __webpack_require__(94);
var IE_PROTO = __webpack_require__(93)('IE_PROTO');
var Empty = function () { /* empty */ };
var PROTOTYPE = 'prototype';

// Create object with fake `null` prototype: use iframe Object with cleared prototype
var createDict = function () {
  // Thrash, waste and sodomy: IE GC bug
  var iframe = __webpack_require__(91)('iframe');
  var i = enumBugKeys.length;
  var lt = '<';
  var gt = '>';
  var iframeDocument;
  iframe.style.display = 'none';
  __webpack_require__(95).appendChild(iframe);
  iframe.src = 'javascript:'; // eslint-disable-line no-script-url
  // createDict = iframe.contentWindow.Object;
  // html.removeChild(iframe);
  iframeDocument = iframe.contentWindow.document;
  iframeDocument.open();
  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);
  iframeDocument.close();
  createDict = iframeDocument.F;
  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];
  return createDict();
};

module.exports = Object.create || function create(O, Properties) {
  var result;
  if (O !== null) {
    Empty[PROTOTYPE] = anObject(O);
    result = new Empty();
    Empty[PROTOTYPE] = null;
    // add "__proto__" for Object.getPrototypeOf polyfill
    result[IE_PROTO] = O;
  } else result = createDict();
  return Properties === undefined ? result : dPs(result, Properties);
};


/***/ }),
/* 47 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)
var $keys = __webpack_require__(124);
var hiddenKeys = __webpack_require__(94).concat('length', 'prototype');

exports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {
  return $keys(O, hiddenKeys);
};


/***/ }),
/* 48 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global = __webpack_require__(5);
var dP = __webpack_require__(11);
var DESCRIPTORS = __webpack_require__(10);
var SPECIES = __webpack_require__(9)('species');

module.exports = function (KEY) {
  var C = global[KEY];
  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {
    configurable: true,
    get: function () { return this; }
  });
};


/***/ }),
/* 49 */
/***/ (function(module, exports) {

module.exports = function (it, Constructor, name, forbiddenField) {
  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {
    throw TypeError(name + ': incorrect invocation!');
  } return it;
};


/***/ }),
/* 50 */
/***/ (function(module, exports, __webpack_require__) {

var ctx = __webpack_require__(23);
var call = __webpack_require__(136);
var isArrayIter = __webpack_require__(107);
var anObject = __webpack_require__(3);
var toLength = __webpack_require__(12);
var getIterFn = __webpack_require__(109);
var BREAK = {};
var RETURN = {};
var exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {
  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);
  var f = ctx(fn, that, entries ? 2 : 1);
  var index = 0;
  var length, step, iterator, result;
  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');
  // fast case for arrays with default iterator
  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {
    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);
    if (result === BREAK || result === RETURN) return result;
  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {
    result = call(iterator, f, step.value, entries);
    if (result === BREAK || result === RETURN) return result;
  }
};
exports.BREAK = BREAK;
exports.RETURN = RETURN;


/***/ }),
/* 51 */
/***/ (function(module, exports, __webpack_require__) {

var redefine = __webpack_require__(18);
module.exports = function (target, src, safe) {
  for (var key in src) redefine(target, key, src[key], safe);
  return target;
};


/***/ }),
/* 52 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// a duplex stream is just a stream that is both readable and writable.
// Since JS doesn't have multiple prototypal inheritance, this class
// prototypally inherits from Readable, and then parasitically from
// Writable.



/*<replacement>*/

var processNextTick = __webpack_require__(90);
/*</replacement>*/

/*<replacement>*/
var objectKeys = Object.keys || function (obj) {
  var keys = [];
  for (var key in obj) {
    keys.push(key);
  }return keys;
};
/*</replacement>*/

module.exports = Duplex;

/*<replacement>*/
var util = __webpack_require__(67);
util.inherits = __webpack_require__(58);
/*</replacement>*/

var Readable = __webpack_require__(175);
var Writable = __webpack_require__(180);

util.inherits(Duplex, Readable);

var keys = objectKeys(Writable.prototype);
for (var v = 0; v < keys.length; v++) {
  var method = keys[v];
  if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];
}

function Duplex(options) {
  if (!(this instanceof Duplex)) return new Duplex(options);

  Readable.call(this, options);
  Writable.call(this, options);

  if (options && options.readable === false) this.readable = false;

  if (options && options.writable === false) this.writable = false;

  this.allowHalfOpen = true;
  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;

  this.once('end', onend);
}

// the no-half-open enforcer
function onend() {
  // if we allow half-open state, or if the writable side ended,
  // then we're ok.
  if (this.allowHalfOpen || this._writableState.ended) return;

  // no more data can be written.
  // But allow more writes to happen in this tick.
  processNextTick(onEndNT, this);
}

function onEndNT(self) {
  self.end();
}

Object.defineProperty(Duplex.prototype, 'destroyed', {
  get: function () {
    if (this._readableState === undefined || this._writableState === undefined) {
      return false;
    }
    return this._readableState.destroyed && this._writableState.destroyed;
  },
  set: function (value) {
    // we ignore the value if the stream
    // has not been initialized yet
    if (this._readableState === undefined || this._writableState === undefined) {
      return;
    }

    // backward compatibility, the user is explicitly
    // managing destroyed
    this._readableState.destroyed = value;
    this._writableState.destroyed = value;
  }
});

Duplex.prototype._destroy = function (err, cb) {
  this.push(null);
  this.end();

  processNextTick(cb, err);
};

function forEach(xs, f) {
  for (var i = 0, l = xs.length; i < l; i++) {
    f(xs[i], i);
  }
}

/***/ }),
/* 53 */
/***/ (function(module, exports, __webpack_require__) {

var def = __webpack_require__(11).f;
var has = __webpack_require__(16);
var TAG = __webpack_require__(9)('toStringTag');

module.exports = function (it, tag, stat) {
  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });
};


/***/ }),
/* 54 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
var defined = __webpack_require__(28);
var fails = __webpack_require__(6);
var spaces = __webpack_require__(97);
var space = '[' + spaces + ']';
var non = '\u200b\u0085';
var ltrim = RegExp('^' + space + space + '*');
var rtrim = RegExp(space + space + '*$');

var exporter = function (KEY, exec, ALIAS) {
  var exp = {};
  var FORCE = fails(function () {
    return !!spaces[KEY]() || non[KEY]() != non;
  });
  var fn = exp[KEY] = FORCE ? exec(trim) : spaces[KEY];
  if (ALIAS) exp[ALIAS] = fn;
  $export($export.P + $export.F * FORCE, 'String', exp);
};

// 1 -> String#trimLeft
// 2 -> String#trimRight
// 3 -> String#trim
var trim = exporter.trim = function (string, TYPE) {
  string = String(defined(string));
  if (TYPE & 1) string = string.replace(ltrim, '');
  if (TYPE & 2) string = string.replace(rtrim, '');
  return string;
};

module.exports = exporter;


/***/ }),
/* 55 */
/***/ (function(module, exports) {

module.exports = {};


/***/ }),
/* 56 */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(7);
module.exports = function (it, TYPE) {
  if (!isObject(it) || it._t !== TYPE) throw TypeError('Incompatible receiver, ' + TYPE + ' required!');
  return it;
};


/***/ }),
/* 57 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var PageModel_1 = __webpack_require__(418);
var Pager = /** @class */ (function (_super) {
    __extends(Pager, _super);
    function Pager(props, content) {
        var _this = _super.call(this, props, content) || this;
        _this.state = {
            pager: [1, 2, 3, 4, 5]
        };
        return _this;
    }
    /**
     * 将页码转换为 UI 界面。
     * @param pageNumber 要转换的页码。
     * @returns {JSX.Element} 页码对应的 UI 元素。
     */
    Pager.prototype.generatePageLink = function (pageNumber) {
        return React.createElement(PageModel_1.PageModel, { pageNumber: pageNumber, url: this.props.url, curPage: this.props.page, totalPage: this.props.totalPage });
    };
    Pager.prototype.componentWillReceiveProps = function (newProps) {
        return __awaiter(this, void 0, void 0, function () {
            var pages;
            return __generator(this, function (_a) {
                pages = Utility.getPager(newProps.page, newProps.totalPage);
                this.setState({ pager: pages });
                return [2 /*return*/];
            });
        });
    };
    Pager.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var pages;
            return __generator(this, function (_a) {
                pages = Utility.getPager(this.props.page, this.props.totalPage);
                this.setState({ pager: pages });
                return [2 /*return*/];
            });
        });
    };
    Pager.prototype.render = function () {
        return React.createElement("div", { id: "pager" },
            React.createElement("div", { className: "row pagination" }, this.state.pager.map(this.generatePageLink.bind(this))));
    };
    return Pager;
}(React.Component));
exports.Pager = Pager;


/***/ }),
/* 58 */
/***/ (function(module, exports) {

if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    var TempCtor = function () {}
    TempCtor.prototype = superCtor.prototype
    ctor.prototype = new TempCtor()
    ctor.prototype.constructor = ctor
  }
}


/***/ }),
/* 59 */
/***/ (function(module, exports, __webpack_require__) {

// fallback for non-array-like ES3 and non-enumerable old V8 strings
var cof = __webpack_require__(24);
// eslint-disable-next-line no-prototype-builtins
module.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {
  return cof(it) == 'String' ? it.split('') : Object(it);
};


/***/ }),
/* 60 */
/***/ (function(module, exports) {

exports.f = {}.propertyIsEnumerable;


/***/ }),
/* 61 */
/***/ (function(module, exports, __webpack_require__) {

// getting tag from 19.1.3.6 Object.prototype.toString()
var cof = __webpack_require__(24);
var TAG = __webpack_require__(9)('toStringTag');
// ES3 wrong here
var ARG = cof(function () { return arguments; }()) == 'Arguments';

// fallback for IE11 Script Access Denied error
var tryGet = function (it, key) {
  try {
    return it[key];
  } catch (e) { /* empty */ }
};

module.exports = function (it) {
  var O, T, B;
  return it === undefined ? 'Undefined' : it === null ? 'Null'
    // @@toStringTag case
    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T
    // builtinTag case
    : ARG ? cof(O)
    // ES3 arguments fallback
    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;
};


/***/ }),
/* 62 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var react_router_dom_1 = __webpack_require__(8);
var LogOut = /** @class */ (function (_super) {
    __extends(LogOut, _super);
    function LogOut() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    LogOut.prototype.render = function () {
        //return <div style={{
        //    display: "flex", flexDirection: "column"
        //}}>
        //    <div>您当前未登录</div>
        //    <Link to="/logon"><button>登录</button></Link>
        //</div>;
        return React.createElement("div", { className: "errorState" },
            React.createElement("div", null,
                React.createElement("img", { className: "errorIcon", src: "/images/401.png" })),
            React.createElement("div", { className: "errorTitle" }, "\u7CDF\u7CD5\uFF01\u597D\u50CF\u51FA\u9519\u4E86"),
            React.createElement("div", { className: "errorText" }, "\u60A8\u5F53\u524D\u672A\u767B\u5F55"),
            React.createElement("div", { className: "row returnIndexBtn" },
                React.createElement(react_router_dom_1.Link, { to: "/logon" }, "\u70B9\u6211\u767B\u5F55")));
    };
    return LogOut;
}(React.Component));
exports.LogOut = LogOut;
var TopicDeleted = /** @class */ (function (_super) {
    __extends(TopicDeleted, _super);
    function TopicDeleted() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    TopicDeleted.prototype.render = function () {
        return React.createElement("div", { className: "errorState" },
            React.createElement("div", null,
                React.createElement("img", { className: "errorIcon", src: "/images/404.png" })),
            React.createElement("div", { className: "errorTitle" }, "\u7CDF\u7CD5\uFF01\u597D\u50CF\u51FA\u9519\u4E86"),
            React.createElement("div", { className: "errorText" }, "\u5E16\u5B50\u88AB\u5220\u9664"),
            React.createElement("div", { className: "row returnIndexBtn" },
                React.createElement(react_router_dom_1.Link, { to: "/" }, "\u8FD4\u56DE\u9996\u9875")));
    };
    return TopicDeleted;
}(React.Component));
exports.TopicDeleted = TopicDeleted;
var Disconnected = /** @class */ (function (_super) {
    __extends(Disconnected, _super);
    function Disconnected() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Disconnected.prototype.render = function () {
        return React.createElement("div", null, "\u7F51\u7EDC\u8FDE\u63A5\u4E2D\u65AD");
    };
    return Disconnected;
}(React.Component));
exports.Disconnected = Disconnected;
var UnauthorizedBoard = /** @class */ (function (_super) {
    __extends(UnauthorizedBoard, _super);
    function UnauthorizedBoard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    UnauthorizedBoard.prototype.render = function () {
        return React.createElement("div", { className: "errorState" },
            React.createElement("div", null,
                React.createElement("img", { className: "errorIcon", src: "/images/401.png" })),
            React.createElement("div", { className: "errorTitle" }, "\u7CDF\u7CD5\uFF01\u597D\u50CF\u51FA\u9519\u4E86"),
            React.createElement("div", { className: "errorText" }, "\u60A8\u6CA1\u6709\u6743\u9650\u8FDB\u5165\u8FD9\u4E2A\u7248\u9762"),
            React.createElement("div", { className: "row returnIndexBtn" },
                React.createElement(react_router_dom_1.Link, { to: "/" }, "\u8FD4\u56DE\u9996\u9875")));
    };
    return UnauthorizedBoard;
}(React.Component));
exports.UnauthorizedBoard = UnauthorizedBoard;
var UnauthorizedTopic = /** @class */ (function (_super) {
    __extends(UnauthorizedTopic, _super);
    function UnauthorizedTopic() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    UnauthorizedTopic.prototype.render = function () {
        return React.createElement("div", { className: "errorState" },
            React.createElement("div", null,
                React.createElement("img", { className: "errorIcon", src: "/images/401.png" })),
            React.createElement("div", { className: "errorTitle" }, "\u7CDF\u7CD5\uFF01\u597D\u50CF\u51FA\u9519\u4E86"),
            React.createElement("div", { className: "errorText" }, "\u60A8\u6CA1\u6709\u6743\u9650\u8FDB\u5165\u8FD9\u4E2A\u4E3B\u9898"),
            React.createElement("div", { className: "row returnIndexBtn" },
                React.createElement(react_router_dom_1.Link, { to: "/" }, "\u8FD4\u56DE\u9996\u9875")));
    };
    return UnauthorizedTopic;
}(React.Component));
exports.UnauthorizedTopic = UnauthorizedTopic;
var UnauthorizedOperation = /** @class */ (function (_super) {
    __extends(UnauthorizedOperation, _super);
    function UnauthorizedOperation() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    UnauthorizedOperation.prototype.render = function () {
        return React.createElement("div", { className: "errorState" },
            React.createElement("div", null,
                React.createElement("img", { className: "errorIcon", src: "/images/401.png" })),
            React.createElement("div", { className: "errorTitle" }, "\u7CDF\u7CD5\uFF01\u597D\u50CF\u51FA\u9519\u4E86"),
            React.createElement("div", { className: "errorText" }, "\u60A8\u6CA1\u6709\u6743\u9650\u8FDB\u884C\u8FD9\u4E2A\u64CD\u4F5C"),
            React.createElement("div", { className: "row returnIndexBtn" },
                React.createElement(react_router_dom_1.Link, { to: "/" }, "\u8FD4\u56DE\u9996\u9875")));
    };
    return UnauthorizedOperation;
}(React.Component));
exports.UnauthorizedOperation = UnauthorizedOperation;
var NotFoundBoard = /** @class */ (function (_super) {
    __extends(NotFoundBoard, _super);
    function NotFoundBoard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NotFoundBoard.prototype.render = function () {
        return React.createElement("div", { className: "errorState" },
            React.createElement("div", null,
                React.createElement("img", { className: "errorIcon", src: "/images/404.png" })),
            React.createElement("div", { className: "errorTitle" }, "\u7CDF\u7CD5\uFF01\u597D\u50CF\u51FA\u9519\u4E86"),
            React.createElement("div", { className: "errorText" }, "\u7248\u9762\u4E0D\u5B58\u5728"),
            React.createElement("div", { className: "row returnIndexBtn" },
                React.createElement(react_router_dom_1.Link, { to: "/" }, "\u8FD4\u56DE\u9996\u9875")));
    };
    return NotFoundBoard;
}(React.Component));
exports.NotFoundBoard = NotFoundBoard;
var NotFoundTopic = /** @class */ (function (_super) {
    __extends(NotFoundTopic, _super);
    function NotFoundTopic() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NotFoundTopic.prototype.render = function () {
        return React.createElement("div", { className: "errorState" },
            React.createElement("div", null,
                React.createElement("img", { className: "errorIcon", src: "/images/404.png" })),
            React.createElement("div", { className: "errorTitle" }, "\u7CDF\u7CD5\uFF01\u597D\u50CF\u51FA\u9519\u4E86"),
            React.createElement("div", { className: "errorText" }, "\u5E16\u5B50\u4E0D\u5B58\u5728"),
            React.createElement("div", { className: "row returnIndexBtn" },
                React.createElement(react_router_dom_1.Link, { to: "/" }, "\u8FD4\u56DE\u9996\u9875")));
    };
    return NotFoundTopic;
}(React.Component));
exports.NotFoundTopic = NotFoundTopic;
var NotFoundUser = /** @class */ (function (_super) {
    __extends(NotFoundUser, _super);
    function NotFoundUser() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NotFoundUser.prototype.render = function () {
        return React.createElement("div", { className: "errorState" },
            React.createElement("div", null,
                React.createElement("img", { className: "errorIcon", src: "/images/404.png" })),
            React.createElement("div", { className: "errorTitle" }, "\u7CDF\u7CD5\uFF01\u597D\u50CF\u51FA\u9519\u4E86"),
            React.createElement("div", { className: "errorText" }, "\u7528\u6237\u4E0D\u5B58\u5728"),
            React.createElement("div", { className: "row returnIndexBtn" },
                React.createElement(react_router_dom_1.Link, { to: "/" }, "\u8FD4\u56DE\u9996\u9875")));
    };
    return NotFoundUser;
}(React.Component));
exports.NotFoundUser = NotFoundUser;
var ServerError = /** @class */ (function (_super) {
    __extends(ServerError, _super);
    function ServerError() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ServerError.prototype.render = function () {
        return React.createElement("div", { className: "errorState" },
            React.createElement("div", null,
                React.createElement("img", { className: "errorIcon", src: "/images/500.png" })),
            React.createElement("div", { className: "errorTitle" }, "\u7CDF\u7CD5\uFF01\u597D\u50CF\u51FA\u9519\u4E86"),
            React.createElement("div", { className: "errorText" }, "\u670D\u52A1\u5668\u53D1\u9001\u9519\u8BEF"),
            React.createElement("div", { className: "row returnIndexBtn" },
                React.createElement(react_router_dom_1.Link, { to: "/" }, "\u8FD4\u56DE\u9996\u9875")));
    };
    return ServerError;
}(React.Component));
exports.ServerError = ServerError;
var ContentNeeded = /** @class */ (function (_super) {
    __extends(ContentNeeded, _super);
    function ContentNeeded() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ContentNeeded.prototype.render = function () {
        return React.createElement("div", { className: "errorText" }, "402\u9700\u8981\u8F93\u5165\u5185\u5BB9");
    };
    return ContentNeeded;
}(React.Component));
exports.ContentNeeded = ContentNeeded;
var OperationForbidden = /** @class */ (function (_super) {
    __extends(OperationForbidden, _super);
    function OperationForbidden() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    OperationForbidden.prototype.render = function () {
        return React.createElement("div", { className: "errorState" },
            React.createElement("div", null,
                React.createElement("img", { className: "errorIcon", src: "/images/403.png" })),
            React.createElement("div", { className: "errorTitle" }, "\u7CDF\u7CD5\uFF01\u597D\u50CF\u51FA\u9519\u4E86"),
            React.createElement("div", { className: "errorText" }, "\u64CD\u4F5C\u5931\u8D25\u6216\u88AB\u62D2\u7EDD"),
            React.createElement("div", { className: "row returnIndexBtn" },
                React.createElement(react_router_dom_1.Link, { to: "/" }, "\u8FD4\u56DE\u9996\u9875")));
    };
    return OperationForbidden;
}(React.Component));
exports.OperationForbidden = OperationForbidden;
exports.PageNotFound = function () { return (React.createElement("div", { className: "errorState" },
    React.createElement("div", null,
        React.createElement("img", { className: "errorIcon", src: "/images/404.png" })),
    React.createElement("div", { className: "errorTitle" }, "\u7CDF\u7CD5\uFF01\u597D\u50CF\u51FA\u9519\u4E86"),
    React.createElement("div", { className: "errorText" }, "\u9875\u9762\u4E0D\u5B58\u5728"),
    React.createElement("div", { className: "row returnIndexBtn" },
        React.createElement(react_router_dom_1.Link, { to: "/" }, "\u8FD4\u56DE\u9996\u9875")))); };


/***/ }),
/* 63 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) .NET Foundation. All rights reserved.
// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
Object.defineProperty(exports, "__esModule", { value: true });
var LogLevel;
(function (LogLevel) {
    LogLevel[LogLevel["Trace"] = 0] = "Trace";
    LogLevel[LogLevel["Information"] = 1] = "Information";
    LogLevel[LogLevel["Warning"] = 2] = "Warning";
    LogLevel[LogLevel["Error"] = 3] = "Error";
    LogLevel[LogLevel["None"] = 4] = "None";
})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));


/***/ }),
/* 64 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/* eslint-disable no-proto */



var base64 = __webpack_require__(469)
var ieee754 = __webpack_require__(470)
var isArray = __webpack_require__(471)

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Due to various browser bugs, sometimes the Object implementation will be used even
 * when the browser supports typed arrays.
 *
 * Note:
 *
 *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,
 *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *     incorrect length in some situations.

 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they
 * get the Object implementation, which is slower but behaves correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined
  ? global.TYPED_ARRAY_SUPPORT
  : typedArraySupport()

/*
 * Export kMaxLength after typed array support is determined.
 */
exports.kMaxLength = kMaxLength()

function typedArraySupport () {
  try {
    var arr = new Uint8Array(1)
    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}
    return arr.foo() === 42 && // typed array instances can be augmented
        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`
        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`
  } catch (e) {
    return false
  }
}

function kMaxLength () {
  return Buffer.TYPED_ARRAY_SUPPORT
    ? 0x7fffffff
    : 0x3fffffff
}

function createBuffer (that, length) {
  if (kMaxLength() < length) {
    throw new RangeError('Invalid typed array length')
  }
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = new Uint8Array(length)
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    if (that === null) {
      that = new Buffer(length)
    }
    that.length = length
  }

  return that
}

/**
 * The Buffer constructor returns instances of `Uint8Array` that have their
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it
 * returns a single octet.
 *
 * The `Uint8Array` prototype remains unmodified.
 */

function Buffer (arg, encodingOrOffset, length) {
  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {
    return new Buffer(arg, encodingOrOffset, length)
  }

  // Common case.
  if (typeof arg === 'number') {
    if (typeof encodingOrOffset === 'string') {
      throw new Error(
        'If encoding is specified then the first argument must be a string'
      )
    }
    return allocUnsafe(this, arg)
  }
  return from(this, arg, encodingOrOffset, length)
}

Buffer.poolSize = 8192 // not used by this implementation

// TODO: Legacy, not needed anymore. Remove in next major version.
Buffer._augment = function (arr) {
  arr.__proto__ = Buffer.prototype
  return arr
}

function from (that, value, encodingOrOffset, length) {
  if (typeof value === 'number') {
    throw new TypeError('"value" argument must not be a number')
  }

  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {
    return fromArrayBuffer(that, value, encodingOrOffset, length)
  }

  if (typeof value === 'string') {
    return fromString(that, value, encodingOrOffset)
  }

  return fromObject(that, value)
}

/**
 * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
 * if value is a number.
 * Buffer.from(str[, encoding])
 * Buffer.from(array)
 * Buffer.from(buffer)
 * Buffer.from(arrayBuffer[, byteOffset[, length]])
 **/
Buffer.from = function (value, encodingOrOffset, length) {
  return from(null, value, encodingOrOffset, length)
}

if (Buffer.TYPED_ARRAY_SUPPORT) {
  Buffer.prototype.__proto__ = Uint8Array.prototype
  Buffer.__proto__ = Uint8Array
  if (typeof Symbol !== 'undefined' && Symbol.species &&
      Buffer[Symbol.species] === Buffer) {
    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97
    Object.defineProperty(Buffer, Symbol.species, {
      value: null,
      configurable: true
    })
  }
}

function assertSize (size) {
  if (typeof size !== 'number') {
    throw new TypeError('"size" argument must be a number')
  } else if (size < 0) {
    throw new RangeError('"size" argument must not be negative')
  }
}

function alloc (that, size, fill, encoding) {
  assertSize(size)
  if (size <= 0) {
    return createBuffer(that, size)
  }
  if (fill !== undefined) {
    // Only pay attention to encoding if it's a string. This
    // prevents accidentally sending in a number that would
    // be interpretted as a start offset.
    return typeof encoding === 'string'
      ? createBuffer(that, size).fill(fill, encoding)
      : createBuffer(that, size).fill(fill)
  }
  return createBuffer(that, size)
}

/**
 * Creates a new filled Buffer instance.
 * alloc(size[, fill[, encoding]])
 **/
Buffer.alloc = function (size, fill, encoding) {
  return alloc(null, size, fill, encoding)
}

function allocUnsafe (that, size) {
  assertSize(size)
  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) {
    for (var i = 0; i < size; ++i) {
      that[i] = 0
    }
  }
  return that
}

/**
 * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.
 * */
Buffer.allocUnsafe = function (size) {
  return allocUnsafe(null, size)
}
/**
 * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.
 */
Buffer.allocUnsafeSlow = function (size) {
  return allocUnsafe(null, size)
}

function fromString (that, string, encoding) {
  if (typeof encoding !== 'string' || encoding === '') {
    encoding = 'utf8'
  }

  if (!Buffer.isEncoding(encoding)) {
    throw new TypeError('"encoding" must be a valid string encoding')
  }

  var length = byteLength(string, encoding) | 0
  that = createBuffer(that, length)

  var actual = that.write(string, encoding)

  if (actual !== length) {
    // Writing a hex string, for example, that contains invalid characters will
    // cause everything after the first invalid character to be ignored. (e.g.
    // 'abxxcd' will be treated as 'ab')
    that = that.slice(0, actual)
  }

  return that
}

function fromArrayLike (that, array) {
  var length = array.length < 0 ? 0 : checked(array.length) | 0
  that = createBuffer(that, length)
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

function fromArrayBuffer (that, array, byteOffset, length) {
  array.byteLength // this throws if `array` is not a valid ArrayBuffer

  if (byteOffset < 0 || array.byteLength < byteOffset) {
    throw new RangeError('\'offset\' is out of bounds')
  }

  if (array.byteLength < byteOffset + (length || 0)) {
    throw new RangeError('\'length\' is out of bounds')
  }

  if (byteOffset === undefined && length === undefined) {
    array = new Uint8Array(array)
  } else if (length === undefined) {
    array = new Uint8Array(array, byteOffset)
  } else {
    array = new Uint8Array(array, byteOffset, length)
  }

  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = array
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    that = fromArrayLike(that, array)
  }
  return that
}

function fromObject (that, obj) {
  if (Buffer.isBuffer(obj)) {
    var len = checked(obj.length) | 0
    that = createBuffer(that, len)

    if (that.length === 0) {
      return that
    }

    obj.copy(that, 0, 0, len)
    return that
  }

  if (obj) {
    if ((typeof ArrayBuffer !== 'undefined' &&
        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {
      if (typeof obj.length !== 'number' || isnan(obj.length)) {
        return createBuffer(that, 0)
      }
      return fromArrayLike(that, obj)
    }

    if (obj.type === 'Buffer' && isArray(obj.data)) {
      return fromArrayLike(that, obj.data)
    }
  }

  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')
}

function checked (length) {
  // Note: cannot use `length < kMaxLength()` here because that fails when
  // length is NaN (which is otherwise coerced to zero.)
  if (length >= kMaxLength()) {
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
                         'size: 0x' + kMaxLength().toString(16) + ' bytes')
  }
  return length | 0
}

function SlowBuffer (length) {
  if (+length != length) { // eslint-disable-line eqeqeq
    length = 0
  }
  return Buffer.alloc(+length)
}

Buffer.isBuffer = function isBuffer (b) {
  return !!(b != null && b._isBuffer)
}

Buffer.compare = function compare (a, b) {
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {
    throw new TypeError('Arguments must be Buffers')
  }

  if (a === b) return 0

  var x = a.length
  var y = b.length

  for (var i = 0, len = Math.min(x, y); i < len; ++i) {
    if (a[i] !== b[i]) {
      x = a[i]
      y = b[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

Buffer.isEncoding = function isEncoding (encoding) {
  switch (String(encoding).toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'latin1':
    case 'binary':
    case 'base64':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      return true
    default:
      return false
  }
}

Buffer.concat = function concat (list, length) {
  if (!isArray(list)) {
    throw new TypeError('"list" argument must be an Array of Buffers')
  }

  if (list.length === 0) {
    return Buffer.alloc(0)
  }

  var i
  if (length === undefined) {
    length = 0
    for (i = 0; i < list.length; ++i) {
      length += list[i].length
    }
  }

  var buffer = Buffer.allocUnsafe(length)
  var pos = 0
  for (i = 0; i < list.length; ++i) {
    var buf = list[i]
    if (!Buffer.isBuffer(buf)) {
      throw new TypeError('"list" argument must be an Array of Buffers')
    }
    buf.copy(buffer, pos)
    pos += buf.length
  }
  return buffer
}

function byteLength (string, encoding) {
  if (Buffer.isBuffer(string)) {
    return string.length
  }
  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&
      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {
    return string.byteLength
  }
  if (typeof string !== 'string') {
    string = '' + string
  }

  var len = string.length
  if (len === 0) return 0

  // Use a for loop to avoid recursion
  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'ascii':
      case 'latin1':
      case 'binary':
        return len
      case 'utf8':
      case 'utf-8':
      case undefined:
        return utf8ToBytes(string).length
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return len * 2
      case 'hex':
        return len >>> 1
      case 'base64':
        return base64ToBytes(string).length
      default:
        if (loweredCase) return utf8ToBytes(string).length // assume utf8
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}
Buffer.byteLength = byteLength

function slowToString (encoding, start, end) {
  var loweredCase = false

  // No need to verify that "this.length <= MAX_UINT32" since it's a read-only
  // property of a typed array.

  // This behaves neither like String nor Uint8Array in that we set start/end
  // to their upper/lower bounds if the value passed is out of range.
  // undefined is handled specially as per ECMA-262 6th Edition,
  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.
  if (start === undefined || start < 0) {
    start = 0
  }
  // Return early if start > this.length. Done here to prevent potential uint32
  // coercion fail below.
  if (start > this.length) {
    return ''
  }

  if (end === undefined || end > this.length) {
    end = this.length
  }

  if (end <= 0) {
    return ''
  }

  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.
  end >>>= 0
  start >>>= 0

  if (end <= start) {
    return ''
  }

  if (!encoding) encoding = 'utf8'

  while (true) {
    switch (encoding) {
      case 'hex':
        return hexSlice(this, start, end)

      case 'utf8':
      case 'utf-8':
        return utf8Slice(this, start, end)

      case 'ascii':
        return asciiSlice(this, start, end)

      case 'latin1':
      case 'binary':
        return latin1Slice(this, start, end)

      case 'base64':
        return base64Slice(this, start, end)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return utf16leSlice(this, start, end)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = (encoding + '').toLowerCase()
        loweredCase = true
    }
  }
}

// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect
// Buffer instances.
Buffer.prototype._isBuffer = true

function swap (b, n, m) {
  var i = b[n]
  b[n] = b[m]
  b[m] = i
}

Buffer.prototype.swap16 = function swap16 () {
  var len = this.length
  if (len % 2 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 16-bits')
  }
  for (var i = 0; i < len; i += 2) {
    swap(this, i, i + 1)
  }
  return this
}

Buffer.prototype.swap32 = function swap32 () {
  var len = this.length
  if (len % 4 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 32-bits')
  }
  for (var i = 0; i < len; i += 4) {
    swap(this, i, i + 3)
    swap(this, i + 1, i + 2)
  }
  return this
}

Buffer.prototype.swap64 = function swap64 () {
  var len = this.length
  if (len % 8 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 64-bits')
  }
  for (var i = 0; i < len; i += 8) {
    swap(this, i, i + 7)
    swap(this, i + 1, i + 6)
    swap(this, i + 2, i + 5)
    swap(this, i + 3, i + 4)
  }
  return this
}

Buffer.prototype.toString = function toString () {
  var length = this.length | 0
  if (length === 0) return ''
  if (arguments.length === 0) return utf8Slice(this, 0, length)
  return slowToString.apply(this, arguments)
}

Buffer.prototype.equals = function equals (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  if (this === b) return true
  return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function inspect () {
  var str = ''
  var max = exports.INSPECT_MAX_BYTES
  if (this.length > 0) {
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
    if (this.length > max) str += ' ... '
  }
  return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {
  if (!Buffer.isBuffer(target)) {
    throw new TypeError('Argument must be a Buffer')
  }

  if (start === undefined) {
    start = 0
  }
  if (end === undefined) {
    end = target ? target.length : 0
  }
  if (thisStart === undefined) {
    thisStart = 0
  }
  if (thisEnd === undefined) {
    thisEnd = this.length
  }

  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
    throw new RangeError('out of range index')
  }

  if (thisStart >= thisEnd && start >= end) {
    return 0
  }
  if (thisStart >= thisEnd) {
    return -1
  }
  if (start >= end) {
    return 1
  }

  start >>>= 0
  end >>>= 0
  thisStart >>>= 0
  thisEnd >>>= 0

  if (this === target) return 0

  var x = thisEnd - thisStart
  var y = end - start
  var len = Math.min(x, y)

  var thisCopy = this.slice(thisStart, thisEnd)
  var targetCopy = target.slice(start, end)

  for (var i = 0; i < len; ++i) {
    if (thisCopy[i] !== targetCopy[i]) {
      x = thisCopy[i]
      y = targetCopy[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,
// OR the last index of `val` in `buffer` at offset <= `byteOffset`.
//
// Arguments:
// - buffer - a Buffer to search
// - val - a string, Buffer, or number
// - byteOffset - an index into `buffer`; will be clamped to an int32
// - encoding - an optional encoding, relevant is val is a string
// - dir - true for indexOf, false for lastIndexOf
function bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {
  // Empty buffer means no match
  if (buffer.length === 0) return -1

  // Normalize byteOffset
  if (typeof byteOffset === 'string') {
    encoding = byteOffset
    byteOffset = 0
  } else if (byteOffset > 0x7fffffff) {
    byteOffset = 0x7fffffff
  } else if (byteOffset < -0x80000000) {
    byteOffset = -0x80000000
  }
  byteOffset = +byteOffset  // Coerce to Number.
  if (isNaN(byteOffset)) {
    // byteOffset: it it's undefined, null, NaN, "foo", etc, search whole buffer
    byteOffset = dir ? 0 : (buffer.length - 1)
  }

  // Normalize byteOffset: negative offsets start from the end of the buffer
  if (byteOffset < 0) byteOffset = buffer.length + byteOffset
  if (byteOffset >= buffer.length) {
    if (dir) return -1
    else byteOffset = buffer.length - 1
  } else if (byteOffset < 0) {
    if (dir) byteOffset = 0
    else return -1
  }

  // Normalize val
  if (typeof val === 'string') {
    val = Buffer.from(val, encoding)
  }

  // Finally, search either indexOf (if dir is true) or lastIndexOf
  if (Buffer.isBuffer(val)) {
    // Special case: looking for empty string/buffer always fails
    if (val.length === 0) {
      return -1
    }
    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)
  } else if (typeof val === 'number') {
    val = val & 0xFF // Search for a byte value [0-255]
    if (Buffer.TYPED_ARRAY_SUPPORT &&
        typeof Uint8Array.prototype.indexOf === 'function') {
      if (dir) {
        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)
      } else {
        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)
      }
    }
    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)
  }

  throw new TypeError('val must be string, number or Buffer')
}

function arrayIndexOf (arr, val, byteOffset, encoding, dir) {
  var indexSize = 1
  var arrLength = arr.length
  var valLength = val.length

  if (encoding !== undefined) {
    encoding = String(encoding).toLowerCase()
    if (encoding === 'ucs2' || encoding === 'ucs-2' ||
        encoding === 'utf16le' || encoding === 'utf-16le') {
      if (arr.length < 2 || val.length < 2) {
        return -1
      }
      indexSize = 2
      arrLength /= 2
      valLength /= 2
      byteOffset /= 2
    }
  }

  function read (buf, i) {
    if (indexSize === 1) {
      return buf[i]
    } else {
      return buf.readUInt16BE(i * indexSize)
    }
  }

  var i
  if (dir) {
    var foundIndex = -1
    for (i = byteOffset; i < arrLength; i++) {
      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {
        if (foundIndex === -1) foundIndex = i
        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize
      } else {
        if (foundIndex !== -1) i -= i - foundIndex
        foundIndex = -1
      }
    }
  } else {
    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength
    for (i = byteOffset; i >= 0; i--) {
      var found = true
      for (var j = 0; j < valLength; j++) {
        if (read(arr, i + j) !== read(val, j)) {
          found = false
          break
        }
      }
      if (found) return i
    }
  }

  return -1
}

Buffer.prototype.includes = function includes (val, byteOffset, encoding) {
  return this.indexOf(val, byteOffset, encoding) !== -1
}

Buffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)
}

Buffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)
}

function hexWrite (buf, string, offset, length) {
  offset = Number(offset) || 0
  var remaining = buf.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }

  // must be an even number of digits
  var strLen = string.length
  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')

  if (length > strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i < length; ++i) {
    var parsed = parseInt(string.substr(i * 2, 2), 16)
    if (isNaN(parsed)) return i
    buf[offset + i] = parsed
  }
  return i
}

function utf8Write (buf, string, offset, length) {
  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
}

function asciiWrite (buf, string, offset, length) {
  return blitBuffer(asciiToBytes(string), buf, offset, length)
}

function latin1Write (buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
  return blitBuffer(base64ToBytes(string), buf, offset, length)
}

function ucs2Write (buf, string, offset, length) {
  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)
}

Buffer.prototype.write = function write (string, offset, length, encoding) {
  // Buffer#write(string)
  if (offset === undefined) {
    encoding = 'utf8'
    length = this.length
    offset = 0
  // Buffer#write(string, encoding)
  } else if (length === undefined && typeof offset === 'string') {
    encoding = offset
    length = this.length
    offset = 0
  // Buffer#write(string, offset[, length][, encoding])
  } else if (isFinite(offset)) {
    offset = offset | 0
    if (isFinite(length)) {
      length = length | 0
      if (encoding === undefined) encoding = 'utf8'
    } else {
      encoding = length
      length = undefined
    }
  // legacy write(string, encoding, offset, length) - remove in v0.13
  } else {
    throw new Error(
      'Buffer.write(string, encoding, offset[, length]) is no longer supported'
    )
  }

  var remaining = this.length - offset
  if (length === undefined || length > remaining) length = remaining

  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {
    throw new RangeError('Attempt to write outside buffer bounds')
  }

  if (!encoding) encoding = 'utf8'

  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'hex':
        return hexWrite(this, string, offset, length)

      case 'utf8':
      case 'utf-8':
        return utf8Write(this, string, offset, length)

      case 'ascii':
        return asciiWrite(this, string, offset, length)

      case 'latin1':
      case 'binary':
        return latin1Write(this, string, offset, length)

      case 'base64':
        // Warning: maxLength not taken into account in base64Write
        return base64Write(this, string, offset, length)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return ucs2Write(this, string, offset, length)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.toJSON = function toJSON () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 && end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  end = Math.min(buf.length, end)
  var res = []

  var i = start
  while (i < end) {
    var firstByte = buf[i]
    var codePoint = null
    var bytesPerSequence = (firstByte > 0xEF) ? 4
      : (firstByte > 0xDF) ? 3
      : (firstByte > 0xBF) ? 2
      : 1

    if (i + bytesPerSequence <= end) {
      var secondByte, thirdByte, fourthByte, tempCodePoint

      switch (bytesPerSequence) {
        case 1:
          if (firstByte < 0x80) {
            codePoint = firstByte
          }
          break
        case 2:
          secondByte = buf[i + 1]
          if ((secondByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)
            if (tempCodePoint > 0x7F) {
              codePoint = tempCodePoint
            }
          }
          break
        case 3:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)
            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {
              codePoint = tempCodePoint
            }
          }
          break
        case 4:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          fourthByte = buf[i + 3]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)
            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {
              codePoint = tempCodePoint
            }
          }
      }
    }

    if (codePoint === null) {
      // we did not generate a valid codePoint so insert a
      // replacement char (U+FFFD) and advance only 1 byte
      codePoint = 0xFFFD
      bytesPerSequence = 1
    } else if (codePoint > 0xFFFF) {
      // encode to utf16 (surrogate pair dance)
      codePoint -= 0x10000
      res.push(codePoint >>> 10 & 0x3FF | 0xD800)
      codePoint = 0xDC00 | codePoint & 0x3FF
    }

    res.push(codePoint)
    i += bytesPerSequence
  }

  return decodeCodePointsArray(res)
}

// Based on http://stackoverflow.com/a/22747272/680742, the browser with
// the lowest limit is Chrome, with 0x10000 args.
// We go 1 magnitude less, for safety
var MAX_ARGUMENTS_LENGTH = 0x1000

function decodeCodePointsArray (codePoints) {
  var len = codePoints.length
  if (len <= MAX_ARGUMENTS_LENGTH) {
    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()
  }

  // Decode in chunks to avoid "call stack size exceeded".
  var res = ''
  var i = 0
  while (i < len) {
    res += String.fromCharCode.apply(
      String,
      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
    )
  }
  return res
}

function asciiSlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i] & 0x7F)
  }
  return ret
}

function latin1Slice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i])
  }
  return ret
}

function hexSlice (buf, start, end) {
  var len = buf.length

  if (!start || start < 0) start = 0
  if (!end || end < 0 || end > len) end = len

  var out = ''
  for (var i = start; i < end; ++i) {
    out += toHex(buf[i])
  }
  return out
}

function utf16leSlice (buf, start, end) {
  var bytes = buf.slice(start, end)
  var res = ''
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)
  }
  return res
}

Buffer.prototype.slice = function slice (start, end) {
  var len = this.length
  start = ~~start
  end = end === undefined ? len : ~~end

  if (start < 0) {
    start += len
    if (start < 0) start = 0
  } else if (start > len) {
    start = len
  }

  if (end < 0) {
    end += len
    if (end < 0) end = 0
  } else if (end > len) {
    end = len
  }

  if (end < start) end = start

  var newBuf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    newBuf = this.subarray(start, end)
    newBuf.__proto__ = Buffer.prototype
  } else {
    var sliceLen = end - start
    newBuf = new Buffer(sliceLen, undefined)
    for (var i = 0; i < sliceLen; ++i) {
      newBuf[i] = this[i + start]
    }
  }

  return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')
  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }

  return val
}

Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    checkOffset(offset, byteLength, this.length)
  }

  var val = this[offset + --byteLength]
  var mul = 1
  while (byteLength > 0 && (mul *= 0x100)) {
    val += this[offset + --byteLength] * mul
  }

  return val
}

Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return ((this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16)) +
      (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] * 0x1000000) +
    ((this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    this[offset + 3])
}

Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i > 0 && (mul *= 0x100)) {
    val += this[offset + --i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  if (!(this[offset] & 0x80)) return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset + 1] | (this[offset] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset]) |
    (this[offset + 1] << 8) |
    (this[offset + 2] << 16) |
    (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] << 24) |
    (this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    (this[offset + 3])
}

Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
  if (!Buffer.isBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance')
  if (value > max || value < min) throw new RangeError('"value" argument is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
}

Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var mul = 1
  var i = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var i = byteLength - 1
  var mul = 1
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  this[offset] = (value & 0xff)
  return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {
    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>
      (littleEndian ? i : 1 - i) * 8
  }
}

Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffffffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {
    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff
  }
}

Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = (value >>> 24)
    this[offset + 2] = (value >>> 16)
    this[offset + 1] = (value >>> 8)
    this[offset] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = 0
  var mul = 1
  var sub = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = byteLength - 1
  var mul = 1
  var sub = 0
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  if (value < 0) value = 0xff + value + 1
  this[offset] = (value & 0xff)
  return offset + 1
}

Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
    this[offset + 2] = (value >>> 16)
    this[offset + 3] = (value >>> 24)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value < 0) value = 0xffffffff + value + 1
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
  if (offset < 0) throw new RangeError('Index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
  }
  ieee754.write(buf, value, offset, littleEndian, 23, 4)
  return offset + 4
}

Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
  }
  ieee754.write(buf, value, offset, littleEndian, 52, 8)
  return offset + 8
}

Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function copy (target, targetStart, start, end) {
  if (!start) start = 0
  if (!end && end !== 0) end = this.length
  if (targetStart >= target.length) targetStart = target.length
  if (!targetStart) targetStart = 0
  if (end > 0 && end < start) end = start

  // Copy 0 bytes; we're done
  if (end === start) return 0
  if (target.length === 0 || this.length === 0) return 0

  // Fatal error conditions
  if (targetStart < 0) {
    throw new RangeError('targetStart out of bounds')
  }
  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')
  if (end < 0) throw new RangeError('sourceEnd out of bounds')

  // Are we oob?
  if (end > this.length) end = this.length
  if (target.length - targetStart < end - start) {
    end = target.length - targetStart + start
  }

  var len = end - start
  var i

  if (this === target && start < targetStart && targetStart < end) {
    // descending copy from end
    for (i = len - 1; i >= 0; --i) {
      target[i + targetStart] = this[i + start]
    }
  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
    // ascending copy from start
    for (i = 0; i < len; ++i) {
      target[i + targetStart] = this[i + start]
    }
  } else {
    Uint8Array.prototype.set.call(
      target,
      this.subarray(start, start + len),
      targetStart
    )
  }

  return len
}

// Usage:
//    buffer.fill(number[, offset[, end]])
//    buffer.fill(buffer[, offset[, end]])
//    buffer.fill(string[, offset[, end]][, encoding])
Buffer.prototype.fill = function fill (val, start, end, encoding) {
  // Handle string cases:
  if (typeof val === 'string') {
    if (typeof start === 'string') {
      encoding = start
      start = 0
      end = this.length
    } else if (typeof end === 'string') {
      encoding = end
      end = this.length
    }
    if (val.length === 1) {
      var code = val.charCodeAt(0)
      if (code < 256) {
        val = code
      }
    }
    if (encoding !== undefined && typeof encoding !== 'string') {
      throw new TypeError('encoding must be a string')
    }
    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {
      throw new TypeError('Unknown encoding: ' + encoding)
    }
  } else if (typeof val === 'number') {
    val = val & 255
  }

  // Invalid ranges are not set to a default, so can range check early.
  if (start < 0 || this.length < start || this.length < end) {
    throw new RangeError('Out of range index')
  }

  if (end <= start) {
    return this
  }

  start = start >>> 0
  end = end === undefined ? this.length : end >>> 0

  if (!val) val = 0

  var i
  if (typeof val === 'number') {
    for (i = start; i < end; ++i) {
      this[i] = val
    }
  } else {
    var bytes = Buffer.isBuffer(val)
      ? val
      : utf8ToBytes(new Buffer(val, encoding).toString())
    var len = bytes.length
    for (i = 0; i < end - start; ++i) {
      this[i + start] = bytes[i % len]
    }
  }

  return this
}

// HELPER FUNCTIONS
// ================

var INVALID_BASE64_RE = /[^+\/0-9A-Za-z-_]/g

function base64clean (str) {
  // Node strips out invalid characters like \n and \t from the string, base64-js does not
  str = stringtrim(str).replace(INVALID_BASE64_RE, '')
  // Node converts strings with length < 2 to ''
  if (str.length < 2) return ''
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
  while (str.length % 4 !== 0) {
    str = str + '='
  }
  return str
}

function stringtrim (str) {
  if (str.trim) return str.trim()
  return str.replace(/^\s+|\s+$/g, '')
}

function toHex (n) {
  if (n < 16) return '0' + n.toString(16)
  return n.toString(16)
}

function utf8ToBytes (string, units) {
  units = units || Infinity
  var codePoint
  var length = string.length
  var leadSurrogate = null
  var bytes = []

  for (var i = 0; i < length; ++i) {
    codePoint = string.charCodeAt(i)

    // is surrogate component
    if (codePoint > 0xD7FF && codePoint < 0xE000) {
      // last char was a lead
      if (!leadSurrogate) {
        // no lead yet
        if (codePoint > 0xDBFF) {
          // unexpected trail
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        } else if (i + 1 === length) {
          // unpaired lead
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        leadSurrogate = codePoint

        continue
      }

      // 2 leads in a row
      if (codePoint < 0xDC00) {
        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
        leadSurrogate = codePoint
        continue
      }

      // valid surrogate pair
      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000
    } else if (leadSurrogate) {
      // valid bmp char, but last char was a lead
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
    }

    leadSurrogate = null

    // encode utf8
    if (codePoint < 0x80) {
      if ((units -= 1) < 0) break
      bytes.push(codePoint)
    } else if (codePoint < 0x800) {
      if ((units -= 2) < 0) break
      bytes.push(
        codePoint >> 0x6 | 0xC0,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x10000) {
      if ((units -= 3) < 0) break
      bytes.push(
        codePoint >> 0xC | 0xE0,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x110000) {
      if ((units -= 4) < 0) break
      bytes.push(
        codePoint >> 0x12 | 0xF0,
        codePoint >> 0xC & 0x3F | 0x80,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    // Node's code seems to be doing this and not & 0x7F..
    byteArray.push(str.charCodeAt(i) & 0xFF)
  }
  return byteArray
}

function utf16leToBytes (str, units) {
  var c, hi, lo
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    if ((units -= 2) < 0) break

    c = str.charCodeAt(i)
    hi = c >> 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length) {
  for (var i = 0; i < length; ++i) {
    if ((i + offset >= dst.length) || (i >= src.length)) break
    dst[i + offset] = src[i]
  }
  return i
}

function isnan (val) {
  return val !== val // eslint-disable-line no-self-compare
}

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(40)))

/***/ }),
/* 65 */
/***/ (function(module, exports, __webpack_require__) {

/* eslint-disable node/no-deprecated-api */
var buffer = __webpack_require__(64)
var Buffer = buffer.Buffer

// alternative to using Object.keys for old browsers
function copyProps (src, dst) {
  for (var key in src) {
    dst[key] = src[key]
  }
}
if (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {
  module.exports = buffer
} else {
  // Copy properties from require('buffer')
  copyProps(buffer, exports)
  exports.Buffer = SafeBuffer
}

function SafeBuffer (arg, encodingOrOffset, length) {
  return Buffer(arg, encodingOrOffset, length)
}

// Copy static methods from Buffer
copyProps(Buffer, SafeBuffer)

SafeBuffer.from = function (arg, encodingOrOffset, length) {
  if (typeof arg === 'number') {
    throw new TypeError('Argument must not be a number')
  }
  return Buffer(arg, encodingOrOffset, length)
}

SafeBuffer.alloc = function (size, fill, encoding) {
  if (typeof size !== 'number') {
    throw new TypeError('Argument must be a number')
  }
  var buf = Buffer(size)
  if (fill !== undefined) {
    if (typeof encoding === 'string') {
      buf.fill(fill, encoding)
    } else {
      buf.fill(fill)
    }
  } else {
    buf.fill(0)
  }
  return buf
}

SafeBuffer.allocUnsafe = function (size) {
  if (typeof size !== 'number') {
    throw new TypeError('Argument must be a number')
  }
  return Buffer(size)
}

SafeBuffer.allocUnsafeSlow = function (size) {
  if (typeof size !== 'number') {
    throw new TypeError('Argument must be a number')
  }
  return buffer.SlowBuffer(size)
}


/***/ }),
/* 66 */
/***/ (function(module, exports) {

// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };


/***/ }),
/* 67 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(Buffer) {// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// NOTE: These type checking functions intentionally don't use `instanceof`
// because it is fragile and can be easily faked with `Object.create()`.

function isArray(arg) {
  if (Array.isArray) {
    return Array.isArray(arg);
  }
  return objectToString(arg) === '[object Array]';
}
exports.isArray = isArray;

function isBoolean(arg) {
  return typeof arg === 'boolean';
}
exports.isBoolean = isBoolean;

function isNull(arg) {
  return arg === null;
}
exports.isNull = isNull;

function isNullOrUndefined(arg) {
  return arg == null;
}
exports.isNullOrUndefined = isNullOrUndefined;

function isNumber(arg) {
  return typeof arg === 'number';
}
exports.isNumber = isNumber;

function isString(arg) {
  return typeof arg === 'string';
}
exports.isString = isString;

function isSymbol(arg) {
  return typeof arg === 'symbol';
}
exports.isSymbol = isSymbol;

function isUndefined(arg) {
  return arg === void 0;
}
exports.isUndefined = isUndefined;

function isRegExp(re) {
  return objectToString(re) === '[object RegExp]';
}
exports.isRegExp = isRegExp;

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}
exports.isObject = isObject;

function isDate(d) {
  return objectToString(d) === '[object Date]';
}
exports.isDate = isDate;

function isError(e) {
  return (objectToString(e) === '[object Error]' || e instanceof Error);
}
exports.isError = isError;

function isFunction(arg) {
  return typeof arg === 'function';
}
exports.isFunction = isFunction;

function isPrimitive(arg) {
  return arg === null ||
         typeof arg === 'boolean' ||
         typeof arg === 'number' ||
         typeof arg === 'string' ||
         typeof arg === 'symbol' ||  // ES6 symbol
         typeof arg === 'undefined';
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = Buffer.isBuffer;

function objectToString(o) {
  return Object.prototype.toString.call(o);
}

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(64).Buffer))

/***/ }),
/* 68 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(5);
var SHARED = '__core-js_shared__';
var store = global[SHARED] || (global[SHARED] = {});
module.exports = function (key) {
  return store[key] || (store[key] = {});
};


/***/ }),
/* 69 */
/***/ (function(module, exports, __webpack_require__) {

// false -> Array#indexOf
// true  -> Array#includes
var toIObject = __webpack_require__(20);
var toLength = __webpack_require__(12);
var toAbsoluteIndex = __webpack_require__(45);
module.exports = function (IS_INCLUDES) {
  return function ($this, el, fromIndex) {
    var O = toIObject($this);
    var length = toLength(O.length);
    var index = toAbsoluteIndex(fromIndex, length);
    var value;
    // Array#includes uses SameValueZero equality algorithm
    // eslint-disable-next-line no-self-compare
    if (IS_INCLUDES && el != el) while (length > index) {
      value = O[index++];
      // eslint-disable-next-line no-self-compare
      if (value != value) return true;
    // Array#indexOf ignores holes, Array#includes - not
    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {
      if (O[index] === el) return IS_INCLUDES || index || 0;
    } return !IS_INCLUDES && -1;
  };
};


/***/ }),
/* 70 */
/***/ (function(module, exports) {

exports.f = Object.getOwnPropertySymbols;


/***/ }),
/* 71 */
/***/ (function(module, exports, __webpack_require__) {

// 7.2.2 IsArray(argument)
var cof = __webpack_require__(24);
module.exports = Array.isArray || function isArray(arg) {
  return cof(arg) == 'Array';
};


/***/ }),
/* 72 */
/***/ (function(module, exports, __webpack_require__) {

// 7.2.8 IsRegExp(argument)
var isObject = __webpack_require__(7);
var cof = __webpack_require__(24);
var MATCH = __webpack_require__(9)('match');
module.exports = function (it) {
  var isRegExp;
  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');
};


/***/ }),
/* 73 */
/***/ (function(module, exports, __webpack_require__) {

var ITERATOR = __webpack_require__(9)('iterator');
var SAFE_CLOSING = false;

try {
  var riter = [7][ITERATOR]();
  riter['return'] = function () { SAFE_CLOSING = true; };
  // eslint-disable-next-line no-throw-literal
  Array.from(riter, function () { throw 2; });
} catch (e) { /* empty */ }

module.exports = function (exec, skipClosing) {
  if (!skipClosing && !SAFE_CLOSING) return false;
  var safe = false;
  try {
    var arr = [7];
    var iter = arr[ITERATOR]();
    iter.next = function () { return { done: safe = true }; };
    arr[ITERATOR] = function () { return iter; };
    exec(arr);
  } catch (e) { /* empty */ }
  return safe;
};


/***/ }),
/* 74 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 21.2.5.3 get RegExp.prototype.flags
var anObject = __webpack_require__(3);
module.exports = function () {
  var that = anObject(this);
  var result = '';
  if (that.global) result += 'g';
  if (that.ignoreCase) result += 'i';
  if (that.multiline) result += 'm';
  if (that.unicode) result += 'u';
  if (that.sticky) result += 'y';
  return result;
};


/***/ }),
/* 75 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var hide = __webpack_require__(17);
var redefine = __webpack_require__(18);
var fails = __webpack_require__(6);
var defined = __webpack_require__(28);
var wks = __webpack_require__(9);

module.exports = function (KEY, length, exec) {
  var SYMBOL = wks(KEY);
  var fns = exec(defined, SYMBOL, ''[KEY]);
  var strfn = fns[0];
  var rxfn = fns[1];
  if (fails(function () {
    var O = {};
    O[SYMBOL] = function () { return 7; };
    return ''[KEY](O) != 7;
  })) {
    redefine(String.prototype, KEY, strfn);
    hide(RegExp.prototype, SYMBOL, length == 2
      // 21.2.5.8 RegExp.prototype[@@replace](string, replaceValue)
      // 21.2.5.11 RegExp.prototype[@@split](string, limit)
      ? function (string, arg) { return rxfn.call(string, this, arg); }
      // 21.2.5.6 RegExp.prototype[@@match](string)
      // 21.2.5.9 RegExp.prototype[@@search](string)
      : function (string) { return rxfn.call(string, this); }
    );
  }
};


/***/ }),
/* 76 */
/***/ (function(module, exports, __webpack_require__) {

// 7.3.20 SpeciesConstructor(O, defaultConstructor)
var anObject = __webpack_require__(3);
var aFunction = __webpack_require__(14);
var SPECIES = __webpack_require__(9)('species');
module.exports = function (O, D) {
  var C = anObject(O).constructor;
  var S;
  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);
};


/***/ }),
/* 77 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global = __webpack_require__(5);
var $export = __webpack_require__(0);
var redefine = __webpack_require__(18);
var redefineAll = __webpack_require__(51);
var meta = __webpack_require__(38);
var forOf = __webpack_require__(50);
var anInstance = __webpack_require__(49);
var isObject = __webpack_require__(7);
var fails = __webpack_require__(6);
var $iterDetect = __webpack_require__(73);
var setToStringTag = __webpack_require__(53);
var inheritIfRequired = __webpack_require__(98);

module.exports = function (NAME, wrapper, methods, common, IS_MAP, IS_WEAK) {
  var Base = global[NAME];
  var C = Base;
  var ADDER = IS_MAP ? 'set' : 'add';
  var proto = C && C.prototype;
  var O = {};
  var fixMethod = function (KEY) {
    var fn = proto[KEY];
    redefine(proto, KEY,
      KEY == 'delete' ? function (a) {
        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);
      } : KEY == 'has' ? function has(a) {
        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);
      } : KEY == 'get' ? function get(a) {
        return IS_WEAK && !isObject(a) ? undefined : fn.call(this, a === 0 ? 0 : a);
      } : KEY == 'add' ? function add(a) { fn.call(this, a === 0 ? 0 : a); return this; }
        : function set(a, b) { fn.call(this, a === 0 ? 0 : a, b); return this; }
    );
  };
  if (typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function () {
    new C().entries().next();
  }))) {
    // create collection constructor
    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);
    redefineAll(C.prototype, methods);
    meta.NEED = true;
  } else {
    var instance = new C();
    // early implementations not supports chaining
    var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;
    // V8 ~  Chromium 40- weak-collections throws on primitives, but should return false
    var THROWS_ON_PRIMITIVES = fails(function () { instance.has(1); });
    // most early implementations doesn't supports iterables, most modern - not close it correctly
    var ACCEPT_ITERABLES = $iterDetect(function (iter) { new C(iter); }); // eslint-disable-line no-new
    // for early implementations -0 and +0 not the same
    var BUGGY_ZERO = !IS_WEAK && fails(function () {
      // V8 ~ Chromium 42- fails only with 5+ elements
      var $instance = new C();
      var index = 5;
      while (index--) $instance[ADDER](index, index);
      return !$instance.has(-0);
    });
    if (!ACCEPT_ITERABLES) {
      C = wrapper(function (target, iterable) {
        anInstance(target, C, NAME);
        var that = inheritIfRequired(new Base(), target, C);
        if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);
        return that;
      });
      C.prototype = proto;
      proto.constructor = C;
    }
    if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {
      fixMethod('delete');
      fixMethod('has');
      IS_MAP && fixMethod('get');
    }
    if (BUGGY_ZERO || HASNT_CHAINING) fixMethod(ADDER);
    // weak collections should not contains .clear method
    if (IS_WEAK && proto.clear) delete proto.clear;
  }

  setToStringTag(C, NAME);

  O[NAME] = C;
  $export($export.G + $export.W + $export.F * (C != Base), O);

  if (!IS_WEAK) common.setStrong(C, NAME, IS_MAP);

  return C;
};


/***/ }),
/* 78 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(5);
var hide = __webpack_require__(17);
var uid = __webpack_require__(42);
var TYPED = uid('typed_array');
var VIEW = uid('view');
var ABV = !!(global.ArrayBuffer && global.DataView);
var CONSTR = ABV;
var i = 0;
var l = 9;
var Typed;

var TypedArrayConstructors = (
  'Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array'
).split(',');

while (i < l) {
  if (Typed = global[TypedArrayConstructors[i++]]) {
    hide(Typed.prototype, TYPED, true);
    hide(Typed.prototype, VIEW, true);
  } else CONSTR = false;
}

module.exports = {
  ABV: ABV,
  CONSTR: CONSTR,
  TYPED: TYPED,
  VIEW: VIEW
};


/***/ }),
/* 79 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Forced replacement prototype accessors methods
module.exports = __webpack_require__(43) || !__webpack_require__(6)(function () {
  var K = Math.random();
  // In FF throws only define methods
  // eslint-disable-next-line no-undef, no-useless-call
  __defineSetter__.call(null, K, function () { /* empty */ });
  delete __webpack_require__(5)[K];
});


/***/ }),
/* 80 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://tc39.github.io/proposal-setmap-offrom/
var $export = __webpack_require__(0);

module.exports = function (COLLECTION) {
  $export($export.S, COLLECTION, { of: function of() {
    var length = arguments.length;
    var A = Array(length);
    while (length--) A[length] = arguments[length];
    return new this(A);
  } });
};


/***/ }),
/* 81 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://tc39.github.io/proposal-setmap-offrom/
var $export = __webpack_require__(0);
var aFunction = __webpack_require__(14);
var ctx = __webpack_require__(23);
var forOf = __webpack_require__(50);

module.exports = function (COLLECTION) {
  $export($export.S, COLLECTION, { from: function from(source /* , mapFn, thisArg */) {
    var mapFn = arguments[1];
    var mapping, A, n, cb;
    aFunction(this);
    mapping = mapFn !== undefined;
    if (mapping) aFunction(mapFn);
    if (source == undefined) return new this();
    A = [];
    if (mapping) {
      n = 0;
      cb = ctx(mapFn, arguments[2], 2);
      forOf(source, false, function (nextItem) {
        A.push(cb(nextItem, n++));
      });
    } else {
      forOf(source, false, A.push, A);
    }
    return new this(A);
  } });
};


/***/ }),
/* 82 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * 登录用
 */
exports.USER_LOG_ON = 'USER_LOG_ON';
exports.USER_LOG_OFF = 'USER_LOG_OFF';
/**
 * 用户信息用
 */
exports.GET_USER_POSTS = 'GET_USER_POSTS';
exports.CHANGE_USERINFO = 'CHANGE_USERINFO';
exports.CHANGE_VISITING_USER = 'CHANGE_VISITING_USER';
exports.USER_NOT_FOUND = 'USER_NOT_FOUND';
/**
 * 抛出错误
 */
exports.ERROR = 'ERROR';
/**
 * 帖子
 */
exports.ADD_AWARD = 'ADD_AWARD';


/***/ }),
/* 83 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * 提供服务器端全局数据。
 */
var Constants;
(function (Constants) {
    /**
     * 提供加载全局配置信息的方法。
     */
    function loadConfig() {
        return __awaiter(this, void 0, void 0, function () {
            var configResponse, productionConfigResponse, productionConfig, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, fetch('/static/config.json')];
                    case 1:
                        configResponse = _a.sent();
                        if (!configResponse.ok) {
                            throw new Error('系统无法读取配置文件，网站无法正常运行');
                        }
                        return [4 /*yield*/, configResponse.json()];
                    case 2:
                        Constants.config = (_a.sent());
                        _a.label = 3;
                    case 3:
                        _a.trys.push([3, 6, , 7]);
                        return [4 /*yield*/, fetch('/static/config.production.json')];
                    case 4:
                        productionConfigResponse = _a.sent();
                        return [4 /*yield*/, productionConfigResponse.json()];
                    case 5:
                        productionConfig = _a.sent();
                        Constants.config = __assign({}, Constants.config, productionConfig);
                        return [3 /*break*/, 7];
                    case 6:
                        e_1 = _a.sent();
                        return [3 /*break*/, 7];
                    case 7: return [2 /*return*/];
                }
            });
        });
    }
    Constants.loadConfig = loadConfig;
})(Constants = exports.Constants || (exports.Constants = {}));


/***/ }),
/* 84 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var RouteComponent = /** @class */ (function (_super) {
    __extends(RouteComponent, _super);
    function RouteComponent(props, context) {
        return _super.call(this, props, context) || this;
    }
    Object.defineProperty(RouteComponent.prototype, "match", {
        get: function () {
            return this.props.match;
        },
        enumerable: true,
        configurable: true
    });
    return RouteComponent;
}(React.Component));
exports.RouteComponent = RouteComponent;


/***/ }),
/* 85 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var UbbContainer_1 = __webpack_require__(15);
/**
 * 组件属性
 */
var UbbEditorProps = /** @class */ (function () {
    function UbbEditorProps() {
    }
    return UbbEditorProps;
}());
/**
 * UBB编辑器可选选项
 */
var UbbEditorOption = /** @class */ (function () {
    function UbbEditorOption() {
        /**
         * textarea的高度(以rem为单位)
         * 整个组件实际高度大概高2-4rem
         */
        this.height = 32.5;
        /**
         * 打开的UBB标签
         */
        this.allowUbbTag = 'all';
    }
    return UbbEditorOption;
}());
/**
 * 组件状态
 */
var UbbEditorState = /** @class */ (function () {
    function UbbEditorState() {
    }
    return UbbEditorState;
}());
/**
 * UBB编辑器组件
 */
var UbbEditor = /** @class */ (function (_super) {
    __extends(UbbEditor, _super);
    function UbbEditor(props) {
        var _this = _super.call(this, props) || this;
        /**
         * Ubb编辑器的历史堆栈
         */
        _this.valueStack = [''];
        /**
         * Ubb编辑器的redo堆栈
         */
        _this.redoStack = [];
        _this.state = {
            selectionEnd: 0,
            selectionStart: 0,
            clicked: false,
            extendValue: '',
            extendTagName: '',
            emojiType: 'ac',
            emojiIsShown: false,
            isPreviewing: false,
            value: ''
        };
        _this.option = props.option || new UbbEditorOption();
        _this.clearAllShown = _this.clearAllShown.bind(_this);
        _this.handleExtendValueChange = _this.handleExtendValueChange.bind(_this);
        _this.handleTextareaChange = _this.handleTextareaChange.bind(_this);
        _this.handleTextareaBlur = _this.handleTextareaBlur.bind(_this);
        _this.handleButtonClick = _this.handleButtonClick.bind(_this);
        _this.handleEmojiButtonClick = _this.handleEmojiButtonClick.bind(_this);
        return _this;
    }
    UbbEditor.prototype.handleExtendButtonClick = function (tagName) {
        this.setState(function (prevState) { return ({
            extendTagName: prevState.extendTagName !== tagName ? tagName : '',
            emojiIsShown: false
        }); });
    };
    UbbEditor.prototype.handleExtendValueChange = function (value) {
        this.setState({
            extendValue: value
        });
    };
    UbbEditor.prototype.handleTextareaChange = function (value) {
        this.valueStack.push(value);
        this.props.update(value);
        this.setState({ value: value });
    };
    UbbEditor.prototype.handleTextareaBlur = function (start, end) {
        this.setState({
            selectionEnd: end,
            selectionStart: start
        });
    };
    UbbEditor.prototype.handleUpload = function (file) {
        return __awaiter(this, void 0, void 0, function () {
            var res, baseUrl;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.uploadFile(file)];
                    case 1:
                        res = _a.sent();
                        baseUrl = Utility.getApiUrl();
                        this.handleButtonClick(this.state.extendTagName, "" + baseUrl + res.content);
                        return [2 /*return*/];
                }
            });
        });
    };
    UbbEditor.prototype.handleUndo = function () {
        var _this = this;
        this.setState(function (prevState) {
            if (_this.valueStack.length === 1) {
                return { value: '' };
            }
            var prevValue = _this.valueStack.pop();
            _this.redoStack.push(prevValue);
            prevValue = _this.valueStack[_this.valueStack.length - 1];
            _this.props.update(prevValue);
            return { value: prevValue };
        });
    };
    UbbEditor.prototype.handleRedo = function () {
        var _this = this;
        this.setState(function (prevState) {
            var prevValue;
            if (prevValue = _this.redoStack.pop()) {
                _this.valueStack.push(prevValue);
                _this.props.update(prevValue);
                return { value: prevValue };
            }
        });
    };
    UbbEditor.prototype.handleButtonClick = function (name, value) {
        var _this = this;
        if (value === void 0) { value = ''; }
        var shouldReplaceSelection = ['video', 'audio', 'img', 'upload'].indexOf(name) !== -1;
        var hasDefaultSelection = ['url'].indexOf(name) !== -1;
        this.setState(function (prevState) {
            var before = _this.state.value.slice(0, prevState.selectionStart), selected = _this.state.value.slice(prevState.selectionStart, prevState.selectionEnd), after = _this.state.value.slice(prevState.selectionEnd, _this.state.value.length);
            if (shouldReplaceSelection) {
                selected = "[" + name + "]" + value + "[/" + name + "]";
            }
            else if (hasDefaultSelection) {
                selected = "[" + name + (value ? "=" + value : '') + "]" + (selected || value) + "[/" + name + "]";
            }
            else {
                selected = "[" + name + (value ? "=" + value : '') + "]" + selected + "[/" + name + "]";
            }
            _this.props.update(before + selected + after);
            _this.valueStack.push(before + selected + after);
            return {
                selectionStart: before.length,
                selectionEnd: before.length + selected.length,
                clicked: true,
                value: before + selected + after
            };
        });
    };
    UbbEditor.prototype.handleEmojiButtonClick = function (emojiUbb) {
        var _this = this;
        this.setState(function (prevState) {
            var before = _this.state.value.slice(0, prevState.selectionStart), selected = emojiUbb, after = _this.state.value.slice(prevState.selectionEnd, _this.state.value.length);
            _this.props.update(before + selected + after);
            _this.valueStack.push(before + selected + after);
            return {
                selectionStart: before.length + selected.length,
                selectionEnd: before.length + selected.length,
                clicked: true,
                value: before + selected + after
            };
        });
    };
    UbbEditor.prototype.clearAllShown = function () {
        this.setState({
            emojiIsShown: false,
            extendTagName: '',
            extendValue: ''
        });
    };
    UbbEditor.prototype.componentWillReceiveProps = function (nextProps) {
        if (this.valueStack[this.valueStack.length - 1] !== nextProps.value) {
            this.valueStack.push(nextProps.value);
            this.redoStack = [];
            this.setState({
                value: nextProps.value
            });
        }
    };
    UbbEditor.prototype.componentDidUpdate = function () {
        if (this.state.clicked && !this.state.isPreviewing) {
            this.content.focus();
            this.content.setSelectionRange(this.state.selectionStart, this.state.selectionEnd);
            this.setState({
                clicked: false
            });
        }
    };
    UbbEditor.prototype.componentDidMount = function () {
        var _this = this;
        window.addEventListener('click', this.clearAllShown);
        $("#color").spectrum({
            color: "#000",
            change: function (color) {
                _this.handleButtonClick('color', color.toHexString());
                $("#color").spectrum('set', '#000000');
            },
            showPalette: true,
            palette: [
                ["#f00", "#f90", "#ff0", "#0f0", "#0ff", "#00f", "#90f", "#f0f"],
                ["#f4cccc", "#fce5cd", "#fff2cc", "#d9ead3", "#d0e0e3", "#cfe2f3", "#d9d2e9", "#ead1dc"],
                ["#ea9999", "#f9cb9c", "#ffe599", "#b6d7a8", "#a2c4c9", "#9fc5e8", "#b4a7d6", "#d5a6bd"],
                ["#e06666", "#f6b26b", "#ffd966", "#93c47d", "#76a5af", "#6fa8dc", "#8e7cc3", "#c27ba0"],
                ["#c00", "#e69138", "#f1c232", "#6aa84f", "#45818e", "#3d85c6", "#674ea7", "#a64d79"],
                ["#900", "#b45f06", "#bf9000", "#38761d", "#134f5c", "#0b5394", "#351c75", "#741b47"],
                ["#600", "#783f04", "#7f6000", "#274e13", "#0c343d", "#073763", "#20124d", "#4c1130"],
                ["#000", "#444", "#666", "#999", "#ccc", "#eee", "#f3f3f3", "#fff"]
            ],
            replacerClassName: 'ubb-color-picker',
            hideAfterPaletteSelect: true
        });
    };
    UbbEditor.prototype.componentWillUnmount = function () {
        window.removeEventListener('click', this.clearAllShown);
    };
    UbbEditor.prototype.render = function () {
        var _this = this;
        var height = this.option.height;
        var size = ['', 1, 2, 3, 4, 5, 6, 7];
        var mohjong = {
            animal: ['001', '002', '003', '004', '005', '006', '007', '008', '009', '010', '011', '012', '013', '014', '015', '016'].map(function (item) { return (React.createElement("img", { src: "/images/mahjong/animal2017/" + item + ".png", onClick: function () { _this.handleEmojiButtonClick("[a:" + item + "]"); } })); }),
            carton: ['003.png', '018.gif', '019.png', '046.png', '049.gif', '059.png', '096.gif', '134.png', '189.png', '217.png'].map(function (item) { return (React.createElement("img", { src: "/images/mahjong/carton2017/" + item, onClick: function () { _this.handleEmojiButtonClick("[c:" + item.slice(0, 3) + "]"); } })); }),
            face: new Array(208).fill(0).map(function (item, index) {
                if (index < 9) {
                    return "00" + (index + 1);
                }
                else if (index < 99) {
                    return "0" + (index + 1);
                }
                else {
                    return "" + (index + 1);
                }
            }).map(function (item, index) {
                if ([4, 9, 56, 61, 62, 87, 115, 120, 137, 168, 169, 175, 206].indexOf(index + 1) !== -1) {
                    return item + ".gif";
                }
                else {
                    return item + ".png";
                }
            }).map(function (item) { return (React.createElement("img", { src: "/images/mahjong/face2017/" + item, onClick: function () { _this.handleEmojiButtonClick("[f:" + item.slice(0, 3) + "]"); } })); })
        };
        var emoji = {
            'em': new Array(92).fill(0)
                .map(function (item, index) {
                if (index < 10) {
                    return "0" + index;
                }
                else if ((index < 43) || (70 < index && index < 92)) {
                    return "" + index;
                }
            })
                .map(function (item) { return (item ? (React.createElement("img", { src: "http://www.cc98.org/emot/emot" + item + ".gif", onClick: function () { _this.handleEmojiButtonClick("[em" + item + "]"); } })) : null); }),
            'ac': new Array(149).fill(0)
                .map(function (item, index) {
                if (index < 9) {
                    return "0" + (index + 1);
                }
                else if (index < 54) {
                    return "" + (index + 1);
                }
                else if (index < 94) {
                    return "" + (index + 947);
                }
                else {
                    return "" + (index + 1907);
                }
            }).map(function (item) { return (React.createElement("img", { src: "/images/ac/" + item + ".png", onClick: function () { _this.handleEmojiButtonClick("[ac" + item + "]"); } })); }),
            'mj': mohjong.animal.concat(mohjong.carton, mohjong.face),
            'tb': new Array(33).fill(0)
                .map(function (item, index) {
                if (index < 9) {
                    return "0" + (index + 1);
                }
                else {
                    return "" + (index + 1);
                }
            }).map(function (item) { return (React.createElement("img", { src: "/images/tb/tb" + item + ".png", onClick: function () { _this.handleEmojiButtonClick("[tb" + item + "]"); } })); })
        };
        var info = {
            'ac': React.createElement("p", { className: "ubb-emoji-info" },
                "\u8BE5\u7EC4\u8868\u60C5\u7531 ",
                React.createElement("a", { target: "_blank", href: "//www.acfun.cn" }, "AcFun\u5F39\u5E55\u89C6\u9891\u7F51"),
                " \u63D0\u4F9B"),
            'mj': React.createElement("p", { className: "ubb-emoji-info" },
                "\u8BE5\u7EC4\u8868\u60C5\u7531 ",
                React.createElement("a", { target: "_blank", href: "//bbs.saraba1st.com/2b/forum.php" }, "stage1st\u8BBA\u575B"),
                " \u63D0\u4F9B"),
            'tb': React.createElement("p", { className: "ubb-emoji-info" },
                "\u8BE5\u7EC4\u8868\u60C5\u7531 ",
                React.createElement("a", { target: "_blank", href: "//tieba.baidu.com " }, "\u767E\u5EA6\u8D34\u5427"),
                " \u63D0\u4F9B"),
            'em': null
        };
        return (React.createElement("div", { className: "ubb-editor", style: { maxHeight: height + 6.125 + "rem" } },
            React.createElement("div", { className: "editor-buttons" },
                React.createElement("div", { style: { height: '2rem', display: 'flex', transitionDuration: '.5s', overflow: 'hidden', width: this.state.isPreviewing ? '0rem' : '50rem' } },
                    React.createElement("div", { className: "editor-buttons-styles" },
                        React.createElement("button", { className: "fa-bold", type: "button", title: "加粗", onClick: function () { _this.handleButtonClick('b'); } }),
                        React.createElement("button", { className: "fa-italic", type: "button", title: "斜体", onClick: function () { _this.handleButtonClick('i'); } }),
                        React.createElement("button", { className: "fa-underline", type: "button", title: "下划线", onClick: function () { _this.handleButtonClick('u'); } }),
                        React.createElement("button", { className: "fa-strikethrough", type: "button", title: "删除线", onClick: function () { _this.handleButtonClick('del'); } }),
                        React.createElement("button", { className: "fa-align-left", type: "button", title: "左对齐", onClick: function () { _this.handleButtonClick('align', 'left'); } }),
                        React.createElement("button", { className: "fa-align-center", type: "button", title: "居中", onClick: function () { _this.handleButtonClick('align', 'center'); } }),
                        React.createElement("button", { className: "fa-align-right", type: "button", title: "右对齐", onClick: function () { _this.handleButtonClick('align', 'right'); } }),
                        React.createElement("button", { className: "fa-eye-slash", type: "button", title: "回复后可见", onClick: function () { _this.handleButtonClick('replyview'); } })),
                    React.createElement("div", { className: "editor-buttons-selects" },
                        React.createElement("p", { className: "fa-text-height" }),
                        React.createElement("select", { onChange: function (e) { _this.handleButtonClick('size', e.target.value); e.target.value = 0; }, onClick: function () { _this.clearAllShown(); }, value: 0 }, size.map(function (value, index) { return (React.createElement("option", { value: index, disabled: index === 0, style: { display: index === 0 ? 'none' : '' } }, value)); })),
                        React.createElement("p", { className: "fa-eyedropper" }),
                        React.createElement("input", { id: "color" })),
                    React.createElement("div", { className: "editor-buttons-extends" },
                        React.createElement("button", { className: "fa-smile-o", type: "button", title: "插入表情", onClick: function (e) {
                                e.stopPropagation();
                                _this.setState(function (prev) { return ({
                                    emojiIsShown: !prev.emojiIsShown,
                                    extendTagName: '',
                                    extendValue: ''
                                }); });
                            } }),
                        React.createElement("button", { className: "fa-link", type: "button", title: "插入url", onClick: function (e) { e.stopPropagation(); _this.handleExtendButtonClick('url'); } }),
                        React.createElement("button", { className: "fa-picture-o", type: "button", title: "插入图片", onClick: function (e) { e.stopPropagation(); _this.handleExtendButtonClick('img'); } }),
                        React.createElement("button", { className: "fa-film", type: "button", title: "插入视频", onClick: function (e) { e.stopPropagation(); _this.handleExtendButtonClick('video'); } }),
                        React.createElement("button", { className: "fa-music", type: "button", title: "插入音频", onClick: function (e) { e.stopPropagation(); _this.handleExtendButtonClick('audio'); } }),
                        React.createElement("label", { className: "fa-file", htmlFor: "upload", title: "上传文件", onClick: function (e) { e.stopPropagation(); _this.setState({ extendTagName: 'upload' }); } }))),
                React.createElement("div", { style: { flexGrow: 1 } }),
                React.createElement("button", { className: "fa-undo", type: "button", title: "撤销", onClick: function () { _this.handleUndo(); } }),
                React.createElement("button", { className: "fa-repeat", type: "button", title: "重做", onClick: function () { _this.handleRedo(); } }),
                React.createElement("button", { type: "button", title: "切换预览", onClick: function () { _this.setState(function (prev) { return ({ isPreviewing: !prev.isPreviewing, clicked: true }); }); }, className: "fa-window-maximize" })),
            React.createElement("div", { className: "ubb-extend", style: { height: this.state.extendTagName && this.state.extendTagName !== 'upload' ? '2rem' : '0rem' } },
                React.createElement("input", { type: "text", placeholder: "在此输入地址", value: this.state.extendValue, onChange: function (e) { _this.handleExtendValueChange(e.target.value); }, onClick: function (e) { e.stopPropagation(); }, ref: function (it) { _this.input = it; } }),
                this.state.extendTagName === 'img' ? React.createElement("label", { onClick: function (e) { e.stopPropagation(); }, className: "fa-upload", htmlFor: "upload", title: "上传本地图片" }) : null,
                React.createElement("button", { className: "fa-check", type: "button", onClick: function (e) { e.stopPropagation(); _this.handleButtonClick(_this.state.extendTagName, _this.state.extendValue); } }),
                React.createElement("button", { className: "fa-remove", type: "button", onClick: function () { _this.setState({ clicked: true }); } }),
                React.createElement("input", { type: "file", id: "upload", accept: this.state.extendTagName === 'img' ? "image/*" : "", style: { display: 'none' }, onClick: function (e) { e.stopPropagation(); }, onChange: function (e) {
                        if (e.target.files[0]) {
                            _this.handleUpload(e.target.files[0]);
                            e.target.value = "";
                        }
                    } })),
            React.createElement("div", { className: "ubb-content" }, !this.state.isPreviewing ? (React.createElement("textarea", { value: this.state.value, onChange: function (e) { _this.handleTextareaChange(e.target.value); }, onInput: function (e) {
                    _this.redoStack = [];
                }, onFocus: function () {
                    _this.clearAllShown();
                }, onBlur: function (e) {
                    var target = e.target;
                    _this.handleTextareaBlur(target.selectionStart, target.selectionEnd);
                }, onKeyDown: function (e) {
                    if (e.ctrlKey && e.key === 'z') {
                        e.preventDefault();
                        _this.handleUndo();
                    }
                    else if (e.ctrlKey && e.key === 'y') {
                        e.preventDefault();
                        _this.handleRedo();
                    }
                }, ref: function (textarea) {
                    _this.content = textarea;
                }, style: { height: this.state.extendTagName && this.state.extendTagName !== 'upload' ? height + "rem" : height + 2 + "rem" }, spellCheck: false })) : (React.createElement("div", { className: "ubb-editor-preview" },
                React.createElement(UbbContainer_1.UbbContainer, { code: this.props.value })))),
            React.createElement("div", { className: "ubb-emoji", style: this.state.emojiIsShown ? { height: '22rem', borderWidth: '1px', top: "-" + (height + 4) + "rem" } : { height: '0rem', top: "-" + (height + 4) + "rem" } },
                React.createElement("div", { className: "ubb-emoji-buttons" },
                    React.createElement("button", { type: "button", className: this.state.emojiType === 'ac' ? 'ubb-emoji-button-active' : 'ubb-emoji-button', onClick: function (e) { e.stopPropagation(); _this.setState({ emojiType: 'ac' }); } }, "AC\u5A18"),
                    React.createElement("button", { type: "button", className: this.state.emojiType === 'mj' ? 'ubb-emoji-button-active' : 'ubb-emoji-button', onClick: function (e) { e.stopPropagation(); _this.setState({ emojiType: 'mj' }); } }, "\u9EBB\u5C06\u8138"),
                    React.createElement("button", { type: "button", className: this.state.emojiType === 'tb' ? 'ubb-emoji-button-active' : 'ubb-emoji-button', onClick: function (e) { e.stopPropagation(); _this.setState({ emojiType: 'tb' }); } }, "\u8D34\u5427"),
                    React.createElement("button", { type: "button", className: this.state.emojiType === 'em' ? 'ubb-emoji-button-active' : 'ubb-emoji-button', onClick: function (e) { e.stopPropagation(); _this.setState({ emojiType: 'em' }); } }, "\u7ECF\u5178")),
                React.createElement("div", { className: "ubb-emoji-content ubb-emoji-content-" + this.state.emojiType },
                    info[this.state.emojiType],
                    emoji[this.state.emojiType]))));
    };
    return UbbEditor;
}(React.Component));
exports.UbbEditor = UbbEditor;


/***/ }),
/* 86 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var react_router_dom_1 = __webpack_require__(8);
/**
 * 用户最近单个帖子组件
 */
var UserCenterExactActivitiesPost = /** @class */ (function (_super) {
    __extends(UserCenterExactActivitiesPost, _super);
    function UserCenterExactActivitiesPost() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    UserCenterExactActivitiesPost.prototype.render = function () {
        return (React.createElement("div", { className: "user-post" },
            React.createElement("div", { className: "user-post-info" },
                React.createElement(react_router_dom_1.Link, { className: "user-post-board", to: "/list/" + this.props.userRecentPost.boardId }, this.props.userRecentPost.board),
                React.createElement("a", { className: "user-post-date" }, this.props.userRecentPost.date),
                React.createElement("a", { className: "user-post-title" }, this.props.userRecentPost.title)),
            React.createElement("div", { className: "user-post-content" },
                React.createElement("p", null,
                    React.createElement(react_router_dom_1.Link, { to: "/topic/" + this.props.userRecentPost.id }, this.props.userRecentPost.content)),
                this.props.userRecentPost.approval !== undefined ? React.createElement("a", { className: "fa-thumbs-o-up" }, " " + this.props.userRecentPost.approval) : null,
                this.props.userRecentPost.disapproval !== undefined ? React.createElement("a", { className: "fa-thumbs-o-down" }, " " + this.props.userRecentPost.disapproval) : null)));
    };
    return UserCenterExactActivitiesPost;
}(React.Component));
exports.UserCenterExactActivitiesPost = UserCenterExactActivitiesPost;


/***/ }),
/* 87 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var react_router_dom_1 = __webpack_require__(8);
var UserCenterPageCount = /** @class */ (function (_super) {
    __extends(UserCenterPageCount, _super);
    function UserCenterPageCount() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    UserCenterPageCount.prototype.render = function () {
        var _this = this;
        var elements = [], i;
        var currentStyle = {
            backgroundColor: '#ccc',
            cursor: 'default'
        };
        if (this.props.totalPage <= 7) {
            i = this.props.totalPage;
            while (i--) {
                elements.unshift(i + 1);
            }
            elements = elements.map(function (item, index) {
                return React.createElement("li", null,
                    React.createElement(react_router_dom_1.Link, { to: "" + _this.props.href + item },
                        React.createElement("button", { type: "button", disabled: item == _this.props.currentPage, style: (item == _this.props.currentPage) ? currentStyle : {} }, item)));
            });
        }
        else if (this.props.currentPage - 1 <= 3) {
            i = 7;
            while (i--) {
                elements.unshift(i + 1);
            }
            elements = elements.map(function (item, index) { return (React.createElement("li", null,
                React.createElement(react_router_dom_1.Link, { to: "" + _this.props.href + item },
                    React.createElement("button", { type: "button", disabled: item == _this.props.currentPage, style: (item == _this.props.currentPage) ? currentStyle : {} }, item)))); });
            elements.push(React.createElement("li", null,
                React.createElement("button", { disabled: true }, "\u00B7\u00B7\u00B7")));
            elements.push(React.createElement("li", null,
                React.createElement(react_router_dom_1.Link, { to: "" + this.props.href + this.props.totalPage },
                    React.createElement("button", { type: "button" }, this.props.totalPage))));
        }
        else if (this.props.totalPage - this.props.currentPage <= 3) {
            i = 7;
            while (i--) {
                elements.unshift(i - 6 + this.props.totalPage);
            }
            elements = elements.map(function (item, index) { return (React.createElement("li", null,
                React.createElement(react_router_dom_1.Link, { to: "" + _this.props.href + item },
                    React.createElement("button", { type: "button", disabled: item == _this.props.currentPage, style: (item == _this.props.currentPage) ? currentStyle : {} }, item)))); });
            elements.unshift(React.createElement("li", null,
                React.createElement("button", { disabled: true }, "\u00B7\u00B7\u00B7")));
            elements.unshift(React.createElement("li", null,
                React.createElement(react_router_dom_1.Link, { to: this.props.href + "1" },
                    React.createElement("button", { type: "button" }, 1))));
        }
        else {
            i = 7;
            while (i--) {
                elements.unshift(i - 3 + this.props.currentPage);
            }
            elements = elements.map(function (item, index) { return (React.createElement("li", null,
                React.createElement(react_router_dom_1.Link, { to: "" + _this.props.href + item },
                    React.createElement("button", { type: "button", disabled: item == _this.props.currentPage, style: (item == _this.props.currentPage) ? currentStyle : {} }, item)))); });
            elements.push(React.createElement("li", null,
                React.createElement("button", { disabled: true }, "\u00B7\u00B7\u00B7")));
            elements.push(React.createElement("li", null,
                React.createElement(react_router_dom_1.Link, { to: "" + this.props.href + this.props.totalPage },
                    React.createElement("button", { type: "button" }, this.props.totalPage))));
            elements.unshift(React.createElement("li", null,
                React.createElement("button", { disabled: true }, "\u00B7\u00B7\u00B7")));
            elements.unshift(React.createElement("li", null,
                React.createElement(react_router_dom_1.Link, { to: this.props.href + "1" },
                    React.createElement("button", { type: "button" }, 1))));
        }
        if (!this.props.hasTotal && this.props.currentPage != this.props.totalPage) {
            elements.push(React.createElement("li", null,
                React.createElement("button", { disabled: true }, "\u00B7\u00B7\u00B7")));
        }
        return (React.createElement("div", { id: "userCenterPageCount" },
            React.createElement("ul", null, elements)));
    };
    return UserCenterPageCount;
}(React.Component));
exports.UserCenterPageCount = UserCenterPageCount;
var UserCenterPageCountProps = /** @class */ (function () {
    function UserCenterPageCountProps() {
    }
    return UserCenterPageCountProps;
}());


/***/ }),
/* 88 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) .NET Foundation. All rights reserved.
// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
Object.defineProperty(exports, "__esModule", { value: true });
var ILogger_1 = __webpack_require__(63);
var NullLogger = /** @class */ (function () {
    function NullLogger() {
    }
    NullLogger.prototype.log = function (logLevel, message) {
    };
    return NullLogger;
}());
exports.NullLogger = NullLogger;
var ConsoleLogger = /** @class */ (function () {
    function ConsoleLogger(minimumLogLevel) {
        this.minimumLogLevel = minimumLogLevel;
    }
    ConsoleLogger.prototype.log = function (logLevel, message) {
        if (logLevel >= this.minimumLogLevel) {
            switch (logLevel) {
                case ILogger_1.LogLevel.Error:
                    console.error(ILogger_1.LogLevel[logLevel] + ": " + message);
                    break;
                case ILogger_1.LogLevel.Warning:
                    console.warn(ILogger_1.LogLevel[logLevel] + ": " + message);
                    break;
                case ILogger_1.LogLevel.Information:
                    console.info(ILogger_1.LogLevel[logLevel] + ": " + message);
                    break;
                default:
                    console.log(ILogger_1.LogLevel[logLevel] + ": " + message);
                    break;
            }
        }
    };
    return ConsoleLogger;
}());
exports.ConsoleLogger = ConsoleLogger;
var LoggerFactory;
(function (LoggerFactory) {
    function createLogger(logging) {
        if (logging === undefined) {
            return new ConsoleLogger(ILogger_1.LogLevel.Information);
        }
        if (logging === null) {
            return new NullLogger();
        }
        if (logging.log) {
            return logging;
        }
        return new ConsoleLogger(logging);
    }
    LoggerFactory.createLogger = createLogger;
})(LoggerFactory = exports.LoggerFactory || (exports.LoggerFactory = {}));


/***/ }),
/* 89 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(Buffer) {var DuplexStream = __webpack_require__(476)
  , util         = __webpack_require__(121)


function BufferList (callback) {
  if (!(this instanceof BufferList))
    return new BufferList(callback)

  this._bufs  = []
  this.length = 0

  if (typeof callback == 'function') {
    this._callback = callback

    var piper = function piper (err) {
      if (this._callback) {
        this._callback(err)
        this._callback = null
      }
    }.bind(this)

    this.on('pipe', function onPipe (src) {
      src.on('error', piper)
    })
    this.on('unpipe', function onUnpipe (src) {
      src.removeListener('error', piper)
    })
  } else {
    this.append(callback)
  }

  DuplexStream.call(this)
}


util.inherits(BufferList, DuplexStream)


BufferList.prototype._offset = function _offset (offset) {
  var tot = 0, i = 0, _t
  if (offset === 0) return [ 0, 0 ]
  for (; i < this._bufs.length; i++) {
    _t = tot + this._bufs[i].length
    if (offset < _t || i == this._bufs.length - 1)
      return [ i, offset - tot ]
    tot = _t
  }
}


BufferList.prototype.append = function append (buf) {
  var i = 0

  if (Buffer.isBuffer(buf)) {
    this._appendBuffer(buf);
  } else if (Array.isArray(buf)) {
    for (; i < buf.length; i++)
      this.append(buf[i])
  } else if (buf instanceof BufferList) {
    // unwrap argument into individual BufferLists
    for (; i < buf._bufs.length; i++)
      this.append(buf._bufs[i])
  } else if (buf != null) {
    // coerce number arguments to strings, since Buffer(number) does
    // uninitialized memory allocation
    if (typeof buf == 'number')
      buf = buf.toString()

    this._appendBuffer(new Buffer(buf));
  }

  return this
}


BufferList.prototype._appendBuffer = function appendBuffer (buf) {
  this._bufs.push(buf)
  this.length += buf.length
}


BufferList.prototype._write = function _write (buf, encoding, callback) {
  this._appendBuffer(buf)

  if (typeof callback == 'function')
    callback()
}


BufferList.prototype._read = function _read (size) {
  if (!this.length)
    return this.push(null)

  size = Math.min(size, this.length)
  this.push(this.slice(0, size))
  this.consume(size)
}


BufferList.prototype.end = function end (chunk) {
  DuplexStream.prototype.end.call(this, chunk)

  if (this._callback) {
    this._callback(null, this.slice())
    this._callback = null
  }
}


BufferList.prototype.get = function get (index) {
  return this.slice(index, index + 1)[0]
}


BufferList.prototype.slice = function slice (start, end) {
  if (typeof start == 'number' && start < 0)
    start += this.length
  if (typeof end == 'number' && end < 0)
    end += this.length
  return this.copy(null, 0, start, end)
}


BufferList.prototype.copy = function copy (dst, dstStart, srcStart, srcEnd) {
  if (typeof srcStart != 'number' || srcStart < 0)
    srcStart = 0
  if (typeof srcEnd != 'number' || srcEnd > this.length)
    srcEnd = this.length
  if (srcStart >= this.length)
    return dst || new Buffer(0)
  if (srcEnd <= 0)
    return dst || new Buffer(0)

  var copy   = !!dst
    , off    = this._offset(srcStart)
    , len    = srcEnd - srcStart
    , bytes  = len
    , bufoff = (copy && dstStart) || 0
    , start  = off[1]
    , l
    , i

  // copy/slice everything
  if (srcStart === 0 && srcEnd == this.length) {
    if (!copy) { // slice, but full concat if multiple buffers
      return this._bufs.length === 1
        ? this._bufs[0]
        : Buffer.concat(this._bufs, this.length)
    }

    // copy, need to copy individual buffers
    for (i = 0; i < this._bufs.length; i++) {
      this._bufs[i].copy(dst, bufoff)
      bufoff += this._bufs[i].length
    }

    return dst
  }

  // easy, cheap case where it's a subset of one of the buffers
  if (bytes <= this._bufs[off[0]].length - start) {
    return copy
      ? this._bufs[off[0]].copy(dst, dstStart, start, start + bytes)
      : this._bufs[off[0]].slice(start, start + bytes)
  }

  if (!copy) // a slice, we need something to copy in to
    dst = new Buffer(len)

  for (i = off[0]; i < this._bufs.length; i++) {
    l = this._bufs[i].length - start

    if (bytes > l) {
      this._bufs[i].copy(dst, bufoff, start)
    } else {
      this._bufs[i].copy(dst, bufoff, start, start + bytes)
      break
    }

    bufoff += l
    bytes -= l

    if (start)
      start = 0
  }

  return dst
}

BufferList.prototype.shallowSlice = function shallowSlice (start, end) {
  start = start || 0
  end = end || this.length

  if (start < 0)
    start += this.length
  if (end < 0)
    end += this.length

  var startOffset = this._offset(start)
    , endOffset = this._offset(end)
    , buffers = this._bufs.slice(startOffset[0], endOffset[0] + 1)

  if (endOffset[1] == 0)
    buffers.pop()
  else
    buffers[buffers.length-1] = buffers[buffers.length-1].slice(0, endOffset[1])

  if (startOffset[1] != 0)
    buffers[0] = buffers[0].slice(startOffset[1])

  return new BufferList(buffers)
}

BufferList.prototype.toString = function toString (encoding, start, end) {
  return this.slice(start, end).toString(encoding)
}

BufferList.prototype.consume = function consume (bytes) {
  while (this._bufs.length) {
    if (bytes >= this._bufs[0].length) {
      bytes -= this._bufs[0].length
      this.length -= this._bufs[0].length
      this._bufs.shift()
    } else {
      this._bufs[0] = this._bufs[0].slice(bytes)
      this.length -= bytes
      break
    }
  }
  return this
}


BufferList.prototype.duplicate = function duplicate () {
  var i = 0
    , copy = new BufferList()

  for (; i < this._bufs.length; i++)
    copy.append(this._bufs[i])

  return copy
}


BufferList.prototype.destroy = function destroy () {
  this._bufs.length = 0
  this.length = 0
  this.push(null)
}


;(function () {
  var methods = {
      'readDoubleBE' : 8
    , 'readDoubleLE' : 8
    , 'readFloatBE'  : 4
    , 'readFloatLE'  : 4
    , 'readInt32BE'  : 4
    , 'readInt32LE'  : 4
    , 'readUInt32BE' : 4
    , 'readUInt32LE' : 4
    , 'readInt16BE'  : 2
    , 'readInt16LE'  : 2
    , 'readUInt16BE' : 2
    , 'readUInt16LE' : 2
    , 'readInt8'     : 1
    , 'readUInt8'    : 1
  }

  for (var m in methods) {
    (function (m) {
      BufferList.prototype[m] = function (offset) {
        return this.slice(offset, offset + methods[m])[m](0)
      }
    }(m))
  }
}())


module.exports = BufferList

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(64).Buffer))

/***/ }),
/* 90 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(process) {

if (!process.version ||
    process.version.indexOf('v0.') === 0 ||
    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {
  module.exports = nextTick;
} else {
  module.exports = process.nextTick;
}

function nextTick(fn, arg1, arg2, arg3) {
  if (typeof fn !== 'function') {
    throw new TypeError('"callback" argument must be a function');
  }
  var len = arguments.length;
  var args, i;
  switch (len) {
  case 0:
  case 1:
    return process.nextTick(fn);
  case 2:
    return process.nextTick(function afterTickOne() {
      fn.call(null, arg1);
    });
  case 3:
    return process.nextTick(function afterTickTwo() {
      fn.call(null, arg1, arg2);
    });
  case 4:
    return process.nextTick(function afterTickThree() {
      fn.call(null, arg1, arg2, arg3);
    });
  default:
    args = new Array(len - 1);
    i = 0;
    while (i < args.length) {
      args[i++] = arguments[i];
    }
    return process.nextTick(function afterTick() {
      fn.apply(null, args);
    });
  }
}

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(66)))

/***/ }),
/* 91 */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(7);
var document = __webpack_require__(5).document;
// typeof document.createElement is 'object' in old IE
var is = isObject(document) && isObject(document.createElement);
module.exports = function (it) {
  return is ? document.createElement(it) : {};
};


/***/ }),
/* 92 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(5);
var core = __webpack_require__(32);
var LIBRARY = __webpack_require__(43);
var wksExt = __webpack_require__(123);
var defineProperty = __webpack_require__(11).f;
module.exports = function (name) {
  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});
  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });
};


/***/ }),
/* 93 */
/***/ (function(module, exports, __webpack_require__) {

var shared = __webpack_require__(68)('keys');
var uid = __webpack_require__(42);
module.exports = function (key) {
  return shared[key] || (shared[key] = uid(key));
};


/***/ }),
/* 94 */
/***/ (function(module, exports) {

// IE 8- don't enum bug keys
module.exports = (
  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'
).split(',');


/***/ }),
/* 95 */
/***/ (function(module, exports, __webpack_require__) {

var document = __webpack_require__(5).document;
module.exports = document && document.documentElement;


/***/ }),
/* 96 */
/***/ (function(module, exports, __webpack_require__) {

// Works with __proto__ only. Old v8 can't work with null proto objects.
/* eslint-disable no-proto */
var isObject = __webpack_require__(7);
var anObject = __webpack_require__(3);
var check = function (O, proto) {
  anObject(O);
  if (!isObject(proto) && proto !== null) throw TypeError(proto + ": can't set as prototype!");
};
module.exports = {
  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line
    function (test, buggy, set) {
      try {
        set = __webpack_require__(23)(Function.call, __webpack_require__(21).f(Object.prototype, '__proto__').set, 2);
        set(test, []);
        buggy = !(test instanceof Array);
      } catch (e) { buggy = true; }
      return function setPrototypeOf(O, proto) {
        check(O, proto);
        if (buggy) O.__proto__ = proto;
        else set(O, proto);
        return O;
      };
    }({}, false) : undefined),
  check: check
};


/***/ }),
/* 97 */
/***/ (function(module, exports) {

module.exports = '\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003' +
  '\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF';


/***/ }),
/* 98 */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(7);
var setPrototypeOf = __webpack_require__(96).set;
module.exports = function (that, target, C) {
  var S = target.constructor;
  var P;
  if (S !== C && typeof S == 'function' && (P = S.prototype) !== C.prototype && isObject(P) && setPrototypeOf) {
    setPrototypeOf(that, P);
  } return that;
};


/***/ }),
/* 99 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toInteger = __webpack_require__(29);
var defined = __webpack_require__(28);

module.exports = function repeat(count) {
  var str = String(defined(this));
  var res = '';
  var n = toInteger(count);
  if (n < 0 || n == Infinity) throw RangeError("Count can't be negative");
  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) res += str;
  return res;
};


/***/ }),
/* 100 */
/***/ (function(module, exports) {

// 20.2.2.28 Math.sign(x)
module.exports = Math.sign || function sign(x) {
  // eslint-disable-next-line no-self-compare
  return (x = +x) == 0 || x != x ? x : x < 0 ? -1 : 1;
};


/***/ }),
/* 101 */
/***/ (function(module, exports) {

// 20.2.2.14 Math.expm1(x)
var $expm1 = Math.expm1;
module.exports = (!$expm1
  // Old FF bug
  || $expm1(10) > 22025.465794806719 || $expm1(10) < 22025.4657948067165168
  // Tor Browser bug
  || $expm1(-2e-17) != -2e-17
) ? function expm1(x) {
  return (x = +x) == 0 ? x : x > -1e-6 && x < 1e-6 ? x + x * x / 2 : Math.exp(x) - 1;
} : $expm1;


/***/ }),
/* 102 */
/***/ (function(module, exports, __webpack_require__) {

var toInteger = __webpack_require__(29);
var defined = __webpack_require__(28);
// true  -> String#at
// false -> String#codePointAt
module.exports = function (TO_STRING) {
  return function (that, pos) {
    var s = String(defined(that));
    var i = toInteger(pos);
    var l = s.length;
    var a, b;
    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;
    a = s.charCodeAt(i);
    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff
      ? TO_STRING ? s.charAt(i) : a
      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;
  };
};


/***/ }),
/* 103 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var LIBRARY = __webpack_require__(43);
var $export = __webpack_require__(0);
var redefine = __webpack_require__(18);
var hide = __webpack_require__(17);
var has = __webpack_require__(16);
var Iterators = __webpack_require__(55);
var $iterCreate = __webpack_require__(104);
var setToStringTag = __webpack_require__(53);
var getPrototypeOf = __webpack_require__(22);
var ITERATOR = __webpack_require__(9)('iterator');
var BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`
var FF_ITERATOR = '@@iterator';
var KEYS = 'keys';
var VALUES = 'values';

var returnThis = function () { return this; };

module.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {
  $iterCreate(Constructor, NAME, next);
  var getMethod = function (kind) {
    if (!BUGGY && kind in proto) return proto[kind];
    switch (kind) {
      case KEYS: return function keys() { return new Constructor(this, kind); };
      case VALUES: return function values() { return new Constructor(this, kind); };
    } return function entries() { return new Constructor(this, kind); };
  };
  var TAG = NAME + ' Iterator';
  var DEF_VALUES = DEFAULT == VALUES;
  var VALUES_BUG = false;
  var proto = Base.prototype;
  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];
  var $default = $native || getMethod(DEFAULT);
  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;
  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;
  var methods, key, IteratorPrototype;
  // Fix native
  if ($anyNative) {
    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));
    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {
      // Set @@toStringTag to native iterators
      setToStringTag(IteratorPrototype, TAG, true);
      // fix for some old engines
      if (!LIBRARY && !has(IteratorPrototype, ITERATOR)) hide(IteratorPrototype, ITERATOR, returnThis);
    }
  }
  // fix Array#{values, @@iterator}.name in V8 / FF
  if (DEF_VALUES && $native && $native.name !== VALUES) {
    VALUES_BUG = true;
    $default = function values() { return $native.call(this); };
  }
  // Define iterator
  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {
    hide(proto, ITERATOR, $default);
  }
  // Plug for library
  Iterators[NAME] = $default;
  Iterators[TAG] = returnThis;
  if (DEFAULT) {
    methods = {
      values: DEF_VALUES ? $default : getMethod(VALUES),
      keys: IS_SET ? $default : getMethod(KEYS),
      entries: $entries
    };
    if (FORCED) for (key in methods) {
      if (!(key in proto)) redefine(proto, key, methods[key]);
    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);
  }
  return methods;
};


/***/ }),
/* 104 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var create = __webpack_require__(46);
var descriptor = __webpack_require__(41);
var setToStringTag = __webpack_require__(53);
var IteratorPrototype = {};

// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()
__webpack_require__(17)(IteratorPrototype, __webpack_require__(9)('iterator'), function () { return this; });

module.exports = function (Constructor, NAME, next) {
  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });
  setToStringTag(Constructor, NAME + ' Iterator');
};


/***/ }),
/* 105 */
/***/ (function(module, exports, __webpack_require__) {

// helper for String#{startsWith, endsWith, includes}
var isRegExp = __webpack_require__(72);
var defined = __webpack_require__(28);

module.exports = function (that, searchString, NAME) {
  if (isRegExp(searchString)) throw TypeError('String#' + NAME + " doesn't accept regex!");
  return String(defined(that));
};


/***/ }),
/* 106 */
/***/ (function(module, exports, __webpack_require__) {

var MATCH = __webpack_require__(9)('match');
module.exports = function (KEY) {
  var re = /./;
  try {
    '/./'[KEY](re);
  } catch (e) {
    try {
      re[MATCH] = false;
      return !'/./'[KEY](re);
    } catch (f) { /* empty */ }
  } return true;
};


/***/ }),
/* 107 */
/***/ (function(module, exports, __webpack_require__) {

// check on default Array iterator
var Iterators = __webpack_require__(55);
var ITERATOR = __webpack_require__(9)('iterator');
var ArrayProto = Array.prototype;

module.exports = function (it) {
  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);
};


/***/ }),
/* 108 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $defineProperty = __webpack_require__(11);
var createDesc = __webpack_require__(41);

module.exports = function (object, index, value) {
  if (index in object) $defineProperty.f(object, index, createDesc(0, value));
  else object[index] = value;
};


/***/ }),
/* 109 */
/***/ (function(module, exports, __webpack_require__) {

var classof = __webpack_require__(61);
var ITERATOR = __webpack_require__(9)('iterator');
var Iterators = __webpack_require__(55);
module.exports = __webpack_require__(32).getIteratorMethod = function (it) {
  if (it != undefined) return it[ITERATOR]
    || it['@@iterator']
    || Iterators[classof(it)];
};


/***/ }),
/* 110 */
/***/ (function(module, exports, __webpack_require__) {

// 9.4.2.3 ArraySpeciesCreate(originalArray, length)
var speciesConstructor = __webpack_require__(274);

module.exports = function (original, length) {
  return new (speciesConstructor(original))(length);
};


/***/ }),
/* 111 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)

var toObject = __webpack_require__(13);
var toAbsoluteIndex = __webpack_require__(45);
var toLength = __webpack_require__(12);
module.exports = function fill(value /* , start = 0, end = @length */) {
  var O = toObject(this);
  var length = toLength(O.length);
  var aLen = arguments.length;
  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);
  var end = aLen > 2 ? arguments[2] : undefined;
  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);
  while (endPos > index) O[index++] = value;
  return O;
};


/***/ }),
/* 112 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var addToUnscopables = __webpack_require__(39);
var step = __webpack_require__(139);
var Iterators = __webpack_require__(55);
var toIObject = __webpack_require__(20);

// 22.1.3.4 Array.prototype.entries()
// 22.1.3.13 Array.prototype.keys()
// 22.1.3.29 Array.prototype.values()
// 22.1.3.30 Array.prototype[@@iterator]()
module.exports = __webpack_require__(103)(Array, 'Array', function (iterated, kind) {
  this._t = toIObject(iterated); // target
  this._i = 0;                   // next index
  this._k = kind;                // kind
// 22.1.5.2.1 %ArrayIteratorPrototype%.next()
}, function () {
  var O = this._t;
  var kind = this._k;
  var index = this._i++;
  if (!O || index >= O.length) {
    this._t = undefined;
    return step(1);
  }
  if (kind == 'keys') return step(0, index);
  if (kind == 'values') return step(0, O[index]);
  return step(0, [index, O[index]]);
}, 'values');

// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)
Iterators.Arguments = Iterators.Array;

addToUnscopables('keys');
addToUnscopables('values');
addToUnscopables('entries');


/***/ }),
/* 113 */
/***/ (function(module, exports, __webpack_require__) {

var ctx = __webpack_require__(23);
var invoke = __webpack_require__(129);
var html = __webpack_require__(95);
var cel = __webpack_require__(91);
var global = __webpack_require__(5);
var process = global.process;
var setTask = global.setImmediate;
var clearTask = global.clearImmediate;
var MessageChannel = global.MessageChannel;
var Dispatch = global.Dispatch;
var counter = 0;
var queue = {};
var ONREADYSTATECHANGE = 'onreadystatechange';
var defer, channel, port;
var run = function () {
  var id = +this;
  // eslint-disable-next-line no-prototype-builtins
  if (queue.hasOwnProperty(id)) {
    var fn = queue[id];
    delete queue[id];
    fn();
  }
};
var listener = function (event) {
  run.call(event.data);
};
// Node.js 0.9+ & IE10+ has setImmediate, otherwise:
if (!setTask || !clearTask) {
  setTask = function setImmediate(fn) {
    var args = [];
    var i = 1;
    while (arguments.length > i) args.push(arguments[i++]);
    queue[++counter] = function () {
      // eslint-disable-next-line no-new-func
      invoke(typeof fn == 'function' ? fn : Function(fn), args);
    };
    defer(counter);
    return counter;
  };
  clearTask = function clearImmediate(id) {
    delete queue[id];
  };
  // Node.js 0.8-
  if (__webpack_require__(24)(process) == 'process') {
    defer = function (id) {
      process.nextTick(ctx(run, id, 1));
    };
  // Sphere (JS game engine) Dispatch API
  } else if (Dispatch && Dispatch.now) {
    defer = function (id) {
      Dispatch.now(ctx(run, id, 1));
    };
  // Browsers with MessageChannel, includes WebWorkers
  } else if (MessageChannel) {
    channel = new MessageChannel();
    port = channel.port2;
    channel.port1.onmessage = listener;
    defer = ctx(port.postMessage, port, 1);
  // Browsers with postMessage, skip WebWorkers
  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'
  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {
    defer = function (id) {
      global.postMessage(id + '', '*');
    };
    global.addEventListener('message', listener, false);
  // IE8-
  } else if (ONREADYSTATECHANGE in cel('script')) {
    defer = function (id) {
      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {
        html.removeChild(this);
        run.call(id);
      };
    };
  // Rest old browsers
  } else {
    defer = function (id) {
      setTimeout(ctx(run, id, 1), 0);
    };
  }
}
module.exports = {
  set: setTask,
  clear: clearTask
};


/***/ }),
/* 114 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(5);
var macrotask = __webpack_require__(113).set;
var Observer = global.MutationObserver || global.WebKitMutationObserver;
var process = global.process;
var Promise = global.Promise;
var isNode = __webpack_require__(24)(process) == 'process';

module.exports = function () {
  var head, last, notify;

  var flush = function () {
    var parent, fn;
    if (isNode && (parent = process.domain)) parent.exit();
    while (head) {
      fn = head.fn;
      head = head.next;
      try {
        fn();
      } catch (e) {
        if (head) notify();
        else last = undefined;
        throw e;
      }
    } last = undefined;
    if (parent) parent.enter();
  };

  // Node.js
  if (isNode) {
    notify = function () {
      process.nextTick(flush);
    };
  // browsers with MutationObserver
  } else if (Observer) {
    var toggle = true;
    var node = document.createTextNode('');
    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new
    notify = function () {
      node.data = toggle = !toggle;
    };
  // environments with maybe non-completely correct, but existent Promise
  } else if (Promise && Promise.resolve) {
    var promise = Promise.resolve();
    notify = function () {
      promise.then(flush);
    };
  // for other environments - macrotask based on:
  // - setImmediate
  // - MessageChannel
  // - window.postMessag
  // - onreadystatechange
  // - setTimeout
  } else {
    notify = function () {
      // strange IE + webpack dev server bug - use .call(global)
      macrotask.call(global, flush);
    };
  }

  return function (fn) {
    var task = { fn: fn, next: undefined };
    if (last) last.next = task;
    if (!head) {
      head = task;
      notify();
    } last = task;
  };
};


/***/ }),
/* 115 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 25.4.1.5 NewPromiseCapability(C)
var aFunction = __webpack_require__(14);

function PromiseCapability(C) {
  var resolve, reject;
  this.promise = new C(function ($$resolve, $$reject) {
    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');
    resolve = $$resolve;
    reject = $$reject;
  });
  this.resolve = aFunction(resolve);
  this.reject = aFunction(reject);
}

module.exports.f = function (C) {
  return new PromiseCapability(C);
};


/***/ }),
/* 116 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global = __webpack_require__(5);
var DESCRIPTORS = __webpack_require__(10);
var LIBRARY = __webpack_require__(43);
var $typed = __webpack_require__(78);
var hide = __webpack_require__(17);
var redefineAll = __webpack_require__(51);
var fails = __webpack_require__(6);
var anInstance = __webpack_require__(49);
var toInteger = __webpack_require__(29);
var toLength = __webpack_require__(12);
var toIndex = __webpack_require__(148);
var gOPN = __webpack_require__(47).f;
var dP = __webpack_require__(11).f;
var arrayFill = __webpack_require__(111);
var setToStringTag = __webpack_require__(53);
var ARRAY_BUFFER = 'ArrayBuffer';
var DATA_VIEW = 'DataView';
var PROTOTYPE = 'prototype';
var WRONG_LENGTH = 'Wrong length!';
var WRONG_INDEX = 'Wrong index!';
var $ArrayBuffer = global[ARRAY_BUFFER];
var $DataView = global[DATA_VIEW];
var Math = global.Math;
var RangeError = global.RangeError;
// eslint-disable-next-line no-shadow-restricted-names
var Infinity = global.Infinity;
var BaseBuffer = $ArrayBuffer;
var abs = Math.abs;
var pow = Math.pow;
var floor = Math.floor;
var log = Math.log;
var LN2 = Math.LN2;
var BUFFER = 'buffer';
var BYTE_LENGTH = 'byteLength';
var BYTE_OFFSET = 'byteOffset';
var $BUFFER = DESCRIPTORS ? '_b' : BUFFER;
var $LENGTH = DESCRIPTORS ? '_l' : BYTE_LENGTH;
var $OFFSET = DESCRIPTORS ? '_o' : BYTE_OFFSET;

// IEEE754 conversions based on https://github.com/feross/ieee754
function packIEEE754(value, mLen, nBytes) {
  var buffer = Array(nBytes);
  var eLen = nBytes * 8 - mLen - 1;
  var eMax = (1 << eLen) - 1;
  var eBias = eMax >> 1;
  var rt = mLen === 23 ? pow(2, -24) - pow(2, -77) : 0;
  var i = 0;
  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;
  var e, m, c;
  value = abs(value);
  // eslint-disable-next-line no-self-compare
  if (value != value || value === Infinity) {
    // eslint-disable-next-line no-self-compare
    m = value != value ? 1 : 0;
    e = eMax;
  } else {
    e = floor(log(value) / LN2);
    if (value * (c = pow(2, -e)) < 1) {
      e--;
      c *= 2;
    }
    if (e + eBias >= 1) {
      value += rt / c;
    } else {
      value += rt * pow(2, 1 - eBias);
    }
    if (value * c >= 2) {
      e++;
      c /= 2;
    }
    if (e + eBias >= eMax) {
      m = 0;
      e = eMax;
    } else if (e + eBias >= 1) {
      m = (value * c - 1) * pow(2, mLen);
      e = e + eBias;
    } else {
      m = value * pow(2, eBias - 1) * pow(2, mLen);
      e = 0;
    }
  }
  for (; mLen >= 8; buffer[i++] = m & 255, m /= 256, mLen -= 8);
  e = e << mLen | m;
  eLen += mLen;
  for (; eLen > 0; buffer[i++] = e & 255, e /= 256, eLen -= 8);
  buffer[--i] |= s * 128;
  return buffer;
}
function unpackIEEE754(buffer, mLen, nBytes) {
  var eLen = nBytes * 8 - mLen - 1;
  var eMax = (1 << eLen) - 1;
  var eBias = eMax >> 1;
  var nBits = eLen - 7;
  var i = nBytes - 1;
  var s = buffer[i--];
  var e = s & 127;
  var m;
  s >>= 7;
  for (; nBits > 0; e = e * 256 + buffer[i], i--, nBits -= 8);
  m = e & (1 << -nBits) - 1;
  e >>= -nBits;
  nBits += mLen;
  for (; nBits > 0; m = m * 256 + buffer[i], i--, nBits -= 8);
  if (e === 0) {
    e = 1 - eBias;
  } else if (e === eMax) {
    return m ? NaN : s ? -Infinity : Infinity;
  } else {
    m = m + pow(2, mLen);
    e = e - eBias;
  } return (s ? -1 : 1) * m * pow(2, e - mLen);
}

function unpackI32(bytes) {
  return bytes[3] << 24 | bytes[2] << 16 | bytes[1] << 8 | bytes[0];
}
function packI8(it) {
  return [it & 0xff];
}
function packI16(it) {
  return [it & 0xff, it >> 8 & 0xff];
}
function packI32(it) {
  return [it & 0xff, it >> 8 & 0xff, it >> 16 & 0xff, it >> 24 & 0xff];
}
function packF64(it) {
  return packIEEE754(it, 52, 8);
}
function packF32(it) {
  return packIEEE754(it, 23, 4);
}

function addGetter(C, key, internal) {
  dP(C[PROTOTYPE], key, { get: function () { return this[internal]; } });
}

function get(view, bytes, index, isLittleEndian) {
  var numIndex = +index;
  var intIndex = toIndex(numIndex);
  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);
  var store = view[$BUFFER]._b;
  var start = intIndex + view[$OFFSET];
  var pack = store.slice(start, start + bytes);
  return isLittleEndian ? pack : pack.reverse();
}
function set(view, bytes, index, conversion, value, isLittleEndian) {
  var numIndex = +index;
  var intIndex = toIndex(numIndex);
  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);
  var store = view[$BUFFER]._b;
  var start = intIndex + view[$OFFSET];
  var pack = conversion(+value);
  for (var i = 0; i < bytes; i++) store[start + i] = pack[isLittleEndian ? i : bytes - i - 1];
}

if (!$typed.ABV) {
  $ArrayBuffer = function ArrayBuffer(length) {
    anInstance(this, $ArrayBuffer, ARRAY_BUFFER);
    var byteLength = toIndex(length);
    this._b = arrayFill.call(Array(byteLength), 0);
    this[$LENGTH] = byteLength;
  };

  $DataView = function DataView(buffer, byteOffset, byteLength) {
    anInstance(this, $DataView, DATA_VIEW);
    anInstance(buffer, $ArrayBuffer, DATA_VIEW);
    var bufferLength = buffer[$LENGTH];
    var offset = toInteger(byteOffset);
    if (offset < 0 || offset > bufferLength) throw RangeError('Wrong offset!');
    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);
    if (offset + byteLength > bufferLength) throw RangeError(WRONG_LENGTH);
    this[$BUFFER] = buffer;
    this[$OFFSET] = offset;
    this[$LENGTH] = byteLength;
  };

  if (DESCRIPTORS) {
    addGetter($ArrayBuffer, BYTE_LENGTH, '_l');
    addGetter($DataView, BUFFER, '_b');
    addGetter($DataView, BYTE_LENGTH, '_l');
    addGetter($DataView, BYTE_OFFSET, '_o');
  }

  redefineAll($DataView[PROTOTYPE], {
    getInt8: function getInt8(byteOffset) {
      return get(this, 1, byteOffset)[0] << 24 >> 24;
    },
    getUint8: function getUint8(byteOffset) {
      return get(this, 1, byteOffset)[0];
    },
    getInt16: function getInt16(byteOffset /* , littleEndian */) {
      var bytes = get(this, 2, byteOffset, arguments[1]);
      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;
    },
    getUint16: function getUint16(byteOffset /* , littleEndian */) {
      var bytes = get(this, 2, byteOffset, arguments[1]);
      return bytes[1] << 8 | bytes[0];
    },
    getInt32: function getInt32(byteOffset /* , littleEndian */) {
      return unpackI32(get(this, 4, byteOffset, arguments[1]));
    },
    getUint32: function getUint32(byteOffset /* , littleEndian */) {
      return unpackI32(get(this, 4, byteOffset, arguments[1])) >>> 0;
    },
    getFloat32: function getFloat32(byteOffset /* , littleEndian */) {
      return unpackIEEE754(get(this, 4, byteOffset, arguments[1]), 23, 4);
    },
    getFloat64: function getFloat64(byteOffset /* , littleEndian */) {
      return unpackIEEE754(get(this, 8, byteOffset, arguments[1]), 52, 8);
    },
    setInt8: function setInt8(byteOffset, value) {
      set(this, 1, byteOffset, packI8, value);
    },
    setUint8: function setUint8(byteOffset, value) {
      set(this, 1, byteOffset, packI8, value);
    },
    setInt16: function setInt16(byteOffset, value /* , littleEndian */) {
      set(this, 2, byteOffset, packI16, value, arguments[2]);
    },
    setUint16: function setUint16(byteOffset, value /* , littleEndian */) {
      set(this, 2, byteOffset, packI16, value, arguments[2]);
    },
    setInt32: function setInt32(byteOffset, value /* , littleEndian */) {
      set(this, 4, byteOffset, packI32, value, arguments[2]);
    },
    setUint32: function setUint32(byteOffset, value /* , littleEndian */) {
      set(this, 4, byteOffset, packI32, value, arguments[2]);
    },
    setFloat32: function setFloat32(byteOffset, value /* , littleEndian */) {
      set(this, 4, byteOffset, packF32, value, arguments[2]);
    },
    setFloat64: function setFloat64(byteOffset, value /* , littleEndian */) {
      set(this, 8, byteOffset, packF64, value, arguments[2]);
    }
  });
} else {
  if (!fails(function () {
    $ArrayBuffer(1);
  }) || !fails(function () {
    new $ArrayBuffer(-1); // eslint-disable-line no-new
  }) || fails(function () {
    new $ArrayBuffer(); // eslint-disable-line no-new
    new $ArrayBuffer(1.5); // eslint-disable-line no-new
    new $ArrayBuffer(NaN); // eslint-disable-line no-new
    return $ArrayBuffer.name != ARRAY_BUFFER;
  })) {
    $ArrayBuffer = function ArrayBuffer(length) {
      anInstance(this, $ArrayBuffer);
      return new BaseBuffer(toIndex(length));
    };
    var ArrayBufferProto = $ArrayBuffer[PROTOTYPE] = BaseBuffer[PROTOTYPE];
    for (var keys = gOPN(BaseBuffer), j = 0, key; keys.length > j;) {
      if (!((key = keys[j++]) in $ArrayBuffer)) hide($ArrayBuffer, key, BaseBuffer[key]);
    }
    if (!LIBRARY) ArrayBufferProto.constructor = $ArrayBuffer;
  }
  // iOS Safari 7.x bug
  var view = new $DataView(new $ArrayBuffer(2));
  var $setInt8 = $DataView[PROTOTYPE].setInt8;
  view.setInt8(0, 2147483648);
  view.setInt8(1, 2147483649);
  if (view.getInt8(0) || !view.getInt8(1)) redefineAll($DataView[PROTOTYPE], {
    setInt8: function setInt8(byteOffset, value) {
      $setInt8.call(this, byteOffset, value << 24 >> 24);
    },
    setUint8: function setUint8(byteOffset, value) {
      $setInt8.call(this, byteOffset, value << 24 >> 24);
    }
  }, true);
}
setToStringTag($ArrayBuffer, ARRAY_BUFFER);
setToStringTag($DataView, DATA_VIEW);
hide($DataView[PROTOTYPE], $typed.VIEW, true);
exports[ARRAY_BUFFER] = $ArrayBuffer;
exports[DATA_VIEW] = $DataView;


/***/ }),
/* 117 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var React = __webpack_require__(1);
/**
 * 我关注的某个版面的单个主题
 */
var FocusTopicSingle = /** @class */ (function (_super) {
    __extends(FocusTopicSingle, _super);
    function FocusTopicSingle() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    FocusTopicSingle.prototype.componentDidMount = function () {
        if (!this.props.tag1) {
            $("#tag_" + this.props.id).addClass('displaynone');
        }
        if (!this.props.userId) {
            $("#user_" + this.props.id).removeAttr('href');
            $("#user_" + this.props.id).removeAttr('target');
        }
    };
    FocusTopicSingle.prototype.render = function () {
        var tagInfo = '';
        if (this.props.tag1) {
            if (this.props.tag2) {
                tagInfo = "\u6807\u7B7E\uFF1A" + this.props.tag1 + " / " + this.props.tag2;
            }
            else {
                tagInfo = "\u6807\u7B7E\uFF1A" + this.props.tag1;
            }
        }
        var topicUrl = "/topic/" + this.props.id;
        var userUrl = "/user/id/" + this.props.userId;
        var boardUrl = "/list/" + this.props.boardId;
        var a = parseInt(this.props.replyCount + 1) / 10;
        var b = parseInt(a) + 1;
        var c = parseInt(this.props.replyCount) - (b - 1) * 10;
        var lastPostUrl = topicUrl + "/" + b + "#" + c;
        return (React.createElement("div", { className: "focus-topic" },
            React.createElement("a", { className: "focus-topic-left", href: userUrl, target: "_blank", id: "user_" + this.props.id },
                React.createElement("img", { className: "focus-topic-portraitUrl", src: this.props.portraitUrl }),
                React.createElement("div", { className: "focus-topic-text" },
                    React.createElement("div", { className: "focus-topic-userName" }, this.props.userName),
                    React.createElement("div", { className: "focus-topic-fans" }, "\u7C89\u4E1D   " + this.props.fanCount))),
            React.createElement("div", { className: "focus-topic-middle" },
                React.createElement("a", { className: "focus-topic-title", href: topicUrl, target: "_blank" }, this.props.title),
                React.createElement("div", { className: "focus-topic-info" },
                    React.createElement("div", { id: "tag_" + this.props.id }, tagInfo),
                    React.createElement("div", null,
                        React.createElement("i", { className: "fa fa-clock-o fa-lg" }),
                        this.props.time),
                    React.createElement("div", null,
                        React.createElement("i", { className: "fa fa-eye fa-lg" }),
                        " ",
                        this.props.hitCount),
                    React.createElement("div", null,
                        React.createElement("a", { href: lastPostUrl, target: "_blank" },
                            "\u6700\u540E\u56DE\u590D\uFF1A",
                            this.props.lastPostUser)),
                    React.createElement("div", null,
                        React.createElement("a", { href: lastPostUrl, target: "_blank" }, this.props.lastPostTime)))),
            React.createElement("div", { className: "focus-topic-rightBar" }),
            React.createElement("a", { className: "focus-topic-right", href: boardUrl, target: "_blank" },
                React.createElement("div", { className: "focus-topic-board" }, this.props.boardName))));
    };
    return FocusTopicSingle;
}(React.Component));
exports.FocusTopicSingle = FocusTopicSingle;
/*
export class FocusTopicSingle extends React.Component<FocusTopic> {
   
    render() {
        let topicUrl = `/topic/${this.props.id}`;
        let boardUrl = `/list/${this.props.boardId}`;
        return (<div className="focus-topic">
                    <PortaritrUrl userId={this.props.userId} portraitUrl={this.props.portraitUrl} />
                    <div className="focus-topic-info1">
                    <div className="focus-topic-authorInfo">
                    <UserName userId={this.props.userId} userName={this.props.userName} />
                            <div className="focus-topic-fans">粉丝</div>
                            <div className="focus-topic-redText">{this.props.fanCount}</div>
                        </div>
                        <div className="focus-topic-title"><a href={topicUrl} target="_blank">{this.props.title}</a></div>
                    </div>
                    <div className="focus-topic-info2">
                        <div className="focus-topic-board"><a href={boardUrl} target="_blank">{this.props.boardName}</a>&nbsp;&nbsp;/&nbsp;&nbsp;{moment(this.props.time).format('YYYY-MM-DD HH:mm:ss')}</div>
                        <div className="focus-topic-response">
                        <div><i className="fa fa-thumbs-o-up" aria-hidden="true"></i>{this.props.likeCount}</div>
                    <div><i className="fa fa-thumbs-o-down" aria-hidden="true"></i>{this.props.dislikeCount}</div>
                            <div><i className="fa fa-eye" aria-hidden="true"></i>{this.props.hitCount}</div>
                            <div><i className="fa fa-commenting-o" aria-hidden="true"></i>{this.props.replyCount}</div>
                        </div>
                    </div>
                </div>);

    }
}




//返回可点击或者不可点击的头像
export class PortaritrUrl extends React.Component<PortaritrUrlProps> {
    render() {
        if (this.props.userId) {
            let userUrl = `/user/id/${this.props.userId}`;
            return (<a href={userUrl} target="_blank">
                <img className="focus-topic-portraitUrl" src={this.props.portraitUrl}></img>
            </a>);
        }
        else {
            return <img className="focus-topic-portraitUrl" src={this.props.portraitUrl}></img>;
        }
    }
}

//返回可点击或者不可点击的用户名
export class UserName extends React.Component<UserNameProps> {
    render() {
        if (this.props.userId) {
            let userUrl = `/user/id/${this.props.userId}`;
            return (<a href={userUrl} target="_blank" className="focus-topic-blackText">
                        <div className="focus-topic-blackText">{this.props.userName}</div>
                    </a>);
        }
        else {
            return <div className="focus-topic-blackText">{this.props.userName}</div>;
        }
    }
}


export class PortaritrUrlProps {
    //用户id
    userId: number;
    //用户头像地址
    portraitUrl: string;
}

export class UserNameProps {
    //用户id
    userId: number;
    //用户名称
    userName: string;
}*/ 


/***/ }),
/* 118 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) .NET Foundation. All rights reserved.
// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Transports_1 = __webpack_require__(119);
var HttpClient_1 = __webpack_require__(173);
var ILogger_1 = __webpack_require__(63);
var Loggers_1 = __webpack_require__(88);
var HttpConnection = /** @class */ (function () {
    function HttpConnection(url, options) {
        if (options === void 0) { options = {}; }
        this.features = {};
        this.logger = Loggers_1.LoggerFactory.createLogger(options.logging);
        this.baseUrl = this.resolveUrl(url);
        options = options || {};
        this.httpClient = options.httpClient || new HttpClient_1.HttpClient();
        this.connectionState = 2 /* Disconnected */;
        this.options = options;
    }
    HttpConnection.prototype.start = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                if (this.connectionState !== 2 /* Disconnected */) {
                    return [2 /*return*/, Promise.reject(new Error("Cannot start a connection that is not in the 'Disconnected' state."))];
                }
                this.connectionState = 0 /* Connecting */;
                this.startPromise = this.startInternal();
                return [2 /*return*/, this.startPromise];
            });
        });
    };
    HttpConnection.prototype.startInternal = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            var headers, negotiatePayload, negotiateResponse, requestedTransferMode, _a, e_1;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _b.trys.push([0, 6, , 7]);
                        if (!(this.options.transport === Transports_1.TransportType.WebSockets)) return [3 /*break*/, 1];
                        // No need to add a connection ID in this case
                        this.url = this.baseUrl;
                        this.transport = this.createTransport(this.options.transport, [Transports_1.TransportType[Transports_1.TransportType.WebSockets]]);
                        return [3 /*break*/, 4];
                    case 1:
                        headers = new Headers();
                        if (this.options.jwtBearer) {
                            headers.append("Authorization", "" + this.options.jwtBearer());
                        }
                        return [4 /*yield*/, fetch(this.baseUrl, {
                                method: 'OPTIONS',
                                headers: headers
                            })];
                    case 2:
                        negotiatePayload = _b.sent();
                        return [4 /*yield*/, negotiatePayload.json()];
                    case 3:
                        negotiateResponse = _b.sent();
                        this.connectionId = negotiateResponse.connectionId;
                        // the user tries to stop the the connection when it is being started
                        if (this.connectionState == 2 /* Disconnected */) {
                            return [2 /*return*/];
                        }
                        if (this.connectionId) {
                            this.url = this.baseUrl + (this.baseUrl.indexOf("?") === -1 ? "?" : "&") + ("id=" + this.connectionId);
                            this.transport = this.createTransport(this.options.transport, negotiateResponse.availableTransports);
                        }
                        _b.label = 4;
                    case 4:
                        this.transport.onreceive = this.onreceive;
                        this.transport.onclose = function (e) { return _this.stopConnection(true, e); };
                        requestedTransferMode = this.features.transferMode === 2 /* Binary */
                            ? 2 /* Binary */
                            : 1 /* Text */;
                        _a = this.features;
                        return [4 /*yield*/, this.transport.connect(this.url, requestedTransferMode, this)];
                    case 5:
                        _a.transferMode = _b.sent();
                        // only change the state if we were connecting to not overwrite
                        // the state if the connection is already marked as Disconnected
                        this.changeState(0 /* Connecting */, 1 /* Connected */);
                        return [3 /*break*/, 7];
                    case 6:
                        e_1 = _b.sent();
                        this.logger.log(ILogger_1.LogLevel.Error, "Failed to start the connection. " + e_1);
                        this.connectionState = 2 /* Disconnected */;
                        this.transport = null;
                        throw e_1;
                    case 7:
                        ;
                        return [2 /*return*/];
                }
            });
        });
    };
    HttpConnection.prototype.createTransport = function (transport, availableTransports) {
        if ((transport === null || transport === undefined) && availableTransports.length > 0) {
            transport = Transports_1.TransportType[availableTransports[0]];
        }
        if (transport === Transports_1.TransportType.WebSockets && availableTransports.indexOf(Transports_1.TransportType[transport]) >= 0) {
            return new Transports_1.WebSocketTransport(this.options.jwtBearer, this.logger);
        }
        if (transport === Transports_1.TransportType.ServerSentEvents && availableTransports.indexOf(Transports_1.TransportType[transport]) >= 0) {
            return new Transports_1.ServerSentEventsTransport(this.httpClient, this.options.jwtBearer, this.logger);
        }
        if (transport === Transports_1.TransportType.LongPolling && availableTransports.indexOf(Transports_1.TransportType[transport]) >= 0) {
            return new Transports_1.LongPollingTransport(this.httpClient, this.options.jwtBearer, this.logger);
        }
        if (this.isITransport(transport)) {
            return transport;
        }
        throw new Error("No available transports found.");
    };
    HttpConnection.prototype.isITransport = function (transport) {
        return typeof (transport) === "object" && "connect" in transport;
    };
    HttpConnection.prototype.changeState = function (from, to) {
        if (this.connectionState == from) {
            this.connectionState = to;
            return true;
        }
        return false;
    };
    HttpConnection.prototype.send = function (data) {
        if (this.connectionState != 1 /* Connected */) {
            throw new Error("Cannot send data if the connection is not in the 'Connected' State");
        }
        return this.transport.send(data);
    };
    HttpConnection.prototype.stop = function (error) {
        return __awaiter(this, void 0, void 0, function () {
            var previousState, e_2;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        previousState = this.connectionState;
                        this.connectionState = 2 /* Disconnected */;
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, this.startPromise];
                    case 2:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        e_2 = _a.sent();
                        return [3 /*break*/, 4];
                    case 4:
                        this.stopConnection(/*raiseClosed*/ previousState == 1 /* Connected */, error);
                        return [2 /*return*/];
                }
            });
        });
    };
    HttpConnection.prototype.stopConnection = function (raiseClosed, error) {
        if (this.transport) {
            this.transport.stop();
            this.transport = null;
        }
        this.connectionState = 2 /* Disconnected */;
        if (raiseClosed && this.onclose) {
            this.onclose(error);
        }
    };
    HttpConnection.prototype.resolveUrl = function (url) {
        // startsWith is not supported in IE
        if (url.lastIndexOf("https://", 0) === 0 || url.lastIndexOf("http://", 0) === 0) {
            return url;
        }
        if (typeof window === 'undefined' || !window || !window.document) {
            throw new Error("Cannot resolve '" + url + "'.");
        }
        var parser = window.document.createElement("a");
        parser.href = url;
        var baseUrl = (!parser.protocol || parser.protocol === ":")
            ? window.document.location.protocol + "//" + (parser.host || window.document.location.host)
            : parser.protocol + "//" + parser.host;
        if (!url || url[0] != '/') {
            url = '/' + url;
        }
        var normalizedUrl = baseUrl + url;
        this.logger.log(ILogger_1.LogLevel.Information, "Normalizing '" + url + "' to '" + normalizedUrl + "'");
        return normalizedUrl;
    };
    HttpConnection.prototype.resolveNegotiateUrl = function (url) {
        var index = url.indexOf("?");
        var negotiateUrl = url.substring(0, index === -1 ? url.length : index);
        if (negotiateUrl[negotiateUrl.length - 1] !== "/") {
            negotiateUrl += "/";
        }
        negotiateUrl += index === -1 ? "" : url.substring(index);
        return negotiateUrl;
    };
    return HttpConnection;
}());
exports.HttpConnection = HttpConnection;


/***/ }),
/* 119 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) .NET Foundation. All rights reserved.
// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var HttpError_1 = __webpack_require__(172);
var ILogger_1 = __webpack_require__(63);
var TransportType;
(function (TransportType) {
    TransportType[TransportType["WebSockets"] = 0] = "WebSockets";
    TransportType[TransportType["ServerSentEvents"] = 1] = "ServerSentEvents";
    TransportType[TransportType["LongPolling"] = 2] = "LongPolling";
})(TransportType = exports.TransportType || (exports.TransportType = {}));
var WebSocketTransport = /** @class */ (function () {
    function WebSocketTransport(jwtBearer, logger) {
        this.logger = logger;
        this.jwtBearer = jwtBearer;
    }
    WebSocketTransport.prototype.connect = function (url, requestedTransferMode, connection) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            url = url.replace(/^http/, "ws");
            if (_this.jwtBearer) {
                var token = _this.jwtBearer();
                url += (url.indexOf("?") < 0 ? "?" : "&") + ("Authorization=" + token);
            }
            var webSocket = new WebSocket(url);
            if (requestedTransferMode == 2 /* Binary */) {
                webSocket.binaryType = "arraybuffer";
            }
            webSocket.onopen = function (event) {
                _this.logger.log(ILogger_1.LogLevel.Information, "WebSocket connected to " + url);
                _this.webSocket = webSocket;
                resolve(requestedTransferMode);
            };
            webSocket.onerror = function (event) {
                reject();
            };
            webSocket.onmessage = function (message) {
                _this.logger.log(ILogger_1.LogLevel.Trace, "(WebSockets transport) data received: " + message.data);
                if (_this.onreceive) {
                    _this.onreceive(message.data);
                }
            };
            webSocket.onclose = function (event) {
                // webSocket will be null if the transport did not start successfully
                if (_this.onclose && _this.webSocket) {
                    if (event.wasClean === false || event.code !== 1000) {
                        _this.onclose(new Error("Websocket closed with status code: " + event.code + " (" + event.reason + ")"));
                    }
                    else {
                        _this.onclose();
                    }
                }
            };
        });
    };
    WebSocketTransport.prototype.send = function (data) {
        if (this.webSocket && this.webSocket.readyState === WebSocket.OPEN) {
            this.webSocket.send(data);
            return Promise.resolve();
        }
        return Promise.reject("WebSocket is not in the OPEN state");
    };
    WebSocketTransport.prototype.stop = function () {
        if (this.webSocket) {
            this.webSocket.close();
            this.webSocket = null;
        }
    };
    return WebSocketTransport;
}());
exports.WebSocketTransport = WebSocketTransport;
var ServerSentEventsTransport = /** @class */ (function () {
    function ServerSentEventsTransport(httpClient, jwtBearer, logger) {
        this.httpClient = httpClient;
        this.jwtBearer = jwtBearer;
        this.logger = logger;
    }
    ServerSentEventsTransport.prototype.connect = function (url, requestedTransferMode, connection) {
        var _this = this;
        if (typeof (EventSource) === "undefined") {
            Promise.reject("EventSource not supported by the browser.");
        }
        this.url = url;
        return new Promise(function (resolve, reject) {
            if (_this.jwtBearer) {
                var token = _this.jwtBearer();
                url += (url.indexOf("?") < 0 ? "?" : "&") + ("Authorization=" + token);
            }
            var eventSource = new EventSource(url);
            try {
                eventSource.onmessage = function (e) {
                    if (_this.onreceive) {
                        try {
                            _this.logger.log(ILogger_1.LogLevel.Trace, "(SSE transport) data received: " + e.data);
                            _this.onreceive(e.data);
                        }
                        catch (error) {
                            if (_this.onclose) {
                                _this.onclose(error);
                            }
                            return;
                        }
                    }
                };
                eventSource.onerror = function (e) {
                    reject();
                    // don't report an error if the transport did not start successfully
                    if (_this.eventSource && _this.onclose) {
                        _this.onclose(new Error(e.message || "Error occurred"));
                    }
                };
                eventSource.onopen = function () {
                    _this.logger.log(ILogger_1.LogLevel.Information, "SSE connected to " + _this.url);
                    _this.eventSource = eventSource;
                    // SSE is a text protocol
                    resolve(1 /* Text */);
                };
            }
            catch (e) {
                return Promise.reject(e);
            }
        });
    };
    ServerSentEventsTransport.prototype.send = function (data) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                return [2 /*return*/, send(this.httpClient, this.url, this.jwtBearer, data)];
            });
        });
    };
    ServerSentEventsTransport.prototype.stop = function () {
        if (this.eventSource) {
            this.eventSource.close();
            this.eventSource = null;
        }
    };
    return ServerSentEventsTransport;
}());
exports.ServerSentEventsTransport = ServerSentEventsTransport;
var LongPollingTransport = /** @class */ (function () {
    function LongPollingTransport(httpClient, jwtBearer, logger) {
        this.httpClient = httpClient;
        this.jwtBearer = jwtBearer;
        this.logger = logger;
    }
    LongPollingTransport.prototype.connect = function (url, requestedTransferMode, connection) {
        this.url = url;
        this.shouldPoll = true;
        // Set a flag indicating we have inherent keep-alive in this transport.
        connection.features.inherentKeepAlive = true;
        if (requestedTransferMode === 2 /* Binary */ && (typeof new XMLHttpRequest().responseType !== "string")) {
            // This will work if we fix: https://github.com/aspnet/SignalR/issues/742
            throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");
        }
        this.poll(this.url, requestedTransferMode);
        return Promise.resolve(requestedTransferMode);
    };
    LongPollingTransport.prototype.poll = function (url, transferMode) {
        var _this = this;
        if (!this.shouldPoll) {
            return;
        }
        var pollXhr = new XMLHttpRequest();
        pollXhr.onload = function () {
            if (pollXhr.status == 200) {
                if (_this.onreceive) {
                    try {
                        var response = transferMode === 1 /* Text */
                            ? pollXhr.responseText
                            : pollXhr.response;
                        if (response) {
                            _this.logger.log(ILogger_1.LogLevel.Trace, "(LongPolling transport) data received: " + response);
                            _this.onreceive(response);
                        }
                        else {
                            _this.logger.log(ILogger_1.LogLevel.Information, "(LongPolling transport) timed out");
                        }
                    }
                    catch (error) {
                        if (_this.onclose) {
                            _this.onclose(error);
                        }
                        return;
                    }
                }
                _this.poll(url, transferMode);
            }
            else if (_this.pollXhr.status == 204) {
                if (_this.onclose) {
                    _this.onclose();
                }
            }
            else {
                if (_this.onclose) {
                    _this.onclose(new HttpError_1.HttpError(pollXhr.statusText, pollXhr.status));
                }
            }
        };
        pollXhr.onerror = function () {
            if (_this.onclose) {
                // network related error or denied cross domain request
                _this.onclose(new Error("Sending HTTP request failed."));
            }
        };
        pollXhr.ontimeout = function () {
            _this.poll(url, transferMode);
        };
        this.pollXhr = pollXhr;
        this.pollXhr.open("GET", url + "&_=" + Date.now(), true);
        if (this.jwtBearer) {
            this.pollXhr.setRequestHeader("Authorization", "Bearer " + this.jwtBearer());
        }
        if (transferMode === 2 /* Binary */) {
            this.pollXhr.responseType = "arraybuffer";
        }
        // TODO: consider making timeout configurable
        this.pollXhr.timeout = 120000;
        this.pollXhr.send();
    };
    LongPollingTransport.prototype.send = function (data) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                return [2 /*return*/, send(this.httpClient, this.url, this.jwtBearer, data)];
            });
        });
    };
    LongPollingTransport.prototype.stop = function () {
        this.shouldPoll = false;
        if (this.pollXhr) {
            this.pollXhr.abort();
            this.pollXhr = null;
        }
    };
    return LongPollingTransport;
}());
exports.LongPollingTransport = LongPollingTransport;
function send(httpClient, url, jwtBearer, data) {
    return __awaiter(this, void 0, void 0, function () {
        var headers;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    if (jwtBearer) {
                        headers = new Map();
                        headers.set("Authorization", jwtBearer());
                    }
                    return [4 /*yield*/, httpClient.post(url, data, headers)];
                case 1:
                    _a.sent();
                    return [2 /*return*/];
            }
        });
    });
}


/***/ }),
/* 120 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) .NET Foundation. All rights reserved.
// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
Object.defineProperty(exports, "__esModule", { value: true });
var TextMessageFormat;
(function (TextMessageFormat) {
    var RecordSeparator = String.fromCharCode(0x1e);
    function write(output) {
        return "" + output + RecordSeparator;
    }
    TextMessageFormat.write = write;
    function parse(input) {
        if (input[input.length - 1] != RecordSeparator) {
            throw new Error("Message is incomplete.");
        }
        var messages = input.split(RecordSeparator);
        messages.pop();
        return messages;
    }
    TextMessageFormat.parse = parse;
})(TextMessageFormat = exports.TextMessageFormat || (exports.TextMessageFormat = {}));
var BinaryMessageFormat;
(function (BinaryMessageFormat) {
    // The length prefix of binary messages is encoded as VarInt. Read the comment in
    // the BinaryMessageParser.TryParseMessage for details.
    function write(output) {
        // msgpack5 uses returns Buffer instead of Uint8Array on IE10 and some other browser
        //  in which case .byteLength does will be undefined
        var size = output.byteLength || output.length;
        var lenBuffer = [];
        do {
            var sizePart = size & 0x7f;
            size = size >> 7;
            if (size > 0) {
                sizePart |= 0x80;
            }
            lenBuffer.push(sizePart);
        } while (size > 0);
        // msgpack5 uses returns Buffer instead of Uint8Array on IE10 and some other browser
        //  in which case .byteLength does will be undefined
        size = output.byteLength || output.length;
        var buffer = new Uint8Array(lenBuffer.length + size);
        buffer.set(lenBuffer, 0);
        buffer.set(output, lenBuffer.length);
        return buffer.buffer;
    }
    BinaryMessageFormat.write = write;
    function parse(input) {
        var result = [];
        var uint8Array = new Uint8Array(input);
        var maxLengthPrefixSize = 5;
        var numBitsToShift = [0, 7, 14, 21, 28];
        for (var offset = 0; offset < input.byteLength;) {
            var numBytes = 0;
            var size = 0;
            var byteRead = void 0;
            do {
                byteRead = uint8Array[offset + numBytes];
                size = size | ((byteRead & 0x7f) << (numBitsToShift[numBytes]));
                numBytes++;
            } while (numBytes < Math.min(maxLengthPrefixSize, input.byteLength - offset) && (byteRead & 0x80) != 0);
            if ((byteRead & 0x80) !== 0 && numBytes < maxLengthPrefixSize) {
                throw new Error("Cannot read message size.");
            }
            if (numBytes === maxLengthPrefixSize && byteRead > 7) {
                throw new Error("Messages bigger than 2GB are not supported.");
            }
            if (uint8Array.byteLength >= (offset + numBytes + size)) {
                // IE does not support .slice() so use subarray
                result.push(uint8Array.slice
                    ? uint8Array.slice(offset + numBytes, offset + numBytes + size)
                    : uint8Array.subarray(offset + numBytes, offset + numBytes + size));
            }
            else {
                throw new Error("Incomplete message.");
            }
            offset = offset + numBytes + size;
        }
        return result;
    }
    BinaryMessageFormat.parse = parse;
})(BinaryMessageFormat = exports.BinaryMessageFormat || (exports.BinaryMessageFormat = {}));


/***/ }),
/* 121 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global, process) {// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

var formatRegExp = /%[sdj%]/g;
exports.format = function(f) {
  if (!isString(f)) {
    var objects = [];
    for (var i = 0; i < arguments.length; i++) {
      objects.push(inspect(arguments[i]));
    }
    return objects.join(' ');
  }

  var i = 1;
  var args = arguments;
  var len = args.length;
  var str = String(f).replace(formatRegExp, function(x) {
    if (x === '%%') return '%';
    if (i >= len) return x;
    switch (x) {
      case '%s': return String(args[i++]);
      case '%d': return Number(args[i++]);
      case '%j':
        try {
          return JSON.stringify(args[i++]);
        } catch (_) {
          return '[Circular]';
        }
      default:
        return x;
    }
  });
  for (var x = args[i]; i < len; x = args[++i]) {
    if (isNull(x) || !isObject(x)) {
      str += ' ' + x;
    } else {
      str += ' ' + inspect(x);
    }
  }
  return str;
};


// Mark that a method should not be used.
// Returns a modified function which warns once by default.
// If --no-deprecation is set, then it is a no-op.
exports.deprecate = function(fn, msg) {
  // Allow for deprecating things in the process of starting up.
  if (isUndefined(global.process)) {
    return function() {
      return exports.deprecate(fn, msg).apply(this, arguments);
    };
  }

  if (process.noDeprecation === true) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (process.throwDeprecation) {
        throw new Error(msg);
      } else if (process.traceDeprecation) {
        console.trace(msg);
      } else {
        console.error(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
};


var debugs = {};
var debugEnviron;
exports.debuglog = function(set) {
  if (isUndefined(debugEnviron))
    debugEnviron = process.env.NODE_DEBUG || '';
  set = set.toUpperCase();
  if (!debugs[set]) {
    if (new RegExp('\\b' + set + '\\b', 'i').test(debugEnviron)) {
      var pid = process.pid;
      debugs[set] = function() {
        var msg = exports.format.apply(exports, arguments);
        console.error('%s %d: %s', set, pid, msg);
      };
    } else {
      debugs[set] = function() {};
    }
  }
  return debugs[set];
};


/**
 * Echos the value of a value. Trys to print the value out
 * in the best way possible given the different types.
 *
 * @param {Object} obj The object to print out.
 * @param {Object} opts Optional options object that alters the output.
 */
/* legacy: obj, showHidden, depth, colors*/
function inspect(obj, opts) {
  // default options
  var ctx = {
    seen: [],
    stylize: stylizeNoColor
  };
  // legacy...
  if (arguments.length >= 3) ctx.depth = arguments[2];
  if (arguments.length >= 4) ctx.colors = arguments[3];
  if (isBoolean(opts)) {
    // legacy...
    ctx.showHidden = opts;
  } else if (opts) {
    // got an "options" object
    exports._extend(ctx, opts);
  }
  // set default options
  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;
  if (isUndefined(ctx.depth)) ctx.depth = 2;
  if (isUndefined(ctx.colors)) ctx.colors = false;
  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;
  if (ctx.colors) ctx.stylize = stylizeWithColor;
  return formatValue(ctx, obj, ctx.depth);
}
exports.inspect = inspect;


// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics
inspect.colors = {
  'bold' : [1, 22],
  'italic' : [3, 23],
  'underline' : [4, 24],
  'inverse' : [7, 27],
  'white' : [37, 39],
  'grey' : [90, 39],
  'black' : [30, 39],
  'blue' : [34, 39],
  'cyan' : [36, 39],
  'green' : [32, 39],
  'magenta' : [35, 39],
  'red' : [31, 39],
  'yellow' : [33, 39]
};

// Don't use 'blue' not visible on cmd.exe
inspect.styles = {
  'special': 'cyan',
  'number': 'yellow',
  'boolean': 'yellow',
  'undefined': 'grey',
  'null': 'bold',
  'string': 'green',
  'date': 'magenta',
  // "name": intentionally not styling
  'regexp': 'red'
};


function stylizeWithColor(str, styleType) {
  var style = inspect.styles[styleType];

  if (style) {
    return '\u001b[' + inspect.colors[style][0] + 'm' + str +
           '\u001b[' + inspect.colors[style][1] + 'm';
  } else {
    return str;
  }
}


function stylizeNoColor(str, styleType) {
  return str;
}


function arrayToHash(array) {
  var hash = {};

  array.forEach(function(val, idx) {
    hash[val] = true;
  });

  return hash;
}


function formatValue(ctx, value, recurseTimes) {
  // Provide a hook for user-specified inspect functions.
  // Check that value is an object with an inspect function on it
  if (ctx.customInspect &&
      value &&
      isFunction(value.inspect) &&
      // Filter out the util module, it's inspect function is special
      value.inspect !== exports.inspect &&
      // Also filter out any prototype objects using the circular check.
      !(value.constructor && value.constructor.prototype === value)) {
    var ret = value.inspect(recurseTimes, ctx);
    if (!isString(ret)) {
      ret = formatValue(ctx, ret, recurseTimes);
    }
    return ret;
  }

  // Primitive types cannot have properties
  var primitive = formatPrimitive(ctx, value);
  if (primitive) {
    return primitive;
  }

  // Look up the keys of the object.
  var keys = Object.keys(value);
  var visibleKeys = arrayToHash(keys);

  if (ctx.showHidden) {
    keys = Object.getOwnPropertyNames(value);
  }

  // IE doesn't make error fields non-enumerable
  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx
  if (isError(value)
      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {
    return formatError(value);
  }

  // Some type of object without properties can be shortcutted.
  if (keys.length === 0) {
    if (isFunction(value)) {
      var name = value.name ? ': ' + value.name : '';
      return ctx.stylize('[Function' + name + ']', 'special');
    }
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    }
    if (isDate(value)) {
      return ctx.stylize(Date.prototype.toString.call(value), 'date');
    }
    if (isError(value)) {
      return formatError(value);
    }
  }

  var base = '', array = false, braces = ['{', '}'];

  // Make Array say that they are Array
  if (isArray(value)) {
    array = true;
    braces = ['[', ']'];
  }

  // Make functions say that they are functions
  if (isFunction(value)) {
    var n = value.name ? ': ' + value.name : '';
    base = ' [Function' + n + ']';
  }

  // Make RegExps say that they are RegExps
  if (isRegExp(value)) {
    base = ' ' + RegExp.prototype.toString.call(value);
  }

  // Make dates with properties first say the date
  if (isDate(value)) {
    base = ' ' + Date.prototype.toUTCString.call(value);
  }

  // Make error with message first say the error
  if (isError(value)) {
    base = ' ' + formatError(value);
  }

  if (keys.length === 0 && (!array || value.length == 0)) {
    return braces[0] + base + braces[1];
  }

  if (recurseTimes < 0) {
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    } else {
      return ctx.stylize('[Object]', 'special');
    }
  }

  ctx.seen.push(value);

  var output;
  if (array) {
    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);
  } else {
    output = keys.map(function(key) {
      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);
    });
  }

  ctx.seen.pop();

  return reduceToSingleString(output, base, braces);
}


function formatPrimitive(ctx, value) {
  if (isUndefined(value))
    return ctx.stylize('undefined', 'undefined');
  if (isString(value)) {
    var simple = '\'' + JSON.stringify(value).replace(/^"|"$/g, '')
                                             .replace(/'/g, "\\'")
                                             .replace(/\\"/g, '"') + '\'';
    return ctx.stylize(simple, 'string');
  }
  if (isNumber(value))
    return ctx.stylize('' + value, 'number');
  if (isBoolean(value))
    return ctx.stylize('' + value, 'boolean');
  // For some reason typeof null is "object", so special case here.
  if (isNull(value))
    return ctx.stylize('null', 'null');
}


function formatError(value) {
  return '[' + Error.prototype.toString.call(value) + ']';
}


function formatArray(ctx, value, recurseTimes, visibleKeys, keys) {
  var output = [];
  for (var i = 0, l = value.length; i < l; ++i) {
    if (hasOwnProperty(value, String(i))) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          String(i), true));
    } else {
      output.push('');
    }
  }
  keys.forEach(function(key) {
    if (!key.match(/^\d+$/)) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          key, true));
    }
  });
  return output;
}


function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {
  var name, str, desc;
  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };
  if (desc.get) {
    if (desc.set) {
      str = ctx.stylize('[Getter/Setter]', 'special');
    } else {
      str = ctx.stylize('[Getter]', 'special');
    }
  } else {
    if (desc.set) {
      str = ctx.stylize('[Setter]', 'special');
    }
  }
  if (!hasOwnProperty(visibleKeys, key)) {
    name = '[' + key + ']';
  }
  if (!str) {
    if (ctx.seen.indexOf(desc.value) < 0) {
      if (isNull(recurseTimes)) {
        str = formatValue(ctx, desc.value, null);
      } else {
        str = formatValue(ctx, desc.value, recurseTimes - 1);
      }
      if (str.indexOf('\n') > -1) {
        if (array) {
          str = str.split('\n').map(function(line) {
            return '  ' + line;
          }).join('\n').substr(2);
        } else {
          str = '\n' + str.split('\n').map(function(line) {
            return '   ' + line;
          }).join('\n');
        }
      }
    } else {
      str = ctx.stylize('[Circular]', 'special');
    }
  }
  if (isUndefined(name)) {
    if (array && key.match(/^\d+$/)) {
      return str;
    }
    name = JSON.stringify('' + key);
    if (name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)) {
      name = name.substr(1, name.length - 2);
      name = ctx.stylize(name, 'name');
    } else {
      name = name.replace(/'/g, "\\'")
                 .replace(/\\"/g, '"')
                 .replace(/(^"|"$)/g, "'");
      name = ctx.stylize(name, 'string');
    }
  }

  return name + ': ' + str;
}


function reduceToSingleString(output, base, braces) {
  var numLinesEst = 0;
  var length = output.reduce(function(prev, cur) {
    numLinesEst++;
    if (cur.indexOf('\n') >= 0) numLinesEst++;
    return prev + cur.replace(/\u001b\[\d\d?m/g, '').length + 1;
  }, 0);

  if (length > 60) {
    return braces[0] +
           (base === '' ? '' : base + '\n ') +
           ' ' +
           output.join(',\n  ') +
           ' ' +
           braces[1];
  }

  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];
}


// NOTE: These type checking functions intentionally don't use `instanceof`
// because it is fragile and can be easily faked with `Object.create()`.
function isArray(ar) {
  return Array.isArray(ar);
}
exports.isArray = isArray;

function isBoolean(arg) {
  return typeof arg === 'boolean';
}
exports.isBoolean = isBoolean;

function isNull(arg) {
  return arg === null;
}
exports.isNull = isNull;

function isNullOrUndefined(arg) {
  return arg == null;
}
exports.isNullOrUndefined = isNullOrUndefined;

function isNumber(arg) {
  return typeof arg === 'number';
}
exports.isNumber = isNumber;

function isString(arg) {
  return typeof arg === 'string';
}
exports.isString = isString;

function isSymbol(arg) {
  return typeof arg === 'symbol';
}
exports.isSymbol = isSymbol;

function isUndefined(arg) {
  return arg === void 0;
}
exports.isUndefined = isUndefined;

function isRegExp(re) {
  return isObject(re) && objectToString(re) === '[object RegExp]';
}
exports.isRegExp = isRegExp;

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}
exports.isObject = isObject;

function isDate(d) {
  return isObject(d) && objectToString(d) === '[object Date]';
}
exports.isDate = isDate;

function isError(e) {
  return isObject(e) &&
      (objectToString(e) === '[object Error]' || e instanceof Error);
}
exports.isError = isError;

function isFunction(arg) {
  return typeof arg === 'function';
}
exports.isFunction = isFunction;

function isPrimitive(arg) {
  return arg === null ||
         typeof arg === 'boolean' ||
         typeof arg === 'number' ||
         typeof arg === 'string' ||
         typeof arg === 'symbol' ||  // ES6 symbol
         typeof arg === 'undefined';
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = __webpack_require__(474);

function objectToString(o) {
  return Object.prototype.toString.call(o);
}


function pad(n) {
  return n < 10 ? '0' + n.toString(10) : n.toString(10);
}


var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',
              'Oct', 'Nov', 'Dec'];

// 26 Feb 16:19:34
function timestamp() {
  var d = new Date();
  var time = [pad(d.getHours()),
              pad(d.getMinutes()),
              pad(d.getSeconds())].join(':');
  return [d.getDate(), months[d.getMonth()], time].join(' ');
}


// log is just a thin wrapper to console.log that prepends a timestamp
exports.log = function() {
  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));
};


/**
 * Inherit the prototype methods from one constructor into another.
 *
 * The Function.prototype.inherits from lang.js rewritten as a standalone
 * function (not on Function.prototype). NOTE: If this file is to be loaded
 * during bootstrapping this function needs to be rewritten using some native
 * functions as prototype setup using normal JavaScript does not work as
 * expected during bootstrapping (see mirror.js in r114903).
 *
 * @param {function} ctor Constructor function which needs to inherit the
 *     prototype.
 * @param {function} superCtor Constructor function to inherit prototype from.
 */
exports.inherits = __webpack_require__(475);

exports._extend = function(origin, add) {
  // Don't do anything if add isn't an object
  if (!add || !isObject(add)) return origin;

  var keys = Object.keys(add);
  var i = keys.length;
  while (i--) {
    origin[keys[i]] = add[keys[i]];
  }
  return origin;
};

function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(40), __webpack_require__(66)))

/***/ }),
/* 122 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = !__webpack_require__(10) && !__webpack_require__(6)(function () {
  return Object.defineProperty(__webpack_require__(91)('div'), 'a', { get: function () { return 7; } }).a != 7;
});


/***/ }),
/* 123 */
/***/ (function(module, exports, __webpack_require__) {

exports.f = __webpack_require__(9);


/***/ }),
/* 124 */
/***/ (function(module, exports, __webpack_require__) {

var has = __webpack_require__(16);
var toIObject = __webpack_require__(20);
var arrayIndexOf = __webpack_require__(69)(false);
var IE_PROTO = __webpack_require__(93)('IE_PROTO');

module.exports = function (object, names) {
  var O = toIObject(object);
  var i = 0;
  var result = [];
  var key;
  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);
  // Don't enum bug & hidden keys
  while (names.length > i) if (has(O, key = names[i++])) {
    ~arrayIndexOf(result, key) || result.push(key);
  }
  return result;
};


/***/ }),
/* 125 */
/***/ (function(module, exports, __webpack_require__) {

var dP = __webpack_require__(11);
var anObject = __webpack_require__(3);
var getKeys = __webpack_require__(44);

module.exports = __webpack_require__(10) ? Object.defineProperties : function defineProperties(O, Properties) {
  anObject(O);
  var keys = getKeys(Properties);
  var length = keys.length;
  var i = 0;
  var P;
  while (length > i) dP.f(O, P = keys[i++], Properties[P]);
  return O;
};


/***/ }),
/* 126 */
/***/ (function(module, exports, __webpack_require__) {

// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window
var toIObject = __webpack_require__(20);
var gOPN = __webpack_require__(47).f;
var toString = {}.toString;

var windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames
  ? Object.getOwnPropertyNames(window) : [];

var getWindowNames = function (it) {
  try {
    return gOPN(it);
  } catch (e) {
    return windowNames.slice();
  }
};

module.exports.f = function getOwnPropertyNames(it) {
  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));
};


/***/ }),
/* 127 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 19.1.2.1 Object.assign(target, source, ...)
var getKeys = __webpack_require__(44);
var gOPS = __webpack_require__(70);
var pIE = __webpack_require__(60);
var toObject = __webpack_require__(13);
var IObject = __webpack_require__(59);
var $assign = Object.assign;

// should work with symbols and should have deterministic property order (V8 bug)
module.exports = !$assign || __webpack_require__(6)(function () {
  var A = {};
  var B = {};
  // eslint-disable-next-line no-undef
  var S = Symbol();
  var K = 'abcdefghijklmnopqrst';
  A[S] = 7;
  K.split('').forEach(function (k) { B[k] = k; });
  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;
}) ? function assign(target, source) { // eslint-disable-line no-unused-vars
  var T = toObject(target);
  var aLen = arguments.length;
  var index = 1;
  var getSymbols = gOPS.f;
  var isEnum = pIE.f;
  while (aLen > index) {
    var S = IObject(arguments[index++]);
    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);
    var length = keys.length;
    var j = 0;
    var key;
    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];
  } return T;
} : $assign;


/***/ }),
/* 128 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var aFunction = __webpack_require__(14);
var isObject = __webpack_require__(7);
var invoke = __webpack_require__(129);
var arraySlice = [].slice;
var factories = {};

var construct = function (F, len, args) {
  if (!(len in factories)) {
    for (var n = [], i = 0; i < len; i++) n[i] = 'a[' + i + ']';
    // eslint-disable-next-line no-new-func
    factories[len] = Function('F,a', 'return new F(' + n.join(',') + ')');
  } return factories[len](F, args);
};

module.exports = Function.bind || function bind(that /* , ...args */) {
  var fn = aFunction(this);
  var partArgs = arraySlice.call(arguments, 1);
  var bound = function (/* args... */) {
    var args = partArgs.concat(arraySlice.call(arguments));
    return this instanceof bound ? construct(fn, args.length, args) : invoke(fn, args, that);
  };
  if (isObject(fn.prototype)) bound.prototype = fn.prototype;
  return bound;
};


/***/ }),
/* 129 */
/***/ (function(module, exports) {

// fast apply, http://jsperf.lnkit.com/fast-apply/5
module.exports = function (fn, args, that) {
  var un = that === undefined;
  switch (args.length) {
    case 0: return un ? fn()
                      : fn.call(that);
    case 1: return un ? fn(args[0])
                      : fn.call(that, args[0]);
    case 2: return un ? fn(args[0], args[1])
                      : fn.call(that, args[0], args[1]);
    case 3: return un ? fn(args[0], args[1], args[2])
                      : fn.call(that, args[0], args[1], args[2]);
    case 4: return un ? fn(args[0], args[1], args[2], args[3])
                      : fn.call(that, args[0], args[1], args[2], args[3]);
  } return fn.apply(that, args);
};


/***/ }),
/* 130 */
/***/ (function(module, exports, __webpack_require__) {

var $parseInt = __webpack_require__(5).parseInt;
var $trim = __webpack_require__(54).trim;
var ws = __webpack_require__(97);
var hex = /^[-+]?0[xX]/;

module.exports = $parseInt(ws + '08') !== 8 || $parseInt(ws + '0x16') !== 22 ? function parseInt(str, radix) {
  var string = $trim(String(str), 3);
  return $parseInt(string, (radix >>> 0) || (hex.test(string) ? 16 : 10));
} : $parseInt;


/***/ }),
/* 131 */
/***/ (function(module, exports, __webpack_require__) {

var $parseFloat = __webpack_require__(5).parseFloat;
var $trim = __webpack_require__(54).trim;

module.exports = 1 / $parseFloat(__webpack_require__(97) + '-0') !== -Infinity ? function parseFloat(str) {
  var string = $trim(String(str), 3);
  var result = $parseFloat(string);
  return result === 0 && string.charAt(0) == '-' ? -0 : result;
} : $parseFloat;


/***/ }),
/* 132 */
/***/ (function(module, exports, __webpack_require__) {

var cof = __webpack_require__(24);
module.exports = function (it, msg) {
  if (typeof it != 'number' && cof(it) != 'Number') throw TypeError(msg);
  return +it;
};


/***/ }),
/* 133 */
/***/ (function(module, exports, __webpack_require__) {

// 20.1.2.3 Number.isInteger(number)
var isObject = __webpack_require__(7);
var floor = Math.floor;
module.exports = function isInteger(it) {
  return !isObject(it) && isFinite(it) && floor(it) === it;
};


/***/ }),
/* 134 */
/***/ (function(module, exports) {

// 20.2.2.20 Math.log1p(x)
module.exports = Math.log1p || function log1p(x) {
  return (x = +x) > -1e-8 && x < 1e-8 ? x - x * x / 2 : Math.log(1 + x);
};


/***/ }),
/* 135 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.16 Math.fround(x)
var sign = __webpack_require__(100);
var pow = Math.pow;
var EPSILON = pow(2, -52);
var EPSILON32 = pow(2, -23);
var MAX32 = pow(2, 127) * (2 - EPSILON32);
var MIN32 = pow(2, -126);

var roundTiesToEven = function (n) {
  return n + 1 / EPSILON - 1 / EPSILON;
};

module.exports = Math.fround || function fround(x) {
  var $abs = Math.abs(x);
  var $sign = sign(x);
  var a, result;
  if ($abs < MIN32) return $sign * roundTiesToEven($abs / MIN32 / EPSILON32) * MIN32 * EPSILON32;
  a = (1 + EPSILON32 / EPSILON) * $abs;
  result = a - (a - $abs);
  // eslint-disable-next-line no-self-compare
  if (result > MAX32 || result != result) return $sign * Infinity;
  return $sign * result;
};


/***/ }),
/* 136 */
/***/ (function(module, exports, __webpack_require__) {

// call something on iterator step with safe closing on error
var anObject = __webpack_require__(3);
module.exports = function (iterator, fn, value, entries) {
  try {
    return entries ? fn(anObject(value)[0], value[1]) : fn(value);
  // 7.4.6 IteratorClose(iterator, completion)
  } catch (e) {
    var ret = iterator['return'];
    if (ret !== undefined) anObject(ret.call(iterator));
    throw e;
  }
};


/***/ }),
/* 137 */
/***/ (function(module, exports, __webpack_require__) {

var aFunction = __webpack_require__(14);
var toObject = __webpack_require__(13);
var IObject = __webpack_require__(59);
var toLength = __webpack_require__(12);

module.exports = function (that, callbackfn, aLen, memo, isRight) {
  aFunction(callbackfn);
  var O = toObject(that);
  var self = IObject(O);
  var length = toLength(O.length);
  var index = isRight ? length - 1 : 0;
  var i = isRight ? -1 : 1;
  if (aLen < 2) for (;;) {
    if (index in self) {
      memo = self[index];
      index += i;
      break;
    }
    index += i;
    if (isRight ? index < 0 : length <= index) {
      throw TypeError('Reduce of empty array with no initial value');
    }
  }
  for (;isRight ? index >= 0 : length > index; index += i) if (index in self) {
    memo = callbackfn(memo, self[index], index, O);
  }
  return memo;
};


/***/ }),
/* 138 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)

var toObject = __webpack_require__(13);
var toAbsoluteIndex = __webpack_require__(45);
var toLength = __webpack_require__(12);

module.exports = [].copyWithin || function copyWithin(target /* = 0 */, start /* = 0, end = @length */) {
  var O = toObject(this);
  var len = toLength(O.length);
  var to = toAbsoluteIndex(target, len);
  var from = toAbsoluteIndex(start, len);
  var end = arguments.length > 2 ? arguments[2] : undefined;
  var count = Math.min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);
  var inc = 1;
  if (from < to && to < from + count) {
    inc = -1;
    from += count - 1;
    to += count - 1;
  }
  while (count-- > 0) {
    if (from in O) O[to] = O[from];
    else delete O[to];
    to += inc;
    from += inc;
  } return O;
};


/***/ }),
/* 139 */
/***/ (function(module, exports) {

module.exports = function (done, value) {
  return { value: value, done: !!done };
};


/***/ }),
/* 140 */
/***/ (function(module, exports, __webpack_require__) {

// 21.2.5.3 get RegExp.prototype.flags()
if (__webpack_require__(10) && /./g.flags != 'g') __webpack_require__(11).f(RegExp.prototype, 'flags', {
  configurable: true,
  get: __webpack_require__(74)
});


/***/ }),
/* 141 */
/***/ (function(module, exports) {

module.exports = function (exec) {
  try {
    return { e: false, v: exec() };
  } catch (e) {
    return { e: true, v: e };
  }
};


/***/ }),
/* 142 */
/***/ (function(module, exports, __webpack_require__) {

var anObject = __webpack_require__(3);
var isObject = __webpack_require__(7);
var newPromiseCapability = __webpack_require__(115);

module.exports = function (C, x) {
  anObject(C);
  if (isObject(x) && x.constructor === C) return x;
  var promiseCapability = newPromiseCapability.f(C);
  var resolve = promiseCapability.resolve;
  resolve(x);
  return promiseCapability.promise;
};


/***/ }),
/* 143 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var strong = __webpack_require__(144);
var validate = __webpack_require__(56);
var MAP = 'Map';

// 23.1 Map Objects
module.exports = __webpack_require__(77)(MAP, function (get) {
  return function Map() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };
}, {
  // 23.1.3.6 Map.prototype.get(key)
  get: function get(key) {
    var entry = strong.getEntry(validate(this, MAP), key);
    return entry && entry.v;
  },
  // 23.1.3.9 Map.prototype.set(key, value)
  set: function set(key, value) {
    return strong.def(validate(this, MAP), key === 0 ? 0 : key, value);
  }
}, strong, true);


/***/ }),
/* 144 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var dP = __webpack_require__(11).f;
var create = __webpack_require__(46);
var redefineAll = __webpack_require__(51);
var ctx = __webpack_require__(23);
var anInstance = __webpack_require__(49);
var forOf = __webpack_require__(50);
var $iterDefine = __webpack_require__(103);
var step = __webpack_require__(139);
var setSpecies = __webpack_require__(48);
var DESCRIPTORS = __webpack_require__(10);
var fastKey = __webpack_require__(38).fastKey;
var validate = __webpack_require__(56);
var SIZE = DESCRIPTORS ? '_s' : 'size';

var getEntry = function (that, key) {
  // fast case
  var index = fastKey(key);
  var entry;
  if (index !== 'F') return that._i[index];
  // frozen object case
  for (entry = that._f; entry; entry = entry.n) {
    if (entry.k == key) return entry;
  }
};

module.exports = {
  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {
    var C = wrapper(function (that, iterable) {
      anInstance(that, C, NAME, '_i');
      that._t = NAME;         // collection type
      that._i = create(null); // index
      that._f = undefined;    // first entry
      that._l = undefined;    // last entry
      that[SIZE] = 0;         // size
      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);
    });
    redefineAll(C.prototype, {
      // 23.1.3.1 Map.prototype.clear()
      // 23.2.3.2 Set.prototype.clear()
      clear: function clear() {
        for (var that = validate(this, NAME), data = that._i, entry = that._f; entry; entry = entry.n) {
          entry.r = true;
          if (entry.p) entry.p = entry.p.n = undefined;
          delete data[entry.i];
        }
        that._f = that._l = undefined;
        that[SIZE] = 0;
      },
      // 23.1.3.3 Map.prototype.delete(key)
      // 23.2.3.4 Set.prototype.delete(value)
      'delete': function (key) {
        var that = validate(this, NAME);
        var entry = getEntry(that, key);
        if (entry) {
          var next = entry.n;
          var prev = entry.p;
          delete that._i[entry.i];
          entry.r = true;
          if (prev) prev.n = next;
          if (next) next.p = prev;
          if (that._f == entry) that._f = next;
          if (that._l == entry) that._l = prev;
          that[SIZE]--;
        } return !!entry;
      },
      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)
      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)
      forEach: function forEach(callbackfn /* , that = undefined */) {
        validate(this, NAME);
        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);
        var entry;
        while (entry = entry ? entry.n : this._f) {
          f(entry.v, entry.k, this);
          // revert to the last existing entry
          while (entry && entry.r) entry = entry.p;
        }
      },
      // 23.1.3.7 Map.prototype.has(key)
      // 23.2.3.7 Set.prototype.has(value)
      has: function has(key) {
        return !!getEntry(validate(this, NAME), key);
      }
    });
    if (DESCRIPTORS) dP(C.prototype, 'size', {
      get: function () {
        return validate(this, NAME)[SIZE];
      }
    });
    return C;
  },
  def: function (that, key, value) {
    var entry = getEntry(that, key);
    var prev, index;
    // change existing entry
    if (entry) {
      entry.v = value;
    // create new entry
    } else {
      that._l = entry = {
        i: index = fastKey(key, true), // <- index
        k: key,                        // <- key
        v: value,                      // <- value
        p: prev = that._l,             // <- previous entry
        n: undefined,                  // <- next entry
        r: false                       // <- removed
      };
      if (!that._f) that._f = entry;
      if (prev) prev.n = entry;
      that[SIZE]++;
      // add to index
      if (index !== 'F') that._i[index] = entry;
    } return that;
  },
  getEntry: getEntry,
  setStrong: function (C, NAME, IS_MAP) {
    // add .keys, .values, .entries, [@@iterator]
    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11
    $iterDefine(C, NAME, function (iterated, kind) {
      this._t = validate(iterated, NAME); // target
      this._k = kind;                     // kind
      this._l = undefined;                // previous
    }, function () {
      var that = this;
      var kind = that._k;
      var entry = that._l;
      // revert to the last existing entry
      while (entry && entry.r) entry = entry.p;
      // get next entry
      if (!that._t || !(that._l = entry = entry ? entry.n : that._t._f)) {
        // or finish the iteration
        that._t = undefined;
        return step(1);
      }
      // return step by kind
      if (kind == 'keys') return step(0, entry.k);
      if (kind == 'values') return step(0, entry.v);
      return step(0, [entry.k, entry.v]);
    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);

    // add [@@species], 23.1.2.2, 23.2.2.2
    setSpecies(NAME);
  }
};


/***/ }),
/* 145 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var strong = __webpack_require__(144);
var validate = __webpack_require__(56);
var SET = 'Set';

// 23.2 Set Objects
module.exports = __webpack_require__(77)(SET, function (get) {
  return function Set() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };
}, {
  // 23.2.3.1 Set.prototype.add(value)
  add: function add(value) {
    return strong.def(validate(this, SET), value = value === 0 ? 0 : value, value);
  }
}, strong);


/***/ }),
/* 146 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var each = __webpack_require__(31)(0);
var redefine = __webpack_require__(18);
var meta = __webpack_require__(38);
var assign = __webpack_require__(127);
var weak = __webpack_require__(147);
var isObject = __webpack_require__(7);
var fails = __webpack_require__(6);
var validate = __webpack_require__(56);
var WEAK_MAP = 'WeakMap';
var getWeak = meta.getWeak;
var isExtensible = Object.isExtensible;
var uncaughtFrozenStore = weak.ufstore;
var tmp = {};
var InternalMap;

var wrapper = function (get) {
  return function WeakMap() {
    return get(this, arguments.length > 0 ? arguments[0] : undefined);
  };
};

var methods = {
  // 23.3.3.3 WeakMap.prototype.get(key)
  get: function get(key) {
    if (isObject(key)) {
      var data = getWeak(key);
      if (data === true) return uncaughtFrozenStore(validate(this, WEAK_MAP)).get(key);
      return data ? data[this._i] : undefined;
    }
  },
  // 23.3.3.5 WeakMap.prototype.set(key, value)
  set: function set(key, value) {
    return weak.def(validate(this, WEAK_MAP), key, value);
  }
};

// 23.3 WeakMap Objects
var $WeakMap = module.exports = __webpack_require__(77)(WEAK_MAP, wrapper, methods, weak, true, true);

// IE11 WeakMap frozen keys fix
if (fails(function () { return new $WeakMap().set((Object.freeze || Object)(tmp), 7).get(tmp) != 7; })) {
  InternalMap = weak.getConstructor(wrapper, WEAK_MAP);
  assign(InternalMap.prototype, methods);
  meta.NEED = true;
  each(['delete', 'has', 'get', 'set'], function (key) {
    var proto = $WeakMap.prototype;
    var method = proto[key];
    redefine(proto, key, function (a, b) {
      // store frozen objects on internal weakmap shim
      if (isObject(a) && !isExtensible(a)) {
        if (!this._f) this._f = new InternalMap();
        var result = this._f[key](a, b);
        return key == 'set' ? this : result;
      // store all the rest on native weakmap
      } return method.call(this, a, b);
    });
  });
}


/***/ }),
/* 147 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var redefineAll = __webpack_require__(51);
var getWeak = __webpack_require__(38).getWeak;
var anObject = __webpack_require__(3);
var isObject = __webpack_require__(7);
var anInstance = __webpack_require__(49);
var forOf = __webpack_require__(50);
var createArrayMethod = __webpack_require__(31);
var $has = __webpack_require__(16);
var validate = __webpack_require__(56);
var arrayFind = createArrayMethod(5);
var arrayFindIndex = createArrayMethod(6);
var id = 0;

// fallback for uncaught frozen keys
var uncaughtFrozenStore = function (that) {
  return that._l || (that._l = new UncaughtFrozenStore());
};
var UncaughtFrozenStore = function () {
  this.a = [];
};
var findUncaughtFrozen = function (store, key) {
  return arrayFind(store.a, function (it) {
    return it[0] === key;
  });
};
UncaughtFrozenStore.prototype = {
  get: function (key) {
    var entry = findUncaughtFrozen(this, key);
    if (entry) return entry[1];
  },
  has: function (key) {
    return !!findUncaughtFrozen(this, key);
  },
  set: function (key, value) {
    var entry = findUncaughtFrozen(this, key);
    if (entry) entry[1] = value;
    else this.a.push([key, value]);
  },
  'delete': function (key) {
    var index = arrayFindIndex(this.a, function (it) {
      return it[0] === key;
    });
    if (~index) this.a.splice(index, 1);
    return !!~index;
  }
};

module.exports = {
  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {
    var C = wrapper(function (that, iterable) {
      anInstance(that, C, NAME, '_i');
      that._t = NAME;      // collection type
      that._i = id++;      // collection id
      that._l = undefined; // leak store for uncaught frozen objects
      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);
    });
    redefineAll(C.prototype, {
      // 23.3.3.2 WeakMap.prototype.delete(key)
      // 23.4.3.3 WeakSet.prototype.delete(value)
      'delete': function (key) {
        if (!isObject(key)) return false;
        var data = getWeak(key);
        if (data === true) return uncaughtFrozenStore(validate(this, NAME))['delete'](key);
        return data && $has(data, this._i) && delete data[this._i];
      },
      // 23.3.3.4 WeakMap.prototype.has(key)
      // 23.4.3.4 WeakSet.prototype.has(value)
      has: function has(key) {
        if (!isObject(key)) return false;
        var data = getWeak(key);
        if (data === true) return uncaughtFrozenStore(validate(this, NAME)).has(key);
        return data && $has(data, this._i);
      }
    });
    return C;
  },
  def: function (that, key, value) {
    var data = getWeak(anObject(key), true);
    if (data === true) uncaughtFrozenStore(that).set(key, value);
    else data[that._i] = value;
    return that;
  },
  ufstore: uncaughtFrozenStore
};


/***/ }),
/* 148 */
/***/ (function(module, exports, __webpack_require__) {

// https://tc39.github.io/ecma262/#sec-toindex
var toInteger = __webpack_require__(29);
var toLength = __webpack_require__(12);
module.exports = function (it) {
  if (it === undefined) return 0;
  var number = toInteger(it);
  var length = toLength(number);
  if (number !== length) throw RangeError('Wrong length!');
  return length;
};


/***/ }),
/* 149 */
/***/ (function(module, exports, __webpack_require__) {

// all object keys, includes non-enumerable and symbols
var gOPN = __webpack_require__(47);
var gOPS = __webpack_require__(70);
var anObject = __webpack_require__(3);
var Reflect = __webpack_require__(5).Reflect;
module.exports = Reflect && Reflect.ownKeys || function ownKeys(it) {
  var keys = gOPN.f(anObject(it));
  var getSymbols = gOPS.f;
  return getSymbols ? keys.concat(getSymbols(it)) : keys;
};


/***/ }),
/* 150 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray
var isArray = __webpack_require__(71);
var isObject = __webpack_require__(7);
var toLength = __webpack_require__(12);
var ctx = __webpack_require__(23);
var IS_CONCAT_SPREADABLE = __webpack_require__(9)('isConcatSpreadable');

function flattenIntoArray(target, original, source, sourceLen, start, depth, mapper, thisArg) {
  var targetIndex = start;
  var sourceIndex = 0;
  var mapFn = mapper ? ctx(mapper, thisArg, 3) : false;
  var element, spreadable;

  while (sourceIndex < sourceLen) {
    if (sourceIndex in source) {
      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];

      spreadable = false;
      if (isObject(element)) {
        spreadable = element[IS_CONCAT_SPREADABLE];
        spreadable = spreadable !== undefined ? !!spreadable : isArray(element);
      }

      if (spreadable && depth > 0) {
        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;
      } else {
        if (targetIndex >= 0x1fffffffffffff) throw TypeError();
        target[targetIndex] = element;
      }

      targetIndex++;
    }
    sourceIndex++;
  }
  return targetIndex;
}

module.exports = flattenIntoArray;


/***/ }),
/* 151 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/tc39/proposal-string-pad-start-end
var toLength = __webpack_require__(12);
var repeat = __webpack_require__(99);
var defined = __webpack_require__(28);

module.exports = function (that, maxLength, fillString, left) {
  var S = String(defined(that));
  var stringLength = S.length;
  var fillStr = fillString === undefined ? ' ' : String(fillString);
  var intMaxLength = toLength(maxLength);
  if (intMaxLength <= stringLength || fillStr == '') return S;
  var fillLen = intMaxLength - stringLength;
  var stringFiller = repeat.call(fillStr, Math.ceil(fillLen / fillStr.length));
  if (stringFiller.length > fillLen) stringFiller = stringFiller.slice(0, fillLen);
  return left ? stringFiller + S : S + stringFiller;
};


/***/ }),
/* 152 */
/***/ (function(module, exports, __webpack_require__) {

var getKeys = __webpack_require__(44);
var toIObject = __webpack_require__(20);
var isEnum = __webpack_require__(60).f;
module.exports = function (isEntries) {
  return function (it) {
    var O = toIObject(it);
    var keys = getKeys(O);
    var length = keys.length;
    var i = 0;
    var result = [];
    var key;
    while (length > i) if (isEnum.call(O, key = keys[i++])) {
      result.push(isEntries ? [key, O[key]] : O[key]);
    } return result;
  };
};


/***/ }),
/* 153 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/DavidBruant/Map-Set.prototype.toJSON
var classof = __webpack_require__(61);
var from = __webpack_require__(154);
module.exports = function (NAME) {
  return function toJSON() {
    if (classof(this) != NAME) throw TypeError(NAME + "#toJSON isn't generic");
    return from(this);
  };
};


/***/ }),
/* 154 */
/***/ (function(module, exports, __webpack_require__) {

var forOf = __webpack_require__(50);

module.exports = function (iter, ITERATOR) {
  var result = [];
  forOf(iter, false, result.push, result, ITERATOR);
  return result;
};


/***/ }),
/* 155 */
/***/ (function(module, exports) {

// https://rwaldron.github.io/proposal-math-extensions/
module.exports = Math.scale || function scale(x, inLow, inHigh, outLow, outHigh) {
  if (
    arguments.length === 0
      // eslint-disable-next-line no-self-compare
      || x != x
      // eslint-disable-next-line no-self-compare
      || inLow != inLow
      // eslint-disable-next-line no-self-compare
      || inHigh != inHigh
      // eslint-disable-next-line no-self-compare
      || outLow != outLow
      // eslint-disable-next-line no-self-compare
      || outHigh != outHigh
  ) return NaN;
  if (x === Infinity || x === -Infinity) return x;
  return (x - inLow) * (outHigh - outLow) / (inHigh - inLow) + outLow;
};


/***/ }),
/* 156 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
Object.defineProperty(exports, "__esModule", { value: true });
var redux_1 = __webpack_require__(382);
var Error_1 = __webpack_require__(383);
var Post_1 = __webpack_require__(384);
var UserInfo_1 = __webpack_require__(385);
/**
 * 合并reducer
 * 在组件中使用相应的Store时带上这里的前缀
 */
var reducer = redux_1.combineReducers({
    error: Error_1.default,
    post: Post_1.default,
    userInfo: UserInfo_1.default
});
/**
 * 记录Action与Store
 * @param store
 */
var logger = function (store) { return function (next) { return function (action) {
    console.log(action.type);
    var result = next(action);
    console.log(store.getState());
    return result;
}; }; };
exports.default = redux_1.createStore(reducer, redux_1.applyMiddleware(logger));


/***/ }),
/* 157 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var UbbContainer_1 = __webpack_require__(15);
var react_router_dom_1 = __webpack_require__(8);
var Pager_1 = __webpack_require__(57);
var Status_1 = __webpack_require__(62);
var RouteComponent = /** @class */ (function (_super) {
    __extends(RouteComponent, _super);
    function RouteComponent(props, context) {
        return _super.call(this, props, context) || this;
    }
    Object.defineProperty(RouteComponent.prototype, "match", {
        get: function () {
            return this.props.match;
        },
        enumerable: true,
        configurable: true
    });
    return RouteComponent;
}(React.Component));
exports.RouteComponent = RouteComponent;
var List = /** @class */ (function (_super) {
    __extends(List, _super);
    function List(props, context) {
        var _this = _super.call(this, props, context) || this;
        // 默认页码
        _this.state = {
            boardId: null, boardInfo: { bigPaper: "", masters: [], name: "" }, page: 1, fetchState: 'ok'
        };
        return _this;
    }
    List.prototype.componentWillReceiveProps = function (newProps) {
        return __awaiter(this, void 0, void 0, function () {
            var boardInfo;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.getBoardInfo(newProps.match.params.boardId)];
                    case 1:
                        boardInfo = _a.sent();
                        // 设置状态
                        this.setState({ boardInfo: boardInfo, boardId: this.match.params.boardId });
                        return [2 /*return*/];
                }
            });
        });
    };
    List.prototype.componentWillMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var boardInfo;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.getBoardInfo(this.match.params.boardId)];
                    case 1:
                        boardInfo = _a.sent();
                        // 设置状态
                        this.setState({ boardInfo: boardInfo, boardId: this.match.params.boardId, fetchState: boardInfo });
                        return [2 /*return*/];
                }
            });
        });
    };
    List.prototype.render = function () {
        switch (this.state.fetchState) {
            case 'ok':
                return React.createElement("div", null);
            case 'not found':
                return React.createElement(Status_1.NotFoundTopic, null);
            case 'unauthorized':
                return React.createElement(Status_1.UnauthorizedBoard, null);
            case 'server error':
                return React.createElement(Status_1.ServerError, null);
        }
        return React.createElement("div", { id: "listRoot" },
            React.createElement(Category, { boardId: this.match.params.boardId, boardInfo: this.state.boardInfo }),
            React.createElement(ListHead, { key: this.state.page, boardId: this.match.params.boardId, boardInfo: this.state.boardInfo }),
            React.createElement(ListButtonAndAds, { boardInfo: this.state.boardInfo, adsUrl: null }),
            React.createElement(react_router_dom_1.Switch, null,
                React.createElement(react_router_dom_1.Route, { exact: true, path: "/list/:boardid/tags/:tag1Id/:tag2Id/:page?", component: ListTagsContent }),
                React.createElement(react_router_dom_1.Route, { exact: true, path: "/list/:boardId/tag/tag1/:tagId/:page?", component: ListTagContent }),
                React.createElement(react_router_dom_1.Route, { exact: true, path: "/list/:boardId/best/:page?", component: ListBestContent }),
                React.createElement(react_router_dom_1.Route, { exact: true, path: "/list/:boardId/save/:page?", component: ListSaveContent }),
                React.createElement(react_router_dom_1.Route, { exact: true, path: "/list/:boardId/:page?", component: ListContent })));
    };
    return List;
}(RouteComponent));
exports.List = List;
/**
 
 */
var Category = /** @class */ (function (_super) {
    __extends(Category, _super);
    function Category() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Category.prototype.render = function () {
        var listUrl = "/list/" + this.props.boardId;
        return React.createElement("div", { className: "row", style: { alignItems: "baseline", width: "100% ", justifyContent: "flex-start", color: "grey", fontSize: "0.75rem", marginBottom: "1rem" } },
            React.createElement("a", { style: { color: "grey", fontSize: "1rem", marginRight: "0.5rem" }, href: " / " }, "\u9996\u9875"),
            React.createElement("i", { className: "fa fa-chevron-right" }),
            React.createElement("a", { style: { color: "grey", fontSize: "1rem", marginLeft: "0.5rem" }, href: listUrl }, this.props.boardInfo.name));
    };
    return Category;
}(React.Component));
exports.Category = Category;
var ListHead = /** @class */ (function (_super) {
    __extends(ListHead, _super);
    function ListHead(props, content) {
        var _this = _super.call(this, props, content) || this;
        _this.state = { isFollow: _this.props.boardInfo.isFollow, isExtend: false };
        var initFollow = Utility.isFollowThisBoard(_this.props.boardId);
        _this.follow = _this.follow.bind(_this);
        _this.unfollow = _this.unfollow.bind(_this);
        _this.generateMasters = _this.generateMasters.bind(_this);
        return _this;
    }
    ListHead.prototype.follow = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.followBoard(this.props.boardId)];
                    case 1:
                        _a.sent();
                        this.setState({ isFollow: true });
                        return [2 /*return*/];
                }
            });
        });
    };
    ListHead.prototype.unfollow = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.unfollowBoard(this.props.boardId)];
                    case 1:
                        _a.sent();
                        this.setState({ isFollow: false });
                        return [2 /*return*/];
                }
            });
        });
    };
    ListHead.prototype.generateMasters = function (item) {
        var name = item.toString();
        var userName = encodeURIComponent(item.toString());
        var webUrl = "/user/name/" + userName;
        return React.createElement("div", { style: { marginRight: '10px', fontSize: "0.75rem" } },
            React.createElement("a", { style: { color: this.state.isExtend ? "#fff" : '#000' }, href: webUrl }, name));
    };
    ListHead.prototype.componentWillReceiveProps = function (newProps) {
        this.setState({ isFollow: newProps.boardInfo.isFollow });
    };
    ListHead.prototype.onError = function (e) {
        e.target.src = "/images/_CC98\u534F\u4F1A.png";
    };
    ListHead.prototype.render = function () {
        var _this = this;
        var boardUrl = "/list/" + this.props.boardId;
        var id = "boardImg_" + this.props.boardId;
        var url = "/images/_" + this.props.boardInfo.name + ".png";
        if (!this.props.boardInfo.bigPaper || !this.state.isExtend) {
            return (React.createElement("div", { className: "row", style: { width: "100%", overflow: 'hidden', maxHeight: '6rem', transition: 'max-height 1s' } },
                React.createElement(react_router_dom_1.Link, { to: boardUrl },
                    React.createElement("div", { className: "boardMessage" },
                        React.createElement("div", { className: "row", style: { height: "4rem", marginTop: "1.25rem" } },
                            React.createElement("img", { style: { marginLeft: "1.25rem" }, onError: this.onError, src: url }),
                            React.createElement("div", { className: "boardMessageDetails" },
                                React.createElement("div", { className: "row", style: { width: "100%" } }, this.props.boardInfo.name),
                                React.createElement("div", { className: "row", style: { width: "100%", alignItems: "center" } },
                                    React.createElement("div", { style: { fontSize: "0.75rem", width: "4.5rem" } },
                                        this.props.boardInfo.todayCount,
                                        "/",
                                        this.props.boardInfo.topicCount),
                                    React.createElement("div", { className: "boardFollow", onClick: this.state.isFollow ? this.unfollow : this.follow },
                                        this.state.isFollow ? "取关" : "关注",
                                        " ")))))),
                React.createElement("div", { className: "bigPaper", style: { display: 'block' } },
                    this.props.boardInfo.bigPaper ? React.createElement("button", { className: "fa fa-angle-double-down", style: { float: 'right', backgroundColor: '#fff', cursor: 'pointer', border: 'none' }, type: "button", onClick: function () { return _this.setState({ isExtend: true }); } }, "\u5C55\u5F00") : null,
                    React.createElement("div", null,
                        React.createElement("div", null,
                            "\u7248\u9762\u7B80\u4ECB\uFF1A",
                            this.props.boardInfo.description)),
                    React.createElement("div", null,
                        React.createElement("div", { style: { display: 'flex', marginTop: '.5rem', fontSize: '0.75rem' } },
                            "\u7248\u4E3B\uFF1A",
                            this.props.boardInfo.boardMasters.map(this.generateMasters))))));
        }
        return React.createElement("div", { className: "row", style: { width: "100%", overflow: 'hidden', maxHeight: '50rem', transition: 'max-height 1.5s' } },
            React.createElement("div", { className: "boardMessage" },
                React.createElement("div", { className: "row", style: { height: "4rem", marginTop: "1.25rem" } },
                    React.createElement("img", { style: { marginLeft: "1.25rem" }, src: url }),
                    React.createElement("div", { className: "boardMessageDetails" },
                        React.createElement("div", { className: "row", style: { width: "100%" } }, this.props.boardInfo.name),
                        React.createElement("div", { className: "row", style: { width: "100%", alignItems: "center" } },
                            React.createElement("div", { style: { fontSize: "0.75rem", width: "4.5rem" } },
                                this.props.boardInfo.todayCount,
                                "/",
                                this.props.boardInfo.topicCount),
                            React.createElement("div", { className: "boardFollow", onClick: this.state.isFollow ? this.unfollow : this.follow },
                                this.state.isFollow ? "取关" : "关注",
                                " ")))),
                React.createElement("div", { className: "boardDescription" },
                    React.createElement("div", null, "\u7248\u9762\u7B80\u4ECB"),
                    React.createElement("div", null, this.props.boardInfo.description)),
                React.createElement("div", { className: "boardMasters" },
                    React.createElement("div", null, "\u7248\u4E3B"),
                    React.createElement("div", null, this.props.boardInfo.boardMasters.map(this.generateMasters)))),
            React.createElement("div", { className: "bigPaper" },
                React.createElement("div", { className: "bigPaperTitle" }, "\u7248\u9762\u516C\u544A"),
                React.createElement("div", null,
                    React.createElement(UbbContainer_1.UbbContainer, { code: this.props.boardInfo.bigPaper }))));
    };
    return ListHead;
}(RouteComponent));
exports.ListHead = ListHead;
/**
 * 提供显示连续页码的交互效果。
 */
var ListTagAndPager = /** @class */ (function (_super) {
    __extends(ListTagAndPager, _super);
    function ListTagAndPager(props, content) {
        var _this = _super.call(this, props, content) || this;
        _this.state = {
            pager: [1, 2, 3, 4, 5]
        };
        return _this;
    }
    ListTagAndPager.prototype.generateTagLayer = function (item) {
        var url = "/list/" + this.props.boardid;
        return React.createElement("div", { style: { maxWidth: "40rem", lineHeight: "3rem", display: 'flex', flexDirection: 'row', justifyContent: 'flex-start', width: '100%', marginLeft: "0.3125rem", marginRight: "0.3125rem", borderTop: 'dashed #EAEAEA thin', marginBottom: "0.5rem" } },
            React.createElement("div", { className: "row" },
                "  ",
                React.createElement("div", null,
                    React.createElement("button", { id: "chooseTag" },
                        React.createElement(react_router_dom_1.Link, { to: url }, "\u5168\u90E8"))),
                item.tags.map(this.generateTagButton.bind(this))));
    };
    ListTagAndPager.prototype.generateTagButton = function (item) {
        var url = "/list/" + this.props.boardid + "/tag/tag1/" + item.id;
        return React.createElement("div", null,
            React.createElement(react_router_dom_1.Link, { to: url },
                React.createElement("button", { className: "chooseTag" },
                    item.name,
                    React.createElement("span", { className: "tagNumber" }))));
    };
    ListTagAndPager.prototype.componentWillReceiveProps = function (newProps) {
        return __awaiter(this, void 0, void 0, function () {
            var pages;
            return __generator(this, function (_a) {
                pages = Utility.getPager(newProps.page, newProps.totalPage);
                this.setState({ pager: pages });
                return [2 /*return*/];
            });
        });
    };
    ListTagAndPager.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var pages;
            return __generator(this, function (_a) {
                pages = Utility.getPager(this.props.page, this.props.totalPage);
                this.setState({ pager: pages });
                return [2 /*return*/];
            });
        });
    };
    ListTagAndPager.prototype.render = function () {
        return React.createElement("div", { className: "row", style: { width: '100%', marginLeft: "0.3125rem", marginRight: "0.3125rem", marginTop: '0.9375rem', justifyContent: 'space-between', alignItems: 'flex-end' } },
            React.createElement("div", null, this.props.tag.map(this.generateTagLayer.bind(this))),
            React.createElement(Pager_1.Pager, { page: this.props.page, url: this.props.url, totalPage: this.props.totalPage }));
    };
    return ListTagAndPager;
}(React.Component));
exports.ListTagAndPager = ListTagAndPager;
var ListButtonAndAds = /** @class */ (function (_super) {
    __extends(ListButtonAndAds, _super);
    function ListButtonAndAds() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ListButtonAndAds.prototype.render = function () {
        var adsUrl = "/images/ads.jpg";
        var createTopicUrl = "/editor/postTopic/" + this.props.boardInfo.id;
        return React.createElement("div", { className: "row", style: { width: "100%", height: "6.25rem", alignItems: "flex-end", justifyContent: "space-between", marginTop: "1rem" } },
            React.createElement(react_router_dom_1.Link, { className: "button bgcolor", to: createTopicUrl }, "\u53D1\u4E3B\u9898"),
            React.createElement("div", { style: { height: "6.25rem" } },
                React.createElement("img", { style: { width: "18.75rem", height: "6.25rem" }, src: adsUrl })));
    };
    return ListButtonAndAds;
}(React.Component));
exports.ListButtonAndAds = ListButtonAndAds;
var ListTopContent = /** @class */ (function (_super) {
    __extends(ListTopContent, _super);
    function ListTopContent(props, context) {
        var _this = _super.call(this, props, context) || this;
        _this.state = { data: [] };
        return _this;
    }
    ListTopContent.prototype.convertTopicToElement = function (item) {
        return React.createElement(TopicTitleAndContent, { key: item.id, title: item.title, userName: item.userName, id: item.id, userId: item.userId, lastPostTime: item.lastPostTime, lastPostUser: item.lastPostUser, likeCount: item.likeCount, dislikeCount: item.dislikeCount, replyCount: item.replyCount, highlightInfo: item.highlightInfo, topState: item.topState, state: item.state, hitCount: item.hitCount });
    };
    ListTopContent.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.GetTopTopics(this.props.boardId)];
                    case 1:
                        data = _a.sent();
                        this.setState({ data: data });
                        return [2 /*return*/];
                }
            });
        });
    };
    ListTopContent.prototype.render = function () {
        return React.createElement("div", null, this.state.data.map(this.convertTopicToElement));
    };
    return ListTopContent;
}(React.Component));
exports.ListTopContent = ListTopContent;
var BestTopics = /** @class */ (function (_super) {
    __extends(BestTopics, _super);
    function BestTopics(props) {
        var _this = _super.call(this, props) || this;
        _this.state = ({ data: [] });
        return _this;
    }
    BestTopics.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.getBestTopics(this.props.boardId, this.props.curPage)];
                    case 1:
                        data = _a.sent();
                        this.setState({ data: data });
                        return [2 /*return*/];
                }
            });
        });
    };
    BestTopics.prototype.convertTopicToElement = function (item) {
        return React.createElement(TopicTitleAndContent, { key: item.id, title: item.title, userName: item.userName, id: item.id, userId: item.userId, lastPostTime: item.lastPostTime, lastPostUser: item.lastPostUser, likeCount: item.likeCount, dislikeCount: item.dislikeCount, replyCount: item.replyCount, highlightInfo: item.highlightInfo, topState: item.topState, state: item.state, hitCount: item.hitCount });
    };
    BestTopics.prototype.render = function () {
        return React.createElement("div", null, this.state.data.map(this.convertTopicToElement));
    };
    return BestTopics;
}(React.Component));
exports.BestTopics = BestTopics;
var ListContent = /** @class */ (function (_super) {
    __extends(ListContent, _super);
    function ListContent(props, context) {
        var _this = _super.call(this, props, context) || this;
        _this.state = {
            items: [], totalPage: 0, boardInfo: { masters: [], topicCount: 1 }, fetchState: "ok", tags: []
        };
        return _this;
    }
    ListContent.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var page, boardInfo, data, totalPage, tags;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        page = this.match.params.page;
                        if (!page)
                            page = 1;
                        return [4 /*yield*/, Utility.getBoardInfo(this.match.params.boardId)];
                    case 1:
                        boardInfo = _a.sent();
                        return [4 /*yield*/, Utility.getBoardTopicAsync(page, this.match.params.boardId, boardInfo.topicCount)];
                    case 2:
                        data = _a.sent();
                        totalPage = this.getTotalListPage(boardInfo.topicCount);
                        return [4 /*yield*/, Utility.getBoardTag(this.match.params.boardId)];
                    case 3:
                        tags = _a.sent();
                        this.setState({ items: data, totalPage: totalPage, boardInfo: boardInfo, fetchState: data, tags: tags });
                        return [2 /*return*/];
                }
            });
        });
    };
    ListContent.prototype.convertTopicToElement = function (item) {
        return React.createElement(TopicTitleAndContent, { key: item.id, title: item.title, userName: item.userName, id: item.id, userId: item.userId, lastPostTime: item.lastPostTime, lastPostUser: item.lastPostUser, likeCount: item.likeCount, dislikeCount: item.dislikeCount, replyCount: item.replyCount, highlightInfo: item.highlightInfo, topState: item.topState, state: item.state, hitCount: item.hitCount });
    };
    ListContent.prototype.componentWillReceiveProps = function (newProps) {
        return __awaiter(this, void 0, void 0, function () {
            var page, p, boardInfo, totalPage, data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        p = newProps.match.params.page;
                        // 未提供页码，防止出错不进行后续处理
                        if (!p) {
                            page = 1;
                        }
                        else {
                            page = parseInt(p);
                        }
                        return [4 /*yield*/, Utility.getBoardInfo(this.match.params.boardId)];
                    case 1:
                        boardInfo = _a.sent();
                        totalPage = this.getTotalListPage(this.state.boardInfo.topicCount);
                        return [4 /*yield*/, Utility.getBoardTopicAsync(page, newProps.match.params.boardId, boardInfo.topicCount)];
                    case 2:
                        data = _a.sent();
                        this.setState({ items: data, totalPage: totalPage });
                        return [2 /*return*/];
                }
            });
        });
    };
    ListContent.prototype.getTotalListPage = function (count) {
        var page = Utility.getListTotalPage(count);
        return page;
    };
    ListContent.prototype.render = function () {
        var curPage = this.match.params.page ? parseInt(this.match.params.page) : 1;
        var topTopics = null;
        if (parseInt(this.match.params.page) === 1 || !this.match.params.page) {
            topTopics = React.createElement("div", null,
                React.createElement(ListTopContent, { boardId: this.match.params.boardId }));
        }
        var topics = this.state.items.map(this.convertTopicToElement);
        var bestTopicsUrl = "/list/" + this.match.params.boardId + "/best/";
        var saveTopicsUrl = "/list/" + this.match.params.boardId + "/save/";
        var normalTopicsUrl = "/list/" + this.match.params.boardId + "/";
        return React.createElement("div", { className: "listContent " },
            React.createElement(ListTagAndPager, { page: curPage, totalPage: this.state.totalPage, boardid: this.match.params.boardId, url: normalTopicsUrl, tag: this.state.tags }),
            React.createElement("div", { className: "column", style: { width: "100%", border: "#79b8ca solid thin" } },
                React.createElement("div", { className: "row", style: { justifyContent: 'space-between', backgroundColor: "#79b8ca", color: "#fff" } },
                    React.createElement("div", { className: "row", style: { alignItems: 'center' } },
                        React.createElement("div", { className: "listContentTag" }, "\u5168\u90E8"),
                        React.createElement("div", { className: "listContentTag" },
                            React.createElement(react_router_dom_1.Link, { to: bestTopicsUrl }, "\u7CBE\u534E")),
                        React.createElement("div", { className: "listContentTag" },
                            React.createElement(react_router_dom_1.Link, { to: saveTopicsUrl }, "\u4FDD\u5B58"))),
                    React.createElement("div", { className: "row", style: { alignItems: 'center' } },
                        React.createElement("div", { style: { marginRight: '16rem' } },
                            React.createElement("span", null, "\u4F5C\u8005")),
                        React.createElement("div", { style: { marginRight: '8rem' } },
                            React.createElement("span", null, "\u6700\u540E\u56DE\u590D")))),
                topTopics,
                React.createElement("div", null, topics)),
            React.createElement(Pager_1.Pager, { page: curPage, totalPage: this.state.totalPage, url: normalTopicsUrl }));
    };
    return ListContent;
}(RouteComponent));
exports.ListContent = ListContent;
var ListTagContent = /** @class */ (function (_super) {
    __extends(ListTagContent, _super);
    function ListTagContent(props, context) {
        var _this = _super.call(this, props, context) || this;
        _this.state = {
            items: [], totalPage: 0, boardInfo: { masters: [], topicCount: 1 }, fetchState: "ok", tags: [], layer: 1
        };
        return _this;
    }
    ListTagContent.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var page, boardInfo, tags, layer, data, totalPage;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        page = this.match.params.page;
                        if (!page)
                            page = 1;
                        return [4 /*yield*/, Utility.getBoardInfo(this.match.params.boardId)];
                    case 1:
                        boardInfo = _a.sent();
                        return [4 /*yield*/, Utility.getBoardTag(this.match.params.boardId)];
                    case 2:
                        tags = _a.sent();
                        layer = Utility.getTagLayer(this.match.params.tagId, tags);
                        return [4 /*yield*/, Utility.getTopicByOneTag(this.match.params.tagId, this.match.params.boardId, layer, page)];
                    case 3:
                        data = _a.sent();
                        totalPage = this.getTotalListPage(data.count);
                        this.setState({ items: data.topics, totalPage: totalPage, boardInfo: boardInfo, fetchState: data, tags: tags, layer: layer });
                        return [2 /*return*/];
                }
            });
        });
    };
    ListTagContent.prototype.convertTopicToElement = function (item) {
        return React.createElement(TopicTitleAndContent, { key: item.id, title: item.title, userName: item.userName, id: item.id, userId: item.userId, lastPostTime: item.lastPostTime, lastPostUser: item.lastPostUser, likeCount: item.likeCount, dislikeCount: item.dislikeCount, replyCount: item.replyCount, highlightInfo: item.highlightInfo, topState: item.topState, state: item.state, hitCount: item.hitCount });
    };
    ListTagContent.prototype.componentWillReceiveProps = function (newProps) {
        return __awaiter(this, void 0, void 0, function () {
            var page, p, boardInfo, tags, layer, data, totalPage;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        p = newProps.match.params.page;
                        // 未提供页码，防止出错不进行后续处理
                        if (!p) {
                            page = 1;
                        }
                        else {
                            page = parseInt(p);
                        }
                        return [4 /*yield*/, Utility.getBoardInfo(newProps.match.params.boardId)];
                    case 1:
                        boardInfo = _a.sent();
                        return [4 /*yield*/, Utility.getBoardTag(newProps.match.params.boardId)];
                    case 2:
                        tags = _a.sent();
                        layer = Utility.getTagLayer(newProps.match.params.tagId, tags);
                        return [4 /*yield*/, Utility.getTopicByOneTag(newProps.match.params.tagId, newProps.match.params.boardId, layer, page)];
                    case 3:
                        data = _a.sent();
                        totalPage = this.getTotalListPage(data.count);
                        this.setState({ items: data.topics, totalPage: totalPage, boardInfo: boardInfo, fetchState: data, tags: tags, layer: layer });
                        return [2 /*return*/];
                }
            });
        });
    };
    ListTagContent.prototype.getTotalListPage = function (count) {
        var page = Utility.getListTotalPage(count);
        return page;
    };
    ListTagContent.prototype.render = function () {
        var curPage = this.match.params.page ? parseInt(this.match.params.page) : 1;
        var topTopics = null;
        if (parseInt(this.match.params.page) === 1 || !this.match.params.page) {
            topTopics = React.createElement("div", null,
                React.createElement(ListTopContent, { boardId: this.match.params.boardId }));
        }
        var topics = this.state.items.map(this.convertTopicToElement);
        var tagUrl = "/list/" + this.match.params.boardId + "/tag/tag" + this.state.layer + "/" + this.match.params.tagId + "/";
        var normalTopicsUrl = "/list/" + this.match.params.boardId + "/";
        var bestTopicsUrl = "/list/" + this.match.params.boardId + "/best/";
        var saveTopicsUrl = "/list/" + this.match.params.boardId + "/save/";
        return React.createElement("div", { className: "listContent " },
            React.createElement(ListTagAndPager, { page: curPage, totalPage: this.state.totalPage, boardid: this.match.params.boardId, url: tagUrl, tag: this.state.tags }),
            React.createElement("div", { className: "column", style: { width: "100%", border: "#79b8ca solid thin" } },
                React.createElement("div", { className: "row", style: { justifyContent: 'space-between', backgroundColor: "#79b8ca", color: "#fff" } },
                    React.createElement("div", { className: "row", style: { alignItems: 'center' } },
                        React.createElement("div", { className: "listContentTag" },
                            React.createElement(react_router_dom_1.Link, { to: normalTopicsUrl }, " \u5168\u90E8")),
                        React.createElement("div", { className: "listContentTag" },
                            React.createElement(react_router_dom_1.Link, { to: bestTopicsUrl }, "\u7CBE\u534E")),
                        React.createElement("div", { className: "listContentTag" },
                            React.createElement(react_router_dom_1.Link, { to: saveTopicsUrl }, "\u4FDD\u5B58"))),
                    React.createElement("div", { className: "row", style: { alignItems: 'center' } },
                        React.createElement("div", { style: { marginRight: '19.3rem' } },
                            React.createElement("span", null, "\u4F5C\u8005")),
                        React.createElement("div", { style: { marginRight: '7.6875rem' } },
                            React.createElement("span", null, "\u6700\u540E\u56DE\u590D")))),
                React.createElement("div", null, topics)),
            React.createElement(Pager_1.Pager, { page: curPage, totalPage: this.state.totalPage, url: tagUrl }));
    };
    return ListTagContent;
}(RouteComponent));
exports.ListTagContent = ListTagContent;
var ListTagsContent = /** @class */ (function (_super) {
    __extends(ListTagsContent, _super);
    function ListTagsContent(props, context) {
        var _this = _super.call(this, props, context) || this;
        _this.state = {
            items: [], totalPage: 0, boardInfo: { masters: [], topicCount: 1 }, fetchState: "ok", tags: []
        };
        return _this;
    }
    ListTagsContent.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var page, boardInfo, data, tags, totalPage;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        page = this.match.params.page;
                        if (!page)
                            page = 1;
                        return [4 /*yield*/, Utility.getBoardInfo(this.match.params.boardId)];
                    case 1:
                        boardInfo = _a.sent();
                        return [4 /*yield*/, Utility.getTopicByTwoTags(this.match.params.tag1Id, this.match.params.tag2Id, this.match.params.boardId, page)];
                    case 2:
                        data = _a.sent();
                        return [4 /*yield*/, Utility.getBoardTag(this.match.params.boardId)];
                    case 3:
                        tags = _a.sent();
                        totalPage = this.getTotalListPage(data.count);
                        this.setState({ items: data.topics, totalPage: totalPage, boardInfo: boardInfo, fetchState: data, tags: tags });
                        return [2 /*return*/];
                }
            });
        });
    };
    ListTagsContent.prototype.convertTopicToElement = function (item) {
        return React.createElement(TopicTitleAndContent, { key: item.id, title: item.title, userName: item.userName, id: item.id, userId: item.userId, lastPostTime: item.lastPostTime, lastPostUser: item.lastPostUser, likeCount: item.likeCount, dislikeCount: item.dislikeCount, replyCount: item.replyCount, highlightInfo: item.highlightInfo, topState: item.topState, state: item.state, hitCount: item.hitCount });
    };
    ListTagsContent.prototype.componentWillReceiveProps = function (newProps) {
        return __awaiter(this, void 0, void 0, function () {
            var page, p, boardInfo, tags, data, totalPage;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        p = newProps.match.params.page;
                        // 未提供页码，防止出错不进行后续处理
                        if (!p) {
                            page = 1;
                        }
                        else {
                            page = parseInt(p);
                        }
                        return [4 /*yield*/, Utility.getBoardInfo(newProps.match.params.boardId)];
                    case 1:
                        boardInfo = _a.sent();
                        return [4 /*yield*/, Utility.getBoardTag(newProps.match.params.boardId)];
                    case 2:
                        tags = _a.sent();
                        return [4 /*yield*/, Utility.getTopicByTwoTags(newProps.match.params.tag1Id, newProps.match.params.tag2Id, newProps.match.params.boardId, page)];
                    case 3:
                        data = _a.sent();
                        totalPage = this.getTotalListPage(data.count);
                        this.setState({ items: data.topics, totalPage: totalPage, boardInfo: boardInfo, fetchState: data, tags: tags });
                        return [2 /*return*/];
                }
            });
        });
    };
    ListTagsContent.prototype.getTotalListPage = function (count) {
        var page = Utility.getListTotalPage(count);
        return page;
    };
    ListTagsContent.prototype.render = function () {
        var curPage = this.match.params.page ? parseInt(this.match.params.page) : 1;
        var topTopics = null;
        if (parseInt(this.match.params.page) === 1 || !this.match.params.page) {
            topTopics = React.createElement("div", null,
                React.createElement(ListTopContent, { boardId: this.match.params.boardId }));
        }
        var topics = this.state.items.map(this.convertTopicToElement);
        var tagUrl = "/list/" + this.match.params.boardId + "/tags/tag1/" + this.match.params.tag1Id + "/tag2/" + this.match.params.tag2Id + "/";
        var normalTopicsUrl = "/list/" + this.match.params.boardId + "/";
        var bestTopicsUrl = "/list/" + this.match.params.boardId + "/best/";
        var saveTopicsUrl = "/list/" + this.match.params.boardId + "/save/";
        return React.createElement("div", { className: "listContent " },
            React.createElement(ListTagAndPager, { page: curPage, totalPage: this.state.totalPage, boardid: this.match.params.boardId, url: tagUrl, tag: this.state.tags }),
            React.createElement("div", { className: "column", style: { width: "100%", border: "#79b8ca solid thin" } },
                React.createElement("div", { className: "row", style: { justifyContent: 'space-between', backgroundColor: "#79b8ca", color: "#fff" } },
                    React.createElement("div", { className: "row", style: { alignItems: 'center' } },
                        React.createElement("div", { className: "listContentTag" },
                            React.createElement(react_router_dom_1.Link, { to: normalTopicsUrl }, " \u5168\u90E8")),
                        React.createElement("div", { className: "listContentTag" },
                            React.createElement(react_router_dom_1.Link, { to: bestTopicsUrl }, "\u7CBE\u534E")),
                        React.createElement("div", { className: "listContentTag" },
                            React.createElement(react_router_dom_1.Link, { to: saveTopicsUrl }, "\u4FDD\u5B58"))),
                    React.createElement("div", { className: "row", style: { alignItems: 'center' } },
                        React.createElement("div", { style: { marginRight: '19.3rem' } },
                            React.createElement("span", null, "\u4F5C\u8005")),
                        React.createElement("div", { style: { marginRight: '7.6875rem' } },
                            React.createElement("span", null, "\u6700\u540E\u56DE\u590D")))),
                React.createElement("div", null, topics)),
            React.createElement(Pager_1.Pager, { page: curPage, totalPage: this.state.totalPage, url: tagUrl }));
    };
    return ListTagsContent;
}(RouteComponent));
exports.ListTagsContent = ListTagsContent;
var ListBestContent = /** @class */ (function (_super) {
    __extends(ListBestContent, _super);
    function ListBestContent(props, context) {
        var _this = _super.call(this, props, context) || this;
        _this.state = { items: [], totalPage: 0, tags: [] };
        return _this;
    }
    ListBestContent.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var page, data, tags, totalPage;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        page = this.match.params.page;
                        if (!page)
                            page = 1;
                        return [4 /*yield*/, Utility.getBestTopics(page, this.match.params.boardId)];
                    case 1:
                        data = _a.sent();
                        return [4 /*yield*/, Utility.getBoardTag(this.match.params.boardId)];
                    case 2:
                        tags = _a.sent();
                        totalPage = data.totalPage;
                        this.setState({
                            items: data.boardtopics, totalPage: totalPage, tags: tags
                        });
                        ;
                        return [2 /*return*/];
                }
            });
        });
    };
    ListBestContent.prototype.convertTopicToElement = function (item) {
        return React.createElement(TopicTitleAndContent, { key: item.id, title: item.title, userName: item.userName, id: item.id, userId: item.userId, lastPostTime: item.lastPostTime, lastPostUser: item.lastPostUser, likeCount: item.likeCount, dislikeCount: item.dislikeCount, replyCount: item.replyCount, highlightInfo: item.highlightInfo, topState: item.topState, state: item.state, hitCount: item.hitCount });
    };
    ListBestContent.prototype.componentWillReceiveProps = function (newProps) {
        return __awaiter(this, void 0, void 0, function () {
            var page, p, data, totalPage;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        p = newProps.match.params.page;
                        // 未提供页码，防止出错不进行后续处理
                        if (!p) {
                            page = 1;
                        }
                        else {
                            page = parseInt(p);
                        }
                        return [4 /*yield*/, Utility.getBestTopics(page, newProps.match.params.boardId)];
                    case 1:
                        data = _a.sent();
                        totalPage = data.totalPage;
                        this.setState({
                            items: data.boardtopics, totalPage: totalPage
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    ListBestContent.prototype.render = function () {
        var curPage = this.match.params.page ? parseInt(this.match.params.page) : 1;
        var topTopics = null;
        if (parseInt(this.match.params.page) === 1 || !this.match.params.page) {
            topTopics = React.createElement("div", null,
                React.createElement(ListTopContent, { boardId: this.match.params.boardId }));
        }
        var topics = this.state.items.map(this.convertTopicToElement);
        var bestTopicsUrl = "/list/" + this.match.params.boardId + "/best/";
        var saveTopicsUrl = "/list/" + this.match.params.boardId + "/save/";
        var normalTopicsUrl = "/list/" + this.match.params.boardId + "/";
        return React.createElement("div", { className: "listContent " },
            React.createElement(ListTagAndPager, { page: curPage, totalPage: this.state.totalPage, boardid: this.match.params.boardId, url: bestTopicsUrl, tag: this.state.tags }),
            React.createElement("div", { className: "column", style: { width: "100%", border: "#79b8ca solid thin" } },
                React.createElement("div", { className: "row", style: { justifyContent: 'space-between', backgroundColor: "#79b8ca", color: "#fff" } },
                    React.createElement("div", { className: "row", style: { alignItems: 'center' } },
                        React.createElement("div", { className: "listContentTag" },
                            React.createElement(react_router_dom_1.Link, { to: normalTopicsUrl }, "\u5168\u90E8")),
                        React.createElement("div", { className: "listContentTag" }, "\u7CBE\u534E"),
                        React.createElement("div", { className: "listContentTag" },
                            React.createElement(react_router_dom_1.Link, { to: saveTopicsUrl }, "\u4FDD\u5B58"))),
                    React.createElement("div", { className: "row", style: { alignItems: 'center' } },
                        React.createElement("div", { style: { marginRight: '19.3rem' } },
                            React.createElement("span", null, "\u4F5C\u8005")),
                        React.createElement("div", { style: { marginRight: '7.6875rem' } },
                            React.createElement("span", null, "\u6700\u540E\u56DE\u590D")))),
                topTopics,
                React.createElement("div", null, topics)),
            React.createElement(Pager_1.Pager, { page: curPage, totalPage: this.state.totalPage, url: bestTopicsUrl }));
    };
    return ListBestContent;
}(RouteComponent));
exports.ListBestContent = ListBestContent;
var ListSaveContent = /** @class */ (function (_super) {
    __extends(ListSaveContent, _super);
    function ListSaveContent(props, context) {
        var _this = _super.call(this, props, context) || this;
        _this.state = { items: [], totalPage: 0, tags: [] };
        return _this;
    }
    ListSaveContent.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var page, data, totalPage, tags;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        page = this.match.params.page;
                        if (!page)
                            page = 1;
                        return [4 /*yield*/, Utility.getSaveTopics(page, this.match.params.boardId)];
                    case 1:
                        data = _a.sent();
                        totalPage = data.totalPage;
                        return [4 /*yield*/, Utility.getBoardTag(this.match.params.boardId)];
                    case 2:
                        tags = _a.sent();
                        this.setState({ items: data.boardtopics, totalPage: totalPage, tags: tags });
                        return [2 /*return*/];
                }
            });
        });
    };
    ListSaveContent.prototype.convertTopicToElement = function (item) {
        return React.createElement(TopicTitleAndContent, { key: item.id, title: item.title, userName: item.userName, id: item.id, userId: item.userId, lastPostTime: item.lastPostTime, lastPostUser: item.lastPostUser, likeCount: item.likeCount, dislikeCount: item.dislikeCount, replyCount: item.replyCount, highlightInfo: item.highlightInfo, topState: item.topState, state: item.state, hitCount: item.hitCount });
    };
    ListSaveContent.prototype.componentWillReceiveProps = function (newProps) {
        return __awaiter(this, void 0, void 0, function () {
            var page, p, data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        p = newProps.match.params.page;
                        // 未提供页码，防止出错不进行后续处理
                        if (!p) {
                            page = 1;
                        }
                        else {
                            page = parseInt(p);
                        }
                        return [4 /*yield*/, Utility.getSaveTopics(page, newProps.match.params.boardId)];
                    case 1:
                        data = _a.sent();
                        this.setState({ items: data.boardtopics });
                        return [2 /*return*/];
                }
            });
        });
    };
    ListSaveContent.prototype.render = function () {
        var curPage = this.match.params.page ? parseInt(this.match.params.page) : 1;
        var topTopics = null;
        if (parseInt(this.match.params.page) === 1 || !this.match.params.page) {
            topTopics = React.createElement("div", null,
                React.createElement(ListTopContent, { boardId: this.match.params.boardId }));
        }
        console.log(this.state.items);
        var topics = this.state.items.map(this.convertTopicToElement);
        var bestTopicsUrl = "/list/" + this.match.params.boardId + "/best/";
        var saveTopicsUrl = "/list/" + this.match.params.boardId + "/save/";
        var normalTopicsUrl = "/list/" + this.match.params.boardId + "/";
        return React.createElement("div", { className: "listContent " },
            React.createElement(ListTagAndPager, { page: curPage, totalPage: this.state.totalPage, boardid: this.match.params.boardId, url: saveTopicsUrl, tag: this.state.tags }),
            React.createElement("div", { className: "column", style: { width: "100%", border: "#79b8ca solid thin" } },
                React.createElement("div", { className: "row", style: { justifyContent: 'space-between', backgroundColor: "#79b8ca", color: "#fff" } },
                    React.createElement("div", { className: "row", style: { alignItems: 'center' } },
                        React.createElement("div", { className: "listContentTag" },
                            React.createElement(react_router_dom_1.Link, { to: normalTopicsUrl }, "\u5168\u90E8")),
                        React.createElement("div", { className: "listContentTag" }, "\u7CBE\u534E"),
                        React.createElement("div", { className: "listContentTag" },
                            React.createElement(react_router_dom_1.Link, { to: saveTopicsUrl }, "\u4FDD\u5B58"))),
                    React.createElement("div", { className: "row", style: { alignItems: 'center' } },
                        React.createElement("div", { style: { marginRight: '19.3rem' } },
                            React.createElement("span", null, "\u4F5C\u8005")),
                        React.createElement("div", { style: { marginRight: '7.6875rem' } },
                            React.createElement("span", null, "\u6700\u540E\u56DE\u590D")))),
                topTopics,
                React.createElement("div", null, topics)),
            React.createElement(Pager_1.Pager, { page: curPage, totalPage: this.state.totalPage, url: saveTopicsUrl }));
    };
    return ListSaveContent;
}(RouteComponent));
exports.ListSaveContent = ListSaveContent;
var TopicTitleAndContent = /** @class */ (function (_super) {
    __extends(TopicTitleAndContent, _super);
    function TopicTitleAndContent(props, context) {
        var _this = _super.call(this, props, context) || this;
        _this.state = ({ pager: [] });
        return _this;
    }
    TopicTitleAndContent.prototype.componentWillMount = function () {
        var count = this.props.replyCount + 1;
        var totalPage = count % 10 === 0 ? count / 10 : (count - count % 10) / 10 + 1;
        var pager = Utility.getListPager(totalPage);
        var titleId = "#title" + this.props.id;
        this.setState({ pager: pager });
    };
    TopicTitleAndContent.prototype.componentDidMount = function () {
        var titleId = "#title" + this.props.id;
        if (this.props.highlightInfo != null) {
            if (this.props.highlightInfo.isBold == true) {
                $(titleId).css("font-weight", "bold");
            }
            if (this.props.highlightInfo.isItalic == true) {
                $(titleId).css("font-style", "italic");
            }
            if (this.props.highlightInfo.color != null) {
                $(titleId).css("color", this.props.highlightInfo.color);
            }
        }
    };
    TopicTitleAndContent.prototype.generateListPager = function (item) {
        var url = "/topic/" + this.props.id + "/" + item;
        if (item != -1) {
            return React.createElement("div", { style: { marginRight: "0.3rem" } },
                React.createElement(react_router_dom_1.Link, { style: { color: "#79b8ca" }, to: url }, item));
        }
        else {
            return React.createElement("div", { style: { marginRight: "0.3rem" } }, "...");
        }
    };
    TopicTitleAndContent.prototype.render = function () {
        var colorId;
        if (this.props.topState === 0) {
            colorId = "changeColor";
        }
        else {
            colorId = "changeTopColor";
        }
        var topicId = "topic" + this.props.id;
        var url = "/topic/" + this.props.id;
        var titleId = "title" + this.props.id;
        var icon;
        //热
        if (this.props.replyCount > 100 && this.props.topState === 0) {
            icon = React.createElement("div", { style: {
                    width: "1rem", justifyContent: "flex-start"
                } },
                React.createElement("i", { style: { color: "red" }, className: "fa fa-envelope-open fa-lg" }));
        }
        //自己
        var curName;
        if (Utility.getLocalStorage("userInfo"))
            curName = Utility.getLocalStorage("userInfo").name;
        else
            curName = "";
        if (curName === this.props.userName) {
            icon = React.createElement("div", { style: {
                    width: "1rem", justifyContent: "flex-start"
                } },
                React.createElement("i", { style: { color: "#FFC90E" }, className: "fa fa-envelope fa-lg" }));
        }
        //锁
        //1是锁贴
        if (this.props.state === 1) {
            icon = React.createElement("div", { style: {
                    width: "1rem", justifyContent: "flex-start"
                } },
                React.createElement("i", { style: { color: "#B0B0B0" }, className: "fa fa-lock fa-lg" }));
        }
        var hitCount = this.props.hitCount;
        if (this.props.hitCount > 100000) {
            hitCount = ((this.props.hitCount - this.props.hitCount % 10000) / 10000).toString() + '万';
        }
        else if (this.props.hitCount > 10000) {
            hitCount = (this.props.hitCount / 10000).toFixed(1).toString() + '万';
        }
        //置顶
        if (this.props.topState === 0) {
            icon = React.createElement("div", { style: {
                    width: "1rem", justifyContent: "flex-start"
                } },
                React.createElement("i", { style: { color: "#B0B0B0" }, className: "fa fa-envelope fa-lg" }));
        }
        else if (this.props.topState === 2) {
            icon = React.createElement("div", { style: {
                    width: "1rem", justifyContent: "flex-start"
                } },
                React.createElement("i", { style: { color: "orange" }, className: "fa fa-chevron-circle-up fa-lg" }));
        }
        else if (this.props.topState === 4) {
            icon = React.createElement("div", { style: {
                    width: "1rem", justifyContent: "flex-start"
                } },
                React.createElement("i", { style: { color: "red" }, className: "fa fa-arrow-circle-up fa-lg" }));
        }
        var c = '#000';
        var b = 'normal';
        var i = 'normal';
        if (this.props.highlightInfo) {
            if (this.props.highlightInfo.isBold)
                b = 'bold';
            if (this.props.highlightInfo.isItalic)
                i = 'italic';
            if (this.props.highlightInfo.color)
                c = this.props.highlightInfo.color;
        }
        return React.createElement("div", { id: colorId },
            React.createElement(react_router_dom_1.Link, { to: url },
                React.createElement("div", { className: "rofw topicInList", id: topicId },
                    React.createElement("div", { className: "listTitleAndPager" },
                        React.createElement("div", { className: "row listTitleAndIcon" },
                            icon,
                            React.createElement("div", { className: "listTitle", id: titleId, style: { marginLeft: '1rem', color: c, fontWeight: b, fontStyle: i } },
                                " ",
                                React.createElement("span", null, this.props.title))),
                        React.createElement("div", { style: { display: "flex", fontSize: "0.75rem", marginLeft: "1rem", width: "auto" } }, this.state.pager.map(this.generateListPager.bind(this)))),
                    React.createElement("div", { className: "row", style: { width: "30rem", flexDirection: 'row', alignItems: 'flex-end', justifyContent: "space-between", fontSize: "0.75rem", marginBottom: "-4px" } },
                        React.createElement("div", { style: { width: "7.5rem", textAlign: "left" } },
                            " ",
                            React.createElement("span", null, this.props.userName || '匿名')),
                        React.createElement("div", { className: "row", style: { width: "10rem" } },
                            React.createElement("div", { id: "liked", style: { display: "flex", width: "2rem" } },
                                React.createElement("i", { className: "fa fa-thumbs-o-up fa-lg" }),
                                React.createElement("span", { className: "timeProp tagSize" }, this.props.likeCount)),
                            React.createElement("div", { id: "disliked", style: { display: "flex", width: "4.5rem" } },
                                React.createElement("i", { className: "fa fa-eye fa-lg" }),
                                React.createElement("span", { className: "timeProp tagSize" }, hitCount)),
                            React.createElement("div", { id: "commentsAmount", style: { display: "flex", width: "3.5rem" } },
                                React.createElement("i", { className: "fa fa-commenting-o fa-lg" }),
                                React.createElement("span", { className: "timeProp tagSize" }, this.props.replyCount))),
                        React.createElement("div", { className: "lastReply" },
                            React.createElement("span", null,
                                this.props.lastPostUser,
                                "/",
                                moment(this.props.lastPostTime).format('YY-MM-DD HH:mm')))))));
    };
    return TopicTitleAndContent;
}(React.Component));
exports.TopicTitleAndContent = TopicTitleAndContent;


/***/ }),
/* 158 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
var ImageTagHandler = /** @class */ (function (_super) {
    __extends(ImageTagHandler, _super);
    function ImageTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(ImageTagHandler.prototype, "supportedTagNames", {
        get: function () { return 'img'; },
        enumerable: true,
        configurable: true
    });
    ;
    ImageTagHandler.prototype.execCore = function (content, tagData, context) {
        var imageUri = content;
        var title = tagData.value('title');
        var isShowedValue = parseInt(tagData.value('img'));
        // 不允许显示图像
        if (!context.options.allowImage) {
            return React.createElement(Image, { imageUri: imageUri, title: title, isShowed: false });
        }
        //[img=1]默认不显示图片，[img]或[img=0]默认显示图片
        // HTML5 模式下，使用 figure 表示插图
        if (context.options.compatibility === Ubb.UbbCompatiblityMode.EnforceMorden) {
            if (isShowedValue === 1) {
                return React.createElement(Image, { imageUri: imageUri, title: title, isShowed: false });
            }
            else {
                return React.createElement("figure", null,
                    React.createElement(Image, { imageUri: imageUri, title: title, isShowed: true }),
                    React.createElement("figcaption", null, title));
            }
        }
        else {
            if (isShowedValue === 1) {
                return React.createElement(Image, { imageUri: imageUri, title: title, isShowed: false });
            }
            else {
                return React.createElement(Image, { imageUri: imageUri, title: title, isShowed: true });
            }
        }
    };
    return ImageTagHandler;
}(Ubb.TextTagHandler));
exports.ImageTagHandler = ImageTagHandler;
/*
 *图片组件
 *用于控制图片是否默认显示
 */
var Image = /** @class */ (function (_super) {
    __extends(Image, _super);
    function Image(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            isShowed: _this.props.isShowed
        };
        _this.toggleIsShowed = _this.toggleIsShowed.bind(_this); //别再忘了bind了！！  “bind一般放在构造过程中” ——樱桃
        return _this;
    }
    Image.prototype.toggleIsShowed = function () {
        console.log("显示图片！");
        this.setState(function (prevState) { return ({
            isShowed: !prevState.isShowed //setState() 可以接收一个函数，这个函数接受两个参数，第一个参数prevState表示上一个状态值，第二个参数props表示当前的props
        }); });
    };
    Image.prototype.render = function () {
        if (this.state.isShowed) {
            return React.createElement("img", { style: { maxWidth: '100%' }, src: this.props.imageUri, alt: this.props.title });
        }
        else {
            return React.createElement("div", { className: "hiddenImage", onClick: this.toggleIsShowed }, "\u70B9\u51FB\u67E5\u770B\u56FE\u7247");
        }
    };
    return Image;
}(React.Component));
exports.Image = Image;


/***/ }),
/* 159 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var $ = __webpack_require__(35);
var Constant_1 = __webpack_require__(83);
var UbbEditor_1 = __webpack_require__(85);
var Topic_TopicManagement_1 = __webpack_require__(422);
var SendTopic = /** @class */ (function (_super) {
    __extends(SendTopic, _super);
    function SendTopic(props) {
        var _this = _super.call(this, props) || this;
        _this.sendUbbTopic = _this.sendUbbTopic.bind(_this);
        _this.changeEditor = _this.changeEditor.bind(_this);
        _this.showManagement = _this.showManagement.bind(_this);
        _this.onChange = _this.onChange.bind(_this);
        _this.close = _this.close.bind(_this);
        _this.update = _this.update.bind(_this);
        _this.state = ({ content: '', mode: 0, masters: [] });
        return _this;
    }
    SendTopic.prototype.update = function (value) {
        this.setState({ content: value });
    };
    SendTopic.prototype.onChange = function () {
        this.props.onChange();
    };
    SendTopic.prototype.showManagement = function () {
        var UIId = "#manage" + this.props.topicid;
        $(UIId).css("display", "");
    };
    SendTopic.prototype.close = function () {
        var UIId = "#manage" + this.props.topicid;
        $(UIId).css("display", "none");
    };
    SendTopic.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var fileUrl, time, url, masters, str, str;
            return __generator(this, function (_a) {
                console.log("in sendtopic did mount");
                if (Utility.isMaster(this.props.boardInfo.masters)) {
                    $("#topicManagementBTN").css("display", "");
                    $("#showIPBTN").css("display", "");
                }
                if (this.state.mode === 1) {
                    fileUrl = Utility.getApiUrl + "/file";
                    editormd.emoji.path = '/images/emoji/';
                    Constant_1.Constants.testEditor = editormd("test-editormd", {
                        width: "100%",
                        height: 640,
                        path: "/scripts/lib/editor.md/lib/",
                        saveHTMLToTextarea: false,
                        imageUpload: false,
                        imageFormats: ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
                        imageUploadURL: fileUrl,
                        emoji: true,
                        toolbarIcons: function () {
                            return [
                                "undo", "redo", "|", "emoji",
                                "bold", "del", "italic", "quote", "|",
                                "h1", "h2", "h3", "h4", "|",
                                "list-ul", "list-ol", "hr", "|",
                                "link", "image", "testIcon", "code", "table", "html-entities",
                            ];
                        },
                        toolbarIconsClass: {
                            testIcon: "fa-upload" // 指定一个FontAawsome的图标类
                        },
                        // 自定义工具栏按钮的事件处理
                        toolbarHandlers: {
                            testIcon: function (cm, icon, cursor, selection) {
                                var str = $("#upload-files").click();
                            }
                        },
                    });
                }
                time = moment(this.props.content.replyTime).format('YYYY-MM-DD HH:mm:ss');
                url = "/topic/" + this.props.topicid + "#" + this.props.content.floor;
                masters = this.props.boardInfo.masters;
                if (this.props.content) {
                    if (this.state.mode === 1) {
                        str = ">**\u4EE5\u4E0B\u662F\u5F15\u7528" + this.props.content.floor + "\u697C\uFF1A\u7528\u6237" + this.props.content.userName + "\u5728" + time + "\u7684\u53D1\u8A00\uFF1A**\n" + this.props.content.content + "\n";
                        Constant_1.Constants.testEditor.appendMarkdown(str);
                        this.setState({ masters: masters });
                    }
                    else {
                        str = "\n[quote][b]\u4EE5\u4E0B\u662F\u5F15\u7528" + this.props.content.floor + "\u697C\uFF1A\u7528\u6237" + this.props.content.userName + "\u5728" + time + "\u7684\u53D1\u8A00\uFF1A\n[color=blue][url=" + url + "]>>\u67E5\u770B\u539F\u5E16<<[/url][/color][/b]" + this.props.content.content + "[/quote]\n";
                        this.setState({ masters: masters, content: str });
                    }
                }
                return [2 /*return*/];
            });
        });
    };
    SendTopic.prototype.componentWillReceiveProps = function (newProps) {
        console.log("in sendtopic recieve newprops");
        console.log(newProps);
        if (Utility.isMaster(newProps.boardInfo.masters))
            $("#topicManagementBTN").css("display", "");
        if (Utility.getLocalStorage("userInfo")) {
            var myId = Utility.getLocalStorage("userInfo").id;
            if ((Utility.getLocalStorage("userInfo").privilege === '全站贵宾' && myId === newProps.userId)) {
                $("#topicManagementBTN").css("display", "");
                $("#showIPBTN").css("display", "");
            }
        }
        var time = moment(newProps.content.replyTime).format('YYYY-MM-DD HH:mm:ss');
        if (newProps.content.userName) {
            if (this.state.mode === 1) {
                var str = ">**\u4EE5\u4E0B\u662F\u5F15\u7528" + newProps.content.floor + "\u697C\uFF1A\u7528\u6237" + newProps.content.userName + "\u5728" + time + "\u7684\u53D1\u8A00\uFF1A**\n" + newProps.content.content;
                Constant_1.Constants.testEditor.appendMarkdown(str);
            }
            else {
                var url = "/topic/" + this.props.topicid + "#" + newProps.content.floor;
                var str = "[quote][b]\u4EE5\u4E0B\u662F\u5F15\u7528" + newProps.content.floor + "\u697C\uFF1A\u7528\u6237" + newProps.content.userName + "\u5728" + time + "\u7684\u53D1\u8A00\uFF1A[color=blue][url=" + url + "]>>\u67E5\u770B\u539F\u5E16<<[/url][/color][/b]\n" + newProps.content.content + "[/quote]";
                this.setState({ content: str });
            }
        }
    };
    SendTopic.prototype.componentDidUpdate = function () {
        return __awaiter(this, void 0, void 0, function () {
            var fileUrl;
            return __generator(this, function (_a) {
                /*const response1 = await fetch("/config.production.json");
                let data;
                if (response1.status !== 404) {
                    const data1 = await response1.json();
                    const response2 = await fetch("/config.json");
                    const data2 = await response2.json();
                    data = { ...data2, ...data1 };
                } else {
                    const response2 = await fetch("/config.json");
                    data = await response2.json();
                }
                const fileUrl = data.imageUploadUrl;*/
                //  editormd.emoji.path = '/images/emoji/';
                if (this.state.mode === 1) {
                    fileUrl = Utility.getApiUrl + "/file";
                    editormd.emoji.path = '/images/emoji/';
                    Constant_1.Constants.testEditor = editormd("test-editormd", {
                        width: "100%",
                        height: 640,
                        path: "/scripts/lib/editor.md/lib/",
                        saveHTMLToTextarea: false,
                        imageUpload: false,
                        imageFormats: ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
                        imageUploadURL: fileUrl,
                        emoji: true,
                        toolbarIcons: function () {
                            return [
                                "undo", "redo", "|", "emoji",
                                "bold", "del", "italic", "quote", "|",
                                "h1", "h2", "h3", "h4", "|",
                                "list-ul", "list-ol", "hr", "|",
                                "link", "image", "testIcon", "code", "table", "html-entities",
                            ];
                        },
                        toolbarIconsClass: {
                            testIcon: "fa-upload" // 指定一个FontAawsome的图标类
                        },
                        // 自定义工具栏按钮的事件处理
                        toolbarHandlers: {
                            testIcon: function (cm, icon, cursor, selection) {
                                var str = $("#upload-files").click();
                            }
                        },
                    });
                }
                return [2 /*return*/];
            });
        });
    };
    SendTopic.prototype.sendUbbTopic = function () {
        return __awaiter(this, void 0, void 0, function () {
            var url, bodyInfo, body, token, headers, mes;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        url = "/topic/" + this.props.topicid + "/post";
                        bodyInfo = {
                            content: this.state.content,
                            contentType: 0,
                            title: ""
                        };
                        body = JSON.stringify(bodyInfo);
                        token = Utility.getLocalStorage("accessToken");
                        headers = new Headers();
                        headers.append("Authorization", token);
                        headers.append("Content-Type", 'application/json');
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                method: 'POST',
                                headers: headers,
                                body: body
                            })];
                    case 1:
                        mes = _a.sent();
                        if (mes.status === 403) {
                            alert("你太快啦 请慢一点~");
                        }
                        this.setState({ content: "" });
                        console.log("clear content");
                        console.log(this.state.content);
                        this.props.onChange();
                        return [2 /*return*/];
                }
            });
        });
    };
    SendTopic.prototype.sendMdTopic = function () {
        return __awaiter(this, void 0, void 0, function () {
            var url, c, content, contentJson, token, myHeaders, mes, fileUrl, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 2, , 3]);
                        url = "/topic/" + this.props.topicid + "/post";
                        c = Constant_1.Constants.testEditor.getMarkdown();
                        Constant_1.Constants.testEditor.setMarkdown("");
                        console.log("content=" + c);
                        content = {
                            content: c,
                            contentType: 1,
                            title: ""
                        };
                        contentJson = JSON.stringify(content);
                        token = Utility.getLocalStorage("accessToken");
                        myHeaders = new Headers();
                        myHeaders.append("Authorization", token);
                        myHeaders.append("Content-Type", 'application/json');
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                method: 'POST',
                                headers: myHeaders,
                                body: contentJson
                            })];
                    case 1:
                        mes = _a.sent();
                        if (mes.status === 403) {
                            alert("你太快啦 请慢一点~");
                        }
                        if (mes.status === 402) {
                            alert("请输入内容");
                        }
                        this.props.onChange();
                        fileUrl = Utility.getApiUrl + "/file";
                        editormd.emoji.path = '/images/emoji/';
                        Constant_1.Constants.testEditor = editormd("test-editormd", {
                            width: "100%",
                            height: 640,
                            path: "/scripts/lib/editor.md/lib/",
                            saveHTMLToTextarea: false,
                            imageUpload: false,
                            imageFormats: ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
                            imageUploadURL: fileUrl,
                            emoji: true,
                            toolbarIcons: function () {
                                return [
                                    "undo", "redo", "|", "emoji",
                                    "bold", "del", "italic", "quote", "|",
                                    "h1", "h2", "h3", "h4", "|",
                                    "list-ul", "list-ol", "hr", "|",
                                    "link", "image", "testIcon", "code", "table", "html-entities",
                                ];
                            },
                            toolbarIconsClass: {
                                testIcon: "fa-upload" // 指定一个FontAawsome的图标类
                            },
                            // 自定义工具栏按钮的事件处理
                            toolbarHandlers: {
                                testIcon: function (cm, icon, cursor, selection) {
                                    var str = $("#upload-files").click();
                                }
                            },
                        });
                        this.setState({ content: "" });
                        return [3 /*break*/, 3];
                    case 2:
                        e_1 = _a.sent();
                        console.log("Error");
                        console.log(e_1);
                        return [3 /*break*/, 3];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    SendTopic.prototype.showIP = function () {
        $(".findIP").css("display", "flex");
    };
    SendTopic.prototype.changeEditor = function () {
        if (this.state.mode === 0) {
            this.setState({ mode: 1 });
        }
        else {
            this.setState({ mode: 0 });
        }
    };
    SendTopic.prototype.getInitialState = function () {
        return { value: '' };
    };
    SendTopic.prototype.handleChange = function (event) {
        this.setState({ content: event.target.value });
    };
    SendTopic.prototype.render = function () {
        var mode, editor;
        if (this.state.mode === 0) {
            mode = '使用UBB模式编辑';
            editor = React.createElement("div", null,
                React.createElement(UbbEditor_1.UbbEditor, { update: this.update, value: this.state.content }),
                React.createElement("div", { className: "row", style: { justifyContent: "center", marginBottom: "1.25rem " } },
                    React.createElement("div", { id: "post-topic-button", onClick: this.sendUbbTopic, className: "button blue", style: { marginTop: "1.25rem", width: "6rem", height: "2rem", lineHeight: "2rem", letterSpacing: "0.3125rem" } }, "\u56DE\u590D")));
        }
        else {
            mode = '使用Markdown编辑';
            editor = React.createElement("div", { id: "sendTopic" },
                React.createElement("form", null,
                    React.createElement("input", { type: 'file', id: 'upload-files', style: { display: 'none ' }, onChange: Utility.uploadEvent }),
                    React.createElement("div", { id: "test-editormd", className: "editormd" },
                        React.createElement("textarea", { className: "editormd-markdown-textarea", name: "test-editormd-markdown-doc" }))),
                React.createElement("div", { className: "row", style: { justifyContent: "center", marginBottom: "1.25rem " } },
                    React.createElement("div", { id: "post-topic-button", onClick: this.sendMdTopic.bind(this), className: "button blue", style: { marginTop: "1.25rem", width: "4.5rem", letterSpacing: "0.3125rem" } }, "\u56DE\u590D")));
        }
        var uploadInfo = null;
        if (this.state.mode === 1) {
        }
        return React.createElement("div", { id: "sendTopicInfo", style: { width: "100%", display: "flex", flexDirection: "column" } },
            React.createElement("div", { className: "row", style: { justifyContent: this.state.mode === 1 ? "space-between" : "flex-end" } },
                React.createElement("div", { id: "post-topic-changeMode", onClick: this.changeEditor.bind(this), className: "button blue", style: { width: "20rem", height: "2rem", lineHeight: "2rem", letterSpacing: "0.3125rem" } }, this.state.mode === 1 ? "切换到Ubb编辑器" : "切换到Markdown编辑器")),
            editor,
            React.createElement("button", { id: "topicManagementBTN", style: { display: "none", width: "5rem" }, onClick: this.showManagement }, "\u7BA1\u7406"),
            React.createElement("button", { id: "showIPBTN", style: { display: "none", width: "5rem" }, onClick: this.showIP }, "\u67E5\u770BIP"),
            React.createElement(Topic_TopicManagement_1.TopicManagement, { topicId: this.props.topicid, update: this.onChange, boardId: this.props.boardId, updateTime: Date.now() }));
    };
    return SendTopic;
}(React.Component));
exports.SendTopic = SendTopic;


/***/ }),
/* 160 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var Topic_Award_1 = __webpack_require__(161);
var Topic_PostManagement_1 = __webpack_require__(162);
var Topic_Judge_1 = __webpack_require__(163);
var Topic_Replier_1 = __webpack_require__(164);
var Topic_ReplyContent_1 = __webpack_require__(165);
var Topic_ReplierSignature_1 = __webpack_require__(166);
var PostTopic = /** @class */ (function (_super) {
    __extends(PostTopic, _super);
    function PostTopic(props, content) {
        var _this = _super.call(this, props, content) || this;
        _this.update = _this.update.bind(_this);
        _this.quote = _this.quote.bind(_this);
        _this.state = {
            topicMessage: {
                title: "加载中...", time: "", content: "", signature: "", postId: 0, likeInfo: { likeCount: 0, dislikeCount: 0, likeState: 0 }, awardInfo: []
            }, masters: []
        };
        return _this;
    }
    PostTopic.prototype.quote = function (content, userName, replyTime, floor) {
        this.props.quote(content, userName, replyTime, floor);
    };
    PostTopic.prototype.update = function () {
        return __awaiter(this, void 0, void 0, function () {
            var topicMessage;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.getTopic(this.props.topicid)];
                    case 1:
                        topicMessage = _a.sent();
                        this.setState({ topicMessage: topicMessage });
                        return [2 /*return*/];
                }
            });
        });
    };
    PostTopic.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var topicMessage, masters;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.getTopic(this.props.topicid)];
                    case 1:
                        topicMessage = _a.sent();
                        masters = this.props.boardInfo.boardMasters;
                        this.setState({ topicMessage: topicMessage, masters: masters });
                        return [2 /*return*/];
                }
            });
        });
    };
    PostTopic.prototype.render = function () {
        var privilege = null;
        if (Utility.getLocalStorage("userInfo"))
            privilege = Utility.getLocalStorage("userInfo").privilege;
        if (this.state.topicMessage.userInfo != null) {
            return React.createElement("div", { className: "reply", id: '1' },
                React.createElement(Topic_Replier_1.Replier, { key: this.state.topicMessage.postId, userInfo: this.state.topicMessage.userInfo, isAnonymous: this.state.topicMessage.isAnonymous, topicid: this.state.topicMessage.topicId, floor: this.state.topicMessage.floor, isDeleted: this.state.topicMessage.isDeleted, traceMode: false, isHot: false }),
                React.createElement("div", { className: "column", style: { justifyContent: "space-between", width: "80%" } },
                    React.createElement(Topic_Judge_1.Judge, { userId: this.state.topicMessage.userId, postId: this.state.topicMessage.postId, update: this.update, topicId: this.state.topicMessage.topicId }),
                    React.createElement(Topic_PostManagement_1.PostManagement, { topicId: this.state.topicMessage.topicId, postId: this.state.topicMessage.postId, userId: this.state.topicMessage.userId, update: this.update, privilege: privilege }),
                    React.createElement(Topic_ReplyContent_1.ReplyContent, { key: this.state.topicMessage.content, postid: this.state.topicMessage.postId, content: this.state.topicMessage.content, contentType: this.state.topicMessage.contentType }),
                    React.createElement(Topic_Award_1.Award, { postId: this.state.topicMessage.postId, updateTime: Date.now(), awardInfo: this.state.topicMessage.awardInfo }),
                    React.createElement(Topic_ReplierSignature_1.ReplierSignature, { signature: this.state.topicMessage.userInfo.signatureCode, topicid: this.state.topicMessage.topicId, userId: this.state.topicMessage.userId, masters: this.state.masters, postid: this.state.topicMessage.postId, likeInfo: this.state.topicMessage.likeInfo, userInfo: this.state.topicMessage.userInfo, content: this.state.topicMessage.content, floor: this.state.topicMessage.floor, quote: this.quote, traceMode: this.props.isTrace, replyTime: this.state.topicMessage.time, lastUpdateAuthor: this.state.topicMessage.lastUpdateAuthor, lastUpdateTime: this.state.topicMessage.lastUpdateTime, boardId: this.props.boardInfo.id, isLZ: this.state.topicMessage.isLZ })),
                React.createElement("div", { className: "reply-floor" }, "1"));
        }
        else {
            return null;
        }
    };
    return PostTopic;
}(React.Component));
exports.PostTopic = PostTopic;
/* <div className="postRoot" id="1">
                    <div className="essay">
                        <AuthorMessage authorId={this.state.topicMessage.topicMessage.userId} authorName={this.state.topicMessage.topicMessage.userName} authorImgUrl={this.state.topicMessage.topicMessage.userImgUrl} isAnonymous={this.state.topicMessage.topicMessage.isAnonymous} isFollowing={this.state.topicMessage.topicMessage.isFollowing}
                            fanCount={this.state.topicMessage.topicMessage.fanCount} />
                        <TopicTitle Title={this.state.topicMessage.topicMessage.title} Time={this.state.topicMessage.topicMessage.time} HitCount={this.props.topicInfo.hitCount} />
                        <div id="ads"><img width="100%" src={this.props.imgUrl}></img></div>
                    </div>
                    <PostManagement topicId={this.props.topicid} postId={this.state.topicMessage.topicMessage.postId} userId={this.props.userId} update={this.update} privilege={this.state.topicMessage.topicMessage.privilege} />
                    <Judge userId={this.state.topicMessage.topicMessage.userId} postId={this.state.topicMessage.topicMessage.postId} update={this.update} topicId={this.props.topicid} />
                    <TopicContent postid={this.state.topicMessage.topicMessage.postId} content={this.state.topicMessage.topicMessage.content} signature={this.state.topicMessage.topicMessage.signature} topicid={this.props.topicid} userId={this.state.topicMessage.topicMessage.userId}
                        contentType={this.state.topicMessage.topicMessage.contentType}
                        masters={this.props.boardInfo.masters}
                        update={this.update} quote={this.quote} replyTime={this.state.topicMessage.topicMessage.time} userName={this.state.topicMessage.topicMessage.userName} likeInfo={this.state.topicMessage.topicMessage.likeInfo} />
                    <div className="column" style={{ width: "100%" }}>

                        <Award postId={this.state.topicMessage.topicMessage.postId} updateTime={Date.now()} awardInfo={this.state.topicMessage.topicMessage.awardInfo} />
                    </div>
                </div>;*/ 


/***/ }),
/* 161 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var Topic_AwardInfo_1 = __webpack_require__(424);
var Award = /** @class */ (function (_super) {
    __extends(Award, _super);
    function Award(props, content) {
        var _this = _super.call(this, props, content) || this;
        _this.showAll = _this.showAll.bind(_this);
        _this.hideAll = _this.hideAll.bind(_this);
        _this.state = { info: [], shortInfo: [], count: 0, showAll: false };
        return _this;
    }
    Award.prototype.hideAll = function () {
        this.setState({ showAll: false });
    };
    Award.prototype.showAll = function () {
        this.setState({ showAll: true });
    };
    Award.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var shortInfo, award, i, _a, _b, info, awardInfo;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        shortInfo = [];
                        award = this.props.awardInfo;
                        if (!(award.length > 10)) return [3 /*break*/, 4];
                        i = 0;
                        _c.label = 1;
                    case 1:
                        if (!(i < 10)) return [3 /*break*/, 4];
                        _a = shortInfo;
                        _b = i;
                        return [4 /*yield*/, this.generateAwardInfo(award[i])];
                    case 2:
                        _a[_b] = _c.sent();
                        _c.label = 3;
                    case 3:
                        i++;
                        return [3 /*break*/, 1];
                    case 4:
                        info = award.map(this.generateAwardInfo.bind(this));
                        return [4 /*yield*/, Promise.all(info)];
                    case 5:
                        awardInfo = _c.sent();
                        this.setState({ info: awardInfo, shortInfo: shortInfo, count: award.length });
                        return [2 /*return*/];
                }
            });
        });
    };
    Award.prototype.componentWillReceiveProps = function (newProps) {
        return __awaiter(this, void 0, void 0, function () {
            var shortInfo, award, i, _a, _b, info, awardInfo;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        shortInfo = [];
                        award = newProps.awardInfo;
                        if (!(award.length > 10)) return [3 /*break*/, 4];
                        i = 0;
                        _c.label = 1;
                    case 1:
                        if (!(i < 10)) return [3 /*break*/, 4];
                        _a = shortInfo;
                        _b = i;
                        return [4 /*yield*/, this.generateAwardInfo(award[i])];
                    case 2:
                        _a[_b] = _c.sent();
                        _c.label = 3;
                    case 3:
                        i++;
                        return [3 /*break*/, 1];
                    case 4:
                        info = award.map(this.generateAwardInfo.bind(this));
                        return [4 /*yield*/, Promise.all(info)];
                    case 5:
                        awardInfo = _c.sent();
                        this.setState({ info: awardInfo, shortInfo: shortInfo, count: award.length });
                        return [2 /*return*/];
                }
            });
        });
    };
    Award.prototype.generateAwardInfo = function (item) {
        return __awaiter(this, void 0, void 0, function () {
            var url;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.getPortraitUrl(item.operatorName)];
                    case 1:
                        url = _a.sent();
                        return [2 /*return*/, React.createElement(Topic_AwardInfo_1.AwardInfo, { postId: this.props.postId, userImgUrl: url, content: item.content, reason: item.reason, userName: item.operatorName })];
                }
            });
        });
    };
    Award.prototype.render = function () {
        var awardInfoJQID = "#awardInfo" + this.props.postId;
        var awardInfoID = "awardInfo" + this.props.postId;
        $(awardInfoJQID).css("display", "");
        if (this.state.info.length !== 0) {
            if (this.state.info.length < 10) {
                $(awardInfoJQID).css("display", "");
            }
        }
        else {
            $(awardInfoJQID).css("display", "none");
        }
        var btn = React.createElement("button", { style: { border: "#eaeaea solid thin", cursor: "pointer" }, onClick: this.state.showAll ? this.hideAll : this.showAll }, this.state.showAll ? '收起' : '显示全部');
        return React.createElement("div", { className: "column awardInfo", id: awardInfoID },
            React.createElement("div", { className: "row", style: { width: "25rem", fontSize: "0.8rem", marginBottom: "0.2rem" } },
                React.createElement("div", { style: { marginLeft: "3.1rem" } }, "\u7528\u6237"),
                React.createElement("div", { style: { marginLeft: "4.7rem" } }, "\u64CD\u4F5C"),
                React.createElement("div", { style: { marginLeft: "8.9rem" } }, "\u7406\u7531")),
            this.state.count > 10 ? (this.state.showAll ? this.state.info : this.state.shortInfo) : this.state.info,
            this.state.count > 10 ? btn : null);
    };
    return Award;
}(React.Component));
exports.Award = Award;


/***/ }),
/* 162 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var $ = __webpack_require__(35);
var PostManagement = /** @class */ (function (_super) {
    __extends(PostManagement, _super);
    function PostManagement(props) {
        var _this = _super.call(this, props) || this;
        _this.wealthInput = _this.wealthInput.bind(_this);
        _this.prestigeInput = _this.prestigeInput.bind(_this);
        _this.reasonInput = _this.reasonInput.bind(_this);
        _this.tpdaysInput = _this.tpdaysInput.bind(_this);
        _this.confirm = _this.confirm.bind(_this);
        _this.showAwardUI = _this.showAwardUI.bind(_this);
        _this.showPunishUI = _this.showPunishUI.bind(_this);
        _this.showDeleteUI = _this.showDeleteUI.bind(_this);
        _this.showOtherUI = _this.showOtherUI.bind(_this);
        _this.close = _this.close.bind(_this);
        _this.state = { wealth: 1000, prestige: 0, reason: "", tpdays: 0, UI: "Award", tips: "", fetchState: 'ok' };
        return _this;
    }
    PostManagement.prototype.showAwardUI = function () {
        this.setState({ UI: "Award", wealth: 1000 });
    };
    PostManagement.prototype.showPunishUI = function () {
        this.setState({ UI: "Punish", wealth: 0 });
    };
    PostManagement.prototype.showDeleteUI = function () {
        this.setState({ UI: "Delete" });
    };
    PostManagement.prototype.showOtherUI = function () {
        this.setState({ UI: "Other" });
    };
    PostManagement.prototype.confirm = function () {
        return __awaiter(this, void 0, void 0, function () {
            var status, status1, status2, _a, UIId, UIId, UIId;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        status = 'ok';
                        status1 = 'ok';
                        status2 = 'ok';
                        _a = this.state.UI;
                        switch (_a) {
                            case 'Award': return [3 /*break*/, 1];
                            case 'Punish': return [3 /*break*/, 13];
                            case 'Delete': return [3 /*break*/, 31];
                        }
                        return [3 /*break*/, 34];
                    case 1:
                        if (!$("input[name='reason']:checked").val()) return [3 /*break*/, 11];
                        if (!($("input[name='reason']:checked").val() !== '自定义')) return [3 /*break*/, 6];
                        if (!(this.state.wealth !== 0)) return [3 /*break*/, 3];
                        return [4 /*yield*/, Utility.awardWealth($("input[name='reason']:checked").val(), this.state.wealth, this.props.postId)];
                    case 2:
                        status = _b.sent();
                        _b.label = 3;
                    case 3:
                        if (!(this.state.prestige !== 0)) return [3 /*break*/, 5];
                        return [4 /*yield*/, Utility.addPrestige(this.props.postId, this.state.prestige, $("input[name='reason']:checked").val())];
                    case 4:
                        status1 = _b.sent();
                        _b.label = 5;
                    case 5: return [3 /*break*/, 10];
                    case 6:
                        if (!(this.state.wealth !== 0)) return [3 /*break*/, 8];
                        return [4 /*yield*/, Utility.awardWealth(this.state.reason, this.state.wealth, this.props.postId)];
                    case 7:
                        status = _b.sent();
                        _b.label = 8;
                    case 8:
                        if (!(this.state.prestige !== 0)) return [3 /*break*/, 10];
                        return [4 /*yield*/, Utility.addPrestige(this.props.postId, this.state.prestige, this.state.reason)];
                    case 9:
                        status1 = _b.sent();
                        _b.label = 10;
                    case 10:
                        if (status === 'ok' && status1 === 'ok') {
                            UIId = "#manage" + this.props.postId;
                            $(UIId).css("display", "none");
                            this.props.update();
                        }
                        else {
                            switch (status) {
                                case 'wrong input':
                                    this.setState({ tips: "输入错误" });
                                case 'unauthorized':
                                    this.setState({ tips: "你没有权限进行此操作" });
                            }
                            switch (status1) {
                                case 'wrong input':
                                    this.setState({ tips: "输入错误" });
                                case 'unauthorized':
                                    this.setState({ tips: "你没有权限进行此操作" });
                            }
                        }
                        return [3 /*break*/, 12];
                    case 11:
                        this.setState({ tips: "请输入原因！" });
                        _b.label = 12;
                    case 12: return [3 /*break*/, 34];
                    case 13:
                        if (!$("input[name='reason']:checked").val()) return [3 /*break*/, 29];
                        if (!($("input[name='reason']:checked").val() !== '自定义')) return [3 /*break*/, 20];
                        if (!(this.state.wealth !== 0)) return [3 /*break*/, 15];
                        return [4 /*yield*/, Utility.deductWealth($("input[name='reason']:checked").val(), this.state.wealth, this.props.postId)];
                    case 14:
                        status = _b.sent();
                        _b.label = 15;
                    case 15:
                        if (!(this.state.prestige !== 0)) return [3 /*break*/, 17];
                        return [4 /*yield*/, Utility.deductPrestige(this.props.postId, this.state.prestige, $("input[name='reason']:checked").val())];
                    case 16:
                        status1 = _b.sent();
                        _b.label = 17;
                    case 17:
                        if (!(this.state.tpdays !== 0)) return [3 /*break*/, 19];
                        return [4 /*yield*/, Utility.stopBoardPost(this.props.postId, $("input[name='reason']:checked").val(), this.state.tpdays)];
                    case 18:
                        status2 = _b.sent();
                        _b.label = 19;
                    case 19: return [3 /*break*/, 28];
                    case 20:
                        if (!this.state.reason) return [3 /*break*/, 27];
                        if (!(this.state.wealth !== 0)) return [3 /*break*/, 22];
                        return [4 /*yield*/, Utility.deductWealth(this.state.reason, this.state.wealth, this.props.postId)];
                    case 21:
                        status = _b.sent();
                        _b.label = 22;
                    case 22:
                        if (!(this.state.prestige !== 0)) return [3 /*break*/, 24];
                        return [4 /*yield*/, Utility.deductPrestige(this.props.postId, this.state.prestige, this.state.reason)];
                    case 23:
                        status1 = _b.sent();
                        _b.label = 24;
                    case 24:
                        if (!(this.state.tpdays !== 0)) return [3 /*break*/, 26];
                        return [4 /*yield*/, Utility.stopBoardPost(this.props.postId, this.state.reason, this.state.tpdays)];
                    case 25:
                        status2 = _b.sent();
                        _b.label = 26;
                    case 26: return [3 /*break*/, 28];
                    case 27:
                        this.setState({ tips: "请输入原因！" });
                        _b.label = 28;
                    case 28:
                        console.log("status");
                        console.log(status);
                        console.log(status1);
                        console.log(status2);
                        if (status === 'ok' && status1 === 'ok' && status2 === 'ok') {
                            UIId = "#manage" + this.props.postId;
                            $(UIId).css("display", "none");
                            this.props.update();
                        }
                        else {
                            switch (status) {
                                case 'wrong input':
                                    this.setState({ tips: "输入错误" });
                                case 'unauthorized':
                                    this.setState({ tips: "你没有权限进行此操作" });
                            }
                            switch (status1) {
                                case 'wrong input':
                                    this.setState({ tips: "输入错误" });
                                case 'unauthorized':
                                    this.setState({ tips: "你没有权限进行此操作" });
                            }
                        }
                        return [3 /*break*/, 30];
                    case 29:
                        this.setState({ tips: "请选一个选项！" });
                        _b.label = 30;
                    case 30: return [3 /*break*/, 34];
                    case 31:
                        if (!this.state.reason) return [3 /*break*/, 33];
                        return [4 /*yield*/, Utility.deletePost(this.props.topicId, this.props.postId, this.state.reason)];
                    case 32:
                        status = _b.sent();
                        if (status === 'ok') {
                            UIId = "#manage" + this.props.postId;
                            $(UIId).css("display", "none");
                            this.props.update();
                        }
                        else {
                            switch (status) {
                                case 'wrong input':
                                    this.setState({ tips: "输入错误" });
                                case 'unauthorized':
                                    this.setState({ tips: "你没有权限进行此操作" });
                            }
                        }
                        return [3 /*break*/, 34];
                    case 33:
                        this.setState({ tips: "请输入原因！" });
                        _b.label = 34;
                    case 34: return [2 /*return*/];
                }
            });
        });
    };
    PostManagement.prototype.wealthInput = function (e) {
        this.setState({ wealth: e.target.value });
    };
    PostManagement.prototype.prestigeInput = function (e) {
        this.setState({ prestige: e.target.value });
    };
    PostManagement.prototype.reasonInput = function (e) {
        this.setState({ reason: e.target.value });
    };
    PostManagement.prototype.tpdaysInput = function (e) {
        this.setState({ tpdays: e.target.value });
    };
    PostManagement.prototype.close = function () {
        var UIId = "#manage" + this.props.postId;
        $(UIId).css("display", "none");
    };
    PostManagement.prototype.componentDidMount = function () {
        var awardOptionId = "manageOptions-award" + this.props.postId;
        var awardOptionJQId = "#manageOptions-award" + this.props.postId;
        var punishOptionId = "manageOptions-punish" + this.props.postId;
        var punishOptionJQId = "#manageOptions-punish" + this.props.postId;
        var deleteOptionId = "manageOptions-delete" + this.props.postId;
        var deleteOptionJQId = "#manageOptions-delete" + this.props.postId;
        var otherOptionId = "manageOptions-other" + this.props.postId;
        var otherOptionJQId = "#manageOptions-other" + this.props.postId;
        if (this.state.UI === "Award") {
            $(awardOptionJQId).css("background-color", "#b9d3ee");
            $(punishOptionJQId).css("background-color", "#fffacd");
            $(deleteOptionJQId).css("background-color", "#fffacd");
            $(otherOptionJQId).css("background-color", "#fffacd");
        }
        if (this.state.UI === "Punish") {
            $(awardOptionJQId).css("background-color", "#fffacd");
            $(punishOptionJQId).css("background-color", "#b9d3ee");
            $(deleteOptionJQId).css("background-color", "#fffacd");
            $(otherOptionJQId).css("background-color", "#fffacd");
        }
        if (this.state.UI === "Delete") {
            $(awardOptionJQId).css("background-color", "#fffacd");
            $(punishOptionJQId).css("background-color", "#fffacd");
            $(deleteOptionJQId).css("background-color", "#b9d3ee");
            $(otherOptionJQId).css("background-color", "#fffacd");
        }
        if (this.props.privilege !== '管理员') {
            $(".managePrestige").css("display", "none");
        }
        else {
            $(".managePrestige").css("display", "");
        }
    };
    PostManagement.prototype.componentDidUpdate = function () {
        if (this.props.privilege !== '管理员') {
            $(".managePrestige").css("display", "none");
        }
        else {
            $(".managePrestige").css("display", "");
        }
    };
    PostManagement.prototype.render = function () {
        var UI;
        var awardUI = React.createElement("div", { className: "column manageInfo", id: "award" },
            React.createElement("div", { className: "row manageOperation" },
                React.createElement("div", { className: "manageObject" }, "\u8D22\u5BCC\u503C"),
                React.createElement("input", { type: "text", value: this.state.wealth, onChange: this.wealthInput })),
            React.createElement("div", { className: "row manageOperation managePrestige" },
                React.createElement("div", { className: "manageObject" }, "\u5A01\u671B"),
                React.createElement("input", { type: "text", value: this.state.prestige, onChange: this.prestigeInput })),
            React.createElement("div", { className: "column manageOperation" },
                React.createElement("div", { className: "row", style: { justifyContent: "flex-start", marginLeft: "3rem", marginTop: "1rem", color: "#fff" } },
                    React.createElement("div", null, "\u539F\u56E0"),
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "reason", value: "好文章" }),
                        React.createElement("div", null, "\u597D\u6587\u7AE0")),
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "reason", value: "有用资源" }),
                        React.createElement("div", null, "\u6709\u7528\u8D44\u6E90")),
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "reason", value: "热心回复" }),
                        React.createElement("div", null, "\u70ED\u5FC3\u56DE\u590D"))),
                React.createElement("div", { className: "row", style: { justifyContent: "flex-start", marginLeft: "3rem", color: "#fff", marginTop: "1rem" } },
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "reason", value: "自定义" }),
                        React.createElement("div", null, "\u81EA\u5B9A\u4E49")),
                    React.createElement("input", { type: "text", value: this.state.reason, onChange: this.reasonInput })),
                React.createElement("div", null, this.state.tips)));
        var punishUI = React.createElement("div", { className: "column manageInfo", id: "punish" },
            React.createElement("div", { className: "row manageOperation" },
                React.createElement("div", { className: "manageObject" }, "\u6263\u8D22\u5BCC\u503C"),
                React.createElement("input", { type: "text", value: this.state.wealth, onChange: this.wealthInput })),
            React.createElement("div", { className: "row manageOperation" },
                React.createElement("div", { className: "manageObject" }, "\u6263\u5A01\u671B"),
                React.createElement("input", { type: "text", value: this.state.prestige, onChange: this.prestigeInput })),
            React.createElement("div", { className: "row manageOperation" },
                React.createElement("div", { className: "manageObject" }, "\u7981\u6B62\u53D1\u8A00(\u5929)"),
                React.createElement("input", { type: "text", value: this.state.tpdays, onChange: this.tpdaysInput })),
            React.createElement("div", { className: "column manageOperation" },
                React.createElement("div", { className: "row", style: {
                        justifyContent: "flex-start", marginLeft: "3rem", color: "#fff", marginTop: "1rem"
                    } },
                    React.createElement("div", null, "\u539F\u56E0"),
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "reason", value: "人身攻击" }),
                        React.createElement("div", null, "\u4EBA\u8EAB\u653B\u51FB")),
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "reason", value: "恶意灌水" }),
                        React.createElement("div", null, "\u6076\u610F\u704C\u6C34")),
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "reason", value: "违反版规" }),
                        React.createElement("div", null, "\u8FDD\u53CD\u7248\u89C4"))),
                React.createElement("div", { className: "row", style: { justifyContent: "flex-start", marginLeft: "3rem", color: "#fff", marginTop: "1rem" } },
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "reason", value: "自定义" }),
                        React.createElement("div", null, "\u81EA\u5B9A\u4E49")),
                    React.createElement("input", { type: "text", value: this.state.reason, onChange: this.reasonInput })),
                React.createElement("div", null, this.state.tips)));
        var deleteUI = React.createElement("div", { className: "column manageInfo", id: "punish" },
            React.createElement("div", { className: "row manageOperation" },
                React.createElement("div", { className: "manageObject" }, "\u5220\u9664\u539F\u56E0"),
                React.createElement("input", { type: "text", value: this.state.reason, onChange: this.reasonInput })));
        var otherUI = React.createElement("div", { className: "column manageInfo", id: "other" });
        var UIId = "manage" + this.props.postId;
        UI = awardUI;
        var awardOptionId = "manageOptions-award" + this.props.postId;
        var awardOptionJQId = "#manageOptions-award" + this.props.postId;
        var punishOptionId = "manageOptions-punish" + this.props.postId;
        var punishOptionJQId = "#manageOptions-punish" + this.props.postId;
        var deleteOptionId = "manageOptions-delete" + this.props.postId;
        var deleteOptionJQId = "#manageOptions-delete" + this.props.postId;
        var otherOptionId = "manageOptions-other" + this.props.postId;
        var otherOptionJQId = "#manageOptions-other" + this.props.postId;
        if (this.state.UI === "Award") {
            UI = awardUI;
            $(awardOptionJQId).css("background-color", "#b9d3ee");
            $(punishOptionJQId).css("background-color", "#fffacd");
            $(deleteOptionJQId).css("background-color", "#fffacd");
            $(otherOptionJQId).css("background-color", "#fffacd");
        }
        if (this.state.UI === "Punish") {
            UI = punishUI;
            $(awardOptionJQId).css("background-color", "#fffacd");
            $(punishOptionJQId).css("background-color", "#b9d3ee");
            $(deleteOptionJQId).css("background-color", "#fffacd");
            $(otherOptionJQId).css("background-color", "#fffacd");
        }
        if (this.state.UI === "Delete") {
            UI = deleteUI;
            $(awardOptionJQId).css("background-color", "#fffacd");
            $(punishOptionJQId).css("background-color", "#fffacd");
            $(deleteOptionJQId).css("background-color", "#b9d3ee");
            $(otherOptionJQId).css("background-color", "#fffacd");
        }
        if (this.state.UI === 'Other') {
            UI = otherUI;
            $(awardOptionJQId).css("background-color", "#fffacd");
            $(punishOptionJQId).css("background-color", "#fffacd");
            $(deleteOptionJQId).css("background-color", "#fffacd");
            $(otherOptionJQId).css("background-color", "#b9d3ee");
        }
        return React.createElement("div", { style: { display: "none" }, id: UIId, className: "postManagement" },
            React.createElement("div", { className: "manageUI" },
                React.createElement("div", { className: "row manageOptions" },
                    React.createElement("div", { className: "manageOptions-icon", id: awardOptionId, onClick: this.showAwardUI, style: { color: "#FF7F00" } }, "\u5956\u52B1"),
                    React.createElement("div", { className: "manageOptions-icon", id: punishOptionId, onClick: this.showPunishUI, style: { color: "red" } }, "\u60E9\u7F5A"),
                    React.createElement("div", { className: "manageOptions-icon", id: deleteOptionId, onClick: this.showDeleteUI }, "\u5220\u9664"),
                    React.createElement("div", { className: "manageOptions-icon", id: otherOptionId, onClick: this.showOtherUI }, "\u5176\u4ED6"))),
            UI,
            React.createElement("div", { className: "row", style: { justifyContent: "space-around" } },
                React.createElement("button", { onClick: this.confirm, className: "confirmManagement" }, "\u786E\u8BA4"),
                React.createElement("button", { onClick: this.close, className: "confirmManagement" }, "\u5173\u95ED")));
    };
    return PostManagement;
}(React.Component));
exports.PostManagement = PostManagement;


/***/ }),
/* 163 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var $ = __webpack_require__(35);
var Judge = /** @class */ (function (_super) {
    __extends(Judge, _super);
    function Judge(props) {
        var _this = _super.call(this, props) || this;
        _this.showMinus1UI = _this.showMinus1UI.bind(_this);
        _this.showPlus1UI = _this.showPlus1UI.bind(_this);
        _this.reasonInput = _this.reasonInput.bind(_this);
        _this.confirm = _this.confirm.bind(_this);
        _this.close = _this.close.bind(_this);
        _this.state = { reason: "", tips: "", UI: "plus1" };
        return _this;
    }
    Judge.prototype.confirm = function () {
        return __awaiter(this, void 0, void 0, function () {
            var status, _a, UIId, UIId;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        status = 'ok';
                        if (!($("input[name='option']:checked").val() === 'plus1' || $("input[name='option']:checked").val() === 'minus1')) return [3 /*break*/, 16];
                        _a = this.state.UI;
                        switch (_a) {
                            case 'plus1': return [3 /*break*/, 1];
                            case 'minus1': return [3 /*break*/, 8];
                        }
                        return [3 /*break*/, 15];
                    case 1:
                        if (!$("input[name='reason']:checked").val()) return [3 /*break*/, 6];
                        UIId = "#judge" + this.props.postId;
                        if (!($("input[name='reason']:checked").val() !== '自定义')) return [3 /*break*/, 3];
                        console.log($("input[name='reason']:checked").val());
                        return [4 /*yield*/, Utility.plus1(this.props.topicId, this.props.postId, $("input[name='reason']:checked").val())];
                    case 2:
                        status = _b.sent();
                        return [3 /*break*/, 5];
                    case 3: return [4 /*yield*/, Utility.plus1(this.props.topicId, this.props.postId, this.state.reason)];
                    case 4:
                        status = _b.sent();
                        _b.label = 5;
                    case 5:
                        if (status === 'ok') {
                            $(UIId).css("display", "none");
                            this.props.update();
                        }
                        else if (status === 'already') {
                            this.setState({ tips: '您今天已经评分过啦~' });
                        }
                        else if (status === 'not allowed') {
                            this.setState({ tips: '您还没有资格评分哦~' });
                        }
                        return [3 /*break*/, 7];
                    case 6:
                        this.setState({ tips: "请输入原因！" });
                        _b.label = 7;
                    case 7: return [3 /*break*/, 15];
                    case 8:
                        if (!$("input[name='reason']:checked").val()) return [3 /*break*/, 13];
                        UIId = "#judge" + this.props.postId;
                        if (!($("input[name='reason']:checked").val() !== '自定义')) return [3 /*break*/, 10];
                        return [4 /*yield*/, Utility.minus1(this.props.topicId, this.props.postId, $("input[name='reason']:checked").val())];
                    case 9:
                        status = _b.sent();
                        return [3 /*break*/, 12];
                    case 10: return [4 /*yield*/, Utility.minus1(this.props.topicId, this.props.postId, this.state.reason)];
                    case 11:
                        status = _b.sent();
                        _b.label = 12;
                    case 12:
                        if (status === 'ok') {
                            $(UIId).css("display", "none");
                            this.props.update();
                        }
                        else if (status === 'already') {
                            this.setState({ tips: '您今天已经评分过啦~' });
                        }
                        else if (status === 'not allowed') {
                            this.setState({ tips: '您还没有资格评分哦~' });
                        }
                        return [3 /*break*/, 14];
                    case 13:
                        this.setState({ tips: "请输入原因！" });
                        _b.label = 14;
                    case 14: return [3 /*break*/, 15];
                    case 15: return [3 /*break*/, 17];
                    case 16:
                        this.setState({ tips: "请选择+1或-1" });
                        _b.label = 17;
                    case 17: return [2 /*return*/];
                }
            });
        });
    };
    Judge.prototype.reasonInput = function (e) {
        this.setState({ reason: e.target.value });
    };
    Judge.prototype.close = function () {
        var UIId = "#judge" + this.props.postId;
        $(UIId).css("display", "none");
    };
    Judge.prototype.showPlus1UI = function () {
        this.setState({ UI: "plus1" });
    };
    Judge.prototype.showMinus1UI = function () {
        this.setState({ UI: "minus1" });
    };
    Judge.prototype.render = function () {
        var plus1UI = React.createElement("div", { className: "column", id: "award" },
            React.createElement("div", { className: "column manageOperation" },
                React.createElement("div", { className: "manageObject" },
                    React.createElement("div", { className: "judgeName" }, "\u539F\u56E0")),
                React.createElement("div", { className: "row", style: { justifyContent: "space-between", marginTop: "2rem", marginLeft: "3rem", marginRight: "3rem", color: "#fff" } },
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "reason", value: "所言极是" }),
                        React.createElement("div", null, "\u6240\u8A00\u6781\u662F")),
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "reason", value: "momo" }),
                        React.createElement("div", null, "momo")),
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "reason", value: "好人一生平安" }),
                        React.createElement("div", null, "\u597D\u4EBA\u4E00\u751F\u5E73\u5B89"))),
                React.createElement("div", { className: "row", style: { marginTop: "1rem", justifyContent: "flex-start", marginLeft: "3rem", marginRight: "3rem", color: "#fff" } },
                    React.createElement("div", { className: "judgeOption", style: { marginRight: '2rem' } },
                        React.createElement("input", { type: "radio", name: "reason", value: "自定义" }),
                        React.createElement("div", null, "\u81EA\u5B9A\u4E49")),
                    React.createElement("input", { type: "text", style: { borderRadius: "1rem", backgroundColor: '#8bc9db', border: 'solid 1.6px #ffffff', color: 'white', paddingLeft: '0.5rem' }, value: this.state.reason, onChange: this.reasonInput }),
                    React.createElement("div", { style: { color: "#fff", fontSize: "0.75rem" } }, this.state.tips))));
        var minus1UI = React.createElement("div", { className: "column", id: "award" },
            React.createElement("div", { className: "column manageOperation" },
                React.createElement("div", { className: "manageObject" },
                    React.createElement("div", { className: "judgeName" }, "\u539F\u56E0")),
                React.createElement("div", { className: "row", style: { marginTop: "2rem", marginLeft: "2rem", marginRight: "2rem", justifyContent: "space-between", color: "#fff" } },
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "reason", value: "太不求是" }),
                        React.createElement("div", null, "\u592A\u4E0D\u6C42\u662F")),
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "reason", value: "呵呵" }),
                        React.createElement("div", null, "\u5475\u5475")),
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "reason", value: "被你暴击" }),
                        React.createElement("div", null, "\u88AB\u4F60\u66B4\u51FB"))),
                React.createElement("div", { className: "row", style: { marginTop: "1rem", justifyContent: "flex-start", marginLeft: "2rem" } },
                    React.createElement("div", { className: "judgeOption", style: { marginRight: '2rem' } },
                        React.createElement("input", { type: "radio", name: "reason", value: "自定义" }),
                        React.createElement("div", null, "\u81EA\u5B9A\u4E49")),
                    React.createElement("input", { type: "text", style: { borderRadius: "1rem", backgroundColor: '#8bc9db', border: 'solid 1.6px #ffffff', color: 'white', paddingLeft: '0.5rem' }, value: this.state.reason, onChange: this.reasonInput }),
                    React.createElement("div", { style: { color: "#fff", fontSize: "0.75rem" } }, this.state.tips))));
        var UI;
        if (this.state.UI === "minus1")
            UI = minus1UI;
        else
            UI = plus1UI;
        var UIId = "judge" + this.props.postId;
        return React.createElement("div", { style: { display: "none" }, id: UIId, className: "judgeManagement" },
            React.createElement("div", { className: "judgeUI column" },
                React.createElement("div", { className: "row judgeName" }, "\u8BC4\u5206"),
                React.createElement("div", { className: "row", style: { fontSize: "0.75rem", color: "#fff" } }, "500\u8D34\u4EE5\u4E0A\u7684\u7528\u6237\u53EF\u4EE5\u8FDB\u884C\u8BC4\u5206\uFF08\u6BCF\u65E5\u4E00\u6B21\uFF09"),
                React.createElement("div", { className: "row judgeOptions", style: { marginTop: "2rem", paddingLeft: "3rem", paddingRight: "3rem", justifyContent: "space-between", boxSizing: 'border-box', color: "#fff" } },
                    React.createElement("div", { className: "judgeOption" },
                        React.createElement("input", { type: "radio", name: "option", value: "plus1", onClick: this.showPlus1UI }),
                        React.createElement("div", null, "\u98CE\u8BC4+1")),
                    React.createElement("div", { className: "judgeOption" },
                        React.createElement("input", { type: "radio", name: "option", value: "minus1", onClick: this.showMinus1UI }),
                        React.createElement("div", null, "\u98CE\u8BC4-1")))),
            UI,
            React.createElement("div", { className: "row", style: { justifyContent: "space-around", padding: '0 3rem' } },
                React.createElement("button", { style: { border: 'none', backgroundColor: '#8bc9db', color: 'white', textDecoration: 'underline', fontSize: '1.25rem' }, onClick: this.confirm, className: "confirmManagement" }, "\u786E\u8BA4"),
                React.createElement("button", { onClick: this.close, style: { border: 'none', backgroundColor: '#8bc9db', color: 'white', textDecoration: 'underline', fontSize: '1.25rem' }, className: "confirmManagement" }, "\u5173\u95ED")));
    };
    return Judge;
}(React.Component));
exports.Judge = Judge;


/***/ }),
/* 164 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var react_router_dom_1 = __webpack_require__(8);
var RouteComponent_1 = __webpack_require__(84);
var Utility = __webpack_require__(2);
var Replier = /** @class */ (function (_super) {
    __extends(Replier, _super);
    function Replier(props, content) {
        var _this = _super.call(this, props, content) || this;
        _this.follow = _this.follow.bind(_this);
        _this.unfollow = _this.unfollow.bind(_this);
        _this.changeTraceMode = _this.changeTraceMode.bind(_this);
        _this.state = {
            traceMode: _this.props.traceMode, buttonInfo: '关注',
            buttonIsDisabled: false,
            isFollowing: false, fanCount: _this.props.userInfo.fanCount,
            photoframe: null
        };
        return _this;
    }
    Replier.prototype.changeTraceMode = function () {
        this.setState({ traceMode: this.state.traceMode === true ? false : true });
    };
    Replier.prototype.unfollow = function () {
        return __awaiter(this, void 0, void 0, function () {
            var token, userId, url, headers, res, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 5, , 6]);
                        this.setState({
                            buttonIsDisabled: true,
                            buttonInfo: '...'
                        });
                        token = Utility.getLocalStorage("accessToken");
                        userId = this.props.userInfo.id;
                        url = "/me/followee/" + userId;
                        headers = new Headers();
                        headers.append('Authorization', token);
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                method: 'DELETE',
                                headers: headers
                            })];
                    case 1:
                        res = _a.sent();
                        if (!(res.status === 200)) return [3 /*break*/, 3];
                        return [4 /*yield*/, Utility.updateUserInfo(this.props.userInfo.id)];
                    case 2:
                        _a.sent();
                        this.setState({
                            buttonIsDisabled: false,
                            buttonInfo: '关注',
                            isFollowing: false,
                            fanCount: this.props.userInfo.fanCount
                        });
                        return [3 /*break*/, 4];
                    case 3: throw {};
                    case 4: return [3 /*break*/, 6];
                    case 5:
                        e_1 = _a.sent();
                        alert("网络错误");
                        return [3 /*break*/, 6];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    Replier.prototype.follow = function () {
        return __awaiter(this, void 0, void 0, function () {
            var token, userId, url, headers, res, e_2;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 5, , 6]);
                        this.setState({
                            buttonIsDisabled: true,
                            buttonInfo: '...'
                        });
                        token = Utility.getLocalStorage("accessToken");
                        userId = this.props.userInfo.id;
                        url = "/me/followee/" + userId;
                        headers = new Headers();
                        headers.append('Authorization', token);
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                method: 'PUT',
                                headers: headers
                            })];
                    case 1:
                        res = _a.sent();
                        if (!(res.status === 200)) return [3 /*break*/, 3];
                        return [4 /*yield*/, Utility.updateUserInfo(this.props.userInfo.id)];
                    case 2:
                        _a.sent();
                        this.setState({
                            buttonIsDisabled: false,
                            buttonInfo: '取关',
                            isFollowing: true,
                            fanCount: this.props.userInfo.fanCount + 1
                        });
                        return [3 /*break*/, 4];
                    case 3: throw {};
                    case 4: return [3 /*break*/, 6];
                    case 5:
                        e_2 = _a.sent();
                        alert("网络错误");
                        return [3 /*break*/, 6];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    Replier.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var displayTitle, phototframe;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        displayTitle = this.props.userInfo.displayTitle;
                        return [4 /*yield*/, this.getPhotoFrame(displayTitle)];
                    case 1:
                        phototframe = _a.sent();
                        this.setState({
                            photoframe: phototframe
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    /**
     * 根据displayTitle返回头像框的HTML
     * @param displayTitle
     */
    Replier.prototype.getPhotoFrame = function (displayTitle) {
        return __awaiter(this, void 0, void 0, function () {
            var response, data, imageUrl, style;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!displayTitle) return [3 /*break*/, 3];
                        return [4 /*yield*/, fetch('/static/portrait.json')];
                    case 1:
                        response = _a.sent();
                        return [4 /*yield*/, response.json()];
                    case 2:
                        data = _a.sent();
                        console.log(data);
                        imageUrl = void 0;
                        style = data.普通;
                        switch (displayTitle) {
                            case "吉祥物":
                                style = data.吉祥物;
                                imageUrl = "/images/相框/吉祥物.png";
                                break;
                            case "版主":
                                imageUrl = "/images/相框/_01版主.png";
                                break;
                            case "编辑部部长":
                                imageUrl = "/images/相框/_02编辑部.png";
                                break;
                            case "编辑部成员":
                                imageUrl = "/images/相框/_02编辑部.png";
                                break;
                            case "技术组组长":
                                imageUrl = "/images/相框/_03技术组.png";
                                break;
                            case "技术组成员":
                                imageUrl = "/images/相框/_03技术组.png";
                                break;
                            case "论坛贵宾":
                                imageUrl = "/images/相框/_04贵宾.png";
                                break;
                            case "运营策划部部长":
                                imageUrl = "/images/相框/_05策划部.png";
                                break;
                            case "运营策划部成员":
                                imageUrl = "/images/相框/_05策划部.png";
                                break;
                            case "影音部部长":
                                imageUrl = "/images/相框/_06影音部.png";
                                break;
                            case "影音部成员":
                                imageUrl = "/images/相框/_06影音部.png";
                                break;
                            case "站务组组长":
                                imageUrl = "/images/相框/_07站务组.png";
                                break;
                            case "站务组成员":
                                imageUrl = "/images/相框/_07站务组.png";
                                break;
                            case "体育事业部部长":
                                imageUrl = "/images/相框/_08体育部.png";
                                break;
                            case "体育事业部成员":
                                imageUrl = "/images/相框/_08体育部.png";
                                break;
                            case "办公室主任":
                                imageUrl = "/images/相框/_09办公室.png";
                                break;
                            case "办公室成员":
                                imageUrl = "/images/相框/_09办公室.png";
                                break;
                            case "认证用户":
                                imageUrl = "/images/相框/_10认证用户.png";
                                break;
                            default: imageUrl = "/images/相框/_00普通.png";
                        }
                        return [2 /*return*/, React.createElement("img", { src: imageUrl, style: style })];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    Replier.prototype.render = function () {
        var url = "/user/id/" + this.props.userInfo.id;
        var realUrl = encodeURI(url);
        var email = "/message/message?id=" + this.props.userInfo.id;
        //用户头像
        var urlHtml = React.createElement("a", { href: realUrl, style: { display: "block", maxHeight: "7.5rem" } },
            React.createElement("img", { className: "userPortrait", src: this.props.userInfo.portraitUrl }));
        if (this.props.isAnonymous == true) {
            urlHtml = React.createElement("div", { style: { display: "block", maxHeight: "7.5rem" } },
                React.createElement("img", { className: "userPortrait", src: this.props.userInfo.portraitUrl }));
        }
        var curUserPostUrl = "/topic/" + this.props.topicid + "/user/id/" + this.props.userInfo.id;
        var normalUrl = "/topic/" + this.props.topicid;
        var topicNumber = '帖数';
        if (!this.props.userInfo.id) {
            topicNumber = '';
        }
        var userName = React.createElement(react_router_dom_1.Link, { style: { color: "#fff" }, to: url }, this.props.userInfo.name);
        if (this.props.userInfo.privilege == "匿名" || this.props.userInfo.privilege === "匿名用户") {
            userName = React.createElement("div", { style: { color: "white" } }, this.props.userInfo.name);
        }
        var emailButton;
        if (this.props.isAnonymous)
            emailButton = null;
        else
            emailButton = React.createElement("button", { className: "operation" },
                React.createElement(react_router_dom_1.Link, { to: email }, "\u79C1\u4FE1"));
        var traceButton;
        if (this.props.isAnonymous)
            traceButton = null;
        else
            traceButton = React.createElement(react_router_dom_1.Link, { className: "operation", to: this.state.traceMode === true ? normalUrl : curUserPostUrl, onClick: this.changeTraceMode }, this.state.traceMode === true ? "返回" : "只看此用户");
        var hotInfo = React.createElement("div", { style: { color: "red", marginLeft: "1rem" } },
            React.createElement("span", null, "\u6700\u70ED\u56DE\u590D"),
            React.createElement("span", null, "(\u7B2C"),
            React.createElement("span", null, this.props.floor),
            React.createElement("span", null, "\u697C)"));
        var normalInfo = React.createElement("div", { style: { marginLeft: "0.625rem" } },
            React.createElement("span", null, "\u7B2C"),
            React.createElement("span", { style: { color: "red" } }, this.props.floor),
            React.createElement("span", null, "\u697C"));
        var btn = null;
        if (Utility.getLocalStorage("userInfo")) {
            if (Utility.getLocalStorage("userInfo").name !== this.props.userInfo.name && !this.props.isAnonymous) {
                btn = React.createElement("div", { className: "column", style: { width: "40%", alignItems: "flex-start", justifyContent: "flex-end", marginBottom: "2rem", marginLeft: "-1rem" } },
                    React.createElement("button", { className: "replierBtn", id: this.state.isFollowing ? '' : 'follow', onClick: this.state.isFollowing ? this.unfollow : this.follow, disabled: this.state.buttonIsDisabled, style: { border: "none", marginBottom: "0.6rem" } }, this.state.buttonInfo),
                    React.createElement(react_router_dom_1.Link, { to: email },
                        React.createElement("button", { className: "replierBtn" }, "\u79C1\u4FE1")));
            }
        }
        var lastLogOn;
        var curTime = new Date().getTime();
        var lastTime = new Date(this.props.userInfo.lastLogOnTime).getTime();
        var days = parseInt((Math.abs(lastTime - curTime) / 1000 / 60 / 60 / 24).toString());
        var hours = parseInt((Math.abs(lastTime - curTime) / 1000 / 60 / 60).toString());
        if (days > 365)
            lastLogOn = '一年前';
        else if (days > 30)
            lastLogOn = '一月前';
        else if (days > 7)
            lastLogOn = '一周前';
        else if (days > 1)
            lastLogOn = days + "\u5929\u524D";
        else if (hours > 1)
            lastLogOn = hours + "\u5C0F\u65F6\u524D";
        else
            lastLogOn = '一小时内';
        return React.createElement("div", { className: "userMessage" },
            React.createElement("div", { className: "userGender" }, this.props.userInfo.gender === 0 ? React.createElement("i", { className: "fa fa-venus", style: { color: "#fff" } }) : React.createElement("i", { className: "fa fa-mars", style: { color: "#fff" } })),
            React.createElement("div", { style: { width: "100%", justifyContent: "center", display: "flex", position: "relative" } },
                React.createElement("div", { style: { zIndex: 100 } }, urlHtml),
                React.createElement("div", { className: "photoFrame" }, this.state.photoframe)),
            React.createElement("div", { className: "rpyClr", style: { width: "100%", marginTop: "1rem", paddingLeft: "3rem" } }, userName),
            React.createElement("div", { className: "row", style: { width: "100%" } },
                React.createElement("div", { className: "column", style: { width: "60%", alignItems: "flex-start", paddingLeft: "1.5rem" } },
                    React.createElement("div", { className: "userMessageOpt" },
                        "\u5E16\u6570 ",
                        this.props.userInfo.postCount),
                    React.createElement("div", { className: "userMessageOpt" },
                        "\u7C89\u4E1D ",
                        this.state.fanCount),
                    React.createElement("div", { className: "userMessageOpt" },
                        "\u5A01\u671B ",
                        this.props.userInfo.prestige),
                    React.createElement("div", { className: "userMessageOpt" },
                        "\u98CE\u8BC4 ",
                        this.props.userInfo.popularity),
                    React.createElement("div", { className: "userMessageOpt" },
                        "\u6700\u540E\u767B\u5F55 ",
                        lastLogOn)),
                btn));
    };
    return Replier;
}(RouteComponent_1.RouteComponent));
exports.Replier = Replier;
/*return <div className="replyRoot">
            <div className="row" style={{ width: "100%", display: "flex", marginBottom: "0.625rem" }}>

                <div className="row mouse-userDetails" style={{ height: "15.625rem" }} >
                    <div className="authorImg" style={{ height: "6rem" }}>{urlHtml}</div>
                    <div className="userDetails" style={{ display: "none", position: "absolute" }}>
                        {userDetails}
                    </div>

                </div>
                <div className="column" id="rpymes" >
                    <div className="row" id="replierMes">
                        {this.props.isHot ? hotInfo : normalInfo}
                        <div className="rpyClr" style={{ marginLeft: "0.625rem" }}>{userName}</div>
                        <div id="topicsNumber" style={{ marginLeft: "0.625rem", display: "flex", flexWrap: "nowrap", wordBreak: "keepAll", marginRight: "0.75rem" }}>{topicNumber}&nbsp;<span style={{ color: "red" }}>{this.props.sendTopicNumber}</span> </div>
                    </div>
                    <div className="row" style={{ alignItems: "center", display: "flex", flexWrap: "nowrap" }}>
                        <div id="clockimg" style={{ marginLeft: "0.375rem" }}><i className="fa fa-clock-o fa-lg fa-fw" style={{ fontSize:"1rem" }}></i></div>
                        <div><span className="timeProp">{moment(this.props.replyTime).format('YYYY-MM-DD HH:mm:ss')}</span></div>
                        <div className="reputation">风评值：{this.props.popularity}
                            </div>
                    </div>
                </div>
                <div style={{ height: "6rem", marginRight:"2rem" }}>
                    <div id="operation"  >
                        <button className="operation" onClick={this.quote}>引用</button>
                        <button className="operation"><Link to="">编辑</Link></button>
                        {emailButton}
                        {traceButton}
                    </div>
                   </div>
            </div></div>;*/ 


/***/ }),
/* 165 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var UbbContainer_1 = __webpack_require__(15);
var ReplyContent = /** @class */ (function (_super) {
    __extends(ReplyContent, _super);
    function ReplyContent(props, content) {
        var _this = _super.call(this, props, content) || this;
        _this.state = {
            postId: _this.props.postid
        };
        return _this;
    }
    ReplyContent.prototype.componentDidUpdate = function () {
        var divid = "doc-content" + this.props.postid;
        editormd.markdownToHTML(divid, {
            htmlDecode: "style,script,iframe",
            emoji: true,
            taskList: true,
            tex: true,
            flowChart: true,
            sequenceDiagram: true,
            codeFold: true,
        });
    };
    ReplyContent.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var divid;
            return __generator(this, function (_a) {
                divid = "doc-content" + this.props.postid;
                editormd.markdownToHTML(divid, {
                    htmlDecode: "style,script,iframe",
                    emoji: true,
                    taskList: true,
                    tex: true,
                    flowChart: true,
                    sequenceDiagram: true,
                    codeFold: true,
                });
                this.setState({});
                return [2 /*return*/];
            });
        });
    };
    ReplyContent.prototype.render = function () {
        var divid = "doc-content" + this.props.postid;
        var ubbMode = React.createElement(UbbContainer_1.UbbContainer, { code: this.props.content });
        var mdMode = React.createElement("div", { id: divid },
            React.createElement("textarea", { name: "editormd-markdown-doc", style: { display: 'none' } }, this.props.content));
        var content;
        //ubb      
        content = ubbMode;
        //md
        if (this.props.contentType === 1) {
            content = mdMode;
        }
        return React.createElement("div", { className: "reply-content" },
            React.createElement("div", { className: "substance" }, content));
    };
    return ReplyContent;
}(React.Component));
exports.ReplyContent = ReplyContent;


/***/ }),
/* 166 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var UbbContainer_1 = __webpack_require__(15);
var react_router_dom_1 = __webpack_require__(8);
var ReplierSignature = /** @class */ (function (_super) {
    __extends(ReplierSignature, _super);
    function ReplierSignature(props, content) {
        var _this = _super.call(this, props, content) || this;
        _this.showManageUI = _this.showManageUI.bind(_this);
        _this.showJudgeUI = _this.showJudgeUI.bind(_this);
        _this.quote = _this.quote.bind(_this);
        _this.edit = _this.edit.bind(_this);
        _this.state = {
            likeNumber: _this.props.likeInfo.likeCount,
            dislikeNumber: _this.props.likeInfo.dislikeCount,
            likeState: _this.props.likeInfo.likeState,
        };
        return _this;
    }
    ReplierSignature.prototype.quote = function () {
        this.props.quote(this.props.content, this.props.userInfo.name, this.props.replyTime, this.props.floor);
    };
    ReplierSignature.prototype.showManageUI = function () {
        var UIId = "#manage" + this.props.postid;
        $(UIId).css("display", "");
    };
    ReplierSignature.prototype.showJudgeUI = function () {
        var UIId = "#judge" + this.props.postid;
        $(UIId).css("display", "");
    };
    ReplierSignature.prototype.edit = function () {
    };
    ReplierSignature.prototype.isAllowedtoEdit = function (userPrivilege) {
        if (Utility.getLocalStorage("userInfo")) {
            var myPrivilege = Utility.getLocalStorage("userInfo").privilege;
            if (myPrivilege === '管理员')
                return true;
            if (userPrivilege === '管理员')
                return false;
            if (Utility.isMaster(this.props.masters))
                return true;
        }
        else {
            return false;
        }
    };
    ReplierSignature.prototype.like = function () {
        return __awaiter(this, void 0, void 0, function () {
            var idLike, idDislike, data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        idLike = "#like" + this.props.postid;
                        idDislike = "#dislike" + this.props.postid;
                        if (!(this.state.likeState === 1)) return [3 /*break*/, 2];
                        return [4 /*yield*/, Utility.like(this.props.topicid, this.props.postid, this.context.router)];
                    case 1:
                        _a.sent();
                        $(idLike).css("color", "#8dc9db");
                        return [3 /*break*/, 7];
                    case 2:
                        if (!(this.state.likeState === 2)) return [3 /*break*/, 5];
                        return [4 /*yield*/, Utility.dislike(this.props.topicid, this.props.postid, this.context.router)];
                    case 3:
                        _a.sent();
                        return [4 /*yield*/, Utility.like(this.props.topicid, this.props.postid, this.context.router)];
                    case 4:
                        _a.sent();
                        $(idLike).css("color", "red");
                        $(idDislike).css("color", "#8dc9db");
                        return [3 /*break*/, 7];
                    case 5: return [4 /*yield*/, Utility.like(this.props.topicid, this.props.postid, this.context.router)];
                    case 6:
                        _a.sent();
                        $(idLike).css("color", "red");
                        _a.label = 7;
                    case 7: return [4 /*yield*/, Utility.refreshLikeState(this.props.topicid, this.props.postid)];
                    case 8:
                        data = _a.sent();
                        this.setState({ likeNumber: data.likeCount, dislikeNumber: data.dislikeCount, likeState: data.likeState });
                        return [2 /*return*/];
                }
            });
        });
    };
    ReplierSignature.prototype.dislike = function () {
        return __awaiter(this, void 0, void 0, function () {
            var idLike, idDislike, data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        idLike = "#like" + this.props.postid;
                        idDislike = "#dislike" + this.props.postid;
                        if (!(this.state.likeState === 2)) return [3 /*break*/, 2];
                        return [4 /*yield*/, Utility.dislike(this.props.topicid, this.props.postid, this.context.router)];
                    case 1:
                        _a.sent();
                        $(idDislike).css("color", "#8dc9db");
                        return [3 /*break*/, 7];
                    case 2:
                        if (!(this.state.likeState === 1)) return [3 /*break*/, 5];
                        return [4 /*yield*/, Utility.like(this.props.topicid, this.props.postid, this.context.router)];
                    case 3:
                        _a.sent();
                        return [4 /*yield*/, Utility.dislike(this.props.topicid, this.props.postid, this.context.router)];
                    case 4:
                        _a.sent();
                        $(idLike).css("color", "#8dc9db");
                        $(idDislike).css("color", "red");
                        return [3 /*break*/, 7];
                    case 5: return [4 /*yield*/, Utility.dislike(this.props.topicid, this.props.postid, this.context.router)];
                    case 6:
                        _a.sent();
                        $(idDislike).css("color", "red");
                        _a.label = 7;
                    case 7: return [4 /*yield*/, Utility.refreshLikeState(this.props.topicid, this.props.postid)];
                    case 8:
                        data = _a.sent();
                        this.setState({ likeNumber: data.likeCount, dislikeNumber: data.dislikeCount, likeState: data.likeState });
                        return [2 /*return*/];
                }
            });
        });
    };
    ReplierSignature.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var idLike, idDislike, manageIcon, manageId;
            return __generator(this, function (_a) {
                idLike = "#like" + this.props.postid;
                idDislike = "#dislike" + this.props.postid;
                //const data = await Utility.refreshLikeState(this.props.topicid, this.props.postid, this.context.router);
                if (this.state.likeState === 1) {
                    $(idLike).css("color", "red");
                }
                else if (this.state.likeState === 2) {
                    $(idDislike).css("color", "red");
                }
                manageIcon = "icon" + this.props.postid;
                manageId = "#icon" + this.props.postid;
                if (Utility.isMaster(this.props.masters) || (this.props.boardId == 144 && this.props.isLZ))
                    $(manageId).css("display", "");
                return [2 /*return*/];
            });
        });
    };
    ReplierSignature.prototype.render = function () {
        var manageIcon = "icon" + this.props.postid;
        var idLike = "like" + this.props.postid;
        var idDislike = "dislike" + this.props.postid;
        var signature = React.createElement("div", { className: "signature", style: { borderTop: "#8dc9db solid thin", width: "100%" } },
            React.createElement(UbbContainer_1.UbbContainer, { code: this.props.signature }));
        if (!this.props.signature) {
            signature = null;
        }
        var editIcon = null;
        var editUrl = "/editor/edit/" + this.props.postid;
        if (Utility.getLocalStorage("userInfo"))
            if (this.isAllowedtoEdit(this.props.userInfo.privilege) || this.props.userInfo.name === Utility.getLocalStorage("userInfo").name) {
                editIcon = React.createElement(react_router_dom_1.Link, { to: editUrl },
                    React.createElement("div", { className: "operation1", onClick: this.edit }, "   \u7F16\u8F91"));
            }
        var lastUpdate = null;
        if (this.props.lastUpdateAuthor && this.props.lastUpdateTime) {
            var time = moment(this.props.lastUpdateTime).format('YYYY-MM-DD HH:mm:ss');
            var name_1 = this.props.userInfo.name === this.props.lastUpdateAuthor ? '作者' : this.props.lastUpdateAuthor;
            var str = "\u8BE5\u5E16\u6700\u540E\u7531 " + name_1 + " \u5728 " + time + " \u7F16\u8F91";
            lastUpdate = str;
        }
        var traceUrl = "/topic/" + this.props.topicid + "/user/" + this.props.userId;
        var returnUrl = "/topic/" + this.props.topicid;
        var traceIcon = null;
        if (this.props.boardId != 182) {
            traceIcon = React.createElement("div", { className: "operation1" },
                React.createElement(react_router_dom_1.Link, { style: { color: "#79b8ca" }, to: this.props.traceMode ? returnUrl : traceUrl }, this.props.traceMode ? "返回" : "追踪"));
        }
        return React.createElement("div", { className: "column", style: { marginTop: "1rem" } },
            React.createElement("div", { className: "comment1" },
                React.createElement("div", { style: { width: "40rem", marginLeft: "2rem", fontSize: "0.8rem" } },
                    React.createElement("span", null,
                        "\u53D1\u8868\u4E8E ",
                        moment(this.props.replyTime).format('YYYY-MM-DD HH:mm:ss')),
                    React.createElement("span", { style: { marginLeft: "1rem" } }, lastUpdate)),
                React.createElement("div", { className: "row", style: { alignItems: "center" } },
                    React.createElement("div", { id: idLike, className: "upup", style: { marginRight: "0.7rem" }, onClick: this.like.bind(this) },
                        React.createElement("i", { title: "赞", className: "fa fa-thumbs-o-up fa-lg" }),
                        React.createElement("span", { className: "commentProp" },
                            " ",
                            this.state.likeNumber)),
                    React.createElement("div", { id: idDislike, className: "downdown", onClick: this.dislike.bind(this) },
                        React.createElement("i", { title: "踩", className: "fa fa-thumbs-o-down fa-lg" }),
                        React.createElement("span", { className: "commentProp" },
                            " ",
                            this.state.dislikeNumber)),
                    React.createElement("div", { id: "commentlike" },
                        React.createElement("div", { className: "operation1", onClick: this.showJudgeUI }, "   \u8BC4\u5206"),
                        React.createElement("div", { className: "operation1", onClick: this.quote }, "   \u5F15\u7528"),
                        traceIcon,
                        editIcon,
                        React.createElement("div", { className: "operation1", id: manageIcon, style: { display: "none", cursor: "pointer" }, onClick: this.showManageUI }, "\u7BA1\u7406")))),
            React.createElement("div", { className: "row", style: { width: "100%" } },
                "  ",
                signature));
    };
    return ReplierSignature;
}(React.Component));
exports.ReplierSignature = ReplierSignature;


/***/ }),
/* 167 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var Topic_Replier_1 = __webpack_require__(164);
var Topic_ReplyContent_1 = __webpack_require__(165);
var Topic_Award_1 = __webpack_require__(161);
var Topic_PostManagement_1 = __webpack_require__(162);
var Topic_Judge_1 = __webpack_require__(163);
var Topic_ReplierSignature_1 = __webpack_require__(166);
var Reply = /** @class */ (function (_super) {
    __extends(Reply, _super);
    function Reply(props, content) {
        var _this = _super.call(this, props, content) || this;
        _this.update = _this.update.bind(_this);
        _this.quote = _this.quote.bind(_this);
        _this.state = {
            inWaiting: true,
            contents: [],
            masters: [],
        };
        return _this;
    }
    Reply.prototype.quote = function (content, userName, replyTime, floor) {
        this.props.quote(content, userName, replyTime, floor);
    };
    Reply.prototype.update = function () {
        return __awaiter(this, void 0, void 0, function () {
            var page, realContents, data, userName;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        page = this.props.page || 1;
                        if (!this.props.isHot) return [3 /*break*/, 2];
                        return [4 /*yield*/, Utility.getHotReplyContent(this.props.topicId)];
                    case 1:
                        realContents = _a.sent();
                        return [3 /*break*/, 7];
                    case 2:
                        if (!this.props.isTrace) return [3 /*break*/, 5];
                        return [4 /*yield*/, Utility.getUserInfo(this.props.userId)];
                    case 3:
                        data = _a.sent();
                        userName = data.name;
                        return [4 /*yield*/, Utility.getCurUserTopicContent(this.props.topicId, page, userName, this.props.userId)];
                    case 4:
                        realContents = _a.sent();
                        return [3 /*break*/, 7];
                    case 5: return [4 /*yield*/, Utility.getTopicContent(this.props.topicId, page, this.props.topicInfo.replyCount)];
                    case 6:
                        realContents = _a.sent();
                        _a.label = 7;
                    case 7:
                        this.setState({ contents: realContents });
                        return [2 /*return*/];
                }
            });
        });
    };
    Reply.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var page, realContents, data, userName, masters;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.setState({ inWaiting: true });
                        page = this.props.page || 1;
                        if (!this.props.isHot) return [3 /*break*/, 2];
                        return [4 /*yield*/, Utility.getHotReplyContent(this.props.topicId)];
                    case 1:
                        realContents = _a.sent();
                        if (!realContents)
                            this.setState({ inWaiting: false, contents: [] });
                        return [3 /*break*/, 7];
                    case 2:
                        if (!this.props.isTrace) return [3 /*break*/, 5];
                        return [4 /*yield*/, Utility.getUserInfo(this.props.userId)];
                    case 3:
                        data = _a.sent();
                        userName = data.name;
                        return [4 /*yield*/, Utility.getCurUserTopicContent(this.props.topicId, page, userName, this.props.userId)];
                    case 4:
                        realContents = _a.sent();
                        return [3 /*break*/, 7];
                    case 5: return [4 /*yield*/, Utility.getTopicContent(this.props.topicId, page, this.props.topicInfo.replyCount)];
                    case 6:
                        realContents = _a.sent();
                        _a.label = 7;
                    case 7:
                        masters = this.props.boardInfo.boardMasters;
                        this.setState({ inWaiting: false, contents: realContents, masters: masters });
                        return [2 /*return*/];
                }
            });
        });
    };
    Reply.prototype.componentWillReceiveProps = function (newProps) {
        return __awaiter(this, void 0, void 0, function () {
            var page, realContents, data, userName;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.setState({ inWaiting: true });
                        page = newProps.page || 1;
                        if (!newProps.isHot) return [3 /*break*/, 2];
                        return [4 /*yield*/, Utility.getHotReplyContent(newProps.topicId)];
                    case 1:
                        realContents = _a.sent();
                        if (!realContents)
                            this.setState({ inWaiting: false, contents: [] });
                        return [3 /*break*/, 7];
                    case 2:
                        if (!newProps.isTrace) return [3 /*break*/, 5];
                        return [4 /*yield*/, Utility.getUserInfo(newProps.userId)];
                    case 3:
                        data = _a.sent();
                        userName = data.name;
                        return [4 /*yield*/, Utility.getCurUserTopicContent(newProps.topicId, page, userName, newProps.userId)];
                    case 4:
                        realContents = _a.sent();
                        return [3 /*break*/, 7];
                    case 5: return [4 /*yield*/, Utility.getTopicContent(newProps.topicId, page, newProps.topicInfo.replyCount)];
                    case 6:
                        realContents = _a.sent();
                        _a.label = 7;
                    case 7:
                        this.setState({ inWaiting: false, contents: realContents });
                        return [2 /*return*/];
                }
            });
        });
    };
    Reply.prototype.generateContents = function (item) {
        var privilege = null;
        if (Utility.getLocalStorage("userInfo"))
            privilege = Utility.getLocalStorage("userInfo").privilege;
        var id = item.floor % 10;
        return React.createElement("div", { className: "reply", id: id.toString() },
            React.createElement(Topic_Replier_1.Replier, { key: item.postId, userInfo: item.userInfo, isAnonymous: item.isAnonymous, topicid: item.topicId, floor: item.floor, isDeleted: item.isDeleted, traceMode: this.props.isTrace ? true : false, isHot: this.props.isHot ? true : false }),
            React.createElement("div", { className: "column", style: { justifyContent: "space-between", width: "80%", position: "relative" } },
                React.createElement(Topic_Judge_1.Judge, { userId: item.userId, postId: item.postId, update: this.update, topicId: item.topicId }),
                React.createElement(Topic_PostManagement_1.PostManagement, { topicId: item.topicId, postId: item.postId, userId: item.userId, update: this.update, privilege: privilege }),
                React.createElement(Topic_ReplyContent_1.ReplyContent, { key: item.content, postid: item.postId, content: item.content, contentType: item.contentType }),
                React.createElement(Topic_Award_1.Award, { postId: item.postId, updateTime: Date.now(), awardInfo: item.awardInfo }),
                React.createElement(Topic_ReplierSignature_1.ReplierSignature, { floor: item.floor, userInfo: item.userInfo, replyTime: item.time, content: item.content, quote: this.quote, signature: item.userInfo.signatureCode, topicid: item.topicId, userId: item.userId, masters: this.state.masters, postid: item.postId, likeInfo: item.likeInfo, lastUpdateAuthor: item.lastUpdateAuthor, lastUpdateTime: item.lastUpdateTime, boardId: this.props.boardInfo.id, isLZ: item.isLZ, traceMode: this.props.isTrace ? true : false })),
            React.createElement("div", { className: "reply-floor" }, item.floor));
    };
    Reply.prototype.componentDidUpdate = function () {
        if (window.location.hash && window.location.hash !== '#') {
            var hash = window.location.hash;
            var eleId = hash.split("#");
            var Id = eleId[1];
            document.getElementById(Id).scrollIntoView();
        }
    };
    Reply.prototype.render = function () {
        if (this.props.isHot && this.state.inWaiting)
            return null;
        if (!this.state.inWaiting)
            return React.createElement("div", { className: "center", style: { width: "100%" } }, this.state.contents.map(this.generateContents.bind(this)));
        else
            return React.createElement("img", { src: "/images/waiting.gif" });
    };
    return Reply;
}(React.Component));
exports.Reply = Reply;
/**
 * 文章内容
 */
var ContentState = /** @class */ (function () {
    function ContentState() {
    }
    return ContentState;
}());
exports.ContentState = ContentState;


/***/ }),
/* 168 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
//用户中心主页用户头像与徽章组件
var UserCenterExactAvatar = /** @class */ (function (_super) {
    __extends(UserCenterExactAvatar, _super);
    function UserCenterExactAvatar() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    UserCenterExactAvatar.prototype.render = function () {
        return (React.createElement("div", { className: "user-avatar" },
            React.createElement("img", { className: "user-avatar-img", src: this.props.userAvatarImgURL }),
            React.createElement("div", { className: "user-badge" })));
    };
    return UserCenterExactAvatar;
}(React.Component));
exports.UserCenterExactAvatar = UserCenterExactAvatar;


/***/ }),
/* 169 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var react_router_dom_1 = __webpack_require__(8);
//用户中心我的关注&我的粉丝用户通用组件
var UserCenterMyFollowingsUser = /** @class */ (function (_super) {
    __extends(UserCenterMyFollowingsUser, _super);
    function UserCenterMyFollowingsUser(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            buttonInfo: _this.props.userFanInfo.isFollowing ? '已关注' : '关注',
            buttonIsDisabled: false,
            isFollowing: _this.props.userFanInfo.isFollowing
        };
        _this.unfollow = _this.unfollow.bind(_this);
        _this.follow = _this.follow.bind(_this);
        return _this;
    }
    UserCenterMyFollowingsUser.prototype.componentWillReceiveProps = function (nextProps) {
        this.setState({
            buttonInfo: nextProps.userFanInfo.isFollowing ? '已关注' : '关注',
            buttonIsDisabled: false,
            isFollowing: nextProps.userFanInfo.isFollowing
        });
    };
    UserCenterMyFollowingsUser.prototype.unfollow = function () {
        return __awaiter(this, void 0, void 0, function () {
            var res;
            return __generator(this, function (_a) {
                this.setState({
                    buttonIsDisabled: true,
                    buttonInfo: '取关中'
                });
                res = Utility.unfollowUser(this.props.userFanInfo.id);
                if (res) {
                    this.setState({
                        buttonIsDisabled: false,
                        buttonInfo: '重新关注',
                        isFollowing: false
                    });
                }
                else {
                    this.setState({
                        buttonIsDisabled: false,
                        buttonInfo: '取关失败',
                        isFollowing: true
                    });
                }
                return [2 /*return*/];
            });
        });
    };
    UserCenterMyFollowingsUser.prototype.follow = function () {
        return __awaiter(this, void 0, void 0, function () {
            var res;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.setState({
                            buttonIsDisabled: true,
                            buttonInfo: '关注中'
                        });
                        return [4 /*yield*/, Utility.followUser(this.props.userFanInfo.id)];
                    case 1:
                        res = _a.sent();
                        if (res === true) {
                            this.setState({
                                buttonIsDisabled: false,
                                buttonInfo: '已关注',
                                isFollowing: true
                            });
                        }
                        else if (res === 'follow_count_limited') {
                            this.setState({
                                buttonIsDisabled: false,
                                buttonInfo: '已达上限',
                                isFollowing: false
                            });
                        }
                        else {
                            this.setState({
                                buttonIsDisabled: false,
                                buttonInfo: '关注失败',
                                isFollowing: false
                            });
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    UserCenterMyFollowingsUser.prototype.render = function () {
        var _this = this;
        return (React.createElement("div", { className: "user-center-myfollowings-user" },
            React.createElement("img", { src: this.props.userFanInfo.avatarImgURL }),
            React.createElement("p", null,
                React.createElement("span", { className: "user-center-myfollowings-user-id" },
                    React.createElement(react_router_dom_1.Link, { to: "/user/id/" + this.props.userFanInfo.id }, this.props.userFanInfo.name)),
                "\u4E3B\u9898",
                React.createElement("span", { className: "user-center-myfollowings-user-posts" }, this.props.userFanInfo.posts),
                "\u7C89\u4E1D",
                React.createElement("span", { className: "user-center-myfollowings-user-fans" }, this.props.userFanInfo.fans)),
            React.createElement("button", { key: this.props.userFanInfo.id, type: "button", className: this.state.isFollowing ? '' : 'user-follow', onMouseOver: function () {
                    if (_this.state.isFollowing && !_this.state.buttonIsDisabled) {
                        _this.setState({
                            buttonInfo: '取消关注'
                        });
                    }
                }, onMouseLeave: function () {
                    if (_this.state.isFollowing && !_this.state.buttonIsDisabled) {
                        _this.setState({
                            buttonInfo: '已关注'
                        });
                    }
                }, onClick: this.state.isFollowing ? this.unfollow : this.follow, disabled: this.state.buttonIsDisabled }, this.state.buttonInfo),
            React.createElement(react_router_dom_1.Link, { to: "/message/message?id=" + this.props.userFanInfo.id },
                React.createElement("button", { className: "user-message", type: "button" }, "\u79C1\u4FE1"))));
    };
    return UserCenterMyFollowingsUser;
}(React.Component));
exports.UserCenterMyFollowingsUser = UserCenterMyFollowingsUser;


/***/ }),
/* 170 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var React = __webpack_require__(1);
var FocusTopicSingle_1 = __webpack_require__(117);
var Utility = __webpack_require__(2);
/**
 * 表示我关注的版面的主题列表
 */
var FocusTopicArea = /** @class */ (function (_super) {
    __extends(FocusTopicArea, _super);
    /**
     * 构造函数
     * @param props
     */
    function FocusTopicArea(props) {
        var _this = _super.call(this, props) || this;
        //先看一下有没有缓存的帖子数据
        var data = Utility.getStorage("focusBoard_" + _this.props.id);
        if (!data) {
            data = [];
        }
        _this.state = {
            data: data,
            from: 0,
            loading: true
        };
        _this.handleScroll = _this.handleScroll.bind(_this);
        return _this;
    }
    FocusTopicArea.prototype.componentWillReceiveProps = function (nextProps) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.getData(nextProps);
                return [2 /*return*/];
            });
        });
    };
    /**
     * 进入立即获取20条新帖的数据，同时为滚动条添加监听事件
     */
    FocusTopicArea.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.getData(this.props);
                return [2 /*return*/];
            });
        });
    };
    FocusTopicArea.prototype.getData = function (props) {
        return __awaiter(this, void 0, void 0, function () {
            var data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.getFocusTopic(props.id, props.name, 0, this.context.router)];
                    case 1:
                        data = _a.sent();
                        this.setState({ data: data, from: data.length });
                        //缓存获取到的数据
                        Utility.setStorage("focusBoard_" + props.id, data);
                        //滚动条监听
                        document.addEventListener('scroll', this.handleScroll);
                        return [2 /*return*/];
                }
            });
        });
    };
    /**
     * 移除DOM时，为滚动条移除监听事件
     */
    FocusTopicArea.prototype.componentWillUnmount = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                document.removeEventListener('scroll', this.handleScroll);
                return [2 /*return*/];
            });
        });
    };
    /**
     * 处理滚动的函数
     */
    FocusTopicArea.prototype.handleScroll = function () {
        return __awaiter(this, void 0, void 0, function () {
            var newData, err_1, data, i;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(Utility.isBottom() && this.state.loading)) return [3 /*break*/, 5];
                        /**
                        *查看新帖数目大于100条时不再继续加载
                        */
                        if (this.state.from >= 99) {
                            $('#focus-topic-loading').addClass('displaynone');
                            $('#focus-topic-loaddone').removeClass('displaynone');
                            return [2 /*return*/];
                        }
                        /**
                        *发出第一条fetch请求前将this.state.loading设置为false，防止后面重复发送fetch请求
                        */
                        this.setState({ loading: false });
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, Utility.getFocusTopic(this.props.id, this.props.name, this.state.from, this.context.router)];
                    case 2:
                        newData = _a.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        err_1 = _a.sent();
                        /**
                        *如果出错，直接结束这次请求，同时将this.state.loading设置为true，后续才可以再次发送fetch请求
                        */
                        this.setState({ loading: true });
                        return [2 /*return*/];
                    case 4:
                        /**
                        *如果正确获取到数据，则添加新数据，翻页+1，同时this.state.loading设置为true，后续才可以再次发送fetch请求
                        */
                        //拼接时防止出现重复帖子
                        if (newData && newData.length > 0) {
                            data = this.state.data;
                            for (i = 0; i < data.length; i++) {
                                if (data[i].id === newData[0].id) {
                                    break;
                                }
                            }
                            data = data.slice(0, i).concat(newData);
                            this.setState({ data: data, from: data.length, loading: true });
                            Utility.setStorage("focusBoard_" + this.props.id, data);
                        }
                        _a.label = 5;
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * 将主题排列好
     */
    FocusTopicArea.prototype.render = function () {
        return React.createElement("div", { className: "focus-topic-area" },
            React.createElement("div", { className: "focus-topic-topicArea" }, this.state.data.map(coverFocusPost)),
            React.createElement("div", { className: "focus-topic-loading", id: "focus-topic-loading" },
                React.createElement("img", { src: "http://file.cc98.org/uploadfile/2017/12/20/6514723843.gif" })),
            React.createElement("div", { className: "focus-topic-loaddone displaynone", id: "focus-topic-loaddone" }, "\u5DF2\u52A0\u8F7D100\u6761\u65B0\u5E16\uFF0C\u65E0\u6CD5\u52A0\u8F7D\u66F4\u591A\u4E86~"));
    };
    return FocusTopicArea;
}(React.Component));
exports.FocusTopicArea = FocusTopicArea;
/**
* 单个主题数据转换成单个主题组件
*/
function coverFocusPost(item) {
    return React.createElement(FocusTopicSingle_1.FocusTopicSingle, { title: item.title, hitCount: item.hitCount, id: item.id, boardId: item.boardId, boardName: item.boardName, replyCount: item.replyCount, userId: item.userId, userName: item.userName, portraitUrl: item.portraitUrl, time: item.time, likeCount: item.likeCount, dislikeCount: item.dislikeCount, fanCount: item.fanCount, lastPostUser: item.lastPostUser, lastPostTime: item.lastPostTime, tag1: item.tag1, tag2: item.tag2 });
}


/***/ }),
/* 171 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var SignalR = __webpack_require__(464);
var Utility_1 = __webpack_require__(2);
var urljoin = __webpack_require__(489);
var EventListener = /** @class */ (function () {
    function EventListener() {
        this.NotifyMessageReceive = [];
        this.NotifyTopicChange = [];
        this.NotifyNotificationReceive = [];
    }
    return EventListener;
}());
var SignalRConnection = /** @class */ (function () {
    function SignalRConnection() {
        /**
         * 当前注册在connection上的事件监听
         */
        this._eventListeners = new EventListener();
        this._connection = new SignalR.HubConnection('');
    }
    Object.defineProperty(SignalRConnection.prototype, "url", {
        /**
         * SignalR服务器地址
         */
        get: function () {
            return urljoin(Utility_1.getApiUrl(), 'signalr/notification');
        },
        enumerable: true,
        configurable: true
    });
    ;
    /**
     * 为SignalR链接注册事件回掉函数
     */
    SignalRConnection.prototype.addListener = function (type, handler) {
        this._eventListeners[type].push(handler);
        this._connection.on(type, handler);
    };
    /**
     * 为SignalR链接删除事件回掉函数
     */
    SignalRConnection.prototype.removeListener = function (type, handler) {
        if (this._eventListeners[type].indexOf(handler) !== -1) {
            this._eventListeners[type].splice(this._eventListeners[type].indexOf(handler), 1);
        }
        this._connection.off(type, handler);
    };
    /**
     * 向SignalR服务器发送信息
     */
    SignalRConnection.prototype.sendMessage = function (methodName) {
        var message = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            message[_i - 1] = arguments[_i];
        }
        (_a = this._connection).invoke.apply(_a, [methodName].concat(message));
        var _a;
    };
    /**
     * 开始SignalR链接
     */
    SignalRConnection.prototype.start = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            var token, key_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility_1.getToken()];
                    case 1:
                        token = _a.sent();
                        /**
                        * token更换过就创建一个新的
                        * 然后把注册在旧的上的事件监听移到新的上
                        */
                        if (this._currentToken !== token) {
                            this._connection = new SignalR.HubConnection(this.url, { jwtBearer: function () { return token; }, logging: new SignalR.NullLogger() });
                            for (key_1 in this._eventListeners) {
                                this._eventListeners[key_1].map(function (item) { return _this._connection.on(key_1, item); });
                            }
                        }
                        /**
                        * 自动重新开始链接
                        */
                        this._connection.onclose(function (e) {
                            if (_this._isConneting) {
                                _this.start();
                            }
                        });
                        return [4 /*yield*/, this._connection.start()];
                    case 2:
                        _a.sent();
                        this._isConneting = true;
                        return [2 /*return*/];
                }
            });
        });
    };
    /**
     * 关闭SignalR链接
     */
    SignalRConnection.prototype.stop = function () {
        this._isConneting = false;
        this._connection.stop();
    };
    Object.defineProperty(SignalRConnection.prototype, "status", {
        /**
         *
         */
        get: function () {
            return this._isConneting;
        },
        enumerable: true,
        configurable: true
    });
    return SignalRConnection;
}());
exports.default = new SignalRConnection();


/***/ }),
/* 172 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) .NET Foundation. All rights reserved.
// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var HttpError = /** @class */ (function (_super) {
    __extends(HttpError, _super);
    function HttpError(errorMessage, statusCode) {
        var _this = _super.call(this, errorMessage) || this;
        _this.statusCode = statusCode;
        return _this;
    }
    return HttpError;
}(Error));
exports.HttpError = HttpError;


/***/ }),
/* 173 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) .NET Foundation. All rights reserved.
// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
Object.defineProperty(exports, "__esModule", { value: true });
var HttpError_1 = __webpack_require__(172);
var HttpClient = /** @class */ (function () {
    function HttpClient() {
    }
    HttpClient.prototype.get = function (url, headers) {
        return this.xhr("GET", url, headers);
    };
    HttpClient.prototype.post = function (url, content, headers) {
        return this.xhr("POST", url, headers, content);
    };
    HttpClient.prototype.xhr = function (method, url, headers, content) {
        return new Promise(function (resolve, reject) {
            var xhr = new XMLHttpRequest();
            xhr.open(method, url, true);
            xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
            if (headers) {
                headers.forEach(function (value, header) { return xhr.setRequestHeader(header, value); });
            }
            xhr.send(content);
            xhr.onload = function () {
                if (xhr.status >= 200 && xhr.status < 300) {
                    resolve(xhr.response || xhr.responseText);
                }
                else {
                    reject(new HttpError_1.HttpError(xhr.statusText, xhr.status));
                }
            };
            xhr.onerror = function () {
                reject(new HttpError_1.HttpError(xhr.statusText, xhr.status));
            };
        });
    };
    return HttpClient;
}());
exports.HttpClient = HttpClient;


/***/ }),
/* 174 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) .NET Foundation. All rights reserved.
// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
Object.defineProperty(exports, "__esModule", { value: true });
var Formatters_1 = __webpack_require__(120);
var JsonHubProtocol = /** @class */ (function () {
    function JsonHubProtocol() {
        this.name = "json";
        this.type = 1 /* Text */;
    }
    JsonHubProtocol.prototype.parseMessages = function (input) {
        if (!input) {
            return [];
        }
        // Parse the messages
        var messages = Formatters_1.TextMessageFormat.parse(input);
        var hubMessages = [];
        for (var i = 0; i < messages.length; ++i) {
            hubMessages.push(JSON.parse(messages[i]));
        }
        return hubMessages;
    };
    JsonHubProtocol.prototype.writeMessage = function (message) {
        return Formatters_1.TextMessageFormat.write(JSON.stringify(message));
    };
    return JsonHubProtocol;
}());
exports.JsonHubProtocol = JsonHubProtocol;


/***/ }),
/* 175 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global, process) {// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



/*<replacement>*/

var processNextTick = __webpack_require__(90);
/*</replacement>*/

module.exports = Readable;

/*<replacement>*/
var isArray = __webpack_require__(477);
/*</replacement>*/

/*<replacement>*/
var Duplex;
/*</replacement>*/

Readable.ReadableState = ReadableState;

/*<replacement>*/
var EE = __webpack_require__(176).EventEmitter;

var EElistenerCount = function (emitter, type) {
  return emitter.listeners(type).length;
};
/*</replacement>*/

/*<replacement>*/
var Stream = __webpack_require__(177);
/*</replacement>*/

// TODO(bmeurer): Change this back to const once hole checks are
// properly optimized away early in Ignition+TurboFan.
/*<replacement>*/
var Buffer = __webpack_require__(65).Buffer;
var OurUint8Array = global.Uint8Array || function () {};
function _uint8ArrayToBuffer(chunk) {
  return Buffer.from(chunk);
}
function _isUint8Array(obj) {
  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;
}
/*</replacement>*/

/*<replacement>*/
var util = __webpack_require__(67);
util.inherits = __webpack_require__(58);
/*</replacement>*/

/*<replacement>*/
var debugUtil = __webpack_require__(478);
var debug = void 0;
if (debugUtil && debugUtil.debuglog) {
  debug = debugUtil.debuglog('stream');
} else {
  debug = function () {};
}
/*</replacement>*/

var BufferList = __webpack_require__(479);
var destroyImpl = __webpack_require__(178);
var StringDecoder;

util.inherits(Readable, Stream);

var kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];

function prependListener(emitter, event, fn) {
  // Sadly this is not cacheable as some libraries bundle their own
  // event emitter implementation with them.
  if (typeof emitter.prependListener === 'function') {
    return emitter.prependListener(event, fn);
  } else {
    // This is a hack to make sure that our error handler is attached before any
    // userland ones.  NEVER DO THIS. This is here only because this code needs
    // to continue to work with older versions of Node.js that do not include
    // the prependListener() method. The goal is to eventually remove this hack.
    if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];
  }
}

function ReadableState(options, stream) {
  Duplex = Duplex || __webpack_require__(52);

  options = options || {};

  // object stream flag. Used to make read(n) ignore n and to
  // make all the buffer merging and length checks go away
  this.objectMode = !!options.objectMode;

  if (stream instanceof Duplex) this.objectMode = this.objectMode || !!options.readableObjectMode;

  // the point at which it stops calling _read() to fill the buffer
  // Note: 0 is a valid value, means "don't call _read preemptively ever"
  var hwm = options.highWaterMark;
  var defaultHwm = this.objectMode ? 16 : 16 * 1024;
  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;

  // cast to ints.
  this.highWaterMark = Math.floor(this.highWaterMark);

  // A linked list is used to store data chunks instead of an array because the
  // linked list can remove elements from the beginning faster than
  // array.shift()
  this.buffer = new BufferList();
  this.length = 0;
  this.pipes = null;
  this.pipesCount = 0;
  this.flowing = null;
  this.ended = false;
  this.endEmitted = false;
  this.reading = false;

  // a flag to be able to tell if the event 'readable'/'data' is emitted
  // immediately, or on a later tick.  We set this to true at first, because
  // any actions that shouldn't happen until "later" should generally also
  // not happen before the first read call.
  this.sync = true;

  // whenever we return null, then we set a flag to say
  // that we're awaiting a 'readable' event emission.
  this.needReadable = false;
  this.emittedReadable = false;
  this.readableListening = false;
  this.resumeScheduled = false;

  // has it been destroyed
  this.destroyed = false;

  // Crypto is kind of old and crusty.  Historically, its default string
  // encoding is 'binary' so we have to make this configurable.
  // Everything else in the universe uses 'utf8', though.
  this.defaultEncoding = options.defaultEncoding || 'utf8';

  // the number of writers that are awaiting a drain event in .pipe()s
  this.awaitDrain = 0;

  // if true, a maybeReadMore has been scheduled
  this.readingMore = false;

  this.decoder = null;
  this.encoding = null;
  if (options.encoding) {
    if (!StringDecoder) StringDecoder = __webpack_require__(179).StringDecoder;
    this.decoder = new StringDecoder(options.encoding);
    this.encoding = options.encoding;
  }
}

function Readable(options) {
  Duplex = Duplex || __webpack_require__(52);

  if (!(this instanceof Readable)) return new Readable(options);

  this._readableState = new ReadableState(options, this);

  // legacy
  this.readable = true;

  if (options) {
    if (typeof options.read === 'function') this._read = options.read;

    if (typeof options.destroy === 'function') this._destroy = options.destroy;
  }

  Stream.call(this);
}

Object.defineProperty(Readable.prototype, 'destroyed', {
  get: function () {
    if (this._readableState === undefined) {
      return false;
    }
    return this._readableState.destroyed;
  },
  set: function (value) {
    // we ignore the value if the stream
    // has not been initialized yet
    if (!this._readableState) {
      return;
    }

    // backward compatibility, the user is explicitly
    // managing destroyed
    this._readableState.destroyed = value;
  }
});

Readable.prototype.destroy = destroyImpl.destroy;
Readable.prototype._undestroy = destroyImpl.undestroy;
Readable.prototype._destroy = function (err, cb) {
  this.push(null);
  cb(err);
};

// Manually shove something into the read() buffer.
// This returns true if the highWaterMark has not been hit yet,
// similar to how Writable.write() returns true if you should
// write() some more.
Readable.prototype.push = function (chunk, encoding) {
  var state = this._readableState;
  var skipChunkCheck;

  if (!state.objectMode) {
    if (typeof chunk === 'string') {
      encoding = encoding || state.defaultEncoding;
      if (encoding !== state.encoding) {
        chunk = Buffer.from(chunk, encoding);
        encoding = '';
      }
      skipChunkCheck = true;
    }
  } else {
    skipChunkCheck = true;
  }

  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);
};

// Unshift should *always* be something directly out of read()
Readable.prototype.unshift = function (chunk) {
  return readableAddChunk(this, chunk, null, true, false);
};

function readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {
  var state = stream._readableState;
  if (chunk === null) {
    state.reading = false;
    onEofChunk(stream, state);
  } else {
    var er;
    if (!skipChunkCheck) er = chunkInvalid(state, chunk);
    if (er) {
      stream.emit('error', er);
    } else if (state.objectMode || chunk && chunk.length > 0) {
      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {
        chunk = _uint8ArrayToBuffer(chunk);
      }

      if (addToFront) {
        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);
      } else if (state.ended) {
        stream.emit('error', new Error('stream.push() after EOF'));
      } else {
        state.reading = false;
        if (state.decoder && !encoding) {
          chunk = state.decoder.write(chunk);
          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);
        } else {
          addChunk(stream, state, chunk, false);
        }
      }
    } else if (!addToFront) {
      state.reading = false;
    }
  }

  return needMoreData(state);
}

function addChunk(stream, state, chunk, addToFront) {
  if (state.flowing && state.length === 0 && !state.sync) {
    stream.emit('data', chunk);
    stream.read(0);
  } else {
    // update the buffer info.
    state.length += state.objectMode ? 1 : chunk.length;
    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);

    if (state.needReadable) emitReadable(stream);
  }
  maybeReadMore(stream, state);
}

function chunkInvalid(state, chunk) {
  var er;
  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {
    er = new TypeError('Invalid non-string/buffer chunk');
  }
  return er;
}

// if it's past the high water mark, we can push in some more.
// Also, if we have no data yet, we can stand some
// more bytes.  This is to work around cases where hwm=0,
// such as the repl.  Also, if the push() triggered a
// readable event, and the user called read(largeNumber) such that
// needReadable was set, then we ought to push more, so that another
// 'readable' event will be triggered.
function needMoreData(state) {
  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);
}

Readable.prototype.isPaused = function () {
  return this._readableState.flowing === false;
};

// backwards compatibility.
Readable.prototype.setEncoding = function (enc) {
  if (!StringDecoder) StringDecoder = __webpack_require__(179).StringDecoder;
  this._readableState.decoder = new StringDecoder(enc);
  this._readableState.encoding = enc;
  return this;
};

// Don't raise the hwm > 8MB
var MAX_HWM = 0x800000;
function computeNewHighWaterMark(n) {
  if (n >= MAX_HWM) {
    n = MAX_HWM;
  } else {
    // Get the next highest power of 2 to prevent increasing hwm excessively in
    // tiny amounts
    n--;
    n |= n >>> 1;
    n |= n >>> 2;
    n |= n >>> 4;
    n |= n >>> 8;
    n |= n >>> 16;
    n++;
  }
  return n;
}

// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function howMuchToRead(n, state) {
  if (n <= 0 || state.length === 0 && state.ended) return 0;
  if (state.objectMode) return 1;
  if (n !== n) {
    // Only flow one buffer at a time
    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;
  }
  // If we're asking for more than the current hwm, then raise the hwm.
  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);
  if (n <= state.length) return n;
  // Don't have enough
  if (!state.ended) {
    state.needReadable = true;
    return 0;
  }
  return state.length;
}

// you can override either this method, or the async _read(n) below.
Readable.prototype.read = function (n) {
  debug('read', n);
  n = parseInt(n, 10);
  var state = this._readableState;
  var nOrig = n;

  if (n !== 0) state.emittedReadable = false;

  // if we're doing read(0) to trigger a readable event, but we
  // already have a bunch of data in the buffer, then just trigger
  // the 'readable' event and move on.
  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {
    debug('read: emitReadable', state.length, state.ended);
    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);
    return null;
  }

  n = howMuchToRead(n, state);

  // if we've ended, and we're now clear, then finish it up.
  if (n === 0 && state.ended) {
    if (state.length === 0) endReadable(this);
    return null;
  }

  // All the actual chunk generation logic needs to be
  // *below* the call to _read.  The reason is that in certain
  // synthetic stream cases, such as passthrough streams, _read
  // may be a completely synchronous operation which may change
  // the state of the read buffer, providing enough data when
  // before there was *not* enough.
  //
  // So, the steps are:
  // 1. Figure out what the state of things will be after we do
  // a read from the buffer.
  //
  // 2. If that resulting state will trigger a _read, then call _read.
  // Note that this may be asynchronous, or synchronous.  Yes, it is
  // deeply ugly to write APIs this way, but that still doesn't mean
  // that the Readable class should behave improperly, as streams are
  // designed to be sync/async agnostic.
  // Take note if the _read call is sync or async (ie, if the read call
  // has returned yet), so that we know whether or not it's safe to emit
  // 'readable' etc.
  //
  // 3. Actually pull the requested chunks out of the buffer and return.

  // if we need a readable event, then we need to do some reading.
  var doRead = state.needReadable;
  debug('need readable', doRead);

  // if we currently have less than the highWaterMark, then also read some
  if (state.length === 0 || state.length - n < state.highWaterMark) {
    doRead = true;
    debug('length less than watermark', doRead);
  }

  // however, if we've ended, then there's no point, and if we're already
  // reading, then it's unnecessary.
  if (state.ended || state.reading) {
    doRead = false;
    debug('reading or ended', doRead);
  } else if (doRead) {
    debug('do read');
    state.reading = true;
    state.sync = true;
    // if the length is currently zero, then we *need* a readable event.
    if (state.length === 0) state.needReadable = true;
    // call internal read method
    this._read(state.highWaterMark);
    state.sync = false;
    // If _read pushed data synchronously, then `reading` will be false,
    // and we need to re-evaluate how much data we can return to the user.
    if (!state.reading) n = howMuchToRead(nOrig, state);
  }

  var ret;
  if (n > 0) ret = fromList(n, state);else ret = null;

  if (ret === null) {
    state.needReadable = true;
    n = 0;
  } else {
    state.length -= n;
  }

  if (state.length === 0) {
    // If we have nothing in the buffer, then we want to know
    // as soon as we *do* get something into the buffer.
    if (!state.ended) state.needReadable = true;

    // If we tried to read() past the EOF, then emit end on the next tick.
    if (nOrig !== n && state.ended) endReadable(this);
  }

  if (ret !== null) this.emit('data', ret);

  return ret;
};

function onEofChunk(stream, state) {
  if (state.ended) return;
  if (state.decoder) {
    var chunk = state.decoder.end();
    if (chunk && chunk.length) {
      state.buffer.push(chunk);
      state.length += state.objectMode ? 1 : chunk.length;
    }
  }
  state.ended = true;

  // emit 'readable' now to make sure it gets picked up.
  emitReadable(stream);
}

// Don't emit readable right away in sync mode, because this can trigger
// another read() call => stack overflow.  This way, it might trigger
// a nextTick recursion warning, but that's not so bad.
function emitReadable(stream) {
  var state = stream._readableState;
  state.needReadable = false;
  if (!state.emittedReadable) {
    debug('emitReadable', state.flowing);
    state.emittedReadable = true;
    if (state.sync) processNextTick(emitReadable_, stream);else emitReadable_(stream);
  }
}

function emitReadable_(stream) {
  debug('emit readable');
  stream.emit('readable');
  flow(stream);
}

// at this point, the user has presumably seen the 'readable' event,
// and called read() to consume some data.  that may have triggered
// in turn another _read(n) call, in which case reading = true if
// it's in progress.
// However, if we're not ended, or reading, and the length < hwm,
// then go ahead and try to read some more preemptively.
function maybeReadMore(stream, state) {
  if (!state.readingMore) {
    state.readingMore = true;
    processNextTick(maybeReadMore_, stream, state);
  }
}

function maybeReadMore_(stream, state) {
  var len = state.length;
  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {
    debug('maybeReadMore read 0');
    stream.read(0);
    if (len === state.length)
      // didn't get any data, stop spinning.
      break;else len = state.length;
  }
  state.readingMore = false;
}

// abstract method.  to be overridden in specific implementation classes.
// call cb(er, data) where data is <= n in length.
// for virtual (non-string, non-buffer) streams, "length" is somewhat
// arbitrary, and perhaps not very meaningful.
Readable.prototype._read = function (n) {
  this.emit('error', new Error('_read() is not implemented'));
};

Readable.prototype.pipe = function (dest, pipeOpts) {
  var src = this;
  var state = this._readableState;

  switch (state.pipesCount) {
    case 0:
      state.pipes = dest;
      break;
    case 1:
      state.pipes = [state.pipes, dest];
      break;
    default:
      state.pipes.push(dest);
      break;
  }
  state.pipesCount += 1;
  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);

  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;

  var endFn = doEnd ? onend : unpipe;
  if (state.endEmitted) processNextTick(endFn);else src.once('end', endFn);

  dest.on('unpipe', onunpipe);
  function onunpipe(readable, unpipeInfo) {
    debug('onunpipe');
    if (readable === src) {
      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {
        unpipeInfo.hasUnpiped = true;
        cleanup();
      }
    }
  }

  function onend() {
    debug('onend');
    dest.end();
  }

  // when the dest drains, it reduces the awaitDrain counter
  // on the source.  This would be more elegant with a .once()
  // handler in flow(), but adding and removing repeatedly is
  // too slow.
  var ondrain = pipeOnDrain(src);
  dest.on('drain', ondrain);

  var cleanedUp = false;
  function cleanup() {
    debug('cleanup');
    // cleanup event handlers once the pipe is broken
    dest.removeListener('close', onclose);
    dest.removeListener('finish', onfinish);
    dest.removeListener('drain', ondrain);
    dest.removeListener('error', onerror);
    dest.removeListener('unpipe', onunpipe);
    src.removeListener('end', onend);
    src.removeListener('end', unpipe);
    src.removeListener('data', ondata);

    cleanedUp = true;

    // if the reader is waiting for a drain event from this
    // specific writer, then it would cause it to never start
    // flowing again.
    // So, if this is awaiting a drain, then we just call it now.
    // If we don't know, then assume that we are waiting for one.
    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();
  }

  // If the user pushes more data while we're writing to dest then we'll end up
  // in ondata again. However, we only want to increase awaitDrain once because
  // dest will only emit one 'drain' event for the multiple writes.
  // => Introduce a guard on increasing awaitDrain.
  var increasedAwaitDrain = false;
  src.on('data', ondata);
  function ondata(chunk) {
    debug('ondata');
    increasedAwaitDrain = false;
    var ret = dest.write(chunk);
    if (false === ret && !increasedAwaitDrain) {
      // If the user unpiped during `dest.write()`, it is possible
      // to get stuck in a permanently paused state if that write
      // also returned false.
      // => Check whether `dest` is still a piping destination.
      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {
        debug('false write response, pause', src._readableState.awaitDrain);
        src._readableState.awaitDrain++;
        increasedAwaitDrain = true;
      }
      src.pause();
    }
  }

  // if the dest has an error, then stop piping into it.
  // however, don't suppress the throwing behavior for this.
  function onerror(er) {
    debug('onerror', er);
    unpipe();
    dest.removeListener('error', onerror);
    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);
  }

  // Make sure our error handler is attached before userland ones.
  prependListener(dest, 'error', onerror);

  // Both close and finish should trigger unpipe, but only once.
  function onclose() {
    dest.removeListener('finish', onfinish);
    unpipe();
  }
  dest.once('close', onclose);
  function onfinish() {
    debug('onfinish');
    dest.removeListener('close', onclose);
    unpipe();
  }
  dest.once('finish', onfinish);

  function unpipe() {
    debug('unpipe');
    src.unpipe(dest);
  }

  // tell the dest that it's being piped to
  dest.emit('pipe', src);

  // start the flow if it hasn't been started already.
  if (!state.flowing) {
    debug('pipe resume');
    src.resume();
  }

  return dest;
};

function pipeOnDrain(src) {
  return function () {
    var state = src._readableState;
    debug('pipeOnDrain', state.awaitDrain);
    if (state.awaitDrain) state.awaitDrain--;
    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {
      state.flowing = true;
      flow(src);
    }
  };
}

Readable.prototype.unpipe = function (dest) {
  var state = this._readableState;
  var unpipeInfo = { hasUnpiped: false };

  // if we're not piping anywhere, then do nothing.
  if (state.pipesCount === 0) return this;

  // just one destination.  most common case.
  if (state.pipesCount === 1) {
    // passed in one, but it's not the right one.
    if (dest && dest !== state.pipes) return this;

    if (!dest) dest = state.pipes;

    // got a match.
    state.pipes = null;
    state.pipesCount = 0;
    state.flowing = false;
    if (dest) dest.emit('unpipe', this, unpipeInfo);
    return this;
  }

  // slow case. multiple pipe destinations.

  if (!dest) {
    // remove all.
    var dests = state.pipes;
    var len = state.pipesCount;
    state.pipes = null;
    state.pipesCount = 0;
    state.flowing = false;

    for (var i = 0; i < len; i++) {
      dests[i].emit('unpipe', this, unpipeInfo);
    }return this;
  }

  // try to find the right one.
  var index = indexOf(state.pipes, dest);
  if (index === -1) return this;

  state.pipes.splice(index, 1);
  state.pipesCount -= 1;
  if (state.pipesCount === 1) state.pipes = state.pipes[0];

  dest.emit('unpipe', this, unpipeInfo);

  return this;
};

// set up data events if they are asked for
// Ensure readable listeners eventually get something
Readable.prototype.on = function (ev, fn) {
  var res = Stream.prototype.on.call(this, ev, fn);

  if (ev === 'data') {
    // Start flowing on next tick if stream isn't explicitly paused
    if (this._readableState.flowing !== false) this.resume();
  } else if (ev === 'readable') {
    var state = this._readableState;
    if (!state.endEmitted && !state.readableListening) {
      state.readableListening = state.needReadable = true;
      state.emittedReadable = false;
      if (!state.reading) {
        processNextTick(nReadingNextTick, this);
      } else if (state.length) {
        emitReadable(this);
      }
    }
  }

  return res;
};
Readable.prototype.addListener = Readable.prototype.on;

function nReadingNextTick(self) {
  debug('readable nexttick read 0');
  self.read(0);
}

// pause() and resume() are remnants of the legacy readable stream API
// If the user uses them, then switch into old mode.
Readable.prototype.resume = function () {
  var state = this._readableState;
  if (!state.flowing) {
    debug('resume');
    state.flowing = true;
    resume(this, state);
  }
  return this;
};

function resume(stream, state) {
  if (!state.resumeScheduled) {
    state.resumeScheduled = true;
    processNextTick(resume_, stream, state);
  }
}

function resume_(stream, state) {
  if (!state.reading) {
    debug('resume read 0');
    stream.read(0);
  }

  state.resumeScheduled = false;
  state.awaitDrain = 0;
  stream.emit('resume');
  flow(stream);
  if (state.flowing && !state.reading) stream.read(0);
}

Readable.prototype.pause = function () {
  debug('call pause flowing=%j', this._readableState.flowing);
  if (false !== this._readableState.flowing) {
    debug('pause');
    this._readableState.flowing = false;
    this.emit('pause');
  }
  return this;
};

function flow(stream) {
  var state = stream._readableState;
  debug('flow', state.flowing);
  while (state.flowing && stream.read() !== null) {}
}

// wrap an old-style stream as the async data source.
// This is *not* part of the readable stream interface.
// It is an ugly unfortunate mess of history.
Readable.prototype.wrap = function (stream) {
  var state = this._readableState;
  var paused = false;

  var self = this;
  stream.on('end', function () {
    debug('wrapped end');
    if (state.decoder && !state.ended) {
      var chunk = state.decoder.end();
      if (chunk && chunk.length) self.push(chunk);
    }

    self.push(null);
  });

  stream.on('data', function (chunk) {
    debug('wrapped data');
    if (state.decoder) chunk = state.decoder.write(chunk);

    // don't skip over falsy values in objectMode
    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;

    var ret = self.push(chunk);
    if (!ret) {
      paused = true;
      stream.pause();
    }
  });

  // proxy all the other methods.
  // important when wrapping filters and duplexes.
  for (var i in stream) {
    if (this[i] === undefined && typeof stream[i] === 'function') {
      this[i] = function (method) {
        return function () {
          return stream[method].apply(stream, arguments);
        };
      }(i);
    }
  }

  // proxy certain important events.
  for (var n = 0; n < kProxyEvents.length; n++) {
    stream.on(kProxyEvents[n], self.emit.bind(self, kProxyEvents[n]));
  }

  // when we try to consume some more bytes, simply unpause the
  // underlying stream.
  self._read = function (n) {
    debug('wrapped _read', n);
    if (paused) {
      paused = false;
      stream.resume();
    }
  };

  return self;
};

// exposed for testing purposes only.
Readable._fromList = fromList;

// Pluck off n bytes from an array of buffers.
// Length is the combined lengths of all the buffers in the list.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function fromList(n, state) {
  // nothing buffered
  if (state.length === 0) return null;

  var ret;
  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {
    // read it all, truncate the list
    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);
    state.buffer.clear();
  } else {
    // read part of list
    ret = fromListPartial(n, state.buffer, state.decoder);
  }

  return ret;
}

// Extracts only enough buffered data to satisfy the amount requested.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function fromListPartial(n, list, hasStrings) {
  var ret;
  if (n < list.head.data.length) {
    // slice is the same for buffers and strings
    ret = list.head.data.slice(0, n);
    list.head.data = list.head.data.slice(n);
  } else if (n === list.head.data.length) {
    // first chunk is a perfect match
    ret = list.shift();
  } else {
    // result spans more than one buffer
    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);
  }
  return ret;
}

// Copies a specified amount of characters from the list of buffered data
// chunks.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function copyFromBufferString(n, list) {
  var p = list.head;
  var c = 1;
  var ret = p.data;
  n -= ret.length;
  while (p = p.next) {
    var str = p.data;
    var nb = n > str.length ? str.length : n;
    if (nb === str.length) ret += str;else ret += str.slice(0, n);
    n -= nb;
    if (n === 0) {
      if (nb === str.length) {
        ++c;
        if (p.next) list.head = p.next;else list.head = list.tail = null;
      } else {
        list.head = p;
        p.data = str.slice(nb);
      }
      break;
    }
    ++c;
  }
  list.length -= c;
  return ret;
}

// Copies a specified amount of bytes from the list of buffered data chunks.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function copyFromBuffer(n, list) {
  var ret = Buffer.allocUnsafe(n);
  var p = list.head;
  var c = 1;
  p.data.copy(ret);
  n -= p.data.length;
  while (p = p.next) {
    var buf = p.data;
    var nb = n > buf.length ? buf.length : n;
    buf.copy(ret, ret.length - n, 0, nb);
    n -= nb;
    if (n === 0) {
      if (nb === buf.length) {
        ++c;
        if (p.next) list.head = p.next;else list.head = list.tail = null;
      } else {
        list.head = p;
        p.data = buf.slice(nb);
      }
      break;
    }
    ++c;
  }
  list.length -= c;
  return ret;
}

function endReadable(stream) {
  var state = stream._readableState;

  // If we get here before consuming all the bytes, then that is a
  // bug in node.  Should never happen.
  if (state.length > 0) throw new Error('"endReadable()" called on non-empty stream');

  if (!state.endEmitted) {
    state.ended = true;
    processNextTick(endReadableNT, state, stream);
  }
}

function endReadableNT(state, stream) {
  // Check that we didn't get one last unshift.
  if (!state.endEmitted && state.length === 0) {
    state.endEmitted = true;
    stream.readable = false;
    stream.emit('end');
  }
}

function forEach(xs, f) {
  for (var i = 0, l = xs.length; i < l; i++) {
    f(xs[i], i);
  }
}

function indexOf(xs, x) {
  for (var i = 0, l = xs.length; i < l; i++) {
    if (xs[i] === x) return i;
  }
  return -1;
}
/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(40), __webpack_require__(66)))

/***/ }),
/* 176 */
/***/ (function(module, exports) {

// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

function EventEmitter() {
  this._events = this._events || {};
  this._maxListeners = this._maxListeners || undefined;
}
module.exports = EventEmitter;

// Backwards-compat with node 0.10.x
EventEmitter.EventEmitter = EventEmitter;

EventEmitter.prototype._events = undefined;
EventEmitter.prototype._maxListeners = undefined;

// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
EventEmitter.defaultMaxListeners = 10;

// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
EventEmitter.prototype.setMaxListeners = function(n) {
  if (!isNumber(n) || n < 0 || isNaN(n))
    throw TypeError('n must be a positive number');
  this._maxListeners = n;
  return this;
};

EventEmitter.prototype.emit = function(type) {
  var er, handler, len, args, i, listeners;

  if (!this._events)
    this._events = {};

  // If there is no 'error' event listener then throw.
  if (type === 'error') {
    if (!this._events.error ||
        (isObject(this._events.error) && !this._events.error.length)) {
      er = arguments[1];
      if (er instanceof Error) {
        throw er; // Unhandled 'error' event
      } else {
        // At least give some kind of context to the user
        var err = new Error('Uncaught, unspecified "error" event. (' + er + ')');
        err.context = er;
        throw err;
      }
    }
  }

  handler = this._events[type];

  if (isUndefined(handler))
    return false;

  if (isFunction(handler)) {
    switch (arguments.length) {
      // fast cases
      case 1:
        handler.call(this);
        break;
      case 2:
        handler.call(this, arguments[1]);
        break;
      case 3:
        handler.call(this, arguments[1], arguments[2]);
        break;
      // slower
      default:
        args = Array.prototype.slice.call(arguments, 1);
        handler.apply(this, args);
    }
  } else if (isObject(handler)) {
    args = Array.prototype.slice.call(arguments, 1);
    listeners = handler.slice();
    len = listeners.length;
    for (i = 0; i < len; i++)
      listeners[i].apply(this, args);
  }

  return true;
};

EventEmitter.prototype.addListener = function(type, listener) {
  var m;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events)
    this._events = {};

  // To avoid recursion in the case that type === "newListener"! Before
  // adding it to the listeners, first emit "newListener".
  if (this._events.newListener)
    this.emit('newListener', type,
              isFunction(listener.listener) ?
              listener.listener : listener);

  if (!this._events[type])
    // Optimize the case of one listener. Don't need the extra array object.
    this._events[type] = listener;
  else if (isObject(this._events[type]))
    // If we've already got an array, just append.
    this._events[type].push(listener);
  else
    // Adding the second element, need to change to array.
    this._events[type] = [this._events[type], listener];

  // Check for listener leak
  if (isObject(this._events[type]) && !this._events[type].warned) {
    if (!isUndefined(this._maxListeners)) {
      m = this._maxListeners;
    } else {
      m = EventEmitter.defaultMaxListeners;
    }

    if (m && m > 0 && this._events[type].length > m) {
      this._events[type].warned = true;
      console.error('(node) warning: possible EventEmitter memory ' +
                    'leak detected. %d listeners added. ' +
                    'Use emitter.setMaxListeners() to increase limit.',
                    this._events[type].length);
      if (typeof console.trace === 'function') {
        // not supported in IE 10
        console.trace();
      }
    }
  }

  return this;
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.once = function(type, listener) {
  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  var fired = false;

  function g() {
    this.removeListener(type, g);

    if (!fired) {
      fired = true;
      listener.apply(this, arguments);
    }
  }

  g.listener = listener;
  this.on(type, g);

  return this;
};

// emits a 'removeListener' event iff the listener was removed
EventEmitter.prototype.removeListener = function(type, listener) {
  var list, position, length, i;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events || !this._events[type])
    return this;

  list = this._events[type];
  length = list.length;
  position = -1;

  if (list === listener ||
      (isFunction(list.listener) && list.listener === listener)) {
    delete this._events[type];
    if (this._events.removeListener)
      this.emit('removeListener', type, listener);

  } else if (isObject(list)) {
    for (i = length; i-- > 0;) {
      if (list[i] === listener ||
          (list[i].listener && list[i].listener === listener)) {
        position = i;
        break;
      }
    }

    if (position < 0)
      return this;

    if (list.length === 1) {
      list.length = 0;
      delete this._events[type];
    } else {
      list.splice(position, 1);
    }

    if (this._events.removeListener)
      this.emit('removeListener', type, listener);
  }

  return this;
};

EventEmitter.prototype.removeAllListeners = function(type) {
  var key, listeners;

  if (!this._events)
    return this;

  // not listening for removeListener, no need to emit
  if (!this._events.removeListener) {
    if (arguments.length === 0)
      this._events = {};
    else if (this._events[type])
      delete this._events[type];
    return this;
  }

  // emit removeListener for all listeners on all events
  if (arguments.length === 0) {
    for (key in this._events) {
      if (key === 'removeListener') continue;
      this.removeAllListeners(key);
    }
    this.removeAllListeners('removeListener');
    this._events = {};
    return this;
  }

  listeners = this._events[type];

  if (isFunction(listeners)) {
    this.removeListener(type, listeners);
  } else if (listeners) {
    // LIFO order
    while (listeners.length)
      this.removeListener(type, listeners[listeners.length - 1]);
  }
  delete this._events[type];

  return this;
};

EventEmitter.prototype.listeners = function(type) {
  var ret;
  if (!this._events || !this._events[type])
    ret = [];
  else if (isFunction(this._events[type]))
    ret = [this._events[type]];
  else
    ret = this._events[type].slice();
  return ret;
};

EventEmitter.prototype.listenerCount = function(type) {
  if (this._events) {
    var evlistener = this._events[type];

    if (isFunction(evlistener))
      return 1;
    else if (evlistener)
      return evlistener.length;
  }
  return 0;
};

EventEmitter.listenerCount = function(emitter, type) {
  return emitter.listenerCount(type);
};

function isFunction(arg) {
  return typeof arg === 'function';
}

function isNumber(arg) {
  return typeof arg === 'number';
}

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}

function isUndefined(arg) {
  return arg === void 0;
}


/***/ }),
/* 177 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(176).EventEmitter;


/***/ }),
/* 178 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*<replacement>*/

var processNextTick = __webpack_require__(90);
/*</replacement>*/

// undocumented cb() API, needed for core, not for public API
function destroy(err, cb) {
  var _this = this;

  var readableDestroyed = this._readableState && this._readableState.destroyed;
  var writableDestroyed = this._writableState && this._writableState.destroyed;

  if (readableDestroyed || writableDestroyed) {
    if (cb) {
      cb(err);
    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {
      processNextTick(emitErrorNT, this, err);
    }
    return;
  }

  // we set destroyed to true before firing error callbacks in order
  // to make it re-entrance safe in case destroy() is called within callbacks

  if (this._readableState) {
    this._readableState.destroyed = true;
  }

  // if this is a duplex stream mark the writable part as destroyed as well
  if (this._writableState) {
    this._writableState.destroyed = true;
  }

  this._destroy(err || null, function (err) {
    if (!cb && err) {
      processNextTick(emitErrorNT, _this, err);
      if (_this._writableState) {
        _this._writableState.errorEmitted = true;
      }
    } else if (cb) {
      cb(err);
    }
  });
}

function undestroy() {
  if (this._readableState) {
    this._readableState.destroyed = false;
    this._readableState.reading = false;
    this._readableState.ended = false;
    this._readableState.endEmitted = false;
  }

  if (this._writableState) {
    this._writableState.destroyed = false;
    this._writableState.ended = false;
    this._writableState.ending = false;
    this._writableState.finished = false;
    this._writableState.errorEmitted = false;
  }
}

function emitErrorNT(self, err) {
  self.emit('error', err);
}

module.exports = {
  destroy: destroy,
  undestroy: undestroy
};

/***/ }),
/* 179 */
/***/ (function(module, exports, __webpack_require__) {

// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

var Buffer = __webpack_require__(64).Buffer;

var isBufferEncoding = Buffer.isEncoding
  || function(encoding) {
       switch (encoding && encoding.toLowerCase()) {
         case 'hex': case 'utf8': case 'utf-8': case 'ascii': case 'binary': case 'base64': case 'ucs2': case 'ucs-2': case 'utf16le': case 'utf-16le': case 'raw': return true;
         default: return false;
       }
     }


function assertEncoding(encoding) {
  if (encoding && !isBufferEncoding(encoding)) {
    throw new Error('Unknown encoding: ' + encoding);
  }
}

// StringDecoder provides an interface for efficiently splitting a series of
// buffers into a series of JS strings without breaking apart multi-byte
// characters. CESU-8 is handled as part of the UTF-8 encoding.
//
// @TODO Handling all encodings inside a single object makes it very difficult
// to reason about this code, so it should be split up in the future.
// @TODO There should be a utf8-strict encoding that rejects invalid UTF-8 code
// points as used by CESU-8.
var StringDecoder = exports.StringDecoder = function(encoding) {
  this.encoding = (encoding || 'utf8').toLowerCase().replace(/[-_]/, '');
  assertEncoding(encoding);
  switch (this.encoding) {
    case 'utf8':
      // CESU-8 represents each of Surrogate Pair by 3-bytes
      this.surrogateSize = 3;
      break;
    case 'ucs2':
    case 'utf16le':
      // UTF-16 represents each of Surrogate Pair by 2-bytes
      this.surrogateSize = 2;
      this.detectIncompleteChar = utf16DetectIncompleteChar;
      break;
    case 'base64':
      // Base-64 stores 3 bytes in 4 chars, and pads the remainder.
      this.surrogateSize = 3;
      this.detectIncompleteChar = base64DetectIncompleteChar;
      break;
    default:
      this.write = passThroughWrite;
      return;
  }

  // Enough space to store all bytes of a single character. UTF-8 needs 4
  // bytes, but CESU-8 may require up to 6 (3 bytes per surrogate).
  this.charBuffer = new Buffer(6);
  // Number of bytes received for the current incomplete multi-byte character.
  this.charReceived = 0;
  // Number of bytes expected for the current incomplete multi-byte character.
  this.charLength = 0;
};


// write decodes the given buffer and returns it as JS string that is
// guaranteed to not contain any partial multi-byte characters. Any partial
// character found at the end of the buffer is buffered up, and will be
// returned when calling write again with the remaining bytes.
//
// Note: Converting a Buffer containing an orphan surrogate to a String
// currently works, but converting a String to a Buffer (via `new Buffer`, or
// Buffer#write) will replace incomplete surrogates with the unicode
// replacement character. See https://codereview.chromium.org/121173009/ .
StringDecoder.prototype.write = function(buffer) {
  var charStr = '';
  // if our last write ended with an incomplete multibyte character
  while (this.charLength) {
    // determine how many remaining bytes this buffer has to offer for this char
    var available = (buffer.length >= this.charLength - this.charReceived) ?
        this.charLength - this.charReceived :
        buffer.length;

    // add the new bytes to the char buffer
    buffer.copy(this.charBuffer, this.charReceived, 0, available);
    this.charReceived += available;

    if (this.charReceived < this.charLength) {
      // still not enough chars in this buffer? wait for more ...
      return '';
    }

    // remove bytes belonging to the current character from the buffer
    buffer = buffer.slice(available, buffer.length);

    // get the character that was split
    charStr = this.charBuffer.slice(0, this.charLength).toString(this.encoding);

    // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character
    var charCode = charStr.charCodeAt(charStr.length - 1);
    if (charCode >= 0xD800 && charCode <= 0xDBFF) {
      this.charLength += this.surrogateSize;
      charStr = '';
      continue;
    }
    this.charReceived = this.charLength = 0;

    // if there are no more bytes in this buffer, just emit our char
    if (buffer.length === 0) {
      return charStr;
    }
    break;
  }

  // determine and set charLength / charReceived
  this.detectIncompleteChar(buffer);

  var end = buffer.length;
  if (this.charLength) {
    // buffer the incomplete character bytes we got
    buffer.copy(this.charBuffer, 0, buffer.length - this.charReceived, end);
    end -= this.charReceived;
  }

  charStr += buffer.toString(this.encoding, 0, end);

  var end = charStr.length - 1;
  var charCode = charStr.charCodeAt(end);
  // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character
  if (charCode >= 0xD800 && charCode <= 0xDBFF) {
    var size = this.surrogateSize;
    this.charLength += size;
    this.charReceived += size;
    this.charBuffer.copy(this.charBuffer, size, 0, size);
    buffer.copy(this.charBuffer, 0, 0, size);
    return charStr.substring(0, end);
  }

  // or just emit the charStr
  return charStr;
};

// detectIncompleteChar determines if there is an incomplete UTF-8 character at
// the end of the given buffer. If so, it sets this.charLength to the byte
// length that character, and sets this.charReceived to the number of bytes
// that are available for this character.
StringDecoder.prototype.detectIncompleteChar = function(buffer) {
  // determine how many bytes we have to check at the end of this buffer
  var i = (buffer.length >= 3) ? 3 : buffer.length;

  // Figure out if one of the last i bytes of our buffer announces an
  // incomplete char.
  for (; i > 0; i--) {
    var c = buffer[buffer.length - i];

    // See http://en.wikipedia.org/wiki/UTF-8#Description

    // 110XXXXX
    if (i == 1 && c >> 5 == 0x06) {
      this.charLength = 2;
      break;
    }

    // 1110XXXX
    if (i <= 2 && c >> 4 == 0x0E) {
      this.charLength = 3;
      break;
    }

    // 11110XXX
    if (i <= 3 && c >> 3 == 0x1E) {
      this.charLength = 4;
      break;
    }
  }
  this.charReceived = i;
};

StringDecoder.prototype.end = function(buffer) {
  var res = '';
  if (buffer && buffer.length)
    res = this.write(buffer);

  if (this.charReceived) {
    var cr = this.charReceived;
    var buf = this.charBuffer;
    var enc = this.encoding;
    res += buf.slice(0, cr).toString(enc);
  }

  return res;
};

function passThroughWrite(buffer) {
  return buffer.toString(this.encoding);
}

function utf16DetectIncompleteChar(buffer) {
  this.charReceived = buffer.length % 2;
  this.charLength = this.charReceived ? 2 : 0;
}

function base64DetectIncompleteChar(buffer) {
  this.charReceived = buffer.length % 3;
  this.charLength = this.charReceived ? 3 : 0;
}


/***/ }),
/* 180 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(process, setImmediate, global) {// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// A bit simpler than readable streams.
// Implement an async ._write(chunk, encoding, cb), and it'll handle all
// the drain event emission and buffering.



/*<replacement>*/

var processNextTick = __webpack_require__(90);
/*</replacement>*/

module.exports = Writable;

/* <replacement> */
function WriteReq(chunk, encoding, cb) {
  this.chunk = chunk;
  this.encoding = encoding;
  this.callback = cb;
  this.next = null;
}

// It seems a linked list but it is not
// there will be only 2 of these for each stream
function CorkedRequest(state) {
  var _this = this;

  this.next = null;
  this.entry = null;
  this.finish = function () {
    onCorkedFinish(_this, state);
  };
}
/* </replacement> */

/*<replacement>*/
var asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : processNextTick;
/*</replacement>*/

/*<replacement>*/
var Duplex;
/*</replacement>*/

Writable.WritableState = WritableState;

/*<replacement>*/
var util = __webpack_require__(67);
util.inherits = __webpack_require__(58);
/*</replacement>*/

/*<replacement>*/
var internalUtil = {
  deprecate: __webpack_require__(483)
};
/*</replacement>*/

/*<replacement>*/
var Stream = __webpack_require__(177);
/*</replacement>*/

/*<replacement>*/
var Buffer = __webpack_require__(65).Buffer;
var OurUint8Array = global.Uint8Array || function () {};
function _uint8ArrayToBuffer(chunk) {
  return Buffer.from(chunk);
}
function _isUint8Array(obj) {
  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;
}
/*</replacement>*/

var destroyImpl = __webpack_require__(178);

util.inherits(Writable, Stream);

function nop() {}

function WritableState(options, stream) {
  Duplex = Duplex || __webpack_require__(52);

  options = options || {};

  // object stream flag to indicate whether or not this stream
  // contains buffers or objects.
  this.objectMode = !!options.objectMode;

  if (stream instanceof Duplex) this.objectMode = this.objectMode || !!options.writableObjectMode;

  // the point at which write() starts returning false
  // Note: 0 is a valid value, means that we always return false if
  // the entire buffer is not flushed immediately on write()
  var hwm = options.highWaterMark;
  var defaultHwm = this.objectMode ? 16 : 16 * 1024;
  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;

  // cast to ints.
  this.highWaterMark = Math.floor(this.highWaterMark);

  // if _final has been called
  this.finalCalled = false;

  // drain event flag.
  this.needDrain = false;
  // at the start of calling end()
  this.ending = false;
  // when end() has been called, and returned
  this.ended = false;
  // when 'finish' is emitted
  this.finished = false;

  // has it been destroyed
  this.destroyed = false;

  // should we decode strings into buffers before passing to _write?
  // this is here so that some node-core streams can optimize string
  // handling at a lower level.
  var noDecode = options.decodeStrings === false;
  this.decodeStrings = !noDecode;

  // Crypto is kind of old and crusty.  Historically, its default string
  // encoding is 'binary' so we have to make this configurable.
  // Everything else in the universe uses 'utf8', though.
  this.defaultEncoding = options.defaultEncoding || 'utf8';

  // not an actual buffer we keep track of, but a measurement
  // of how much we're waiting to get pushed to some underlying
  // socket or file.
  this.length = 0;

  // a flag to see when we're in the middle of a write.
  this.writing = false;

  // when true all writes will be buffered until .uncork() call
  this.corked = 0;

  // a flag to be able to tell if the onwrite cb is called immediately,
  // or on a later tick.  We set this to true at first, because any
  // actions that shouldn't happen until "later" should generally also
  // not happen before the first write call.
  this.sync = true;

  // a flag to know if we're processing previously buffered items, which
  // may call the _write() callback in the same tick, so that we don't
  // end up in an overlapped onwrite situation.
  this.bufferProcessing = false;

  // the callback that's passed to _write(chunk,cb)
  this.onwrite = function (er) {
    onwrite(stream, er);
  };

  // the callback that the user supplies to write(chunk,encoding,cb)
  this.writecb = null;

  // the amount that is being written when _write is called.
  this.writelen = 0;

  this.bufferedRequest = null;
  this.lastBufferedRequest = null;

  // number of pending user-supplied write callbacks
  // this must be 0 before 'finish' can be emitted
  this.pendingcb = 0;

  // emit prefinish if the only thing we're waiting for is _write cbs
  // This is relevant for synchronous Transform streams
  this.prefinished = false;

  // True if the error was already emitted and should not be thrown again
  this.errorEmitted = false;

  // count buffered requests
  this.bufferedRequestCount = 0;

  // allocate the first CorkedRequest, there is always
  // one allocated and free to use, and we maintain at most two
  this.corkedRequestsFree = new CorkedRequest(this);
}

WritableState.prototype.getBuffer = function getBuffer() {
  var current = this.bufferedRequest;
  var out = [];
  while (current) {
    out.push(current);
    current = current.next;
  }
  return out;
};

(function () {
  try {
    Object.defineProperty(WritableState.prototype, 'buffer', {
      get: internalUtil.deprecate(function () {
        return this.getBuffer();
      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')
    });
  } catch (_) {}
})();

// Test _writableState for inheritance to account for Duplex streams,
// whose prototype chain only points to Readable.
var realHasInstance;
if (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {
  realHasInstance = Function.prototype[Symbol.hasInstance];
  Object.defineProperty(Writable, Symbol.hasInstance, {
    value: function (object) {
      if (realHasInstance.call(this, object)) return true;

      return object && object._writableState instanceof WritableState;
    }
  });
} else {
  realHasInstance = function (object) {
    return object instanceof this;
  };
}

function Writable(options) {
  Duplex = Duplex || __webpack_require__(52);

  // Writable ctor is applied to Duplexes, too.
  // `realHasInstance` is necessary because using plain `instanceof`
  // would return false, as no `_writableState` property is attached.

  // Trying to use the custom `instanceof` for Writable here will also break the
  // Node.js LazyTransform implementation, which has a non-trivial getter for
  // `_writableState` that would lead to infinite recursion.
  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {
    return new Writable(options);
  }

  this._writableState = new WritableState(options, this);

  // legacy.
  this.writable = true;

  if (options) {
    if (typeof options.write === 'function') this._write = options.write;

    if (typeof options.writev === 'function') this._writev = options.writev;

    if (typeof options.destroy === 'function') this._destroy = options.destroy;

    if (typeof options.final === 'function') this._final = options.final;
  }

  Stream.call(this);
}

// Otherwise people can pipe Writable streams, which is just wrong.
Writable.prototype.pipe = function () {
  this.emit('error', new Error('Cannot pipe, not readable'));
};

function writeAfterEnd(stream, cb) {
  var er = new Error('write after end');
  // TODO: defer error events consistently everywhere, not just the cb
  stream.emit('error', er);
  processNextTick(cb, er);
}

// Checks that a user-supplied chunk is valid, especially for the particular
// mode the stream is in. Currently this means that `null` is never accepted
// and undefined/non-string values are only allowed in object mode.
function validChunk(stream, state, chunk, cb) {
  var valid = true;
  var er = false;

  if (chunk === null) {
    er = new TypeError('May not write null values to stream');
  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {
    er = new TypeError('Invalid non-string/buffer chunk');
  }
  if (er) {
    stream.emit('error', er);
    processNextTick(cb, er);
    valid = false;
  }
  return valid;
}

Writable.prototype.write = function (chunk, encoding, cb) {
  var state = this._writableState;
  var ret = false;
  var isBuf = _isUint8Array(chunk) && !state.objectMode;

  if (isBuf && !Buffer.isBuffer(chunk)) {
    chunk = _uint8ArrayToBuffer(chunk);
  }

  if (typeof encoding === 'function') {
    cb = encoding;
    encoding = null;
  }

  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;

  if (typeof cb !== 'function') cb = nop;

  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {
    state.pendingcb++;
    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);
  }

  return ret;
};

Writable.prototype.cork = function () {
  var state = this._writableState;

  state.corked++;
};

Writable.prototype.uncork = function () {
  var state = this._writableState;

  if (state.corked) {
    state.corked--;

    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);
  }
};

Writable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {
  // node::ParseEncoding() requires lower case.
  if (typeof encoding === 'string') encoding = encoding.toLowerCase();
  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);
  this._writableState.defaultEncoding = encoding;
  return this;
};

function decodeChunk(state, chunk, encoding) {
  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {
    chunk = Buffer.from(chunk, encoding);
  }
  return chunk;
}

// if we're already writing something, then just put this
// in the queue, and wait our turn.  Otherwise, call _write
// If we return false, then we need a drain event, so set that flag.
function writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {
  if (!isBuf) {
    var newChunk = decodeChunk(state, chunk, encoding);
    if (chunk !== newChunk) {
      isBuf = true;
      encoding = 'buffer';
      chunk = newChunk;
    }
  }
  var len = state.objectMode ? 1 : chunk.length;

  state.length += len;

  var ret = state.length < state.highWaterMark;
  // we must ensure that previous needDrain will not be reset to false.
  if (!ret) state.needDrain = true;

  if (state.writing || state.corked) {
    var last = state.lastBufferedRequest;
    state.lastBufferedRequest = {
      chunk: chunk,
      encoding: encoding,
      isBuf: isBuf,
      callback: cb,
      next: null
    };
    if (last) {
      last.next = state.lastBufferedRequest;
    } else {
      state.bufferedRequest = state.lastBufferedRequest;
    }
    state.bufferedRequestCount += 1;
  } else {
    doWrite(stream, state, false, len, chunk, encoding, cb);
  }

  return ret;
}

function doWrite(stream, state, writev, len, chunk, encoding, cb) {
  state.writelen = len;
  state.writecb = cb;
  state.writing = true;
  state.sync = true;
  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);
  state.sync = false;
}

function onwriteError(stream, state, sync, er, cb) {
  --state.pendingcb;

  if (sync) {
    // defer the callback if we are being called synchronously
    // to avoid piling up things on the stack
    processNextTick(cb, er);
    // this can emit finish, and it will always happen
    // after error
    processNextTick(finishMaybe, stream, state);
    stream._writableState.errorEmitted = true;
    stream.emit('error', er);
  } else {
    // the caller expect this to happen before if
    // it is async
    cb(er);
    stream._writableState.errorEmitted = true;
    stream.emit('error', er);
    // this can emit finish, but finish must
    // always follow error
    finishMaybe(stream, state);
  }
}

function onwriteStateUpdate(state) {
  state.writing = false;
  state.writecb = null;
  state.length -= state.writelen;
  state.writelen = 0;
}

function onwrite(stream, er) {
  var state = stream._writableState;
  var sync = state.sync;
  var cb = state.writecb;

  onwriteStateUpdate(state);

  if (er) onwriteError(stream, state, sync, er, cb);else {
    // Check if we're actually ready to finish, but don't emit yet
    var finished = needFinish(state);

    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {
      clearBuffer(stream, state);
    }

    if (sync) {
      /*<replacement>*/
      asyncWrite(afterWrite, stream, state, finished, cb);
      /*</replacement>*/
    } else {
      afterWrite(stream, state, finished, cb);
    }
  }
}

function afterWrite(stream, state, finished, cb) {
  if (!finished) onwriteDrain(stream, state);
  state.pendingcb--;
  cb();
  finishMaybe(stream, state);
}

// Must force callback to be called on nextTick, so that we don't
// emit 'drain' before the write() consumer gets the 'false' return
// value, and has a chance to attach a 'drain' listener.
function onwriteDrain(stream, state) {
  if (state.length === 0 && state.needDrain) {
    state.needDrain = false;
    stream.emit('drain');
  }
}

// if there's something in the buffer waiting, then process it
function clearBuffer(stream, state) {
  state.bufferProcessing = true;
  var entry = state.bufferedRequest;

  if (stream._writev && entry && entry.next) {
    // Fast case, write everything using _writev()
    var l = state.bufferedRequestCount;
    var buffer = new Array(l);
    var holder = state.corkedRequestsFree;
    holder.entry = entry;

    var count = 0;
    var allBuffers = true;
    while (entry) {
      buffer[count] = entry;
      if (!entry.isBuf) allBuffers = false;
      entry = entry.next;
      count += 1;
    }
    buffer.allBuffers = allBuffers;

    doWrite(stream, state, true, state.length, buffer, '', holder.finish);

    // doWrite is almost always async, defer these to save a bit of time
    // as the hot path ends with doWrite
    state.pendingcb++;
    state.lastBufferedRequest = null;
    if (holder.next) {
      state.corkedRequestsFree = holder.next;
      holder.next = null;
    } else {
      state.corkedRequestsFree = new CorkedRequest(state);
    }
  } else {
    // Slow case, write chunks one-by-one
    while (entry) {
      var chunk = entry.chunk;
      var encoding = entry.encoding;
      var cb = entry.callback;
      var len = state.objectMode ? 1 : chunk.length;

      doWrite(stream, state, false, len, chunk, encoding, cb);
      entry = entry.next;
      // if we didn't call the onwrite immediately, then
      // it means that we need to wait until it does.
      // also, that means that the chunk and cb are currently
      // being processed, so move the buffer counter past them.
      if (state.writing) {
        break;
      }
    }

    if (entry === null) state.lastBufferedRequest = null;
  }

  state.bufferedRequestCount = 0;
  state.bufferedRequest = entry;
  state.bufferProcessing = false;
}

Writable.prototype._write = function (chunk, encoding, cb) {
  cb(new Error('_write() is not implemented'));
};

Writable.prototype._writev = null;

Writable.prototype.end = function (chunk, encoding, cb) {
  var state = this._writableState;

  if (typeof chunk === 'function') {
    cb = chunk;
    chunk = null;
    encoding = null;
  } else if (typeof encoding === 'function') {
    cb = encoding;
    encoding = null;
  }

  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);

  // .end() fully uncorks
  if (state.corked) {
    state.corked = 1;
    this.uncork();
  }

  // ignore unnecessary end() calls.
  if (!state.ending && !state.finished) endWritable(this, state, cb);
};

function needFinish(state) {
  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;
}
function callFinal(stream, state) {
  stream._final(function (err) {
    state.pendingcb--;
    if (err) {
      stream.emit('error', err);
    }
    state.prefinished = true;
    stream.emit('prefinish');
    finishMaybe(stream, state);
  });
}
function prefinish(stream, state) {
  if (!state.prefinished && !state.finalCalled) {
    if (typeof stream._final === 'function') {
      state.pendingcb++;
      state.finalCalled = true;
      processNextTick(callFinal, stream, state);
    } else {
      state.prefinished = true;
      stream.emit('prefinish');
    }
  }
}

function finishMaybe(stream, state) {
  var need = needFinish(state);
  if (need) {
    prefinish(stream, state);
    if (state.pendingcb === 0) {
      state.finished = true;
      stream.emit('finish');
    }
  }
  return need;
}

function endWritable(stream, state, cb) {
  state.ending = true;
  finishMaybe(stream, state);
  if (cb) {
    if (state.finished) processNextTick(cb);else stream.once('finish', cb);
  }
  state.ended = true;
  stream.writable = false;
}

function onCorkedFinish(corkReq, state, err) {
  var entry = corkReq.entry;
  corkReq.entry = null;
  while (entry) {
    var cb = entry.callback;
    state.pendingcb--;
    cb(err);
    entry = entry.next;
  }
  if (state.corkedRequestsFree) {
    state.corkedRequestsFree.next = corkReq;
  } else {
    state.corkedRequestsFree = corkReq;
  }
}

Object.defineProperty(Writable.prototype, 'destroyed', {
  get: function () {
    if (this._writableState === undefined) {
      return false;
    }
    return this._writableState.destroyed;
  },
  set: function (value) {
    // we ignore the value if the stream
    // has not been initialized yet
    if (!this._writableState) {
      return;
    }

    // backward compatibility, the user is explicitly
    // managing destroyed
    this._writableState.destroyed = value;
  }
});

Writable.prototype.destroy = destroyImpl.destroy;
Writable.prototype._undestroy = destroyImpl.undestroy;
Writable.prototype._destroy = function (err, cb) {
  this.end();
  cb(err);
};
/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(66), __webpack_require__(480).setImmediate, __webpack_require__(40)))

/***/ }),
/* 181 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// a transform stream is a readable/writable stream where you do
// something with the data.  Sometimes it's called a "filter",
// but that's not a great name for it, since that implies a thing where
// some bits pass through, and others are simply ignored.  (That would
// be a valid example of a transform, of course.)
//
// While the output is causally related to the input, it's not a
// necessarily symmetric or synchronous transformation.  For example,
// a zlib stream might take multiple plain-text writes(), and then
// emit a single compressed chunk some time in the future.
//
// Here's how this works:
//
// The Transform stream has all the aspects of the readable and writable
// stream classes.  When you write(chunk), that calls _write(chunk,cb)
// internally, and returns false if there's a lot of pending writes
// buffered up.  When you call read(), that calls _read(n) until
// there's enough pending readable data buffered up.
//
// In a transform stream, the written data is placed in a buffer.  When
// _read(n) is called, it transforms the queued up data, calling the
// buffered _write cb's as it consumes chunks.  If consuming a single
// written chunk would result in multiple output chunks, then the first
// outputted bit calls the readcb, and subsequent chunks just go into
// the read buffer, and will cause it to emit 'readable' if necessary.
//
// This way, back-pressure is actually determined by the reading side,
// since _read has to be called to start processing a new chunk.  However,
// a pathological inflate type of transform can cause excessive buffering
// here.  For example, imagine a stream where every byte of input is
// interpreted as an integer from 0-255, and then results in that many
// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in
// 1kb of data being output.  In this case, you could write a very small
// amount of input, and end up with a very large amount of output.  In
// such a pathological inflating mechanism, there'd be no way to tell
// the system to stop doing the transform.  A single 4MB write could
// cause the system to run out of memory.
//
// However, even in such a pathological case, only a single written chunk
// would be consumed, and then the rest would wait (un-transformed) until
// the results of the previous transformed chunk were consumed.



module.exports = Transform;

var Duplex = __webpack_require__(52);

/*<replacement>*/
var util = __webpack_require__(67);
util.inherits = __webpack_require__(58);
/*</replacement>*/

util.inherits(Transform, Duplex);

function TransformState(stream) {
  this.afterTransform = function (er, data) {
    return afterTransform(stream, er, data);
  };

  this.needTransform = false;
  this.transforming = false;
  this.writecb = null;
  this.writechunk = null;
  this.writeencoding = null;
}

function afterTransform(stream, er, data) {
  var ts = stream._transformState;
  ts.transforming = false;

  var cb = ts.writecb;

  if (!cb) {
    return stream.emit('error', new Error('write callback called multiple times'));
  }

  ts.writechunk = null;
  ts.writecb = null;

  if (data !== null && data !== undefined) stream.push(data);

  cb(er);

  var rs = stream._readableState;
  rs.reading = false;
  if (rs.needReadable || rs.length < rs.highWaterMark) {
    stream._read(rs.highWaterMark);
  }
}

function Transform(options) {
  if (!(this instanceof Transform)) return new Transform(options);

  Duplex.call(this, options);

  this._transformState = new TransformState(this);

  var stream = this;

  // start out asking for a readable event once data is transformed.
  this._readableState.needReadable = true;

  // we have implemented the _read method, and done the other things
  // that Readable wants before the first _read call, so unset the
  // sync guard flag.
  this._readableState.sync = false;

  if (options) {
    if (typeof options.transform === 'function') this._transform = options.transform;

    if (typeof options.flush === 'function') this._flush = options.flush;
  }

  // When the writable side finishes, then flush out anything remaining.
  this.once('prefinish', function () {
    if (typeof this._flush === 'function') this._flush(function (er, data) {
      done(stream, er, data);
    });else done(stream);
  });
}

Transform.prototype.push = function (chunk, encoding) {
  this._transformState.needTransform = false;
  return Duplex.prototype.push.call(this, chunk, encoding);
};

// This is the part where you do stuff!
// override this function in implementation classes.
// 'chunk' is an input chunk.
//
// Call `push(newChunk)` to pass along transformed output
// to the readable side.  You may call 'push' zero or more times.
//
// Call `cb(err)` when you are done with this chunk.  If you pass
// an error, then that'll put the hurt on the whole operation.  If you
// never call cb(), then you'll never get another chunk.
Transform.prototype._transform = function (chunk, encoding, cb) {
  throw new Error('_transform() is not implemented');
};

Transform.prototype._write = function (chunk, encoding, cb) {
  var ts = this._transformState;
  ts.writecb = cb;
  ts.writechunk = chunk;
  ts.writeencoding = encoding;
  if (!ts.transforming) {
    var rs = this._readableState;
    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);
  }
};

// Doesn't matter what the args are here.
// _transform does all the work.
// That we got here means that the readable side wants more data.
Transform.prototype._read = function (n) {
  var ts = this._transformState;

  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {
    ts.transforming = true;
    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);
  } else {
    // mark that we need a transform, so that any data that comes in
    // will get processed, now that we've asked for it.
    ts.needTransform = true;
  }
};

Transform.prototype._destroy = function (err, cb) {
  var _this = this;

  Duplex.prototype._destroy.call(this, err, function (err2) {
    cb(err2);
    _this.emit('close');
  });
};

function done(stream, er, data) {
  if (er) return stream.emit('error', er);

  if (data !== null && data !== undefined) stream.push(data);

  // if there's nothing in the write buffer, then that means
  // that nothing more will ever be provided
  var ws = stream._writableState;
  var ts = stream._transformState;

  if (ws.length) throw new Error('Calling transform done when ws.length != 0');

  if (ts.transforming) throw new Error('Calling transform done when still transforming');

  return stream.push(null);
}

/***/ }),
/* 182 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(183);
__webpack_require__(380);
module.exports = __webpack_require__(512);


/***/ }),
/* 183 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(184);
__webpack_require__(186);
__webpack_require__(187);
__webpack_require__(188);
__webpack_require__(189);
__webpack_require__(190);
__webpack_require__(191);
__webpack_require__(192);
__webpack_require__(193);
__webpack_require__(194);
__webpack_require__(195);
__webpack_require__(196);
__webpack_require__(197);
__webpack_require__(198);
__webpack_require__(199);
__webpack_require__(200);
__webpack_require__(202);
__webpack_require__(203);
__webpack_require__(204);
__webpack_require__(205);
__webpack_require__(206);
__webpack_require__(207);
__webpack_require__(208);
__webpack_require__(209);
__webpack_require__(210);
__webpack_require__(211);
__webpack_require__(212);
__webpack_require__(213);
__webpack_require__(214);
__webpack_require__(215);
__webpack_require__(216);
__webpack_require__(217);
__webpack_require__(218);
__webpack_require__(219);
__webpack_require__(220);
__webpack_require__(221);
__webpack_require__(222);
__webpack_require__(223);
__webpack_require__(224);
__webpack_require__(225);
__webpack_require__(226);
__webpack_require__(227);
__webpack_require__(228);
__webpack_require__(229);
__webpack_require__(230);
__webpack_require__(231);
__webpack_require__(232);
__webpack_require__(233);
__webpack_require__(234);
__webpack_require__(235);
__webpack_require__(236);
__webpack_require__(237);
__webpack_require__(238);
__webpack_require__(239);
__webpack_require__(240);
__webpack_require__(241);
__webpack_require__(242);
__webpack_require__(243);
__webpack_require__(244);
__webpack_require__(245);
__webpack_require__(246);
__webpack_require__(247);
__webpack_require__(248);
__webpack_require__(249);
__webpack_require__(250);
__webpack_require__(251);
__webpack_require__(252);
__webpack_require__(253);
__webpack_require__(254);
__webpack_require__(255);
__webpack_require__(256);
__webpack_require__(257);
__webpack_require__(258);
__webpack_require__(259);
__webpack_require__(260);
__webpack_require__(261);
__webpack_require__(262);
__webpack_require__(264);
__webpack_require__(265);
__webpack_require__(267);
__webpack_require__(268);
__webpack_require__(269);
__webpack_require__(270);
__webpack_require__(271);
__webpack_require__(272);
__webpack_require__(273);
__webpack_require__(275);
__webpack_require__(276);
__webpack_require__(277);
__webpack_require__(278);
__webpack_require__(279);
__webpack_require__(280);
__webpack_require__(281);
__webpack_require__(282);
__webpack_require__(283);
__webpack_require__(284);
__webpack_require__(285);
__webpack_require__(286);
__webpack_require__(287);
__webpack_require__(112);
__webpack_require__(288);
__webpack_require__(289);
__webpack_require__(140);
__webpack_require__(290);
__webpack_require__(291);
__webpack_require__(292);
__webpack_require__(293);
__webpack_require__(294);
__webpack_require__(143);
__webpack_require__(145);
__webpack_require__(146);
__webpack_require__(295);
__webpack_require__(296);
__webpack_require__(297);
__webpack_require__(298);
__webpack_require__(299);
__webpack_require__(300);
__webpack_require__(301);
__webpack_require__(302);
__webpack_require__(303);
__webpack_require__(304);
__webpack_require__(305);
__webpack_require__(306);
__webpack_require__(307);
__webpack_require__(308);
__webpack_require__(309);
__webpack_require__(310);
__webpack_require__(311);
__webpack_require__(312);
__webpack_require__(313);
__webpack_require__(314);
__webpack_require__(315);
__webpack_require__(316);
__webpack_require__(317);
__webpack_require__(318);
__webpack_require__(319);
__webpack_require__(320);
__webpack_require__(321);
__webpack_require__(322);
__webpack_require__(323);
__webpack_require__(324);
__webpack_require__(325);
__webpack_require__(326);
__webpack_require__(327);
__webpack_require__(328);
__webpack_require__(329);
__webpack_require__(330);
__webpack_require__(331);
__webpack_require__(332);
__webpack_require__(333);
__webpack_require__(334);
__webpack_require__(335);
__webpack_require__(336);
__webpack_require__(337);
__webpack_require__(338);
__webpack_require__(339);
__webpack_require__(340);
__webpack_require__(341);
__webpack_require__(342);
__webpack_require__(343);
__webpack_require__(344);
__webpack_require__(345);
__webpack_require__(346);
__webpack_require__(347);
__webpack_require__(348);
__webpack_require__(349);
__webpack_require__(350);
__webpack_require__(351);
__webpack_require__(352);
__webpack_require__(353);
__webpack_require__(354);
__webpack_require__(355);
__webpack_require__(356);
__webpack_require__(357);
__webpack_require__(358);
__webpack_require__(359);
__webpack_require__(360);
__webpack_require__(361);
__webpack_require__(362);
__webpack_require__(363);
__webpack_require__(364);
__webpack_require__(365);
__webpack_require__(366);
__webpack_require__(367);
__webpack_require__(368);
__webpack_require__(369);
__webpack_require__(370);
__webpack_require__(371);
__webpack_require__(372);
__webpack_require__(373);
__webpack_require__(374);
__webpack_require__(375);
__webpack_require__(376);
__webpack_require__(377);
__webpack_require__(378);
__webpack_require__(379);
module.exports = __webpack_require__(32);


/***/ }),
/* 184 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// ECMAScript 6 symbols shim
var global = __webpack_require__(5);
var has = __webpack_require__(16);
var DESCRIPTORS = __webpack_require__(10);
var $export = __webpack_require__(0);
var redefine = __webpack_require__(18);
var META = __webpack_require__(38).KEY;
var $fails = __webpack_require__(6);
var shared = __webpack_require__(68);
var setToStringTag = __webpack_require__(53);
var uid = __webpack_require__(42);
var wks = __webpack_require__(9);
var wksExt = __webpack_require__(123);
var wksDefine = __webpack_require__(92);
var enumKeys = __webpack_require__(185);
var isArray = __webpack_require__(71);
var anObject = __webpack_require__(3);
var toIObject = __webpack_require__(20);
var toPrimitive = __webpack_require__(27);
var createDesc = __webpack_require__(41);
var _create = __webpack_require__(46);
var gOPNExt = __webpack_require__(126);
var $GOPD = __webpack_require__(21);
var $DP = __webpack_require__(11);
var $keys = __webpack_require__(44);
var gOPD = $GOPD.f;
var dP = $DP.f;
var gOPN = gOPNExt.f;
var $Symbol = global.Symbol;
var $JSON = global.JSON;
var _stringify = $JSON && $JSON.stringify;
var PROTOTYPE = 'prototype';
var HIDDEN = wks('_hidden');
var TO_PRIMITIVE = wks('toPrimitive');
var isEnum = {}.propertyIsEnumerable;
var SymbolRegistry = shared('symbol-registry');
var AllSymbols = shared('symbols');
var OPSymbols = shared('op-symbols');
var ObjectProto = Object[PROTOTYPE];
var USE_NATIVE = typeof $Symbol == 'function';
var QObject = global.QObject;
// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173
var setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;

// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687
var setSymbolDesc = DESCRIPTORS && $fails(function () {
  return _create(dP({}, 'a', {
    get: function () { return dP(this, 'a', { value: 7 }).a; }
  })).a != 7;
}) ? function (it, key, D) {
  var protoDesc = gOPD(ObjectProto, key);
  if (protoDesc) delete ObjectProto[key];
  dP(it, key, D);
  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);
} : dP;

var wrap = function (tag) {
  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);
  sym._k = tag;
  return sym;
};

var isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {
  return typeof it == 'symbol';
} : function (it) {
  return it instanceof $Symbol;
};

var $defineProperty = function defineProperty(it, key, D) {
  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);
  anObject(it);
  key = toPrimitive(key, true);
  anObject(D);
  if (has(AllSymbols, key)) {
    if (!D.enumerable) {
      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));
      it[HIDDEN][key] = true;
    } else {
      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;
      D = _create(D, { enumerable: createDesc(0, false) });
    } return setSymbolDesc(it, key, D);
  } return dP(it, key, D);
};
var $defineProperties = function defineProperties(it, P) {
  anObject(it);
  var keys = enumKeys(P = toIObject(P));
  var i = 0;
  var l = keys.length;
  var key;
  while (l > i) $defineProperty(it, key = keys[i++], P[key]);
  return it;
};
var $create = function create(it, P) {
  return P === undefined ? _create(it) : $defineProperties(_create(it), P);
};
var $propertyIsEnumerable = function propertyIsEnumerable(key) {
  var E = isEnum.call(this, key = toPrimitive(key, true));
  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;
  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;
};
var $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {
  it = toIObject(it);
  key = toPrimitive(key, true);
  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;
  var D = gOPD(it, key);
  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;
  return D;
};
var $getOwnPropertyNames = function getOwnPropertyNames(it) {
  var names = gOPN(toIObject(it));
  var result = [];
  var i = 0;
  var key;
  while (names.length > i) {
    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);
  } return result;
};
var $getOwnPropertySymbols = function getOwnPropertySymbols(it) {
  var IS_OP = it === ObjectProto;
  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));
  var result = [];
  var i = 0;
  var key;
  while (names.length > i) {
    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);
  } return result;
};

// 19.4.1.1 Symbol([description])
if (!USE_NATIVE) {
  $Symbol = function Symbol() {
    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');
    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);
    var $set = function (value) {
      if (this === ObjectProto) $set.call(OPSymbols, value);
      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;
      setSymbolDesc(this, tag, createDesc(1, value));
    };
    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });
    return wrap(tag);
  };
  redefine($Symbol[PROTOTYPE], 'toString', function toString() {
    return this._k;
  });

  $GOPD.f = $getOwnPropertyDescriptor;
  $DP.f = $defineProperty;
  __webpack_require__(47).f = gOPNExt.f = $getOwnPropertyNames;
  __webpack_require__(60).f = $propertyIsEnumerable;
  __webpack_require__(70).f = $getOwnPropertySymbols;

  if (DESCRIPTORS && !__webpack_require__(43)) {
    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);
  }

  wksExt.f = function (name) {
    return wrap(wks(name));
  };
}

$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });

for (var es6Symbols = (
  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14
  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'
).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);

for (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);

$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {
  // 19.4.2.1 Symbol.for(key)
  'for': function (key) {
    return has(SymbolRegistry, key += '')
      ? SymbolRegistry[key]
      : SymbolRegistry[key] = $Symbol(key);
  },
  // 19.4.2.5 Symbol.keyFor(sym)
  keyFor: function keyFor(sym) {
    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');
    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;
  },
  useSetter: function () { setter = true; },
  useSimple: function () { setter = false; }
});

$export($export.S + $export.F * !USE_NATIVE, 'Object', {
  // 19.1.2.2 Object.create(O [, Properties])
  create: $create,
  // 19.1.2.4 Object.defineProperty(O, P, Attributes)
  defineProperty: $defineProperty,
  // 19.1.2.3 Object.defineProperties(O, Properties)
  defineProperties: $defineProperties,
  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)
  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,
  // 19.1.2.7 Object.getOwnPropertyNames(O)
  getOwnPropertyNames: $getOwnPropertyNames,
  // 19.1.2.8 Object.getOwnPropertySymbols(O)
  getOwnPropertySymbols: $getOwnPropertySymbols
});

// 24.3.2 JSON.stringify(value [, replacer [, space]])
$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {
  var S = $Symbol();
  // MS Edge converts symbol values to JSON as {}
  // WebKit converts symbol values to JSON as null
  // V8 throws on boxed symbols
  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';
})), 'JSON', {
  stringify: function stringify(it) {
    if (it === undefined || isSymbol(it)) return; // IE8 returns string on undefined
    var args = [it];
    var i = 1;
    var replacer, $replacer;
    while (arguments.length > i) args.push(arguments[i++]);
    replacer = args[1];
    if (typeof replacer == 'function') $replacer = replacer;
    if ($replacer || !isArray(replacer)) replacer = function (key, value) {
      if ($replacer) value = $replacer.call(this, key, value);
      if (!isSymbol(value)) return value;
    };
    args[1] = replacer;
    return _stringify.apply($JSON, args);
  }
});

// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)
$Symbol[PROTOTYPE][TO_PRIMITIVE] || __webpack_require__(17)($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);
// 19.4.3.5 Symbol.prototype[@@toStringTag]
setToStringTag($Symbol, 'Symbol');
// 20.2.1.9 Math[@@toStringTag]
setToStringTag(Math, 'Math', true);
// 24.3.3 JSON[@@toStringTag]
setToStringTag(global.JSON, 'JSON', true);


/***/ }),
/* 185 */
/***/ (function(module, exports, __webpack_require__) {

// all enumerable object keys, includes symbols
var getKeys = __webpack_require__(44);
var gOPS = __webpack_require__(70);
var pIE = __webpack_require__(60);
module.exports = function (it) {
  var result = getKeys(it);
  var getSymbols = gOPS.f;
  if (getSymbols) {
    var symbols = getSymbols(it);
    var isEnum = pIE.f;
    var i = 0;
    var key;
    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);
  } return result;
};


/***/ }),
/* 186 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])
$export($export.S, 'Object', { create: __webpack_require__(46) });


/***/ }),
/* 187 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)
$export($export.S + $export.F * !__webpack_require__(10), 'Object', { defineProperty: __webpack_require__(11).f });


/***/ }),
/* 188 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)
$export($export.S + $export.F * !__webpack_require__(10), 'Object', { defineProperties: __webpack_require__(125) });


/***/ }),
/* 189 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)
var toIObject = __webpack_require__(20);
var $getOwnPropertyDescriptor = __webpack_require__(21).f;

__webpack_require__(30)('getOwnPropertyDescriptor', function () {
  return function getOwnPropertyDescriptor(it, key) {
    return $getOwnPropertyDescriptor(toIObject(it), key);
  };
});


/***/ }),
/* 190 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.9 Object.getPrototypeOf(O)
var toObject = __webpack_require__(13);
var $getPrototypeOf = __webpack_require__(22);

__webpack_require__(30)('getPrototypeOf', function () {
  return function getPrototypeOf(it) {
    return $getPrototypeOf(toObject(it));
  };
});


/***/ }),
/* 191 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.14 Object.keys(O)
var toObject = __webpack_require__(13);
var $keys = __webpack_require__(44);

__webpack_require__(30)('keys', function () {
  return function keys(it) {
    return $keys(toObject(it));
  };
});


/***/ }),
/* 192 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.7 Object.getOwnPropertyNames(O)
__webpack_require__(30)('getOwnPropertyNames', function () {
  return __webpack_require__(126).f;
});


/***/ }),
/* 193 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.5 Object.freeze(O)
var isObject = __webpack_require__(7);
var meta = __webpack_require__(38).onFreeze;

__webpack_require__(30)('freeze', function ($freeze) {
  return function freeze(it) {
    return $freeze && isObject(it) ? $freeze(meta(it)) : it;
  };
});


/***/ }),
/* 194 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.17 Object.seal(O)
var isObject = __webpack_require__(7);
var meta = __webpack_require__(38).onFreeze;

__webpack_require__(30)('seal', function ($seal) {
  return function seal(it) {
    return $seal && isObject(it) ? $seal(meta(it)) : it;
  };
});


/***/ }),
/* 195 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.15 Object.preventExtensions(O)
var isObject = __webpack_require__(7);
var meta = __webpack_require__(38).onFreeze;

__webpack_require__(30)('preventExtensions', function ($preventExtensions) {
  return function preventExtensions(it) {
    return $preventExtensions && isObject(it) ? $preventExtensions(meta(it)) : it;
  };
});


/***/ }),
/* 196 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.12 Object.isFrozen(O)
var isObject = __webpack_require__(7);

__webpack_require__(30)('isFrozen', function ($isFrozen) {
  return function isFrozen(it) {
    return isObject(it) ? $isFrozen ? $isFrozen(it) : false : true;
  };
});


/***/ }),
/* 197 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.13 Object.isSealed(O)
var isObject = __webpack_require__(7);

__webpack_require__(30)('isSealed', function ($isSealed) {
  return function isSealed(it) {
    return isObject(it) ? $isSealed ? $isSealed(it) : false : true;
  };
});


/***/ }),
/* 198 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.11 Object.isExtensible(O)
var isObject = __webpack_require__(7);

__webpack_require__(30)('isExtensible', function ($isExtensible) {
  return function isExtensible(it) {
    return isObject(it) ? $isExtensible ? $isExtensible(it) : true : false;
  };
});


/***/ }),
/* 199 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.3.1 Object.assign(target, source)
var $export = __webpack_require__(0);

$export($export.S + $export.F, 'Object', { assign: __webpack_require__(127) });


/***/ }),
/* 200 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.3.10 Object.is(value1, value2)
var $export = __webpack_require__(0);
$export($export.S, 'Object', { is: __webpack_require__(201) });


/***/ }),
/* 201 */
/***/ (function(module, exports) {

// 7.2.9 SameValue(x, y)
module.exports = Object.is || function is(x, y) {
  // eslint-disable-next-line no-self-compare
  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;
};


/***/ }),
/* 202 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.3.19 Object.setPrototypeOf(O, proto)
var $export = __webpack_require__(0);
$export($export.S, 'Object', { setPrototypeOf: __webpack_require__(96).set });


/***/ }),
/* 203 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 19.1.3.6 Object.prototype.toString()
var classof = __webpack_require__(61);
var test = {};
test[__webpack_require__(9)('toStringTag')] = 'z';
if (test + '' != '[object z]') {
  __webpack_require__(18)(Object.prototype, 'toString', function toString() {
    return '[object ' + classof(this) + ']';
  }, true);
}


/***/ }),
/* 204 */
/***/ (function(module, exports, __webpack_require__) {

// 19.2.3.2 / 15.3.4.5 Function.prototype.bind(thisArg, args...)
var $export = __webpack_require__(0);

$export($export.P, 'Function', { bind: __webpack_require__(128) });


/***/ }),
/* 205 */
/***/ (function(module, exports, __webpack_require__) {

var dP = __webpack_require__(11).f;
var FProto = Function.prototype;
var nameRE = /^\s*function ([^ (]*)/;
var NAME = 'name';

// 19.2.4.2 name
NAME in FProto || __webpack_require__(10) && dP(FProto, NAME, {
  configurable: true,
  get: function () {
    try {
      return ('' + this).match(nameRE)[1];
    } catch (e) {
      return '';
    }
  }
});


/***/ }),
/* 206 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isObject = __webpack_require__(7);
var getPrototypeOf = __webpack_require__(22);
var HAS_INSTANCE = __webpack_require__(9)('hasInstance');
var FunctionProto = Function.prototype;
// 19.2.3.6 Function.prototype[@@hasInstance](V)
if (!(HAS_INSTANCE in FunctionProto)) __webpack_require__(11).f(FunctionProto, HAS_INSTANCE, { value: function (O) {
  if (typeof this != 'function' || !isObject(O)) return false;
  if (!isObject(this.prototype)) return O instanceof this;
  // for environment w/o native `@@hasInstance` logic enough `instanceof`, but add this:
  while (O = getPrototypeOf(O)) if (this.prototype === O) return true;
  return false;
} });


/***/ }),
/* 207 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
var $parseInt = __webpack_require__(130);
// 18.2.5 parseInt(string, radix)
$export($export.G + $export.F * (parseInt != $parseInt), { parseInt: $parseInt });


/***/ }),
/* 208 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
var $parseFloat = __webpack_require__(131);
// 18.2.4 parseFloat(string)
$export($export.G + $export.F * (parseFloat != $parseFloat), { parseFloat: $parseFloat });


/***/ }),
/* 209 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global = __webpack_require__(5);
var has = __webpack_require__(16);
var cof = __webpack_require__(24);
var inheritIfRequired = __webpack_require__(98);
var toPrimitive = __webpack_require__(27);
var fails = __webpack_require__(6);
var gOPN = __webpack_require__(47).f;
var gOPD = __webpack_require__(21).f;
var dP = __webpack_require__(11).f;
var $trim = __webpack_require__(54).trim;
var NUMBER = 'Number';
var $Number = global[NUMBER];
var Base = $Number;
var proto = $Number.prototype;
// Opera ~12 has broken Object#toString
var BROKEN_COF = cof(__webpack_require__(46)(proto)) == NUMBER;
var TRIM = 'trim' in String.prototype;

// 7.1.3 ToNumber(argument)
var toNumber = function (argument) {
  var it = toPrimitive(argument, false);
  if (typeof it == 'string' && it.length > 2) {
    it = TRIM ? it.trim() : $trim(it, 3);
    var first = it.charCodeAt(0);
    var third, radix, maxCode;
    if (first === 43 || first === 45) {
      third = it.charCodeAt(2);
      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix
    } else if (first === 48) {
      switch (it.charCodeAt(1)) {
        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal /^0b[01]+$/i
        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal /^0o[0-7]+$/i
        default: return +it;
      }
      for (var digits = it.slice(2), i = 0, l = digits.length, code; i < l; i++) {
        code = digits.charCodeAt(i);
        // parseInt parses a string to a first unavailable symbol
        // but ToNumber should return NaN if a string contains unavailable symbols
        if (code < 48 || code > maxCode) return NaN;
      } return parseInt(digits, radix);
    }
  } return +it;
};

if (!$Number(' 0o1') || !$Number('0b1') || $Number('+0x1')) {
  $Number = function Number(value) {
    var it = arguments.length < 1 ? 0 : value;
    var that = this;
    return that instanceof $Number
      // check on 1..constructor(foo) case
      && (BROKEN_COF ? fails(function () { proto.valueOf.call(that); }) : cof(that) != NUMBER)
        ? inheritIfRequired(new Base(toNumber(it)), that, $Number) : toNumber(it);
  };
  for (var keys = __webpack_require__(10) ? gOPN(Base) : (
    // ES3:
    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +
    // ES6 (in case, if modules with ES6 Number statics required before):
    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +
    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'
  ).split(','), j = 0, key; keys.length > j; j++) {
    if (has(Base, key = keys[j]) && !has($Number, key)) {
      dP($Number, key, gOPD(Base, key));
    }
  }
  $Number.prototype = proto;
  proto.constructor = $Number;
  __webpack_require__(18)(global, NUMBER, $Number);
}


/***/ }),
/* 210 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var toInteger = __webpack_require__(29);
var aNumberValue = __webpack_require__(132);
var repeat = __webpack_require__(99);
var $toFixed = 1.0.toFixed;
var floor = Math.floor;
var data = [0, 0, 0, 0, 0, 0];
var ERROR = 'Number.toFixed: incorrect invocation!';
var ZERO = '0';

var multiply = function (n, c) {
  var i = -1;
  var c2 = c;
  while (++i < 6) {
    c2 += n * data[i];
    data[i] = c2 % 1e7;
    c2 = floor(c2 / 1e7);
  }
};
var divide = function (n) {
  var i = 6;
  var c = 0;
  while (--i >= 0) {
    c += data[i];
    data[i] = floor(c / n);
    c = (c % n) * 1e7;
  }
};
var numToString = function () {
  var i = 6;
  var s = '';
  while (--i >= 0) {
    if (s !== '' || i === 0 || data[i] !== 0) {
      var t = String(data[i]);
      s = s === '' ? t : s + repeat.call(ZERO, 7 - t.length) + t;
    }
  } return s;
};
var pow = function (x, n, acc) {
  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);
};
var log = function (x) {
  var n = 0;
  var x2 = x;
  while (x2 >= 4096) {
    n += 12;
    x2 /= 4096;
  }
  while (x2 >= 2) {
    n += 1;
    x2 /= 2;
  } return n;
};

$export($export.P + $export.F * (!!$toFixed && (
  0.00008.toFixed(3) !== '0.000' ||
  0.9.toFixed(0) !== '1' ||
  1.255.toFixed(2) !== '1.25' ||
  1000000000000000128.0.toFixed(0) !== '1000000000000000128'
) || !__webpack_require__(6)(function () {
  // V8 ~ Android 4.3-
  $toFixed.call({});
})), 'Number', {
  toFixed: function toFixed(fractionDigits) {
    var x = aNumberValue(this, ERROR);
    var f = toInteger(fractionDigits);
    var s = '';
    var m = ZERO;
    var e, z, j, k;
    if (f < 0 || f > 20) throw RangeError(ERROR);
    // eslint-disable-next-line no-self-compare
    if (x != x) return 'NaN';
    if (x <= -1e21 || x >= 1e21) return String(x);
    if (x < 0) {
      s = '-';
      x = -x;
    }
    if (x > 1e-21) {
      e = log(x * pow(2, 69, 1)) - 69;
      z = e < 0 ? x * pow(2, -e, 1) : x / pow(2, e, 1);
      z *= 0x10000000000000;
      e = 52 - e;
      if (e > 0) {
        multiply(0, z);
        j = f;
        while (j >= 7) {
          multiply(1e7, 0);
          j -= 7;
        }
        multiply(pow(10, j, 1), 0);
        j = e - 1;
        while (j >= 23) {
          divide(1 << 23);
          j -= 23;
        }
        divide(1 << j);
        multiply(1, 1);
        divide(2);
        m = numToString();
      } else {
        multiply(0, z);
        multiply(1 << -e, 0);
        m = numToString() + repeat.call(ZERO, f);
      }
    }
    if (f > 0) {
      k = m.length;
      m = s + (k <= f ? '0.' + repeat.call(ZERO, f - k) + m : m.slice(0, k - f) + '.' + m.slice(k - f));
    } else {
      m = s + m;
    } return m;
  }
});


/***/ }),
/* 211 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $fails = __webpack_require__(6);
var aNumberValue = __webpack_require__(132);
var $toPrecision = 1.0.toPrecision;

$export($export.P + $export.F * ($fails(function () {
  // IE7-
  return $toPrecision.call(1, undefined) !== '1';
}) || !$fails(function () {
  // V8 ~ Android 4.3-
  $toPrecision.call({});
})), 'Number', {
  toPrecision: function toPrecision(precision) {
    var that = aNumberValue(this, 'Number#toPrecision: incorrect invocation!');
    return precision === undefined ? $toPrecision.call(that) : $toPrecision.call(that, precision);
  }
});


/***/ }),
/* 212 */
/***/ (function(module, exports, __webpack_require__) {

// 20.1.2.1 Number.EPSILON
var $export = __webpack_require__(0);

$export($export.S, 'Number', { EPSILON: Math.pow(2, -52) });


/***/ }),
/* 213 */
/***/ (function(module, exports, __webpack_require__) {

// 20.1.2.2 Number.isFinite(number)
var $export = __webpack_require__(0);
var _isFinite = __webpack_require__(5).isFinite;

$export($export.S, 'Number', {
  isFinite: function isFinite(it) {
    return typeof it == 'number' && _isFinite(it);
  }
});


/***/ }),
/* 214 */
/***/ (function(module, exports, __webpack_require__) {

// 20.1.2.3 Number.isInteger(number)
var $export = __webpack_require__(0);

$export($export.S, 'Number', { isInteger: __webpack_require__(133) });


/***/ }),
/* 215 */
/***/ (function(module, exports, __webpack_require__) {

// 20.1.2.4 Number.isNaN(number)
var $export = __webpack_require__(0);

$export($export.S, 'Number', {
  isNaN: function isNaN(number) {
    // eslint-disable-next-line no-self-compare
    return number != number;
  }
});


/***/ }),
/* 216 */
/***/ (function(module, exports, __webpack_require__) {

// 20.1.2.5 Number.isSafeInteger(number)
var $export = __webpack_require__(0);
var isInteger = __webpack_require__(133);
var abs = Math.abs;

$export($export.S, 'Number', {
  isSafeInteger: function isSafeInteger(number) {
    return isInteger(number) && abs(number) <= 0x1fffffffffffff;
  }
});


/***/ }),
/* 217 */
/***/ (function(module, exports, __webpack_require__) {

// 20.1.2.6 Number.MAX_SAFE_INTEGER
var $export = __webpack_require__(0);

$export($export.S, 'Number', { MAX_SAFE_INTEGER: 0x1fffffffffffff });


/***/ }),
/* 218 */
/***/ (function(module, exports, __webpack_require__) {

// 20.1.2.10 Number.MIN_SAFE_INTEGER
var $export = __webpack_require__(0);

$export($export.S, 'Number', { MIN_SAFE_INTEGER: -0x1fffffffffffff });


/***/ }),
/* 219 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
var $parseFloat = __webpack_require__(131);
// 20.1.2.12 Number.parseFloat(string)
$export($export.S + $export.F * (Number.parseFloat != $parseFloat), 'Number', { parseFloat: $parseFloat });


/***/ }),
/* 220 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
var $parseInt = __webpack_require__(130);
// 20.1.2.13 Number.parseInt(string, radix)
$export($export.S + $export.F * (Number.parseInt != $parseInt), 'Number', { parseInt: $parseInt });


/***/ }),
/* 221 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.3 Math.acosh(x)
var $export = __webpack_require__(0);
var log1p = __webpack_require__(134);
var sqrt = Math.sqrt;
var $acosh = Math.acosh;

$export($export.S + $export.F * !($acosh
  // V8 bug: https://code.google.com/p/v8/issues/detail?id=3509
  && Math.floor($acosh(Number.MAX_VALUE)) == 710
  // Tor Browser bug: Math.acosh(Infinity) -> NaN
  && $acosh(Infinity) == Infinity
), 'Math', {
  acosh: function acosh(x) {
    return (x = +x) < 1 ? NaN : x > 94906265.62425156
      ? Math.log(x) + Math.LN2
      : log1p(x - 1 + sqrt(x - 1) * sqrt(x + 1));
  }
});


/***/ }),
/* 222 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.5 Math.asinh(x)
var $export = __webpack_require__(0);
var $asinh = Math.asinh;

function asinh(x) {
  return !isFinite(x = +x) || x == 0 ? x : x < 0 ? -asinh(-x) : Math.log(x + Math.sqrt(x * x + 1));
}

// Tor Browser bug: Math.asinh(0) -> -0
$export($export.S + $export.F * !($asinh && 1 / $asinh(0) > 0), 'Math', { asinh: asinh });


/***/ }),
/* 223 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.7 Math.atanh(x)
var $export = __webpack_require__(0);
var $atanh = Math.atanh;

// Tor Browser bug: Math.atanh(-0) -> 0
$export($export.S + $export.F * !($atanh && 1 / $atanh(-0) < 0), 'Math', {
  atanh: function atanh(x) {
    return (x = +x) == 0 ? x : Math.log((1 + x) / (1 - x)) / 2;
  }
});


/***/ }),
/* 224 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.9 Math.cbrt(x)
var $export = __webpack_require__(0);
var sign = __webpack_require__(100);

$export($export.S, 'Math', {
  cbrt: function cbrt(x) {
    return sign(x = +x) * Math.pow(Math.abs(x), 1 / 3);
  }
});


/***/ }),
/* 225 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.11 Math.clz32(x)
var $export = __webpack_require__(0);

$export($export.S, 'Math', {
  clz32: function clz32(x) {
    return (x >>>= 0) ? 31 - Math.floor(Math.log(x + 0.5) * Math.LOG2E) : 32;
  }
});


/***/ }),
/* 226 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.12 Math.cosh(x)
var $export = __webpack_require__(0);
var exp = Math.exp;

$export($export.S, 'Math', {
  cosh: function cosh(x) {
    return (exp(x = +x) + exp(-x)) / 2;
  }
});


/***/ }),
/* 227 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.14 Math.expm1(x)
var $export = __webpack_require__(0);
var $expm1 = __webpack_require__(101);

$export($export.S + $export.F * ($expm1 != Math.expm1), 'Math', { expm1: $expm1 });


/***/ }),
/* 228 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.16 Math.fround(x)
var $export = __webpack_require__(0);

$export($export.S, 'Math', { fround: __webpack_require__(135) });


/***/ }),
/* 229 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.17 Math.hypot([value1[, value2[, … ]]])
var $export = __webpack_require__(0);
var abs = Math.abs;

$export($export.S, 'Math', {
  hypot: function hypot(value1, value2) { // eslint-disable-line no-unused-vars
    var sum = 0;
    var i = 0;
    var aLen = arguments.length;
    var larg = 0;
    var arg, div;
    while (i < aLen) {
      arg = abs(arguments[i++]);
      if (larg < arg) {
        div = larg / arg;
        sum = sum * div * div + 1;
        larg = arg;
      } else if (arg > 0) {
        div = arg / larg;
        sum += div * div;
      } else sum += arg;
    }
    return larg === Infinity ? Infinity : larg * Math.sqrt(sum);
  }
});


/***/ }),
/* 230 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.18 Math.imul(x, y)
var $export = __webpack_require__(0);
var $imul = Math.imul;

// some WebKit versions fails with big numbers, some has wrong arity
$export($export.S + $export.F * __webpack_require__(6)(function () {
  return $imul(0xffffffff, 5) != -5 || $imul.length != 2;
}), 'Math', {
  imul: function imul(x, y) {
    var UINT16 = 0xffff;
    var xn = +x;
    var yn = +y;
    var xl = UINT16 & xn;
    var yl = UINT16 & yn;
    return 0 | xl * yl + ((UINT16 & xn >>> 16) * yl + xl * (UINT16 & yn >>> 16) << 16 >>> 0);
  }
});


/***/ }),
/* 231 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.21 Math.log10(x)
var $export = __webpack_require__(0);

$export($export.S, 'Math', {
  log10: function log10(x) {
    return Math.log(x) * Math.LOG10E;
  }
});


/***/ }),
/* 232 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.20 Math.log1p(x)
var $export = __webpack_require__(0);

$export($export.S, 'Math', { log1p: __webpack_require__(134) });


/***/ }),
/* 233 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.22 Math.log2(x)
var $export = __webpack_require__(0);

$export($export.S, 'Math', {
  log2: function log2(x) {
    return Math.log(x) / Math.LN2;
  }
});


/***/ }),
/* 234 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.28 Math.sign(x)
var $export = __webpack_require__(0);

$export($export.S, 'Math', { sign: __webpack_require__(100) });


/***/ }),
/* 235 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.30 Math.sinh(x)
var $export = __webpack_require__(0);
var expm1 = __webpack_require__(101);
var exp = Math.exp;

// V8 near Chromium 38 has a problem with very small numbers
$export($export.S + $export.F * __webpack_require__(6)(function () {
  return !Math.sinh(-2e-17) != -2e-17;
}), 'Math', {
  sinh: function sinh(x) {
    return Math.abs(x = +x) < 1
      ? (expm1(x) - expm1(-x)) / 2
      : (exp(x - 1) - exp(-x - 1)) * (Math.E / 2);
  }
});


/***/ }),
/* 236 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.33 Math.tanh(x)
var $export = __webpack_require__(0);
var expm1 = __webpack_require__(101);
var exp = Math.exp;

$export($export.S, 'Math', {
  tanh: function tanh(x) {
    var a = expm1(x = +x);
    var b = expm1(-x);
    return a == Infinity ? 1 : b == Infinity ? -1 : (a - b) / (exp(x) + exp(-x));
  }
});


/***/ }),
/* 237 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.34 Math.trunc(x)
var $export = __webpack_require__(0);

$export($export.S, 'Math', {
  trunc: function trunc(it) {
    return (it > 0 ? Math.floor : Math.ceil)(it);
  }
});


/***/ }),
/* 238 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
var toAbsoluteIndex = __webpack_require__(45);
var fromCharCode = String.fromCharCode;
var $fromCodePoint = String.fromCodePoint;

// length should be 1, old FF problem
$export($export.S + $export.F * (!!$fromCodePoint && $fromCodePoint.length != 1), 'String', {
  // 21.1.2.2 String.fromCodePoint(...codePoints)
  fromCodePoint: function fromCodePoint(x) { // eslint-disable-line no-unused-vars
    var res = [];
    var aLen = arguments.length;
    var i = 0;
    var code;
    while (aLen > i) {
      code = +arguments[i++];
      if (toAbsoluteIndex(code, 0x10ffff) !== code) throw RangeError(code + ' is not a valid code point');
      res.push(code < 0x10000
        ? fromCharCode(code)
        : fromCharCode(((code -= 0x10000) >> 10) + 0xd800, code % 0x400 + 0xdc00)
      );
    } return res.join('');
  }
});


/***/ }),
/* 239 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
var toIObject = __webpack_require__(20);
var toLength = __webpack_require__(12);

$export($export.S, 'String', {
  // 21.1.2.4 String.raw(callSite, ...substitutions)
  raw: function raw(callSite) {
    var tpl = toIObject(callSite.raw);
    var len = toLength(tpl.length);
    var aLen = arguments.length;
    var res = [];
    var i = 0;
    while (len > i) {
      res.push(String(tpl[i++]));
      if (i < aLen) res.push(String(arguments[i]));
    } return res.join('');
  }
});


/***/ }),
/* 240 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 21.1.3.25 String.prototype.trim()
__webpack_require__(54)('trim', function ($trim) {
  return function trim() {
    return $trim(this, 3);
  };
});


/***/ }),
/* 241 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $at = __webpack_require__(102)(true);

// 21.1.3.27 String.prototype[@@iterator]()
__webpack_require__(103)(String, 'String', function (iterated) {
  this._t = String(iterated); // target
  this._i = 0;                // next index
// 21.1.5.2.1 %StringIteratorPrototype%.next()
}, function () {
  var O = this._t;
  var index = this._i;
  var point;
  if (index >= O.length) return { value: undefined, done: true };
  point = $at(O, index);
  this._i += point.length;
  return { value: point, done: false };
});


/***/ }),
/* 242 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $at = __webpack_require__(102)(false);
$export($export.P, 'String', {
  // 21.1.3.3 String.prototype.codePointAt(pos)
  codePointAt: function codePointAt(pos) {
    return $at(this, pos);
  }
});


/***/ }),
/* 243 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// 21.1.3.6 String.prototype.endsWith(searchString [, endPosition])

var $export = __webpack_require__(0);
var toLength = __webpack_require__(12);
var context = __webpack_require__(105);
var ENDS_WITH = 'endsWith';
var $endsWith = ''[ENDS_WITH];

$export($export.P + $export.F * __webpack_require__(106)(ENDS_WITH), 'String', {
  endsWith: function endsWith(searchString /* , endPosition = @length */) {
    var that = context(this, searchString, ENDS_WITH);
    var endPosition = arguments.length > 1 ? arguments[1] : undefined;
    var len = toLength(that.length);
    var end = endPosition === undefined ? len : Math.min(toLength(endPosition), len);
    var search = String(searchString);
    return $endsWith
      ? $endsWith.call(that, search, end)
      : that.slice(end - search.length, end) === search;
  }
});


/***/ }),
/* 244 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// 21.1.3.7 String.prototype.includes(searchString, position = 0)

var $export = __webpack_require__(0);
var context = __webpack_require__(105);
var INCLUDES = 'includes';

$export($export.P + $export.F * __webpack_require__(106)(INCLUDES), 'String', {
  includes: function includes(searchString /* , position = 0 */) {
    return !!~context(this, searchString, INCLUDES)
      .indexOf(searchString, arguments.length > 1 ? arguments[1] : undefined);
  }
});


/***/ }),
/* 245 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);

$export($export.P, 'String', {
  // 21.1.3.13 String.prototype.repeat(count)
  repeat: __webpack_require__(99)
});


/***/ }),
/* 246 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// 21.1.3.18 String.prototype.startsWith(searchString [, position ])

var $export = __webpack_require__(0);
var toLength = __webpack_require__(12);
var context = __webpack_require__(105);
var STARTS_WITH = 'startsWith';
var $startsWith = ''[STARTS_WITH];

$export($export.P + $export.F * __webpack_require__(106)(STARTS_WITH), 'String', {
  startsWith: function startsWith(searchString /* , position = 0 */) {
    var that = context(this, searchString, STARTS_WITH);
    var index = toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length));
    var search = String(searchString);
    return $startsWith
      ? $startsWith.call(that, search, index)
      : that.slice(index, index + search.length) === search;
  }
});


/***/ }),
/* 247 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.2 String.prototype.anchor(name)
__webpack_require__(19)('anchor', function (createHTML) {
  return function anchor(name) {
    return createHTML(this, 'a', 'name', name);
  };
});


/***/ }),
/* 248 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.3 String.prototype.big()
__webpack_require__(19)('big', function (createHTML) {
  return function big() {
    return createHTML(this, 'big', '', '');
  };
});


/***/ }),
/* 249 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.4 String.prototype.blink()
__webpack_require__(19)('blink', function (createHTML) {
  return function blink() {
    return createHTML(this, 'blink', '', '');
  };
});


/***/ }),
/* 250 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.5 String.prototype.bold()
__webpack_require__(19)('bold', function (createHTML) {
  return function bold() {
    return createHTML(this, 'b', '', '');
  };
});


/***/ }),
/* 251 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.6 String.prototype.fixed()
__webpack_require__(19)('fixed', function (createHTML) {
  return function fixed() {
    return createHTML(this, 'tt', '', '');
  };
});


/***/ }),
/* 252 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.7 String.prototype.fontcolor(color)
__webpack_require__(19)('fontcolor', function (createHTML) {
  return function fontcolor(color) {
    return createHTML(this, 'font', 'color', color);
  };
});


/***/ }),
/* 253 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.8 String.prototype.fontsize(size)
__webpack_require__(19)('fontsize', function (createHTML) {
  return function fontsize(size) {
    return createHTML(this, 'font', 'size', size);
  };
});


/***/ }),
/* 254 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.9 String.prototype.italics()
__webpack_require__(19)('italics', function (createHTML) {
  return function italics() {
    return createHTML(this, 'i', '', '');
  };
});


/***/ }),
/* 255 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.10 String.prototype.link(url)
__webpack_require__(19)('link', function (createHTML) {
  return function link(url) {
    return createHTML(this, 'a', 'href', url);
  };
});


/***/ }),
/* 256 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.11 String.prototype.small()
__webpack_require__(19)('small', function (createHTML) {
  return function small() {
    return createHTML(this, 'small', '', '');
  };
});


/***/ }),
/* 257 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.12 String.prototype.strike()
__webpack_require__(19)('strike', function (createHTML) {
  return function strike() {
    return createHTML(this, 'strike', '', '');
  };
});


/***/ }),
/* 258 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.13 String.prototype.sub()
__webpack_require__(19)('sub', function (createHTML) {
  return function sub() {
    return createHTML(this, 'sub', '', '');
  };
});


/***/ }),
/* 259 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.14 String.prototype.sup()
__webpack_require__(19)('sup', function (createHTML) {
  return function sup() {
    return createHTML(this, 'sup', '', '');
  };
});


/***/ }),
/* 260 */
/***/ (function(module, exports, __webpack_require__) {

// 20.3.3.1 / 15.9.4.4 Date.now()
var $export = __webpack_require__(0);

$export($export.S, 'Date', { now: function () { return new Date().getTime(); } });


/***/ }),
/* 261 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var toObject = __webpack_require__(13);
var toPrimitive = __webpack_require__(27);

$export($export.P + $export.F * __webpack_require__(6)(function () {
  return new Date(NaN).toJSON() !== null
    || Date.prototype.toJSON.call({ toISOString: function () { return 1; } }) !== 1;
}), 'Date', {
  // eslint-disable-next-line no-unused-vars
  toJSON: function toJSON(key) {
    var O = toObject(this);
    var pv = toPrimitive(O);
    return typeof pv == 'number' && !isFinite(pv) ? null : O.toISOString();
  }
});


/***/ }),
/* 262 */
/***/ (function(module, exports, __webpack_require__) {

// 20.3.4.36 / 15.9.5.43 Date.prototype.toISOString()
var $export = __webpack_require__(0);
var toISOString = __webpack_require__(263);

// PhantomJS / old WebKit has a broken implementations
$export($export.P + $export.F * (Date.prototype.toISOString !== toISOString), 'Date', {
  toISOString: toISOString
});


/***/ }),
/* 263 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 20.3.4.36 / 15.9.5.43 Date.prototype.toISOString()
var fails = __webpack_require__(6);
var getTime = Date.prototype.getTime;
var $toISOString = Date.prototype.toISOString;

var lz = function (num) {
  return num > 9 ? num : '0' + num;
};

// PhantomJS / old WebKit has a broken implementations
module.exports = (fails(function () {
  return $toISOString.call(new Date(-5e13 - 1)) != '0385-07-25T07:06:39.999Z';
}) || !fails(function () {
  $toISOString.call(new Date(NaN));
})) ? function toISOString() {
  if (!isFinite(getTime.call(this))) throw RangeError('Invalid time value');
  var d = this;
  var y = d.getUTCFullYear();
  var m = d.getUTCMilliseconds();
  var s = y < 0 ? '-' : y > 9999 ? '+' : '';
  return s + ('00000' + Math.abs(y)).slice(s ? -6 : -4) +
    '-' + lz(d.getUTCMonth() + 1) + '-' + lz(d.getUTCDate()) +
    'T' + lz(d.getUTCHours()) + ':' + lz(d.getUTCMinutes()) +
    ':' + lz(d.getUTCSeconds()) + '.' + (m > 99 ? m : '0' + lz(m)) + 'Z';
} : $toISOString;


/***/ }),
/* 264 */
/***/ (function(module, exports, __webpack_require__) {

var DateProto = Date.prototype;
var INVALID_DATE = 'Invalid Date';
var TO_STRING = 'toString';
var $toString = DateProto[TO_STRING];
var getTime = DateProto.getTime;
if (new Date(NaN) + '' != INVALID_DATE) {
  __webpack_require__(18)(DateProto, TO_STRING, function toString() {
    var value = getTime.call(this);
    // eslint-disable-next-line no-self-compare
    return value === value ? $toString.call(this) : INVALID_DATE;
  });
}


/***/ }),
/* 265 */
/***/ (function(module, exports, __webpack_require__) {

var TO_PRIMITIVE = __webpack_require__(9)('toPrimitive');
var proto = Date.prototype;

if (!(TO_PRIMITIVE in proto)) __webpack_require__(17)(proto, TO_PRIMITIVE, __webpack_require__(266));


/***/ }),
/* 266 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var anObject = __webpack_require__(3);
var toPrimitive = __webpack_require__(27);
var NUMBER = 'number';

module.exports = function (hint) {
  if (hint !== 'string' && hint !== NUMBER && hint !== 'default') throw TypeError('Incorrect hint');
  return toPrimitive(anObject(this), hint != NUMBER);
};


/***/ }),
/* 267 */
/***/ (function(module, exports, __webpack_require__) {

// 22.1.2.2 / 15.4.3.2 Array.isArray(arg)
var $export = __webpack_require__(0);

$export($export.S, 'Array', { isArray: __webpack_require__(71) });


/***/ }),
/* 268 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ctx = __webpack_require__(23);
var $export = __webpack_require__(0);
var toObject = __webpack_require__(13);
var call = __webpack_require__(136);
var isArrayIter = __webpack_require__(107);
var toLength = __webpack_require__(12);
var createProperty = __webpack_require__(108);
var getIterFn = __webpack_require__(109);

$export($export.S + $export.F * !__webpack_require__(73)(function (iter) { Array.from(iter); }), 'Array', {
  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)
  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {
    var O = toObject(arrayLike);
    var C = typeof this == 'function' ? this : Array;
    var aLen = arguments.length;
    var mapfn = aLen > 1 ? arguments[1] : undefined;
    var mapping = mapfn !== undefined;
    var index = 0;
    var iterFn = getIterFn(O);
    var length, result, step, iterator;
    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);
    // if object isn't iterable or it's array with default iterator - use simple case
    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {
      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {
        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);
      }
    } else {
      length = toLength(O.length);
      for (result = new C(length); length > index; index++) {
        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);
      }
    }
    result.length = index;
    return result;
  }
});


/***/ }),
/* 269 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var createProperty = __webpack_require__(108);

// WebKit Array.of isn't generic
$export($export.S + $export.F * __webpack_require__(6)(function () {
  function F() { /* empty */ }
  return !(Array.of.call(F) instanceof F);
}), 'Array', {
  // 22.1.2.3 Array.of( ...items)
  of: function of(/* ...args */) {
    var index = 0;
    var aLen = arguments.length;
    var result = new (typeof this == 'function' ? this : Array)(aLen);
    while (aLen > index) createProperty(result, index, arguments[index++]);
    result.length = aLen;
    return result;
  }
});


/***/ }),
/* 270 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 22.1.3.13 Array.prototype.join(separator)
var $export = __webpack_require__(0);
var toIObject = __webpack_require__(20);
var arrayJoin = [].join;

// fallback for not array-like strings
$export($export.P + $export.F * (__webpack_require__(59) != Object || !__webpack_require__(25)(arrayJoin)), 'Array', {
  join: function join(separator) {
    return arrayJoin.call(toIObject(this), separator === undefined ? ',' : separator);
  }
});


/***/ }),
/* 271 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var html = __webpack_require__(95);
var cof = __webpack_require__(24);
var toAbsoluteIndex = __webpack_require__(45);
var toLength = __webpack_require__(12);
var arraySlice = [].slice;

// fallback for not array-like ES3 strings and DOM objects
$export($export.P + $export.F * __webpack_require__(6)(function () {
  if (html) arraySlice.call(html);
}), 'Array', {
  slice: function slice(begin, end) {
    var len = toLength(this.length);
    var klass = cof(this);
    end = end === undefined ? len : end;
    if (klass == 'Array') return arraySlice.call(this, begin, end);
    var start = toAbsoluteIndex(begin, len);
    var upTo = toAbsoluteIndex(end, len);
    var size = toLength(upTo - start);
    var cloned = Array(size);
    var i = 0;
    for (; i < size; i++) cloned[i] = klass == 'String'
      ? this.charAt(start + i)
      : this[start + i];
    return cloned;
  }
});


/***/ }),
/* 272 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var aFunction = __webpack_require__(14);
var toObject = __webpack_require__(13);
var fails = __webpack_require__(6);
var $sort = [].sort;
var test = [1, 2, 3];

$export($export.P + $export.F * (fails(function () {
  // IE8-
  test.sort(undefined);
}) || !fails(function () {
  // V8 bug
  test.sort(null);
  // Old WebKit
}) || !__webpack_require__(25)($sort)), 'Array', {
  // 22.1.3.25 Array.prototype.sort(comparefn)
  sort: function sort(comparefn) {
    return comparefn === undefined
      ? $sort.call(toObject(this))
      : $sort.call(toObject(this), aFunction(comparefn));
  }
});


/***/ }),
/* 273 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $forEach = __webpack_require__(31)(0);
var STRICT = __webpack_require__(25)([].forEach, true);

$export($export.P + $export.F * !STRICT, 'Array', {
  // 22.1.3.10 / 15.4.4.18 Array.prototype.forEach(callbackfn [, thisArg])
  forEach: function forEach(callbackfn /* , thisArg */) {
    return $forEach(this, callbackfn, arguments[1]);
  }
});


/***/ }),
/* 274 */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(7);
var isArray = __webpack_require__(71);
var SPECIES = __webpack_require__(9)('species');

module.exports = function (original) {
  var C;
  if (isArray(original)) {
    C = original.constructor;
    // cross-realm fallback
    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;
    if (isObject(C)) {
      C = C[SPECIES];
      if (C === null) C = undefined;
    }
  } return C === undefined ? Array : C;
};


/***/ }),
/* 275 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $map = __webpack_require__(31)(1);

$export($export.P + $export.F * !__webpack_require__(25)([].map, true), 'Array', {
  // 22.1.3.15 / 15.4.4.19 Array.prototype.map(callbackfn [, thisArg])
  map: function map(callbackfn /* , thisArg */) {
    return $map(this, callbackfn, arguments[1]);
  }
});


/***/ }),
/* 276 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $filter = __webpack_require__(31)(2);

$export($export.P + $export.F * !__webpack_require__(25)([].filter, true), 'Array', {
  // 22.1.3.7 / 15.4.4.20 Array.prototype.filter(callbackfn [, thisArg])
  filter: function filter(callbackfn /* , thisArg */) {
    return $filter(this, callbackfn, arguments[1]);
  }
});


/***/ }),
/* 277 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $some = __webpack_require__(31)(3);

$export($export.P + $export.F * !__webpack_require__(25)([].some, true), 'Array', {
  // 22.1.3.23 / 15.4.4.17 Array.prototype.some(callbackfn [, thisArg])
  some: function some(callbackfn /* , thisArg */) {
    return $some(this, callbackfn, arguments[1]);
  }
});


/***/ }),
/* 278 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $every = __webpack_require__(31)(4);

$export($export.P + $export.F * !__webpack_require__(25)([].every, true), 'Array', {
  // 22.1.3.5 / 15.4.4.16 Array.prototype.every(callbackfn [, thisArg])
  every: function every(callbackfn /* , thisArg */) {
    return $every(this, callbackfn, arguments[1]);
  }
});


/***/ }),
/* 279 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $reduce = __webpack_require__(137);

$export($export.P + $export.F * !__webpack_require__(25)([].reduce, true), 'Array', {
  // 22.1.3.18 / 15.4.4.21 Array.prototype.reduce(callbackfn [, initialValue])
  reduce: function reduce(callbackfn /* , initialValue */) {
    return $reduce(this, callbackfn, arguments.length, arguments[1], false);
  }
});


/***/ }),
/* 280 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $reduce = __webpack_require__(137);

$export($export.P + $export.F * !__webpack_require__(25)([].reduceRight, true), 'Array', {
  // 22.1.3.19 / 15.4.4.22 Array.prototype.reduceRight(callbackfn [, initialValue])
  reduceRight: function reduceRight(callbackfn /* , initialValue */) {
    return $reduce(this, callbackfn, arguments.length, arguments[1], true);
  }
});


/***/ }),
/* 281 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $indexOf = __webpack_require__(69)(false);
var $native = [].indexOf;
var NEGATIVE_ZERO = !!$native && 1 / [1].indexOf(1, -0) < 0;

$export($export.P + $export.F * (NEGATIVE_ZERO || !__webpack_require__(25)($native)), 'Array', {
  // 22.1.3.11 / 15.4.4.14 Array.prototype.indexOf(searchElement [, fromIndex])
  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {
    return NEGATIVE_ZERO
      // convert -0 to +0
      ? $native.apply(this, arguments) || 0
      : $indexOf(this, searchElement, arguments[1]);
  }
});


/***/ }),
/* 282 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var toIObject = __webpack_require__(20);
var toInteger = __webpack_require__(29);
var toLength = __webpack_require__(12);
var $native = [].lastIndexOf;
var NEGATIVE_ZERO = !!$native && 1 / [1].lastIndexOf(1, -0) < 0;

$export($export.P + $export.F * (NEGATIVE_ZERO || !__webpack_require__(25)($native)), 'Array', {
  // 22.1.3.14 / 15.4.4.15 Array.prototype.lastIndexOf(searchElement [, fromIndex])
  lastIndexOf: function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {
    // convert -0 to +0
    if (NEGATIVE_ZERO) return $native.apply(this, arguments) || 0;
    var O = toIObject(this);
    var length = toLength(O.length);
    var index = length - 1;
    if (arguments.length > 1) index = Math.min(index, toInteger(arguments[1]));
    if (index < 0) index = length + index;
    for (;index >= 0; index--) if (index in O) if (O[index] === searchElement) return index || 0;
    return -1;
  }
});


/***/ }),
/* 283 */
/***/ (function(module, exports, __webpack_require__) {

// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)
var $export = __webpack_require__(0);

$export($export.P, 'Array', { copyWithin: __webpack_require__(138) });

__webpack_require__(39)('copyWithin');


/***/ }),
/* 284 */
/***/ (function(module, exports, __webpack_require__) {

// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)
var $export = __webpack_require__(0);

$export($export.P, 'Array', { fill: __webpack_require__(111) });

__webpack_require__(39)('fill');


/***/ }),
/* 285 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)
var $export = __webpack_require__(0);
var $find = __webpack_require__(31)(5);
var KEY = 'find';
var forced = true;
// Shouldn't skip holes
if (KEY in []) Array(1)[KEY](function () { forced = false; });
$export($export.P + $export.F * forced, 'Array', {
  find: function find(callbackfn /* , that = undefined */) {
    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});
__webpack_require__(39)(KEY);


/***/ }),
/* 286 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)
var $export = __webpack_require__(0);
var $find = __webpack_require__(31)(6);
var KEY = 'findIndex';
var forced = true;
// Shouldn't skip holes
if (KEY in []) Array(1)[KEY](function () { forced = false; });
$export($export.P + $export.F * forced, 'Array', {
  findIndex: function findIndex(callbackfn /* , that = undefined */) {
    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});
__webpack_require__(39)(KEY);


/***/ }),
/* 287 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(48)('Array');


/***/ }),
/* 288 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(5);
var inheritIfRequired = __webpack_require__(98);
var dP = __webpack_require__(11).f;
var gOPN = __webpack_require__(47).f;
var isRegExp = __webpack_require__(72);
var $flags = __webpack_require__(74);
var $RegExp = global.RegExp;
var Base = $RegExp;
var proto = $RegExp.prototype;
var re1 = /a/g;
var re2 = /a/g;
// "new" creates a new object, old webkit buggy here
var CORRECT_NEW = new $RegExp(re1) !== re1;

if (__webpack_require__(10) && (!CORRECT_NEW || __webpack_require__(6)(function () {
  re2[__webpack_require__(9)('match')] = false;
  // RegExp constructor can alter flags and IsRegExp works correct with @@match
  return $RegExp(re1) != re1 || $RegExp(re2) == re2 || $RegExp(re1, 'i') != '/a/i';
}))) {
  $RegExp = function RegExp(p, f) {
    var tiRE = this instanceof $RegExp;
    var piRE = isRegExp(p);
    var fiU = f === undefined;
    return !tiRE && piRE && p.constructor === $RegExp && fiU ? p
      : inheritIfRequired(CORRECT_NEW
        ? new Base(piRE && !fiU ? p.source : p, f)
        : Base((piRE = p instanceof $RegExp) ? p.source : p, piRE && fiU ? $flags.call(p) : f)
      , tiRE ? this : proto, $RegExp);
  };
  var proxy = function (key) {
    key in $RegExp || dP($RegExp, key, {
      configurable: true,
      get: function () { return Base[key]; },
      set: function (it) { Base[key] = it; }
    });
  };
  for (var keys = gOPN(Base), i = 0; keys.length > i;) proxy(keys[i++]);
  proto.constructor = $RegExp;
  $RegExp.prototype = proto;
  __webpack_require__(18)(global, 'RegExp', $RegExp);
}

__webpack_require__(48)('RegExp');


/***/ }),
/* 289 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

__webpack_require__(140);
var anObject = __webpack_require__(3);
var $flags = __webpack_require__(74);
var DESCRIPTORS = __webpack_require__(10);
var TO_STRING = 'toString';
var $toString = /./[TO_STRING];

var define = function (fn) {
  __webpack_require__(18)(RegExp.prototype, TO_STRING, fn, true);
};

// 21.2.5.14 RegExp.prototype.toString()
if (__webpack_require__(6)(function () { return $toString.call({ source: 'a', flags: 'b' }) != '/a/b'; })) {
  define(function toString() {
    var R = anObject(this);
    return '/'.concat(R.source, '/',
      'flags' in R ? R.flags : !DESCRIPTORS && R instanceof RegExp ? $flags.call(R) : undefined);
  });
// FF44- RegExp#toString has a wrong name
} else if ($toString.name != TO_STRING) {
  define(function toString() {
    return $toString.call(this);
  });
}


/***/ }),
/* 290 */
/***/ (function(module, exports, __webpack_require__) {

// @@match logic
__webpack_require__(75)('match', 1, function (defined, MATCH, $match) {
  // 21.1.3.11 String.prototype.match(regexp)
  return [function match(regexp) {
    'use strict';
    var O = defined(this);
    var fn = regexp == undefined ? undefined : regexp[MATCH];
    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[MATCH](String(O));
  }, $match];
});


/***/ }),
/* 291 */
/***/ (function(module, exports, __webpack_require__) {

// @@replace logic
__webpack_require__(75)('replace', 2, function (defined, REPLACE, $replace) {
  // 21.1.3.14 String.prototype.replace(searchValue, replaceValue)
  return [function replace(searchValue, replaceValue) {
    'use strict';
    var O = defined(this);
    var fn = searchValue == undefined ? undefined : searchValue[REPLACE];
    return fn !== undefined
      ? fn.call(searchValue, O, replaceValue)
      : $replace.call(String(O), searchValue, replaceValue);
  }, $replace];
});


/***/ }),
/* 292 */
/***/ (function(module, exports, __webpack_require__) {

// @@search logic
__webpack_require__(75)('search', 1, function (defined, SEARCH, $search) {
  // 21.1.3.15 String.prototype.search(regexp)
  return [function search(regexp) {
    'use strict';
    var O = defined(this);
    var fn = regexp == undefined ? undefined : regexp[SEARCH];
    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));
  }, $search];
});


/***/ }),
/* 293 */
/***/ (function(module, exports, __webpack_require__) {

// @@split logic
__webpack_require__(75)('split', 2, function (defined, SPLIT, $split) {
  'use strict';
  var isRegExp = __webpack_require__(72);
  var _split = $split;
  var $push = [].push;
  var $SPLIT = 'split';
  var LENGTH = 'length';
  var LAST_INDEX = 'lastIndex';
  if (
    'abbc'[$SPLIT](/(b)*/)[1] == 'c' ||
    'test'[$SPLIT](/(?:)/, -1)[LENGTH] != 4 ||
    'ab'[$SPLIT](/(?:ab)*/)[LENGTH] != 2 ||
    '.'[$SPLIT](/(.?)(.?)/)[LENGTH] != 4 ||
    '.'[$SPLIT](/()()/)[LENGTH] > 1 ||
    ''[$SPLIT](/.?/)[LENGTH]
  ) {
    var NPCG = /()??/.exec('')[1] === undefined; // nonparticipating capturing group
    // based on es5-shim implementation, need to rework it
    $split = function (separator, limit) {
      var string = String(this);
      if (separator === undefined && limit === 0) return [];
      // If `separator` is not a regex, use native split
      if (!isRegExp(separator)) return _split.call(string, separator, limit);
      var output = [];
      var flags = (separator.ignoreCase ? 'i' : '') +
                  (separator.multiline ? 'm' : '') +
                  (separator.unicode ? 'u' : '') +
                  (separator.sticky ? 'y' : '');
      var lastLastIndex = 0;
      var splitLimit = limit === undefined ? 4294967295 : limit >>> 0;
      // Make `global` and avoid `lastIndex` issues by working with a copy
      var separatorCopy = new RegExp(separator.source, flags + 'g');
      var separator2, match, lastIndex, lastLength, i;
      // Doesn't need flags gy, but they don't hurt
      if (!NPCG) separator2 = new RegExp('^' + separatorCopy.source + '$(?!\\s)', flags);
      while (match = separatorCopy.exec(string)) {
        // `separatorCopy.lastIndex` is not reliable cross-browser
        lastIndex = match.index + match[0][LENGTH];
        if (lastIndex > lastLastIndex) {
          output.push(string.slice(lastLastIndex, match.index));
          // Fix browsers whose `exec` methods don't consistently return `undefined` for NPCG
          // eslint-disable-next-line no-loop-func
          if (!NPCG && match[LENGTH] > 1) match[0].replace(separator2, function () {
            for (i = 1; i < arguments[LENGTH] - 2; i++) if (arguments[i] === undefined) match[i] = undefined;
          });
          if (match[LENGTH] > 1 && match.index < string[LENGTH]) $push.apply(output, match.slice(1));
          lastLength = match[0][LENGTH];
          lastLastIndex = lastIndex;
          if (output[LENGTH] >= splitLimit) break;
        }
        if (separatorCopy[LAST_INDEX] === match.index) separatorCopy[LAST_INDEX]++; // Avoid an infinite loop
      }
      if (lastLastIndex === string[LENGTH]) {
        if (lastLength || !separatorCopy.test('')) output.push('');
      } else output.push(string.slice(lastLastIndex));
      return output[LENGTH] > splitLimit ? output.slice(0, splitLimit) : output;
    };
  // Chakra, V8
  } else if ('0'[$SPLIT](undefined, 0)[LENGTH]) {
    $split = function (separator, limit) {
      return separator === undefined && limit === 0 ? [] : _split.call(this, separator, limit);
    };
  }
  // 21.1.3.17 String.prototype.split(separator, limit)
  return [function split(separator, limit) {
    var O = defined(this);
    var fn = separator == undefined ? undefined : separator[SPLIT];
    return fn !== undefined ? fn.call(separator, O, limit) : $split.call(String(O), separator, limit);
  }, $split];
});


/***/ }),
/* 294 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var LIBRARY = __webpack_require__(43);
var global = __webpack_require__(5);
var ctx = __webpack_require__(23);
var classof = __webpack_require__(61);
var $export = __webpack_require__(0);
var isObject = __webpack_require__(7);
var aFunction = __webpack_require__(14);
var anInstance = __webpack_require__(49);
var forOf = __webpack_require__(50);
var speciesConstructor = __webpack_require__(76);
var task = __webpack_require__(113).set;
var microtask = __webpack_require__(114)();
var newPromiseCapabilityModule = __webpack_require__(115);
var perform = __webpack_require__(141);
var promiseResolve = __webpack_require__(142);
var PROMISE = 'Promise';
var TypeError = global.TypeError;
var process = global.process;
var $Promise = global[PROMISE];
var isNode = classof(process) == 'process';
var empty = function () { /* empty */ };
var Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;
var newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;

var USE_NATIVE = !!function () {
  try {
    // correct subclassing with @@species support
    var promise = $Promise.resolve(1);
    var FakePromise = (promise.constructor = {})[__webpack_require__(9)('species')] = function (exec) {
      exec(empty, empty);
    };
    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test
    return (isNode || typeof PromiseRejectionEvent == 'function') && promise.then(empty) instanceof FakePromise;
  } catch (e) { /* empty */ }
}();

// helpers
var isThenable = function (it) {
  var then;
  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;
};
var notify = function (promise, isReject) {
  if (promise._n) return;
  promise._n = true;
  var chain = promise._c;
  microtask(function () {
    var value = promise._v;
    var ok = promise._s == 1;
    var i = 0;
    var run = function (reaction) {
      var handler = ok ? reaction.ok : reaction.fail;
      var resolve = reaction.resolve;
      var reject = reaction.reject;
      var domain = reaction.domain;
      var result, then;
      try {
        if (handler) {
          if (!ok) {
            if (promise._h == 2) onHandleUnhandled(promise);
            promise._h = 1;
          }
          if (handler === true) result = value;
          else {
            if (domain) domain.enter();
            result = handler(value);
            if (domain) domain.exit();
          }
          if (result === reaction.promise) {
            reject(TypeError('Promise-chain cycle'));
          } else if (then = isThenable(result)) {
            then.call(result, resolve, reject);
          } else resolve(result);
        } else reject(value);
      } catch (e) {
        reject(e);
      }
    };
    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach
    promise._c = [];
    promise._n = false;
    if (isReject && !promise._h) onUnhandled(promise);
  });
};
var onUnhandled = function (promise) {
  task.call(global, function () {
    var value = promise._v;
    var unhandled = isUnhandled(promise);
    var result, handler, console;
    if (unhandled) {
      result = perform(function () {
        if (isNode) {
          process.emit('unhandledRejection', value, promise);
        } else if (handler = global.onunhandledrejection) {
          handler({ promise: promise, reason: value });
        } else if ((console = global.console) && console.error) {
          console.error('Unhandled promise rejection', value);
        }
      });
      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should
      promise._h = isNode || isUnhandled(promise) ? 2 : 1;
    } promise._a = undefined;
    if (unhandled && result.e) throw result.v;
  });
};
var isUnhandled = function (promise) {
  if (promise._h == 1) return false;
  var chain = promise._a || promise._c;
  var i = 0;
  var reaction;
  while (chain.length > i) {
    reaction = chain[i++];
    if (reaction.fail || !isUnhandled(reaction.promise)) return false;
  } return true;
};
var onHandleUnhandled = function (promise) {
  task.call(global, function () {
    var handler;
    if (isNode) {
      process.emit('rejectionHandled', promise);
    } else if (handler = global.onrejectionhandled) {
      handler({ promise: promise, reason: promise._v });
    }
  });
};
var $reject = function (value) {
  var promise = this;
  if (promise._d) return;
  promise._d = true;
  promise = promise._w || promise; // unwrap
  promise._v = value;
  promise._s = 2;
  if (!promise._a) promise._a = promise._c.slice();
  notify(promise, true);
};
var $resolve = function (value) {
  var promise = this;
  var then;
  if (promise._d) return;
  promise._d = true;
  promise = promise._w || promise; // unwrap
  try {
    if (promise === value) throw TypeError("Promise can't be resolved itself");
    if (then = isThenable(value)) {
      microtask(function () {
        var wrapper = { _w: promise, _d: false }; // wrap
        try {
          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));
        } catch (e) {
          $reject.call(wrapper, e);
        }
      });
    } else {
      promise._v = value;
      promise._s = 1;
      notify(promise, false);
    }
  } catch (e) {
    $reject.call({ _w: promise, _d: false }, e); // wrap
  }
};

// constructor polyfill
if (!USE_NATIVE) {
  // 25.4.3.1 Promise(executor)
  $Promise = function Promise(executor) {
    anInstance(this, $Promise, PROMISE, '_h');
    aFunction(executor);
    Internal.call(this);
    try {
      executor(ctx($resolve, this, 1), ctx($reject, this, 1));
    } catch (err) {
      $reject.call(this, err);
    }
  };
  // eslint-disable-next-line no-unused-vars
  Internal = function Promise(executor) {
    this._c = [];             // <- awaiting reactions
    this._a = undefined;      // <- checked in isUnhandled reactions
    this._s = 0;              // <- state
    this._d = false;          // <- done
    this._v = undefined;      // <- value
    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled
    this._n = false;          // <- notify
  };
  Internal.prototype = __webpack_require__(51)($Promise.prototype, {
    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)
    then: function then(onFulfilled, onRejected) {
      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));
      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;
      reaction.fail = typeof onRejected == 'function' && onRejected;
      reaction.domain = isNode ? process.domain : undefined;
      this._c.push(reaction);
      if (this._a) this._a.push(reaction);
      if (this._s) notify(this, false);
      return reaction.promise;
    },
    // 25.4.5.1 Promise.prototype.catch(onRejected)
    'catch': function (onRejected) {
      return this.then(undefined, onRejected);
    }
  });
  OwnPromiseCapability = function () {
    var promise = new Internal();
    this.promise = promise;
    this.resolve = ctx($resolve, promise, 1);
    this.reject = ctx($reject, promise, 1);
  };
  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {
    return C === $Promise || C === Wrapper
      ? new OwnPromiseCapability(C)
      : newGenericPromiseCapability(C);
  };
}

$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });
__webpack_require__(53)($Promise, PROMISE);
__webpack_require__(48)(PROMISE);
Wrapper = __webpack_require__(32)[PROMISE];

// statics
$export($export.S + $export.F * !USE_NATIVE, PROMISE, {
  // 25.4.4.5 Promise.reject(r)
  reject: function reject(r) {
    var capability = newPromiseCapability(this);
    var $$reject = capability.reject;
    $$reject(r);
    return capability.promise;
  }
});
$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {
  // 25.4.4.6 Promise.resolve(x)
  resolve: function resolve(x) {
    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);
  }
});
$export($export.S + $export.F * !(USE_NATIVE && __webpack_require__(73)(function (iter) {
  $Promise.all(iter)['catch'](empty);
})), PROMISE, {
  // 25.4.4.1 Promise.all(iterable)
  all: function all(iterable) {
    var C = this;
    var capability = newPromiseCapability(C);
    var resolve = capability.resolve;
    var reject = capability.reject;
    var result = perform(function () {
      var values = [];
      var index = 0;
      var remaining = 1;
      forOf(iterable, false, function (promise) {
        var $index = index++;
        var alreadyCalled = false;
        values.push(undefined);
        remaining++;
        C.resolve(promise).then(function (value) {
          if (alreadyCalled) return;
          alreadyCalled = true;
          values[$index] = value;
          --remaining || resolve(values);
        }, reject);
      });
      --remaining || resolve(values);
    });
    if (result.e) reject(result.v);
    return capability.promise;
  },
  // 25.4.4.4 Promise.race(iterable)
  race: function race(iterable) {
    var C = this;
    var capability = newPromiseCapability(C);
    var reject = capability.reject;
    var result = perform(function () {
      forOf(iterable, false, function (promise) {
        C.resolve(promise).then(capability.resolve, reject);
      });
    });
    if (result.e) reject(result.v);
    return capability.promise;
  }
});


/***/ }),
/* 295 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var weak = __webpack_require__(147);
var validate = __webpack_require__(56);
var WEAK_SET = 'WeakSet';

// 23.4 WeakSet Objects
__webpack_require__(77)(WEAK_SET, function (get) {
  return function WeakSet() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };
}, {
  // 23.4.3.1 WeakSet.prototype.add(value)
  add: function add(value) {
    return weak.def(validate(this, WEAK_SET), value, true);
  }
}, weak, false, true);


/***/ }),
/* 296 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $typed = __webpack_require__(78);
var buffer = __webpack_require__(116);
var anObject = __webpack_require__(3);
var toAbsoluteIndex = __webpack_require__(45);
var toLength = __webpack_require__(12);
var isObject = __webpack_require__(7);
var ArrayBuffer = __webpack_require__(5).ArrayBuffer;
var speciesConstructor = __webpack_require__(76);
var $ArrayBuffer = buffer.ArrayBuffer;
var $DataView = buffer.DataView;
var $isView = $typed.ABV && ArrayBuffer.isView;
var $slice = $ArrayBuffer.prototype.slice;
var VIEW = $typed.VIEW;
var ARRAY_BUFFER = 'ArrayBuffer';

$export($export.G + $export.W + $export.F * (ArrayBuffer !== $ArrayBuffer), { ArrayBuffer: $ArrayBuffer });

$export($export.S + $export.F * !$typed.CONSTR, ARRAY_BUFFER, {
  // 24.1.3.1 ArrayBuffer.isView(arg)
  isView: function isView(it) {
    return $isView && $isView(it) || isObject(it) && VIEW in it;
  }
});

$export($export.P + $export.U + $export.F * __webpack_require__(6)(function () {
  return !new $ArrayBuffer(2).slice(1, undefined).byteLength;
}), ARRAY_BUFFER, {
  // 24.1.4.3 ArrayBuffer.prototype.slice(start, end)
  slice: function slice(start, end) {
    if ($slice !== undefined && end === undefined) return $slice.call(anObject(this), start); // FF fix
    var len = anObject(this).byteLength;
    var first = toAbsoluteIndex(start, len);
    var final = toAbsoluteIndex(end === undefined ? len : end, len);
    var result = new (speciesConstructor(this, $ArrayBuffer))(toLength(final - first));
    var viewS = new $DataView(this);
    var viewT = new $DataView(result);
    var index = 0;
    while (first < final) {
      viewT.setUint8(index++, viewS.getUint8(first++));
    } return result;
  }
});

__webpack_require__(48)(ARRAY_BUFFER);


/***/ }),
/* 297 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
$export($export.G + $export.W + $export.F * !__webpack_require__(78).ABV, {
  DataView: __webpack_require__(116).DataView
});


/***/ }),
/* 298 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(33)('Int8', 1, function (init) {
  return function Int8Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});


/***/ }),
/* 299 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(33)('Uint8', 1, function (init) {
  return function Uint8Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});


/***/ }),
/* 300 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(33)('Uint8', 1, function (init) {
  return function Uint8ClampedArray(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
}, true);


/***/ }),
/* 301 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(33)('Int16', 2, function (init) {
  return function Int16Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});


/***/ }),
/* 302 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(33)('Uint16', 2, function (init) {
  return function Uint16Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});


/***/ }),
/* 303 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(33)('Int32', 4, function (init) {
  return function Int32Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});


/***/ }),
/* 304 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(33)('Uint32', 4, function (init) {
  return function Uint32Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});


/***/ }),
/* 305 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(33)('Float32', 4, function (init) {
  return function Float32Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});


/***/ }),
/* 306 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(33)('Float64', 8, function (init) {
  return function Float64Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});


/***/ }),
/* 307 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.1 Reflect.apply(target, thisArgument, argumentsList)
var $export = __webpack_require__(0);
var aFunction = __webpack_require__(14);
var anObject = __webpack_require__(3);
var rApply = (__webpack_require__(5).Reflect || {}).apply;
var fApply = Function.apply;
// MS Edge argumentsList argument is optional
$export($export.S + $export.F * !__webpack_require__(6)(function () {
  rApply(function () { /* empty */ });
}), 'Reflect', {
  apply: function apply(target, thisArgument, argumentsList) {
    var T = aFunction(target);
    var L = anObject(argumentsList);
    return rApply ? rApply(T, thisArgument, L) : fApply.call(T, thisArgument, L);
  }
});


/***/ }),
/* 308 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.2 Reflect.construct(target, argumentsList [, newTarget])
var $export = __webpack_require__(0);
var create = __webpack_require__(46);
var aFunction = __webpack_require__(14);
var anObject = __webpack_require__(3);
var isObject = __webpack_require__(7);
var fails = __webpack_require__(6);
var bind = __webpack_require__(128);
var rConstruct = (__webpack_require__(5).Reflect || {}).construct;

// MS Edge supports only 2 arguments and argumentsList argument is optional
// FF Nightly sets third argument as `new.target`, but does not create `this` from it
var NEW_TARGET_BUG = fails(function () {
  function F() { /* empty */ }
  return !(rConstruct(function () { /* empty */ }, [], F) instanceof F);
});
var ARGS_BUG = !fails(function () {
  rConstruct(function () { /* empty */ });
});

$export($export.S + $export.F * (NEW_TARGET_BUG || ARGS_BUG), 'Reflect', {
  construct: function construct(Target, args /* , newTarget */) {
    aFunction(Target);
    anObject(args);
    var newTarget = arguments.length < 3 ? Target : aFunction(arguments[2]);
    if (ARGS_BUG && !NEW_TARGET_BUG) return rConstruct(Target, args, newTarget);
    if (Target == newTarget) {
      // w/o altered newTarget, optimization for 0-4 arguments
      switch (args.length) {
        case 0: return new Target();
        case 1: return new Target(args[0]);
        case 2: return new Target(args[0], args[1]);
        case 3: return new Target(args[0], args[1], args[2]);
        case 4: return new Target(args[0], args[1], args[2], args[3]);
      }
      // w/o altered newTarget, lot of arguments case
      var $args = [null];
      $args.push.apply($args, args);
      return new (bind.apply(Target, $args))();
    }
    // with altered newTarget, not support built-in constructors
    var proto = newTarget.prototype;
    var instance = create(isObject(proto) ? proto : Object.prototype);
    var result = Function.apply.call(Target, instance, args);
    return isObject(result) ? result : instance;
  }
});


/***/ }),
/* 309 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.3 Reflect.defineProperty(target, propertyKey, attributes)
var dP = __webpack_require__(11);
var $export = __webpack_require__(0);
var anObject = __webpack_require__(3);
var toPrimitive = __webpack_require__(27);

// MS Edge has broken Reflect.defineProperty - throwing instead of returning false
$export($export.S + $export.F * __webpack_require__(6)(function () {
  // eslint-disable-next-line no-undef
  Reflect.defineProperty(dP.f({}, 1, { value: 1 }), 1, { value: 2 });
}), 'Reflect', {
  defineProperty: function defineProperty(target, propertyKey, attributes) {
    anObject(target);
    propertyKey = toPrimitive(propertyKey, true);
    anObject(attributes);
    try {
      dP.f(target, propertyKey, attributes);
      return true;
    } catch (e) {
      return false;
    }
  }
});


/***/ }),
/* 310 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.4 Reflect.deleteProperty(target, propertyKey)
var $export = __webpack_require__(0);
var gOPD = __webpack_require__(21).f;
var anObject = __webpack_require__(3);

$export($export.S, 'Reflect', {
  deleteProperty: function deleteProperty(target, propertyKey) {
    var desc = gOPD(anObject(target), propertyKey);
    return desc && !desc.configurable ? false : delete target[propertyKey];
  }
});


/***/ }),
/* 311 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 26.1.5 Reflect.enumerate(target)
var $export = __webpack_require__(0);
var anObject = __webpack_require__(3);
var Enumerate = function (iterated) {
  this._t = anObject(iterated); // target
  this._i = 0;                  // next index
  var keys = this._k = [];      // keys
  var key;
  for (key in iterated) keys.push(key);
};
__webpack_require__(104)(Enumerate, 'Object', function () {
  var that = this;
  var keys = that._k;
  var key;
  do {
    if (that._i >= keys.length) return { value: undefined, done: true };
  } while (!((key = keys[that._i++]) in that._t));
  return { value: key, done: false };
});

$export($export.S, 'Reflect', {
  enumerate: function enumerate(target) {
    return new Enumerate(target);
  }
});


/***/ }),
/* 312 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.6 Reflect.get(target, propertyKey [, receiver])
var gOPD = __webpack_require__(21);
var getPrototypeOf = __webpack_require__(22);
var has = __webpack_require__(16);
var $export = __webpack_require__(0);
var isObject = __webpack_require__(7);
var anObject = __webpack_require__(3);

function get(target, propertyKey /* , receiver */) {
  var receiver = arguments.length < 3 ? target : arguments[2];
  var desc, proto;
  if (anObject(target) === receiver) return target[propertyKey];
  if (desc = gOPD.f(target, propertyKey)) return has(desc, 'value')
    ? desc.value
    : desc.get !== undefined
      ? desc.get.call(receiver)
      : undefined;
  if (isObject(proto = getPrototypeOf(target))) return get(proto, propertyKey, receiver);
}

$export($export.S, 'Reflect', { get: get });


/***/ }),
/* 313 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.7 Reflect.getOwnPropertyDescriptor(target, propertyKey)
var gOPD = __webpack_require__(21);
var $export = __webpack_require__(0);
var anObject = __webpack_require__(3);

$export($export.S, 'Reflect', {
  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(target, propertyKey) {
    return gOPD.f(anObject(target), propertyKey);
  }
});


/***/ }),
/* 314 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.8 Reflect.getPrototypeOf(target)
var $export = __webpack_require__(0);
var getProto = __webpack_require__(22);
var anObject = __webpack_require__(3);

$export($export.S, 'Reflect', {
  getPrototypeOf: function getPrototypeOf(target) {
    return getProto(anObject(target));
  }
});


/***/ }),
/* 315 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.9 Reflect.has(target, propertyKey)
var $export = __webpack_require__(0);

$export($export.S, 'Reflect', {
  has: function has(target, propertyKey) {
    return propertyKey in target;
  }
});


/***/ }),
/* 316 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.10 Reflect.isExtensible(target)
var $export = __webpack_require__(0);
var anObject = __webpack_require__(3);
var $isExtensible = Object.isExtensible;

$export($export.S, 'Reflect', {
  isExtensible: function isExtensible(target) {
    anObject(target);
    return $isExtensible ? $isExtensible(target) : true;
  }
});


/***/ }),
/* 317 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.11 Reflect.ownKeys(target)
var $export = __webpack_require__(0);

$export($export.S, 'Reflect', { ownKeys: __webpack_require__(149) });


/***/ }),
/* 318 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.12 Reflect.preventExtensions(target)
var $export = __webpack_require__(0);
var anObject = __webpack_require__(3);
var $preventExtensions = Object.preventExtensions;

$export($export.S, 'Reflect', {
  preventExtensions: function preventExtensions(target) {
    anObject(target);
    try {
      if ($preventExtensions) $preventExtensions(target);
      return true;
    } catch (e) {
      return false;
    }
  }
});


/***/ }),
/* 319 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.13 Reflect.set(target, propertyKey, V [, receiver])
var dP = __webpack_require__(11);
var gOPD = __webpack_require__(21);
var getPrototypeOf = __webpack_require__(22);
var has = __webpack_require__(16);
var $export = __webpack_require__(0);
var createDesc = __webpack_require__(41);
var anObject = __webpack_require__(3);
var isObject = __webpack_require__(7);

function set(target, propertyKey, V /* , receiver */) {
  var receiver = arguments.length < 4 ? target : arguments[3];
  var ownDesc = gOPD.f(anObject(target), propertyKey);
  var existingDescriptor, proto;
  if (!ownDesc) {
    if (isObject(proto = getPrototypeOf(target))) {
      return set(proto, propertyKey, V, receiver);
    }
    ownDesc = createDesc(0);
  }
  if (has(ownDesc, 'value')) {
    if (ownDesc.writable === false || !isObject(receiver)) return false;
    existingDescriptor = gOPD.f(receiver, propertyKey) || createDesc(0);
    existingDescriptor.value = V;
    dP.f(receiver, propertyKey, existingDescriptor);
    return true;
  }
  return ownDesc.set === undefined ? false : (ownDesc.set.call(receiver, V), true);
}

$export($export.S, 'Reflect', { set: set });


/***/ }),
/* 320 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.14 Reflect.setPrototypeOf(target, proto)
var $export = __webpack_require__(0);
var setProto = __webpack_require__(96);

if (setProto) $export($export.S, 'Reflect', {
  setPrototypeOf: function setPrototypeOf(target, proto) {
    setProto.check(target, proto);
    try {
      setProto.set(target, proto);
      return true;
    } catch (e) {
      return false;
    }
  }
});


/***/ }),
/* 321 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://github.com/tc39/Array.prototype.includes
var $export = __webpack_require__(0);
var $includes = __webpack_require__(69)(true);

$export($export.P, 'Array', {
  includes: function includes(el /* , fromIndex = 0 */) {
    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);
  }
});

__webpack_require__(39)('includes');


/***/ }),
/* 322 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://tc39.github.io/proposal-flatMap/#sec-Array.prototype.flatMap
var $export = __webpack_require__(0);
var flattenIntoArray = __webpack_require__(150);
var toObject = __webpack_require__(13);
var toLength = __webpack_require__(12);
var aFunction = __webpack_require__(14);
var arraySpeciesCreate = __webpack_require__(110);

$export($export.P, 'Array', {
  flatMap: function flatMap(callbackfn /* , thisArg */) {
    var O = toObject(this);
    var sourceLen, A;
    aFunction(callbackfn);
    sourceLen = toLength(O.length);
    A = arraySpeciesCreate(O, 0);
    flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments[1]);
    return A;
  }
});

__webpack_require__(39)('flatMap');


/***/ }),
/* 323 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://tc39.github.io/proposal-flatMap/#sec-Array.prototype.flatten
var $export = __webpack_require__(0);
var flattenIntoArray = __webpack_require__(150);
var toObject = __webpack_require__(13);
var toLength = __webpack_require__(12);
var toInteger = __webpack_require__(29);
var arraySpeciesCreate = __webpack_require__(110);

$export($export.P, 'Array', {
  flatten: function flatten(/* depthArg = 1 */) {
    var depthArg = arguments[0];
    var O = toObject(this);
    var sourceLen = toLength(O.length);
    var A = arraySpeciesCreate(O, 0);
    flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toInteger(depthArg));
    return A;
  }
});

__webpack_require__(39)('flatten');


/***/ }),
/* 324 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://github.com/mathiasbynens/String.prototype.at
var $export = __webpack_require__(0);
var $at = __webpack_require__(102)(true);

$export($export.P, 'String', {
  at: function at(pos) {
    return $at(this, pos);
  }
});


/***/ }),
/* 325 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://github.com/tc39/proposal-string-pad-start-end
var $export = __webpack_require__(0);
var $pad = __webpack_require__(151);

$export($export.P, 'String', {
  padStart: function padStart(maxLength /* , fillString = ' ' */) {
    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, true);
  }
});


/***/ }),
/* 326 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://github.com/tc39/proposal-string-pad-start-end
var $export = __webpack_require__(0);
var $pad = __webpack_require__(151);

$export($export.P, 'String', {
  padEnd: function padEnd(maxLength /* , fillString = ' ' */) {
    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, false);
  }
});


/***/ }),
/* 327 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://github.com/sebmarkbage/ecmascript-string-left-right-trim
__webpack_require__(54)('trimLeft', function ($trim) {
  return function trimLeft() {
    return $trim(this, 1);
  };
}, 'trimStart');


/***/ }),
/* 328 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://github.com/sebmarkbage/ecmascript-string-left-right-trim
__webpack_require__(54)('trimRight', function ($trim) {
  return function trimRight() {
    return $trim(this, 2);
  };
}, 'trimEnd');


/***/ }),
/* 329 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://tc39.github.io/String.prototype.matchAll/
var $export = __webpack_require__(0);
var defined = __webpack_require__(28);
var toLength = __webpack_require__(12);
var isRegExp = __webpack_require__(72);
var getFlags = __webpack_require__(74);
var RegExpProto = RegExp.prototype;

var $RegExpStringIterator = function (regexp, string) {
  this._r = regexp;
  this._s = string;
};

__webpack_require__(104)($RegExpStringIterator, 'RegExp String', function next() {
  var match = this._r.exec(this._s);
  return { value: match, done: match === null };
});

$export($export.P, 'String', {
  matchAll: function matchAll(regexp) {
    defined(this);
    if (!isRegExp(regexp)) throw TypeError(regexp + ' is not a regexp!');
    var S = String(this);
    var flags = 'flags' in RegExpProto ? String(regexp.flags) : getFlags.call(regexp);
    var rx = new RegExp(regexp.source, ~flags.indexOf('g') ? flags : 'g' + flags);
    rx.lastIndex = toLength(regexp.lastIndex);
    return new $RegExpStringIterator(rx, S);
  }
});


/***/ }),
/* 330 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(92)('asyncIterator');


/***/ }),
/* 331 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(92)('observable');


/***/ }),
/* 332 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/tc39/proposal-object-getownpropertydescriptors
var $export = __webpack_require__(0);
var ownKeys = __webpack_require__(149);
var toIObject = __webpack_require__(20);
var gOPD = __webpack_require__(21);
var createProperty = __webpack_require__(108);

$export($export.S, 'Object', {
  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {
    var O = toIObject(object);
    var getDesc = gOPD.f;
    var keys = ownKeys(O);
    var result = {};
    var i = 0;
    var key, desc;
    while (keys.length > i) {
      desc = getDesc(O, key = keys[i++]);
      if (desc !== undefined) createProperty(result, key, desc);
    }
    return result;
  }
});


/***/ }),
/* 333 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/tc39/proposal-object-values-entries
var $export = __webpack_require__(0);
var $values = __webpack_require__(152)(false);

$export($export.S, 'Object', {
  values: function values(it) {
    return $values(it);
  }
});


/***/ }),
/* 334 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/tc39/proposal-object-values-entries
var $export = __webpack_require__(0);
var $entries = __webpack_require__(152)(true);

$export($export.S, 'Object', {
  entries: function entries(it) {
    return $entries(it);
  }
});


/***/ }),
/* 335 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var toObject = __webpack_require__(13);
var aFunction = __webpack_require__(14);
var $defineProperty = __webpack_require__(11);

// B.2.2.2 Object.prototype.__defineGetter__(P, getter)
__webpack_require__(10) && $export($export.P + __webpack_require__(79), 'Object', {
  __defineGetter__: function __defineGetter__(P, getter) {
    $defineProperty.f(toObject(this), P, { get: aFunction(getter), enumerable: true, configurable: true });
  }
});


/***/ }),
/* 336 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var toObject = __webpack_require__(13);
var aFunction = __webpack_require__(14);
var $defineProperty = __webpack_require__(11);

// B.2.2.3 Object.prototype.__defineSetter__(P, setter)
__webpack_require__(10) && $export($export.P + __webpack_require__(79), 'Object', {
  __defineSetter__: function __defineSetter__(P, setter) {
    $defineProperty.f(toObject(this), P, { set: aFunction(setter), enumerable: true, configurable: true });
  }
});


/***/ }),
/* 337 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var toObject = __webpack_require__(13);
var toPrimitive = __webpack_require__(27);
var getPrototypeOf = __webpack_require__(22);
var getOwnPropertyDescriptor = __webpack_require__(21).f;

// B.2.2.4 Object.prototype.__lookupGetter__(P)
__webpack_require__(10) && $export($export.P + __webpack_require__(79), 'Object', {
  __lookupGetter__: function __lookupGetter__(P) {
    var O = toObject(this);
    var K = toPrimitive(P, true);
    var D;
    do {
      if (D = getOwnPropertyDescriptor(O, K)) return D.get;
    } while (O = getPrototypeOf(O));
  }
});


/***/ }),
/* 338 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var toObject = __webpack_require__(13);
var toPrimitive = __webpack_require__(27);
var getPrototypeOf = __webpack_require__(22);
var getOwnPropertyDescriptor = __webpack_require__(21).f;

// B.2.2.5 Object.prototype.__lookupSetter__(P)
__webpack_require__(10) && $export($export.P + __webpack_require__(79), 'Object', {
  __lookupSetter__: function __lookupSetter__(P) {
    var O = toObject(this);
    var K = toPrimitive(P, true);
    var D;
    do {
      if (D = getOwnPropertyDescriptor(O, K)) return D.set;
    } while (O = getPrototypeOf(O));
  }
});


/***/ }),
/* 339 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/DavidBruant/Map-Set.prototype.toJSON
var $export = __webpack_require__(0);

$export($export.P + $export.R, 'Map', { toJSON: __webpack_require__(153)('Map') });


/***/ }),
/* 340 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/DavidBruant/Map-Set.prototype.toJSON
var $export = __webpack_require__(0);

$export($export.P + $export.R, 'Set', { toJSON: __webpack_require__(153)('Set') });


/***/ }),
/* 341 */
/***/ (function(module, exports, __webpack_require__) {

// https://tc39.github.io/proposal-setmap-offrom/#sec-map.of
__webpack_require__(80)('Map');


/***/ }),
/* 342 */
/***/ (function(module, exports, __webpack_require__) {

// https://tc39.github.io/proposal-setmap-offrom/#sec-set.of
__webpack_require__(80)('Set');


/***/ }),
/* 343 */
/***/ (function(module, exports, __webpack_require__) {

// https://tc39.github.io/proposal-setmap-offrom/#sec-weakmap.of
__webpack_require__(80)('WeakMap');


/***/ }),
/* 344 */
/***/ (function(module, exports, __webpack_require__) {

// https://tc39.github.io/proposal-setmap-offrom/#sec-weakset.of
__webpack_require__(80)('WeakSet');


/***/ }),
/* 345 */
/***/ (function(module, exports, __webpack_require__) {

// https://tc39.github.io/proposal-setmap-offrom/#sec-map.from
__webpack_require__(81)('Map');


/***/ }),
/* 346 */
/***/ (function(module, exports, __webpack_require__) {

// https://tc39.github.io/proposal-setmap-offrom/#sec-set.from
__webpack_require__(81)('Set');


/***/ }),
/* 347 */
/***/ (function(module, exports, __webpack_require__) {

// https://tc39.github.io/proposal-setmap-offrom/#sec-weakmap.from
__webpack_require__(81)('WeakMap');


/***/ }),
/* 348 */
/***/ (function(module, exports, __webpack_require__) {

// https://tc39.github.io/proposal-setmap-offrom/#sec-weakset.from
__webpack_require__(81)('WeakSet');


/***/ }),
/* 349 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/tc39/proposal-global
var $export = __webpack_require__(0);

$export($export.G, { global: __webpack_require__(5) });


/***/ }),
/* 350 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/tc39/proposal-global
var $export = __webpack_require__(0);

$export($export.S, 'System', { global: __webpack_require__(5) });


/***/ }),
/* 351 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/ljharb/proposal-is-error
var $export = __webpack_require__(0);
var cof = __webpack_require__(24);

$export($export.S, 'Error', {
  isError: function isError(it) {
    return cof(it) === 'Error';
  }
});


/***/ }),
/* 352 */
/***/ (function(module, exports, __webpack_require__) {

// https://rwaldron.github.io/proposal-math-extensions/
var $export = __webpack_require__(0);

$export($export.S, 'Math', {
  clamp: function clamp(x, lower, upper) {
    return Math.min(upper, Math.max(lower, x));
  }
});


/***/ }),
/* 353 */
/***/ (function(module, exports, __webpack_require__) {

// https://rwaldron.github.io/proposal-math-extensions/
var $export = __webpack_require__(0);

$export($export.S, 'Math', { DEG_PER_RAD: Math.PI / 180 });


/***/ }),
/* 354 */
/***/ (function(module, exports, __webpack_require__) {

// https://rwaldron.github.io/proposal-math-extensions/
var $export = __webpack_require__(0);
var RAD_PER_DEG = 180 / Math.PI;

$export($export.S, 'Math', {
  degrees: function degrees(radians) {
    return radians * RAD_PER_DEG;
  }
});


/***/ }),
/* 355 */
/***/ (function(module, exports, __webpack_require__) {

// https://rwaldron.github.io/proposal-math-extensions/
var $export = __webpack_require__(0);
var scale = __webpack_require__(155);
var fround = __webpack_require__(135);

$export($export.S, 'Math', {
  fscale: function fscale(x, inLow, inHigh, outLow, outHigh) {
    return fround(scale(x, inLow, inHigh, outLow, outHigh));
  }
});


/***/ }),
/* 356 */
/***/ (function(module, exports, __webpack_require__) {

// https://gist.github.com/BrendanEich/4294d5c212a6d2254703
var $export = __webpack_require__(0);

$export($export.S, 'Math', {
  iaddh: function iaddh(x0, x1, y0, y1) {
    var $x0 = x0 >>> 0;
    var $x1 = x1 >>> 0;
    var $y0 = y0 >>> 0;
    return $x1 + (y1 >>> 0) + (($x0 & $y0 | ($x0 | $y0) & ~($x0 + $y0 >>> 0)) >>> 31) | 0;
  }
});


/***/ }),
/* 357 */
/***/ (function(module, exports, __webpack_require__) {

// https://gist.github.com/BrendanEich/4294d5c212a6d2254703
var $export = __webpack_require__(0);

$export($export.S, 'Math', {
  isubh: function isubh(x0, x1, y0, y1) {
    var $x0 = x0 >>> 0;
    var $x1 = x1 >>> 0;
    var $y0 = y0 >>> 0;
    return $x1 - (y1 >>> 0) - ((~$x0 & $y0 | ~($x0 ^ $y0) & $x0 - $y0 >>> 0) >>> 31) | 0;
  }
});


/***/ }),
/* 358 */
/***/ (function(module, exports, __webpack_require__) {

// https://gist.github.com/BrendanEich/4294d5c212a6d2254703
var $export = __webpack_require__(0);

$export($export.S, 'Math', {
  imulh: function imulh(u, v) {
    var UINT16 = 0xffff;
    var $u = +u;
    var $v = +v;
    var u0 = $u & UINT16;
    var v0 = $v & UINT16;
    var u1 = $u >> 16;
    var v1 = $v >> 16;
    var t = (u1 * v0 >>> 0) + (u0 * v0 >>> 16);
    return u1 * v1 + (t >> 16) + ((u0 * v1 >>> 0) + (t & UINT16) >> 16);
  }
});


/***/ }),
/* 359 */
/***/ (function(module, exports, __webpack_require__) {

// https://rwaldron.github.io/proposal-math-extensions/
var $export = __webpack_require__(0);

$export($export.S, 'Math', { RAD_PER_DEG: 180 / Math.PI });


/***/ }),
/* 360 */
/***/ (function(module, exports, __webpack_require__) {

// https://rwaldron.github.io/proposal-math-extensions/
var $export = __webpack_require__(0);
var DEG_PER_RAD = Math.PI / 180;

$export($export.S, 'Math', {
  radians: function radians(degrees) {
    return degrees * DEG_PER_RAD;
  }
});


/***/ }),
/* 361 */
/***/ (function(module, exports, __webpack_require__) {

// https://rwaldron.github.io/proposal-math-extensions/
var $export = __webpack_require__(0);

$export($export.S, 'Math', { scale: __webpack_require__(155) });


/***/ }),
/* 362 */
/***/ (function(module, exports, __webpack_require__) {

// https://gist.github.com/BrendanEich/4294d5c212a6d2254703
var $export = __webpack_require__(0);

$export($export.S, 'Math', {
  umulh: function umulh(u, v) {
    var UINT16 = 0xffff;
    var $u = +u;
    var $v = +v;
    var u0 = $u & UINT16;
    var v0 = $v & UINT16;
    var u1 = $u >>> 16;
    var v1 = $v >>> 16;
    var t = (u1 * v0 >>> 0) + (u0 * v0 >>> 16);
    return u1 * v1 + (t >>> 16) + ((u0 * v1 >>> 0) + (t & UINT16) >>> 16);
  }
});


/***/ }),
/* 363 */
/***/ (function(module, exports, __webpack_require__) {

// http://jfbastien.github.io/papers/Math.signbit.html
var $export = __webpack_require__(0);

$export($export.S, 'Math', { signbit: function signbit(x) {
  // eslint-disable-next-line no-self-compare
  return (x = +x) != x ? x : x == 0 ? 1 / x == Infinity : x > 0;
} });


/***/ }),
/* 364 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// https://github.com/tc39/proposal-promise-finally

var $export = __webpack_require__(0);
var core = __webpack_require__(32);
var global = __webpack_require__(5);
var speciesConstructor = __webpack_require__(76);
var promiseResolve = __webpack_require__(142);

$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {
  var C = speciesConstructor(this, core.Promise || global.Promise);
  var isFunction = typeof onFinally == 'function';
  return this.then(
    isFunction ? function (x) {
      return promiseResolve(C, onFinally()).then(function () { return x; });
    } : onFinally,
    isFunction ? function (e) {
      return promiseResolve(C, onFinally()).then(function () { throw e; });
    } : onFinally
  );
} });


/***/ }),
/* 365 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://github.com/tc39/proposal-promise-try
var $export = __webpack_require__(0);
var newPromiseCapability = __webpack_require__(115);
var perform = __webpack_require__(141);

$export($export.S, 'Promise', { 'try': function (callbackfn) {
  var promiseCapability = newPromiseCapability.f(this);
  var result = perform(callbackfn);
  (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v);
  return promiseCapability.promise;
} });


/***/ }),
/* 366 */
/***/ (function(module, exports, __webpack_require__) {

var metadata = __webpack_require__(34);
var anObject = __webpack_require__(3);
var toMetaKey = metadata.key;
var ordinaryDefineOwnMetadata = metadata.set;

metadata.exp({ defineMetadata: function defineMetadata(metadataKey, metadataValue, target, targetKey) {
  ordinaryDefineOwnMetadata(metadataKey, metadataValue, anObject(target), toMetaKey(targetKey));
} });


/***/ }),
/* 367 */
/***/ (function(module, exports, __webpack_require__) {

var metadata = __webpack_require__(34);
var anObject = __webpack_require__(3);
var toMetaKey = metadata.key;
var getOrCreateMetadataMap = metadata.map;
var store = metadata.store;

metadata.exp({ deleteMetadata: function deleteMetadata(metadataKey, target /* , targetKey */) {
  var targetKey = arguments.length < 3 ? undefined : toMetaKey(arguments[2]);
  var metadataMap = getOrCreateMetadataMap(anObject(target), targetKey, false);
  if (metadataMap === undefined || !metadataMap['delete'](metadataKey)) return false;
  if (metadataMap.size) return true;
  var targetMetadata = store.get(target);
  targetMetadata['delete'](targetKey);
  return !!targetMetadata.size || store['delete'](target);
} });


/***/ }),
/* 368 */
/***/ (function(module, exports, __webpack_require__) {

var metadata = __webpack_require__(34);
var anObject = __webpack_require__(3);
var getPrototypeOf = __webpack_require__(22);
var ordinaryHasOwnMetadata = metadata.has;
var ordinaryGetOwnMetadata = metadata.get;
var toMetaKey = metadata.key;

var ordinaryGetMetadata = function (MetadataKey, O, P) {
  var hasOwn = ordinaryHasOwnMetadata(MetadataKey, O, P);
  if (hasOwn) return ordinaryGetOwnMetadata(MetadataKey, O, P);
  var parent = getPrototypeOf(O);
  return parent !== null ? ordinaryGetMetadata(MetadataKey, parent, P) : undefined;
};

metadata.exp({ getMetadata: function getMetadata(metadataKey, target /* , targetKey */) {
  return ordinaryGetMetadata(metadataKey, anObject(target), arguments.length < 3 ? undefined : toMetaKey(arguments[2]));
} });


/***/ }),
/* 369 */
/***/ (function(module, exports, __webpack_require__) {

var Set = __webpack_require__(145);
var from = __webpack_require__(154);
var metadata = __webpack_require__(34);
var anObject = __webpack_require__(3);
var getPrototypeOf = __webpack_require__(22);
var ordinaryOwnMetadataKeys = metadata.keys;
var toMetaKey = metadata.key;

var ordinaryMetadataKeys = function (O, P) {
  var oKeys = ordinaryOwnMetadataKeys(O, P);
  var parent = getPrototypeOf(O);
  if (parent === null) return oKeys;
  var pKeys = ordinaryMetadataKeys(parent, P);
  return pKeys.length ? oKeys.length ? from(new Set(oKeys.concat(pKeys))) : pKeys : oKeys;
};

metadata.exp({ getMetadataKeys: function getMetadataKeys(target /* , targetKey */) {
  return ordinaryMetadataKeys(anObject(target), arguments.length < 2 ? undefined : toMetaKey(arguments[1]));
} });


/***/ }),
/* 370 */
/***/ (function(module, exports, __webpack_require__) {

var metadata = __webpack_require__(34);
var anObject = __webpack_require__(3);
var ordinaryGetOwnMetadata = metadata.get;
var toMetaKey = metadata.key;

metadata.exp({ getOwnMetadata: function getOwnMetadata(metadataKey, target /* , targetKey */) {
  return ordinaryGetOwnMetadata(metadataKey, anObject(target)
    , arguments.length < 3 ? undefined : toMetaKey(arguments[2]));
} });


/***/ }),
/* 371 */
/***/ (function(module, exports, __webpack_require__) {

var metadata = __webpack_require__(34);
var anObject = __webpack_require__(3);
var ordinaryOwnMetadataKeys = metadata.keys;
var toMetaKey = metadata.key;

metadata.exp({ getOwnMetadataKeys: function getOwnMetadataKeys(target /* , targetKey */) {
  return ordinaryOwnMetadataKeys(anObject(target), arguments.length < 2 ? undefined : toMetaKey(arguments[1]));
} });


/***/ }),
/* 372 */
/***/ (function(module, exports, __webpack_require__) {

var metadata = __webpack_require__(34);
var anObject = __webpack_require__(3);
var getPrototypeOf = __webpack_require__(22);
var ordinaryHasOwnMetadata = metadata.has;
var toMetaKey = metadata.key;

var ordinaryHasMetadata = function (MetadataKey, O, P) {
  var hasOwn = ordinaryHasOwnMetadata(MetadataKey, O, P);
  if (hasOwn) return true;
  var parent = getPrototypeOf(O);
  return parent !== null ? ordinaryHasMetadata(MetadataKey, parent, P) : false;
};

metadata.exp({ hasMetadata: function hasMetadata(metadataKey, target /* , targetKey */) {
  return ordinaryHasMetadata(metadataKey, anObject(target), arguments.length < 3 ? undefined : toMetaKey(arguments[2]));
} });


/***/ }),
/* 373 */
/***/ (function(module, exports, __webpack_require__) {

var metadata = __webpack_require__(34);
var anObject = __webpack_require__(3);
var ordinaryHasOwnMetadata = metadata.has;
var toMetaKey = metadata.key;

metadata.exp({ hasOwnMetadata: function hasOwnMetadata(metadataKey, target /* , targetKey */) {
  return ordinaryHasOwnMetadata(metadataKey, anObject(target)
    , arguments.length < 3 ? undefined : toMetaKey(arguments[2]));
} });


/***/ }),
/* 374 */
/***/ (function(module, exports, __webpack_require__) {

var $metadata = __webpack_require__(34);
var anObject = __webpack_require__(3);
var aFunction = __webpack_require__(14);
var toMetaKey = $metadata.key;
var ordinaryDefineOwnMetadata = $metadata.set;

$metadata.exp({ metadata: function metadata(metadataKey, metadataValue) {
  return function decorator(target, targetKey) {
    ordinaryDefineOwnMetadata(
      metadataKey, metadataValue,
      (targetKey !== undefined ? anObject : aFunction)(target),
      toMetaKey(targetKey)
    );
  };
} });


/***/ }),
/* 375 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/rwaldron/tc39-notes/blob/master/es6/2014-09/sept-25.md#510-globalasap-for-enqueuing-a-microtask
var $export = __webpack_require__(0);
var microtask = __webpack_require__(114)();
var process = __webpack_require__(5).process;
var isNode = __webpack_require__(24)(process) == 'process';

$export($export.G, {
  asap: function asap(fn) {
    var domain = isNode && process.domain;
    microtask(domain ? domain.bind(fn) : fn);
  }
});


/***/ }),
/* 376 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://github.com/zenparsing/es-observable
var $export = __webpack_require__(0);
var global = __webpack_require__(5);
var core = __webpack_require__(32);
var microtask = __webpack_require__(114)();
var OBSERVABLE = __webpack_require__(9)('observable');
var aFunction = __webpack_require__(14);
var anObject = __webpack_require__(3);
var anInstance = __webpack_require__(49);
var redefineAll = __webpack_require__(51);
var hide = __webpack_require__(17);
var forOf = __webpack_require__(50);
var RETURN = forOf.RETURN;

var getMethod = function (fn) {
  return fn == null ? undefined : aFunction(fn);
};

var cleanupSubscription = function (subscription) {
  var cleanup = subscription._c;
  if (cleanup) {
    subscription._c = undefined;
    cleanup();
  }
};

var subscriptionClosed = function (subscription) {
  return subscription._o === undefined;
};

var closeSubscription = function (subscription) {
  if (!subscriptionClosed(subscription)) {
    subscription._o = undefined;
    cleanupSubscription(subscription);
  }
};

var Subscription = function (observer, subscriber) {
  anObject(observer);
  this._c = undefined;
  this._o = observer;
  observer = new SubscriptionObserver(this);
  try {
    var cleanup = subscriber(observer);
    var subscription = cleanup;
    if (cleanup != null) {
      if (typeof cleanup.unsubscribe === 'function') cleanup = function () { subscription.unsubscribe(); };
      else aFunction(cleanup);
      this._c = cleanup;
    }
  } catch (e) {
    observer.error(e);
    return;
  } if (subscriptionClosed(this)) cleanupSubscription(this);
};

Subscription.prototype = redefineAll({}, {
  unsubscribe: function unsubscribe() { closeSubscription(this); }
});

var SubscriptionObserver = function (subscription) {
  this._s = subscription;
};

SubscriptionObserver.prototype = redefineAll({}, {
  next: function next(value) {
    var subscription = this._s;
    if (!subscriptionClosed(subscription)) {
      var observer = subscription._o;
      try {
        var m = getMethod(observer.next);
        if (m) return m.call(observer, value);
      } catch (e) {
        try {
          closeSubscription(subscription);
        } finally {
          throw e;
        }
      }
    }
  },
  error: function error(value) {
    var subscription = this._s;
    if (subscriptionClosed(subscription)) throw value;
    var observer = subscription._o;
    subscription._o = undefined;
    try {
      var m = getMethod(observer.error);
      if (!m) throw value;
      value = m.call(observer, value);
    } catch (e) {
      try {
        cleanupSubscription(subscription);
      } finally {
        throw e;
      }
    } cleanupSubscription(subscription);
    return value;
  },
  complete: function complete(value) {
    var subscription = this._s;
    if (!subscriptionClosed(subscription)) {
      var observer = subscription._o;
      subscription._o = undefined;
      try {
        var m = getMethod(observer.complete);
        value = m ? m.call(observer, value) : undefined;
      } catch (e) {
        try {
          cleanupSubscription(subscription);
        } finally {
          throw e;
        }
      } cleanupSubscription(subscription);
      return value;
    }
  }
});

var $Observable = function Observable(subscriber) {
  anInstance(this, $Observable, 'Observable', '_f')._f = aFunction(subscriber);
};

redefineAll($Observable.prototype, {
  subscribe: function subscribe(observer) {
    return new Subscription(observer, this._f);
  },
  forEach: function forEach(fn) {
    var that = this;
    return new (core.Promise || global.Promise)(function (resolve, reject) {
      aFunction(fn);
      var subscription = that.subscribe({
        next: function (value) {
          try {
            return fn(value);
          } catch (e) {
            reject(e);
            subscription.unsubscribe();
          }
        },
        error: reject,
        complete: resolve
      });
    });
  }
});

redefineAll($Observable, {
  from: function from(x) {
    var C = typeof this === 'function' ? this : $Observable;
    var method = getMethod(anObject(x)[OBSERVABLE]);
    if (method) {
      var observable = anObject(method.call(x));
      return observable.constructor === C ? observable : new C(function (observer) {
        return observable.subscribe(observer);
      });
    }
    return new C(function (observer) {
      var done = false;
      microtask(function () {
        if (!done) {
          try {
            if (forOf(x, false, function (it) {
              observer.next(it);
              if (done) return RETURN;
            }) === RETURN) return;
          } catch (e) {
            if (done) throw e;
            observer.error(e);
            return;
          } observer.complete();
        }
      });
      return function () { done = true; };
    });
  },
  of: function of() {
    for (var i = 0, l = arguments.length, items = Array(l); i < l;) items[i] = arguments[i++];
    return new (typeof this === 'function' ? this : $Observable)(function (observer) {
      var done = false;
      microtask(function () {
        if (!done) {
          for (var j = 0; j < items.length; ++j) {
            observer.next(items[j]);
            if (done) return;
          } observer.complete();
        }
      });
      return function () { done = true; };
    });
  }
});

hide($Observable.prototype, OBSERVABLE, function () { return this; });

$export($export.G, { Observable: $Observable });

__webpack_require__(48)('Observable');


/***/ }),
/* 377 */
/***/ (function(module, exports, __webpack_require__) {

// ie9- setTimeout & setInterval additional parameters fix
var global = __webpack_require__(5);
var $export = __webpack_require__(0);
var navigator = global.navigator;
var slice = [].slice;
var MSIE = !!navigator && /MSIE .\./.test(navigator.userAgent); // <- dirty ie9- check
var wrap = function (set) {
  return function (fn, time /* , ...args */) {
    var boundArgs = arguments.length > 2;
    var args = boundArgs ? slice.call(arguments, 2) : false;
    return set(boundArgs ? function () {
      // eslint-disable-next-line no-new-func
      (typeof fn == 'function' ? fn : Function(fn)).apply(this, args);
    } : fn, time);
  };
};
$export($export.G + $export.B + $export.F * MSIE, {
  setTimeout: wrap(global.setTimeout),
  setInterval: wrap(global.setInterval)
});


/***/ }),
/* 378 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
var $task = __webpack_require__(113);
$export($export.G + $export.B, {
  setImmediate: $task.set,
  clearImmediate: $task.clear
});


/***/ }),
/* 379 */
/***/ (function(module, exports, __webpack_require__) {

var $iterators = __webpack_require__(112);
var getKeys = __webpack_require__(44);
var redefine = __webpack_require__(18);
var global = __webpack_require__(5);
var hide = __webpack_require__(17);
var Iterators = __webpack_require__(55);
var wks = __webpack_require__(9);
var ITERATOR = wks('iterator');
var TO_STRING_TAG = wks('toStringTag');
var ArrayValues = Iterators.Array;

var DOMIterables = {
  CSSRuleList: true, // TODO: Not spec compliant, should be false.
  CSSStyleDeclaration: false,
  CSSValueList: false,
  ClientRectList: false,
  DOMRectList: false,
  DOMStringList: false,
  DOMTokenList: true,
  DataTransferItemList: false,
  FileList: false,
  HTMLAllCollection: false,
  HTMLCollection: false,
  HTMLFormElement: false,
  HTMLSelectElement: false,
  MediaList: true, // TODO: Not spec compliant, should be false.
  MimeTypeArray: false,
  NamedNodeMap: false,
  NodeList: true,
  PaintRequestList: false,
  Plugin: false,
  PluginArray: false,
  SVGLengthList: false,
  SVGNumberList: false,
  SVGPathSegList: false,
  SVGPointList: false,
  SVGStringList: false,
  SVGTransformList: false,
  SourceBufferList: false,
  StyleSheetList: true, // TODO: Not spec compliant, should be false.
  TextTrackCueList: false,
  TextTrackList: false,
  TouchList: false
};

for (var collections = getKeys(DOMIterables), i = 0; i < collections.length; i++) {
  var NAME = collections[i];
  var explicit = DOMIterables[NAME];
  var Collection = global[NAME];
  var proto = Collection && Collection.prototype;
  var key;
  if (proto) {
    if (!proto[ITERATOR]) hide(proto, ITERATOR, ArrayValues);
    if (!proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);
    Iterators[NAME] = ArrayValues;
    if (explicit) for (key in $iterators) if (!proto[key]) redefine(proto, key, $iterators[key], true);
  }
}


/***/ }),
/* 380 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var ReactDOM = __webpack_require__(381);
var Store_1 = __webpack_require__(156);
var react_redux_1 = __webpack_require__(26);
__webpack_require__(419);
var Constant_1 = __webpack_require__(83);
var App_1 = __webpack_require__(420);
/**
 * 项目初始化代码
 */
function initialize() {
    return __awaiter(this, void 0, void 0, function () {
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, Constant_1.Constants.loadConfig()];
                case 1:
                    _a.sent();
                    // 显示应用程序核心内容
                    ReactDOM.render(React.createElement(react_redux_1.Provider, { store: Store_1.default },
                        React.createElement(App_1.App, null)), document.getElementById('root'));
                    return [2 /*return*/];
            }
        });
    });
}
initialize();


/***/ }),
/* 381 */
/***/ (function(module, exports) {

module.exports = ReactDOM;

/***/ }),
/* 382 */
/***/ (function(module, exports) {

module.exports = Redux;

/***/ }),
/* 383 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
Object.defineProperty(exports, "__esModule", { value: true });
var ActionTypes = __webpack_require__(82);
/**
 * 错误用的Store
 */
var ErrorStore = /** @class */ (function () {
    function ErrorStore() {
        /**
        * 表示是否有错误
        */
        this.isError = false;
        /**
        * 表示错误信息
        */
        this.errorMessage = '';
    }
    return ErrorStore;
}());
/**
 * reducer接收到undefined的state时一定要初始化state
 * 这里用ES6方法，在函数定义中初始化state
 */
exports.default = function (state, action) {
    if (state === void 0) { state = new ErrorStore(); }
    switch (action.type) {
        case ActionTypes.ERROR:
            return __assign({}, state, { isError: true, errorMessage: action.errorMessage });
        default:
            return state;
    }
};


/***/ }),
/* 384 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var ActionTypes = __webpack_require__(82);
/**
 * 帖子store
 */
var TopicState = /** @class */ (function () {
    function TopicState() {
    }
    return TopicState;
}());
/**
 * 奖赏store
 */
var AwardState = /** @class */ (function () {
    function AwardState() {
    }
    return AwardState;
}());
/**
 * 作者信息store
 */
var UserState = /** @class */ (function () {
    function UserState() {
    }
    return UserState;
}());
/**
 * 主题信息store
 */
var PostTopicState = /** @class */ (function () {
    function PostTopicState() {
    }
    return PostTopicState;
}());
/**
 * 帖子信息store
 */
var PostState = /** @class */ (function () {
    function PostState() {
    }
    return PostState;
}());
/**
 * reducer接收到undefined的state时一定要初始化state
 * 这里用ES6方法，在函数定义中初始化state
 */
function post(state, action) {
    if (state === void 0) { state = new TopicState(); }
    return __awaiter(this, void 0, void 0, function () {
        return __generator(this, function (_a) {
            switch (action.type) {
                case ActionTypes.ADD_AWARD:
                    return [2 /*return*/, {
                            post: state.post, postTopic: state.postTopic, user: state.user, award: { updateTime: Date.now() }
                        }];
                default:
                    return [2 /*return*/, state];
            }
            return [2 /*return*/];
        });
    });
}
exports.default = post;


/***/ }),
/* 385 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
Object.defineProperty(exports, "__esModule", { value: true });
var ActionTypes = __webpack_require__(82);
var Utility = __webpack_require__(2);
var Appstate = __webpack_require__(37);
/**
 * 用户中心用Store
 */
var UserInfo = /** @class */ (function () {
    function UserInfo() {
        /**
        * 表示用户是否登录
        */
        this.isLogOn = Utility.isLogOn();
        /**
        * 表示当前登录用户的用户信息
        */
        this.currentUserInfo = Utility.getLocalStorage('userInfo') || new Appstate.UserInfo();
        /**
         * 表示当前访问的用户页的页面状态
         */
        this.currentVisitingUserPage = 'exact';
        /**
         * 表示当前访问的用户的id
         */
        this.currentVisitingUserId = 0;
        /*
         * 表示当前访问的用户是否存在
         */
        this.currentVisitingUserIsExisted = true;
    }
    return UserInfo;
}());
/**
 * reducer接收到undefined的state时一定要初始化state
 * 这里用ES6方法，在函数定义中初始化state
 */
exports.default = function (state, action) {
    if (state === void 0) { state = new UserInfo; }
    switch (action.type) {
        case ActionTypes.USER_LOG_ON:
            return __assign({}, state, { isLogOn: true });
        case ActionTypes.USER_LOG_OFF:
            return __assign({}, state, { isLogOn: false });
        case ActionTypes.CHANGE_USERINFO:
            Utility.setLocalStorage("userInfo", action.newInfo);
            return __assign({}, state, { currentUserInfo: action.newInfo });
        case ActionTypes.CHANGE_VISITING_USER:
            return __assign({}, state, { currentVisitingUserPage: action.page, currentVisitingUserId: action.id });
        case ActionTypes.USER_NOT_FOUND:
            return __assign({}, state, { currentVisitingUserIsExisted: false });
        default:
            return state;
    }
};


/***/ }),
/* 386 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
var Ubb = __webpack_require__(4);
var BTagHandler_1 = __webpack_require__(387);
var ImageTagHandler_1 = __webpack_require__(158);
var ITagHandler_1 = __webpack_require__(388);
var SizeTagHandler_1 = __webpack_require__(389);
var QuoteTagHandler_1 = __webpack_require__(390);
var ColorTagHandler_1 = __webpack_require__(391);
var URLTagHandler_1 = __webpack_require__(392);
var UTagHandler_1 = __webpack_require__(393);
var DelTagHandler_1 = __webpack_require__(394);
var MP3TagHandler_1 = __webpack_require__(395);
var CursorTagHandler_1 = __webpack_require__(396);
var EnglishTagHandler_1 = __webpack_require__(397);
var UserTagHandler_1 = __webpack_require__(398);
var CodeTagHandler_1 = __webpack_require__(399);
var FontTagHandler_1 = __webpack_require__(400);
var AlignTagHandler_1 = __webpack_require__(401);
var UploadTagHandler_1 = __webpack_require__(402);
var LeftTagHandler_1 = __webpack_require__(403);
var CenterTagHandler_1 = __webpack_require__(404);
var RightTagHandler_1 = __webpack_require__(405);
var TableTagHandler_1 = __webpack_require__(406);
var TdTagHandler_1 = __webpack_require__(407);
var ThTagHandler_1 = __webpack_require__(408);
var TrTagHandler_1 = __webpack_require__(409);
var TopicTagHandler_1 = __webpack_require__(410);
var MdTagHandler_1 = __webpack_require__(411);
var SandBoxTagHandler_1 = __webpack_require__(412);
var EmTagHandler_1 = __webpack_require__(413);
var AcTagHandler_1 = __webpack_require__(414);
var MahjongTagHandler_1 = __webpack_require__(415);
var TbTagHandler_1 = __webpack_require__(416);
var UrlTextHandler_1 = __webpack_require__(417);
/**
 * 创建一个具有所有功能的默认引擎。
 */
function createEngine() {
    var engine = new Ubb.UbbCodeEngine();
    // 在此处添加引擎所支持的所有标签处理器
    engine.tagHandlers.register(BTagHandler_1.BTagHandler);
    engine.tagHandlers.register(ImageTagHandler_1.ImageTagHandler);
    engine.tagHandlers.register(ITagHandler_1.ITagHandler);
    engine.tagHandlers.register(SizeTagHandler_1.SizeTagHandler);
    engine.tagHandlers.register(QuoteTagHandler_1.QuoteTagHandler);
    engine.tagHandlers.register(ColorTagHandler_1.ColorTagHandler);
    engine.tagHandlers.register(URLTagHandler_1.UrlTagHandler);
    engine.tagHandlers.register(UTagHandler_1.UTagHandler);
    engine.tagHandlers.register(DelTagHandler_1.DelTagHandler);
    engine.tagHandlers.register(MP3TagHandler_1.MP3TagHandler);
    engine.tagHandlers.register(CursorTagHandler_1.CursorTagHandler);
    engine.tagHandlers.register(EnglishTagHandler_1.EnglishTagHandler);
    engine.tagHandlers.register(UserTagHandler_1.UserTagHandler);
    engine.tagHandlers.register(CodeTagHandler_1.CodeTagHandler);
    engine.tagHandlers.register(FontTagHandler_1.FontTagHandler);
    engine.tagHandlers.register(AlignTagHandler_1.AlignTagHandler);
    engine.tagHandlers.register(UploadTagHandler_1.UploadTagHandler);
    engine.tagHandlers.register(LeftTagHandler_1.LeftTagHandler);
    engine.tagHandlers.register(CenterTagHandler_1.CenterTagHandler);
    engine.tagHandlers.register(RightTagHandler_1.RightTagHandler);
    engine.tagHandlers.register(TableTagHandler_1.TableTagHandler);
    engine.tagHandlers.register(TdTagHandler_1.TdTagHandler);
    engine.tagHandlers.register(ThTagHandler_1.ThTagHandler);
    engine.tagHandlers.register(TrTagHandler_1.TrTagHandler);
    engine.tagHandlers.register(TopicTagHandler_1.TopicTagHandler);
    engine.tagHandlers.register(MdTagHandler_1.MdTagHandler);
    engine.tagHandlers.register(TbTagHandler_1.default);
    engine.tagHandlers.register(SandBoxTagHandler_1.default);
    // 以下是未命名标签处理程序，注意未命名标签处理程序的命中和注册顺序有关
    engine.tagHandlers.register(EmTagHandler_1.default);
    engine.tagHandlers.register(AcTagHandler_1.default);
    engine.tagHandlers.register(MahjongTagHandler_1.default);
    // 以下是文字处理程序，注意文字的处理顺序完全取决于处理程序，请注意控制处理程序的顺序
    engine.tagHandlers.registerText(UrlTextHandler_1.default);
    return engine;
}
exports.createEngine = createEngine;
// 重新导出核心功能
__export(__webpack_require__(4));


/***/ }),
/* 387 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [b] 标签的处理器。
 */
var BTagHandler = /** @class */ (function (_super) {
    __extends(BTagHandler, _super);
    function BTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(BTagHandler.prototype, "supportedTagNames", {
        get: function () {
            return 'b';
        },
        enumerable: true,
        configurable: true
    });
    BTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        /*
        // HTML5 标准建议不再使用 b 标签
        if (context.options.compatibility === Ubb.UbbCompatiblityMode.EnforceMorden) {
            return <strong>{innerContent}</strong>;
        } else {
            return <b>{innerContent}</b>;
        }
        */
        return React.createElement("span", { style: { fontWeight: "bold" } }, innerContent);
    };
    return BTagHandler;
}(Ubb.RecursiveTagHandler));
exports.BTagHandler = BTagHandler;


/***/ }),
/* 388 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [i] 标签的处理器。
 */
// ReSharper disable once InconsistentNaming
var ITagHandler = /** @class */ (function (_super) {
    __extends(ITagHandler, _super);
    function ITagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(ITagHandler.prototype, "supportedTagNames", {
        get: function () {
            return 'i';
        },
        enumerable: true,
        configurable: true
    });
    ITagHandler.prototype.execCore = function (innerContent, tagData, context) {
        return React.createElement("i", null, innerContent);
    };
    return ITagHandler;
}(Ubb.RecursiveTagHandler));
exports.ITagHandler = ITagHandler;


/***/ }),
/* 389 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [size] 标签的处理器。
 */
var SizeTagHandler = /** @class */ (function (_super) {
    __extends(SizeTagHandler, _super);
    function SizeTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(SizeTagHandler.prototype, "supportedTagNames", {
        get: function () {
            return 'size';
        },
        enumerable: true,
        configurable: true
    });
    SizeTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        var size = parseInt(tagData.value('size'));
        if (isNaN(size) || size <= 0) {
            return innerContent;
        }
        size = size > 7 ? 3.5 : (size / 2);
        size /= 1.5; //这里可能需要调整
        var style = {
            fontSize: size + "rem"
        };
        return React.createElement("span", { style: style }, innerContent);
    };
    return SizeTagHandler;
}(Ubb.RecursiveTagHandler));
exports.SizeTagHandler = SizeTagHandler;


/***/ }),
/* 390 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [quote] 标签的处理器。
 */
var QuoteTagHandler = /** @class */ (function (_super) {
    __extends(QuoteTagHandler, _super);
    function QuoteTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(QuoteTagHandler.prototype, "supportedTagNames", {
        get: function () { return ['quote', 'quotex']; },
        enumerable: true,
        configurable: true
    });
    ;
    QuoteTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        var style = {
            padding: '13px 19px 13px 17px',
            backgroundColor: '#F5FAFF',
            border: '1px solid rgb(204,204,204)',
            marginLeft: '30px',
            marginRight: '30px',
            marginTop: '30px',
            maxHeight: '800px',
            overflowY: 'auto'
        };
        return React.createElement("div", { style: style }, innerContent);
    };
    return QuoteTagHandler;
}(Ubb.RecursiveTagHandler));
exports.QuoteTagHandler = QuoteTagHandler;


/***/ }),
/* 391 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [color] 标签的处理器。
 */
var ColorTagHandler = /** @class */ (function (_super) {
    __extends(ColorTagHandler, _super);
    function ColorTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(ColorTagHandler.prototype, "supportedTagNames", {
        get: function () {
            return 'color';
        },
        enumerable: true,
        configurable: true
    });
    ColorTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        var color = tagData.value('color');
        var style = {
            color: color
        };
        return React.createElement("span", { style: style }, innerContent);
    };
    return ColorTagHandler;
}(Ubb.RecursiveTagHandler));
exports.ColorTagHandler = ColorTagHandler;


/***/ }),
/* 392 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [url] 标签的处理器。
 * TODO:对于外链的判断
 */
var UrlTagHandler = /** @class */ (function (_super) {
    __extends(UrlTagHandler, _super);
    function UrlTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(UrlTagHandler.prototype, "supportedTagNames", {
        get: function () {
            return 'url';
        },
        enumerable: true,
        configurable: true
    });
    UrlTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        var url = tagData.value('url');
        if (!url) {
            url = innerContent;
        }
        //不允许显示外部链接
        if (context.options.allowExternalUrl === false) {
            //判断是否为外部链接
            if (url.indexOf('http') === 0 && url.split('/').length > 1 && url.split('/')[2] !== 'www.cc98.org') {
                return innerContent;
            }
        }
        return React.createElement("a", { href: url, target: "_blank" }, innerContent);
    };
    return UrlTagHandler;
}(Ubb.RecursiveTagHandler));
exports.UrlTagHandler = UrlTagHandler;


/***/ }),
/* 393 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [u] 标签的处理器。
 */
var UTagHandler = /** @class */ (function (_super) {
    __extends(UTagHandler, _super);
    function UTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(UTagHandler.prototype, "supportedTagNames", {
        get: function () {
            return 'u';
        },
        enumerable: true,
        configurable: true
    });
    UTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        var style = {
            textDecoration: 'underline'
        };
        if (context.options.compatibility === Ubb.UbbCompatiblityMode.EnforceMorden) {
            return React.createElement("span", { style: style }, innerContent);
        }
        else {
            return React.createElement("u", null, innerContent);
        }
    };
    return UTagHandler;
}(Ubb.RecursiveTagHandler));
exports.UTagHandler = UTagHandler;


/***/ }),
/* 394 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [del] 标签的处理器。
 */
var DelTagHandler = /** @class */ (function (_super) {
    __extends(DelTagHandler, _super);
    function DelTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(DelTagHandler.prototype, "supportedTagNames", {
        get: function () {
            return 'del';
        },
        enumerable: true,
        configurable: true
    });
    DelTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        var style = {
            textDecoration: 'line-through'
        };
        return React.createElement("span", { style: style }, innerContent);
    };
    return DelTagHandler;
}(Ubb.RecursiveTagHandler));
exports.DelTagHandler = DelTagHandler;


/***/ }),
/* 395 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [mp3] 标签的处理器。
 */
var MP3TagHandler = /** @class */ (function (_super) {
    __extends(MP3TagHandler, _super);
    function MP3TagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MP3TagHandler.prototype, "supportedTagNames", {
        get: function () {
            return 'mp3';
        },
        enumerable: true,
        configurable: true
    });
    MP3TagHandler.prototype.execCore = function (innerContent, tagData, context) {
        //不允许显示媒体内容
        if (context.options.allowMediaContent === false) {
            return innerContent;
        }
        //是否自动播放
        var autoPlay = false;
        if (tagData.value('mp3') === '1' && context.options.allowAutoPlay === true) {
            autoPlay = true;
        }
        return (React.createElement("audio", { src: innerContent, controls: true, autoPlay: autoPlay }));
    };
    return MP3TagHandler;
}(Ubb.TextTagHandler));
exports.MP3TagHandler = MP3TagHandler;


/***/ }),
/* 396 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [cursor] 标签的处理器。
 */
var CursorTagHandler = /** @class */ (function (_super) {
    __extends(CursorTagHandler, _super);
    function CursorTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(CursorTagHandler.prototype, "supportedTagNames", {
        get: function () { return 'cursor'; },
        enumerable: true,
        configurable: true
    });
    ;
    CursorTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        var cursor = tagData.value('cursor');
        var style = {
            cursor: cursor
        };
        return React.createElement("span", { style: style }, innerContent);
    };
    return CursorTagHandler;
}(Ubb.RecursiveTagHandler));
exports.CursorTagHandler = CursorTagHandler;


/***/ }),
/* 397 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [english] 标签的处理器。
 */
var EnglishTagHandler = /** @class */ (function (_super) {
    __extends(EnglishTagHandler, _super);
    function EnglishTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(EnglishTagHandler.prototype, "supportedTagNames", {
        get: function () {
            return 'english';
        },
        enumerable: true,
        configurable: true
    });
    EnglishTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        var style = {
            fontFamily: 'Arial'
        };
        return React.createElement("span", { style: style }, innerContent);
    };
    return EnglishTagHandler;
}(Ubb.RecursiveTagHandler));
exports.EnglishTagHandler = EnglishTagHandler;


/***/ }),
/* 398 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [user] 标签的处理器。
 */
var UserTagHandler = /** @class */ (function (_super) {
    __extends(UserTagHandler, _super);
    function UserTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(UserTagHandler.prototype, "supportedTagNames", {
        get: function () { return 'user'; },
        enumerable: true,
        configurable: true
    });
    ;
    UserTagHandler.prototype.execCore = function (content, tagData, context) {
        var userName = content;
        var style = {
            cursor: 'pointer'
        };
        return React.createElement("a", { href: "/user/name" + encodeURI(userName), style: style }, userName);
    };
    return UserTagHandler;
}(Ubb.TextTagHandler));
exports.UserTagHandler = UserTagHandler;


/***/ }),
/* 399 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [code] 标签的处理器。
 */
var CodeTagHandler = /** @class */ (function (_super) {
    __extends(CodeTagHandler, _super);
    function CodeTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(CodeTagHandler.prototype, "supportedTagNames", {
        get: function () { return 'code'; },
        enumerable: true,
        configurable: true
    });
    ;
    CodeTagHandler.prototype.execCore = function (content, tagData, context) {
        var element = content.split('\n').map(function (item, index) {
            return React.createElement("li", null, item);
        });
        return (React.createElement("div", { className: 'ubb-code' },
            React.createElement("ol", null, element)));
    };
    return CodeTagHandler;
}(Ubb.TextTagHandler));
exports.CodeTagHandler = CodeTagHandler;


/***/ }),
/* 400 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [font] 标签的处理器。
 */
var FontTagHandler = /** @class */ (function (_super) {
    __extends(FontTagHandler, _super);
    function FontTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(FontTagHandler.prototype, "supportedTagNames", {
        get: function () { return 'font'; },
        enumerable: true,
        configurable: true
    });
    ;
    FontTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        var font = tagData.value('font');
        var style = {
            fontFamily: font
        };
        return React.createElement("span", { style: style }, innerContent);
    };
    return FontTagHandler;
}(Ubb.RecursiveTagHandler));
exports.FontTagHandler = FontTagHandler;


/***/ }),
/* 401 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [align] 标签的处理器。
 */
var AlignTagHandler = /** @class */ (function (_super) {
    __extends(AlignTagHandler, _super);
    function AlignTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(AlignTagHandler.prototype, "supportedTagNames", {
        get: function () { return 'align'; },
        enumerable: true,
        configurable: true
    });
    ;
    AlignTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        var align = tagData.value('align');
        var style = {
            textAlign: align
        };
        return React.createElement("span", { style: style },
            React.createElement("div", null, innerContent));
    };
    return AlignTagHandler;
}(Ubb.RecursiveTagHandler));
exports.AlignTagHandler = AlignTagHandler;


/***/ }),
/* 402 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
var ImageTagHandler_1 = __webpack_require__(158);
//暂时完成 目前可以区分支持格式的图片和其他格式的文件 
//对于支持格式的图片，会根据第二个参数的值决定是否默认显示
//对于其他格式的文件，是否填写第二个参数没有影响（与原版98相同）
//与原版98不同之处之一是，现在upload标签不写参数也可以解析，但是这时不能区分图片与非图片
var UploadTagHandler = /** @class */ (function (_super) {
    __extends(UploadTagHandler, _super);
    function UploadTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(UploadTagHandler.prototype, "supportedTagNames", {
        get: function () { return 'upload'; },
        enumerable: true,
        configurable: true
    });
    ;
    UploadTagHandler.prototype.execCore = function (content, tagData, context) {
        var uploadUri = content;
        var uploadType = tagData.value(0);
        var uploadValue;
        if (tagData.parameterCount === 1)
            uploadValue = 0;
        if (tagData.parameterCount === 2)
            uploadValue = parseInt(tagData.value(1));
        switch (uploadType) {
            case "jpg":
            case "jpeg":
            case "png":
            case "gif":
            case "bmp":
            case "webp":
                // 不允许显示图像
                if (!context.options.allowImage) {
                    return React.createElement(ImageTagHandler_1.Image, { imageUri: uploadUri, title: "upload图片", isShowed: false });
                }
                //第二个参数值为1默认不显示图片，为0或没有则默认显示图片
                // HTML5 模式下，使用 figure 表示插图
                if (context.options.compatibility === Ubb.UbbCompatiblityMode.EnforceMorden) {
                    if (uploadValue === 1) {
                        return React.createElement(ImageTagHandler_1.Image, { imageUri: uploadUri, title: "upload图片", isShowed: false });
                    }
                    else {
                        return React.createElement("figure", null,
                            React.createElement(ImageTagHandler_1.Image, { imageUri: uploadUri, title: "upload图片", isShowed: true }),
                            React.createElement("figcaption", null, "upload图片"));
                    }
                }
                else {
                    if (uploadValue === 1) {
                        return React.createElement(ImageTagHandler_1.Image, { imageUri: uploadUri, title: "upload图片", isShowed: false });
                    }
                    else {
                        return React.createElement(ImageTagHandler_1.Image, { imageUri: uploadUri, title: "upload图片", isShowed: true });
                    }
                }
            default:
                return React.createElement("a", { href: uploadUri }, "\u70B9\u51FB\u6D4F\u89C8\u8BE5\u6587\u4EF6");
        }
    };
    return UploadTagHandler;
}(Ubb.TextTagHandler));
exports.UploadTagHandler = UploadTagHandler;


/***/ }),
/* 403 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [left] 标签的处理器。
 */
var LeftTagHandler = /** @class */ (function (_super) {
    __extends(LeftTagHandler, _super);
    function LeftTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(LeftTagHandler.prototype, "supportedTagNames", {
        get: function () { return 'left'; },
        enumerable: true,
        configurable: true
    });
    ;
    LeftTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        var style = {
            textAlign: 'left'
        };
        return React.createElement("span", { style: style },
            React.createElement("div", null, innerContent));
    };
    return LeftTagHandler;
}(Ubb.RecursiveTagHandler));
exports.LeftTagHandler = LeftTagHandler;


/***/ }),
/* 404 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [center] 标签的处理器。
 */
var CenterTagHandler = /** @class */ (function (_super) {
    __extends(CenterTagHandler, _super);
    function CenterTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(CenterTagHandler.prototype, "supportedTagNames", {
        get: function () { return 'center'; },
        enumerable: true,
        configurable: true
    });
    ;
    CenterTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        var style = {
            textAlign: 'center'
        };
        return React.createElement("span", { style: style },
            React.createElement("div", null, innerContent));
    };
    return CenterTagHandler;
}(Ubb.RecursiveTagHandler));
exports.CenterTagHandler = CenterTagHandler;


/***/ }),
/* 405 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [right] 标签的处理器。
 */
var RightTagHandler = /** @class */ (function (_super) {
    __extends(RightTagHandler, _super);
    function RightTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(RightTagHandler.prototype, "supportedTagNames", {
        get: function () { return 'right'; },
        enumerable: true,
        configurable: true
    });
    ;
    RightTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        var style = {
            textAlign: 'right'
        };
        return React.createElement("span", { style: style },
            React.createElement("div", null, innerContent));
    };
    return RightTagHandler;
}(Ubb.RecursiveTagHandler));
exports.RightTagHandler = RightTagHandler;


/***/ }),
/* 406 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [table] 标签的处理器。
 */
var TableTagHandler = /** @class */ (function (_super) {
    __extends(TableTagHandler, _super);
    function TableTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(TableTagHandler.prototype, "supportedTagNames", {
        get: function () { return 'table'; },
        enumerable: true,
        configurable: true
    });
    ;
    TableTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        return React.createElement("table", { className: "UBBTableTag" }, innerContent);
    };
    return TableTagHandler;
}(Ubb.RecursiveTagHandler));
exports.TableTagHandler = TableTagHandler;


/***/ }),
/* 407 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [td] 标签的处理器。
 */
var TdTagHandler = /** @class */ (function (_super) {
    __extends(TdTagHandler, _super);
    function TdTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(TdTagHandler.prototype, "supportedTagNames", {
        get: function () { return 'td'; },
        enumerable: true,
        configurable: true
    });
    ;
    TdTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        var rowspanValue = 1;
        var colspanValue = 1;
        if (tagData.parameterCount === 2) {
            rowspanValue = parseInt(tagData.value(0));
            colspanValue = parseInt(tagData.value(1));
        }
        return React.createElement("td", { rowSpan: rowspanValue, colSpan: colspanValue }, innerContent);
    };
    return TdTagHandler;
}(Ubb.RecursiveTagHandler));
exports.TdTagHandler = TdTagHandler;


/***/ }),
/* 408 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [th] 标签的处理器。
 */
var ThTagHandler = /** @class */ (function (_super) {
    __extends(ThTagHandler, _super);
    function ThTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(ThTagHandler.prototype, "supportedTagNames", {
        get: function () { return 'th'; },
        enumerable: true,
        configurable: true
    });
    ;
    ThTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        var rowspanValue = 1;
        var colspanValue = 1;
        if (tagData.parameterCount === 2) {
            rowspanValue = parseInt(tagData.value(0));
            colspanValue = parseInt(tagData.value(1));
        }
        return React.createElement("th", { rowSpan: rowspanValue, colSpan: colspanValue }, innerContent);
    };
    return ThTagHandler;
}(Ubb.RecursiveTagHandler));
exports.ThTagHandler = ThTagHandler;


/***/ }),
/* 409 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
/**
 * 处理 [tr] 标签的处理器。
 */
var TrTagHandler = /** @class */ (function (_super) {
    __extends(TrTagHandler, _super);
    function TrTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(TrTagHandler.prototype, "supportedTagNames", {
        get: function () { return 'tr'; },
        enumerable: true,
        configurable: true
    });
    ;
    TrTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        return React.createElement("tr", null, innerContent);
    };
    return TrTagHandler;
}(Ubb.RecursiveTagHandler));
exports.TrTagHandler = TrTagHandler;


/***/ }),
/* 410 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
var react_router_dom_1 = __webpack_require__(8);
var TopicTagHandler = /** @class */ (function (_super) {
    __extends(TopicTagHandler, _super);
    function TopicTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(TopicTagHandler.prototype, "supportedTagNames", {
        get: function () { return 'topic'; },
        enumerable: true,
        configurable: true
    });
    ;
    TopicTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        var topicTagContent = innerContent;
        var boardID = tagData.value(0); //因为现在帖子的url不需要boardid，所以这里其实是无意义的
        var topicID;
        if (tagData.parameterCount === 1)
            topicID = parseInt(tagData.value(0)); //如果只有一个参数,则认为它是topicid
        if (tagData.parameterCount === 2)
            topicID = parseInt(tagData.value(1)); //如果有2个参数,则认为第2个是topicid
        var url = "/topic/" + topicID;
        //return <a href={url}>{topicTagContent}</ a> 
        return React.createElement(react_router_dom_1.Link, { to: url }, topicTagContent);
    };
    return TopicTagHandler;
}(Ubb.RecursiveTagHandler));
exports.TopicTagHandler = TopicTagHandler;


/***/ }),
/* 411 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
var MdTagHandler = /** @class */ (function (_super) {
    __extends(MdTagHandler, _super);
    function MdTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MdTagHandler.prototype, "supportedTagNames", {
        get: function () { return 'md'; },
        enumerable: true,
        configurable: true
    });
    ;
    MdTagHandler.prototype.execCore = function (content, tagData, context) {
        var mdContent = content;
        return React.createElement(MarkdownParser, { content: mdContent });
    };
    return MdTagHandler;
}(Ubb.TextTagHandler));
exports.MdTagHandler = MdTagHandler;
var MarkdownParser = /** @class */ (function (_super) {
    __extends(MarkdownParser, _super);
    function MarkdownParser(props, context) {
        var _this = _super.call(this, props, context) || this;
        var randomNum = Math.floor(Math.random() * 1000000); //生成一个0-999999的随机数
        _this.state = ({
            divid: "Markdown" + randomNum
        });
        return _this;
    }
    MarkdownParser.prototype.componentDidMount = function () {
        editormd.markdownToHTML(this.state.divid, {
            htmlDecode: "style,script,iframe",
            emoji: true,
            taskList: true,
            tex: true,
            flowChart: true,
            sequenceDiagram: true,
            codeFold: true,
        });
    };
    MarkdownParser.prototype.render = function () {
        return React.createElement("div", { id: this.state.divid, style: { maxWidth: "80%" } },
            React.createElement("textarea", { name: "editormd-markdown-doc", style: { display: 'none' } }, this.props.content));
    };
    return MarkdownParser;
}(React.Component));
exports.MarkdownParser = MarkdownParser;


/***/ }),
/* 412 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
var SandBoxTagHandler = /** @class */ (function (_super) {
    __extends(SandBoxTagHandler, _super);
    function SandBoxTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(SandBoxTagHandler.prototype, "supportedTagNames", {
        get: function () {
            return 'sandbox';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SandBoxTagHandler, "supportSandBox", {
        /**
         * 获取一个值，指示当前浏览器是否支持 sandbox 功能。
         * @returns {boolean} 如果浏览器支持 sandbox 功能，返回 true；否则返回 false。
         */
        get: function () {
            return 'sandbox' in document.createElement('iframe');
        },
        enumerable: true,
        configurable: true
    });
    SandBoxTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        // 不支持则直接返回内容
        if (!SandBoxTagHandler.supportSandBox) {
            return innerContent;
        }
        var url = tagData.value('url');
        var width = tagData.value('width');
        var height = tagData.value('height');
        return React.createElement("iframe", { sandbox: "allow-scripts allow-forms allow-same-origin", src: url, style: { border: 'none', width: width, height: height, } }, innerContent);
    };
    return SandBoxTagHandler;
}(Ubb.RecursiveTagHandler));
exports.default = SandBoxTagHandler;


/***/ }),
/* 413 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
var EmTagHandler = /** @class */ (function (_super) {
    __extends(EmTagHandler, _super);
    function EmTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(EmTagHandler.prototype, "supportedTagNames", {
        get: function () {
            return /em\d{2}/i;
        } //正则表达式，意为em+两位数字,i表示区分大小写
        ,
        enumerable: true,
        configurable: true
    });
    EmTagHandler.prototype.getTagMode = function (tagData) {
        return Ubb.UbbTagMode.Empty;
    };
    EmTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        var tagName = tagData.tagName;
        var emoticonId = tagName.match(/\d{2}/).toString();
        var emoticonNum = parseInt(emoticonId) + 1;
        var url = "http://www.cc98.org/emot/em" + emoticonNum + ".gif";
        return React.createElement("div", { style: { display: "inline" } },
            React.createElement("img", { src: url, alt: "" }),
            innerContent);
    };
    return EmTagHandler;
}(Ubb.RecursiveTagHandler));
exports.default = EmTagHandler;


/***/ }),
/* 414 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
var AcTagHandler = /** @class */ (function (_super) {
    __extends(AcTagHandler, _super);
    function AcTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(AcTagHandler.prototype, "supportedTagNames", {
        get: function () {
            return /ac\d{2}/i;
        },
        enumerable: true,
        configurable: true
    });
    AcTagHandler.prototype.getTagMode = function (tagData) {
        return Ubb.UbbTagMode.Empty;
    };
    AcTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        var reg = /ac/g;
        var tagName = tagData.tagName;
        var acId = tagName.replace(reg, "");
        var url = "/images/ac/" + acId + ".png";
        return React.createElement("div", { style: { display: "inline" } },
            React.createElement("img", { src: url, alt: "" }),
            innerContent);
    };
    return AcTagHandler;
}(Ubb.RecursiveTagHandler));
exports.default = AcTagHandler;


/***/ }),
/* 415 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
var MahjongTagHandler = /** @class */ (function (_super) {
    __extends(MahjongTagHandler, _super);
    function MahjongTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MahjongTagHandler.prototype, "supportedTagNames", {
        get: function () {
            return /[acf]:/i;
        },
        enumerable: true,
        configurable: true
    });
    MahjongTagHandler.prototype.getTagMode = function (tagData) {
        return Ubb.UbbTagMode.Empty;
    };
    MahjongTagHandler.prototype.getAnimalUrl = function (mahjongId) {
        return "/images/mahjong/animal2017/" + mahjongId + ".png";
    };
    MahjongTagHandler.prototype.getCartoonUrl = function (mahjongId) {
        switch (mahjongId) {
            case "018":
            case "049":
            case "096": return "/images/mahjong/carton2017/" + mahjongId + ".gif";
            default: return "/images/mahjong/carton2017/" + mahjongId + ".png";
        }
    };
    MahjongTagHandler.prototype.getFaceUrl = function (mahjongId) {
        switch (mahjongId) {
            case "004":
            case "009":
            case "056":
            case "061":
            case "062":
            case "087":
            case "115":
            case "120":
            case "137":
            case "168":
            case "169":
            case "175":
            case "206": return "/images/mahjong/face2017/" + mahjongId + ".gif";
            default: return "/images/mahjong/face2017/" + mahjongId + ".png";
        }
    };
    MahjongTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        var reg = /[acf]/g;
        var tagName = tagData.tagName;
        var type = tagName.match(reg)[0];
        var mahjongId = tagName.replace(type + ":", "");
        var url = "";
        switch (type) {
            case "a":
                url = this.getAnimalUrl(mahjongId);
                break;
            case "c":
                url = this.getCartoonUrl(mahjongId);
                break;
            case "f":
                url = this.getFaceUrl(mahjongId);
                break;
        }
        return React.createElement("div", { style: { display: "inline" } },
            React.createElement("img", { src: url, alt: "" }),
            innerContent);
    };
    return MahjongTagHandler;
}(Ubb.RecursiveTagHandler));
exports.default = MahjongTagHandler;


/***/ }),
/* 416 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
var TbTagHandler = /** @class */ (function (_super) {
    __extends(TbTagHandler, _super);
    function TbTagHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(TbTagHandler.prototype, "supportedTagNames", {
        get: function () {
            return /tb\d{2}/i;
        },
        enumerable: true,
        configurable: true
    });
    TbTagHandler.prototype.getTagMode = function (tagData) {
        return Ubb.UbbTagMode.Empty;
    };
    TbTagHandler.prototype.execCore = function (innerContent, tagData, context) {
        var tagName = tagData.tagName;
        var emoticonId = tagName.match(/\d{2}/).toString();
        var url = "/images/tb/tb" + emoticonId + ".png";
        return React.createElement("div", { style: { display: "inline" } },
            React.createElement("img", { src: url, alt: "" }),
            innerContent);
    };
    return TbTagHandler;
}(Ubb.RecursiveTagHandler));
exports.default = TbTagHandler;


/***/ }),
/* 417 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Ubb = __webpack_require__(4);
var UrlTextHandler = /** @class */ (function (_super) {
    __extends(UrlTextHandler, _super);
    function UrlTextHandler() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        /**
         * 用来匹配的正则表达式对象。
         * TODO：修改为更合适的版本
         */
        _this._pattern = /(https?|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/i;
        return _this;
    }
    Object.defineProperty(UrlTextHandler.prototype, "supportedContent", {
        get: function () {
            return this._pattern;
        },
        enumerable: true,
        configurable: true
    });
    UrlTextHandler.prototype.exec = function (match, context) {
        var content = match[0];
        return context.options.autoDetectUrl ? React.createElement("a", { href: content }, content) : content;
    };
    return UrlTextHandler;
}(Ubb.UbbTextHandler));
exports.default = UrlTextHandler;


/***/ }),
/* 418 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var react_router_dom_1 = __webpack_require__(8);
var PageModel = /** @class */ (function (_super) {
    __extends(PageModel, _super);
    function PageModel() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    PageModel.prototype.cancelFocus = function (e) {
        var ele = e.target;
        ele.blur();
    };
    PageModel.prototype.render = function () {
        var pageUrl;
        if (this.props.pageNumber > 0) {
            pageUrl = "" + this.props.url + this.props.pageNumber + "#1";
            if (this.props.pageNumber !== this.props.curPage) {
                return React.createElement("li", { className: "page-item" },
                    React.createElement(react_router_dom_1.Link, { to: pageUrl, className: "page-link", onClick: this.cancelFocus }, this.props.pageNumber));
            }
            else {
                return React.createElement("li", { className: "page-item active" },
                    React.createElement(react_router_dom_1.Link, { to: pageUrl, onClick: this.cancelFocus, className: "page-link " }, this.props
                        .pageNumber));
            }
        }
        else if (this.props.pageNumber == -1) {
            pageUrl = "" + this.props.url + (this.props.curPage - 1) + "#1";
            return React.createElement("li", { className: "page-item" },
                React.createElement(react_router_dom_1.Link, { onClick: this.cancelFocus, className: "page-link", to: pageUrl }, "\u2039"));
        }
        else if (this.props.pageNumber == -2) {
            pageUrl = "" + this.props.url + (this.props.curPage + 1) + "#1";
            return React.createElement("li", { className: "page-item" },
                React.createElement(react_router_dom_1.Link, { onClick: this.cancelFocus, className: "page-link", to: pageUrl }, "\u203A"));
        }
        else if (this.props.pageNumber == -3) {
            pageUrl = this.props.url + "1#1";
            return React.createElement("li", { className: "page-item" },
                " ",
                React.createElement(react_router_dom_1.Link, { onClick: this.cancelFocus, className: "page-link", to: pageUrl }, "\u00AB"));
        }
        else if (this.props.pageNumber == -4) {
            pageUrl = "" + this.props.url + this.props.totalPage + "#1";
            return React.createElement("li", { className: "page-item" },
                React.createElement(react_router_dom_1.Link, { onClick: this.cancelFocus, className: "page-link", to: pageUrl }, "\u00BB"));
        }
        else {
            return null;
        }
    };
    return PageModel;
}(React.Component));
exports.PageModel = PageModel;


/***/ }),
/* 419 */
/***/ (function(module, exports) {

(function(self) {
  'use strict';

  if (self.fetch) {
    return
  }

  var support = {
    searchParams: 'URLSearchParams' in self,
    iterable: 'Symbol' in self && 'iterator' in Symbol,
    blob: 'FileReader' in self && 'Blob' in self && (function() {
      try {
        new Blob()
        return true
      } catch(e) {
        return false
      }
    })(),
    formData: 'FormData' in self,
    arrayBuffer: 'ArrayBuffer' in self
  }

  if (support.arrayBuffer) {
    var viewClasses = [
      '[object Int8Array]',
      '[object Uint8Array]',
      '[object Uint8ClampedArray]',
      '[object Int16Array]',
      '[object Uint16Array]',
      '[object Int32Array]',
      '[object Uint32Array]',
      '[object Float32Array]',
      '[object Float64Array]'
    ]

    var isDataView = function(obj) {
      return obj && DataView.prototype.isPrototypeOf(obj)
    }

    var isArrayBufferView = ArrayBuffer.isView || function(obj) {
      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1
    }
  }

  function normalizeName(name) {
    if (typeof name !== 'string') {
      name = String(name)
    }
    if (/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name)) {
      throw new TypeError('Invalid character in header field name')
    }
    return name.toLowerCase()
  }

  function normalizeValue(value) {
    if (typeof value !== 'string') {
      value = String(value)
    }
    return value
  }

  // Build a destructive iterator for the value list
  function iteratorFor(items) {
    var iterator = {
      next: function() {
        var value = items.shift()
        return {done: value === undefined, value: value}
      }
    }

    if (support.iterable) {
      iterator[Symbol.iterator] = function() {
        return iterator
      }
    }

    return iterator
  }

  function Headers(headers) {
    this.map = {}

    if (headers instanceof Headers) {
      headers.forEach(function(value, name) {
        this.append(name, value)
      }, this)
    } else if (Array.isArray(headers)) {
      headers.forEach(function(header) {
        this.append(header[0], header[1])
      }, this)
    } else if (headers) {
      Object.getOwnPropertyNames(headers).forEach(function(name) {
        this.append(name, headers[name])
      }, this)
    }
  }

  Headers.prototype.append = function(name, value) {
    name = normalizeName(name)
    value = normalizeValue(value)
    var oldValue = this.map[name]
    this.map[name] = oldValue ? oldValue+','+value : value
  }

  Headers.prototype['delete'] = function(name) {
    delete this.map[normalizeName(name)]
  }

  Headers.prototype.get = function(name) {
    name = normalizeName(name)
    return this.has(name) ? this.map[name] : null
  }

  Headers.prototype.has = function(name) {
    return this.map.hasOwnProperty(normalizeName(name))
  }

  Headers.prototype.set = function(name, value) {
    this.map[normalizeName(name)] = normalizeValue(value)
  }

  Headers.prototype.forEach = function(callback, thisArg) {
    for (var name in this.map) {
      if (this.map.hasOwnProperty(name)) {
        callback.call(thisArg, this.map[name], name, this)
      }
    }
  }

  Headers.prototype.keys = function() {
    var items = []
    this.forEach(function(value, name) { items.push(name) })
    return iteratorFor(items)
  }

  Headers.prototype.values = function() {
    var items = []
    this.forEach(function(value) { items.push(value) })
    return iteratorFor(items)
  }

  Headers.prototype.entries = function() {
    var items = []
    this.forEach(function(value, name) { items.push([name, value]) })
    return iteratorFor(items)
  }

  if (support.iterable) {
    Headers.prototype[Symbol.iterator] = Headers.prototype.entries
  }

  function consumed(body) {
    if (body.bodyUsed) {
      return Promise.reject(new TypeError('Already read'))
    }
    body.bodyUsed = true
  }

  function fileReaderReady(reader) {
    return new Promise(function(resolve, reject) {
      reader.onload = function() {
        resolve(reader.result)
      }
      reader.onerror = function() {
        reject(reader.error)
      }
    })
  }

  function readBlobAsArrayBuffer(blob) {
    var reader = new FileReader()
    var promise = fileReaderReady(reader)
    reader.readAsArrayBuffer(blob)
    return promise
  }

  function readBlobAsText(blob) {
    var reader = new FileReader()
    var promise = fileReaderReady(reader)
    reader.readAsText(blob)
    return promise
  }

  function readArrayBufferAsText(buf) {
    var view = new Uint8Array(buf)
    var chars = new Array(view.length)

    for (var i = 0; i < view.length; i++) {
      chars[i] = String.fromCharCode(view[i])
    }
    return chars.join('')
  }

  function bufferClone(buf) {
    if (buf.slice) {
      return buf.slice(0)
    } else {
      var view = new Uint8Array(buf.byteLength)
      view.set(new Uint8Array(buf))
      return view.buffer
    }
  }

  function Body() {
    this.bodyUsed = false

    this._initBody = function(body) {
      this._bodyInit = body
      if (!body) {
        this._bodyText = ''
      } else if (typeof body === 'string') {
        this._bodyText = body
      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {
        this._bodyBlob = body
      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {
        this._bodyFormData = body
      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {
        this._bodyText = body.toString()
      } else if (support.arrayBuffer && support.blob && isDataView(body)) {
        this._bodyArrayBuffer = bufferClone(body.buffer)
        // IE 10-11 can't handle a DataView body.
        this._bodyInit = new Blob([this._bodyArrayBuffer])
      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {
        this._bodyArrayBuffer = bufferClone(body)
      } else {
        throw new Error('unsupported BodyInit type')
      }

      if (!this.headers.get('content-type')) {
        if (typeof body === 'string') {
          this.headers.set('content-type', 'text/plain;charset=UTF-8')
        } else if (this._bodyBlob && this._bodyBlob.type) {
          this.headers.set('content-type', this._bodyBlob.type)
        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {
          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')
        }
      }
    }

    if (support.blob) {
      this.blob = function() {
        var rejected = consumed(this)
        if (rejected) {
          return rejected
        }

        if (this._bodyBlob) {
          return Promise.resolve(this._bodyBlob)
        } else if (this._bodyArrayBuffer) {
          return Promise.resolve(new Blob([this._bodyArrayBuffer]))
        } else if (this._bodyFormData) {
          throw new Error('could not read FormData body as blob')
        } else {
          return Promise.resolve(new Blob([this._bodyText]))
        }
      }

      this.arrayBuffer = function() {
        if (this._bodyArrayBuffer) {
          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)
        } else {
          return this.blob().then(readBlobAsArrayBuffer)
        }
      }
    }

    this.text = function() {
      var rejected = consumed(this)
      if (rejected) {
        return rejected
      }

      if (this._bodyBlob) {
        return readBlobAsText(this._bodyBlob)
      } else if (this._bodyArrayBuffer) {
        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))
      } else if (this._bodyFormData) {
        throw new Error('could not read FormData body as text')
      } else {
        return Promise.resolve(this._bodyText)
      }
    }

    if (support.formData) {
      this.formData = function() {
        return this.text().then(decode)
      }
    }

    this.json = function() {
      return this.text().then(JSON.parse)
    }

    return this
  }

  // HTTP methods whose capitalization should be normalized
  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']

  function normalizeMethod(method) {
    var upcased = method.toUpperCase()
    return (methods.indexOf(upcased) > -1) ? upcased : method
  }

  function Request(input, options) {
    options = options || {}
    var body = options.body

    if (input instanceof Request) {
      if (input.bodyUsed) {
        throw new TypeError('Already read')
      }
      this.url = input.url
      this.credentials = input.credentials
      if (!options.headers) {
        this.headers = new Headers(input.headers)
      }
      this.method = input.method
      this.mode = input.mode
      if (!body && input._bodyInit != null) {
        body = input._bodyInit
        input.bodyUsed = true
      }
    } else {
      this.url = String(input)
    }

    this.credentials = options.credentials || this.credentials || 'omit'
    if (options.headers || !this.headers) {
      this.headers = new Headers(options.headers)
    }
    this.method = normalizeMethod(options.method || this.method || 'GET')
    this.mode = options.mode || this.mode || null
    this.referrer = null

    if ((this.method === 'GET' || this.method === 'HEAD') && body) {
      throw new TypeError('Body not allowed for GET or HEAD requests')
    }
    this._initBody(body)
  }

  Request.prototype.clone = function() {
    return new Request(this, { body: this._bodyInit })
  }

  function decode(body) {
    var form = new FormData()
    body.trim().split('&').forEach(function(bytes) {
      if (bytes) {
        var split = bytes.split('=')
        var name = split.shift().replace(/\+/g, ' ')
        var value = split.join('=').replace(/\+/g, ' ')
        form.append(decodeURIComponent(name), decodeURIComponent(value))
      }
    })
    return form
  }

  function parseHeaders(rawHeaders) {
    var headers = new Headers()
    rawHeaders.split(/\r?\n/).forEach(function(line) {
      var parts = line.split(':')
      var key = parts.shift().trim()
      if (key) {
        var value = parts.join(':').trim()
        headers.append(key, value)
      }
    })
    return headers
  }

  Body.call(Request.prototype)

  function Response(bodyInit, options) {
    if (!options) {
      options = {}
    }

    this.type = 'default'
    this.status = 'status' in options ? options.status : 200
    this.ok = this.status >= 200 && this.status < 300
    this.statusText = 'statusText' in options ? options.statusText : 'OK'
    this.headers = new Headers(options.headers)
    this.url = options.url || ''
    this._initBody(bodyInit)
  }

  Body.call(Response.prototype)

  Response.prototype.clone = function() {
    return new Response(this._bodyInit, {
      status: this.status,
      statusText: this.statusText,
      headers: new Headers(this.headers),
      url: this.url
    })
  }

  Response.error = function() {
    var response = new Response(null, {status: 0, statusText: ''})
    response.type = 'error'
    return response
  }

  var redirectStatuses = [301, 302, 303, 307, 308]

  Response.redirect = function(url, status) {
    if (redirectStatuses.indexOf(status) === -1) {
      throw new RangeError('Invalid status code')
    }

    return new Response(null, {status: status, headers: {location: url}})
  }

  self.Headers = Headers
  self.Request = Request
  self.Response = Response

  self.fetch = function(input, init) {
    return new Promise(function(resolve, reject) {
      var request = new Request(input, init)
      var xhr = new XMLHttpRequest()

      xhr.onload = function() {
        var options = {
          status: xhr.status,
          statusText: xhr.statusText,
          headers: parseHeaders(xhr.getAllResponseHeaders() || '')
        }
        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')
        var body = 'response' in xhr ? xhr.response : xhr.responseText
        resolve(new Response(body, options))
      }

      xhr.onerror = function() {
        reject(new TypeError('Network request failed'))
      }

      xhr.ontimeout = function() {
        reject(new TypeError('Network request failed'))
      }

      xhr.open(request.method, request.url, true)

      if (request.credentials === 'include') {
        xhr.withCredentials = true
      }

      if ('responseType' in xhr && support.blob) {
        xhr.responseType = 'blob'
      }

      request.headers.forEach(function(value, name) {
        xhr.setRequestHeader(name, value)
      })

      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)
    })
  }
  self.fetch.polyfill = true
})(typeof self !== 'undefined' ? self : this);


/***/ }),
/* 420 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var react_router_dom_1 = __webpack_require__(8);
var Topic_1 = __webpack_require__(421);
var Board_1 = __webpack_require__(157);
var Topic_Trace_1 = __webpack_require__(427);
var BoardList_1 = __webpack_require__(428);
var UserCenter_1 = __webpack_require__(429);
var Message_1 = __webpack_require__(447);
var Topic_New_1 = __webpack_require__(459);
var Focus_1 = __webpack_require__(460);
var Header_1 = __webpack_require__(463);
var Footer_1 = __webpack_require__(490);
var MainPage_1 = __webpack_require__(491);
var User_1 = __webpack_require__(492);
var LogOn_1 = __webpack_require__(501);
var Logoff_1 = __webpack_require__(502);
var Topic_CreateTopic_1 = __webpack_require__(503);
var Status = __webpack_require__(62);
var Search_1 = __webpack_require__(504);
var SearchBoard_1 = __webpack_require__(505);
var Signin_1 = __webpack_require__(506);
var Index_1 = __webpack_require__(507);
var SignalR_1 = __webpack_require__(510);
var Edit_1 = __webpack_require__(511);
var RouteComponent = /** @class */ (function (_super) {
    __extends(RouteComponent, _super);
    function RouteComponent(props, context) {
        var _this = _super.call(this, props, context) || this;
        _this.match = props.match;
        return _this;
    }
    return RouteComponent;
}(React.Component));
exports.RouteComponent = RouteComponent;
var App = /** @class */ (function (_super) {
    __extends(App, _super);
    function App() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    App.prototype.render = function () {
        return (React.createElement("div", { style: { width: "100%" } },
            React.createElement(react_router_dom_1.BrowserRouter, null,
                React.createElement("div", { style: { backGroundColor: '#F5FAFD', justifyContent: 'center', display: 'flex', flexDirection: 'column', alignItems: "center", width: "100%", minWidth: "1140px", background: "linear-gradient(to top,rgba(121,184,202,0.3),rgba(121,184,202,0.02))" } },
                    React.createElement(Header_1.Header, null),
                    React.createElement(react_router_dom_1.Switch, null,
                        React.createElement(react_router_dom_1.Route, { exact: true, path: "/", component: MainPage_1.MainPage }),
                        React.createElement(react_router_dom_1.Route, { exact: true, path: "/topic/:topicid/:page?", component: Topic_1.ShowTopic }),
                        React.createElement(react_router_dom_1.Route, { exact: true, path: "/topic/:topicid/user/:userId/:page?", component: Topic_Trace_1.CurUserPost }),
                        React.createElement(react_router_dom_1.Route, { path: "/list/:boardId/:type?/:page?", component: Board_1.List }),
                        React.createElement(react_router_dom_1.Route, { exact: true, path: "/boardlist", component: BoardList_1.BoardList }),
                        React.createElement(react_router_dom_1.Route, { path: "/usercenter", component: UserCenter_1.UserCenter }),
                        React.createElement(react_router_dom_1.Route, { path: "/message", component: Message_1.Message }),
                        React.createElement(react_router_dom_1.Route, { path: "/focus", component: Focus_1.Focus }),
                        React.createElement(react_router_dom_1.Route, { path: "/newtopics", component: Topic_New_1.AllNewTopic }),
                        React.createElement(react_router_dom_1.Route, { path: "/user/:method/:id", component: User_1.User }),
                        React.createElement(react_router_dom_1.Route, { path: "/logon", exact: true, component: LogOn_1.default }),
                        React.createElement(react_router_dom_1.Route, { path: "/logon/logoff", component: Logoff_1.LogOff }),
                        React.createElement(react_router_dom_1.Route, { path: "/search", component: Search_1.Search }),
                        React.createElement(react_router_dom_1.Route, { path: "/searchBoard", component: SearchBoard_1.SearchBoard }),
                        React.createElement(react_router_dom_1.Route, { path: "/createtopic/:boardId", component: Topic_CreateTopic_1.CreateTopic }),
                        React.createElement(react_router_dom_1.Route, { path: "/signin", component: Signin_1.Signin }),
                        React.createElement(react_router_dom_1.Route, { path: "/sitemanage", component: Index_1.SiteManage }),
                        React.createElement(react_router_dom_1.Route, { path: "/signalr", component: SignalR_1.SignalRComponent }),
                        React.createElement(react_router_dom_1.Route, { path: "/editor/:mode/:id?", component: Edit_1.ShowEdit }),
                        React.createElement(react_router_dom_1.Route, { path: "/status/notfoundtopic", component: Status.NotFoundTopic }),
                        React.createElement(react_router_dom_1.Route, { path: "/status/notfoundboard", component: Status.NotFoundBoard }),
                        React.createElement(react_router_dom_1.Route, { path: "/status/logout", component: Status.LogOut }),
                        React.createElement(react_router_dom_1.Route, { path: "/status/topicdeleted", component: Status.TopicDeleted }),
                        React.createElement(react_router_dom_1.Route, { path: "/status/unauthorizedtopic", component: Status.UnauthorizedTopic }),
                        React.createElement(react_router_dom_1.Route, { path: "/status/unauthorizedboard", component: Status.UnauthorizedBoard }),
                        React.createElement(react_router_dom_1.Route, { path: "/status/unauthorizedoperation", component: Status.UnauthorizedOperation }),
                        React.createElement(react_router_dom_1.Route, { path: "/status/notfounduser", component: Status.NotFoundUser }),
                        React.createElement(react_router_dom_1.Route, { path: "/status/servererror", component: Status.ServerError }),
                        React.createElement(react_router_dom_1.Route, { path: "/status/contentneeded", component: Status.ContentNeeded }),
                        React.createElement(react_router_dom_1.Route, { path: "/status/operationforbidden", component: Status.OperationForbidden }),
                        React.createElement(react_router_dom_1.Route, { component: Status.PageNotFound })),
                    React.createElement(Footer_1.Footer, null)))));
    };
    return App;
}(React.Component));
exports.App = App;


/***/ }),
/* 421 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var $ = __webpack_require__(35);
var react_router_dom_1 = __webpack_require__(8);
var RouteComponent_1 = __webpack_require__(84);
var Topic_SendTopic_1 = __webpack_require__(159);
var Topic_Category_1 = __webpack_require__(423);
var Pager_1 = __webpack_require__(57);
var Topic_Topic_1 = __webpack_require__(160);
var Topic_Reply_1 = __webpack_require__(167);
var Status_1 = __webpack_require__(62);
var Topic_TopicInfo_1 = __webpack_require__(425);
var FindIP_1 = __webpack_require__(426);
var Test1 = /** @class */ (function (_super) {
    __extends(Test1, _super);
    function Test1() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Test1.prototype.render = function () {
        console.log(this.context.router);
        return React.createElement("div", null);
    };
    return Test1;
}(React.Component));
exports.Test1 = Test1;
var Post = /** @class */ (function (_super) {
    __extends(Post, _super);
    function Post(props, context) {
        var _this = _super.call(this, props, context) || this;
        _this.update = _this.update.bind(_this);
        _this.handleChange = _this.handleChange.bind(_this);
        _this.quote = _this.quote.bind(_this);
        _this.state = {
            page: 1, shouldRender: true, topicid: _this.match.params.topicid, totalPage: 1, userName: null, boardId: 7, topicInfo: { replyCount: 0 }, boardInfo: { masters: [], id: 7 }, fetchState: 'ok', quote: "", isFav: false, IPData: []
        };
        return _this;
    }
    Post.prototype.quote = function (content, userName, replyTime, floor) {
        console.log("in topic quote");
        var y = $("#sendTopicInfo").offset().top;
        var page = this.state.page;
        if (!this.state.page)
            page = 1;
        var url = "/topic/" + this.state.topicid + "/" + page + "#sendTopicInfo";
        this.props.history.push(url);
        this.setState({ quote: { content: content, userName: userName, replyTime: replyTime, floor: floor } });
    };
    Post.prototype.update = function () {
        this.setState({});
    };
    Post.prototype.handleChange = function () {
        return __awaiter(this, void 0, void 0, function () {
            var topicInfo, newPage, page, totalPage, userName, floor, url, isFav;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.getTopicInfo(this.match.params.topicid)];
                    case 1:
                        topicInfo = _a.sent();
                        newPage = topicInfo.replyCount % 10 === 0 ? topicInfo.replyCount / 10 : (topicInfo.replyCount - topicInfo.replyCount % 10) / 10 + 1;
                        if (!this.match.params.page) {
                            page = 1;
                        }
                        else {
                            page = parseInt(this.match.params.page);
                        }
                        return [4 /*yield*/, this.getTotalPage(topicInfo.replyCount)];
                    case 2:
                        totalPage = _a.sent();
                        userName = this.match.params.userName;
                        floor = (topicInfo.replyCount + 1) % 10 + 1;
                        if (page !== newPage) {
                            page = newPage;
                            url = "/topic/" + topicInfo.id + "/" + page + "#" + floor;
                            this.setState({ topicInfo: topicInfo, quote: { userName: "", content: "", replyTime: "" } });
                            this.props.history.push(url);
                        }
                        return [4 /*yield*/, Utility.getFavState(this.match.params.topicid)];
                    case 3:
                        isFav = _a.sent();
                        this.setState({ topicInfo: topicInfo, quote: { userName: "", content: "", replyTime: "" }, isFav: isFav });
                        return [2 /*return*/];
                }
            });
        });
    };
    Post.prototype.componentWillReceiveProps = function (newProps) {
        return __awaiter(this, void 0, void 0, function () {
            var page, userName, topicInfo, boardId, boardInfo, totalPage, isFav;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        console.log("in topic recieve props");
                        console.log(newProps);
                        if (!newProps.match.params.page) {
                            page = 1;
                        }
                        else {
                            page = parseInt(newProps.match.params.page);
                        }
                        userName = newProps.match.params.userName;
                        return [4 /*yield*/, Utility.getTopicInfo(newProps.match.params.topicid)];
                    case 1:
                        topicInfo = _a.sent();
                        boardId = topicInfo.boardId;
                        return [4 /*yield*/, Utility.getBoardInfo(boardId)];
                    case 2:
                        boardInfo = _a.sent();
                        totalPage = this.getTotalPage(topicInfo.replyCount);
                        return [4 /*yield*/, Utility.getFavState(newProps.match.params.topicid)];
                    case 3:
                        isFav = _a.sent();
                        console.log("before setstate");
                        this.setState({ page: page, topicid: newProps.match.params.topicid, totalPage: totalPage, userName: userName, boardId: boardId, topicInfo: topicInfo, boardInfo: boardInfo, isFav: isFav });
                        return [2 /*return*/];
                }
            });
        });
    };
    Post.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var page, userName, topicInfo, boardId, boardInfo, totalPage, IPData;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.match.params.page) {
                            page = 1;
                        }
                        else {
                            page = parseInt(this.match.params.page);
                        }
                        userName = this.match.params.userName;
                        return [4 /*yield*/, Utility.getTopicInfo(this.match.params.topicid)];
                    case 1:
                        topicInfo = _a.sent();
                        boardId = topicInfo.boardId;
                        return [4 /*yield*/, Utility.getBoardInfo(boardId)];
                    case 2:
                        boardInfo = _a.sent();
                        totalPage = this.getTotalPage(topicInfo.replyCount);
                        IPData = [];
                        if (!Utility.isMaster(boardInfo.boardMasters)) return [3 /*break*/, 4];
                        return [4 /*yield*/, Utility.findIP(this.match.params.topicid)];
                    case 3:
                        IPData = _a.sent();
                        _a.label = 4;
                    case 4:
                        this.setState({ page: page, topicid: this.match.params.topicid, totalPage: totalPage, userName: userName, boardId: boardId, topicInfo: topicInfo, boardInfo: boardInfo, fetchState: topicInfo, IPData: IPData });
                        return [2 /*return*/];
                }
            });
        });
    };
    Post.prototype.getTotalPage = function (count) {
        return Utility.getTotalPageof10(count);
    };
    Post.prototype.render = function () {
        switch (this.state.fetchState) {
            case 'ok':
                return React.createElement("div", null);
            case 'not found':
                return React.createElement(Status_1.NotFoundTopic, null);
            case 'unauthorized':
                return React.createElement(Status_1.UnauthorizedTopic, null);
            case 'server error':
                return React.createElement(Status_1.ServerError, null);
        }
        var topic = null;
        var hotReply = null;
        var topicInfo = null;
        if (parseInt(this.match.params.page) === 1 || !this.match.params.page) {
            topicInfo = React.createElement(Topic_TopicInfo_1.TopicInfo, { topicInfo: this.state.topicInfo, tag1: this.state.topicInfo.tag1, tag2: this.state.topicInfo.tag2, boardInfo: this.state.boardInfo, adsUrl: '/images/ads.jpg', isFav: this.state.isFav });
            topic = React.createElement(Topic_Topic_1.PostTopic, { imgUrl: "/images/ads.jpg", page: this.state.page, topicid: this.state.topicid, userId: null, topicInfo: this.state.topicInfo, boardInfo: this.state.boardInfo, quote: this.quote, isTrace: false });
            hotReply = React.createElement(Topic_Reply_1.Reply, { topicInfo: this.state.topicInfo, DateTime: Date.now(), page: this.match.params.page, topicId: this.match.params.topicid, boardInfo: this.state.boardInfo, quote: this.quote, isTrace: false, isHot: true, userId: null });
        }
        var pagerUrl = "/topic/" + this.state.topicid + "/";
        var topicHtml = React.createElement("div", { className: "center" },
            React.createElement(FindIP_1.FindIP, { data: this.state.IPData }),
            React.createElement("div", { className: "row", style: { width: "100%", justifyContent: 'space-between', alignItems: "center" } },
                React.createElement(Topic_Category_1.Category, { topicId: this.state.topicid, topicInfo: this.state.topicInfo, boardInfo: this.state.boardInfo }),
                React.createElement(Pager_1.Pager, { page: this.state.page, url: pagerUrl, totalPage: this.state.totalPage })),
            topicInfo,
            topic,
            hotReply,
            React.createElement(Topic_Reply_1.Reply, { topicInfo: this.state.topicInfo, DateTime: Date.now(), page: this.match.params.page, topicId: this.match.params.topicid, boardInfo: this.state.boardInfo, quote: this.quote, isHot: false, isTrace: false, userId: null }),
            React.createElement("div", { style: { display: "flex", width: "100%", justifyContent: "flex-end", marginTop: "3rem" } },
                React.createElement(Pager_1.Pager, { page: this.state.page, url: pagerUrl, totalPage: this.state.totalPage })),
            React.createElement(Topic_SendTopic_1.SendTopic, { onChange: this.handleChange, topicid: this.state.topicid, boardId: this.state.boardId, boardInfo: this.state.boardInfo, content: this.state.quote, userId: this.state.topicInfo.userId }));
        return topicHtml;
        /*  if (this.state.shouldRender) {
          
          } else {
              return <img src="/images/waiting.gif"/>;
          }*/
    };
    return Post;
}(RouteComponent_1.RouteComponent));
exports.Post = Post;
exports.ShowTopic = react_router_dom_1.withRouter(Post);


/***/ }),
/* 422 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var TopicManagement = /** @class */ (function (_super) {
    __extends(TopicManagement, _super);
    function TopicManagement(props) {
        var _this = _super.call(this, props) || this;
        _this.confirm = _this.confirm.bind(_this);
        _this.close = _this.close.bind(_this);
        _this.showHighlight = _this.showHighlight.bind(_this);
        _this.showNormal = _this.showNormal.bind(_this);
        _this.showNoReason = _this.showNoReason.bind(_this);
        _this.showDays = _this.showDays.bind(_this);
        _this.showBoard = _this.showBoard.bind(_this);
        _this.reasonInput = _this.reasonInput.bind(_this);
        _this.daysInput = _this.daysInput.bind(_this);
        _this.boardInput = _this.boardInput.bind(_this);
        _this.state = {
            state: "normal", reason: "", tips: "", days: 0, board: null, topicInfo: { state: 0, topState: 0, bestState: 0 }, fetchState: 'ok', color: "#fff"
        };
        return _this;
    }
    TopicManagement.prototype.showIP = function () {
    };
    TopicManagement.prototype.showNormal = function () {
        this.setState({ state: 'normal' });
    };
    TopicManagement.prototype.showNoReason = function () {
        this.setState({ state: 'noReason' });
    };
    TopicManagement.prototype.showDays = function () {
        this.setState({ state: 'days' });
    };
    TopicManagement.prototype.showHighlight = function () {
        this.setState({ state: 'highlight' });
    };
    TopicManagement.prototype.showBoard = function () {
        this.setState({ state: 'board' });
    };
    TopicManagement.prototype.confirm = function () {
        return __awaiter(this, void 0, void 0, function () {
            var status, _a, _b, color, bold, italic, _c, UIId, data;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        status = 'ok';
                        console.log("state");
                        console.log(this.state.state);
                        _a = this.state.state;
                        switch (_a) {
                            case 'normal': return [3 /*break*/, 1];
                            case 'highlight': return [3 /*break*/, 21];
                            case 'days': return [3 /*break*/, 25];
                            case 'board': return [3 /*break*/, 35];
                        }
                        return [3 /*break*/, 38];
                    case 1:
                        if (!(this.state.reason !== "")) return [3 /*break*/, 19];
                        _b = $("input[name='option']:checked").val();
                        switch (_b) {
                            case '取消固顶': return [3 /*break*/, 2];
                            case '取消全站固顶': return [3 /*break*/, 4];
                            case '删除': return [3 /*break*/, 6];
                            case '加精': return [3 /*break*/, 8];
                            case '解除精华': return [3 /*break*/, 10];
                            case '解除锁定': return [3 /*break*/, 12];
                            case '禁止热门': return [3 /*break*/, 14];
                            case '允许热门': return [3 /*break*/, 16];
                        }
                        return [3 /*break*/, 18];
                    case 2: return [4 /*yield*/, Utility.removeBoardTopTopic(this.props.topicId, this.props.boardId, this.state.reason)];
                    case 3:
                        status = _d.sent();
                        this.setState({ fetchState: status });
                        _d.label = 4;
                    case 4: return [4 /*yield*/, Utility.removeBoardTopTopic(this.props.topicId, this.props.boardId, this.state.reason)];
                    case 5:
                        status = _d.sent();
                        this.setState({ fetchState: status });
                        return [3 /*break*/, 18];
                    case 6: return [4 /*yield*/, Utility.deleteTopic(this.props.topicId, this.state.reason)];
                    case 7:
                        status = _d.sent();
                        this.setState({ fetchState: status });
                        return [3 /*break*/, 18];
                    case 8: return [4 /*yield*/, Utility.setBestTopic(this.props.topicId, this.state.reason)];
                    case 9:
                        status = _d.sent();
                        this.setState({ fetchState: status });
                        return [3 /*break*/, 18];
                    case 10: return [4 /*yield*/, Utility.cancelBestTopic(this.props.topicId, this.state.reason)];
                    case 11:
                        status = _d.sent();
                        this.setState({ fetchState: status });
                        return [3 /*break*/, 18];
                    case 12: return [4 /*yield*/, Utility.unLockTopic(this.props.topicId, this.props.boardId, this.state.reason)];
                    case 13:
                        status = _d.sent();
                        this.setState({ fetchState: status });
                        return [3 /*break*/, 18];
                    case 14: return [4 /*yield*/, Utility.setDisableHot(this.props.topicId, this.state.reason)];
                    case 15:
                        status = _d.sent();
                        this.setState({ fetchState: status });
                        return [3 /*break*/, 18];
                    case 16: return [4 /*yield*/, Utility.cancelDisableHot(this.props.topicId, this.state.reason)];
                    case 17:
                        status = _d.sent();
                        this.setState({ fetchState: status });
                        return [3 /*break*/, 18];
                    case 18: return [3 /*break*/, 20];
                    case 19:
                        this.setState({ tips: "请输入原因！" });
                        _d.label = 20;
                    case 20: return [3 /*break*/, 38];
                    case 21:
                        color = $("#custom").spectrum("get").toHexString($("#custom").spectrum("get"));
                        if (!(this.state.reason !== "")) return [3 /*break*/, 23];
                        console.log("color");
                        console.log("color is" + this.state.color);
                        bold = $("input[name='bold']:checked") ? true : false;
                        italic = $("input[name='italic']:checked") ? true : false;
                        return [4 /*yield*/, Utility.setHighlight(this.props.topicId, bold, italic, color, this.state.days, this.state.reason)];
                    case 22:
                        _d.sent();
                        return [3 /*break*/, 24];
                    case 23:
                        this.setState({ tips: "请输入原因！" });
                        _d.label = 24;
                    case 24: return [3 /*break*/, 38];
                    case 25:
                        if (!this.state.reason) return [3 /*break*/, 33];
                        _c = $("input[name='option']:checked").val();
                        switch (_c) {
                            case '固顶': return [3 /*break*/, 26];
                            case '全站固顶': return [3 /*break*/, 28];
                            case '锁定': return [3 /*break*/, 30];
                        }
                        return [3 /*break*/, 32];
                    case 26: return [4 /*yield*/, Utility.addBoardTopTopic(this.props.topicId, this.props.boardId, 2, this.state.days, this.state.reason)];
                    case 27:
                        status = _d.sent();
                        this.setState({ fetchState: status });
                        return [3 /*break*/, 32];
                    case 28:
                        console.log("quanzhanguding");
                        return [4 /*yield*/, Utility.addBoardTopTopic(this.props.topicId, this.props.boardId, 4, this.state.days, this.state.reason)];
                    case 29:
                        status = _d.sent();
                        console.log(status);
                        this.setState({ fetchState: status });
                        return [3 /*break*/, 32];
                    case 30: return [4 /*yield*/, Utility.lockTopic(this.props.topicId, this.props.boardId, this.state.reason, this.state.days)];
                    case 31:
                        status = _d.sent();
                        this.setState({ fetchState: status });
                        return [3 /*break*/, 32];
                    case 32: return [3 /*break*/, 34];
                    case 33:
                        this.setState({ tips: "请输入原因！" });
                        _d.label = 34;
                    case 34: return [3 /*break*/, 38];
                    case 35:
                        if (!this.state.reason) return [3 /*break*/, 37];
                        return [4 /*yield*/, Utility.moveTopic(this.props.topicId, this.state.board, this.state.reason)];
                    case 36:
                        status = _d.sent();
                        if (status === 'ok') {
                            this.setState({ fetchState: status });
                            return [3 /*break*/, 38];
                        }
                        else {
                            this.setState({ tips: "输入有误！" });
                        }
                        return [3 /*break*/, 38];
                    case 37:
                        this.setState({ tips: "请输入原因！" });
                        _d.label = 38;
                    case 38:
                        UIId = "#manage" + this.props.topicId;
                        $(UIId).css("display", "none");
                        return [4 /*yield*/, Utility.getTopicInfo(this.props.topicId)];
                    case 39:
                        data = _d.sent();
                        this.setState({ topicInfo: data });
                        this.props.update();
                        return [2 /*return*/];
                }
            });
        });
    };
    TopicManagement.prototype.close = function () {
        var UIId = "#manage" + this.props.topicId;
        $(UIId).css("display", "none");
    };
    TopicManagement.prototype.reasonInput = function (e) {
        this.setState({ reason: e.target.value });
    };
    TopicManagement.prototype.daysInput = function (e) {
        this.setState({ days: e.target.value });
    };
    TopicManagement.prototype.boardInput = function (e) {
        this.setState({ board: e.target.value });
    };
    TopicManagement.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.getTopicInfo(this.props.topicId)];
                    case 1:
                        data = _a.sent();
                        console.log(data);
                        this.setState({ topicInfo: data });
                        return [2 /*return*/];
                }
            });
        });
    };
    TopicManagement.prototype.componentDidUpdate = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                $("#custom").spectrum({
                    color: "#f00"
                });
                return [2 /*return*/];
            });
        });
    };
    TopicManagement.prototype.componentWillRecieveProps = function (newProps) {
        return __awaiter(this, void 0, void 0, function () {
            var data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.getTopicInfo(newProps.topicId)];
                    case 1:
                        data = _a.sent();
                        this.setState({ topicInfo: data });
                        return [2 /*return*/];
                }
            });
        });
    };
    TopicManagement.prototype.render = function () {
        var info;
        var normalInfo = React.createElement("div", { className: "column" },
            React.createElement("div", { className: "row manageOperation", style: { justifyContent: "space-around", marginTop: "1rem" } },
                React.createElement("div", null, "\u539F\u56E0"),
                React.createElement("input", { type: "text", value: this.state.reason, onChange: this.reasonInput })),
            React.createElement("div", null, this.state.tips));
        var noReasonInfo = null;
        var daysInfo = React.createElement("div", { className: "column" },
            React.createElement("div", { className: "row manageOperation", style: { justifyContent: "space-around", marginTop: "1rem" } },
                React.createElement("div", null, "\u5929\u6570"),
                React.createElement("input", { type: "text", value: this.state.days, onChange: this.daysInput })),
            React.createElement("div", { className: "row manageOperation", style: { justifyContent: "space-around", marginTop: "1rem" } },
                React.createElement("div", null, "\u539F\u56E0"),
                React.createElement("input", { type: "text", value: this.state.reason, onChange: this.reasonInput })),
            React.createElement("div", null, this.state.tips));
        var boardInfo = React.createElement("div", { className: "column" },
            React.createElement("div", { className: "row manageOperation", style: { justifyContent: "space-around", marginTop: "1rem" } },
                React.createElement("div", null, "\u7248\u9762"),
                React.createElement("input", { type: "text", value: this.state.board, onChange: this.boardInput })),
            React.createElement("div", { className: "row manageOperation", style: { justifyContent: "space-around", marginTop: "1rem" } },
                React.createElement("div", null, "\u539F\u56E0"),
                React.createElement("input", { type: "text", value: this.state.reason, onChange: this.reasonInput })),
            React.createElement("div", null, this.state.tips));
        var highlightInfo = React.createElement("div", { className: "column" },
            React.createElement("div", { className: "row manageOperation", style: { justifyContent: "space-around", marginTop: "1rem" } },
                React.createElement("div", null, "\u52A0\u7C97"),
                React.createElement("input", { type: "radio", value: '加粗', name: 'bold' })),
            React.createElement("div", { className: "row manageOperation", style: { justifyContent: "space-around", marginTop: "1rem" } },
                React.createElement("div", null, "\u659C\u4F53"),
                React.createElement("input", { type: "radio", value: '斜体', name: 'italic' })),
            React.createElement("div", { className: "row manageOperation", style: { justifyContent: "space-around", marginTop: "1rem" } },
                React.createElement("div", null, "\u989C\u8272"),
                React.createElement("input", { type: 'text', id: "custom" })),
            React.createElement("div", { className: "row manageOperation", style: { justifyContent: "space-around", marginTop: "1rem" } },
                React.createElement("div", null, "\u5929\u6570"),
                React.createElement("input", { type: "text", value: this.state.days, onChange: this.daysInput })),
            React.createElement("div", { className: "row manageOperation", style: { justifyContent: "space-around", marginTop: "1rem" } },
                React.createElement("div", null, "\u539F\u56E0"),
                React.createElement("input", { type: "text", value: this.state.reason, onChange: this.reasonInput })),
            React.createElement("div", null, this.state.tips));
        switch (this.state.state) {
            case 'normal':
                info = normalInfo;
                break;
            case 'noReason':
                info = noReasonInfo;
                break;
            case 'days':
                info = daysInfo;
                break;
            case 'board':
                info = boardInfo;
                break;
            case 'highlight':
                info = highlightInfo;
                break;
        }
        var UI = React.createElement("div", { className: "column manageInfo", id: "award" },
            React.createElement("div", { className: "column", style: { alignItems: 'center' } },
                React.createElement("div", { className: "row" },
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "option", value: this.state.topicInfo.state === 1 ? '解锁' : "锁定", onClick: this.showDays }),
                        React.createElement("div", null, this.state.topicInfo.state === 1 ? '解锁' : "锁定")),
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "option", value: this.state.topicInfo.disableHot ? "允许热门" : "禁止热门", onClick: this.showNormal }),
                        React.createElement("div", null, this.state.topicInfo.disableHot ? "允许热门" : "禁止热门"))),
                React.createElement("div", { className: "row", style: { marginTop: "1rem" } },
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "option", value: "删除", onClick: this.showNormal }),
                        React.createElement("div", null, "\u5220\u9664")),
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "option", value: "移动", onClick: this.showBoard }),
                        React.createElement("div", null, "\u79FB\u52A8"))),
                React.createElement("div", { className: "row", style: { marginTop: "1rem" } },
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "option", value: this.state.topicInfo.topState === 2 ? '取消固顶' : '固顶', onClick: this.state.topicInfo.topState === 2 ? this.showNormal : this.showDays }),
                        React.createElement("div", null, this.state.topicInfo.topState === 2 ? '取消固顶' : '固顶')),
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "option", value: this.state.topicInfo.topState === 4 ? '取消全站固顶' : '全站固顶', onClick: this.state.topicInfo.topState === 4 ? this.showNormal : this.showDays }),
                        React.createElement("div", null, this.state.topicInfo.topState === 4 ? '取消全站固顶' : '全站固顶')),
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "option", value: this.state.topicInfo.bestState === 1 ? "解除精华" : "加精", onClick: this.showNormal }),
                        React.createElement("div", null, this.state.topicInfo.bestState === 1 ? "解除精华" : "加精")),
                    React.createElement("div", { className: "row" },
                        React.createElement("input", { type: "radio", name: "option", value: "高亮", onClick: this.showHighlight }),
                        React.createElement("div", null, "\u9AD8\u4EAE")))),
            info);
        var UIId = "manage" + this.props.topicId;
        var highlightOptionId = "manage" + this.props.topicId;
        return React.createElement("div", { style: { display: "none" }, id: UIId, className: "topicManagement" },
            UI,
            React.createElement("div", { className: "row", style: { justifyContent: "space-around", marginTop: "1rem" } },
                React.createElement("button", { onClick: this.confirm, className: "confirmManagement" }, "\u786E\u8BA4"),
                React.createElement("button", { onClick: this.close, className: "confirmManagement" }, "\u5173\u95ED")));
    };
    return TopicManagement;
}(React.Component));
exports.TopicManagement = TopicManagement;


/***/ }),
/* 423 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var react_router_dom_1 = __webpack_require__(8);
var Category = /** @class */ (function (_super) {
    __extends(Category, _super);
    function Category(props) {
        var _this = _super.call(this, props) || this;
        _this.state = ({
            boardId: "",
            topicId: "", boardName: "", title: ""
        });
        return _this;
    }
    Category.prototype.componentDidMount = function () {
        this.setState({ boardId: this.props.topicInfo.boardId, topicId: this.props.topicId, boardName: this.props.boardInfo.name, title: this.props.topicInfo.title });
    };
    Category.prototype.componentWillReceiveProps = function (newProps) {
        this.setState({ boardId: newProps.topicInfo.boardId, topicId: newProps.topicId, boardName: newProps.boardInfo.name, title: newProps.topicInfo.title });
    };
    Category.prototype.render = function () {
        var listUrl = "/list/" + this.state.boardId;
        var topicUrl = "/topic/" + this.state.topicId;
        return React.createElement("div", { className: "row", style: { alignItems: "baseline", justifyContent: "flex-start", color: "grey", fontSize: "0.75rem", marginBottom: "1rem" } },
            React.createElement(react_router_dom_1.Link, { style: { color: "grey", fontSize: "1rem", marginRight: "0.5rem" }, to: "/" }, "\u9996\u9875"),
            React.createElement("i", { className: "fa fa-chevron-right" }),
            React.createElement(react_router_dom_1.Link, { style: { color: "grey", fontSize: "1rem", marginLeft: "0.5rem", marginRight: "0.5rem" }, to: listUrl }, this.state.boardName),
            React.createElement("i", { className: "fa fa-chevron-right" }),
            React.createElement(react_router_dom_1.Link, { style: { color: "grey", fontSize: "1rem", marginLeft: "0.5rem", marginRight: "0.5rem" }, to: topicUrl },
                React.createElement("div", { style: { overflow: "hidden", textOverflow: "ellipsis", maxWidth: "15rem", whiteSpace: "nowrap" } }, this.state.title),
                " "));
    };
    return Category;
}(React.Component));
exports.Category = Category;


/***/ }),
/* 424 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var AwardInfo = /** @class */ (function (_super) {
    __extends(AwardInfo, _super);
    function AwardInfo(props, content) {
        return _super.call(this, props, content) || this;
    }
    AwardInfo.prototype.render = function () {
        return React.createElement("div", { className: "good tagSize" },
            React.createElement("div", { className: "userImage" },
                React.createElement("img", { src: this.props.userImgUrl }),
                " "),
            React.createElement("div", { className: "userName" }, this.props.userName),
            React.createElement("div", { className: "grades" }, this.props.content),
            React.createElement("div", { className: "credit" },
                React.createElement("span", null, this.props.reason)));
    };
    return AwardInfo;
}(React.Component));
exports.AwardInfo = AwardInfo;


/***/ }),
/* 425 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var react_router_dom_1 = __webpack_require__(8);
var TopicInfo = /** @class */ (function (_super) {
    __extends(TopicInfo, _super);
    function TopicInfo(props) {
        var _this = _super.call(this, props) || this;
        _this.follow = _this.follow.bind(_this);
        _this.unFollow = _this.unFollow.bind(_this);
        _this.state = { tag1Name: "", tag2Name: "", isFollow: _this.props.isFav };
        return _this;
    }
    TopicInfo.prototype.follow = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.setFavoriteTopic(this.props.topicInfo.id)];
                    case 1:
                        _a.sent();
                        this.setState({ isFollow: true });
                        return [2 /*return*/];
                }
            });
        });
    };
    TopicInfo.prototype.unFollow = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.deleteFavoriteTopic(this.props.topicInfo.id)];
                    case 1:
                        _a.sent();
                        this.setState({ isFollow: false });
                        return [2 /*return*/];
                }
            });
        });
    };
    TopicInfo.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var t1, t2;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        t1 = "", t2 = "";
                        if (!this.props.tag1) return [3 /*break*/, 2];
                        return [4 /*yield*/, Utility.getTagNamebyId(this.props.tag1)];
                    case 1:
                        t1 = _a.sent();
                        _a.label = 2;
                    case 2:
                        if (!this.props.tag2) return [3 /*break*/, 4];
                        return [4 /*yield*/, Utility.getTagNamebyId(this.props.tag2)];
                    case 3:
                        t2 = _a.sent();
                        _a.label = 4;
                    case 4:
                        this.setState({ tag1Name: t1, tag2Name: t2 });
                        return [2 /*return*/];
                }
            });
        });
    };
    TopicInfo.prototype.onError = function (e) {
        e.target.src = "/images/_CC98\u534F\u4F1A.png";
    };
    TopicInfo.prototype.render = function () {
        var url = "/images/_" + this.props.boardInfo.name + ".png";
        var boardUrl = "/list/" + this.props.boardInfo.id;
        var tags = null;
        if (this.props.tag1 || this.props.tag2) {
            tags = React.createElement("div", { id: "tags" },
                React.createElement("div", { className: "tagProp tagSize" },
                    "\u6807\u7B7E\uFF1A ",
                    this.state.tag1Name,
                    " ",
                    this.state.tag2Name),
                React.createElement("div", { className: "tagProp" }));
        }
        return React.createElement("div", { className: "topicInfo-info" },
            React.createElement("div", { className: "topicInfo-boardInfo" },
                React.createElement(react_router_dom_1.Link, { to: boardUrl },
                    React.createElement("div", { className: "topicInfo-boardImage" },
                        React.createElement("img", { className: "topicInfo-boardImage", onError: this.onError, src: url }))),
                React.createElement("div", { className: "topicInfo-boardMessage" },
                    React.createElement(react_router_dom_1.Link, { to: boardUrl },
                        React.createElement("div", { style: { color: "#fff" } }, this.props.boardInfo.name)),
                    React.createElement("div", { style: { marginTop: "0.5rem", fontSize: "0.75rem" } },
                        this.props.boardInfo.todayCount,
                        " / ",
                        this.props.boardInfo.topicCount))),
            React.createElement("div", { className: "topicInfo-title" },
                React.createElement("div", { className: "column", id: "topicTitleProp" },
                    React.createElement("div", { id: "essay1", className: "row" }, this.props.topicInfo.title),
                    React.createElement("div", { className: "row", id: "essayProp" },
                        tags,
                        React.createElement("div", { id: "time" },
                            React.createElement("div", { className: "viewProp" },
                                React.createElement("i", { className: "fa fa-clock-o fa-lg fa-fw" })),
                            " ",
                            React.createElement("div", { className: "timeProp tagSize" }, moment(this.props.topicInfo.time).format('YYYY-MM-DD HH:mm:ss'))),
                        React.createElement("div", { id: "viewtimes" },
                            React.createElement("div", { className: "viewProp" },
                                React.createElement("i", { className: "fa fa-eye fa-lg fa-fw" }),
                                "  "),
                            " ",
                            React.createElement("div", { className: "timeProp tagSize" }, this.props.topicInfo.hitCount)),
                        React.createElement("div", { className: "followTopic", onClick: this.state.isFollow ? this.unFollow : this.follow }, this.state.isFollow ? "已收藏" : "收藏")))),
            React.createElement("div", { className: "topicInfo-ads" },
                React.createElement("img", { className: "topicInfo-ads", src: this.props.adsUrl })));
    };
    return TopicInfo;
}(React.Component));
exports.TopicInfo = TopicInfo;


/***/ }),
/* 426 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var FindIP = /** @class */ (function (_super) {
    __extends(FindIP, _super);
    function FindIP() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    FindIP.prototype.generateIPInfo = function (item) {
        return React.createElement("tr", null,
            React.createElement("td", null, item.ip),
            React.createElement("div", { className: "column" }, item.posts.map(this.generatePostInfo)));
    };
    FindIP.prototype.generatePostInfo = function (item) {
        return React.createElement("div", { className: "column" },
            React.createElement("div", { className: "row" },
                React.createElement("div", null,
                    "\u7528\u6237\u540D ",
                    item.userName),
                React.createElement("div", null,
                    " \u697C\u5C42 ",
                    item.floor)),
            React.createElement("div", { className: "IPContent" }, item.content));
    };
    FindIP.prototype.render = function () {
        return React.createElement("div", { className: "findIP" }, this.props.data.map(this.generateIPInfo.bind(this)));
    };
    return FindIP;
}(React.Component));
exports.FindIP = FindIP;


/***/ }),
/* 427 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var Topic_Topic_1 = __webpack_require__(160);
var Pager_1 = __webpack_require__(57);
var RouteComponent_1 = __webpack_require__(84);
var Topic_SendTopic_1 = __webpack_require__(159);
var Topic_Reply_1 = __webpack_require__(167);
var CurUserPost = /** @class */ (function (_super) {
    __extends(CurUserPost, _super);
    function CurUserPost(props, context) {
        var _this = _super.call(this, props, context) || this;
        _this.quote = _this.quote.bind(_this);
        _this.shouldRender = _this.shouldRender.bind(_this);
        _this.handleChange = _this.handleChange.bind(_this);
        _this.state = {
            page: 1, topicid: _this.match.params.topicid, totalPage: 1, userId: _this.match.params.userId, topicInfo: { replyCount: 0 }, boardInfo: { masters: [], id: 7 }, content: "", shouldRender: false
        };
        return _this;
    }
    CurUserPost.prototype.quote = function (content) {
        this.setState({ content: content });
    };
    CurUserPost.prototype.handleChange = function () {
        return __awaiter(this, void 0, void 0, function () {
            var topicInfo, page, totalPage;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.getTopicInfo(this.match.params.topicid)];
                    case 1:
                        topicInfo = _a.sent();
                        if (!this.match.params.page) {
                            page = 1;
                        }
                        else {
                            page = parseInt(this.match.params.page);
                        }
                        return [4 /*yield*/, this.getTotalPage(this.state.topicInfo.replyCount)];
                    case 2:
                        totalPage = _a.sent();
                        this.setState({ page: page, topicid: this.match.params.topicid, totalPage: totalPage, topicInfo: topicInfo });
                        return [2 /*return*/];
                }
            });
        });
    };
    CurUserPost.prototype.componentWillReceiveProps = function (newProps) {
        return __awaiter(this, void 0, void 0, function () {
            var page, userId, totalPage, topicInfo, boardId, boardInfo;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!newProps.match.params.page) {
                            page = 1;
                        }
                        else {
                            page = parseInt(newProps.match.params.page);
                        }
                        userId = newProps.match.params.userId;
                        return [4 /*yield*/, this.getTotalPage.bind(this)(this.match.params.topicid)];
                    case 1:
                        totalPage = _a.sent();
                        return [4 /*yield*/, Utility.getTopicInfo(this.match.params.topicid)];
                    case 2:
                        topicInfo = _a.sent();
                        boardId = topicInfo.boardId;
                        return [4 /*yield*/, Utility.getBoardInfo(boardId)];
                    case 3:
                        boardInfo = _a.sent();
                        this.setState({ page: page, topicid: newProps.match.params.topicid, totalPage: totalPage, userId: newProps.match.params.userId, topicInfo: topicInfo, boardInfo: boardInfo });
                        return [2 /*return*/];
                }
            });
        });
    };
    CurUserPost.prototype.shouldRender = function (fetchState) {
        if (fetchState) {
            this.setState({ shouldRender: true });
        }
        else {
            this.setState({ shouldRender: false });
        }
    };
    CurUserPost.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var page, totalPage, userId, topicInfo, boardId, boardInfo;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.match.params.page) {
                            page = 1;
                        }
                        else {
                            page = parseInt(this.match.params.page);
                        }
                        return [4 /*yield*/, this.getTotalPage.bind(this)(this.match.params.topicid)];
                    case 1:
                        totalPage = _a.sent();
                        userId = this.match.params.userId;
                        console.log("userId=" + userId);
                        return [4 /*yield*/, Utility.getTopicInfo(this.match.params.topicid)];
                    case 2:
                        topicInfo = _a.sent();
                        boardId = topicInfo.boardId;
                        return [4 /*yield*/, Utility.getBoardInfo(boardId)];
                    case 3:
                        boardInfo = _a.sent();
                        this.setState({ page: page, topicid: this.match.params.topicid, totalPage: totalPage, userId: userId, topicInfo: topicInfo, boardInfo: boardInfo });
                        return [2 /*return*/];
                }
            });
        });
    };
    CurUserPost.prototype.getTotalPage = function (topicId) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.getCurUserTotalReplyPage(topicId, this.match.params.userId, this.context.router)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    CurUserPost.prototype.render = function () {
        console.log("inrender userId=" + this.state.userId);
        var topic = null;
        if (this.state.page == 1 && this.state.topicInfo.userId == this.match.params.userId) {
            topic = React.createElement(Topic_Topic_1.PostTopic, { imgUrl: "/images/ads.jpg", page: this.state.page, topicid: this.state.topicid, userId: this.state.userId, topicInfo: this.state.topicInfo, boardInfo: this.state.boardInfo, quote: this.quote, isTrace: true });
        }
        var url = "/topic/" + this.match.params.topicid + "/user/" + this.match.params.userId + "/";
        return React.createElement("div", { className: "center", style: { width: "1140px" } },
            React.createElement("div", { style: { width: "100%" } },
                React.createElement(Pager_1.Pager, { page: this.state.page, totalPage: this.state.totalPage, url: url })),
            topic,
            React.createElement(Topic_Reply_1.Reply, { topicInfo: this.state.topicInfo, DateTime: Date.now(), boardInfo: this.state.boardInfo, page: this.state.page, topicId: this.state.topicid, userId: this.state.userId, quote: this.quote, isTrace: true, isHot: false }),
            React.createElement("div", { style: { width: "100%" } },
                React.createElement(Pager_1.Pager, { page: this.state.page, totalPage: this.state.totalPage, url: url })),
            React.createElement(Topic_SendTopic_1.SendTopic, { onChange: this.handleChange, topicid: this.state.topicid, boardId: this.state.boardInfo.id, boardInfo: this.state.boardInfo, content: this.state.content, userId: this.state.userId }));
    };
    return CurUserPost;
}(RouteComponent_1.RouteComponent));
exports.CurUserPost = CurUserPost;
/*export class Reply extends React.Component<{ topicId, page, topicInfo, boardInfo,userId,quote }, { masters,contents }>{
    constructor(props, content) {
        super(props, content);
        this.update = this.update.bind(this);
        this.quote = this.quote.bind(this);
        this.state = {
            contents: [],
            masters:[]
        };

    }
    quote() {
        this.props.quote(this.state.contents);
    }
    async update() {
        const page = this.props.page || 1;
        const storageId = `TopicContent_${this.props.topicId}_${page}`;
        let realContents;
        const data = await Utility.getUserInfo(this.props.userId);
        const userName = data.name;
        realContents = await Utility.getCurUserTopicContent(this.props.topicId, page, userName, this.props.userId);
        const masters = this.props.boardInfo.masters;
        this.setState({ contents: realContents, masters: masters });
    }
    async componentWillReceiveProps(newProps) {
        const page = newProps.page || 1;
        const storageId = `TopicContent_${newProps.topicId}_${page}`;
        let realContents;
        const data = await Utility.getUserInfo(this.props.userId);
        const userName = data.name;
        realContents = await Utility.getCurUserTopicContent(newProps.topicId, page, userName, newProps.userId);
        const masters = this.props.boardInfo.masters;
        this.setState({ contents: realContents, masters: masters });
            }
    private generateContents(item: ContentState) {
        return <div className="reply" ><div style={{ marginTop: "1rem", marginBotton: "0.3125rem", border: "#EAEAEA solid thin", backgroundColor: "#fff" }}>
            <Replier key={item.postId} isAnonymous={item.isAnonymous} userId={item.userId} topicid={item.topicId} userName={item.userName} replyTime={item.time} floor={item.floor} userImgUrl={item.userImgUrl} sendTopicNumber={item.sendTopicNumber} privilege={item.privilege} isDeleted={item.isDeleted} quote={this.quote} content={item.content} traceMode={true} isHot={false} popularity={item.popularity} />
            <Judge userId={item.userId} postId={item.postId} update={this.update} topicId={item.topicId} />
            <PostManagement topicId={item.topicId} postId={item.postId} userId={item.userId} update={this.update} privilege={item.privilege} />
            <ReplyContent key={item.content}content={item.content}  postid={item.postId} contentType={item.contentType} />
            <Award postId={item.postId} updateTime={Date.now()} />
            <ReplierSignature signature={item.signature} topicid={item.topicId} userId={item.userId} masters={this.state.masters} postid={item.postId} />
        </div>
        </div>;
    }
    render() {
        return <div className="center" style={{ width: "100%" }}>
            {this.state.contents.map(this.generateContents.bind(this))}
        </div>
            ;
    }
}*/
/**
 * 文章内容
 */
var ContentState = /** @class */ (function () {
    function ContentState() {
    }
    return ContentState;
}());
exports.ContentState = ContentState;


/***/ }),
/* 428 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var AppState_1 = __webpack_require__(37);
var Utility = __webpack_require__(2);
var react_router_dom_1 = __webpack_require__(8);
//链接到的地址是  /list/boardid
var BoardList = /** @class */ (function (_super) {
    __extends(BoardList, _super);
    function BoardList(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            thisBoardState: [],
        };
        return _this;
    }
    BoardList.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var boardNameList, board, response, data, i, i;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        boardNameList = [];
                        board = [];
                        if (!!Utility.getStorage('board_2')) return [3 /*break*/, 3];
                        return [4 /*yield*/, Utility.cc98Fetch('/Board/Root')];
                    case 1:
                        response = _a.sent();
                        return [4 /*yield*/, response.json()];
                    case 2:
                        data = _a.sent();
                        for (i = 0; i < 20; i++) {
                            board[i] = new AppState_1.Board(data[i].name, data[i].todayCount, data[i].postCount, data[i].id, data[i].boardMastersString);
                            Utility.setStorage("board_" + data[i].id.toString(), board[i]);
                            boardNameList[i] = "board_" + data[i].id.toString();
                        }
                        Utility.setStorage('boardList', boardNameList);
                        return [3 /*break*/, 4];
                    case 3:
                        boardNameList = Utility.getStorage('boardList');
                        for (i = 0; i < 20; i++) {
                            board[i] = Utility.getStorage(boardNameList[i]);
                        }
                        _a.label = 4;
                    case 4:
                        this.setState({
                            thisBoardState: board,
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    BoardList.prototype.scroll = function (id) {
        document.getElementById(id).scrollIntoView();
    };
    BoardList.prototype.generateRootBoard = function (item) {
        return React.createElement(RootBoard, { board: item });
    };
    BoardList.prototype.generateBoardGuide = function (item) {
        var _this = this;
        var name = "" + item.name;
        return React.createElement("div", { onClick: function () { return _this.scroll(name); }, className: "row boardOption" }, item.name);
    };
    BoardList.prototype.render = function () {
        return React.createElement("div", { className: "row", style: { width: "1140px" } },
            React.createElement("div", { className: "boardList" }, this.state.thisBoardState.map(this.generateRootBoard)),
            React.createElement("div", { className: "boardGuide" }, this.state.thisBoardState.map(this.generateBoardGuide.bind(this))));
    };
    return BoardList;
}(React.Component));
exports.BoardList = BoardList;
var RootBoard = /** @class */ (function (_super) {
    __extends(RootBoard, _super);
    function RootBoard(props) {
        var _this = _super.call(this, props) || this;
        var boards = _this.props.board;
        if (boards.id === 2 || boards.id === 29 || boards.id === 35 || boards.id === 37) {
            _this.state = { isExpanded: false, };
        } //四个民工版默认状态为折叠
        else {
            _this.state = { isExpanded: true, };
        } //其他版默认状态为展开
        _this.toggleIsExpanded = _this.toggleIsExpanded.bind(_this); //JS的this是可变的，取决于调用方法的地方，bind方法用于此刻的this值
        return _this;
    }
    RootBoard.prototype.toggleIsExpanded = function () {
        this.setState(function (prevState) { return ({
            isExpanded: !prevState.isExpanded //setState() 可以接收一个函数，这个函数接受两个参数，第一个参数prevState表示上一个状态值，第二个参数props表示当前的props
        }); });
    };
    RootBoard.prototype.render = function () {
        var display = this.state.isExpanded ? "flex" : "none"; //根据 isExpanded 状态定义样式
        var buttonContent = this.state.isExpanded ? React.createElement("div", null, "\u6536\u8D77") : React.createElement("div", null, "\u5C55\u5F00"); //根据 isExpanded 状态定义按钮内容
        var boards = this.props.board;
        if (boards.id === 758) {
            return React.createElement("div", { className: "anArea", id: "似水流年" },
                React.createElement("div", { className: "column", style: { border: '2px solid #e9e9e9' } },
                    React.createElement("div", { className: "row", style: { marginTop: '15px', marginBottom: '15px', justifyContent: "space-around" } },
                        React.createElement("div", { className: "areaName" },
                            React.createElement(react_router_dom_1.Link, { to: "/list/758" }, boards.name)),
                        React.createElement("div", { className: "areaName" },
                            "\u4E3B\u7BA1\uFF1A",
                            boards.masters))));
        }
        else {
            return React.createElement("div", { className: "anArea", id: boards.name },
                React.createElement("div", { className: "column", style: { border: '2px solid #e9e9e9' } },
                    React.createElement("div", { className: "row", style: { marginTop: '15px', marginBottom: '15px', justifyContent: "space-between" } },
                        React.createElement("div", { className: "areaName" }, boards.name),
                        React.createElement("div", { className: "row", style: { marginRight: "1rem" } },
                            React.createElement("div", { className: "areaName" },
                                "\u4E3B\u7BA1\uFF1A",
                                boards.masters),
                            React.createElement("div", { onClick: this.toggleIsExpanded, style: { marginLeft: "1rem", cursor: "pointer" } },
                                " ",
                                buttonContent))),
                    React.createElement("div", { className: "hiddenContent", style: { display: display } },
                        " ",
                        React.createElement(ChildBoard, { boardid: boards.id }))));
        }
    };
    return RootBoard;
}(React.Component));
exports.RootBoard = RootBoard;
var ChildBoard = /** @class */ (function (_super) {
    __extends(ChildBoard, _super);
    function ChildBoard(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            thisBoardState: []
        };
        return _this;
    }
    ChildBoard.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var token, headers, boards, response, data, i;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        token = Utility.getLocalStorage("accessToken");
                        headers = new Headers();
                        headers.append("Authorization", token);
                        boards = [];
                        return [4 /*yield*/, Utility.cc98Fetch("/Board/" + this.props.boardid + "/Sub", { headers: headers })];
                    case 1:
                        response = _a.sent();
                        return [4 /*yield*/, response.json()];
                    case 2:
                        data = _a.sent();
                        for (i = 0; i < data.length; i++) {
                            boards[i] = new AppState_1.Board(data[i].name, data[i].todayCount, data[i].postCount, data[i].id, data[i].masters);
                        }
                        this.setState({
                            thisBoardState: boards,
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    ChildBoard.prototype.convertChildBoard = function (item) {
        var url = "url(/images/_" + item.name + ".png)";
        return React.createElement("div", { className: "boardContent" },
            React.createElement(react_router_dom_1.Link, { to: "/list/" + item.id },
                React.createElement("div", { className: "greenBackdrop", style: { backgroundImage: url } })),
            React.createElement("div", { className: "column boardBlock" },
                React.createElement(react_router_dom_1.Link, { to: "/list/" + item.id },
                    React.createElement("div", { className: "boardName2", style: { fontSize: "1.2rem", fontWeight: "bold" } }, item.name)),
                React.createElement("div", { className: "boardInfo" },
                    React.createElement("div", { className: "row" },
                        "\u4ECA\u65E5  ",
                        item.todayPostCount,
                        " "),
                    React.createElement("div", { className: "row" },
                        "\u603B\u6570  ",
                        item.totalPostCount))));
    };
    ChildBoard.prototype.convertNoImgChildBoard = function (item) {
        return React.createElement("div", { className: "noImgBoardContent" },
            React.createElement(react_router_dom_1.Link, { to: "/list/" + item.id },
                React.createElement("div", { className: "boardName2" }, item.name)));
    };
    ChildBoard.prototype.render = function () {
        if (this.props.boardid === 2 || this.props.boardid === 29 || this.props.boardid === 35 || this.props.boardid === 37) {
            return React.createElement("div", { className: "areaContent" }, this.state.thisBoardState.map(this.convertNoImgChildBoard));
        }
        else {
            return React.createElement("div", { className: "areaContent" }, this.state.thisBoardState.map(this.convertChildBoard));
        }
    };
    return ChildBoard;
}(React.Component));
exports.ChildBoard = ChildBoard;


/***/ }),
/* 429 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var react_redux_1 = __webpack_require__(26);
var UserCenterNavigation_1 = __webpack_require__(430);
var UserCenterRouter_1 = __webpack_require__(431);
var Status_1 = __webpack_require__(62);
/**
 * 用户中心页面
 */
var UserCenterBeforeConnect = /** @class */ (function (_super) {
    __extends(UserCenterBeforeConnect, _super);
    function UserCenterBeforeConnect() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    UserCenterBeforeConnect.prototype.render = function () {
        if (!this.props.isLogOn) {
            return React.createElement(Status_1.LogOut, null);
        }
        return (React.createElement("div", { className: "user-center" },
            React.createElement("div", { className: "user-center-content" },
                React.createElement("div", { className: "user-center-head" },
                    React.createElement("p", null, "\u4E2A\u4EBA\u4E2D\u5FC3")),
                React.createElement("div", { className: "user-center-body" },
                    React.createElement(UserCenterNavigation_1.UserCenterNavigation, null),
                    React.createElement(UserCenterRouter_1.UserCenterRouter, null)))));
    };
    return UserCenterBeforeConnect;
}(React.Component));
exports.UserCenterBeforeConnect = UserCenterBeforeConnect;
/**
 * 将store中的isLogOn属性映射到UserCenterBeforeConnect的props的isLogOn
 * @param state
 */
function mapState(state) {
    return {
        isLogOn: state.userInfo.isLogOn
    };
}
/**
 * 连接UserCenterBeforeConnect与store，默认导出UserCenter替换掉原来的导出
 */
exports.UserCenter = react_redux_1.connect(mapState, null)(UserCenterBeforeConnect);


/***/ }),
/* 430 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var react_router_dom_1 = __webpack_require__(8);
var $ = __webpack_require__(35);
/**
 * 用户中心侧边栏导航组件
 */
var UserCenterNavigation = /** @class */ (function (_super) {
    __extends(UserCenterNavigation, _super);
    function UserCenterNavigation(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            isScroll: false,
            buttonClassName: '',
            navigationClassName: 'user-center-navigation'
        };
        _this.handleScroll = _this.handleScroll.bind(_this);
        return _this;
    }
    UserCenterNavigation.prototype.handleScroll = function (e) {
        if (window.pageYOffset > 234 && !this.state.isScroll) {
            this.setState({
                isScroll: true,
                buttonClassName: 'btn-show',
                navigationClassName: 'user-center-navigation'
            });
        }
        if (window.pageYOffset < 234 && this.state.isScroll) {
            this.setState(function (prevState) {
                if (prevState.buttonClassName === '') {
                    return {
                        isScroll: false
                    };
                }
                else {
                    return {
                        isScroll: false,
                        buttonClassName: 'btn-disappare',
                        navigationClassName: 'user-center-navigation'
                    };
                }
            });
        }
    };
    UserCenterNavigation.prototype.componentDidMount = function () {
        document.addEventListener('scroll', this.handleScroll);
    };
    UserCenterNavigation.prototype.componentWillUnmount = function () {
        document.removeEventListener('scroll', this.handleScroll);
    };
    UserCenterNavigation.prototype.scrollToTop = function () {
        $('body,html').animate({ scrollTop: 0 }, 500);
    };
    UserCenterNavigation.prototype.render = function () {
        return (React.createElement("div", { className: this.state.navigationClassName, id: "userCenterNavigation" },
            React.createElement("ul", null,
                React.createElement("li", null,
                    React.createElement(react_router_dom_1.NavLink, { to: "/usercenter", exact: true, activeClassName: "user-center-navigation-active", className: "fa-home" },
                        React.createElement("p", null, "\u4E3B\u9875"))),
                React.createElement("hr", null),
                React.createElement("li", null,
                    React.createElement(react_router_dom_1.NavLink, { to: "/usercenter/config", activeClassName: "user-center-navigation-active", className: "fa-cog" },
                        React.createElement("p", null, "\u4FEE\u6539\u4E2A\u4EBA\u8D44\u6599"))),
                React.createElement("hr", null),
                React.createElement("li", null,
                    React.createElement(react_router_dom_1.NavLink, { to: "/usercenter/myposts", activeClassName: "user-center-navigation-active", className: "fa-pencil-square-o" },
                        React.createElement("p", null, "\u6211\u7684\u4E3B\u9898"))),
                React.createElement("hr", null),
                React.createElement("li", null,
                    React.createElement(react_router_dom_1.NavLink, { to: "/usercenter/myfavorites", activeClassName: "user-center-navigation-active", className: "fa-star" },
                        React.createElement("p", null, "\u6211\u7684\u6536\u85CF"))),
                React.createElement("hr", null),
                React.createElement("li", null,
                    React.createElement(react_router_dom_1.NavLink, { to: "/usercenter/mycustomboards", activeClassName: "user-center-navigation-active", className: "fa-rss" },
                        React.createElement("p", null, "\u5173\u6CE8\u7248\u9762"))),
                React.createElement("hr", null),
                React.createElement("li", null,
                    React.createElement(react_router_dom_1.NavLink, { to: "/usercenter/myfollowings", activeClassName: "user-center-navigation-active", className: "fa-heart" },
                        React.createElement("p", null, "\u5173\u6CE8\u7528\u6237"))),
                React.createElement("hr", null),
                React.createElement("li", null,
                    React.createElement(react_router_dom_1.NavLink, { to: "/usercenter/myfans", activeClassName: "user-center-navigation-active", className: "fa-users" },
                        React.createElement("p", null, "\u6211\u7684\u7C89\u4E1D")))),
            React.createElement("button", { type: "button", id: "scrollToTop", className: this.state.buttonClassName, onClick: this.scrollToTop }, "\u56DE\u5230\u9876\u90E8")));
    };
    return UserCenterNavigation;
}(React.Component));
exports.UserCenterNavigation = UserCenterNavigation;


/***/ }),
/* 431 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var react_router_dom_1 = __webpack_require__(8);
var UserCenterExact_1 = __webpack_require__(432);
var UserCenterMyFollowings_1 = __webpack_require__(436);
var UserCenterMyFans_1 = __webpack_require__(437);
var UserCenterMyPostsExact_1 = __webpack_require__(438);
var UserCenterConfig_1 = __webpack_require__(439);
var UserCenterMyFavoritesBoards_1 = __webpack_require__(444);
var UserCenterMyFavoritesPosts_1 = __webpack_require__(446);
/**
 * 用户中心主体
 */
var UserCenterRouter = /** @class */ (function (_super) {
    __extends(UserCenterRouter, _super);
    function UserCenterRouter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    UserCenterRouter.prototype.render = function () {
        return (React.createElement("div", { className: "user-center-router" },
            React.createElement(react_router_dom_1.Route, { exact: true, path: "/usercenter/", component: UserCenterExact_1.default }),
            React.createElement(react_router_dom_1.Route, { path: "/usercenter/myfollowings/:page?", component: UserCenterMyFollowings_1.UserCenterMyFollowings }),
            React.createElement(react_router_dom_1.Route, { path: "/usercenter/myfans/:page?", component: UserCenterMyFans_1.UserCenterMyFans }),
            React.createElement(react_router_dom_1.Route, { path: "/usercenter/myposts/:page?", component: UserCenterMyPostsExact_1.UserCenterMyPostsExact }),
            React.createElement(react_router_dom_1.Route, { path: "/usercenter/myfavorites/:page?", component: UserCenterMyFavoritesPosts_1.UserCenterMyFavoritesPosts }),
            React.createElement(react_router_dom_1.Route, { path: "/usercenter/config", component: UserCenterConfig_1.UserCenterConfig }),
            React.createElement(react_router_dom_1.Route, { path: "/usercenter/mycustomboards", component: UserCenterMyFavoritesBoards_1.UserCenterMyFavoritesBoards })));
    };
    return UserCenterRouter;
}(React.Component));
exports.UserCenterRouter = UserCenterRouter;


/***/ }),
/* 432 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var UserCenterExactProfile_1 = __webpack_require__(433);
var UserCenterExactActivities_1 = __webpack_require__(434);
var UserCenterExactAvatar_1 = __webpack_require__(168);
var Utility = __webpack_require__(2);
var Actions_1 = __webpack_require__(36);
var react_redux_1 = __webpack_require__(26);
/**
 * 用户中心主页
 */
var UserCenterExact = /** @class */ (function (_super) {
    __extends(UserCenterExact, _super);
    function UserCenterExact() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    UserCenterExact.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var token, headers1, response1, userInfo, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 4, , 5]);
                        return [4 /*yield*/, Utility.getToken()];
                    case 1:
                        token = _a.sent();
                        headers1 = new Headers();
                        headers1.append("Authorization", token);
                        return [4 /*yield*/, Utility.cc98Fetch("/user/" + this.props.userInfo.id, {
                                headers: headers1
                            })];
                    case 2:
                        response1 = _a.sent();
                        return [4 /*yield*/, response1.json()];
                    case 3:
                        userInfo = _a.sent();
                        Utility.setLocalStorage("userInfo", userInfo);
                        this.props.changeUserInfo(userInfo);
                        return [3 /*break*/, 5];
                    case 4:
                        e_1 = _a.sent();
                        console.log('用户中心错误');
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    UserCenterExact.prototype.render = function () {
        return (React.createElement("div", { className: "user-center-exact" },
            React.createElement(UserCenterExactAvatar_1.UserCenterExactAvatar, { userAvatarImgURL: this.props.userInfo.portraitUrl }),
            React.createElement(UserCenterExactProfile_1.UserCenterExactProfile, { userInfo: this.props.userInfo }),
            React.createElement(UserCenterExactActivities_1.UserCenterExactActivities, null)));
    };
    return UserCenterExact;
}(React.Component));
function mapState(state) {
    return {
        userInfo: state.userInfo.currentUserInfo
    };
}
function mapDispatch(dispatch) {
    return {
        changeUserInfo: function (newInfo) {
            dispatch(Actions_1.changeUserInfo(newInfo));
        }
    };
}
exports.default = react_redux_1.connect(mapState, mapDispatch)(UserCenterExact);


/***/ }),
/* 433 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var react_router_dom_1 = __webpack_require__(8);
var UbbContainer_1 = __webpack_require__(15);
/**
 * 用户中心主页个人资料组件
 */
var UserCenterExactProfile = /** @class */ (function (_super) {
    __extends(UserCenterExactProfile, _super);
    function UserCenterExactProfile() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    UserCenterExactProfile.prototype.getPrivilegeColor = function () {
        switch (this.props.userInfo.privilege) {
            case '注册用户': return 'grey';
            case '超级版主': return 'pink';
            case '全站贵宾': return 'blue';
            case '管理员': return 'red';
        }
    };
    UserCenterExactProfile.prototype.render = function () {
        var isBirthDay = false;
        if (!!this.props.userInfo.birthday) {
            var match = this.props.userInfo.birthday.match(/\d+-(\d+)-(\d+)/);
            var now = new Date();
            if (Number.parseInt(match[1]) === (now.getMonth() + 1) && Number.parseInt(match[2]) === now.getDate()) {
                isBirthDay = true;
            }
        }
        return (React.createElement("div", { className: "user-profile" },
            React.createElement("div", { id: "userId" },
                React.createElement("p", null,
                    this.props.userInfo.name,
                    React.createElement("span", { style: { fontSize: '12px', color: this.getPrivilegeColor(), marginLeft: '2rem' } }, this.props.userInfo.privilege)),
                React.createElement(react_router_dom_1.Link, { to: "/message/message" },
                    React.createElement("button", { type: "button" }, "\u79C1\u4FE1"))),
            React.createElement("div", { id: "userIntroducion" }, this.props.userInfo.introduction),
            React.createElement("div", { id: "userGenderAndBirthday" },
                React.createElement("p", null,
                    React.createElement("span", { className: "user-profile-info" }, "\u6027\u522B"),
                    (this.props.userInfo.gender === 1) ? '男' : '女',
                    " "),
                React.createElement("p", null,
                    React.createElement("span", { className: "user-profile-info" }, "\u53D1\u5E16\u6570"),
                    this.props.userInfo.postCount),
                React.createElement("p", null,
                    React.createElement("span", { className: "user-profile-info" }, "\u5A01\u671B"),
                    this.props.userInfo.prestige),
                React.createElement("p", null,
                    React.createElement("span", { className: "user-profile-info" }, "\u98CE\u8BC4"),
                    this.props.userInfo.popularity),
                React.createElement("p", null,
                    React.createElement("span", { className: "user-profile-info" }, "\u6CE8\u518C\u65F6\u95F4"),
                    this.props.userInfo.registerTime.replace('T', ' ')),
                React.createElement("p", null,
                    React.createElement("span", { className: "user-profile-info" }, "\u6700\u540E\u767B\u5F55"),
                    this.props.userInfo.lastLogOnTime.replace('T', ' ')),
                this.props.userInfo.birthday === null ? null : React.createElement("p", null,
                    React.createElement("span", { className: "user-profile-info" }, "\u751F\u65E5"),
                    this.props.userInfo.birthday.slice(0, this.props.userInfo.birthday.indexOf('T')).replace('9999-', ''),
                    isBirthDay ? React.createElement("span", { style: { fontFamily: 'FontAwesome', marginLeft: '1rem' }, className: "fa-birthday-cake", title: "生日快乐~" }) : null),
                this.props.userInfo.displayTitle ? React.createElement("p", null,
                    React.createElement("span", { className: "user-profile-info" }, "\u7528\u6237\u7EC4"),
                    this.props.userInfo.displayTitle) : null,
                this.props.userInfo.emailAddress ? React.createElement("p", null,
                    React.createElement("span", { className: "user-profile-info" }, "\u90AE\u7BB1"),
                    this.props.userInfo.emailAddress) : null,
                this.props.userInfo.qq ? React.createElement("p", null,
                    React.createElement("span", { className: "user-profile-info" }, "QQ"),
                    this.props.userInfo.qq) : null),
            this.props.userInfo.signatureCode ?
                React.createElement("div", { className: "user-description" },
                    React.createElement("p", null, "\u4E2A\u6027\u7B7E\u540D"),
                    React.createElement(UbbContainer_1.UbbContainer, { code: this.props.userInfo.signatureCode })) : null));
    };
    return UserCenterExactProfile;
}(React.Component));
exports.UserCenterExactProfile = UserCenterExactProfile;


/***/ }),
/* 434 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var UserCenterExactActivitiesPosts_1 = __webpack_require__(435);
/**
 * 用户中心主页近期动态组件
 */
var UserCenterExactActivities = /** @class */ (function (_super) {
    __extends(UserCenterExactActivities, _super);
    function UserCenterExactActivities() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    UserCenterExactActivities.prototype.render = function () {
        return (React.createElement("div", { className: "user-activities" },
            React.createElement("p", null, "\u53D1\u8868\u7684\u4E3B\u9898"),
            React.createElement(UserCenterExactActivitiesPosts_1.UserCenterExactActivitiesPosts, null)));
    };
    return UserCenterExactActivities;
}(React.Component));
exports.UserCenterExactActivities = UserCenterExactActivities;


/***/ }),
/* 435 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var UserCenterExactActivitiesPost_1 = __webpack_require__(86);
var AppState_1 = __webpack_require__(37);
var Utility = __webpack_require__(2);
//用户中心主页帖子动态组件
var UserCenterExactActivitiesPosts = /** @class */ (function (_super) {
    __extends(UserCenterExactActivitiesPosts, _super);
    function UserCenterExactActivitiesPosts(props) {
        var _this = _super.call(this, props) || this;
        //临时填充数据
        _this.state = {
            userRecentPosts: [],
            isLoading: false
        };
        _this.scrollHandler = _this.scrollHandler.bind(_this);
        return _this;
    }
    UserCenterExactActivitiesPosts.prototype.scrollHandler = function (e) {
        return __awaiter(this, void 0, void 0, function () {
            var pageYLeft, url, token, headers, res, data, posts, i, post, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        pageYLeft = document.body.scrollHeight - window.pageYOffset;
                        if (!(pageYLeft < 1500 && this.state.isLoading === false)) return [3 /*break*/, 11];
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 10, , 11]);
                        this.setState({ isLoading: true });
                        url = "/me/recent-topic?from=" + this.state.userRecentPosts.length + "&size=11";
                        return [4 /*yield*/, Utility.getToken()];
                    case 2:
                        token = _a.sent();
                        headers = new Headers();
                        headers.append('Authorization', token);
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                headers: headers
                            })];
                    case 3:
                        res = _a.sent();
                        if (!(res.status === 200)) return [3 /*break*/, 8];
                        return [4 /*yield*/, res.json()];
                    case 4:
                        data = _a.sent();
                        if (data.length < 11) {
                            window.removeEventListener('scroll', this.scrollHandler);
                        }
                        posts = this.state.userRecentPosts;
                        i = data.length === 11 ? 10 : data.length;
                        _a.label = 5;
                    case 5:
                        if (!i--) return [3 /*break*/, 7];
                        return [4 /*yield*/, this.item2post(data[i])];
                    case 6:
                        post = _a.sent();
                        posts.push(post);
                        return [3 /*break*/, 5];
                    case 7:
                        this.setState({
                            userRecentPosts: posts,
                            isLoading: false
                        });
                        return [3 /*break*/, 9];
                    case 8: throw {};
                    case 9: return [3 /*break*/, 11];
                    case 10:
                        e_1 = _a.sent();
                        this.setState({
                            isLoading: false
                        });
                        console.log('用户中心滚动加载失败');
                        return [3 /*break*/, 11];
                    case 11: return [2 /*return*/];
                }
            });
        });
    };
    UserCenterExactActivitiesPosts.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var url, token, headers, res, data, posts, i, post, e_2;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 8, , 9]);
                        url = "/me/recent-topic?from=0&size=10";
                        token = Utility.getLocalStorage("accessToken");
                        headers = new Headers();
                        headers.append('Authorization', token);
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                headers: headers
                            })];
                    case 1:
                        res = _a.sent();
                        if (!(res.status === 200)) return [3 /*break*/, 6];
                        return [4 /*yield*/, res.json()];
                    case 2:
                        data = _a.sent();
                        posts = [], i = data.length;
                        _a.label = 3;
                    case 3:
                        if (!i--) return [3 /*break*/, 5];
                        return [4 /*yield*/, this.item2post(data[i])];
                    case 4:
                        post = _a.sent();
                        posts.unshift(post);
                        return [3 /*break*/, 3];
                    case 5:
                        this.setState({
                            userRecentPosts: posts
                        });
                        if (data.length === 10) {
                            window.addEventListener('scroll', this.scrollHandler);
                        }
                        return [3 /*break*/, 7];
                    case 6: throw {};
                    case 7: return [3 /*break*/, 9];
                    case 8:
                        e_2 = _a.sent();
                        console.log('用户中心帖子加载失败');
                        return [3 /*break*/, 9];
                    case 9: return [2 /*return*/];
                }
            });
        });
    };
    UserCenterExactActivitiesPosts.prototype.componentWillUnmount = function () {
        window.removeEventListener('scroll', this.scrollHandler);
    };
    UserCenterExactActivitiesPosts.prototype.item2post = function (item) {
        return __awaiter(this, void 0, void 0, function () {
            var userRecentPost, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        userRecentPost = new AppState_1.UserRecentPost();
                        userRecentPost.approval = item.likeCount;
                        _a = userRecentPost;
                        return [4 /*yield*/, Utility.getBoardName(item.boardId)];
                    case 1:
                        _a.board = _b.sent();
                        userRecentPost.date = item.time.replace('T', ' ').slice(0, 19);
                        userRecentPost.disapproval = item.dislikeCount;
                        userRecentPost.content = item.title;
                        userRecentPost.id = item.id;
                        userRecentPost.boardId = item.boardId;
                        userRecentPost.name = item.userName;
                        userRecentPost.isAnonymous = item.isAnonymous;
                        return [2 /*return*/, userRecentPost];
                }
            });
        });
    };
    UserCenterExactActivitiesPosts.prototype.render = function () {
        if (this.state.userRecentPosts.length === 0) {
            var style = {
                marginLeft: '2rem'
            };
            return (React.createElement("div", { className: "user-posts", style: style }, "\u6CA1\u6709\u4E3B\u9898"));
        }
        //state转换为JSX
        var userRecentPosts = this.state.userRecentPosts.map(function (item) { return (React.createElement(UserCenterExactActivitiesPost_1.UserCenterExactActivitiesPost, { userRecentPost: item })); });
        //添加分隔线
        for (var i = 1; i < userRecentPosts.length; i += 2) {
            userRecentPosts.splice(i, 0, React.createElement("hr", null));
        }
        return (React.createElement("div", { className: "user-posts" }, userRecentPosts));
    };
    return UserCenterExactActivitiesPosts;
}(React.Component));
exports.UserCenterExactActivitiesPosts = UserCenterExactActivitiesPosts;


/***/ }),
/* 436 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var AppState_1 = __webpack_require__(37);
var UserCenterMyFollowingsUser_1 = __webpack_require__(169);
var UserCenterPageCount_1 = __webpack_require__(87);
var Utility = __webpack_require__(2);
//用户中心我的关注组件
var UserCenterMyFollowings = /** @class */ (function (_super) {
    __extends(UserCenterMyFollowings, _super);
    function UserCenterMyFollowings(props, context) {
        var _this = _super.call(this, props, context) || this;
        _this.getInfo = function (page) {
            if (page === void 0) { page = 1; }
            return __awaiter(_this, void 0, void 0, function () {
                var token, url_1, headers_1, res, data, requests, fanData, fans, e_1;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            _a.trys.push([0, 6, , 7]);
                            window.scroll(0, 0);
                            this.setState({ isLoading: true });
                            return [4 /*yield*/, Utility.getToken()];
                        case 1:
                            token = _a.sent();
                            url_1 = "/me/followee?from=" + (page - 1) * 10 + "&size=10";
                            headers_1 = new Headers();
                            headers_1.append('Authorization', token);
                            return [4 /*yield*/, Utility.cc98Fetch(url_1, {
                                    headers: headers_1
                                })];
                        case 2:
                            res = _a.sent();
                            if (res.status !== 200) {
                                throw {};
                            }
                            return [4 /*yield*/, res.json()];
                        case 3:
                            data = _a.sent();
                            //没有粉丝
                            if (!data || !data.length) {
                                this.setState({
                                    info: '没有粉丝',
                                    isLoading: false
                                });
                                return [2 /*return*/, false];
                            }
                            return [4 /*yield*/, Promise.all(data.map(function (item) {
                                    url_1 = "/user/" + item;
                                    return Utility.cc98Fetch(url_1, { headers: headers_1 });
                                }))];
                        case 4:
                            requests = _a.sent();
                            return [4 /*yield*/, Promise.all(requests.map(function (item) { return (item.json()); }))];
                        case 5:
                            fanData = _a.sent();
                            fans = fanData.map(function (item) {
                                var userFanInfo = new AppState_1.UserFanInfo();
                                userFanInfo.name = item.name;
                                userFanInfo.avatarImgURL = item.portraitUrl;
                                userFanInfo.posts = item.postCount;
                                userFanInfo.id = item.id;
                                userFanInfo.fans = item.fanCount;
                                userFanInfo.isFollowing = item.isFollowing;
                                return userFanInfo;
                            });
                            this.setState({
                                userFollowings: fans,
                                isLoading: false
                            });
                            return [3 /*break*/, 7];
                        case 6:
                            e_1 = _a.sent();
                            return [3 /*break*/, 7];
                        case 7: return [2 /*return*/];
                    }
                });
            });
        };
        _this.state = {
            userFollowings: [],
            totalPage: 2,
            info: '加载中',
            currentPage: _this.props.match.params.page,
            isLoading: true
        };
        return _this;
    }
    UserCenterMyFollowings.prototype.componentDidUpdate = function () {
        if (this.state.currentPage !== this.props.match.params.page) {
            this.setState({ currentPage: this.props.match.params.page });
            this.getInfo(this.props.match.params.page);
        }
    };
    UserCenterMyFollowings.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var userid, url, res, data, e_2;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.getInfo(this.props.match.params.page);
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 4, , 5]);
                        userid = Utility.getLocalStorage('userInfo').id;
                        url = "/user/followee/count?userid=" + userid;
                        return [4 /*yield*/, Utility.cc98Fetch(url)];
                    case 2:
                        res = _a.sent();
                        if (res.status !== 200) {
                            throw new Error();
                        }
                        return [4 /*yield*/, res.json()];
                    case 3:
                        data = _a.sent();
                        this.setState({
                            totalPage: data % 10 === 0 ? data / 10 : Math.floor((data / 10)) + 1
                        });
                        return [3 /*break*/, 5];
                    case 4:
                        e_2 = _a.sent();
                        console.log('我的关注加载失败');
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    UserCenterMyFollowings.prototype.render = function () {
        if (this.state.isLoading) {
            return React.createElement("div", { className: "user-center-loading" },
                React.createElement("p", { className: "fa fa-spinner fa-pulse fa-2x fa-fw" }));
        }
        if (this.state.userFollowings.length === 0) {
            return (React.createElement("div", { className: "user-center-myfollowings", style: { textAlign: 'center' } }, this.state.info));
        }
        //state转换为JSX
        var userFollowings = this.state.userFollowings.map(function (item) { return (React.createElement(UserCenterMyFollowingsUser_1.UserCenterMyFollowingsUser, { userFanInfo: item })); });
        //添加分隔线
        for (var i = 1; i < userFollowings.length; i += 2) {
            userFollowings.splice(i, 0, React.createElement("hr", null));
        }
        var page = this.props.match.params.page || 1;
        return (React.createElement("div", { className: "user-center-myfollowings" },
            React.createElement("div", { className: "user-center-myfollowings-exact" }, userFollowings),
            React.createElement(UserCenterPageCount_1.UserCenterPageCount, { currentPage: page, totalPage: this.state.totalPage, href: "/usercenter/myfollowings/", hasTotal: true })));
    };
    return UserCenterMyFollowings;
}(React.Component));
exports.UserCenterMyFollowings = UserCenterMyFollowings;


/***/ }),
/* 437 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var AppState_1 = __webpack_require__(37);
var UserCenterMyFollowingsUser_1 = __webpack_require__(169);
var UserCenterPageCount_1 = __webpack_require__(87);
var Utility = __webpack_require__(2);
//用户中心我的粉丝组件
var UserCenterMyFans = /** @class */ (function (_super) {
    __extends(UserCenterMyFans, _super);
    function UserCenterMyFans(props, contest) {
        var _this = _super.call(this, props, contest) || this;
        _this.getInfo = function (page) {
            if (page === void 0) { page = 1; }
            return __awaiter(_this, void 0, void 0, function () {
                var token, url_1, headers_1, res, data, requests, fanData, fans, e_1;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            _a.trys.push([0, 6, , 7]);
                            window.scroll(0, 0);
                            this.setState({ isLoading: true });
                            return [4 /*yield*/, Utility.getToken()];
                        case 1:
                            token = _a.sent();
                            url_1 = "/me/follower?from=" + (page - 1) * 10 + "&size=10";
                            headers_1 = new Headers();
                            headers_1.append('Authorization', token);
                            return [4 /*yield*/, Utility.cc98Fetch(url_1, {
                                    headers: headers_1
                                })];
                        case 2:
                            res = _a.sent();
                            return [4 /*yield*/, res.json()];
                        case 3:
                            data = _a.sent();
                            //没有粉丝
                            if (!data || !data.length) {
                                this.setState({
                                    info: '没有关注',
                                    isLoading: false
                                });
                                return [2 /*return*/, false];
                            }
                            return [4 /*yield*/, Promise.all(data.map(function (item) {
                                    url_1 = "/user/" + item;
                                    return Utility.cc98Fetch(url_1, { headers: headers_1 });
                                }))];
                        case 4:
                            requests = _a.sent();
                            return [4 /*yield*/, Promise.all(requests.map(function (item) { return item.json(); }))];
                        case 5:
                            fanData = _a.sent();
                            fans = fanData.map(function (item) {
                                var userFanInfo = new AppState_1.UserFanInfo();
                                userFanInfo.name = item.name;
                                userFanInfo.avatarImgURL = item.portraitUrl;
                                userFanInfo.posts = item.postCount;
                                userFanInfo.id = item.id;
                                userFanInfo.fans = item.fanCount;
                                userFanInfo.isFollowing = item.isFollowing;
                                return userFanInfo;
                            });
                            this.setState({
                                userFans: fans,
                                isLoading: false
                            });
                            return [3 /*break*/, 7];
                        case 6:
                            e_1 = _a.sent();
                            console.log('我的粉丝加载失败');
                            return [3 /*break*/, 7];
                        case 7: return [2 /*return*/];
                    }
                });
            });
        };
        _this.state = {
            userFans: [],
            totalPage: 2,
            info: '加载中',
            currentPage: _this.props.match.params.page,
            isLoading: true
        };
        return _this;
    }
    UserCenterMyFans.prototype.componentDidUpdate = function () {
        if (this.state.currentPage !== this.props.match.params.page) {
            this.setState({ currentPage: this.props.match.params.page });
            this.getInfo(this.props.match.params.page);
        }
    };
    UserCenterMyFans.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var userid, url, res, fanCounts, e_2;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.getInfo(this.props.match.params.page);
                        userid = Utility.getLocalStorage('userInfo').id;
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 4, , 5]);
                        url = "/user/follower/count?userid=" + userid;
                        return [4 /*yield*/, Utility.cc98Fetch(url)];
                    case 2:
                        res = _a.sent();
                        return [4 /*yield*/, res.json()];
                    case 3:
                        fanCounts = _a.sent();
                        this.setState({
                            totalPage: fanCounts % 10 === 0 ? fanCounts / 10 : Math.floor((fanCounts / 10)) + 1
                        });
                        return [3 /*break*/, 5];
                    case 4:
                        e_2 = _a.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    UserCenterMyFans.prototype.render = function () {
        if (this.state.isLoading) {
            return React.createElement("div", { className: "user-center-loading" },
                React.createElement("p", { className: "fa fa-spinner fa-pulse fa-2x fa-fw" }));
        }
        if (this.state.userFans.length === 0) {
            return (React.createElement("div", { className: "user-center-myfans", style: { textAlign: 'center' } }, this.state.info));
        }
        //state转换为JSX
        var userFans = this.state.userFans.map(function (item) { return (React.createElement(UserCenterMyFollowingsUser_1.UserCenterMyFollowingsUser, { userFanInfo: item })); });
        //添加分隔线
        for (var i = 1; i < userFans.length; i += 2) {
            userFans.splice(i, 0, React.createElement("hr", null));
        }
        return (React.createElement("div", { className: "user-center-myfans" },
            React.createElement("div", { className: "user-center-myfans-exact" }, userFans),
            React.createElement(UserCenterPageCount_1.UserCenterPageCount, { currentPage: parseInt(this.props.match.params.page || 1), totalPage: this.state.totalPage, href: "/usercenter/myfans/", hasTotal: true })));
    };
    return UserCenterMyFans;
}(React.Component));
exports.UserCenterMyFans = UserCenterMyFans;


/***/ }),
/* 438 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var UserCenterExactActivitiesPost_1 = __webpack_require__(86);
var AppState_1 = __webpack_require__(37);
var UserCenterPageCount_1 = __webpack_require__(87);
/**
 * 用户中心我的主题组件
 */
var UserCenterMyPostsExact = /** @class */ (function (_super) {
    __extends(UserCenterMyPostsExact, _super);
    function UserCenterMyPostsExact(props, contest) {
        var _this = _super.call(this, props, contest) || this;
        _this.getInfo = function (page) {
            if (page === void 0) { page = 1; }
            return __awaiter(_this, void 0, void 0, function () {
                var _this = this;
                var url, token, headers, res, data, i, totalPage, userRecentPosts, e_1;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            _a.trys.push([0, 5, , 6]);
                            window.scroll(0, 0);
                            this.setState({ isLoading: true });
                            url = "/me/recent-topic?from=" + (page - 1) * 10 + "&size=11";
                            return [4 /*yield*/, Utility.getToken()];
                        case 1:
                            token = _a.sent();
                            headers = new Headers();
                            headers.append('Authorization', token);
                            return [4 /*yield*/, Utility.cc98Fetch(url, {
                                    headers: headers
                                })];
                        case 2:
                            res = _a.sent();
                            if (res.status !== 200) {
                                throw {};
                            }
                            return [4 /*yield*/, res.json()];
                        case 3:
                            data = _a.sent(), i = data.length, totalPage = void 0;
                            if (i <= 10) {
                                totalPage = Number.parseInt(this.props.match.params.page);
                                this.setState({ hasTotal: true });
                            }
                            else {
                                totalPage = Math.max(Number.parseInt(this.props.match.params.page || 1) + 1, this.state.totalPage);
                                data.pop();
                                i = 10;
                            }
                            return [4 /*yield*/, Promise.all(data.map(function (item) { return (_this.item2post(item)); }))];
                        case 4:
                            userRecentPosts = _a.sent();
                            this.setState({
                                userRecentPosts: userRecentPosts,
                                totalPage: totalPage,
                                isLoading: false
                            });
                            return [3 /*break*/, 6];
                        case 5:
                            e_1 = _a.sent();
                            console.log('我的主题加载失败');
                            return [3 /*break*/, 6];
                        case 6: return [2 /*return*/];
                    }
                });
            });
        };
        var postCount = Utility.getLocalStorage('userInfo').postCount;
        _this.state = {
            userRecentPosts: [],
            totalPage: (_this.props.match.params.page || 1) + 1,
            currentPage: _this.props.match.params.page,
            hasTotal: false,
            isLoading: true
        };
        return _this;
    }
    UserCenterMyPostsExact.prototype.componentDidUpdate = function () {
        if (this.state.currentPage !== this.props.match.params.page) {
            this.setState({ currentPage: this.props.match.params.page });
            this.getInfo(this.props.match.params.page);
        }
    };
    UserCenterMyPostsExact.prototype.componentDidMount = function () {
        this.getInfo(this.props.match.params.page);
    };
    UserCenterMyPostsExact.prototype.item2post = function (item) {
        return __awaiter(this, void 0, void 0, function () {
            var userRecentPost, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        userRecentPost = new AppState_1.UserRecentPost();
                        userRecentPost.approval = item.likeCount;
                        _a = userRecentPost;
                        return [4 /*yield*/, Utility.getBoardName(item.boardId)];
                    case 1:
                        _a.board = _b.sent();
                        userRecentPost.date = item.time.replace('T', ' ').slice(0, 19);
                        userRecentPost.disapproval = item.dislikeCount;
                        userRecentPost.content = item.title;
                        userRecentPost.id = item.id;
                        userRecentPost.boardId = item.boardId;
                        userRecentPost.name = item.userName;
                        userRecentPost.isAnonymous = item.isAnonymous;
                        return [2 /*return*/, userRecentPost];
                }
            });
        });
    };
    UserCenterMyPostsExact.prototype.render = function () {
        if (this.state.isLoading) {
            return React.createElement("div", { className: "user-center-loading" },
                React.createElement("p", { className: "fa fa-spinner fa-pulse fa-2x fa-fw" }));
        }
        if (this.state.userRecentPosts.length === 0) {
            return (React.createElement("div", { className: "user-posts", style: { textAlign: 'center' } }, "\u6CA1\u6709\u4E3B\u9898"));
        }
        //state转换为JSX
        var userRecentPosts = this.state.userRecentPosts.map(function (item) { return (React.createElement(UserCenterExactActivitiesPost_1.UserCenterExactActivitiesPost, { userRecentPost: item })); });
        //添加分隔线
        for (var i = 1; i < userRecentPosts.length; i += 2) {
            userRecentPosts.splice(i, 0, React.createElement("hr", null));
        }
        return (React.createElement("div", { className: "user-posts" },
            userRecentPosts,
            React.createElement(UserCenterPageCount_1.UserCenterPageCount, { currentPage: this.props.match.params.page || 1, totalPage: this.state.totalPage, href: "/usercenter/myposts/", hasTotal: this.state.hasTotal })));
    };
    return UserCenterMyPostsExact;
}(React.Component));
exports.UserCenterMyPostsExact = UserCenterMyPostsExact;


/***/ }),
/* 439 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var AppState_1 = __webpack_require__(37);
var UserCenterConfigAvatar_1 = __webpack_require__(440);
var UserCenterConfigSignature_1 = __webpack_require__(441);
var UserCenterConfigOthers_1 = __webpack_require__(442);
var UserCenterConfig = /** @class */ (function (_super) {
    __extends(UserCenterConfig, _super);
    function UserCenterConfig(props) {
        var _this = _super.call(this, props) || this;
        var info = Utility.getLocalStorage('userInfo');
        var myInfo = {
            EmailAddress: info.emailAddress,
            Gender: info.gender,
            Introduction: info.introduction,
            QQ: info.qq,
            SignatureCode: info.signatureCode,
            Birthday: info.birthday,
            birthdayYear: info.birthday ? Number.parseInt(info.birthday.slice(0, 4)) : 0,
            birthdayMouth: info.birthday ? Number.parseInt(info.birthday.slice(5, 7)) : 0,
            birthdayDay: info.birthday ? Number.parseInt(info.birthday.slice(8, 10)) : 0,
            DisplayTitleId: info.displayTitleId,
            userTitleIds: info.userTitleIds
        };
        _this.state = {
            userInfo: myInfo,
            info: '',
            isLoading: false
        };
        _this.handleSignatureChange = _this.handleSignatureChange.bind(_this);
        _this.handleChange = _this.handleChange.bind(_this);
        _this.handleSubmit = _this.handleSubmit.bind(_this);
        _this.handleReset = _this.handleReset.bind(_this);
        return _this;
    }
    UserCenterConfig.prototype.handleReset = function () {
        var info = Utility.getLocalStorage('userInfo');
        var userInfo = {
            EmailAddress: info.emailAddress,
            Gender: info.gender,
            Introduction: info.introduction,
            QQ: info.qq,
            SignatureCode: info.signatureCode,
            Birthday: info.birthday,
            birthdayYear: info.birthday ? Number.parseInt(info.birthday.slice(0, 4)) : 0,
            birthdayMouth: info.birthday ? Number.parseInt(info.birthday.slice(5, 7)) : 0,
            birthdayDay: info.birthday ? Number.parseInt(info.birthday.slice(8, 10)) : 0,
            DisplayTitleId: info.displayTitleId,
            userTitleIds: info.userTitleIds
        };
        this.setState({
            userInfo: userInfo
        });
    };
    UserCenterConfig.prototype.handleSignatureChange = function (str) {
        this.setState(function (prevState) { return ({
            userInfo: __assign({}, prevState.userInfo, { SignatureCode: str })
        }); });
    };
    UserCenterConfig.prototype.handleChange = function (key, value) {
        this.setState(function (prevState) {
            return ({
                userInfo: __assign({}, prevState.userInfo, (_a = {}, _a[key] = value, _a))
            });
            var _a;
        });
    };
    UserCenterConfig.prototype.handleSubmit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            var newInfo, birthDay, token, url, myHeaders, res, headers1, response1, userInfo, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.setState({
                            isLoading: true,
                            info: '修改中'
                        });
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 8, , 9]);
                        newInfo = {
                            Birthday: this.state.userInfo.birthdayYear !== 0 ? this.state.userInfo.birthdayYear + "-" + this.state.userInfo.birthdayMouth + "-" + this.state.userInfo.birthdayDay : '',
                            EmailAddress: this.state.userInfo.EmailAddress,
                            Gender: this.state.userInfo.Gender,
                            Introduction: this.state.userInfo.Introduction,
                            QQ: this.state.userInfo.QQ,
                            SignatureCode: this.state.userInfo.SignatureCode,
                            DisplayTitleId: this.state.userInfo.DisplayTitleId
                        };
                        if (newInfo.EmailAddress && !newInfo.EmailAddress.match(/[\S]+@[\S]+\.[\S]+/)) {
                            throw new Error('请检查邮箱地址');
                        }
                        if (newInfo.QQ && (Number.parseInt(newInfo.QQ) <= 0 || Number.parseInt(newInfo.QQ).toString() !== newInfo.QQ)) {
                            throw new Error('请检查QQ是否正确');
                        }
                        birthDay = new Date(this.state.userInfo.birthdayYear + 10, this.state.userInfo.birthdayMouth - 1, this.state.userInfo.birthdayDay);
                        if (this.state.userInfo.birthdayYear !== 0 && this.state.userInfo.birthdayYear !== 9999 && birthDay.getTime() > Date.now()) {
                            throw new Error('请检查生日是否正确');
                        }
                        return [4 /*yield*/, Utility.getToken()];
                    case 2:
                        token = _a.sent();
                        url = "/me";
                        myHeaders = new Headers();
                        myHeaders.append('Authorization', token);
                        myHeaders.append('Content-Type', 'application/json');
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                method: 'PUT',
                                headers: myHeaders,
                                body: JSON.stringify(newInfo)
                            })];
                    case 3:
                        res = _a.sent();
                        if (!(res.status === 200)) return [3 /*break*/, 6];
                        headers1 = new Headers();
                        headers1.append("Authorization", token);
                        return [4 /*yield*/, Utility.cc98Fetch("/user/" + Utility.getLocalStorage('userInfo').id, {
                                headers: headers1
                            })];
                    case 4:
                        response1 = _a.sent();
                        return [4 /*yield*/, response1.json()];
                    case 5:
                        userInfo = _a.sent();
                        Utility.setLocalStorage("userInfo", userInfo);
                        Utility.setLocalStorage("userId_" + userInfo.id, userInfo, 3600);
                        Utility.setLocalStorage("userName_" + userInfo.name, userInfo, 3600);
                        this.setState({
                            info: '修改成功',
                            isLoading: false
                        });
                        setTimeout((function () {
                            _this.setState({
                                info: ''
                            });
                        }), 1000);
                        return [3 /*break*/, 7];
                    case 6: throw new Error(res.status.toString());
                    case 7: return [3 /*break*/, 9];
                    case 8:
                        e_1 = _a.sent();
                        this.setState({
                            info: e_1.message,
                            isLoading: false
                        });
                        return [3 /*break*/, 9];
                    case 9: return [2 /*return*/];
                }
            });
        });
    };
    UserCenterConfig.prototype.render = function () {
        return (React.createElement("div", { className: "user-center-config" },
            React.createElement(UserCenterConfigAvatar_1.default, null),
            React.createElement("hr", null),
            React.createElement(UserCenterConfigSignature_1.UserCenterConfigSignature, { signature: this.state.userInfo.SignatureCode, onchange: this.handleSignatureChange }),
            React.createElement("hr", null),
            React.createElement(UserCenterConfigOthers_1.UserCenterConfigOthers, { userinfo: this.state.userInfo, handleChange: this.handleChange }),
            React.createElement("hr", null),
            React.createElement("div", { className: "config-submit" },
                React.createElement("h2", null, "\u63D0\u4EA4\u4FEE\u6539"),
                React.createElement("div", { className: "config-buttons" },
                    React.createElement("button", { className: "config-submit-button", type: "button", disabled: this.state.isLoading, onClick: this.handleSubmit }, "\u63D0\u4EA4"),
                    React.createElement("button", { type: "button", onClick: this.handleReset }, "\u91CD\u7F6E")),
                React.createElement("p", { style: { height: this.state.info === '' ? '0' : '1rem', color: 'red' } }, this.state.info))));
    };
    return UserCenterConfig;
}(React.Component));
exports.UserCenterConfig = UserCenterConfig;
var UserInfo = /** @class */ (function (_super) {
    __extends(UserInfo, _super);
    function UserInfo() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return UserInfo;
}(AppState_1.ChangeUserInfo));


/***/ }),
/* 440 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var Actions_1 = __webpack_require__(36);
var react_redux_1 = __webpack_require__(26);
var UserCenterConfigAvatar = /** @class */ (function (_super) {
    __extends(UserCenterConfigAvatar, _super);
    function UserCenterConfigAvatar(props) {
        var _this = _super.call(this, props) || this;
        _this.changeAvatar = function (avatarUrl) { return __awaiter(_this, void 0, void 0, function () {
            var token, url, myHeaders, res, userInfo, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 3, , 4]);
                        this.setState({
                            isLoading: true
                        });
                        return [4 /*yield*/, Utility.getToken()];
                    case 1:
                        token = _a.sent();
                        url = '/me/portrait';
                        myHeaders = new Headers();
                        myHeaders.append('Content-Type', 'application/json');
                        myHeaders.append('Authorization', token);
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                method: 'PUT',
                                headers: myHeaders,
                                body: JSON.stringify(avatarUrl)
                            })];
                    case 2:
                        res = _a.sent();
                        if (res.status === 200) {
                            this.setState({
                                info: '修改成功',
                                avatarNow: avatarUrl,
                                isLoading: false,
                                isShown: false,
                                divheight: 0,
                                choosingDefault: false
                            });
                            userInfo = Utility.getLocalStorage('userInfo');
                            userInfo.portraitUrl = avatarUrl;
                            this.props.changeUserInfo(userInfo);
                            Utility.setLocalStorage("userInfo", userInfo);
                            Utility.setLocalStorage("userId_" + userInfo.id, userInfo, 3600);
                            Utility.setLocalStorage("userName_" + userInfo.name, userInfo, 3600);
                        }
                        else {
                            throw {};
                        }
                        return [3 /*break*/, 4];
                    case 3:
                        e_1 = _a.sent();
                        this.setState({
                            info: '修改失败',
                            isLoading: false,
                            isShown: false,
                            divheight: 0,
                            choosingDefault: false
                        });
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        }); };
        var userInfo = Utility.getLocalStorage('userInfo');
        _this.state = {
            avatarURL: '',
            info: '',
            isShown: false,
            divheight: 0,
            divWidth: 0,
            selectorWidth: 160,
            selectorLeft: 0,
            selectorTop: 0,
            avatarNow: userInfo.portraitUrl,
            isLoading: false,
            naturalWidth: 0,
            naturalHeight: 0,
            img: null,
            NUM_MAX: 0,
            scaling: 1,
            choosingDefault: false,
            fileType: ''
        };
        _this.handleChange = _this.handleChange.bind(_this);
        _this.handleIMGLoad = _this.handleIMGLoad.bind(_this);
        _this.handleSelectorMove = _this.handleSelectorMove.bind(_this);
        _this.handleResizeMove = _this.handleResizeMove.bind(_this);
        _this.handleSubmit = _this.handleSubmit.bind(_this);
        _this.handleCoverMouseMove = _this.handleCoverMouseMove.bind(_this);
        _this.handleMouseUp = _this.handleMouseUp.bind(_this);
        return _this;
    }
    UserCenterConfigAvatar.prototype.handleChange = function (e) {
        var _this = this;
        var file = e.target.files[0];
        if (!file.type.match('image.*')) {
            this.setState({
                info: '请选择图片文件',
                isShown: false,
                divheight: 0
            });
            return false;
        }
        this.setState({ fileType: file.type });
        var render = new FileReader();
        render.readAsDataURL(file);
        render.addEventListener('load', function (e) {
            _this.setState({
                isShown: true,
                avatarURL: e.target.result
            });
        });
    };
    UserCenterConfigAvatar.prototype.handleIMGLoad = function (width, height, img) {
        if (width < 160 || height < 160) {
            this.setState({
                info: '图片至少为 160*160',
                isShown: false,
                divheight: 0
            });
            return;
        }
        var ctx = this.myCanvas.getContext('2d');
        var scaling = this.state.scaling;
        while (width / scaling > 800) {
            scaling = scaling * 1.1;
        }
        this.myCanvas.width = width / scaling;
        this.myCanvas.height = height / scaling;
        ctx.drawImage(img, 0, 0, width, height, 0, 0, width / scaling, height / scaling);
        this.setState({
            divheight: height / scaling + 50,
            divWidth: width / scaling + 50,
            isShown: true,
            info: '请选择要显示的区域',
            selectorLeft: width / scaling / 4,
            selectorTop: height / scaling / 4,
            selectorWidth: Math.min(height / scaling, width / scaling) / 2,
            naturalWidth: width / scaling,
            naturalHeight: height / scaling,
            img: img,
            NUM_MAX: Math.min(500, width / scaling, height / scaling),
            scaling: scaling
        });
    };
    UserCenterConfigAvatar.prototype.handleMouseUp = function () {
        this.dragging = null;
    };
    UserCenterConfigAvatar.prototype.componentDidMount = function () {
        this.selector.addEventListener('mousedown', this.handleSelectorMove);
        this.selector.addEventListener('mousemove', this.handleSelectorMove);
        this.selector.addEventListener('mouseup', this.handleSelectorMove);
        this.resize.addEventListener('mousedown', this.handleResizeMove);
        this.resize.addEventListener('mousemove', this.handleResizeMove);
        this.resize.addEventListener('mouseup', this.handleResizeMove);
        this.cover.addEventListener('mousemove', this.handleCoverMouseMove);
        this.cover.addEventListener('mouseup', this.handleCoverMouseMove);
        window.addEventListener('mouseup', this.handleMouseUp);
    };
    UserCenterConfigAvatar.prototype.componentWillUnmount = function () {
        this.selector.removeEventListener('mousedown', this.handleSelectorMove);
        this.selector.removeEventListener('mousemove', this.handleSelectorMove);
        this.selector.removeEventListener('mouseup', this.handleSelectorMove);
        this.resize.removeEventListener('mousedown', this.handleResizeMove);
        this.resize.removeEventListener('mousemove', this.handleResizeMove);
        this.resize.removeEventListener('mouseup', this.handleResizeMove);
        this.cover.removeEventListener('mousemove', this.handleCoverMouseMove);
        this.cover.removeEventListener('mouseup', this.handleCoverMouseMove);
        window.removeEventListener('mouseup', this.handleMouseUp);
    };
    UserCenterConfigAvatar.prototype.handleSelectorMove = function (event) {
        var _this = this;
        if (this.dragging !== undefined && this.dragging !== null && this.dragging.id === 'resize') {
            this.handleCoverMouseMove(event);
        }
        else {
            switch (event.type) {
                case 'mousedown':
                    this.diffX = event.clientX - event.target.offsetLeft;
                    this.diffY = event.clientY - event.target.offsetTop;
                    this.dragging = event.target;
                    break;
                case 'mousemove':
                    if (this.dragging !== null) {
                        var y_1 = event.clientY - this.diffY, x_1 = event.clientX - this.diffX;
                        this.setState(function (prevState) {
                            if (y_1 < 0) {
                                y_1 = 0;
                            }
                            if (x_1 < 0) {
                                x_1 = 0;
                            }
                            if (y_1 > prevState.naturalHeight - _this.state.selectorWidth) {
                                y_1 = prevState.naturalHeight - _this.state.selectorWidth;
                            }
                            if (x_1 > prevState.naturalWidth - _this.state.selectorWidth) {
                                x_1 = prevState.naturalWidth - _this.state.selectorWidth;
                            }
                            return {
                                selectorTop: y_1,
                                selectorLeft: x_1
                            };
                        });
                    }
                    break;
                case 'mouseup':
                    this.dragging = null;
                    break;
                case 'mouseleave':
                    this.dragging = null;
                    break;
            }
        }
    };
    UserCenterConfigAvatar.prototype.handleSubmit = function () {
        var _this = this;
        var canvas = this.newAvatar;
        var ctx = canvas.getContext('2d');
        var x = this.state.selectorLeft, y = this.state.selectorTop, width = this.state.selectorWidth;
        canvas.width = width;
        canvas.height = width;
        ctx.drawImage(this.state.img, x * this.state.scaling, y * this.state.scaling, width * this.state.scaling, width * this.state.scaling, 0, 0, width, width);
        canvas.toBlob(function (result) { return __awaiter(_this, void 0, void 0, function () {
            var file, avatar, baseUrl;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        file = new Blob([result], { type: this.state.fileType });
                        file.lastModifiedDate = Date.now();
                        file.name = '头像.png';
                        return [4 /*yield*/, Utility.uploadFile(file)];
                    case 1:
                        avatar = _a.sent();
                        baseUrl = Utility.getApiUrl();
                        this.changeAvatar(baseUrl + avatar.content);
                        return [2 /*return*/];
                }
            });
        }); }, this.state.fileType, 0.75);
    };
    UserCenterConfigAvatar.prototype.handleResizeMove = function (event) {
        var _this = this;
        switch (event.type) {
            case 'mousedown':
                this.diffX = event.clientX - event.target.offsetLeft;
                this.dragging = event.target;
                break;
            case 'mousemove':
                if (this.dragging !== null) {
                    this.diffY = event.clientX - event.target.offsetLeft;
                    this.setState(function (prevState) {
                        var num = prevState.selectorWidth + _this.diffY - _this.diffX;
                        var max = Math.min(prevState.NUM_MAX, prevState.naturalWidth - prevState.selectorLeft, prevState.naturalHeight - prevState.selectorTop);
                        if (!isNaN(num)) {
                            if (num < 100) {
                                num = 100;
                            }
                            if (num > max) {
                                num = max;
                            }
                        }
                        return {
                            selectorWidth: isNaN(num) ? prevState.selectorWidth : num
                        };
                    });
                }
                break;
            case 'mouseup':
                this.dragging = null;
                break;
            case 'mouseleave':
                this.dragging = null;
                break;
        }
    };
    UserCenterConfigAvatar.prototype.handleCoverMouseMove = function (e) {
        var _this = this;
        switch (e.type) {
            case 'mouseup':
                this.dragging = null;
                break;
            case 'mousemove':
                if (this.dragging !== undefined && this.dragging !== null && this.dragging.id === 'resize') {
                    this.diffY = e.clientX - this.dragging.offsetLeft;
                    this.setState(function (prevState) {
                        var num = prevState.selectorWidth + _this.diffY - _this.diffX;
                        if (!isNaN(num)) {
                            var max = Math.min(prevState.NUM_MAX, prevState.naturalWidth - prevState.selectorLeft, prevState.naturalHeight - prevState.selectorTop);
                            if (num < 100) {
                                num = 100;
                            }
                            if (num > max) {
                                num = max;
                            }
                        }
                        return {
                            selectorWidth: isNaN(num) ? prevState.selectorWidth : num
                        };
                    });
                }
                else if (this.dragging !== undefined && this.dragging !== null && this.dragging.id === 'selector') {
                    var y_2 = e.clientY - this.diffY, x_2 = e.clientX - this.diffX;
                    this.setState(function (prevState) {
                        if (y_2 < 0) {
                            y_2 = 0;
                        }
                        if (x_2 < 0) {
                            x_2 = 0;
                        }
                        if (y_2 > prevState.naturalHeight - _this.state.selectorWidth) {
                            y_2 = prevState.naturalHeight - _this.state.selectorWidth;
                        }
                        if (x_2 > prevState.naturalWidth - _this.state.selectorWidth) {
                            x_2 = prevState.naturalWidth - _this.state.selectorWidth;
                        }
                        return {
                            selectorTop: y_2,
                            selectorLeft: x_2
                        };
                    });
                }
                break;
        }
    };
    UserCenterConfigAvatar.prototype.render = function () {
        var _this = this;
        var style = {
            display: 'none'
        };
        var userInfo = Utility.getLocalStorage('userInfo');
        return (React.createElement("div", null,
            React.createElement("h2", null, "\u4FEE\u6539\u5934\u50CF"),
            React.createElement("div", { className: "user-center-config-avatar" },
                React.createElement("img", { src: this.state.avatarNow }),
                React.createElement("div", null,
                    React.createElement("button", { id: "chooseDefaultAvatar", type: "button", onClick: function () { return _this.setState({ choosingDefault: true, info: '暂时只有两枚' }); } }, "\u9009\u62E9\u8BBA\u575B\u5934\u50CF"),
                    React.createElement("div", null,
                        React.createElement("input", { onChange: this.handleChange, id: "uploadAvatar", type: "file", accept: "image/*", style: style }),
                        React.createElement("label", { htmlFor: "uploadAvatar", onClick: function () { return _this.setState({ choosingDefault: false }); } },
                            React.createElement("p", null, "\u9009\u62E9\u672C\u5730\u56FE\u7247")),
                        React.createElement("p", { style: { color: 'red', margin: '0' } }, this.state.info),
                        React.createElement("button", { type: "button", className: "config-submit-button", style: this.state.isShown ? {} : style, onClick: this.handleSubmit, disabled: this.state.isLoading }, "\u63D0\u4EA4"))),
                React.createElement("div", { className: "user-center-config-avatar-preview", style: this.state.isShown ? { opacity: 1, marginTop: '2rem' } : { zIndex: -1 } },
                    React.createElement("div", { style: { position: 'absolute', width: '824px', overflow: 'hidden', paddingBottom: '50px' } },
                        React.createElement("canvas", { id: "newAvatar", style: style, ref: function (a) { _this.newAvatar = a; } }),
                        React.createElement("canvas", { ref: function (canvas) { _this.myCanvas = canvas; }, style: this.state.isShown ? { position: 'relative' } : { display: 'none' } }),
                        React.createElement("div", { id: "cover", ref: function (div) { _this.cover = div; }, style: { width: this.state.divWidth + "px", height: this.state.divheight + "px", top: 0 } }),
                        React.createElement("div", { className: "imgdata", style: this.state.isShown ? { width: this.state.selectorWidth + "px", height: this.state.selectorWidth + "px", borderRadius: this.state.selectorWidth / 2 + "px", top: this.state.selectorTop + "px", left: this.state.selectorLeft + "px" } : style },
                            React.createElement("img", { src: this.state.avatarURL, style: { position: 'relative', top: "-" + this.state.selectorTop + "px", left: "-" + this.state.selectorLeft + "px", width: this.state.naturalWidth + "px", height: this.state.naturalHeight + "px" } })),
                        React.createElement("div", { id: "selector", ref: function (div) { _this.selector = div; }, style: this.state.isShown ? { width: this.state.selectorWidth + "px", height: this.state.selectorWidth + "px", borderRadius: this.state.selectorWidth / 2 + "px", top: this.state.selectorTop + "px", left: this.state.selectorLeft + "px" } : style }),
                        React.createElement("span", { id: "resize", ref: function (span) { _this.resize = span; }, style: { top: this.state.selectorWidth + this.state.selectorTop + "px", left: this.state.selectorWidth + this.state.selectorLeft + "px" } })),
                    React.createElement("img", { onLoad: function (e) { _this.handleIMGLoad(e.target.naturalWidth, e.target.naturalHeight, e.target); }, style: style, src: this.state.avatarURL })),
                React.createElement("div", { style: { width: '100%', height: this.state.divheight + "px", transitionDuration: '.5s' } }),
                React.createElement("div", { style: this.state.choosingDefault ? { display: 'flex', flexDirection: 'row', width: '100%', justifyContent: 'center' } : { display: 'none' } },
                    React.createElement("img", { style: { margin: '3rem', cursor: 'pointer' }, onClick: function (e) { _this.changeAvatar('/images/default_avatar_boy.png'); }, src: "/images/default_avatar_boy.png" }),
                    React.createElement("img", { style: { margin: '3rem', cursor: 'pointer' }, onClick: function (e) { _this.changeAvatar('/images/default_avatar_boy.png'); }, src: "/images/default_avatar_girl.png" })))));
    };
    return UserCenterConfigAvatar;
}(React.Component));
function mapDispatch(dispatch) {
    return {
        changeUserInfo: function (newInfo) {
            dispatch(Actions_1.changeUserInfo(newInfo));
        }
    };
}
exports.default = react_redux_1.connect(function () { return (null); }, mapDispatch)(UserCenterConfigAvatar);


/***/ }),
/* 441 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var UserCenterConfigSignature = /** @class */ (function (_super) {
    __extends(UserCenterConfigSignature, _super);
    function UserCenterConfigSignature() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    UserCenterConfigSignature.prototype.render = function () {
        var _this = this;
        return (React.createElement("div", null,
            React.createElement("h2", null, "\u4FEE\u6539\u7B7E\u540D\u6863"),
            React.createElement("div", { className: "user-center-config-signature" },
                React.createElement("textarea", { id: "signature", onChange: function (e) { _this.props.onchange(e.target.value); }, value: this.props.signature }),
                React.createElement("div", null,
                    React.createElement("p", null, "\u6CE8* \u4E2A\u6027\u7B7E\u540D\u5C06\u5728\u4E2A\u4EBA\u4E3B\u9875\u3001\u53D1\u5E03\u6587\u7AE0\u3001\u56DE\u590D\u6587\u7AE0\u4E2D\u663E\u793A\uFF0C\u5141\u8BB8\u4F7F\u7528UBB\u4EE3\u7801")))));
    };
    return UserCenterConfigSignature;
}(React.Component));
exports.UserCenterConfigSignature = UserCenterConfigSignature;


/***/ }),
/* 442 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var AppState_1 = __webpack_require__(443);
var Utility = __webpack_require__(2);
var UserCenterConfigOthers = /** @class */ (function (_super) {
    __extends(UserCenterConfigOthers, _super);
    function UserCenterConfigOthers(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            displayTitles: []
        };
        return _this;
    }
    UserCenterConfigOthers.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var url, res, data, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 3, , 4]);
                        url = '/config/global/all-user-title';
                        return [4 /*yield*/, Utility.cc98Fetch(url)];
                    case 1:
                        res = _a.sent();
                        return [4 /*yield*/, res.json()];
                    case 2:
                        data = _a.sent();
                        this.setState({
                            displayTitles: data
                        });
                        return [3 /*break*/, 4];
                    case 3:
                        e_1 = _a.sent();
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    UserCenterConfigOthers.prototype.render = function () {
        var _this = this;
        var array = [], i = 0;
        //年
        i = 100;
        while (i--) {
            array.unshift(i + 1920);
        }
        var yearsOption = array.map(function (item) { return (React.createElement("option", { value: item }, item)); });
        yearsOption.unshift(React.createElement("option", { value: 9999 }, "\u4FDD\u5BC6"));
        yearsOption.unshift(React.createElement("option", { value: 0 }, "\u672A\u9009\u62E9"));
        array = [];
        //月
        i = 12;
        while (i--) {
            array.unshift(i + 1);
        }
        var mouthsOption = array.map(function (item) { return (React.createElement("option", { value: item }, item)); });
        mouthsOption.unshift(React.createElement("option", { value: 0 }, "\u672A\u9009\u62E9"));
        array = [];
        //日
        i = 31;
        while (i--) {
            array.unshift(i + 1);
        }
        var daysOption = array.map(function (item) { return (React.createElement("option", { value: item }, item)); });
        daysOption.unshift(React.createElement("option", { value: 0 }, "\u672A\u9009\u62E9"));
        return (React.createElement("div", { className: "user-center-config-others" },
            React.createElement("h2", null, "\u5176\u4ED6\u8BBE\u7F6E"),
            React.createElement("div", { className: "config-gender" },
                React.createElement("p", null, "\u6027\u522B\uFF1A"),
                React.createElement("select", { id: "genderSelect", name: "Gender", value: this.props.userinfo.Gender, onChange: function (e) { _this.props.handleChange(e.target.name, Number.parseInt(e.target.value)); } },
                    React.createElement("option", { value: 1 }, "\u7537"),
                    React.createElement("option", { value: 0 }, "\u5973"))),
            React.createElement("div", { className: "config-birthday" },
                React.createElement("p", null, "\u751F\u65E5\uFF1A"),
                React.createElement("select", { id: "birthdayYear", name: "birthdayYear", value: this.props.userinfo.birthdayYear, onChange: function (e) { _this.props.handleChange(e.target.name, Number.parseInt(e.target.value)); } }, yearsOption),
                React.createElement("p", null, "\u5E74"),
                React.createElement("select", { id: "birthdayMouth", name: "birthdayMouth", value: this.props.userinfo.birthdayMouth, disabled: this.props.userinfo.birthdayYear === 0, onChange: function (e) { _this.props.handleChange(e.target.name, Number.parseInt(e.target.value)); } }, mouthsOption),
                React.createElement("p", null, "\u6708"),
                React.createElement("select", { id: "birthdayDay", name: "birthdayDay", value: this.props.userinfo.birthdayDay, disabled: this.props.userinfo.birthdayYear === 0, onChange: function (e) { _this.props.handleChange(e.target.name, Number.parseInt(e.target.value)); } }, daysOption),
                React.createElement("p", null, "\u65E5")),
            this.state.displayTitles.length > 0 ?
                React.createElement("div", { className: "config-gender" },
                    React.createElement("p", null, "\u5934\u8854\uFF1A"),
                    React.createElement("select", { style: { width: 'auto' }, name: "DisplayTitleId", value: this.props.userinfo.DisplayTitleId, onChange: function (e) { _this.props.handleChange(e.target.name, Number.parseInt(e.target.value)); } },
                        React.createElement("option", { value: 0 }, "\u4E0D\u663E\u793A"),
                        this.props.userinfo.userTitleIds.map(function (item) {
                            var title = _this.state.displayTitles.filter(function (title) { return title.id === item; });
                            if (title.length > 0) {
                                return React.createElement("option", { value: item }, title[0].name);
                            }
                        }))) : null,
            React.createElement("div", { className: "config-text" },
                React.createElement("p", null, "QQ\uFF1A"),
                React.createElement("input", { type: "text", name: "QQ", value: this.props.userinfo.QQ, maxLength: 20, onChange: function (e) { _this.props.handleChange(e.target.name, e.target.value); } })),
            React.createElement("div", { className: "config-text" },
                React.createElement("p", null, "\u90AE\u7BB1\uFF1A"),
                React.createElement("input", { type: "email", name: "EmailAddress", value: this.props.userinfo.EmailAddress, maxLength: 150, onChange: function (e) { _this.props.handleChange(e.target.name, e.target.value); } })),
            React.createElement("div", { className: "config-introduction" },
                React.createElement("p", null, "\u4E2A\u4EBA\u7B80\u4ECB\uFF1A"),
                React.createElement("div", null,
                    React.createElement("textarea", { name: "Introduction", value: this.props.userinfo.Introduction, maxLength: 100, onChange: function (e) { _this.props.handleChange(e.target.name, e.target.value); } }),
                    React.createElement("p", null, "*\u4E0D\u8D85\u8FC7100\u5B57")))));
    };
    return UserCenterConfigOthers;
}(React.Component));
exports.UserCenterConfigOthers = UserCenterConfigOthers;
var UserInfo = /** @class */ (function (_super) {
    __extends(UserInfo, _super);
    function UserInfo() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return UserInfo;
}(AppState_1.ChangeUserInfo));
var State = /** @class */ (function () {
    function State() {
    }
    return State;
}());
var DispalyTitle = /** @class */ (function () {
    function DispalyTitle() {
    }
    return DispalyTitle;
}());


/***/ }),
/* 443 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
/**
 * 表示应用程序的状态。
 */
var AppState = /** @class */ (function () {
    function AppState() {
    }
    return AppState;
}());
exports.AppState = AppState;
/**
 * 投票状态
 */
var TopicVoteState = /** @class */ (function () {
    function TopicVoteState() {
    }
    return TopicVoteState;
}());
exports.TopicVoteState = TopicVoteState;
/**
 * 发帖内容状态
 */
var PostTopicState = /** @class */ (function () {
    function PostTopicState() {
    }
    return PostTopicState;
}());
exports.PostTopicState = PostTopicState;
/**
 * 作者信息状态
 */
var AuthorMessageState = /** @class */ (function () {
    function AuthorMessageState() {
    }
    return AuthorMessageState;
}());
exports.AuthorMessageState = AuthorMessageState;
/**
 * 题目信息状态
 */
var TopicTitleState = /** @class */ (function () {
    function TopicTitleState() {
    }
    return TopicTitleState;
}());
exports.TopicTitleState = TopicTitleState;
/**
 * 文章内容
 */
var ContentState = /** @class */ (function () {
    function ContentState() {
    }
    return ContentState;
}());
exports.ContentState = ContentState;
/**
 * 点赞信息状态
 */
var TopicGoodState = /** @class */ (function () {
    function TopicGoodState() {
    }
    return TopicGoodState;
}());
exports.TopicGoodState = TopicGoodState;
/**
 * 回复者状态
 */
var ReplierState = /** @class */ (function () {
    function ReplierState() {
    }
    return ReplierState;
}());
exports.ReplierState = ReplierState;
var ListHeadState = /** @class */ (function () {
    function ListHeadState() {
    }
    return ListHeadState;
}());
exports.ListHeadState = ListHeadState;
var ListNoticeState = /** @class */ (function () {
    function ListNoticeState() {
    }
    return ListNoticeState;
}());
exports.ListNoticeState = ListNoticeState;
var ListTagState = /** @class */ (function () {
    function ListTagState() {
    }
    return ListTagState;
}());
exports.ListTagState = ListTagState;
/**
 * 内容列表页面的状态。
 */
var ListContentState = /** @class */ (function () {
    function ListContentState() {
    }
    return ListContentState;
}());
exports.ListContentState = ListContentState;
var TopicTitleAndContentState = /** @class */ (function () {
    /*  constructor(title, authorName, lastReply) {
          this.authorName = authorName;
          this.lastReply = lastReply;
            this.title = title;
      }*/
    function TopicTitleAndContentState() {
        //this.userName = userName;
        //this.title = title;
        //this.id = topicid;
        //this.userId = userId;
        //this.lastPostUser = lastPostUser;
        //this.lastPostTime = lastPostTime;
        //this.likeCount = likeCount;
        //this.dislikeCount = dislikeCount;
        //this.replyCount = replyCount;
        //this.highlightInfo = highlightInfo;
        //this.topState = topState;
        //this.state = state;
    }
    return TopicTitleAndContentState;
}());
exports.TopicTitleAndContentState = TopicTitleAndContentState;
/**
 * 定义页码列表组件的状态。
 */
var ListPagerState = /** @class */ (function () {
    function ListPagerState() {
    }
    return ListPagerState;
}());
exports.ListPagerState = ListPagerState;
var PagerState = /** @class */ (function () {
    function PagerState(page) {
        this.pageNumber = page;
    }
    return PagerState;
}());
exports.PagerState = PagerState;
var TopicState = /** @class */ (function () {
    function TopicState(userName, title, content, time, signature, userImgUrl, userId, likeNumber, dislikeNumber, postId, isAnonymous, contentType, isFollowing, fanCount, likeInfo, awardInfo) {
        this.userName = userName;
        this.time = time;
        this.title = title;
        this.content = content;
        this.signature = signature;
        this.userImgUrl = userImgUrl;
        this.userId = userId;
        this.likeNumber = likeNumber;
        this.dislikeNumber = dislikeNumber;
        this.postId = postId;
        this.isAnonymous = isAnonymous;
        this.contentType = contentType;
        this.isFollowing = isFollowing;
        this.fanCount = fanCount;
        this.likeInfo = likeInfo;
        this.awardInfo = awardInfo;
    }
    return TopicState;
}());
exports.TopicState = TopicState;
/**
 * 登录状态
 */
var LoginState = /** @class */ (function () {
    function LoginState() {
    }
    return LoginState;
}());
exports.LoginState = LoginState;
/**
 * 已登录状态
 */
var AlreadyLoginState = /** @class */ (function () {
    function AlreadyLoginState() {
    }
    return AlreadyLoginState;
}());
exports.AlreadyLoginState = AlreadyLoginState;
/**
 * 版面类
 */
var Board = /** @class */ (function () {
    //构造方法
    function Board(name, todayPostCount, totalPostCount, boardID, master) {
        this.name = name;
        this.todayPostCount = todayPostCount;
        this.totalPostCount = totalPostCount;
        this.id = boardID;
        this.masters = master;
    }
    return Board;
}());
exports.Board = Board;
var BoardState = /** @class */ (function () {
    function BoardState() {
    }
    return BoardState;
}());
exports.BoardState = BoardState;
/**
* 用户信息
*/
var UserInfo = /** @class */ (function () {
    function UserInfo() {
    }
    return UserInfo;
}());
exports.UserInfo = UserInfo;
/**
* 表示用户最近帖子
*/
var UserRecentPost = /** @class */ (function () {
    function UserRecentPost() {
    }
    return UserRecentPost;
}());
exports.UserRecentPost = UserRecentPost;
/**
 * 表示用户粉丝信息
 */
var UserFanInfo = /** @class */ (function () {
    function UserFanInfo() {
    }
    return UserFanInfo;
}());
exports.UserFanInfo = UserFanInfo;
/**
* 用户收藏的版面信息
*/
var UserFavoritesBoardInfo = /** @class */ (function () {
    function UserFavoritesBoardInfo() {
    }
    return UserFavoritesBoardInfo;
}());
exports.UserFavoritesBoardInfo = UserFavoritesBoardInfo;
/**
* 修改用户信息所要提交的body
*/
var ChangeUserInfo = /** @class */ (function () {
    function ChangeUserInfo() {
    }
    return ChangeUserInfo;
}());
exports.ChangeUserInfo = ChangeUserInfo;


/***/ }),
/* 444 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var UserCenterMyFavoritesBoard_1 = __webpack_require__(445);
var UserCenterMyFavoritesBoards = /** @class */ (function (_super) {
    __extends(UserCenterMyFavoritesBoards, _super);
    function UserCenterMyFavoritesBoards(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            boards: [],
            info: '加载中',
            isLoading: false
        };
        return _this;
    }
    UserCenterMyFavoritesBoards.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var token, loginName, myHeaders, response1, userInfo, customBoardsId, query, url, res, data, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 6, , 7]);
                        this.setState({ isLoading: true });
                        return [4 /*yield*/, Utility.getToken()];
                    case 1:
                        token = _a.sent();
                        loginName = Utility.getLocalStorage('userName');
                        myHeaders = new Headers();
                        myHeaders.append("Authorization", token);
                        return [4 /*yield*/, Utility.cc98Fetch("/user/name/" + loginName, {
                                headers: myHeaders
                            })];
                    case 2:
                        response1 = _a.sent();
                        if (response1.status !== 200) {
                            throw {};
                        }
                        return [4 /*yield*/, response1.json()];
                    case 3:
                        userInfo = _a.sent();
                        customBoardsId = userInfo.customBoards;
                        if (!customBoardsId || customBoardsId.length === 0) {
                            this.setState({
                                info: '没有关注'
                            });
                            return [2 /*return*/];
                        }
                        query = customBoardsId.join('&id=');
                        url = "/board/?id=" + query;
                        myHeaders = new Headers();
                        myHeaders.append('Authorization', token);
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                headers: myHeaders
                            })];
                    case 4:
                        res = _a.sent();
                        if (res.status !== 200) {
                            throw {};
                        }
                        return [4 /*yield*/, res.json()];
                    case 5:
                        data = _a.sent();
                        this.setState({
                            boards: data,
                            isLoading: false
                        });
                        return [3 /*break*/, 7];
                    case 6:
                        e_1 = _a.sent();
                        console.log('版面加载失败');
                        return [3 /*break*/, 7];
                    case 7: return [2 /*return*/];
                }
            });
        });
    };
    UserCenterMyFavoritesBoards.prototype.render = function () {
        var style = {
            marginTop: '2rem',
            textAlign: 'center'
        };
        if (this.state.isLoading) {
            return React.createElement("div", { className: "user-center-loading" },
                React.createElement("p", { className: "fa fa-spinner fa-pulse fa-2x fa-fw" }));
        }
        if (this.state.boards.length === 0) {
            return (React.createElement("div", { style: style }, this.state.info));
        }
        var elements = this.state.boards.map(function (item) { return (React.createElement(UserCenterMyFavoritesBoard_1.UserCenterMyFavoritesBoard, { UserFavoritesBoard: item })); });
        for (var i = 1; i < elements.length; i += 2) {
            elements.splice(i, 0, React.createElement("hr", null));
        }
        return (React.createElement("div", null, elements));
    };
    return UserCenterMyFavoritesBoards;
}(React.Component));
exports.UserCenterMyFavoritesBoards = UserCenterMyFavoritesBoards;


/***/ }),
/* 445 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var react_router_dom_1 = __webpack_require__(8);
var UserCenterMyFavoritesBoard = /** @class */ (function (_super) {
    __extends(UserCenterMyFavoritesBoard, _super);
    function UserCenterMyFavoritesBoard(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            buttonInfo: '取消关注',
            buttonIsDisabled: false,
            isFollowing: true
        };
        _this.unfollow = _this.unfollow.bind(_this);
        _this.follow = _this.follow.bind(_this);
        return _this;
    }
    UserCenterMyFavoritesBoard.prototype.unfollow = function () {
        return __awaiter(this, void 0, void 0, function () {
            var token, boardId, url, myHeaders, res, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.setState({
                            buttonIsDisabled: true,
                            buttonInfo: '取关中'
                        });
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 4, , 5]);
                        return [4 /*yield*/, Utility.getToken()];
                    case 2:
                        token = _a.sent();
                        boardId = this.props.UserFavoritesBoard.id;
                        url = "/me/custom-board/" + boardId;
                        myHeaders = new Headers();
                        myHeaders.append('Authorization', token);
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                method: 'DELETE',
                                headers: myHeaders
                            })];
                    case 3:
                        res = _a.sent();
                        if (res.status === 200) {
                            this.setState({
                                buttonIsDisabled: false,
                                buttonInfo: '重新关注',
                                isFollowing: false
                            });
                        }
                        else {
                            throw {};
                        }
                        return [3 /*break*/, 5];
                    case 4:
                        e_1 = _a.sent();
                        this.setState({
                            buttonIsDisabled: false,
                            buttonInfo: '取关失败',
                            isFollowing: true
                        });
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    UserCenterMyFavoritesBoard.prototype.follow = function () {
        return __awaiter(this, void 0, void 0, function () {
            var token, boardId, url, myHeaders, res, e_2;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.setState({
                            buttonIsDisabled: true,
                            buttonInfo: '关注中'
                        });
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 4, , 5]);
                        return [4 /*yield*/, Utility.getToken()];
                    case 2:
                        token = _a.sent();
                        boardId = this.props.UserFavoritesBoard.id;
                        url = "/me/custom-board/" + boardId;
                        myHeaders = new Headers();
                        myHeaders.append('Authorization', token);
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                method: 'PUT',
                                headers: myHeaders
                            })];
                    case 3:
                        res = _a.sent();
                        if (res.status === 200) {
                            this.setState({
                                buttonIsDisabled: false,
                                buttonInfo: '取消关注',
                                isFollowing: true
                            });
                        }
                        else {
                            throw {};
                        }
                        return [3 /*break*/, 5];
                    case 4:
                        e_2 = _a.sent();
                        this.setState({
                            buttonIsDisabled: false,
                            buttonInfo: '关注失败',
                            isFollowing: false
                        });
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    UserCenterMyFavoritesBoard.prototype.render = function () {
        return (React.createElement("div", { className: 'user-center-myfavorite-board' },
            React.createElement(react_router_dom_1.Link, { to: "/list/" + this.props.UserFavoritesBoard.id, title: this.props.UserFavoritesBoard.name },
                React.createElement("img", { src: "/images/_" + this.props.UserFavoritesBoard.name + ".png" })),
            React.createElement("div", { className: 'user-center-myfavorite-board-info' },
                React.createElement(react_router_dom_1.Link, { to: "/list/" + this.props.UserFavoritesBoard.id, title: this.props.UserFavoritesBoard.name },
                    React.createElement("h2", null, this.props.UserFavoritesBoard.name)),
                React.createElement("p", null,
                    "\u7248\u4E3B\uFF1A",
                    this.props.UserFavoritesBoard.boardMasters.join(' '),
                    " \u4ECA\u65E5\u4E3B\u9898 ",
                    this.props.UserFavoritesBoard.todayCount,
                    " / \u603B\u4E3B\u9898 ",
                    this.props.UserFavoritesBoard.topicCount)),
            React.createElement("button", { type: "button", className: this.state.isFollowing ? '' : 'user-follow-board', onClick: this.state.isFollowing ? this.unfollow : this.follow, disabled: this.state.buttonIsDisabled }, this.state.buttonInfo)));
    };
    return UserCenterMyFavoritesBoard;
}(React.Component));
exports.UserCenterMyFavoritesBoard = UserCenterMyFavoritesBoard;


/***/ }),
/* 446 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var UserCenterExactActivitiesPost_1 = __webpack_require__(86);
var AppState_1 = __webpack_require__(37);
var Utility = __webpack_require__(2);
var UserCenterPageCount_1 = __webpack_require__(87);
/**
 * 用户中心我收藏的帖子组件
 */
var UserCenterMyFavoritesPosts = /** @class */ (function (_super) {
    __extends(UserCenterMyFavoritesPosts, _super);
    function UserCenterMyFavoritesPosts(props) {
        var _this = _super.call(this, props) || this;
        _this.getInfo = function (page) {
            if (page === void 0) { page = 1; }
            return __awaiter(_this, void 0, void 0, function () {
                var token, url, myHeaders, res, data, userRecentPosts, i, totalPage, post, e_1;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            _a.trys.push([0, 4, , 5]);
                            window.scroll(0, 0);
                            this.setState({ isLoading: true });
                            return [4 /*yield*/, Utility.getToken()];
                        case 1:
                            token = _a.sent();
                            url = "/topic/me/favorite?from=" + (page - 1) * 10 + "&size=11";
                            myHeaders = new Headers();
                            myHeaders.append('Authorization', token);
                            return [4 /*yield*/, Utility.cc98Fetch(url, {
                                    headers: myHeaders
                                })];
                        case 2:
                            res = _a.sent();
                            if (res.status !== 200) {
                                throw new Error(res.status.toString());
                            }
                            return [4 /*yield*/, res.json()];
                        case 3:
                            data = _a.sent();
                            if (data.length === 0) {
                                this.setState({
                                    info: '没有主题',
                                    isLoading: false
                                });
                                return [2 /*return*/];
                            }
                            userRecentPosts = [], i = data.length, totalPage = void 0;
                            if (i <= 10) {
                                totalPage = Number.parseInt(this.props.match.params.page) || 1;
                                this.setState({ hasTotal: true });
                            }
                            else {
                                i = 10;
                                totalPage = Math.max((Number.parseInt(this.props.match.params.page) || 1) + 1, this.state.totalPage);
                            }
                            while (i--) {
                                post = new AppState_1.UserRecentPost();
                                post.board = data[i].boardName;
                                post.boardId = data[i].boardId;
                                post.content = data[i].title;
                                post.date = data[i].time.replace('T', ' ').slice(0, 19);
                                post.id = data[i].id;
                                userRecentPosts.unshift(post);
                            }
                            this.setState({
                                userRecentPosts: userRecentPosts,
                                totalPage: totalPage,
                                isLoading: false
                            });
                            return [3 /*break*/, 5];
                        case 4:
                            e_1 = _a.sent();
                            console.log('加载收藏失败');
                            return [3 /*break*/, 5];
                        case 5: return [2 /*return*/];
                    }
                });
            });
        };
        _this.state = {
            userRecentPosts: [],
            info: '加载中',
            totalPage: (Number.parseInt(_this.props.match.params.page) || 1) + 1,
            currentPage: _this.props.match.params.page,
            hasTotal: false,
            isLoading: true
        };
        return _this;
    }
    UserCenterMyFavoritesPosts.prototype.componentDidUpdate = function () {
        if (this.state.currentPage !== this.props.match.params.page) {
            this.setState({ currentPage: this.props.match.params.page });
            this.getInfo(this.props.match.params.page);
        }
    };
    UserCenterMyFavoritesPosts.prototype.componentDidMount = function () {
        this.getInfo(this.props.match.params.page);
    };
    UserCenterMyFavoritesPosts.prototype.render = function () {
        if (this.state.isLoading) {
            return React.createElement("div", { className: "user-center-loading" },
                React.createElement("p", { className: "fa fa-spinner fa-pulse fa-2x fa-fw" }));
        }
        if (!this.state.userRecentPosts || this.state.userRecentPosts.length === 0) {
            return (React.createElement("div", { className: "user-posts", style: { textAlign: 'center' } }, this.state.info));
        }
        //state转换为JSX
        var userRecentPosts = this.state.userRecentPosts.map(function (item) { return (React.createElement(UserCenterExactActivitiesPost_1.UserCenterExactActivitiesPost, { userRecentPost: item })); });
        //添加分隔线
        for (var i = 1; i < userRecentPosts.length; i += 2) {
            userRecentPosts.splice(i, 0, React.createElement("hr", null));
        }
        return (React.createElement("div", { className: "user-posts" },
            userRecentPosts,
            React.createElement(UserCenterPageCount_1.UserCenterPageCount, { currentPage: this.props.match.params.page || 1, totalPage: this.state.totalPage, href: "/usercenter/myfavorites/", hasTotal: this.state.hasTotal })));
    };
    return UserCenterMyFavoritesPosts;
}(React.Component));
exports.UserCenterMyFavoritesPosts = UserCenterMyFavoritesPosts;


/***/ }),
/* 447 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var MessageMessage_1 = __webpack_require__(448);
var MessageResponse_1 = __webpack_require__(453);
var MessageAttme_1 = __webpack_require__(455);
var MessageSystem_1 = __webpack_require__(457);
var Utility = __webpack_require__(2);
var react_router_dom_1 = __webpack_require__(8);
/**
 * 网站的主页面对象。
 */
var Message = /** @class */ (function (_super) {
    __extends(Message, _super);
    function Message() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Message.prototype.render = function () {
        var unreadCount = { totalCount: 0, replyCount: 0, atCount: 0, systemCount: 0, messageCount: 0 };
        if (Utility.getStorage("unreadCount")) {
            unreadCount = Utility.getStorage("unreadCount");
        }
        return (React.createElement("div", { className: "message-root" },
            React.createElement("div", { className: "message" },
                React.createElement("div", { className: "message-title" }, "\u6211\u7684\u6D88\u606F"),
                React.createElement(react_router_dom_1.BrowserRouter, null,
                    React.createElement("div", { className: "message-content" },
                        React.createElement("div", { className: "message-nav" },
                            React.createElement(react_router_dom_1.NavLink, { to: "/message/response" },
                                React.createElement("div", { id: "response", className: "nav-div" },
                                    "\u56DE\u590D\u6211\u7684",
                                    React.createElement("div", { className: "message-counterNav displaynone", id: "unreadCount-replyCount1" }, unreadCount.replyCount))),
                            React.createElement("hr", null),
                            React.createElement(react_router_dom_1.NavLink, { to: "/message/attme" },
                                React.createElement("div", { id: "attme", className: "nav-div" },
                                    "@ \u6211\u7684",
                                    React.createElement("div", { className: "message-counterNav displaynone", id: "unreadCount-atCount1" }, unreadCount.atCount))),
                            React.createElement("hr", null),
                            React.createElement(react_router_dom_1.NavLink, { to: "/message/system" },
                                React.createElement("div", { id: "system", className: "nav-div" },
                                    "\u7CFB\u7EDF\u901A\u77E5",
                                    React.createElement("div", { className: "message-counterNav displaynone", id: "unreadCount-systemCount1" }, unreadCount.systemCount))),
                            React.createElement("hr", null),
                            React.createElement(react_router_dom_1.NavLink, { to: "/message/message" },
                                React.createElement("div", { id: "message", className: "nav-div" },
                                    "\u6211\u7684\u79C1\u4FE1",
                                    React.createElement("div", { className: "message-counterNav displaynone", id: "unreadCount-messageCount1" }, unreadCount.messageCount)))),
                        React.createElement(react_router_dom_1.Route, { exact: true, path: "/message", component: MessageResponse_1.MessageResponse }),
                        React.createElement(react_router_dom_1.Route, { path: "/message/response/:page?", component: MessageResponse_1.MessageResponse }),
                        React.createElement(react_router_dom_1.Route, { path: "/message/attme/:page?", component: MessageAttme_1.MessageAttme }),
                        React.createElement(react_router_dom_1.Route, { path: "/message/system/:page?", component: MessageSystem_1.MessageSystem }),
                        React.createElement(react_router_dom_1.Route, { path: "/message/message/:page?", component: MessageMessage_1.MessageMessage }))))));
    };
    return Message;
}(React.Component));
exports.Message = Message;


/***/ }),
/* 448 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var React = __webpack_require__(1);
var MessagePerson_1 = __webpack_require__(449);
var MessageWindow_1 = __webpack_require__(450);
var Utility = __webpack_require__(2);
/**
 * 我的私信，包括最近联系人列表和聊天窗口两个组件
 */
var MessageMessage = /** @class */ (function (_super) {
    __extends(MessageMessage, _super);
    function MessageMessage(props) {
        var _this = _super.call(this, props) || this;
        //对this.stata.data进行批量化转化为JSX的函数，每个JSX可点击改变state里聊天对象的信息
        _this.coverMessagePerson = function (item) {
            var self = _this;
            var recentContact = Utility.getStorage('recentContact');
            function changeChatName() {
                return __awaiter(this, void 0, void 0, function () {
                    var i;
                    return __generator(this, function (_a) {
                        self.setState({ chatObj: item });
                        //给选中的聊天对象添加选中效果
                        $('.message-message-pList > div').removeClass('message-message-pFocus');
                        $("#contact_" + item.id).addClass('message-message-pFocus');
                        //如果选中该联系人，如果该联系人的最近一条私信为未读，则把最近一条私信设为已读，更新缓存并刷新界面
                        for (i in recentContact) {
                            if (recentContact[i].id === item.id && recentContact[i].isRead === false) {
                                recentContact[i].isRead = true;
                                Utility.setStorage("recentContact", recentContact);
                                self.setState({ data: recentContact });
                            }
                        }
                        return [2 /*return*/];
                    });
                });
            }
            ;
            return React.createElement("div", { onClick: changeChatName, id: "contact_" + item.id },
                React.createElement(MessagePerson_1.MessagePerson, { data: item }));
        };
        _this.state = {
            data: null,
            chatObj: null
        };
        //如果没有设置默认的state，render第一次渲染的时候state为空，MessageWindow组件会报错
        _this.getMoreContact = _this.getMoreContact.bind(_this);
        _this.onChange = _this.onChange.bind(_this);
        return _this;
    }
    MessageMessage.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var token, myInfo, recentContact, chatObj;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        token = Utility.getLocalStorage("accessToken");
                        myInfo = Utility.getLocalStorage("userInfo");
                        //如果有未读消息则清空联系人缓存
                        if ($('#unreadCount-messageCount1').attr('class') === 'message-counterNav') {
                            Utility.removeStorage('recentContact');
                        }
                        recentContact = Utility.getStorage('recentContact');
                        if (!(!recentContact || recentContact.length === 0)) return [3 /*break*/, 2];
                        console.log("没有获取到缓存，自己取");
                        return [4 /*yield*/, Utility.getRecentContact(0, 7, this.context.router)];
                    case 1:
                        recentContact = _a.sent();
                        console.log("取到了数据，然后呢");
                        console.log(recentContact);
                        Utility.setStorage("recentContact", recentContact);
                        _a.label = 2;
                    case 2: return [4 /*yield*/, Utility.sortContactList(recentContact, this.context.router)];
                    case 3:
                        //对联系人列表重新排序，看是否有从其他页面发起的聊天
                        recentContact = _a.sent();
                        console.log("联系人列表重新排序后");
                        console.log(recentContact);
                        if (recentContact) {
                            //默认第一个人为聊天对象
                            this.setState({ data: recentContact, chatObj: recentContact[0] });
                        }
                        chatObj = this.state.chatObj;
                        if (chatObj) {
                            $("#" + chatObj.name).addClass('message-message-pFocus');
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    /**
    *点击获取更多联系人
    */
    MessageMessage.prototype.getMoreContact = function () {
        return __awaiter(this, void 0, void 0, function () {
            var recentContact, newContact;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!($('#moreDone').css('display') == 'none')) return [3 /*break*/, 2];
                        $('#moreImg').removeClass('displaynone');
                        $('#moreDot').addClass('displaynone');
                        $('#moreShow').addClass('displaynone');
                        recentContact = Utility.getStorage("recentContact");
                        return [4 /*yield*/, Utility.getRecentContact(recentContact.length, 7, this.context.router)];
                    case 1:
                        newContact = _a.sent();
                        recentContact = recentContact.concat(newContact);
                        this.setState({ data: recentContact });
                        Utility.setStorage("recentContact", recentContact);
                        if (newContact.length < 7) {
                            $('#moreImg').addClass('displaynone');
                            $('#moreDone').removeClass('displaynone');
                        }
                        else {
                            $('#moreImg').addClass('displaynone');
                            $('#moreDot').removeClass('displaynone');
                            $('#moreShow').removeClass('displaynone');
                        }
                        _a.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    //传递到MessageWindow里的方法，在MessageWindow里控制MessageMessage刷新界面
    MessageMessage.prototype.onChange = function () {
        return __awaiter(this, void 0, void 0, function () {
            var recentContact;
            return __generator(this, function (_a) {
                recentContact = Utility.getStorage("recentContact");
                this.setState({ data: recentContact, chatObj: recentContact[0] });
                //选中第一个联系人
                $('.message-message-pList > div').removeClass('message-message-pFocus');
                $("#" + this.state.chatObj.name).addClass('message-message-pFocus');
                return [2 /*return*/];
            });
        });
    };
    MessageMessage.prototype.render = function () {
        //给我的私信添加选中样式
        $('.message-nav > div').removeClass('message-nav-focus');
        $('#message').addClass('message-nav-focus');
        //先看state里有没有数组，防止报错
        var data = this.state.data;
        var chatObj = this.state.chatObj;
        if (!data) {
            return (React.createElement("div", { className: "message-message" },
                React.createElement("div", { className: "message-message-people" },
                    React.createElement("div", { className: "message-message-pTitle" }, "\u8FD1\u671F\u79C1\u4FE1"),
                    React.createElement("div", { className: "message-message-pList" })),
                React.createElement(MessageWindow_1.MessageWindow, { data: null, onChange: this.onChange })));
        }
        else if (data.length > 6) {
            //创建联系人列表和聊天窗口
            return (React.createElement("div", { className: "message-message" },
                React.createElement("div", { className: "message-message-people" },
                    React.createElement("div", { className: "message-message-pTitle" }, "\u8FD1\u671F\u79C1\u4FE1"),
                    React.createElement("div", { className: "message-message-pList" },
                        data.map(this.coverMessagePerson),
                        React.createElement("div", { className: "message-message-plMore", onClick: this.getMoreContact },
                            React.createElement("img", { id: "moreImg", src: "http://file.cc98.org/uploadfile/2017/11/19/2348481046.gif", className: "displaynone" }),
                            React.createElement("div", { id: "moreDot" }, "..."),
                            React.createElement("div", { id: "moreShow" }, "\u663E\u793A\u66F4\u591A\u5C0F\u4F19\u4F34~"),
                            React.createElement("div", { id: "moreDone", className: "displaynone" }, "\u5C0F\u4F19\u4F34\u4EEC\u90FD\u51FA\u6765\u4E86~")))),
                React.createElement(MessageWindow_1.MessageWindow, { data: chatObj, onChange: this.onChange })));
        }
        else {
            return (React.createElement("div", { className: "message-message" },
                React.createElement("div", { className: "message-message-people" },
                    React.createElement("div", { className: "message-message-pTitle" }, "\u8FD1\u671F\u79C1\u4FE1"),
                    React.createElement("div", { className: "message-message-pList" }, data.map(this.coverMessagePerson))),
                React.createElement(MessageWindow_1.MessageWindow, { data: chatObj, onChange: this.onChange })));
        }
    };
    return MessageMessage;
}(React.Component));
exports.MessageMessage = MessageMessage;


/***/ }),
/* 449 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var React = __webpack_require__(1);
var UbbContainer_1 = __webpack_require__(15);
var MessagePerson = /** @class */ (function (_super) {
    __extends(MessagePerson, _super);
    function MessagePerson() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MessagePerson.prototype.render = function () {
        var data = this.props.data;
        if (!data.lastContent) {
            data.lastContent = '';
        }
        return (React.createElement("div", { className: "message-message-person" },
            React.createElement("img", { className: "message-message-pPortraitUrl", src: data.portraitUrl }),
            React.createElement("div", { className: "message-message-pInfo" },
                React.createElement("div", { className: "message-message-pName" }, data.name),
                React.createElement("div", { className: "message-message-pMessage" },
                    React.createElement(UbbContainer_1.UbbContainer, { code: data.lastContent }))),
            React.createElement(UnreadDot, { isRead: data.isRead })));
    };
    return MessagePerson;
}(React.Component));
exports.MessagePerson = MessagePerson;
var UnreadDot = /** @class */ (function (_super) {
    __extends(UnreadDot, _super);
    function UnreadDot() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    UnreadDot.prototype.render = function () {
        if (this.props.isRead) {
            return React.createElement("div", { className: "message-counterPerson displaynone" });
        }
        else {
            return React.createElement("div", { className: "message-counterPerson" });
        }
    };
    return UnreadDot;
}(React.Component));


/***/ }),
/* 450 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var React = __webpack_require__(1);
var MessageSender_1 = __webpack_require__(451);
var MessageReceiver_1 = __webpack_require__(452);
var Utility = __webpack_require__(2);
var MessageWindow = /** @class */ (function (_super) {
    __extends(MessageWindow, _super);
    function MessageWindow(props) {
        var _this = _super.call(this, props) || this;
        /**
        *单条私信的的样式
        */
        _this.coverMessageProps = function (item) {
            var userInfo = Utility.getLocalStorage("userInfo");
            var data = _this.props.data;
            if (item.receiverId == userInfo.id) {
                //如果我是接收者调用这个样式，处于左边
                return React.createElement(MessageReceiver_1.MessageReceiver, { id: item.id, senderName: data.name, senderId: data.id, receiverName: userInfo.name, receiverId: userInfo.id, senderPortraitUrl: data.portraitUrl, receiverPortraitUrl: userInfo.portraitUrl, content: item.content, isRead: item.isRead, time: item.time, showTime: item.showTime });
            }
            else if (item.senderId == userInfo.id) {
                //如果我是发送者调用这个样式，处于右边
                return React.createElement(MessageSender_1.MessageSender, { id: item.id, senderName: userInfo.name, senderId: userInfo.id, receiverName: data.name, receiverId: data.id, senderPortraitUrl: userInfo.portraitUrl, receiverPortraitUrl: data.portraitUrl, content: item.content, isRead: item.isRead, time: item.time, showTime: item.showTime });
            }
        };
        /*
        *举报按钮
        */
        _this.report = function () {
            alert('举报他人恶意私信请到【论坛事务】按照格式发帖投诉，记得截图保留证据，管理员会及时进行处理！感谢您对CC98的支持！');
        };
        _this.state = { data: [] };
        _this.handleScroll = _this.handleScroll.bind(_this);
        _this.getNewMessage = _this.getNewMessage.bind(_this);
        _this.postMessage = _this.postMessage.bind(_this);
        return _this;
    }
    MessageWindow.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.getData(this.props);
                return [2 /*return*/];
            });
        });
    };
    MessageWindow.prototype.getData = function (props) {
        return __awaiter(this, void 0, void 0, function () {
            var data, oldData, i, recentContact, i;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!props.data) return [3 /*break*/, 3];
                        return [4 /*yield*/, Utility.getRecentMessage(props.data.id, 0, 10, this.context.router)];
                    case 1:
                        data = _a.sent();
                        return [4 /*yield*/, Utility.refreshUnReadCount()];
                    case 2:
                        _a.sent();
                        if (data && data.length > 0) {
                            oldData = props.data.message;
                            if (oldData && oldData.length > 0) {
                                for (i in data) {
                                    if (data[i].id == oldData[0].id) {
                                        data = data.slice(0, i).concat(oldData);
                                        data = Utility.sortRecentMessage(data);
                                        break;
                                    }
                                }
                            }
                            recentContact = Utility.getStorage("recentContact");
                            if (recentContact) {
                                for (i in recentContact) {
                                    if (recentContact[i].id == props.data.id) {
                                        recentContact[i].message = data;
                                        break;
                                    }
                                }
                                Utility.setStorage("recentContact", recentContact);
                            }
                            this.setState({ data: data });
                        }
                        document.getElementById('messageContent').addEventListener('scroll', this.handleScroll);
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * 父控件props刷新后调用这个展现新的联系人的私信内容
     * @param nextProps
     */
    MessageWindow.prototype.componentWillReceiveProps = function (nextProps) {
        return __awaiter(this, void 0, void 0, function () {
            var scrollDiv;
            return __generator(this, function (_a) {
                scrollDiv = document.getElementById("messageContent");
                scrollDiv.scrollTop = scrollDiv.scrollHeight;
                this.getData(nextProps);
                return [2 /*return*/];
            });
        });
    };
    /*
    *处理聊天窗口滚动栏的函数，滚到顶部继续加载私信内容
    */
    MessageWindow.prototype.handleScroll = function () {
        return __awaiter(this, void 0, void 0, function () {
            var scrollTop, oldData, newData, data, recentContact, i;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        scrollTop = $('#messageContent')[0].scrollTop;
                        if (!(scrollTop == 0)) return [3 /*break*/, 3];
                        console.log("到顶啦");
                        $('#wcLoadingImg').removeClass("displaynone");
                        oldData = this.state.data;
                        return [4 /*yield*/, Utility.getRecentMessage(this.props.data.id, oldData.length, 10, this.context.router)];
                    case 1:
                        newData = _a.sent();
                        return [4 /*yield*/, Utility.refreshUnReadCount()];
                    case 2:
                        _a.sent();
                        //跟之前的拼接一下
                        if (newData && newData.length > 0) {
                            data = oldData.concat(newData);
                            data = Utility.sortRecentMessage(data);
                            this.setState({ data: data });
                            recentContact = Utility.getStorage("recentContact");
                            if (recentContact) {
                                for (i in recentContact) {
                                    if (recentContact[i].id == this.props.data.id) {
                                        recentContact[i].message = data;
                                        break;
                                    }
                                }
                                Utility.setStorage("recentContact", recentContact);
                            }
                        }
                        else {
                            $('#wcLoadingImg').addClass("displaynone");
                            $('#wcLoadingText').removeClass("displaynone");
                        }
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    /**
    *点击发送私信后，获取私信内容并刷新聊天界面
    */
    MessageWindow.prototype.getNewMessage = function () {
        return __awaiter(this, void 0, void 0, function () {
            var scrollDiv, data, oldData, recentContact, i, j, chatMan, indexData;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        scrollDiv = document.getElementById("messageContent");
                        scrollDiv.scrollTop = scrollDiv.scrollHeight;
                        return [4 /*yield*/, Utility.getRecentMessage(this.props.data.id, 0, 10, this.context.router)];
                    case 1:
                        data = _a.sent();
                        oldData = [];
                        recentContact = Utility.getStorage("recentContact");
                        if (recentContact) {
                            for (i = 0; i < recentContact.length; i++) {
                                if (recentContact[i].id == this.props.data.id) {
                                    oldData = recentContact[i].message;
                                    //新旧私信信息拼接一下
                                    if (oldData != []) {
                                        for (j = 0; j < data.length; j++) {
                                            if (data[j].id == oldData[0].id) {
                                                data = data.slice(0, j).concat(oldData);
                                                data = Utility.sortRecentMessage(data);
                                                break;
                                            }
                                        }
                                    }
                                    //更新与该聊天对象的message
                                    recentContact[i].message = data;
                                    recentContact[i].lastContent = data[0].content;
                                    break;
                                }
                            }
                            //联系对象不在联系人列表里，说明是从别的页面发起的私信聊天，聊天对象已经在联系人列表最上面了，只需存缓存并刷新聊天窗口
                            if (i == recentContact.length) {
                                chatMan = [this.props.data];
                                chatMan[0].message = data;
                                chatMan[0].lastContent = data[0].content;
                                recentContact = chatMan.concat(recentContact);
                                //刷新状态
                                Utility.setStorage("recentContact", recentContact);
                                this.props.onChange();
                            }
                            else if (i == 0) {
                                //刷新状态
                                Utility.setStorage("recentContact", recentContact);
                                this.setState({ data: data });
                                this.props.onChange();
                            }
                            else {
                                indexData = recentContact[i];
                                recentContact.splice(i, 1);
                                recentContact.unshift(indexData);
                                //刷新状态
                                Utility.setStorage("recentContact", recentContact);
                                this.props.onChange();
                            }
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    /**
    *处理文本输入框聚焦的函数，聚焦时移除提示文字
    */
    MessageWindow.prototype.handleFocus = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                $('#wPostNotice').addClass('displaynone');
                $('#wPostError').addClass('displaynone');
                $('#postContent')[0].focus();
                return [2 /*return*/];
            });
        });
    };
    /**
    *处理鼠标移出文本输入框的函数，移出时显示文字提示
    */
    MessageWindow.prototype.handleBlur = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                if ($('#postContent').val() == '') {
                    if ($('#wPostNotice').css('display') == 'none') {
                        $('#wPostNotice').removeClass('displaynone');
                    }
                    else {
                        $('#wPostNotice').addClass('displaynone');
                    }
                }
                return [2 /*return*/];
            });
        });
    };
    /**
    *发送私信内容的函数
    */
    MessageWindow.prototype.postMessage = function () {
        return __awaiter(this, void 0, void 0, function () {
            var str, reg, bodyObj, bodyContent, response;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        str = $('#postContent').val();
                        if (str === '') {
                            return [2 /*return*/];
                        }
                        console.log("str1", str);
                        reg = new RegExp("\n", "g");
                        //str = str.replace(reg, "＜br＞");
                        console.log("str2", str);
                        bodyObj = { receiverId: this.props.data.id, content: str };
                        bodyContent = JSON.stringify(bodyObj);
                        return [4 /*yield*/, Utility.sendMessage(bodyContent, this.context.router)];
                    case 1:
                        response = _a.sent();
                        if (response.status == 403) {
                            $('#postContent').val('');
                            $('#wPostError').removeClass('displaynone');
                            return [2 /*return*/];
                        }
                        //暂停0.2秒再执行
                        setTimeout(this.getNewMessage, 200);
                        //清空输入框
                        $('#postContent').val('');
                        return [2 /*return*/];
                }
            });
        });
    };
    ;
    MessageWindow.prototype.render = function () {
        var data = this.props.data;
        if (data) {
            return (React.createElement("div", { className: "message-message-window" },
                React.createElement("div", { className: "message-message-wHeader" },
                    React.createElement("div", { className: "message-message-wReport" }),
                    React.createElement("div", { className: "message-message-wTitle" },
                        "\u4E0E ",
                        data.name,
                        " \u7684\u79C1\u4FE1"),
                    React.createElement("div", { className: "message-message-wReport displaynone" },
                        React.createElement("button", { onClick: this.report }, "\u4E3E\u62A5"))),
                React.createElement("div", { className: "message-message-wContent", id: "messageContent" },
                    this.state.data.map(this.coverMessageProps),
                    React.createElement("div", { className: "message-message-wcLoading" },
                        React.createElement("img", { src: "http://file.cc98.org/uploadfile/2017/11/19/2348481046.gif", id: "wcLoadingImg", className: "displaynone" }),
                        React.createElement("div", { id: "wcLoadingText", className: "message-message-wcLoadingText displaynone" }, "\u6CA1\u6709\u66F4\u591A\u6D88\u606F\u4E86~"))),
                React.createElement("div", { className: "message-message-wPost" },
                    React.createElement("textarea", { className: "message-message-wPostArea", id: "postContent", onFocus: this.handleFocus, onBlur: this.handleBlur }),
                    React.createElement("div", { id: "wPostNotice", className: "message-message-wPostNotice", onClick: this.handleFocus }, "\u8BF7\u5728\u8FD9\u91CC\u586B\u5165\u60A8\u8981\u53D1\u9001\u7684\u79C1\u4FE1\u5185\u5BB9"),
                    React.createElement("div", { id: "wPostError", className: "message-message-wPostError displaynone", onClick: this.handleFocus }, "\u60A8\u7684\u53D1\u9001\u8FC7\u5FEB\uFF0C\u8BF7\u7A0D\u4F5C\u6B47\u606F~"),
                    React.createElement("button", { className: "message-message-wPostBtn", onClick: this.postMessage }, "\u53D1\u9001"))));
        }
        else {
            return (React.createElement("div", { className: "message-message-window" },
                React.createElement("div", { className: "message-message-wHeader" },
                    React.createElement("div", { className: "message-message-wReport" }),
                    React.createElement("div", { className: "message-message-wTitle" }, "\u65E0\u5F53\u524D\u804A\u5929\u5BF9\u8C61"),
                    React.createElement("div", { className: "message-message-wReport displaynone" },
                        React.createElement("button", { onClick: this.report }, "\u4E3E\u62A5"))),
                React.createElement("div", { className: "message-message-wContent", id: "messageContent" },
                    React.createElement("div", { className: "message-message-wcLoading" },
                        React.createElement("img", { src: "http://file.cc98.org/uploadfile/2017/11/19/2348481046.gif", id: "wcLoadingImg", className: "displaynone" }),
                        React.createElement("div", { id: "wcLoadingText", className: "message-message-wcLoadingText displaynone" }, "\u6CA1\u6709\u66F4\u591A\u6D88\u606F\u4E86~"))),
                React.createElement("div", { className: "message-message-wPost" },
                    React.createElement("textarea", { className: "message-message-wPostArea", id: "postContent", onFocus: this.handleFocus, onBlur: this.handleBlur }),
                    React.createElement("div", { id: "wPostNotice", className: "message-message-wPostNotice", onClick: this.handleFocus }, "\u8BF7\u5728\u8FD9\u91CC\u586B\u5165\u60A8\u8981\u53D1\u9001\u7684\u79C1\u4FE1\u5185\u5BB9"),
                    React.createElement("div", { id: "wPostError", className: "message-message-wPostError displaynone", onClick: this.handleFocus }, "\u60A8\u7684\u53D1\u9001\u8FC7\u5FEB\uFF0C\u8BF7\u7A0D\u4F5C\u6B47\u606F~"),
                    React.createElement("button", { className: "message-message-wPostBtn", onClick: this.postMessage }, "\u53D1\u9001"))));
        }
    };
    return MessageWindow;
}(React.Component));
exports.MessageWindow = MessageWindow;


/***/ }),
/* 451 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var React = __webpack_require__(1);
var UbbContainer_1 = __webpack_require__(15);
var Utility = __webpack_require__(2);
var MessageSender = /** @class */ (function (_super) {
    __extends(MessageSender, _super);
    function MessageSender() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MessageSender.prototype.render = function () {
        var userUrl = "/user/id/" + this.props.senderId;
        var timeClassName;
        if (this.props.showTime) {
            timeClassName = "message-message-wcTime";
        }
        else {
            timeClassName = "displaynone";
        }
        var content = Utility.autoAddUrl(this.props.content);
        return (React.createElement("div", { className: "message-message-wc" },
            React.createElement("div", { className: timeClassName }, moment(this.props.time).format('YYYY-MM-DD HH:mm:ss')),
            React.createElement("div", { className: "message-message-wcSender" },
                React.createElement("a", { href: userUrl, target: "_blank" },
                    React.createElement("img", { className: "message-message-wcPortraitUrl", src: this.props.senderPortraitUrl })),
                React.createElement("div", { className: "message-message-wcContent" },
                    React.createElement("div", { id: String(this.props.id), className: "message-message-wcText" },
                        React.createElement(UbbContainer_1.UbbContainer, { code: content }))),
                React.createElement("div", { className: "message-message-wcRead1" },
                    React.createElement("div", { className: "message-message-wcRead2" }, this.props.isRead ? '已读' : '未读')))));
    };
    return MessageSender;
}(React.Component));
exports.MessageSender = MessageSender;


/***/ }),
/* 452 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var React = __webpack_require__(1);
var UbbContainer_1 = __webpack_require__(15);
var Utility = __webpack_require__(2);
var MessageReceiver = /** @class */ (function (_super) {
    __extends(MessageReceiver, _super);
    function MessageReceiver() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MessageReceiver.prototype.render = function () {
        var userUrl = "/user/id/" + this.props.senderId;
        var timeClassName;
        if (this.props.showTime) {
            timeClassName = "message-message-wcTime";
        }
        else {
            timeClassName = "displaynone";
        }
        var content = Utility.autoAddUrl(this.props.content);
        return (React.createElement("div", { className: "message-message-wc" },
            React.createElement("div", { className: timeClassName }, moment(this.props.time).format('YYYY-MM-DD HH:mm:ss')),
            React.createElement("div", { className: "message-message-wcReceiver" },
                React.createElement("a", { href: userUrl, target: "_blank" },
                    React.createElement("img", { className: "message-message-wcPortraitUrl", src: this.props.senderPortraitUrl })),
                React.createElement("div", { className: "message-message-wcContent" },
                    React.createElement("div", { className: "message-message-wcText", id: String(this.props.id) },
                        React.createElement(UbbContainer_1.UbbContainer, { code: content }))))));
    };
    return MessageReceiver;
}(React.Component));
exports.MessageReceiver = MessageReceiver;


/***/ }),
/* 453 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var React = __webpack_require__(1);
var MessageResponsebox_1 = __webpack_require__(454);
var Utility = __webpack_require__(2);
var Pager_1 = __webpack_require__(57);
/**
 * 我的私信，包括最近联系人列表和聊天窗口两个组件
 */
var MessageResponse = /** @class */ (function (_super) {
    __extends(MessageResponse, _super);
    function MessageResponse(props, context) {
        var _this = _super.call(this, props, context) || this;
        _this.coverMessageResponse = function (item) {
            return React.createElement(MessageResponsebox_1.MessageResponsebox, { id: item.id, type: item.type, time: item.time, topicId: item.topicId, topicTitle: item.topicTitle, floor: item.floor, userId: item.userId, userName: item.userName, boardId: item.boardId, boardName: item.boardName, isRead: item.isRead });
        };
        _this.state = {
            data: [],
            from: 0,
            loading: true,
            totalPage: 1
        };
        return _this;
    }
    MessageResponse.prototype.getData = function (props) {
        return __awaiter(this, void 0, void 0, function () {
            var totalCount, index, totalPage, curPage, data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        //给我的回复添加选中样式
                        $('.message-nav > div').removeClass('message-nav-focus');
                        $('#response').addClass('message-nav-focus');
                        return [4 /*yield*/, Utility.getTotalPage(1)];
                    case 1:
                        totalCount = _a.sent();
                        index = totalCount / 7;
                        totalPage = parseInt(index) + 1;
                        console.log("总消息条数和页码", totalCount, totalPage);
                        curPage = props.match.params.page - 1;
                        if (!curPage || curPage < 0) {
                            curPage = 0;
                        }
                        return [4 /*yield*/, Utility.getMessageResponse(curPage * 7, 7, this.context.router)];
                    case 2:
                        data = _a.sent();
                        console.log("获取到了回复消息", data);
                        if (data) {
                            this.setState({ data: data, from: curPage + 1, totalPage: totalPage });
                        }
                        //更新消息数量
                        return [4 /*yield*/, Utility.refreshUnReadCount()];
                    case 3:
                        //更新消息数量
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    MessageResponse.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.getData(this.props);
                return [2 /*return*/];
            });
        });
    };
    MessageResponse.prototype.componentWillReceiveProps = function (nextProps) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.getData(nextProps);
                return [2 /*return*/];
            });
        });
    };
    MessageResponse.prototype.render = function () {
        return (React.createElement("div", { className: "message-right" },
            React.createElement("div", { className: "message-response" }, this.state.data.map(this.coverMessageResponse)),
            React.createElement("div", { className: "message-pager" },
                React.createElement(Pager_1.Pager, { url: "/message/response/", page: this.state.from, totalPage: this.state.totalPage }))));
    };
    return MessageResponse;
}(React.Component));
exports.MessageResponse = MessageResponse;


/***/ }),
/* 454 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var React = __webpack_require__(1);
var UbbContainer_1 = __webpack_require__(15);
var MessageResponsebox = /** @class */ (function (_super) {
    __extends(MessageResponsebox, _super);
    function MessageResponsebox() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MessageResponsebox.prototype.render = function () {
        var host = window.location.host;
        var boardName = "[url=http://" + host + "/list/" + this.props.boardId + "][color=dodgerblue]" + this.props.boardName + "[/color][/url]";
        var a = (this.props.floor / 10) + 1;
        var b = parseInt(a);
        var c = this.props.floor + 10 - b * 10;
        var content;
        if (this.props.isRead) {
            var userName = "[url=http://" + host + "/user/name/" + this.props.userName + "][color=gray]" + this.props.userName + "[/color][/url]";
            var title = "[url=http://" + host + "/topic/" + this.props.topicId + "/" + b + "#" + c + "][color=blue]" + this.props.topicTitle + "[/color][/url]";
            content = " " + userName + " [color=gray]\u5728\u300A" + title + "\u300B\u4E2D\u56DE\u590D\u4E86\u4F60\u3002[/color]";
        }
        else {
            var userName = "[url=http://" + host + "/user/name/" + this.props.userName + "][color=gray][b]" + this.props.userName + "[/b][/color][/url]";
            var title = "[url=http://" + host + "/topic/" + this.props.topicId + "/" + b + "#" + c + "][color=blue]" + this.props.topicTitle + "[/color][/url]";
            content = " " + userName + " [color=gray][b]\u5728\u300A" + title + "\u300B\u4E2D\u56DE\u590D\u4E86\u4F60\u3002[/b][/color]";
        }
        return (React.createElement("div", { className: "message-response-box" },
            React.createElement("div", { className: "message-response-box-middle" },
                React.createElement("div", { className: "message-response-box-middle1" },
                    React.createElement("div", { className: "message-response-box-middle-title" },
                        React.createElement(UbbContainer_1.UbbContainer, { code: boardName })),
                    React.createElement("div", { className: "message-response-box-middle-date" }, moment(this.props.time).format('YYYY-MM-DD HH:mm:ss'))),
                React.createElement("div", { className: "message-response-box-middle-content" },
                    React.createElement(UbbContainer_1.UbbContainer, { code: content })))));
    };
    return MessageResponsebox;
}(React.Component));
exports.MessageResponsebox = MessageResponsebox;


/***/ }),
/* 455 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var React = __webpack_require__(1);
var MessageAttmebox_1 = __webpack_require__(456);
var Utility = __webpack_require__(2);
var Pager_1 = __webpack_require__(57);
/**
 * 我的私信，包括最近联系人列表和聊天窗口两个组件
 */
var MessageAttme = /** @class */ (function (_super) {
    __extends(MessageAttme, _super);
    function MessageAttme(props) {
        var _this = _super.call(this, props) || this;
        _this.coverMessageAttme = function (item) {
            return React.createElement(MessageAttmebox_1.MessageAttmebox, { id: item.id, type: item.type, time: item.time, topicId: item.topicId, topicTitle: item.topicTitle, floor: item.floor, userId: item.userId, userName: item.userName, boardId: item.boardId, boardName: item.boardName, isRead: item.isRead });
        };
        _this.state = {
            data: [],
            from: 0,
            loading: true,
            totalPage: 1
        };
        return _this;
    }
    MessageAttme.prototype.getData = function (props) {
        return __awaiter(this, void 0, void 0, function () {
            var totalCount, index, totalPage, curPage, data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        //给@我的添加选中样式
                        //给我的回复添加选中样式
                        $('.message-nav > div').removeClass('message-nav-focus');
                        $('#attme').addClass('message-nav-focus');
                        return [4 /*yield*/, Utility.getTotalPage(2)];
                    case 1:
                        totalCount = _a.sent();
                        index = totalCount / 7;
                        totalPage = parseInt(index) + 1;
                        console.log("总消息条数和页码", totalCount, totalPage);
                        curPage = props.match.params.page - 1;
                        if (!curPage || curPage < 0) {
                            curPage = 0;
                        }
                        return [4 /*yield*/, Utility.getMessageAttme(curPage * 7, 7, this.context.router)];
                    case 2:
                        data = _a.sent();
                        console.log("获取到了回复消息", data);
                        if (data) {
                            this.setState({ data: data, from: curPage + 1, totalPage: totalPage });
                        }
                        //更新消息数量
                        return [4 /*yield*/, Utility.refreshUnReadCount()];
                    case 3:
                        //更新消息数量
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    MessageAttme.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.getData(this.props);
                return [2 /*return*/];
            });
        });
    };
    MessageAttme.prototype.componentWillReceiveProps = function (nextProps) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.getData(nextProps);
                return [2 /*return*/];
            });
        });
    };
    MessageAttme.prototype.render = function () {
        return (React.createElement("div", { className: "message-right" },
            React.createElement("div", { className: "message-response" }, this.state.data.map(this.coverMessageAttme)),
            React.createElement("div", { className: "message-pager" },
                React.createElement(Pager_1.Pager, { url: "/message/attme/", page: this.state.from, totalPage: this.state.totalPage }))));
    };
    return MessageAttme;
}(React.Component));
exports.MessageAttme = MessageAttme;


/***/ }),
/* 456 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var React = __webpack_require__(1);
var UbbContainer_1 = __webpack_require__(15);
var MessageAttmebox = /** @class */ (function (_super) {
    __extends(MessageAttmebox, _super);
    function MessageAttmebox() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MessageAttmebox.prototype.render = function () {
        var host = window.location.host;
        var boardName = "[url=http://" + host + "/list/" + this.props.boardId + "][color=dodgerblue]" + this.props.boardName + "[/color][/url]";
        var a = (this.props.floor / 10) + 1;
        var b = parseInt(a);
        var c = this.props.floor + 10 - b * 10;
        var content;
        if (this.props.isRead) {
            var userName = "[url=http://" + host + "/user/name/" + this.props.userName + "][color=gray]" + this.props.userName + "[/color][/url]";
            var title = "[url=http://" + host + "/topic/" + this.props.topicId + "/" + b + "#" + c + "][color=blue]" + this.props.topicTitle + "[/color][/url]";
            content = " " + userName + " [color=gray]\u5728\u300A" + title + "\u300B\u4E2D@\u4E86\u4F60\u3002[/color]";
        }
        else {
            var userName = "[url=http://" + host + "/user/name/" + this.props.userName + "][color=gray][b]" + this.props.userName + "[/b][/color][/url]";
            var title = "[url=http://" + host + "/topic/" + this.props.topicId + "/" + b + "#" + c + "][color=blue]" + this.props.topicTitle + "[/color][/url]";
            content = " " + userName + " [color=gray][b]\u5728\u300A" + title + "\u300B\u4E2D@\u4E86\u4F60\u3002[/b][/color]";
        }
        return (React.createElement("div", { className: "message-response-box" },
            React.createElement("div", { className: "message-response-box-middle" },
                React.createElement("div", { className: "message-response-box-middle1" },
                    React.createElement("div", { className: "message-response-box-middle-title" },
                        React.createElement(UbbContainer_1.UbbContainer, { code: boardName })),
                    React.createElement("div", { className: "message-response-box-middle-date" }, moment(this.props.time).format('YYYY-MM-DD HH:mm:ss'))),
                React.createElement("div", { className: "message-response-box-middle-content" },
                    React.createElement(UbbContainer_1.UbbContainer, { code: content })))));
    };
    return MessageAttmebox;
}(React.Component));
exports.MessageAttmebox = MessageAttmebox;


/***/ }),
/* 457 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var React = __webpack_require__(1);
var MessageSystembox_1 = __webpack_require__(458);
var Utility = __webpack_require__(2);
var Pager_1 = __webpack_require__(57);
/**
 * 我的私信，包括最近联系人列表和聊天窗口两个组件
 */
var MessageSystem = /** @class */ (function (_super) {
    __extends(MessageSystem, _super);
    function MessageSystem(props) {
        var _this = _super.call(this, props) || this;
        _this.coverMessageSystem = function (item) {
            return React.createElement(MessageSystembox_1.MessageSystembox, { id: item.id, type: item.type, title: item.title, content: item.content, time: item.time, topicId: item.topicId, floor: item.floor, isRead: item.isRead });
        };
        _this.state = {
            data: [],
            from: 0,
            loading: true,
            totalPage: 1
        };
        return _this;
    }
    MessageSystem.prototype.getData = function (props) {
        return __awaiter(this, void 0, void 0, function () {
            var totalCount, index, totalPage, curPage, data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        //给系统消息添加选中样式
                        $('.message-nav > div').removeClass('message-nav-focus');
                        $('#system').addClass('message-nav-focus');
                        return [4 /*yield*/, Utility.getTotalPage(3)];
                    case 1:
                        totalCount = _a.sent();
                        index = totalCount / 7;
                        totalPage = parseInt(index) + 1;
                        curPage = props.match.params.page - 1;
                        if (!curPage || curPage < 0) {
                            curPage = 0;
                        }
                        return [4 /*yield*/, Utility.getMessageSystem(curPage * 7, 7, this.context.router)];
                    case 2:
                        data = _a.sent();
                        console.log("这是获取到的处理后系统消息");
                        console.log(data);
                        if (data) {
                            this.setState({ data: data, from: curPage + 1, totalPage: totalPage });
                        }
                        //更新消息数量
                        return [4 /*yield*/, Utility.refreshUnReadCount()];
                    case 3:
                        //更新消息数量
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    MessageSystem.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.getData(this.props);
                return [2 /*return*/];
            });
        });
    };
    MessageSystem.prototype.componentWillReceiveProps = function (nextProps) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.getData(nextProps);
                return [2 /*return*/];
            });
        });
    };
    MessageSystem.prototype.render = function () {
        return (React.createElement("div", { className: "message-right" },
            React.createElement("div", { className: "message-system" }, this.state.data.map(this.coverMessageSystem)),
            React.createElement("div", { className: "message-pager" },
                React.createElement(Pager_1.Pager, { url: "/message/system/", page: this.state.from, totalPage: this.state.totalPage }))));
    };
    return MessageSystem;
}(React.Component));
exports.MessageSystem = MessageSystem;


/***/ }),
/* 458 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var React = __webpack_require__(1);
var UbbContainer_1 = __webpack_require__(15);
var MessageSystembox = /** @class */ (function (_super) {
    __extends(MessageSystembox, _super);
    function MessageSystembox() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MessageSystembox.prototype.render = function () {
        var content;
        if (this.props.topicId) {
            var host = window.location.host;
            if (this.props.floor) {
                var a = (this.props.floor / 10) + 1;
                var b = parseInt(a);
                var c = this.props.floor + 10 - b * 10;
                if (this.props.isRead) {
                    content = "[url=http://" + host + "/topic/" + this.props.topicId + "/" + b + "#" + c + "][color=gray]" + this.props.content + "[/color][/url]";
                }
                else {
                    content = "[url=http://" + host + "/topic/" + this.props.topicId + "/" + b + "#" + c + "][b][color=black]" + this.props.content + "[/color][/b][/url]";
                }
            }
            else {
                if (this.props.isRead) {
                    content = "[url=http://" + host + "/topic/" + this.props.topicId + "][color=gray]" + this.props.content + "[/color][/url]";
                }
                else {
                    content = "[url=http://" + host + "/topic/" + this.props.topicId + "][b][color=black]" + this.props.content + "[/color][/b][/url]";
                }
            }
        }
        else {
            if (this.props.isRead) {
                content = "[color=gray]" + this.props.content + "[/color]";
            }
            else {
                content = "[color=black][b]" + this.props.content + "[/b][/color]";
            }
        }
        return (React.createElement("div", { className: "message-system-box" },
            React.createElement("div", { className: "message-system-box-bar" },
                React.createElement("div", { className: "message-system-box-title" }, this.props.title),
                React.createElement("div", { className: "message-system-box-date" }, moment(this.props.time).format('YYYY-MM-DD HH:mm:ss'))),
            React.createElement("div", { className: "message-system-box-content" },
                React.createElement(UbbContainer_1.UbbContainer, { code: content }))));
    };
    return MessageSystembox;
}(React.Component));
exports.MessageSystembox = MessageSystembox;


/***/ }),
/* 459 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var FocusTopicSingle_1 = __webpack_require__(117);
var Utility = __webpack_require__(2);
/**
 * 表示全站最新主题列表
 */
var AllNewTopic = /** @class */ (function (_super) {
    __extends(AllNewTopic, _super);
    /**
     * 构造函数
     * @param props
     */
    function AllNewTopic(props) {
        var _this = _super.call(this, props) || this;
        //先看一下有没有缓存的帖子数据
        var data = Utility.getStorage("AllNewTopic");
        if (!data) {
            data = [];
        }
        _this.state = {
            data: data,
            from: 0,
            loading: true
        };
        _this.handleScroll = _this.handleScroll.bind(_this);
        return _this;
    }
    /**
     * 进入立即获取20条新帖的数据，同时为滚动条添加监听事件
     */
    AllNewTopic.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.getAllNewTopic(0, this.context.router)];
                    case 1:
                        data = _a.sent();
                        //缓存获取到的数据                      
                        Utility.setStorage("AllNewTopic", data);
                        this.setState({ data: data, from: data.length });
                        //滚动条监听
                        document.addEventListener('scroll', this.handleScroll);
                        return [2 /*return*/];
                }
            });
        });
    };
    /**
     * 移除DOM时，为滚动条移除监听事件
     */
    AllNewTopic.prototype.componentWillUnmount = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                document.removeEventListener('scroll', this.handleScroll);
                return [2 /*return*/];
            });
        });
    };
    /**
     * 处理滚动的函数
     */
    AllNewTopic.prototype.handleScroll = function () {
        return __awaiter(this, void 0, void 0, function () {
            var newData, err_1, data, i;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(Utility.isBottom() && this.state.loading)) return [3 /*break*/, 5];
                        /**
                        *查看新帖数目大于100条时不再继续加载
                        */
                        if (this.state.from >= 99) {
                            $('#focus-topic-loading').addClass('displaynone');
                            $('#focus-topic-loaddone').removeClass('displaynone');
                            return [2 /*return*/];
                        }
                        /**
                        *发出第一条fetch请求前将this.state.loading设置为false，防止后面重复发送fetch请求
                        */
                        this.setState({ loading: false });
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, Utility.getAllNewTopic(this.state.from, this.context.router)];
                    case 2:
                        newData = _a.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        err_1 = _a.sent();
                        /**
                        *如果出错，直接结束这次请求，同时将this.state.loading设置为true，后续才可以再次发送fetch请求
                        */
                        this.setState({ loading: true });
                        return [2 /*return*/];
                    case 4:
                        /**
                        *如果正确获取到数据，则添加新数据，翻页+1，同时this.state.loading设置为true，后续才可以再次发送fetch请求
                        */
                        //拼接时防止出现重复帖子
                        if (newData && newData.length > 0) {
                            data = this.state.data;
                            for (i = 0; i < data.length; i++) {
                                if (data[i].id === newData[0].id) {
                                    break;
                                }
                            }
                            data = data.slice(0, i).concat(newData);
                            this.setState({ data: data, from: data.length, loading: true });
                            Utility.setStorage("AllNewTopic", data);
                        }
                        _a.label = 5;
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * 将主题排列好
     */
    AllNewTopic.prototype.render = function () {
        return (React.createElement("div", { className: "focus-root" },
            React.createElement("div", { className: "focus" },
                React.createElement("div", { className: "focus-allNewTopic" },
                    React.createElement("i", { className: "fa fa-home", "aria-hidden": "true" }),
                    "\u9996\u9875/\u5168\u7AD9\u65B0\u5E16"),
                React.createElement("div", { className: "focus-topic-area" },
                    React.createElement("div", { className: "focus-topic-topicArea" }, this.state.data.map(coverFocusPost)),
                    React.createElement("div", { className: "focus-topic-loading", id: "focus-topic-loading" },
                        React.createElement("img", { src: "http://file.cc98.org/uploadfile/2017/12/20/6514723843.gif" })),
                    React.createElement("div", { className: "focus-topic-loaddone displaynone", id: "focus-topic-loaddone" }, "\u6CA1\u6709\u66F4\u591A\u5E16\u5B50\u5566~")))));
    };
    return AllNewTopic;
}(React.Component));
exports.AllNewTopic = AllNewTopic;
/**
* 单个主题数据转换成单个主题组件
*/
function coverFocusPost(item) {
    return React.createElement(FocusTopicSingle_1.FocusTopicSingle, { title: item.title, hitCount: item.hitCount, id: item.id, boardId: item.boardId, boardName: item.boardName, replyCount: item.replyCount, userId: item.userId, userName: item.userName, portraitUrl: item.portraitUrl, time: item.time, likeCount: item.likeCount, dislikeCount: item.dislikeCount, fanCount: item.fanCount, lastPostUser: item.lastPostUser, lastPostTime: item.lastPostTime, tag1: item.tag1, tag2: item.tag2 });
}


/***/ }),
/* 460 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var React = __webpack_require__(1);
var FocusBoardArea_1 = __webpack_require__(461);
var FocusUserArea_1 = __webpack_require__(462);
var react_router_dom_1 = __webpack_require__(8);
var Focus = /** @class */ (function (_super) {
    __extends(Focus, _super);
    function Focus() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * 从上往下分别为：页面标题(关注版面或者关注用户)、关注版面列表区域、主题列表区域，分别用三个组件表示
     */
    Focus.prototype.render = function () {
        return (React.createElement("div", { className: "focus-root" },
            React.createElement(react_router_dom_1.BrowserRouter, null,
                React.createElement("div", { className: "focus" },
                    React.createElement("div", { className: "focus-nav" },
                        React.createElement(react_router_dom_1.Link, { to: '/focus/board' },
                            " ",
                            React.createElement("div", { className: "focus-title", id: "myFocusBoard" }, "\u5173\u6CE8\u7248\u9762")),
                        React.createElement(react_router_dom_1.Link, { to: '/focus/user' },
                            " ",
                            React.createElement("div", { className: "focus-title", id: "myFocusUser" }, "\u5173\u6CE8\u7528\u6237"))),
                    React.createElement(react_router_dom_1.Route, { exact: true, path: "/focus", component: FocusBoardArea_1.FocusBoardArea }),
                    React.createElement(react_router_dom_1.Route, { path: '/focus/board', component: FocusBoardArea_1.FocusBoardArea }),
                    React.createElement(react_router_dom_1.Route, { path: '/focus/user', component: FocusUserArea_1.FocusUserArea })))));
    };
    return Focus;
}(React.Component));
exports.Focus = Focus;


/***/ }),
/* 461 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var React = __webpack_require__(1);
var FocusTopicArea_1 = __webpack_require__(170);
var Utility = __webpack_require__(2);
/**
 * 表示我关注的版面列表区域
 */
var FocusBoardArea = /** @class */ (function (_super) {
    __extends(FocusBoardArea, _super);
    /**
     * 构造函数
     * @param props
     */
    function FocusBoardArea(props) {
        var _this = _super.call(this, props) || this;
        _this.coverFocusBoard = function (item) {
            //点击版面名称会显示相应版面的帖子
            return React.createElement("div", { className: "focus-board", id: "focusBoard_" + item.id }, item.name);
        };
        //先看一下有没有缓存的帖子数据
        var data = Utility.getStorage("focusBoardList");
        if (!data) {
            data = [];
        }
        var currentFocusBoard = Utility.getStorage("currentFocusBoard");
        var currentBoardId = 0;
        var currentBoardName = "全站帖子";
        if (currentFocusBoard) {
            currentBoardId = currentFocusBoard.boardId;
            currentBoardName = currentFocusBoard.boardName;
        }
        _this.state = {
            data: data,
            currentBoardId: currentBoardId,
            currentBoardName: currentBoardName
        };
        return _this;
    }
    /**
     * 将我关注的版面排列好
     */
    FocusBoardArea.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var data, token, userInfo, boardid, headers, _i, boardid_1, item, boardName, self;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        //给关注版面添加选中效果
                        $('#myFocusUser').removeClass('focus-title-hover');
                        $('#myFocusBoard').addClass('focus-title-hover');
                        data = Utility.getStorage("focusBoardList");
                        if (!data) return [3 /*break*/, 1];
                        this.setState({ data: data });
                        return [3 /*break*/, 6];
                    case 1:
                        data = [];
                        token = Utility.getLocalStorage("accessToken");
                        userInfo = Utility.getLocalStorage("userInfo");
                        boardid = userInfo.customBoards;
                        console.log(boardid);
                        headers = new Headers();
                        headers.append('Authorization', token);
                        _i = 0, boardid_1 = boardid;
                        _a.label = 2;
                    case 2:
                        if (!(_i < boardid_1.length)) return [3 /*break*/, 5];
                        item = boardid_1[_i];
                        return [4 /*yield*/, Utility.getBoardName(item)];
                    case 3:
                        boardName = _a.sent();
                        data.push({ id: item, name: boardName });
                        _a.label = 4;
                    case 4:
                        _i++;
                        return [3 /*break*/, 2];
                    case 5:
                        this.setState({ data: data });
                        //存到缓存里
                        Utility.setStorage("focusBoardList", data);
                        _a.label = 6;
                    case 6:
                        //给初始选中版面添加选中效果
                        $("#focusBoard_" + this.state.currentBoardId).addClass('focus-hover');
                        self = this;
                        $('.focus-board').click(function () {
                            var boardId = this.id.slice(11);
                            //如果没被点击过，就设为选中，并更新下方帖子列表
                            if (this.className === 'focus-board') {
                                var currentFocusBoard = { boardId: boardId, boardName: this.innerHTML };
                                Utility.setStorage("currentFocusBoard", currentFocusBoard);
                                $('.focus-board').removeClass('focus-hover');
                                $(this).addClass('focus-hover');
                                self.setState({ currentBoardId: parseInt(boardId), currentBoardName: this.innerHTML });
                            }
                            else if (this.className === 'focus-board focus-hover') {
                                Utility.removeStorage('currentFocusBoard');
                                $(this).removeClass('focus-hover');
                                $("#focusBoard_0").addClass('focus-hover');
                                self.setState({ currentBoardId: 0, currentBoardName: "全部帖子" });
                            }
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    FocusBoardArea.prototype.render = function () {
        return React.createElement("div", null,
            React.createElement("div", { className: "focus-board-area" },
                React.createElement("div", { className: "focus-board", id: "focusBoard_0" }, "\u5168\u90E8\u5E16\u5B50"),
                this.state.data.map(this.coverFocusBoard)),
            React.createElement(FocusTopicArea_1.FocusTopicArea, { id: this.state.currentBoardId, name: this.state.currentBoardName }));
    };
    return FocusBoardArea;
}(React.Component));
exports.FocusBoardArea = FocusBoardArea;


/***/ }),
/* 462 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var React = __webpack_require__(1);
;
var FocusTopicArea_1 = __webpack_require__(170);
/**
 * 表示我关注的版面的主题列表
 */
var FocusUserArea = /** @class */ (function (_super) {
    __extends(FocusUserArea, _super);
    function FocusUserArea() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    FocusUserArea.prototype.componentDidMount = function () {
        //给关注版面添加选中效果
        $('#myFocusBoard').removeClass('focus-title-hover');
        $('#myFocusUser').addClass('focus-title-hover');
    };
    FocusUserArea.prototype.render = function () {
        return React.createElement("div", null,
            React.createElement(FocusTopicArea_1.FocusTopicArea, { id: -1, name: "关注用户" }));
    };
    return FocusUserArea;
}(React.Component));
exports.FocusUserArea = FocusUserArea;


/***/ }),
/* 463 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var $ = __webpack_require__(35);
var react_redux_1 = __webpack_require__(26);
var Actions_1 = __webpack_require__(36);
var react_router_dom_1 = __webpack_require__(8);
var SignalR_1 = __webpack_require__(171);
var DropDownConnect = /** @class */ (function (_super) {
    __extends(DropDownConnect, _super);
    function DropDownConnect(props) {
        var _this = _super.call(this, props) || this;
        _this.state = ({
            hoverElement: null,
            unreadCount: {
                totalCount: 0,
                atCount: 0,
                messageCount: 0,
                replyCount: 0,
                systemCount: 0
            }
        });
        _this.handleNotifyMessageReceive = _this.handleNotifyMessageReceive.bind(_this);
        return _this;
    }
    /**
     * 这里是signalR的部分
     */
    DropDownConnect.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                /**
                 * SignalR的开始与结束全部由header来控制
                 * 其他组件只负责添加handler即可
                 */
                SignalR_1.default.addListener('NotifyMessageReceive', this.handleNotifyMessageReceive);
                SignalR_1.default.addListener('NotifyNotificationReceive', this.handleNotifyMessageReceive);
                if (this.props.isLogOn) {
                    SignalR_1.default.start();
                }
                /**
                 * 第一次加载的时候获取初始状态
                 */
                this.handleNotifyMessageReceive();
                return [2 /*return*/];
            });
        });
    };
    DropDownConnect.prototype.componentWillUnmount = function () {
        SignalR_1.default.removeListener('NotifyMessageReceive', this.handleNotifyMessageReceive);
        SignalR_1.default.removeListener('NotifyNotificationReceive', this.handleNotifyMessageReceive);
    };
    DropDownConnect.prototype.handleNotifyMessageReceive = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        console.log("接收到了signalr消息");
                        //更新消息数量
                        return [4 /*yield*/, Utility.refreshUnReadCount()];
                    case 1:
                        //更新消息数量
                        _a.sent();
                        this.setState({
                            unreadCount: Utility.getStorage("unreadCount")
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    DropDownConnect.prototype.componentWillReceiveProps = function (nextProps) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                if (!this.props.isLogOn && nextProps.isLogOn) {
                    //如果用户重新登录则开始signalR链接
                    SignalR_1.default.start();
                }
                else if (!nextProps.isLogOn) {
                    //如果用户注销则关闭signalR链接
                    SignalR_1.default.stop();
                }
                return [2 /*return*/];
            });
        });
    };
    DropDownConnect.prototype.logOff = function () {
        this.handleMouseEvent('mouseout', "userName");
        Utility.removeLocalStorage("accessToken");
        Utility.removeLocalStorage("userName");
        Utility.removeLocalStorage("password");
        Utility.removeLocalStorage("userInfo");
        Utility.removeStorage("all");
        this.props.logOff(); //更新redux中的状态
    };
    DropDownConnect.prototype.handleMouseEvent = function (type, className) {
        switch (type) {
            case 'mouseover': {
                this.setState({
                    hoverElement: className
                });
                break;
            }
            case 'mouseout': {
                this.setState({
                    hoverElement: null
                });
                break;
            }
        }
    };
    DropDownConnect.prototype.render = function () {
        var _this = this;
        if (this.props.isLogOn) {
            var style = {
                display: 'block',
                transitionDuration: '.2s',
                height: '0px'
            };
            var unreadCount = { totalCount: 0, replyCount: 0, atCount: 0, systemCount: 0, messageCount: 0 };
            if (Utility.getStorage("unreadCount")) {
                unreadCount = Utility.getStorage("unreadCount");
            }
            return (React.createElement("div", { id: "dropdown" },
                React.createElement("div", { className: "box" },
                    React.createElement("div", { className: "userInfo" },
                        React.createElement("div", { className: "userImg" },
                            React.createElement("img", { src: this.props.userInfo.portraitUrl })),
                        React.createElement("div", { className: "userName", onMouseOut: function (e) { _this.handleMouseEvent(e.type, "userName"); }, onMouseOver: function (e) { _this.handleMouseEvent(e.type, "userName"); } }, this.props.userInfo.name)),
                    React.createElement("div", { className: "topBarText" },
                        " ",
                        React.createElement(react_router_dom_1.Link, { to: "/", style: { color: '#fff' } }, "\u9996\u9875")),
                    React.createElement("div", { className: "topBarText", id: "userMessage", onMouseOut: function (e) { _this.handleMouseEvent(e.type, 'topBarText'); }, onMouseOver: function (e) { _this.handleMouseEvent(e.type, 'topBarText'); } },
                        " ",
                        React.createElement(react_router_dom_1.Link, { to: "/message", className: "messageTopBar" },
                            "\u6D88\u606F",
                            React.createElement("div", { className: "message-counter displaynone", id: "unreadCount-totalCount" }, unreadCount.totalCount))),
                    React.createElement("div", { className: "topBarText" },
                        " ",
                        React.createElement(react_router_dom_1.Link, { to: "/focus", style: { color: '#fff' } }, "\u5173\u6CE8")),
                    React.createElement("div", { className: "topBarText" },
                        " ",
                        React.createElement(react_router_dom_1.Link, { to: "/newTopics", style: { color: '#fff' } }, "\u65B0\u5E16")),
                    this.props.userInfo.privilege === '管理员' ? React.createElement("div", { className: "topBarText" },
                        " ",
                        React.createElement(react_router_dom_1.Link, { to: "/sitemanage", style: { color: '#fff' } }, "\u5168\u7AD9\u7BA1\u7406")) : null,
                    React.createElement(react_router_dom_1.Link, { to: "/boardList" },
                        React.createElement("div", { className: "boardListLink", style: { margin: '0 0 0 10px' } },
                            React.createElement("div", { style: { marginTop: '16px', color: '#fff' } }, "\u7248\u9762")))),
                React.createElement("div", { className: "dropDownSubBox", onMouseOut: function (e) { _this.handleMouseEvent(e.type, "userName"); }, onMouseOver: function (e) { _this.handleMouseEvent(e.type, "userName"); }, style: __assign({}, style, { overflow: 'hidden', height: this.state.hoverElement === 'userName' ? '90px' : '0px' }) },
                    React.createElement("ul", { className: "dropDownSub", style: { display: 'inherit' } },
                        React.createElement(react_router_dom_1.Link, { to: "/usercenter" },
                            " ",
                            React.createElement("li", null, "\u4E2A\u4EBA\u4E2D\u5FC3")),
                        React.createElement(react_router_dom_1.Link, { to: "/signin" },
                            React.createElement("li", null, "\u7B7E\u5230")),
                        React.createElement("li", { onClick: this.logOff.bind(this) }, "\u6CE8\u9500"))),
                React.createElement("div", { className: "dropDownSubBoxMessage", onMouseOut: function (e) { _this.handleMouseEvent(e.type, "topBarText"); }, onMouseOver: function (e) { _this.handleMouseEvent(e.type, "topBarText"); }, style: __assign({}, style, { overflow: 'hidden', zIndex: 100, position: 'absolute', top: '55px', height: this.state.hoverElement === 'topBarText' ? '120px' : '0px' }) },
                    React.createElement("ul", { className: "dropDownSubMessage", style: { display: 'inherit' } },
                        React.createElement("a", { href: "/message/response" },
                            React.createElement("li", null,
                                "\u56DE\u590D\u6211\u7684",
                                React.createElement("div", { className: "message-counterLi displaynone", id: "unreadCount-replyCount" }, unreadCount.replyCount))),
                        React.createElement("a", { href: "/message/attme" },
                            React.createElement("li", null,
                                "@ \u6211\u7684",
                                React.createElement("div", { className: "message-counterLi displaynone", id: "unreadCount-atCount" }, unreadCount.atCount))),
                        React.createElement("a", { href: "/message/system" },
                            React.createElement("li", null,
                                "\u7CFB\u7EDF\u901A\u77E5",
                                React.createElement("div", { className: "message-counterLi displaynone", id: "unreadCount-systemCount" }, unreadCount.systemCount))),
                        React.createElement("a", { href: "/message/message" },
                            React.createElement("li", null,
                                "\u6211\u7684\u79C1\u4FE1",
                                React.createElement("div", { className: "message-counterLi displaynone", id: "unreadCount-messageCount" }, unreadCount.messageCount)))))));
        }
        else {
            return React.createElement("div", { id: "dropdown" },
                React.createElement("div", { className: "box" },
                    React.createElement("div", { className: "topBarText", style: { margin: '0 10px 0 10px' } },
                        " ",
                        React.createElement(react_router_dom_1.Link, { to: "/", style: { color: '#fff' } }, "\u9996\u9875")),
                    React.createElement("div", { className: "topBarText", style: { margin: '0 10px 0 10px' } },
                        " ",
                        React.createElement(react_router_dom_1.Link, { to: "/logOn", style: { color: '#fff' } }, "\u767B\u5F55")),
                    React.createElement("div", { className: "topBarText", style: { margin: '0 10px 0 10px' } },
                        " ",
                        React.createElement(react_router_dom_1.Link, { to: "/newTopics", style: { color: '#fff' } }, "\u65B0\u5E16")),
                    React.createElement(react_router_dom_1.Link, { to: "/boardList" },
                        React.createElement("div", { className: "boardListLink", style: { margin: '0 0 0 10px' } },
                            React.createElement("div", { style: { marginTop: '16px', color: '#fff' } }, "\u7248\u9762")))));
        }
    };
    return DropDownConnect;
}(React.Component));
// 这里是董松松的修改，加了redux
function mapState(state) {
    return {
        userInfo: state.userInfo.currentUserInfo,
        isLogOn: state.userInfo.isLogOn
    };
}
function mapDispatch(dispatch) {
    return {
        logOff: function () {
            dispatch(Actions_1.userLogOff());
        }
    };
}
var DropDown = react_redux_1.connect(mapState, mapDispatch)(DropDownConnect);
//到此结束
var SearchBeforeConnent = /** @class */ (function (_super) {
    __extends(SearchBeforeConnent, _super);
    function SearchBeforeConnent() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    SearchBeforeConnent.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            var searchBoxSelect, downArrow, searchBoxSub, searchIco, searchBoxLi, url1, url2, url3, boardId, boardName, topicId, response, searchInfo, self;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        searchBoxSelect = $('.searchBoxSelect');
                        downArrow = $('.downArrow');
                        searchBoxSub = $('.searchBoxSub');
                        searchIco = $('.searchIco');
                        searchBoxLi = searchBoxSub.find('li');
                        url1 = location.href.match(/\/topic\/(\S+)\/+?/);
                        url2 = location.href.match(/\/list\/(\S+)\/?/);
                        url3 = location.href.match(/\/(search)/);
                        boardId = 0;
                        boardName = '全站';
                        if (!url1) return [3 /*break*/, 3];
                        topicId = url1[1];
                        return [4 /*yield*/, Utility.getTopicInfo(topicId)];
                    case 1:
                        response = _a.sent();
                        boardId = response.boardId;
                        return [4 /*yield*/, Utility.getBoardName(boardId)];
                    case 2:
                        boardName = _a.sent();
                        return [3 /*break*/, 6];
                    case 3:
                        if (!url2) return [3 /*break*/, 5];
                        boardId = parseInt(url2[1]);
                        return [4 /*yield*/, Utility.getBoardName(boardId)];
                    case 4:
                        boardName = _a.sent();
                        return [3 /*break*/, 6];
                    case 5:
                        if (url3) {
                            searchInfo = Utility.getStorage("searchInfo");
                            if (searchInfo) {
                                boardId = searchInfo.boardId;
                                boardName = searchInfo.boardName;
                            }
                        }
                        _a.label = 6;
                    case 6:
                        $(document).click(function () {
                            searchBoxSub.css('display', 'none');
                        });
                        searchBoxSelect.click(function () {
                            if (searchBoxSub.css('display') === 'block')
                                searchBoxSub.css('display', 'none');
                            else
                                searchBoxSub.css('display', 'block');
                            return false; //阻止事件冒泡
                        });
                        downArrow.click(function () {
                            if (searchBoxSub.css('display') === 'block')
                                searchBoxSub.css('display', 'none');
                            else
                                searchBoxSub.css('display', 'block');
                            return false; //阻止事件冒泡
                        });
                        /*在一个对象上触发某类事件（比如单击onclick事件），如果此对象定义了此事件的处理程序，那么此事件就会调用这个处理程序，
                        如果没有定义此事件处理程序或者事件返回true，那么这个事件会向这个对象的父级对象传播，从里到外，直至它被处理（父级对象所有同类事件都将被激活），
                        或者它到达了对象层次的最顶层，即document对象（有些浏览器是window）。*/
                        searchBoxLi.click(function () {
                            searchBoxSelect.text($(this).text());
                        });
                        searchBoxLi.mouseover(function () {
                            this.className = 'hover';
                        });
                        searchBoxLi.mouseout(function () {
                            this.className = '';
                        });
                        self = this;
                        searchIco.click(function () { return __awaiter(_this, void 0, void 0, function () {
                            var val, words, searchInfo, words, searchInfo, data, host, boardResult;
                            return __generator(this, function (_a) {
                                switch (_a.label) {
                                    case 0:
                                        val = $('#searchText').val();
                                        if (!(val && val != '')) return [3 /*break*/, 5];
                                        if (!(searchBoxSelect.text() == '主题' || searchBoxSelect.text() == '全站')) return [3 /*break*/, 1];
                                        words = val.split(' ');
                                        if (words) {
                                            if (words.length > 5) {
                                                alert("关键词过多，请不要超过5个！");
                                            }
                                            else {
                                                searchInfo = { boardId: 0, boardName: '全站', words: words };
                                                Utility.setStorage('searchInfo', searchInfo);
                                                this.props.history.push('/search');
                                            }
                                        }
                                        return [3 /*break*/, 5];
                                    case 1:
                                        if (!(searchBoxSelect.text() == '版内')) return [3 /*break*/, 2];
                                        words = val.split(' ');
                                        if (words) {
                                            if (words.length > 5) {
                                                alert("关键词过多，请不要超过5个！");
                                            }
                                            else {
                                                searchInfo = { boardId: boardId, boardName: boardName, words: words };
                                                Utility.setStorage('searchInfo', searchInfo);
                                                this.props.history.push('/search');
                                            }
                                        }
                                        return [3 /*break*/, 5];
                                    case 2:
                                        if (!(searchBoxSelect.text() == '用户')) return [3 /*break*/, 4];
                                        return [4 /*yield*/, Utility.getUserInfoByName(val)];
                                    case 3:
                                        data = _a.sent();
                                        if (data) {
                                            this.props.history.push("/user/id/" + data.id);
                                        }
                                        else {
                                            Utility.removeStorage('searchInfo');
                                            this.props.history.push('/search');
                                        }
                                        return [3 /*break*/, 5];
                                    case 4:
                                        if (searchBoxSelect.text() == '版面') {
                                            host = window.location.host;
                                            boardResult = Utility.getBoardId(val);
                                            if (boardResult) {
                                                if (boardResult == []) {
                                                    Utility.removeStorage('searchInfo');
                                                    this.props.history.push('/search');
                                                }
                                                else if (boardResult.length == 1) {
                                                    this.props.history.push("/list/" + boardResult[0].id);
                                                }
                                                else if (boardResult.length > 1) {
                                                    Utility.setStorage("searchBoardInfo", boardResult);
                                                    this.props.history.push('/searchBoard');
                                                }
                                                else {
                                                    Utility.removeStorage('searchInfo');
                                                    this.props.history.push('/search');
                                                }
                                            }
                                            else {
                                                Utility.removeStorage('searchInfo');
                                                this.props.history.push('/search');
                                            }
                                        }
                                        _a.label = 5;
                                    case 5: return [2 /*return*/];
                                }
                            });
                        }); });
                        return [2 /*return*/];
                }
            });
        });
    };
    SearchBeforeConnent.prototype.keypress_submit = function (e) {
        var evt = window.event || e;
        if (evt.keyCode === 13) {
            console.log("按下了回车");
            $('.searchIco').click();
        }
    };
    SearchBeforeConnent.prototype.render = function () {
        //查看当前是全站还是某版
        var url1 = location.href.match(/\/topic\/(\S+)\/+?/);
        var url2 = location.href.match(/\/list\/(\S+)\/?/);
        var url3 = location.href.match(/\/(search)/);
        var flag = 1;
        if (url1) {
            console.log(url1[1]);
            flag = 0;
        }
        else if (url2) {
            console.log(url2[1]);
            flag = 0;
        }
        else if (url3) {
            var searchInfo = Utility.getStorage("searchInfo");
            if (searchInfo) {
                if (searchInfo.boardId != 0) {
                    flag = 0;
                }
            }
        }
        if (flag) {
            return React.createElement("div", { id: "search" },
                React.createElement("div", { className: "box" },
                    React.createElement("div", { className: "searchBoxSelect" }, "\u4E3B\u9898"),
                    React.createElement("div", { className: "downArrow" },
                        React.createElement("img", { src: "/images/downArrow.png", width: "12", height: "12" })),
                    React.createElement("input", { id: "searchText", type: "text", placeholder: "猜猜能搜到什么...", onKeyPress: this.keypress_submit }),
                    React.createElement("div", { className: "searchIco" },
                        React.createElement("img", { src: "/images/searchIco.ico", width: "15", height: "15" }))),
                React.createElement("ul", { className: "searchBoxSub" },
                    React.createElement("li", null, "\u4E3B\u9898"),
                    React.createElement("li", null, "\u7528\u6237"),
                    React.createElement("li", null, "\u7248\u9762")));
        }
        else {
            return React.createElement("div", { id: "search" },
                React.createElement("div", { className: "box" },
                    React.createElement("div", { className: "searchBoxSelect" }, "\u7248\u5185"),
                    React.createElement("div", { className: "downArrow" },
                        React.createElement("img", { src: "/images/downArrow.png", width: "12", height: "12" })),
                    React.createElement("input", { id: "searchText", type: "text", placeholder: "猜猜能搜到什么..." }),
                    React.createElement("div", { className: "searchIco" },
                        React.createElement("img", { src: "/images/searchIco.ico", width: "15", height: "15" }))),
                React.createElement("ul", { className: "searchBoxSub" },
                    React.createElement("li", null, "\u7248\u5185"),
                    React.createElement("li", null, "\u5168\u7AD9"),
                    React.createElement("li", null, "\u7528\u6237"),
                    React.createElement("li", null, "\u7248\u9762")));
        }
    };
    return SearchBeforeConnent;
}(React.Component));
exports.SearchBeforeConnent = SearchBeforeConnent;
exports.Search = react_router_dom_1.withRouter(SearchBeforeConnent);
var Header = /** @class */ (function (_super) {
    __extends(Header, _super);
    function Header() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Header.prototype.render = function () {
        return React.createElement("div", { className: "header" },
            React.createElement("div", { className: "topBar" },
                React.createElement("div", { className: "topBarRow" },
                    React.createElement("div", { className: "row" },
                        React.createElement("div", { style: { margin: '10px 0 0 0' } },
                            " ",
                            React.createElement(react_router_dom_1.Link, { to: "/" },
                                React.createElement("img", { src: "/images/矢量智能对象.ico" }))),
                        React.createElement("div", { style: { margin: '15px 0 0 5px' } },
                            React.createElement(react_router_dom_1.Link, { to: "/" },
                                React.createElement("img", { src: "/images/CC98.ico" })))),
                    React.createElement(DropDown, null))),
            React.createElement("div", { className: "headerContent" },
                React.createElement("div", { className: "headerRow" },
                    React.createElement("div", { className: "linkBar" },
                        React.createElement("div", { className: "row", style: { margin: '0 10px 0 10px' } },
                            React.createElement("div", { style: { margin: '3px 10px 0 0' } },
                                React.createElement("img", { src: "/images/网盘.ico", width: "15", height: "15" })),
                            React.createElement("div", null,
                                React.createElement("a", { href: "http://share.cc98.org/", className: "linkText" }, "\u7F51\u76D8"))),
                        React.createElement("div", { className: "row", style: { margin: '0 10px 0 10px' } },
                            React.createElement("div", { style: { margin: '3px 10px 0 0' } },
                                React.createElement("img", { src: "/images/游戏.ico", width: "15", height: "15" })),
                            React.createElement("div", null,
                                React.createElement("a", { href: "http://www.cc98.org/game.asp", className: "linkText" }, "\u6E38\u620F"))),
                        React.createElement("div", { className: "row", style: { margin: '0 10px 0 10px' } },
                            React.createElement("div", { style: { margin: '3px 10px 0 0' } },
                                React.createElement("img", { src: "/images/勋章.ico", width: "15", height: "15" })),
                            React.createElement("div", null,
                                React.createElement("a", { href: "http://v2.cc98.org/app/medalmanager.aspx", className: "linkText" }, "\u52CB\u7AE0"))),
                        React.createElement("div", { className: "row", style: { margin: '0 10px 0 10px' } },
                            React.createElement("div", { style: { margin: '3px 10px 0 0' } },
                                React.createElement("img", { src: "/images/抽卡.ico", width: "15", height: "15" })),
                            React.createElement("div", null,
                                React.createElement("a", { href: "http://card.cc98.org/", className: "linkText" }, "\u62BD\u5361"))),
                        React.createElement("div", { className: "row", style: { margin: '0 10px 0 10px' } },
                            React.createElement("div", { style: { margin: '3px 10px 0 0' } },
                                React.createElement("img", { src: "/images/gamble.ico", width: "15", height: "15" })),
                            React.createElement("div", null,
                                React.createElement("a", { href: "http://gaming.cc98.org", className: "linkText" }, "\u7ADE\u731C"))),
                        React.createElement("div", { className: "row", style: { margin: '0 10px 0 10px' } },
                            React.createElement("div", { style: { margin: '3px 10px 0 0' } },
                                React.createElement("img", { src: "/images/NexusHD.jpg", width: "15", height: "15" })),
                            React.createElement("div", null,
                                React.createElement("a", { href: "http://www.nexushd.org", className: "linkText" }, "NexusHD")))),
                    React.createElement(react_router_dom_1.Route, { component: exports.Search }))));
    };
    return Header;
}(React.Component));
exports.Header = Header;


/***/ }),
/* 464 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) .NET Foundation. All rights reserved.
// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
__export(__webpack_require__(118));
__export(__webpack_require__(173));
__export(__webpack_require__(465));
__export(__webpack_require__(119));
__export(__webpack_require__(88));
__export(__webpack_require__(468));


/***/ }),
/* 465 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) .NET Foundation. All rights reserved.
// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var HttpConnection_1 = __webpack_require__(118);
var Observable_1 = __webpack_require__(466);
var JsonHubProtocol_1 = __webpack_require__(174);
var Formatters_1 = __webpack_require__(120);
var Base64EncodedHubProtocol_1 = __webpack_require__(467);
var ILogger_1 = __webpack_require__(63);
var Loggers_1 = __webpack_require__(88);
var Transports_1 = __webpack_require__(119);
exports.TransportType = Transports_1.TransportType;
var HttpConnection_2 = __webpack_require__(118);
exports.HttpConnection = HttpConnection_2.HttpConnection;
var JsonHubProtocol_2 = __webpack_require__(174);
exports.JsonHubProtocol = JsonHubProtocol_2.JsonHubProtocol;
var ILogger_2 = __webpack_require__(63);
exports.LogLevel = ILogger_2.LogLevel;
var Loggers_2 = __webpack_require__(88);
exports.ConsoleLogger = Loggers_2.ConsoleLogger;
exports.NullLogger = Loggers_2.NullLogger;
var DEFAULT_SERVER_TIMEOUT_IN_MS = 30 * 1000;
var HubConnection = /** @class */ (function () {
    function HubConnection(urlOrConnection, options) {
        if (options === void 0) { options = {}; }
        var _this = this;
        options = options || {};
        this.serverTimeoutInMilliseconds = options.serverTimeoutInMilliseconds || DEFAULT_SERVER_TIMEOUT_IN_MS;
        if (typeof urlOrConnection === "string") {
            this.connection = new HttpConnection_1.HttpConnection(urlOrConnection, options);
        }
        else {
            this.connection = urlOrConnection;
        }
        this.logger = Loggers_1.LoggerFactory.createLogger(options.logging);
        this.protocol = options.protocol || new JsonHubProtocol_1.JsonHubProtocol();
        this.connection.onreceive = function (data) { return _this.processIncomingData(data); };
        this.connection.onclose = function (error) { return _this.connectionClosed(error); };
        this.callbacks = new Map();
        this.methods = new Map();
        this.closedCallbacks = [];
        this.id = 0;
    }
    HubConnection.prototype.processIncomingData = function (data) {
        if (this.timeoutHandle !== undefined) {
            clearTimeout(this.timeoutHandle);
        }
        // Parse the messages
        var messages = this.protocol.parseMessages(data);
        for (var i = 0; i < messages.length; ++i) {
            var message = messages[i];
            switch (message.type) {
                case 1 /* Invocation */:
                    this.invokeClientMethod(message);
                    break;
                case 2 /* StreamItem */:
                case 3 /* Completion */:
                    var callback = this.callbacks.get(message.invocationId);
                    if (callback != null) {
                        if (message.type === 3 /* Completion */) {
                            this.callbacks.delete(message.invocationId);
                        }
                        callback(message);
                    }
                    break;
                case 6 /* Ping */:
                    // Don't care about pings
                    break;
                default:
                    this.logger.log(ILogger_1.LogLevel.Warning, "Invalid message type: " + data);
                    break;
            }
        }
        this.configureTimeout();
    };
    HubConnection.prototype.configureTimeout = function () {
        var _this = this;
        if (!this.connection.features || !this.connection.features.inherentKeepAlive) {
            // Set the timeout timer
            this.timeoutHandle = setTimeout(function () { return _this.serverTimeout(); }, this.serverTimeoutInMilliseconds);
        }
    };
    HubConnection.prototype.serverTimeout = function () {
        // The server hasn't talked to us in a while. It doesn't like us anymore ... :(
        // Terminate the connection
        this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."));
    };
    HubConnection.prototype.invokeClientMethod = function (invocationMessage) {
        var _this = this;
        var methods = this.methods.get(invocationMessage.target.toLowerCase());
        if (methods) {
            methods.forEach(function (m) { return m.apply(_this, invocationMessage.arguments); });
            if (!invocationMessage.nonblocking) {
                // TODO: send result back to the server?
            }
        }
        else {
            this.logger.log(ILogger_1.LogLevel.Warning, "No client method with the name '" + invocationMessage.target + "' found.");
        }
    };
    HubConnection.prototype.connectionClosed = function (error) {
        var _this = this;
        this.callbacks.forEach(function (callback) {
            callback(undefined, error ? error : new Error("Invocation canceled due to connection being closed."));
        });
        this.callbacks.clear();
        this.closedCallbacks.forEach(function (c) { return c.apply(_this, [error]); });
    };
    HubConnection.prototype.start = function () {
        return __awaiter(this, void 0, void 0, function () {
            var requestedTransferMode, actualTransferMode;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        requestedTransferMode = (this.protocol.type === 2 /* Binary */)
                            ? 2 /* Binary */
                            : 1 /* Text */;
                        this.connection.features.transferMode = requestedTransferMode;
                        return [4 /*yield*/, this.connection.start()];
                    case 1:
                        _a.sent();
                        actualTransferMode = this.connection.features.transferMode;
                        return [4 /*yield*/, this.connection.send(Formatters_1.TextMessageFormat.write(JSON.stringify({ protocol: this.protocol.name })))];
                    case 2:
                        _a.sent();
                        this.logger.log(ILogger_1.LogLevel.Information, "Using HubProtocol '" + this.protocol.name + "'.");
                        if (requestedTransferMode === 2 /* Binary */ && actualTransferMode === 1 /* Text */) {
                            this.protocol = new Base64EncodedHubProtocol_1.Base64EncodedHubProtocol(this.protocol);
                        }
                        this.configureTimeout();
                        return [2 /*return*/];
                }
            });
        });
    };
    HubConnection.prototype.stop = function () {
        if (this.timeoutHandle) {
            clearTimeout(this.timeoutHandle);
        }
        return this.connection.stop();
    };
    HubConnection.prototype.stream = function (methodName) {
        var _this = this;
        var args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            args[_i - 1] = arguments[_i];
        }
        var invocationDescriptor = this.createStreamInvocation(methodName, args);
        var subject = new Observable_1.Subject();
        this.callbacks.set(invocationDescriptor.invocationId, function (invocationEvent, error) {
            if (error) {
                subject.error(error);
                return;
            }
            if (invocationEvent.type === 3 /* Completion */) {
                var completionMessage = invocationEvent;
                if (completionMessage.error) {
                    subject.error(new Error(completionMessage.error));
                }
                else {
                    subject.complete();
                }
            }
            else {
                subject.next(invocationEvent.item);
            }
        });
        var message = this.protocol.writeMessage(invocationDescriptor);
        this.connection.send(message)
            .catch(function (e) {
            subject.error(e);
            _this.callbacks.delete(invocationDescriptor.invocationId);
        });
        return subject;
    };
    HubConnection.prototype.send = function (methodName) {
        var args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            args[_i - 1] = arguments[_i];
        }
        var invocationDescriptor = this.createInvocation(methodName, args, true);
        var message = this.protocol.writeMessage(invocationDescriptor);
        return this.connection.send(message);
    };
    HubConnection.prototype.invoke = function (methodName) {
        var _this = this;
        var args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            args[_i - 1] = arguments[_i];
        }
        var invocationDescriptor = this.createInvocation(methodName, args, false);
        var p = new Promise(function (resolve, reject) {
            _this.callbacks.set(invocationDescriptor.invocationId, function (invocationEvent, error) {
                if (error) {
                    reject(error);
                    return;
                }
                if (invocationEvent.type === 3 /* Completion */) {
                    var completionMessage = invocationEvent;
                    if (completionMessage.error) {
                        reject(new Error(completionMessage.error));
                    }
                    else {
                        resolve(completionMessage.result);
                    }
                }
                else {
                    reject(new Error("Unexpected message type: " + invocationEvent.type));
                }
            });
            var message = _this.protocol.writeMessage(invocationDescriptor);
            _this.connection.send(message)
                .catch(function (e) {
                reject(e);
                _this.callbacks.delete(invocationDescriptor.invocationId);
            });
        });
        return p;
    };
    HubConnection.prototype.on = function (methodName, method) {
        if (!methodName || !method) {
            return;
        }
        methodName = methodName.toLowerCase();
        if (!this.methods.has(methodName)) {
            this.methods.set(methodName, []);
        }
        this.methods.get(methodName).push(method);
    };
    HubConnection.prototype.off = function (methodName, method) {
        if (!methodName || !method) {
            return;
        }
        methodName = methodName.toLowerCase();
        var handlers = this.methods.get(methodName);
        if (!handlers) {
            return;
        }
        var removeIdx = handlers.indexOf(method);
        if (removeIdx != -1) {
            handlers.splice(removeIdx, 1);
        }
    };
    HubConnection.prototype.onclose = function (callback) {
        if (callback) {
            this.closedCallbacks.push(callback);
        }
    };
    HubConnection.prototype.createInvocation = function (methodName, args, nonblocking) {
        var id = this.id;
        this.id++;
        return {
            type: 1 /* Invocation */,
            invocationId: id.toString(),
            target: methodName,
            arguments: args,
            nonblocking: nonblocking
        };
    };
    HubConnection.prototype.createStreamInvocation = function (methodName, args) {
        var id = this.id;
        this.id++;
        return {
            type: 4 /* StreamInvocation */,
            invocationId: id.toString(),
            target: methodName,
            arguments: args,
        };
    };
    return HubConnection;
}());
exports.HubConnection = HubConnection;


/***/ }),
/* 466 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) .NET Foundation. All rights reserved.
// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
Object.defineProperty(exports, "__esModule", { value: true });
var Subject = /** @class */ (function () {
    function Subject() {
        this.observers = [];
    }
    Subject.prototype.next = function (item) {
        for (var _i = 0, _a = this.observers; _i < _a.length; _i++) {
            var observer = _a[_i];
            observer.next(item);
        }
    };
    Subject.prototype.error = function (err) {
        for (var _i = 0, _a = this.observers; _i < _a.length; _i++) {
            var observer = _a[_i];
            if (observer.error) {
                observer.error(err);
            }
        }
    };
    Subject.prototype.complete = function () {
        for (var _i = 0, _a = this.observers; _i < _a.length; _i++) {
            var observer = _a[_i];
            if (observer.complete) {
                observer.complete();
            }
        }
    };
    Subject.prototype.subscribe = function (observer) {
        this.observers.push(observer);
    };
    return Subject;
}());
exports.Subject = Subject;


/***/ }),
/* 467 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) .NET Foundation. All rights reserved.
// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
Object.defineProperty(exports, "__esModule", { value: true });
var Base64EncodedHubProtocol = /** @class */ (function () {
    function Base64EncodedHubProtocol(protocol) {
        this.wrappedProtocol = protocol;
        this.name = this.wrappedProtocol.name;
        this.type = 1 /* Text */;
    }
    Base64EncodedHubProtocol.prototype.parseMessages = function (input) {
        // The format of the message is `size:message;`
        var pos = input.indexOf(":");
        if (pos == -1 || input[input.length - 1] != ';') {
            throw new Error("Invalid payload.");
        }
        var lenStr = input.substring(0, pos);
        if (!/^[0-9]+$/.test(lenStr)) {
            throw new Error("Invalid length: '" + lenStr + "'");
        }
        var messageSize = parseInt(lenStr, 10);
        // 2 accounts for ':' after message size and trailing ';'
        if (messageSize != input.length - pos - 2) {
            throw new Error("Invalid message size.");
        }
        var encodedMessage = input.substring(pos + 1, input.length - 1);
        // atob/btoa are browsers APIs but they can be polyfilled. If this becomes problematic we can use
        // base64-js module
        var s = atob(encodedMessage);
        var payload = new Uint8Array(s.length);
        for (var i = 0; i < payload.length; i++) {
            payload[i] = s.charCodeAt(i);
        }
        return this.wrappedProtocol.parseMessages(payload.buffer);
    };
    Base64EncodedHubProtocol.prototype.writeMessage = function (message) {
        var payload = new Uint8Array(this.wrappedProtocol.writeMessage(message));
        var s = "";
        for (var i = 0; i < payload.byteLength; i++) {
            s += String.fromCharCode(payload[i]);
        }
        // atob/btoa are browsers APIs but they can be polyfilled. If this becomes problematic we can use
        // base64-js module
        var encodedMessage = btoa(s);
        return encodedMessage.length.toString() + ":" + encodedMessage + ";";
    };
    return Base64EncodedHubProtocol;
}());
exports.Base64EncodedHubProtocol = Base64EncodedHubProtocol;


/***/ }),
/* 468 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(Buffer) {
// Copyright (c) .NET Foundation. All rights reserved.
// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
Object.defineProperty(exports, "__esModule", { value: true });
var Formatters_1 = __webpack_require__(120);
var msgpack5 = __webpack_require__(472);
var MessagePackHubProtocol = /** @class */ (function () {
    function MessagePackHubProtocol() {
        this.name = "messagepack";
        this.type = 2 /* Binary */;
    }
    MessagePackHubProtocol.prototype.parseMessages = function (input) {
        var _this = this;
        return Formatters_1.BinaryMessageFormat.parse(input).map(function (m) { return _this.parseMessage(m); });
    };
    MessagePackHubProtocol.prototype.parseMessage = function (input) {
        if (input.length == 0) {
            throw new Error("Invalid payload.");
        }
        var msgpack = msgpack5();
        var properties = msgpack.decode(new Buffer(input));
        if (properties.length == 0 || !(properties instanceof Array)) {
            throw new Error("Invalid payload.");
        }
        var messageType = properties[0];
        switch (messageType) {
            case 1 /* Invocation */:
                return this.createInvocationMessage(properties);
            case 2 /* StreamItem */:
                return this.createStreamItemMessage(properties);
            case 3 /* Completion */:
                return this.createCompletionMessage(properties);
            case 6 /* Ping */:
                return this.createPingMessage(properties);
            default:
                throw new Error("Invalid message type.");
        }
    };
    MessagePackHubProtocol.prototype.createPingMessage = function (properties) {
        if (properties.length != 1) {
            throw new Error("Invalid payload for Ping message.");
        }
        return {
            type: properties[0]
        };
    };
    MessagePackHubProtocol.prototype.createInvocationMessage = function (properties) {
        if (properties.length != 5) {
            throw new Error("Invalid payload for Invocation message.");
        }
        return {
            type: 1 /* Invocation */,
            invocationId: properties[1],
            nonblocking: properties[2],
            target: properties[3],
            arguments: properties[4]
        };
    };
    MessagePackHubProtocol.prototype.createStreamItemMessage = function (properties) {
        if (properties.length != 3) {
            throw new Error("Invalid payload for stream Result message.");
        }
        return {
            type: 2 /* StreamItem */,
            invocationId: properties[1],
            item: properties[2]
        };
    };
    MessagePackHubProtocol.prototype.createCompletionMessage = function (properties) {
        if (properties.length < 3) {
            throw new Error("Invalid payload for Completion message.");
        }
        var errorResult = 1;
        var voidResult = 2;
        var nonVoidResult = 3;
        var resultKind = properties[2];
        if ((resultKind === voidResult && properties.length != 3) ||
            (resultKind !== voidResult && properties.length != 4)) {
            throw new Error("Invalid payload for Completion message.");
        }
        var completionMessage = {
            type: 3 /* Completion */,
            invocationId: properties[1],
            error: null,
            result: null
        };
        switch (resultKind) {
            case errorResult:
                completionMessage.error = properties[3];
                break;
            case nonVoidResult:
                completionMessage.result = properties[3];
                break;
        }
        return completionMessage;
    };
    MessagePackHubProtocol.prototype.writeMessage = function (message) {
        switch (message.type) {
            case 1 /* Invocation */:
                return this.writeInvocation(message);
            case 4 /* StreamInvocation */:
                return this.writeStreamInvocation(message);
            case 2 /* StreamItem */:
            case 3 /* Completion */:
                throw new Error("Writing messages of type '" + message.type + "' is not supported.");
            default:
                throw new Error("Invalid message type.");
        }
    };
    MessagePackHubProtocol.prototype.writeInvocation = function (invocationMessage) {
        var msgpack = msgpack5();
        var payload = msgpack.encode([1 /* Invocation */, invocationMessage.invocationId,
            invocationMessage.nonblocking, invocationMessage.target, invocationMessage.arguments]);
        return Formatters_1.BinaryMessageFormat.write(payload.slice());
    };
    MessagePackHubProtocol.prototype.writeStreamInvocation = function (streamInvocationMessage) {
        var msgpack = msgpack5();
        var payload = msgpack.encode([4 /* StreamInvocation */, streamInvocationMessage.invocationId,
            streamInvocationMessage.target, streamInvocationMessage.arguments]);
        return Formatters_1.BinaryMessageFormat.write(payload.slice());
    };
    return MessagePackHubProtocol;
}());
exports.MessagePackHubProtocol = MessagePackHubProtocol;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(64).Buffer))

/***/ }),
/* 469 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.byteLength = byteLength
exports.toByteArray = toByteArray
exports.fromByteArray = fromByteArray

var lookup = []
var revLookup = []
var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array

var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
for (var i = 0, len = code.length; i < len; ++i) {
  lookup[i] = code[i]
  revLookup[code.charCodeAt(i)] = i
}

revLookup['-'.charCodeAt(0)] = 62
revLookup['_'.charCodeAt(0)] = 63

function placeHoldersCount (b64) {
  var len = b64.length
  if (len % 4 > 0) {
    throw new Error('Invalid string. Length must be a multiple of 4')
  }

  // the number of equal signs (place holders)
  // if there are two placeholders, than the two characters before it
  // represent one byte
  // if there is only one, then the three characters before it represent 2 bytes
  // this is just a cheap hack to not do indexOf twice
  return b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0
}

function byteLength (b64) {
  // base64 is 4/3 + up to two characters of the original data
  return (b64.length * 3 / 4) - placeHoldersCount(b64)
}

function toByteArray (b64) {
  var i, l, tmp, placeHolders, arr
  var len = b64.length
  placeHolders = placeHoldersCount(b64)

  arr = new Arr((len * 3 / 4) - placeHolders)

  // if there are placeholders, only get up to the last complete 4 chars
  l = placeHolders > 0 ? len - 4 : len

  var L = 0

  for (i = 0; i < l; i += 4) {
    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]
    arr[L++] = (tmp >> 16) & 0xFF
    arr[L++] = (tmp >> 8) & 0xFF
    arr[L++] = tmp & 0xFF
  }

  if (placeHolders === 2) {
    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)
    arr[L++] = tmp & 0xFF
  } else if (placeHolders === 1) {
    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)
    arr[L++] = (tmp >> 8) & 0xFF
    arr[L++] = tmp & 0xFF
  }

  return arr
}

function tripletToBase64 (num) {
  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]
}

function encodeChunk (uint8, start, end) {
  var tmp
  var output = []
  for (var i = start; i < end; i += 3) {
    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])
    output.push(tripletToBase64(tmp))
  }
  return output.join('')
}

function fromByteArray (uint8) {
  var tmp
  var len = uint8.length
  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes
  var output = ''
  var parts = []
  var maxChunkLength = 16383 // must be multiple of 3

  // go through the array every three bytes, we'll deal with trailing stuff later
  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {
    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))
  }

  // pad the end with zeros, but make sure to not forget the extra bytes
  if (extraBytes === 1) {
    tmp = uint8[len - 1]
    output += lookup[tmp >> 2]
    output += lookup[(tmp << 4) & 0x3F]
    output += '=='
  } else if (extraBytes === 2) {
    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])
    output += lookup[tmp >> 10]
    output += lookup[(tmp >> 4) & 0x3F]
    output += lookup[(tmp << 2) & 0x3F]
    output += '='
  }

  parts.push(output)

  return parts.join('')
}


/***/ }),
/* 470 */
/***/ (function(module, exports) {

exports.read = function (buffer, offset, isLE, mLen, nBytes) {
  var e, m
  var eLen = nBytes * 8 - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var nBits = -7
  var i = isLE ? (nBytes - 1) : 0
  var d = isLE ? -1 : 1
  var s = buffer[offset + i]

  i += d

  e = s & ((1 << (-nBits)) - 1)
  s >>= (-nBits)
  nBits += eLen
  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}

  m = e & ((1 << (-nBits)) - 1)
  e >>= (-nBits)
  nBits += mLen
  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}

  if (e === 0) {
    e = 1 - eBias
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity)
  } else {
    m = m + Math.pow(2, mLen)
    e = e - eBias
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)
}

exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c
  var eLen = nBytes * 8 - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)
  var i = isLE ? 0 : (nBytes - 1)
  var d = isLE ? 1 : -1
  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0

  value = Math.abs(value)

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0
    e = eMax
  } else {
    e = Math.floor(Math.log(value) / Math.LN2)
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--
      c *= 2
    }
    if (e + eBias >= 1) {
      value += rt / c
    } else {
      value += rt * Math.pow(2, 1 - eBias)
    }
    if (value * c >= 2) {
      e++
      c /= 2
    }

    if (e + eBias >= eMax) {
      m = 0
      e = eMax
    } else if (e + eBias >= 1) {
      m = (value * c - 1) * Math.pow(2, mLen)
      e = e + eBias
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)
      e = 0
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}

  e = (e << mLen) | m
  eLen += mLen
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}

  buffer[offset + i - d] |= s * 128
}


/***/ }),
/* 471 */
/***/ (function(module, exports) {

var toString = {}.toString;

module.exports = Array.isArray || function (arr) {
  return toString.call(arr) == '[object Array]';
};


/***/ }),
/* 472 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var Buffer = __webpack_require__(65).Buffer
var assert = __webpack_require__(473)
var bl = __webpack_require__(89)
var streams = __webpack_require__(484)
var buildDecode = __webpack_require__(487)
var buildEncode = __webpack_require__(488)

function msgpack (options) {
  var encodingTypes = []
  var decodingTypes = []

  options = options || {
    forceFloat64: false,
    compatibilityMode: false
  }

  function registerEncoder (check, encode) {
    assert(check, 'must have an encode function')
    assert(encode, 'must have an encode function')

    encodingTypes.push({
      check: check, encode: encode
    })

    return this
  }

  function registerDecoder (type, decode) {
    assert(type >= 0, 'must have a non-negative type')
    assert(decode, 'must have a decode function')

    decodingTypes.push({
      type: type, decode: decode
    })

    return this
  }

  function register (type, constructor, encode, decode) {
    assert(constructor, 'must have a constructor')
    assert(encode, 'must have an encode function')
    assert(type >= 0, 'must have a non-negative type')
    assert(decode, 'must have a decode function')

    function check (obj) {
      return (obj instanceof constructor)
    }

    function reEncode (obj) {
      var buf = bl()
      var header = Buffer.allocUnsafe(1)

      header.writeInt8(type, 0)

      buf.append(header)
      buf.append(encode(obj))

      return buf
    }

    this.registerEncoder(check, reEncode)
    this.registerDecoder(type, decode)

    return this
  }

  return {
    encode: buildEncode(encodingTypes, options.forceFloat64, options.compatibilityMode),
    decode: buildDecode(decodingTypes),
    register: register,
    registerEncoder: registerEncoder,
    registerDecoder: registerDecoder,
    encoder: streams.encoder,
    decoder: streams.decoder,
    // needed for levelup support
    buffer: true,
    type: 'msgpack5',
    IncompleteBufferError: buildDecode.IncompleteBufferError
  }
}

module.exports = msgpack


/***/ }),
/* 473 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {

// compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js
// original notice:

/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function compare(a, b) {
  if (a === b) {
    return 0;
  }

  var x = a.length;
  var y = b.length;

  for (var i = 0, len = Math.min(x, y); i < len; ++i) {
    if (a[i] !== b[i]) {
      x = a[i];
      y = b[i];
      break;
    }
  }

  if (x < y) {
    return -1;
  }
  if (y < x) {
    return 1;
  }
  return 0;
}
function isBuffer(b) {
  if (global.Buffer && typeof global.Buffer.isBuffer === 'function') {
    return global.Buffer.isBuffer(b);
  }
  return !!(b != null && b._isBuffer);
}

// based on node assert, original notice:

// http://wiki.commonjs.org/wiki/Unit_Testing/1.0
//
// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!
//
// Originally from narwhal.js (http://narwhaljs.org)
// Copyright (c) 2009 Thomas Robinson <280north.com>
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the 'Software'), to
// deal in the Software without restriction, including without limitation the
// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
// sell copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

var util = __webpack_require__(121);
var hasOwn = Object.prototype.hasOwnProperty;
var pSlice = Array.prototype.slice;
var functionsHaveNames = (function () {
  return function foo() {}.name === 'foo';
}());
function pToString (obj) {
  return Object.prototype.toString.call(obj);
}
function isView(arrbuf) {
  if (isBuffer(arrbuf)) {
    return false;
  }
  if (typeof global.ArrayBuffer !== 'function') {
    return false;
  }
  if (typeof ArrayBuffer.isView === 'function') {
    return ArrayBuffer.isView(arrbuf);
  }
  if (!arrbuf) {
    return false;
  }
  if (arrbuf instanceof DataView) {
    return true;
  }
  if (arrbuf.buffer && arrbuf.buffer instanceof ArrayBuffer) {
    return true;
  }
  return false;
}
// 1. The assert module provides functions that throw
// AssertionError's when particular conditions are not met. The
// assert module must conform to the following interface.

var assert = module.exports = ok;

// 2. The AssertionError is defined in assert.
// new assert.AssertionError({ message: message,
//                             actual: actual,
//                             expected: expected })

var regex = /\s*function\s+([^\(\s]*)\s*/;
// based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js
function getName(func) {
  if (!util.isFunction(func)) {
    return;
  }
  if (functionsHaveNames) {
    return func.name;
  }
  var str = func.toString();
  var match = str.match(regex);
  return match && match[1];
}
assert.AssertionError = function AssertionError(options) {
  this.name = 'AssertionError';
  this.actual = options.actual;
  this.expected = options.expected;
  this.operator = options.operator;
  if (options.message) {
    this.message = options.message;
    this.generatedMessage = false;
  } else {
    this.message = getMessage(this);
    this.generatedMessage = true;
  }
  var stackStartFunction = options.stackStartFunction || fail;
  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, stackStartFunction);
  } else {
    // non v8 browsers so we can have a stacktrace
    var err = new Error();
    if (err.stack) {
      var out = err.stack;

      // try to strip useless frames
      var fn_name = getName(stackStartFunction);
      var idx = out.indexOf('\n' + fn_name);
      if (idx >= 0) {
        // once we have located the function frame
        // we need to strip out everything before it (and its line)
        var next_line = out.indexOf('\n', idx + 1);
        out = out.substring(next_line + 1);
      }

      this.stack = out;
    }
  }
};

// assert.AssertionError instanceof Error
util.inherits(assert.AssertionError, Error);

function truncate(s, n) {
  if (typeof s === 'string') {
    return s.length < n ? s : s.slice(0, n);
  } else {
    return s;
  }
}
function inspect(something) {
  if (functionsHaveNames || !util.isFunction(something)) {
    return util.inspect(something);
  }
  var rawname = getName(something);
  var name = rawname ? ': ' + rawname : '';
  return '[Function' +  name + ']';
}
function getMessage(self) {
  return truncate(inspect(self.actual), 128) + ' ' +
         self.operator + ' ' +
         truncate(inspect(self.expected), 128);
}

// At present only the three keys mentioned above are used and
// understood by the spec. Implementations or sub modules can pass
// other keys to the AssertionError's constructor - they will be
// ignored.

// 3. All of the following functions must throw an AssertionError
// when a corresponding condition is not met, with a message that
// may be undefined if not provided.  All assertion methods provide
// both the actual and expected values to the assertion error for
// display purposes.

function fail(actual, expected, message, operator, stackStartFunction) {
  throw new assert.AssertionError({
    message: message,
    actual: actual,
    expected: expected,
    operator: operator,
    stackStartFunction: stackStartFunction
  });
}

// EXTENSION! allows for well behaved errors defined elsewhere.
assert.fail = fail;

// 4. Pure assertion tests whether a value is truthy, as determined
// by !!guard.
// assert.ok(guard, message_opt);
// This statement is equivalent to assert.equal(true, !!guard,
// message_opt);. To test strictly for the value true, use
// assert.strictEqual(true, guard, message_opt);.

function ok(value, message) {
  if (!value) fail(value, true, message, '==', assert.ok);
}
assert.ok = ok;

// 5. The equality assertion tests shallow, coercive equality with
// ==.
// assert.equal(actual, expected, message_opt);

assert.equal = function equal(actual, expected, message) {
  if (actual != expected) fail(actual, expected, message, '==', assert.equal);
};

// 6. The non-equality assertion tests for whether two objects are not equal
// with != assert.notEqual(actual, expected, message_opt);

assert.notEqual = function notEqual(actual, expected, message) {
  if (actual == expected) {
    fail(actual, expected, message, '!=', assert.notEqual);
  }
};

// 7. The equivalence assertion tests a deep equality relation.
// assert.deepEqual(actual, expected, message_opt);

assert.deepEqual = function deepEqual(actual, expected, message) {
  if (!_deepEqual(actual, expected, false)) {
    fail(actual, expected, message, 'deepEqual', assert.deepEqual);
  }
};

assert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {
  if (!_deepEqual(actual, expected, true)) {
    fail(actual, expected, message, 'deepStrictEqual', assert.deepStrictEqual);
  }
};

function _deepEqual(actual, expected, strict, memos) {
  // 7.1. All identical values are equivalent, as determined by ===.
  if (actual === expected) {
    return true;
  } else if (isBuffer(actual) && isBuffer(expected)) {
    return compare(actual, expected) === 0;

  // 7.2. If the expected value is a Date object, the actual value is
  // equivalent if it is also a Date object that refers to the same time.
  } else if (util.isDate(actual) && util.isDate(expected)) {
    return actual.getTime() === expected.getTime();

  // 7.3 If the expected value is a RegExp object, the actual value is
  // equivalent if it is also a RegExp object with the same source and
  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).
  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {
    return actual.source === expected.source &&
           actual.global === expected.global &&
           actual.multiline === expected.multiline &&
           actual.lastIndex === expected.lastIndex &&
           actual.ignoreCase === expected.ignoreCase;

  // 7.4. Other pairs that do not both pass typeof value == 'object',
  // equivalence is determined by ==.
  } else if ((actual === null || typeof actual !== 'object') &&
             (expected === null || typeof expected !== 'object')) {
    return strict ? actual === expected : actual == expected;

  // If both values are instances of typed arrays, wrap their underlying
  // ArrayBuffers in a Buffer each to increase performance
  // This optimization requires the arrays to have the same type as checked by
  // Object.prototype.toString (aka pToString). Never perform binary
  // comparisons for Float*Arrays, though, since e.g. +0 === -0 but their
  // bit patterns are not identical.
  } else if (isView(actual) && isView(expected) &&
             pToString(actual) === pToString(expected) &&
             !(actual instanceof Float32Array ||
               actual instanceof Float64Array)) {
    return compare(new Uint8Array(actual.buffer),
                   new Uint8Array(expected.buffer)) === 0;

  // 7.5 For all other Object pairs, including Array objects, equivalence is
  // determined by having the same number of owned properties (as verified
  // with Object.prototype.hasOwnProperty.call), the same set of keys
  // (although not necessarily the same order), equivalent values for every
  // corresponding key, and an identical 'prototype' property. Note: this
  // accounts for both named and indexed properties on Arrays.
  } else if (isBuffer(actual) !== isBuffer(expected)) {
    return false;
  } else {
    memos = memos || {actual: [], expected: []};

    var actualIndex = memos.actual.indexOf(actual);
    if (actualIndex !== -1) {
      if (actualIndex === memos.expected.indexOf(expected)) {
        return true;
      }
    }

    memos.actual.push(actual);
    memos.expected.push(expected);

    return objEquiv(actual, expected, strict, memos);
  }
}

function isArguments(object) {
  return Object.prototype.toString.call(object) == '[object Arguments]';
}

function objEquiv(a, b, strict, actualVisitedObjects) {
  if (a === null || a === undefined || b === null || b === undefined)
    return false;
  // if one is a primitive, the other must be same
  if (util.isPrimitive(a) || util.isPrimitive(b))
    return a === b;
  if (strict && Object.getPrototypeOf(a) !== Object.getPrototypeOf(b))
    return false;
  var aIsArgs = isArguments(a);
  var bIsArgs = isArguments(b);
  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))
    return false;
  if (aIsArgs) {
    a = pSlice.call(a);
    b = pSlice.call(b);
    return _deepEqual(a, b, strict);
  }
  var ka = objectKeys(a);
  var kb = objectKeys(b);
  var key, i;
  // having the same number of owned properties (keys incorporates
  // hasOwnProperty)
  if (ka.length !== kb.length)
    return false;
  //the same set of keys (although not necessarily the same order),
  ka.sort();
  kb.sort();
  //~~~cheap key test
  for (i = ka.length - 1; i >= 0; i--) {
    if (ka[i] !== kb[i])
      return false;
  }
  //equivalent values for every corresponding key, and
  //~~~possibly expensive deep test
  for (i = ka.length - 1; i >= 0; i--) {
    key = ka[i];
    if (!_deepEqual(a[key], b[key], strict, actualVisitedObjects))
      return false;
  }
  return true;
}

// 8. The non-equivalence assertion tests for any deep inequality.
// assert.notDeepEqual(actual, expected, message_opt);

assert.notDeepEqual = function notDeepEqual(actual, expected, message) {
  if (_deepEqual(actual, expected, false)) {
    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);
  }
};

assert.notDeepStrictEqual = notDeepStrictEqual;
function notDeepStrictEqual(actual, expected, message) {
  if (_deepEqual(actual, expected, true)) {
    fail(actual, expected, message, 'notDeepStrictEqual', notDeepStrictEqual);
  }
}


// 9. The strict equality assertion tests strict equality, as determined by ===.
// assert.strictEqual(actual, expected, message_opt);

assert.strictEqual = function strictEqual(actual, expected, message) {
  if (actual !== expected) {
    fail(actual, expected, message, '===', assert.strictEqual);
  }
};

// 10. The strict non-equality assertion tests for strict inequality, as
// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);

assert.notStrictEqual = function notStrictEqual(actual, expected, message) {
  if (actual === expected) {
    fail(actual, expected, message, '!==', assert.notStrictEqual);
  }
};

function expectedException(actual, expected) {
  if (!actual || !expected) {
    return false;
  }

  if (Object.prototype.toString.call(expected) == '[object RegExp]') {
    return expected.test(actual);
  }

  try {
    if (actual instanceof expected) {
      return true;
    }
  } catch (e) {
    // Ignore.  The instanceof check doesn't work for arrow functions.
  }

  if (Error.isPrototypeOf(expected)) {
    return false;
  }

  return expected.call({}, actual) === true;
}

function _tryBlock(block) {
  var error;
  try {
    block();
  } catch (e) {
    error = e;
  }
  return error;
}

function _throws(shouldThrow, block, expected, message) {
  var actual;

  if (typeof block !== 'function') {
    throw new TypeError('"block" argument must be a function');
  }

  if (typeof expected === 'string') {
    message = expected;
    expected = null;
  }

  actual = _tryBlock(block);

  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +
            (message ? ' ' + message : '.');

  if (shouldThrow && !actual) {
    fail(actual, expected, 'Missing expected exception' + message);
  }

  var userProvidedMessage = typeof message === 'string';
  var isUnwantedException = !shouldThrow && util.isError(actual);
  var isUnexpectedException = !shouldThrow && actual && !expected;

  if ((isUnwantedException &&
      userProvidedMessage &&
      expectedException(actual, expected)) ||
      isUnexpectedException) {
    fail(actual, expected, 'Got unwanted exception' + message);
  }

  if ((shouldThrow && actual && expected &&
      !expectedException(actual, expected)) || (!shouldThrow && actual)) {
    throw actual;
  }
}

// 11. Expected to throw an error:
// assert.throws(block, Error_opt, message_opt);

assert.throws = function(block, /*optional*/error, /*optional*/message) {
  _throws(true, block, error, message);
};

// EXTENSION! This is annoying to write outside this module.
assert.doesNotThrow = function(block, /*optional*/error, /*optional*/message) {
  _throws(false, block, error, message);
};

assert.ifError = function(err) { if (err) throw err; };

var objectKeys = Object.keys || function (obj) {
  var keys = [];
  for (var key in obj) {
    if (hasOwn.call(obj, key)) keys.push(key);
  }
  return keys;
};

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(40)))

/***/ }),
/* 474 */
/***/ (function(module, exports) {

module.exports = function isBuffer(arg) {
  return arg && typeof arg === 'object'
    && typeof arg.copy === 'function'
    && typeof arg.fill === 'function'
    && typeof arg.readUInt8 === 'function';
}

/***/ }),
/* 475 */
/***/ (function(module, exports) {

if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    var TempCtor = function () {}
    TempCtor.prototype = superCtor.prototype
    ctor.prototype = new TempCtor()
    ctor.prototype.constructor = ctor
  }
}


/***/ }),
/* 476 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(52);


/***/ }),
/* 477 */
/***/ (function(module, exports) {

var toString = {}.toString;

module.exports = Array.isArray || function (arr) {
  return toString.call(arr) == '[object Array]';
};


/***/ }),
/* 478 */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),
/* 479 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*<replacement>*/

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Buffer = __webpack_require__(65).Buffer;
/*</replacement>*/

function copyBuffer(src, target, offset) {
  src.copy(target, offset);
}

module.exports = function () {
  function BufferList() {
    _classCallCheck(this, BufferList);

    this.head = null;
    this.tail = null;
    this.length = 0;
  }

  BufferList.prototype.push = function push(v) {
    var entry = { data: v, next: null };
    if (this.length > 0) this.tail.next = entry;else this.head = entry;
    this.tail = entry;
    ++this.length;
  };

  BufferList.prototype.unshift = function unshift(v) {
    var entry = { data: v, next: this.head };
    if (this.length === 0) this.tail = entry;
    this.head = entry;
    ++this.length;
  };

  BufferList.prototype.shift = function shift() {
    if (this.length === 0) return;
    var ret = this.head.data;
    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;
    --this.length;
    return ret;
  };

  BufferList.prototype.clear = function clear() {
    this.head = this.tail = null;
    this.length = 0;
  };

  BufferList.prototype.join = function join(s) {
    if (this.length === 0) return '';
    var p = this.head;
    var ret = '' + p.data;
    while (p = p.next) {
      ret += s + p.data;
    }return ret;
  };

  BufferList.prototype.concat = function concat(n) {
    if (this.length === 0) return Buffer.alloc(0);
    if (this.length === 1) return this.head.data;
    var ret = Buffer.allocUnsafe(n >>> 0);
    var p = this.head;
    var i = 0;
    while (p) {
      copyBuffer(p.data, ret, i);
      i += p.data.length;
      p = p.next;
    }
    return ret;
  };

  return BufferList;
}();

/***/ }),
/* 480 */
/***/ (function(module, exports, __webpack_require__) {

var apply = Function.prototype.apply;

// DOM APIs, for completeness

exports.setTimeout = function() {
  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);
};
exports.setInterval = function() {
  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);
};
exports.clearTimeout =
exports.clearInterval = function(timeout) {
  if (timeout) {
    timeout.close();
  }
};

function Timeout(id, clearFn) {
  this._id = id;
  this._clearFn = clearFn;
}
Timeout.prototype.unref = Timeout.prototype.ref = function() {};
Timeout.prototype.close = function() {
  this._clearFn.call(window, this._id);
};

// Does not start the time, just sets up the members needed.
exports.enroll = function(item, msecs) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = msecs;
};

exports.unenroll = function(item) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = -1;
};

exports._unrefActive = exports.active = function(item) {
  clearTimeout(item._idleTimeoutId);

  var msecs = item._idleTimeout;
  if (msecs >= 0) {
    item._idleTimeoutId = setTimeout(function onTimeout() {
      if (item._onTimeout)
        item._onTimeout();
    }, msecs);
  }
};

// setimmediate attaches itself to the global object
__webpack_require__(481);
var global = __webpack_require__(482);
exports.setImmediate = global.setImmediate;
exports.clearImmediate = global.clearImmediate;


/***/ }),
/* 481 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global, process) {(function (global, undefined) {
    "use strict";

    if (global.setImmediate) {
        return;
    }

    var nextHandle = 1; // Spec says greater than zero
    var tasksByHandle = {};
    var currentlyRunningATask = false;
    var doc = global.document;
    var registerImmediate;

    function setImmediate(callback) {
      // Callback can either be a function or a string
      if (typeof callback !== "function") {
        callback = new Function("" + callback);
      }
      // Copy function arguments
      var args = new Array(arguments.length - 1);
      for (var i = 0; i < args.length; i++) {
          args[i] = arguments[i + 1];
      }
      // Store and register the task
      var task = { callback: callback, args: args };
      tasksByHandle[nextHandle] = task;
      registerImmediate(nextHandle);
      return nextHandle++;
    }

    function clearImmediate(handle) {
        delete tasksByHandle[handle];
    }

    function run(task) {
        var callback = task.callback;
        var args = task.args;
        switch (args.length) {
        case 0:
            callback();
            break;
        case 1:
            callback(args[0]);
            break;
        case 2:
            callback(args[0], args[1]);
            break;
        case 3:
            callback(args[0], args[1], args[2]);
            break;
        default:
            callback.apply(undefined, args);
            break;
        }
    }

    function runIfPresent(handle) {
        // From the spec: "Wait until any invocations of this algorithm started before this one have completed."
        // So if we're currently running a task, we'll need to delay this invocation.
        if (currentlyRunningATask) {
            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a
            // "too much recursion" error.
            setTimeout(runIfPresent, 0, handle);
        } else {
            var task = tasksByHandle[handle];
            if (task) {
                currentlyRunningATask = true;
                try {
                    run(task);
                } finally {
                    clearImmediate(handle);
                    currentlyRunningATask = false;
                }
            }
        }
    }

    function installNextTickImplementation() {
        registerImmediate = function(handle) {
            process.nextTick(function () { runIfPresent(handle); });
        };
    }

    function canUsePostMessage() {
        // The test against `importScripts` prevents this implementation from being installed inside a web worker,
        // where `global.postMessage` means something completely different and can't be used for this purpose.
        if (global.postMessage && !global.importScripts) {
            var postMessageIsAsynchronous = true;
            var oldOnMessage = global.onmessage;
            global.onmessage = function() {
                postMessageIsAsynchronous = false;
            };
            global.postMessage("", "*");
            global.onmessage = oldOnMessage;
            return postMessageIsAsynchronous;
        }
    }

    function installPostMessageImplementation() {
        // Installs an event handler on `global` for the `message` event: see
        // * https://developer.mozilla.org/en/DOM/window.postMessage
        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages

        var messagePrefix = "setImmediate$" + Math.random() + "$";
        var onGlobalMessage = function(event) {
            if (event.source === global &&
                typeof event.data === "string" &&
                event.data.indexOf(messagePrefix) === 0) {
                runIfPresent(+event.data.slice(messagePrefix.length));
            }
        };

        if (global.addEventListener) {
            global.addEventListener("message", onGlobalMessage, false);
        } else {
            global.attachEvent("onmessage", onGlobalMessage);
        }

        registerImmediate = function(handle) {
            global.postMessage(messagePrefix + handle, "*");
        };
    }

    function installMessageChannelImplementation() {
        var channel = new MessageChannel();
        channel.port1.onmessage = function(event) {
            var handle = event.data;
            runIfPresent(handle);
        };

        registerImmediate = function(handle) {
            channel.port2.postMessage(handle);
        };
    }

    function installReadyStateChangeImplementation() {
        var html = doc.documentElement;
        registerImmediate = function(handle) {
            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted
            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.
            var script = doc.createElement("script");
            script.onreadystatechange = function () {
                runIfPresent(handle);
                script.onreadystatechange = null;
                html.removeChild(script);
                script = null;
            };
            html.appendChild(script);
        };
    }

    function installSetTimeoutImplementation() {
        registerImmediate = function(handle) {
            setTimeout(runIfPresent, 0, handle);
        };
    }

    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.
    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);
    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;

    // Don't get fooled by e.g. browserify environments.
    if ({}.toString.call(global.process) === "[object process]") {
        // For Node.js before 0.9
        installNextTickImplementation();

    } else if (canUsePostMessage()) {
        // For non-IE10 modern browsers
        installPostMessageImplementation();

    } else if (global.MessageChannel) {
        // For web workers, where supported
        installMessageChannelImplementation();

    } else if (doc && "onreadystatechange" in doc.createElement("script")) {
        // For IE 6–8
        installReadyStateChangeImplementation();

    } else {
        // For older browsers
        installSetTimeoutImplementation();
    }

    attachTo.setImmediate = setImmediate;
    attachTo.clearImmediate = clearImmediate;
}(typeof self === "undefined" ? typeof global === "undefined" ? this : global : self));

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(40), __webpack_require__(66)))

/***/ }),
/* 482 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var win;

if (typeof window !== "undefined") {
    win = window;
} else if (typeof global !== "undefined") {
    win = global;
} else if (typeof self !== "undefined"){
    win = self;
} else {
    win = {};
}

module.exports = win;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(40)))

/***/ }),
/* 483 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {
/**
 * Module exports.
 */

module.exports = deprecate;

/**
 * Mark that a method should not be used.
 * Returns a modified function which warns once by default.
 *
 * If `localStorage.noDeprecation = true` is set, then it is a no-op.
 *
 * If `localStorage.throwDeprecation = true` is set, then deprecated functions
 * will throw an Error when invoked.
 *
 * If `localStorage.traceDeprecation = true` is set, then deprecated functions
 * will invoke `console.trace()` instead of `console.error()`.
 *
 * @param {Function} fn - the function to deprecate
 * @param {String} msg - the string to print to the console when `fn` is invoked
 * @returns {Function} a new "deprecated" version of `fn`
 * @api public
 */

function deprecate (fn, msg) {
  if (config('noDeprecation')) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (config('throwDeprecation')) {
        throw new Error(msg);
      } else if (config('traceDeprecation')) {
        console.trace(msg);
      } else {
        console.warn(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
}

/**
 * Checks `localStorage` for boolean values for the given `name`.
 *
 * @param {String} name
 * @returns {Boolean}
 * @api private
 */

function config (name) {
  // accessing global.localStorage can trigger a DOMException in sandboxed iframes
  try {
    if (!global.localStorage) return false;
  } catch (_) {
    return false;
  }
  var val = global.localStorage[name];
  if (null == val) return false;
  return String(val).toLowerCase() === 'true';
}

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(40)))

/***/ }),
/* 484 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var Transform = __webpack_require__(485).Transform
var inherits = __webpack_require__(58)
var bl = __webpack_require__(89)

function Base (opts) {
  opts = opts || {}

  opts.objectMode = true
  opts.highWaterMark = 16

  Transform.call(this, opts)

  this._msgpack = opts.msgpack
}

inherits(Base, Transform)

function Encoder (opts) {
  if (!(this instanceof Encoder)) {
    opts = opts || {}
    opts.msgpack = this
    return new Encoder(opts)
  }

  Base.call(this, opts)
}

inherits(Encoder, Base)

Encoder.prototype._transform = function (obj, enc, done) {
  var buf = null

  try {
    buf = this._msgpack.encode(obj).slice(0)
  } catch (err) {
    this.emit('error', err)
    return done()
  }

  this.push(buf)
  done()
}

function Decoder (opts) {
  if (!(this instanceof Decoder)) {
    opts = opts || {}
    opts.msgpack = this
    return new Decoder(opts)
  }

  Base.call(this, opts)

  this._chunks = bl()
}

inherits(Decoder, Base)

Decoder.prototype._transform = function (buf, enc, done) {
  if (buf) {
    this._chunks.append(buf)
  }

  try {
    var result = this._msgpack.decode(this._chunks)
    this.push(result)
  } catch (err) {
    if (err instanceof this._msgpack.IncompleteBufferError) {
      done()
    } else {
      this.emit('error', err)
    }
    return
  }

  if (this._chunks.length > 0) {
    this._transform(null, enc, done)
  } else {
    done()
  }
}

module.exports.decoder = Decoder
module.exports.encoder = Encoder


/***/ }),
/* 485 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(175);
exports.Stream = exports;
exports.Readable = exports;
exports.Writable = __webpack_require__(180);
exports.Duplex = __webpack_require__(52);
exports.Transform = __webpack_require__(181);
exports.PassThrough = __webpack_require__(486);


/***/ }),
/* 486 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// a passthrough stream.
// basically just the most minimal sort of Transform stream.
// Every written chunk gets output as-is.



module.exports = PassThrough;

var Transform = __webpack_require__(181);

/*<replacement>*/
var util = __webpack_require__(67);
util.inherits = __webpack_require__(58);
/*</replacement>*/

util.inherits(PassThrough, Transform);

function PassThrough(options) {
  if (!(this instanceof PassThrough)) return new PassThrough(options);

  Transform.call(this, options);
}

PassThrough.prototype._transform = function (chunk, encoding, cb) {
  cb(null, chunk);
};

/***/ }),
/* 487 */
/***/ (function(module, exports, __webpack_require__) {

var bl = __webpack_require__(89)
var util = __webpack_require__(121)

function IncompleteBufferError (message) {
  Error.call(this) // super constructor
  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, this.constructor) // super helper method to include stack trace in error object
  }
  this.name = this.constructor.name
  this.message = message || 'unable to decode'
}

util.inherits(IncompleteBufferError, Error)

module.exports = function buildDecode (decodingTypes) {
  return decode

  function getSize (first) {
    switch (first) {
      case 0xc4:
        return 2
      case 0xc5:
        return 3
      case 0xc6:
        return 5
      case 0xc7:
        return 3
      case 0xc8:
        return 4
      case 0xc9:
        return 6
      case 0xca:
        return 5
      case 0xcb:
        return 9
      case 0xcc:
        return 2
      case 0xcd:
        return 3
      case 0xce:
        return 5
      case 0xcf:
        return 9
      case 0xd0:
        return 2
      case 0xd1:
        return 3
      case 0xd2:
        return 5
      case 0xd3:
        return 9
      case 0xd4:
        return 3
      case 0xd5:
        return 4
      case 0xd6:
        return 6
      case 0xd7:
        return 10
      case 0xd8:
        return 18
      case 0xd9:
        return 2
      case 0xda:
        return 3
      case 0xdb:
        return 5
      case 0xde:
        return 3
      default:
        return -1
    }
  }

  function hasMinBufferSize (first, length) {
    var size = getSize(first)

    if (size !== -1 && length < size) {
      return false
    } else {
      return true
    }
  }

  function isValidDataSize (dataLength, bufLength, headerLength) {
    return bufLength >= headerLength + dataLength
  }

  function buildDecodeResult (value, bytesConsumed) {
    return {
      value: value,
      bytesConsumed: bytesConsumed
    }
  }

  function decode (buf) {
    if (!(buf instanceof bl)) {
      buf = bl().append(buf)
    }

    var result = tryDecode(buf)
    if (result) {
      buf.consume(result.bytesConsumed)
      return result.value
    } else {
      throw new IncompleteBufferError()
    }
  }

  function tryDecode (buf, offset) {
    offset = offset === undefined ? 0 : offset
    var bufLength = buf.length - offset
    if (bufLength <= 0) {
      return null
    }

    var first = buf.readUInt8(offset)
    var length
    var result = 0
    var type
    var bytePos

    if (!hasMinBufferSize(first, bufLength)) {
      return null
    }

    switch (first) {
      case 0xc0:
        return buildDecodeResult(null, 1)
      case 0xc2:
        return buildDecodeResult(false, 1)
      case 0xc3:
        return buildDecodeResult(true, 1)
      case 0xcc:
        // 1-byte unsigned int
        result = buf.readUInt8(offset + 1)
        return buildDecodeResult(result, 2)
      case 0xcd:
        // 2-bytes BE unsigned int
        result = buf.readUInt16BE(offset + 1)
        return buildDecodeResult(result, 3)
      case 0xce:
        // 4-bytes BE unsigned int
        result = buf.readUInt32BE(offset + 1)
        return buildDecodeResult(result, 5)
      case 0xcf:
        // 8-bytes BE unsigned int
        // Read long byte by byte, big-endian
        for (bytePos = 7; bytePos >= 0; bytePos--) {
          result += (buf.readUInt8(offset + bytePos + 1) * Math.pow(2, (8 * (7 - bytePos))))
        }
        return buildDecodeResult(result, 9)
      case 0xd0:
        // 1-byte signed int
        result = buf.readInt8(offset + 1)
        return buildDecodeResult(result, 2)
      case 0xd1:
        // 2-bytes signed int
        result = buf.readInt16BE(offset + 1)
        return buildDecodeResult(result, 3)
      case 0xd2:
        // 4-bytes signed int
        result = buf.readInt32BE(offset + 1)
        return buildDecodeResult(result, 5)
      case 0xd3:
        result = readInt64BE(buf.slice(offset + 1, offset + 9), 0)
        return buildDecodeResult(result, 9)
      case 0xca:
        // 4-bytes float
        result = buf.readFloatBE(offset + 1)
        return buildDecodeResult(result, 5)
      case 0xcb:
        // 8-bytes double
        result = buf.readDoubleBE(offset + 1)
        return buildDecodeResult(result, 9)
      case 0xd9:
        // strings up to 2^8 - 1 bytes
        length = buf.readUInt8(offset + 1)
        if (!isValidDataSize(length, bufLength, 2)) {
          return null
        }
        result = buf.toString('utf8', offset + 2, offset + 2 + length)
        return buildDecodeResult(result, 2 + length)
      case 0xda:
        // strings up to 2^16 - 2 bytes
        length = buf.readUInt16BE(offset + 1)
        if (!isValidDataSize(length, bufLength, 3)) {
          return null
        }
        result = buf.toString('utf8', offset + 3, offset + 3 + length)
        return buildDecodeResult(result, 3 + length)
      case 0xdb:
        // strings up to 2^32 - 4 bytes
        length = buf.readUInt32BE(offset + 1)
        if (!isValidDataSize(length, bufLength, 5)) {
          return null
        }
        result = buf.toString('utf8', offset + 5, offset + 5 + length)
        return buildDecodeResult(result, 5 + length)
      case 0xc4:
        // buffers up to 2^8 - 1 bytes
        length = buf.readUInt8(offset + 1)
        if (!isValidDataSize(length, bufLength, 2)) {
          return null
        }
        result = buf.slice(offset + 2, offset + 2 + length)
        return buildDecodeResult(result, 2 + length)
      case 0xc5:
        // buffers up to 2^16 - 1 bytes
        length = buf.readUInt16BE(offset + 1)
        if (!isValidDataSize(length, bufLength, 3)) {
          return null
        }
        result = buf.slice(offset + 3, offset + 3 + length)
        return buildDecodeResult(result, 3 + length)
      case 0xc6:
        // buffers up to 2^32 - 1 bytes
        length = buf.readUInt32BE(offset + 1)
        if (!isValidDataSize(length, bufLength, 5)) {
          return null
        }
        result = buf.slice(offset + 5, offset + 5 + length)
        return buildDecodeResult(result, 5 + length)
      case 0xdc:
        // array up to 2^16 elements - 2 bytes
        if (bufLength < 3) {
          return null
        }

        length = buf.readUInt16BE(offset + 1)
        return decodeArray(buf, offset, length, 3)
      case 0xdd:
        // array up to 2^32 elements - 4 bytes
        if (bufLength < 5) {
          return null
        }

        length = buf.readUInt32BE(offset + 1)
        return decodeArray(buf, offset, length, 5)
      case 0xde:
        // maps up to 2^16 elements - 2 bytes
        length = buf.readUInt16BE(offset + 1)
        return decodeMap(buf, offset, length, 3)
      case 0xdf:
        throw new Error('map too big to decode in JS')
      case 0xd4:
        return decodeFixExt(buf, offset, 1)
      case 0xd5:
        return decodeFixExt(buf, offset, 2)
      case 0xd6:
        return decodeFixExt(buf, offset, 4)
      case 0xd7:
        return decodeFixExt(buf, offset, 8)
      case 0xd8:
        return decodeFixExt(buf, offset, 16)
      case 0xc7:
        // ext up to 2^8 - 1 bytes
        length = buf.readUInt8(offset + 1)
        type = buf.readUInt8(offset + 2)
        if (!isValidDataSize(length, bufLength, 3)) {
          return null
        }
        return decodeExt(buf, offset, type, length, 3)
      case 0xc8:
        // ext up to 2^16 - 1 bytes
        length = buf.readUInt16BE(offset + 1)
        type = buf.readUInt8(offset + 3)
        if (!isValidDataSize(length, bufLength, 4)) {
          return null
        }
        return decodeExt(buf, offset, type, length, 4)
      case 0xc9:
        // ext up to 2^32 - 1 bytes
        length = buf.readUInt32BE(offset + 1)
        type = buf.readUInt8(offset + 5)
        if (!isValidDataSize(length, bufLength, 6)) {
          return null
        }
        return decodeExt(buf, offset, type, length, 6)
    }

    if ((first & 0xf0) === 0x90) {
      // we have an array with less than 15 elements
      length = first & 0x0f
      return decodeArray(buf, offset, length, 1)
    } else if ((first & 0xf0) === 0x80) {
      // we have a map with less than 15 elements
      length = first & 0x0f
      return decodeMap(buf, offset, length, 1)
    } else if ((first & 0xe0) === 0xa0) {
      // fixstr up to 31 bytes
      length = first & 0x1f
      if (isValidDataSize(length, bufLength, 1)) {
        result = buf.toString('utf8', offset + 1, offset + length + 1)
        return buildDecodeResult(result, length + 1)
      } else {
        return null
      }
    } else if (first >= 0xe0) {
      // 5 bits negative ints
      result = first - 0x100
      return buildDecodeResult(result, 1)
    } else if (first < 0x80) {
      // 7-bits positive ints
      return buildDecodeResult(first, 1)
    } else {
      throw new Error('not implemented yet')
    }
  }

  function readInt64BE (buf, offset) {
    var negate = (buf[offset] & 0x80) == 0x80 // eslint-disable-line

    if (negate) {
      var carry = 1
      for (var i = offset + 7; i >= offset; i--) {
        var v = (buf[i] ^ 0xff) + carry
        buf[i] = v & 0xff
        carry = v >> 8
      }
    }

    var hi = buf.readUInt32BE(offset + 0)
    var lo = buf.readUInt32BE(offset + 4)
    return (hi * 4294967296 + lo) * (negate ? -1 : +1)
  }

  function decodeArray (buf, offset, length, headerLength) {
    var result = []
    var i
    var totalBytesConsumed = 0

    offset += headerLength
    for (i = 0; i < length; i++) {
      var decodeResult = tryDecode(buf, offset)
      if (decodeResult) {
        result.push(decodeResult.value)
        offset += decodeResult.bytesConsumed
        totalBytesConsumed += decodeResult.bytesConsumed
      } else {
        return null
      }
    }
    return buildDecodeResult(result, headerLength + totalBytesConsumed)
  }

  function decodeMap (buf, offset, length, headerLength) {
    var result = {}
    var key
    var i
    var totalBytesConsumed = 0

    offset += headerLength
    for (i = 0; i < length; i++) {
      var keyResult = tryDecode(buf, offset)
      if (keyResult) {
        offset += keyResult.bytesConsumed
        var valueResult = tryDecode(buf, offset)
        if (valueResult) {
          key = keyResult.value
          result[key] = valueResult.value
          offset += valueResult.bytesConsumed
          totalBytesConsumed += (keyResult.bytesConsumed + valueResult.bytesConsumed)
        } else {
          return null
        }
      } else {
        return null
      }
    }
    return buildDecodeResult(result, headerLength + totalBytesConsumed)
  }

  function decodeFixExt (buf, offset, size) {
    var type = buf.readUInt8(offset + 1)

    return decodeExt(buf, offset, type, size, 2)
  }

  function decodeExt (buf, offset, type, size, headerSize) {
    var i,
      toDecode

    offset += headerSize
    for (i = 0; i < decodingTypes.length; i++) {
      if (type === decodingTypes[i].type) {
        toDecode = buf.slice(offset, offset + size)
        var value = decodingTypes[i].decode(toDecode)
        return buildDecodeResult(value, headerSize + size)
      }
    }

    throw new Error('unable to find ext type ' + type)
  }
}

module.exports.IncompleteBufferError = IncompleteBufferError


/***/ }),
/* 488 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var Buffer = __webpack_require__(65).Buffer
var bl = __webpack_require__(89)
var TOLERANCE = 0.1

module.exports = function buildEncode (encodingTypes, forceFloat64, compatibilityMode) {
  function encode (obj, avoidSlice) {
    var buf,
      len

    if (obj === undefined) {
      throw new Error('undefined is not encodable in msgpack!')
    } else if (obj === null) {
      buf = Buffer.allocUnsafe(1)
      buf[0] = 0xc0
    } else if (obj === true) {
      buf = Buffer.allocUnsafe(1)
      buf[0] = 0xc3
    } else if (obj === false) {
      buf = Buffer.allocUnsafe(1)
      buf[0] = 0xc2
    } else if (typeof obj === 'string') {
      len = Buffer.byteLength(obj)
      if (len < 32) {
        buf = Buffer.allocUnsafe(1 + len)
        buf[0] = 0xa0 | len
        if (len > 0) {
          buf.write(obj, 1)
        }
      } else if (len <= 0xff && !compatibilityMode) {
        // str8, but only when not in compatibility mode
        buf = Buffer.allocUnsafe(2 + len)
        buf[0] = 0xd9
        buf[1] = len
        buf.write(obj, 2)
      } else if (len <= 0xffff) {
        buf = Buffer.allocUnsafe(3 + len)
        buf[0] = 0xda
        buf.writeUInt16BE(len, 1)
        buf.write(obj, 3)
      } else {
        buf = Buffer.allocUnsafe(5 + len)
        buf[0] = 0xdb
        buf.writeUInt32BE(len, 1)
        buf.write(obj, 5)
      }
    } else if (obj && (obj.readUInt32LE || obj instanceof Uint8Array)) {
      if (obj instanceof Uint8Array) {
        obj = Buffer.from(obj)
      }
      // weird hack to support Buffer
      // and Buffer-like objects
      if (obj.length <= 0xff) {
        buf = Buffer.allocUnsafe(2)
        buf[0] = 0xc4
        buf[1] = obj.length
      } else if (obj.length <= 0xffff) {
        buf = Buffer.allocUnsafe(3)
        buf[0] = 0xc5
        buf.writeUInt16BE(obj.length, 1)
      } else {
        buf = Buffer.allocUnsafe(5)
        buf[0] = 0xc6
        buf.writeUInt32BE(obj.length, 1)
      }

      buf = bl([buf, obj])
    } else if (Array.isArray(obj)) {
      if (obj.length < 16) {
        buf = Buffer.allocUnsafe(1)
        buf[0] = 0x90 | obj.length
      } else if (obj.length < 65536) {
        buf = Buffer.allocUnsafe(3)
        buf[0] = 0xdc
        buf.writeUInt16BE(obj.length, 1)
      } else {
        buf = Buffer.allocUnsafe(5)
        buf[0] = 0xdd
        buf.writeUInt32BE(obj.length, 1)
      }

      buf = obj.reduce(function (acc, obj) {
        acc.append(encode(obj, true))
        return acc
      }, bl().append(buf))
    } else if (typeof obj === 'object') {
      buf = encodeExt(obj) || encodeObject(obj)
    } else if (typeof obj === 'number') {
      if (isFloat(obj)) {
        return encodeFloat(obj, forceFloat64)
      } else if (obj >= 0) {
        if (obj < 128) {
          buf = Buffer.allocUnsafe(1)
          buf[0] = obj
        } else if (obj < 256) {
          buf = Buffer.allocUnsafe(2)
          buf[0] = 0xcc
          buf[1] = obj
        } else if (obj < 65536) {
          buf = Buffer.allocUnsafe(3)
          buf[0] = 0xcd
          buf.writeUInt16BE(obj, 1)
        } else if (obj <= 0xffffffff) {
          buf = Buffer.allocUnsafe(5)
          buf[0] = 0xce
          buf.writeUInt32BE(obj, 1)
        } else if (obj <= 9007199254740991) {
          buf = Buffer.allocUnsafe(9)
          buf[0] = 0xcf
          write64BitUint(buf, obj)
        } else {
          return encodeFloat(obj, true)
        }
      } else {
        if (obj >= -32) {
          buf = Buffer.allocUnsafe(1)
          buf[0] = 0x100 + obj
        } else if (obj >= -128) {
          buf = Buffer.allocUnsafe(2)
          buf[0] = 0xd0
          buf.writeInt8(obj, 1)
        } else if (obj >= -32768) {
          buf = Buffer.allocUnsafe(3)
          buf[0] = 0xd1
          buf.writeInt16BE(obj, 1)
        } else if (obj > -214748365) {
          buf = Buffer.allocUnsafe(5)
          buf[0] = 0xd2
          buf.writeInt32BE(obj, 1)
        } else if (obj >= -9007199254740991) {
          buf = Buffer.allocUnsafe(9)
          buf[0] = 0xd3
          write64BitInt(buf, 1, obj)
        } else {
          return encodeFloat(obj, true)
        }
      }
    }

    if (!buf) {
      throw new Error('not implemented yet')
    }

    if (avoidSlice) {
      return buf
    } else {
      return buf.slice()
    }
  }

  function encodeExt (obj) {
    var i
    var encoded
    var length = -1
    var headers = []

    for (i = 0; i < encodingTypes.length; i++) {
      if (encodingTypes[i].check(obj)) {
        encoded = encodingTypes[i].encode(obj)
        break
      }
    }

    if (!encoded) {
      return null
    }

    // we subtract 1 because the length does not
    // include the type
    length = encoded.length - 1

    if (length === 1) {
      headers.push(0xd4)
    } else if (length === 2) {
      headers.push(0xd5)
    } else if (length === 4) {
      headers.push(0xd6)
    } else if (length === 8) {
      headers.push(0xd7)
    } else if (length === 16) {
      headers.push(0xd8)
    } else if (length < 256) {
      headers.push(0xc7)
      headers.push(length)
    } else if (length < 0x10000) {
      headers.push(0xc8)
      headers.push(length >> 8)
      headers.push(length & 0x00ff)
    } else {
      headers.push(0xc9)
      headers.push(length >> 24)
      headers.push((length >> 16) & 0x000000ff)
      headers.push((length >> 8) & 0x000000ff)
      headers.push(length & 0x000000ff)
    }

    return bl().append(Buffer.from(headers)).append(encoded)
  }

  function encodeObject (obj) {
    var acc = []
    var length = 0
    var key
    var header

    for (key in obj) {
      if (obj.hasOwnProperty(key) &&
        obj[key] !== undefined &&
        typeof obj[key] !== 'function') {
        ++length
        acc.push(encode(key, true))
        acc.push(encode(obj[key], true))
      }
    }

    if (length < 16) {
      header = Buffer.allocUnsafe(1)
      header[0] = 0x80 | length
    } else {
      header = Buffer.allocUnsafe(3)
      header[0] = 0xde
      header.writeUInt16BE(length, 1)
    }

    acc.unshift(header)

    var result = acc.reduce(function (list, buf) {
      return list.append(buf)
    }, bl())

    return result
  }

  return encode
}

function write64BitUint (buf, obj) {
  // Write long byte by byte, in big-endian order
  for (var currByte = 7; currByte >= 0; currByte--) {
    buf[currByte + 1] = (obj & 0xff)
    obj = obj / 256
  }
}

function write64BitInt (buf, offset, num) {
  var negate = num < 0

  if (negate) {
    num = Math.abs(num)
  }

  var lo = num % 4294967296
  var hi = num / 4294967296
  buf.writeUInt32BE(Math.floor(hi), offset + 0)
  buf.writeUInt32BE(lo, offset + 4)

  if (negate) {
    var carry = 1
    for (var i = offset + 7; i >= offset; i--) {
      var v = (buf[i] ^ 0xff) + carry
      buf[i] = v & 0xff
      carry = v >> 8
    }
  }
}

function isFloat (n) {
  return n !== Math.floor(n)
}

function encodeFloat (obj, forceFloat64) {
  var buf

  buf = Buffer.allocUnsafe(5)
  buf[0] = 0xca
  buf.writeFloatBE(obj, 1)

  // FIXME is there a way to check if a
  // value fits in a float?
  if (forceFloat64 || Math.abs(obj - buf.readFloatBE(1)) > TOLERANCE) {
    buf = Buffer.allocUnsafe(9)
    buf[0] = 0xcb
    buf.writeDoubleBE(obj, 1)
  }

  return buf
}


/***/ }),
/* 489 */
/***/ (function(module, exports) {

module.exports = urljoin;

/***/ }),
/* 490 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Footer = /** @class */ (function (_super) {
    __extends(Footer, _super);
    function Footer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Footer.prototype.render = function () {
        return React.createElement("div", { className: "footer" },
            React.createElement("div", { className: "column" },
                React.createElement("div", { className: "footerRow" },
                    React.createElement("div", { style: { marginRight: "15px", color: "#000" } }, "\u53CB\u60C5\u94FE\u63A5"),
                    React.createElement("a", { href: "http://www.zju.edu.cn/" }, "\u6D59\u6C5F\u5927\u5B66"),
                    "|",
                    React.createElement("a", { href: "http://www.cs.zju.edu.cn/" }, "\u6D59\u6C5F\u5927\u5B66\u8BA1\u7B97\u673A\u5B66\u9662"),
                    "|",
                    React.createElement("a", { href: "http://www.zju88.org/agent/index.do" }, "\u98D8\u6E3A\u6C34\u4E91\u95F4"),
                    "|",
                    React.createElement("a", { href: "http://www.qsc.zju.edu.cn/" }, "\u6C42\u662F\u6F6E"),
                    "|",
                    React.createElement("a", { href: "http://luckweb.057101.com/bt2/index.asp" }, "\u7F18\u7F51"),
                    "|",
                    React.createElement("a", { href: "http://www.nexushd.org/login.php" }, "NexusHD"),
                    "|",
                    React.createElement("a", { href: "https://www.zdgd.zju.edu.cn/" }, "\u6D59\u6C5F\u5927\u5B66\u5E7F\u64AD\u7535\u89C6\u7F51"),
                    "|",
                    React.createElement("a", { href: "http://zy.zju.edu.cn/" }, "\u6D59\u5927\u641C\u7D22")),
                React.createElement("div", { className: "footerRow" },
                    "Copyright \u00A9 2003-2017 CC98 . Email: contact@cc98.org CC98 Durian 3.0.0",
                    React.createElement("a", { href: "http://www.cc98.org/onlineshow.asp" }, " \u8BBA\u575B\u7EDF\u8BA1"))));
    };
    return Footer;
}(React.Component));
exports.Footer = Footer;


/***/ }),
/* 491 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var UbbContainer_1 = __webpack_require__(15);
var react_router_dom_1 = __webpack_require__(8);
/**
 * 全站公告组件
 * 为同时兼容新旧版98 临时调整了显示的内容
 **/
var AnnouncementComponent = /** @class */ (function (_super) {
    __extends(AnnouncementComponent, _super);
    function AnnouncementComponent(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            announcementContent: '加载中……'
        };
        return _this;
    }
    AnnouncementComponent.prototype.getAnnouncement = function () {
        return __awaiter(this, void 0, void 0, function () {
            var response, data, announcement;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.cc98Fetch('/config/global')];
                    case 1:
                        response = _a.sent();
                        return [4 /*yield*/, response.json()];
                    case 2:
                        data = _a.sent();
                        announcement = data.announcement;
                        return [2 /*return*/, announcement];
                }
            });
        });
    };
    AnnouncementComponent.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var x;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getAnnouncement()];
                    case 1:
                        x = _a.sent();
                        this.setState({
                            announcementContent: x,
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    AnnouncementComponent.prototype.render = function () {
        return React.createElement("div", { className: "announcement" },
            React.createElement("div", { className: "mainPageTitle1" },
                React.createElement("div", { className: "mainPageTitleRow" },
                    React.createElement("i", { className: "fa fa-volume-up" }),
                    React.createElement("div", { className: "mainPageTitleText" }, "\u5168\u7AD9\u516C\u544A"))),
            React.createElement("div", { className: "announcementContent" },
                React.createElement(UbbContainer_1.UbbContainer, { code: this.state.announcementContent })));
    };
    return AnnouncementComponent;
}(React.Component));
exports.AnnouncementComponent = AnnouncementComponent;
/**
 * 推荐阅读组件
 **/
var RecommendedReadingComponent = /** @class */ (function (_super) {
    __extends(RecommendedReadingComponent, _super);
    function RecommendedReadingComponent(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            recommendedReading: new Array(),
            index: Math.floor(Math.random() * 5) //0-4的随机数
        };
        _this.handleMouseEnter = _this.handleMouseEnter.bind(_this);
        _this.convertButton = _this.convertButton.bind(_this);
        return _this;
    }
    RecommendedReadingComponent.prototype.getRecommendedReading = function () {
        return __awaiter(this, void 0, void 0, function () {
            var recommendedReading, response, data, i;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        recommendedReading = new Array();
                        return [4 /*yield*/, Utility.cc98Fetch('/index/column/recommandationreading')];
                    case 1:
                        response = _a.sent();
                        return [4 /*yield*/, response.json()];
                    case 2:
                        data = _a.sent();
                        for (i = 0; i < 5; i++) {
                            recommendedReading[i] = new MainPageColumn(data[i].imageUrl, data[i].title, data[i].url, data[i].content);
                        }
                        return [2 /*return*/, recommendedReading];
                }
            });
        });
    };
    RecommendedReadingComponent.prototype.componentWillMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var x;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getRecommendedReading()];
                    case 1:
                        x = _a.sent();
                        this.setState({
                            recommendedReading: x
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    RecommendedReadingComponent.prototype.handleMouseEnter = function (index) {
        this.setState({
            index: index,
        });
    };
    //使用箭头函数传参 记得用到this的函数都要先bind
    RecommendedReadingComponent.prototype.convertButton = function (value, index, array) {
        var _this = this;
        var className = value ? "recommendedReadingButtonSelected" : "recommendedReadingButton";
        return React.createElement("div", { className: className, onMouseEnter: function () { _this.handleMouseEnter(index); } });
    };
    //在componentWillMount前似乎会render一次 这时this.state还是初值  所以需要先判断一次
    RecommendedReadingComponent.prototype.render = function () {
        var recommendedReading = this.state.recommendedReading;
        var index = this.state.index;
        var styles = new Array(0, 0, 0, 0, 0);
        styles[index] = 1;
        var buttons = styles.map(this.convertButton);
        var imageUrl = recommendedReading.length ? recommendedReading[index].imageUrl : "";
        var title = recommendedReading.length ? recommendedReading[index].title : "";
        var url = recommendedReading.length ? recommendedReading[index].url : "";
        var content = recommendedReading.length ? recommendedReading[index].content : "";
        return React.createElement("div", { className: "recommendedReading" },
            React.createElement("div", { className: "mainPageTitle2" },
                React.createElement("div", { className: "mainPageTitleRow" },
                    React.createElement("i", { className: "fa fa-volume-up" }),
                    React.createElement("div", { className: "mainPageTitleText" }, "\u63A8\u8350\u9605\u8BFB"))),
            React.createElement("div", { className: "recommendedReadingContent" },
                React.createElement("div", { className: "recommendedReadingImage" },
                    React.createElement("img", { src: imageUrl })),
                React.createElement("div", { className: "column", style: { flexGrow: 1 } },
                    React.createElement("div", { className: "recommendedReadingTitle" },
                        React.createElement("a", { href: url, target: "_blank" }, title)),
                    React.createElement("div", { className: "recommendedReadingAbstract" }, content),
                    React.createElement("div", { className: "recommendedReadingButtons" }, buttons))));
    };
    return RecommendedReadingComponent;
}(React.Component));
exports.RecommendedReadingComponent = RecommendedReadingComponent;
/**
 * 首页热门话题类
 * 用于首页的热门话题(十大），该类的对象（一条热门话题)需要标题，id，所在版面，及所在版面id等几个属性
 **/
var HotTopicState = /** @class */ (function () {
    //构造方法
    function HotTopicState(title, id, boardName, boardid) {
        this.title = title;
        this.id = id;
        this.boardName = boardName;
        this.boardid = boardid;
    }
    return HotTopicState;
}());
exports.HotTopicState = HotTopicState;
/**
 * 热门话题组件
 **/
var HotTopicComponent = /** @class */ (function (_super) {
    __extends(HotTopicComponent, _super);
    function HotTopicComponent(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            mainPageTopicState: new Array(),
        };
        return _this;
    }
    HotTopicComponent.prototype.getTopicInfo = function () {
        return __awaiter(this, void 0, void 0, function () {
            var mainPageTopics, response, data, i;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        mainPageTopics = [];
                        return [4 /*yield*/, Utility.cc98Fetch('/Topic/Hot')];
                    case 1:
                        response = _a.sent();
                        return [4 /*yield*/, response.json()];
                    case 2:
                        data = _a.sent();
                        for (i = 0; i < 10; i++) {
                            mainPageTopics[i] = new HotTopicState(data[i].title, data[i].id, data[i].boardName, data[i].boardId);
                        }
                        return [2 /*return*/, mainPageTopics];
                }
            });
        });
    };
    HotTopicComponent.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var x;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getTopicInfo()];
                    case 1:
                        x = _a.sent();
                        this.setState({
                            mainPageTopicState: x,
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    HotTopicComponent.prototype.convertMainPageTopic = function (item) {
        var boardUrl = "/list/" + item.boardid;
        var topicUrl = "/topic/" + item.id;
        return React.createElement("div", { className: "mainPageListRow" },
            React.createElement("div", { className: "mainPageListBoardName" },
                " ",
                React.createElement(react_router_dom_1.Link, { to: boardUrl },
                    "[",
                    item.boardName,
                    "]")),
            React.createElement("div", { className: "mainPageListTitle" },
                React.createElement(react_router_dom_1.Link, { to: topicUrl }, item.title)));
    };
    HotTopicComponent.prototype.render = function () {
        return React.createElement("div", { className: "mainPageList" },
            React.createElement("div", { className: "mainPageTitle1" },
                React.createElement("div", { className: "mainPageTitleRow" },
                    React.createElement("i", { className: "fa fa-volume-up" }),
                    React.createElement("div", { className: "mainPageTitleText" }, "\u70ED\u95E8\u8BDD\u9898"))),
            React.createElement("div", { className: "mainPageListContent1" }, this.state.mainPageTopicState.map(this.convertMainPageTopic)));
    };
    return HotTopicComponent;
}(React.Component));
exports.HotTopicComponent = HotTopicComponent;
/**
 * 首页话题类
 * 用于首页左侧下方的几栏，该类的对象（一条主题)需要标题和id
 **/
var MainPageTopicState = /** @class */ (function () {
    //构造方法
    function MainPageTopicState(title, id) {
        this.title = title;
        this.id = id;
    }
    return MainPageTopicState;
}());
exports.MainPageTopicState = MainPageTopicState;
/**
 * 首页话题组件
 * 需要列表名，fetchUrl和样式三个参数
 **/
var MainPageTopicComponent = /** @class */ (function (_super) {
    __extends(MainPageTopicComponent, _super);
    function MainPageTopicComponent(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            mainPageTopic: new Array(),
        };
        return _this;
    }
    MainPageTopicComponent.prototype.getTopicInfo = function () {
        return __awaiter(this, void 0, void 0, function () {
            var mainPageTopics, url, response, data, i;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        mainPageTopics = [];
                        url = this.props.fetchUrl;
                        return [4 /*yield*/, Utility.cc98Fetch(url)];
                    case 1:
                        response = _a.sent();
                        return [4 /*yield*/, response.json()];
                    case 2:
                        data = _a.sent();
                        for (i = 0; i < 10; i++) {
                            mainPageTopics[i] = new MainPageTopicState(data[i].title, data[i].id);
                        }
                        return [2 /*return*/, mainPageTopics];
                }
            });
        });
    };
    MainPageTopicComponent.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var x;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getTopicInfo()];
                    case 1:
                        x = _a.sent();
                        this.setState({
                            mainPageTopic: x,
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    MainPageTopicComponent.prototype.convertMainPageTopic = function (item) {
        var topicUrl = "/topic/" + item.id;
        return React.createElement("div", { className: "mainPageListRow" },
            React.createElement("div", { className: "mainPageListTitle" },
                React.createElement(react_router_dom_1.Link, { to: topicUrl }, item.title)));
    };
    MainPageTopicComponent.prototype.render = function () {
        var style = this.props.style;
        if (style === "black") {
            return React.createElement("div", { className: "mainPageList" },
                React.createElement("div", { className: "mainPageTitle2" },
                    React.createElement("div", { className: "mainPageTitleRow" },
                        React.createElement("i", { className: "fa fa-volume-up" }),
                        React.createElement("div", { className: "mainPageTitleText" }, this.props.name))),
                React.createElement("div", { className: "mainPageListContent2" }, this.state.mainPageTopic.map(this.convertMainPageTopic)));
        }
        else if (style === "blue") {
            return React.createElement("div", { className: "mainPageList" },
                React.createElement("div", { className: "mainPageTitle1" },
                    React.createElement("div", { className: "mainPageTitleRow" },
                        React.createElement("i", { className: "fa fa-volume-up" }),
                        React.createElement("div", { className: "mainPageTitleText" }, this.props.name))),
                React.createElement("div", { className: "mainPageListContent1" }, this.state.mainPageTopic.map(this.convertMainPageTopic)));
        }
    };
    return MainPageTopicComponent;
}(React.Component));
exports.MainPageTopicComponent = MainPageTopicComponent;
/**
 * 测试用组件~
 **/
var Test = /** @class */ (function (_super) {
    __extends(Test, _super);
    function Test(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            testContent: '',
        };
        _this.handleChange = _this.handleChange.bind(_this);
        _this.urlTextHanderler = _this.urlTextHanderler.bind(_this);
        return _this;
    }
    Test.prototype.handleChange = function (e) {
        this.setState({
            testContent: e.target.value
        });
    };
    Test.prototype.urlTextHanderler = function () {
        return __awaiter(this, void 0, void 0, function () {
            var reg, reg2, reg3, reg4, url, matchResult, domainName, isInternalLink;
            return __generator(this, function (_a) {
                reg = /[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+/gim;
                reg2 = /cc98\.org/i;
                reg3 = /zju\.edu\.cn/i;
                reg4 = /nexushd\.org/i;
                url = this.state.testContent;
                matchResult = url.match(reg);
                if (matchResult) {
                    domainName = matchResult[0];
                    isInternalLink = reg2.test(domainName) || reg3.test(domainName) || reg4.test(domainName);
                    console.log(isInternalLink);
                    //return isInternalLink;
                }
                else {
                    console.log("这不是链接！");
                }
                return [2 /*return*/];
            });
        });
    };
    Test.prototype.postAd = function () {
        return __awaiter(this, void 0, void 0, function () {
            var url, content, postForumIndexColumnInfo, token, myHeaders, response;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        url = "/index/column/24";
                        content = {
                            type: 4,
                            title: "一个图片不一样的广告",
                            url: "www.cc98.org",
                            imageUrl: "/images/推荐功能.jpg",
                            enable: true,
                            days: 10,
                        };
                        postForumIndexColumnInfo = JSON.stringify(content);
                        token = Utility.getLocalStorage("accessToken");
                        myHeaders = new Headers();
                        myHeaders.append("Authorization", token);
                        myHeaders.append("Content-Type", 'application/json');
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                method: 'PUT',
                                headers: myHeaders,
                                body: postForumIndexColumnInfo,
                            })];
                    case 1:
                        response = _a.sent();
                        console.log("发送成功！");
                        return [2 /*return*/];
                }
            });
        });
    };
    Test.prototype.render = function () {
        return React.createElement("div", { className: "mainPageList" },
            React.createElement("div", { className: "mainPageTitle2" },
                React.createElement("div", { className: "mainPageTitleRow" },
                    React.createElement("i", { className: "fa fa-volume-up" }),
                    React.createElement("div", { className: "mainPageTitleText" }, "\u6D4B\u8BD5\u533A"))),
            React.createElement("div", { className: "mainPageListContent2" },
                React.createElement("div", null, "\u8FD9\u91CC\u662F\u53EF\u7231\u7684adddna\u6D4B\u8BD5\u7684\u5730\u65B9~"),
                React.createElement("input", { name: "testContent", type: "text", id: "loginName", onChange: this.handleChange, value: this.state.testContent }),
                React.createElement("div", null, "\u5C01\u5370")));
    };
    return Test;
}(React.Component));
exports.Test = Test;
/**
 * 首页栏目类
 * 用于首页的栏目，包括推荐阅读、推荐功能以及校园新闻。
 * 该类的成员对象包括：图片url（校园新闻不需要），标题，url，以及摘要（仅推荐阅读需要）
 * 这部分栏目均设置在新窗口打开链接
 **/
var MainPageColumn = /** @class */ (function () {
    //构造方法
    function MainPageColumn(imageUrl, title, url, content) {
        this.imageUrl = imageUrl;
        this.title = title;
        this.url = url;
        this.content = content;
    }
    return MainPageColumn;
}());
exports.MainPageColumn = MainPageColumn;
/**
 * 推荐功能组件
 */
var RecommendedFunctionComponent = /** @class */ (function (_super) {
    __extends(RecommendedFunctionComponent, _super);
    function RecommendedFunctionComponent(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            recommendedFuctions: new Array(),
        };
        return _this;
    }
    RecommendedFunctionComponent.prototype.getRecommendedFunction = function () {
        return __awaiter(this, void 0, void 0, function () {
            var recommendedFuction, response, data, i;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        recommendedFuction = new Array();
                        return [4 /*yield*/, Utility.cc98Fetch('/index/column/recommandationfunction')];
                    case 1:
                        response = _a.sent();
                        return [4 /*yield*/, response.json()];
                    case 2:
                        data = _a.sent();
                        for (i = 0; i < 5; i++) {
                            recommendedFuction[i] = new MainPageColumn(data[i].imageUrl, data[i].title, data[i].url, data[i].content);
                        }
                        return [2 /*return*/, recommendedFuction];
                }
            });
        });
    };
    RecommendedFunctionComponent.prototype.componentWillMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var x;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getRecommendedFunction()];
                    case 1:
                        x = _a.sent();
                        this.setState({
                            recommendedFuctions: x
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    RecommendedFunctionComponent.prototype.convertRecommendedFunction = function (item) {
        return React.createElement("div", { className: "recommendedFunctionRow" },
            React.createElement("div", { className: "recommendedFunctionImage" },
                React.createElement("img", { src: item.imageUrl })),
            React.createElement("div", { className: "recommendedFunctionTitle" },
                React.createElement("a", { href: item.url, target: "_blank" }, item.title)));
    };
    RecommendedFunctionComponent.prototype.render = function () {
        return React.createElement("div", { className: "recommendedFunction" },
            React.createElement("div", { className: "mainPageTitle1" },
                React.createElement("div", { className: "mainPageTitleRow" },
                    React.createElement("i", { className: "fa fa-volume-up" }),
                    React.createElement("div", { className: "mainPageTitleText" }, "\u63A8\u8350\u529F\u80FD"))),
            React.createElement("div", { className: "recommendedFunctionContent" }, this.state.recommendedFuctions.map(this.convertRecommendedFunction)));
    };
    return RecommendedFunctionComponent;
}(React.Component));
exports.RecommendedFunctionComponent = RecommendedFunctionComponent;
/**
 * 校园新闻组件
 */
var SchoolNewsComponent = /** @class */ (function (_super) {
    __extends(SchoolNewsComponent, _super);
    function SchoolNewsComponent(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            schoolNews: new Array(),
        };
        return _this;
    }
    SchoolNewsComponent.prototype.getSchoolNews = function () {
        return __awaiter(this, void 0, void 0, function () {
            var schoolnews, response, data, i;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        schoolnews = new Array();
                        return [4 /*yield*/, Utility.cc98Fetch('/index/column/schoolnews')];
                    case 1:
                        response = _a.sent();
                        return [4 /*yield*/, response.json()];
                    case 2:
                        data = _a.sent();
                        for (i = 0; i < 10; i++) {
                            schoolnews[i] = new MainPageColumn(data[i].imageUrl, data[i].title, data[i].url, data[i].content);
                        }
                        return [2 /*return*/, schoolnews];
                }
            });
        });
    };
    SchoolNewsComponent.prototype.componentWillMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var x;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getSchoolNews()];
                    case 1:
                        x = _a.sent();
                        this.setState({
                            schoolNews: x
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    SchoolNewsComponent.prototype.convertSchoolNews = function (item) {
        return React.createElement("div", { className: "schoolNewsRow" },
            React.createElement("div", { className: "schoolNewsTitle" },
                React.createElement("a", { href: item.url, target: "_blank" }, item.title)));
    };
    SchoolNewsComponent.prototype.render = function () {
        return React.createElement("div", { className: "schoolNews" },
            React.createElement("div", { className: "mainPageTitle2" },
                React.createElement("div", { className: "mainPageTitleRow" },
                    React.createElement("i", { className: "fa fa-volume-up" }),
                    React.createElement("div", { className: "mainPageTitleText" }, "\u6821\u56ED\u65B0\u95FB"))),
            React.createElement("div", { className: "schoolNewsContent" }, this.state.schoolNews.map(this.convertSchoolNews)));
    };
    return SchoolNewsComponent;
}(React.Component));
exports.SchoolNewsComponent = SchoolNewsComponent;
/**
 * 首页广告组件
 * 每30s切换一条
 */
var MainPageAdComponent = /** @class */ (function (_super) {
    __extends(MainPageAdComponent, _super);
    function MainPageAdComponent(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            ads: new Array(),
            index: 0,
        };
        _this.changeIndex = _this.changeIndex.bind(_this);
        return _this;
    }
    MainPageAdComponent.prototype.getAds = function () {
        return __awaiter(this, void 0, void 0, function () {
            var ads, response, data, i;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        ads = new Array();
                        return [4 /*yield*/, Utility.cc98Fetch('/config/global/advertisement')];
                    case 1:
                        response = _a.sent();
                        return [4 /*yield*/, response.json()];
                    case 2:
                        data = _a.sent();
                        for (i = 0; i < data.length; i++) {
                            ads[i] = new MainPageColumn(data[i].imageUrl, data[i].title, data[i].url, data[i].content);
                        }
                        return [2 /*return*/, ads];
                }
            });
        });
    };
    MainPageAdComponent.prototype.componentWillMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var x, length;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getAds()];
                    case 1:
                        x = _a.sent();
                        length = x.length;
                        this.setState({
                            ads: x,
                            index: Math.floor(Math.random() * length)
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    //设定定时器 每30s调用一次changeIndex()
    MainPageAdComponent.prototype.componentDidMount = function () {
        var _this = this;
        this.timer = setInterval(function () { _this.changeIndex(_this.state.index); }, 30000);
    };
    //当组件从页面上移除时移除定时器
    MainPageAdComponent.prototype.componentWillUnmount = function () {
        clearInterval(this.timer);
    };
    //根据当前广告角标返回下一角标
    MainPageAdComponent.prototype.changeIndex = function (index) {
        var total = this.state.ads.length;
        var nextIndex = index + 1;
        if (index >= total)
            nextIndex = 0;
        this.setState({
            index: nextIndex,
        });
    };
    MainPageAdComponent.prototype.render = function () {
        var ads = this.state.ads;
        var index = this.state.index;
        var url = ads.length ? ads[index].url : "";
        var imageUrl = ads.length ? ads[index].imageUrl : "";
        return React.createElement("div", { style: { marginTop: "2.5rem" } },
            React.createElement(react_router_dom_1.Link, { to: url },
                React.createElement("img", { src: imageUrl, style: { maxWidth: "16.25rem" } })));
    };
    return MainPageAdComponent;
}(React.Component));
exports.MainPageAdComponent = MainPageAdComponent;
/**
 * 论坛统计组件
 * TODO:样式调整
 **/
var Count = /** @class */ (function (_super) {
    __extends(Count, _super);
    function Count(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            data: []
        };
        return _this;
    }
    Count.prototype.getData = function () {
        return __awaiter(this, void 0, void 0, function () {
            var response, data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.cc98Fetch('/config/global')];
                    case 1:
                        response = _a.sent();
                        return [4 /*yield*/, response.json()];
                    case 2:
                        data = _a.sent();
                        return [2 /*return*/, data];
                }
            });
        });
    };
    Count.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var x;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getData()];
                    case 1:
                        x = _a.sent();
                        this.setState({
                            data: x,
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    Count.prototype.render = function () {
        var data = this.state.data;
        return React.createElement("div", { className: "schoolNews" },
            React.createElement("div", { className: "mainPageTitle2" },
                React.createElement("div", { className: "mainPageTitleRow" },
                    React.createElement("i", { className: "fa fa-volume-up" }),
                    React.createElement("div", { className: "mainPageTitleText" }, "\u8BBA\u575B\u7EDF\u8BA1"))),
            React.createElement("div", { className: "schoolNewsContent", style: { height: "10rem" } },
                React.createElement("div", { className: "schoolNewsRow" },
                    React.createElement("div", { className: "schoolNewsTitle" },
                        React.createElement("div", null, "\u4ECA\u65E5\u5E16\u6570"),
                        React.createElement("div", { className: "mainPageCountRed" }, data.todayCount))),
                React.createElement("div", { className: "schoolNewsRow" },
                    React.createElement("div", { className: "schoolNewsTitle" },
                        React.createElement("div", null, "\u8BBA\u575B\u603B\u4E3B\u9898\u6570"),
                        React.createElement("div", { className: "mainPageCountRed" }, data.topicCount))),
                React.createElement("div", { className: "schoolNewsRow" },
                    React.createElement("div", { className: "schoolNewsTitle" },
                        React.createElement("div", null, "\u8BBA\u575B\u603B\u56DE\u590D\u6570"),
                        React.createElement("div", { className: "mainPageCountRed" }, data.postCount))),
                React.createElement("div", { className: "schoolNewsRow" },
                    React.createElement("div", { className: "schoolNewsTitle" },
                        React.createElement("div", null, "\u603B\u7528\u6237\u6570"),
                        React.createElement("div", { className: "mainPageCountRed" }, data.userCount))),
                React.createElement("div", { className: "schoolNewsRow" },
                    React.createElement("div", { className: "schoolNewsTitle" },
                        React.createElement("div", null, "\u6B22\u8FCE\u65B0\u7528\u6237"),
                        React.createElement("div", { className: "mainPageCountRed" }, data.lastUserName)))));
    };
    return Count;
}(React.Component));
exports.Count = Count;
/**
 * 主页
 */
var MainPage = /** @class */ (function (_super) {
    __extends(MainPage, _super);
    function MainPage() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MainPage.prototype.render = function () {
        return React.createElement("div", { className: "mainPage" },
            React.createElement("div", { className: "leftPart" },
                React.createElement(AnnouncementComponent, null),
                React.createElement(RecommendedReadingComponent, null),
                React.createElement("div", { className: "row", style: { justifyContent: "space-between" } },
                    React.createElement(HotTopicComponent, null),
                    React.createElement(MainPageTopicComponent, { name: "校园活动", fetchUrl: "/topic/school-event", style: "blue" })),
                React.createElement("div", { className: "row", style: { justifyContent: "space-between" } },
                    React.createElement(MainPageTopicComponent, { name: "学术信息", fetchUrl: "/topic/academics", style: "black" }),
                    React.createElement(MainPageTopicComponent, { name: "学习园地", fetchUrl: "/topic/study", style: "black" })),
                React.createElement("div", { className: "row", style: { justifyContent: "space-between" } },
                    React.createElement(MainPageTopicComponent, { name: "感性·情感", fetchUrl: "/topic/emotion", style: "blue" }),
                    React.createElement(MainPageTopicComponent, { name: "跳蚤市场", fetchUrl: "/topic/flea-market", style: "blue" })),
                React.createElement("div", { className: "row", style: { justifyContent: "space-between" } },
                    React.createElement(MainPageTopicComponent, { name: "求职广场", fetchUrl: "/topic/full-time-job", style: "black" }),
                    React.createElement(MainPageTopicComponent, { name: "实习兼职", fetchUrl: "/topic/part-time-job", style: "black" }))),
            React.createElement("div", { className: "rightPart" },
                React.createElement(RecommendedFunctionComponent, null),
                React.createElement(SchoolNewsComponent, null),
                React.createElement(MainPageAdComponent, null),
                React.createElement(Count, null)));
    };
    return MainPage;
}(React.Component));
exports.MainPage = MainPage;


/***/ }),
/* 492 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var react_redux_1 = __webpack_require__(26);
var UserNavigation_1 = __webpack_require__(493);
var UserRouter_1 = __webpack_require__(494);
var Status_1 = __webpack_require__(62);
var UserBeforeConnent = /** @class */ (function (_super) {
    __extends(UserBeforeConnent, _super);
    function UserBeforeConnent() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    UserBeforeConnent.prototype.render = function () {
        if (this.props.isError) {
            return React.createElement(Status_1.NotFoundUser, null);
        }
        return (React.createElement("div", { className: "user-center" },
            React.createElement("div", { className: "user-center-content" },
                React.createElement("div", { className: "user-center-head" },
                    React.createElement("p", null, "\u7528\u6237\u8BE6\u60C5")),
                React.createElement("div", { className: "user-center-body" },
                    React.createElement(UserNavigation_1.UserNavigation, null),
                    React.createElement(UserRouter_1.UserRouter, null)))));
    };
    return UserBeforeConnent;
}(React.Component));
function mapState(state) {
    return {
        isError: !state.userInfo.currentVisitingUserIsExisted
    };
}
exports.User = react_redux_1.connect(mapState, null)(UserBeforeConnent);


/***/ }),
/* 493 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var react_router_dom_1 = __webpack_require__(8);
var react_redux_1 = __webpack_require__(26);
var UserNavigationBeforeConnect = /** @class */ (function (_super) {
    __extends(UserNavigationBeforeConnect, _super);
    function UserNavigationBeforeConnect() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    UserNavigationBeforeConnect.prototype.render = function () {
        return (React.createElement("div", { className: "user-center-navigation", id: "userCenterNavigation" },
            React.createElement("ul", null,
                React.createElement("li", null,
                    React.createElement(react_router_dom_1.Link, { to: "/user/id/" + this.props.id, className: this.props.currentVisitingUserPage === 'exact' ? "user-center-navigation-active fa-home" : "fa-home" },
                        React.createElement("span", { style: { width: '0.5rem' } }),
                        "\u4E3B\u9875")),
                React.createElement("hr", null),
                this.props.isManager === '管理员' ? React.createElement("li", null,
                    React.createElement(react_router_dom_1.Link, { to: "/user/id/" + this.props.id + "/manage", className: this.props.currentVisitingUserPage === 'manage' ? "user-center-navigation-active fa-cog" : "fa-cog" },
                        React.createElement("span", { style: { width: '0.5rem' } }),
                        "\u7BA1\u7406")) : null)));
    };
    return UserNavigationBeforeConnect;
}(React.Component));
function mapState(state) {
    return {
        isManager: state.userInfo.currentUserInfo.privilege,
        currentVisitingUserPage: state.userInfo.currentVisitingUserPage,
        id: state.userInfo.currentVisitingUserId
    };
}
exports.UserNavigation = react_redux_1.connect(mapState, null)(UserNavigationBeforeConnect);


/***/ }),
/* 494 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var react_router_dom_1 = __webpack_require__(8);
var react_redux_1 = __webpack_require__(26);
var UserManage_1 = __webpack_require__(495);
var UserExactProfile_1 = __webpack_require__(499);
var UserRouterActivities_1 = __webpack_require__(500);
var UserCenterExactAvatar_1 = __webpack_require__(168);
var Actions_1 = __webpack_require__(36);
var Utility = __webpack_require__(2);
var UserRouter = /** @class */ (function (_super) {
    __extends(UserRouter, _super);
    function UserRouter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    UserRouter.prototype.render = function () {
        return (React.createElement("div", { className: "user-center-router" },
            React.createElement(react_router_dom_1.Route, { path: "/user/:method/:id?", exact: true, component: UserExactWithRouter }),
            React.createElement(react_router_dom_1.Route, { path: "/user/:method/:id/manage", component: UserManage_1.default })));
    };
    return UserRouter;
}(React.Component));
exports.UserRouter = UserRouter;
var UserExact = /** @class */ (function (_super) {
    __extends(UserExact, _super);
    function UserExact() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    UserExact.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var url, _a, id, method, myHeaders, _b, _c, _d, response, data, e_1;
            return __generator(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        _e.trys.push([0, 4, , 5]);
                        url = void 0, _a = this.props.match.params, id = _a.id, method = _a.method, myHeaders = new Headers();
                        if (!id) {
                            throw new Error();
                        }
                        else if (method === 'name') {
                            url = "/User/Name/" + encodeURIComponent(id);
                        }
                        else if (method === 'id') {
                            url = "/User/" + id;
                        }
                        _c = (_b = myHeaders).append;
                        _d = ['Authorization'];
                        return [4 /*yield*/, Utility.getToken()];
                    case 1:
                        _c.apply(_b, _d.concat([_e.sent()]));
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                headers: myHeaders
                            })];
                    case 2:
                        response = _e.sent();
                        return [4 /*yield*/, response.json()];
                    case 3:
                        data = _e.sent();
                        this.props.history.replace("/user/id/" + data.id);
                        this.props.changePage('exact', data.id);
                        this.setState({
                            userInfo: data,
                            userAvatarImgURL: data.portraitUrl,
                            responseState: response.status
                        });
                        return [3 /*break*/, 5];
                    case 4:
                        e_1 = _e.sent();
                        this.props.notFoundUser();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    UserExact.prototype.render = function () {
        var element;
        if (this.state !== null && this.state.responseState === 200) {
            element = (React.createElement("div", { className: "user-center-exact" },
                React.createElement(UserCenterExactAvatar_1.UserCenterExactAvatar, { userAvatarImgURL: this.state.userAvatarImgURL }),
                React.createElement(UserExactProfile_1.UserExactProfile, { userInfo: this.state.userInfo }),
                React.createElement(UserRouterActivities_1.UserRouterActivities, { id: this.state.userInfo.id })));
        }
        else {
            element = React.createElement("div", { className: "user-center-loading" },
                React.createElement("p", { className: "fa fa-spinner fa-pulse fa-2x fa-fw" }));
        }
        return element;
    };
    return UserExact;
}(React.Component));
function mapDispatch(dispatch) {
    return {
        changePage: function (page, id) {
            dispatch(Actions_1.changeCurrentVisitingUserPage(page, id));
        },
        notFoundUser: function () {
            dispatch(Actions_1.userNotFound());
        }
    };
}
var UserExactWithRouter = react_router_dom_1.withRouter(react_redux_1.connect(null, mapDispatch)(UserExact));


/***/ }),
/* 495 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var Actions_1 = __webpack_require__(36);
var react_redux_1 = __webpack_require__(26);
var Operation_1 = __webpack_require__(496);
var DeleteTopicsAndPosts_1 = __webpack_require__(497);
var ShowPost_1 = __webpack_require__(498);
var UserManageState = /** @class */ (function () {
    function UserManageState() {
    }
    return UserManageState;
}());
var UserManage = /** @class */ (function (_super) {
    __extends(UserManage, _super);
    function UserManage(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            userInfo: null,
            isLoading: true
        };
        return _this;
    }
    UserManage.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var id, url, myHeaders, _a, _b, _c, response, data, e_1;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        id = this.props.id === 0 ? this.props.match.params.id : this.props.id;
                        this.props.changePage('manage', id);
                        _d.label = 1;
                    case 1:
                        _d.trys.push([1, 5, , 6]);
                        url = "/User/" + id;
                        myHeaders = new Headers();
                        _b = (_a = myHeaders).append;
                        _c = ['Authorization'];
                        return [4 /*yield*/, Utility.getToken()];
                    case 2:
                        _b.apply(_a, _c.concat([_d.sent()]));
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                headers: myHeaders
                            })];
                    case 3:
                        response = _d.sent();
                        return [4 /*yield*/, response.json()];
                    case 4:
                        data = _d.sent();
                        this.setState({
                            userInfo: data,
                            isLoading: false
                        });
                        return [3 /*break*/, 6];
                    case 5:
                        e_1 = _d.sent();
                        this.props.notFoundUser();
                        return [3 /*break*/, 6];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    UserManage.prototype.render = function () {
        if (this.state.isLoading) {
            return React.createElement("div", { className: "user-center-loading" },
                React.createElement("p", { className: "fa fa-spinner fa-pulse fa-2x fa-fw" }));
        }
        return (React.createElement("div", { className: "user-manage" },
            React.createElement("div", { className: "user-manage-infos" },
                React.createElement("h2", null, "\u7528\u6237\u4FE1\u606F"),
                React.createElement("div", { className: "user-manage-info" },
                    React.createElement("p", null,
                        "id:",
                        this.state.userInfo.id),
                    React.createElement("p", null,
                        "name: ",
                        this.state.userInfo.name))),
            React.createElement(Operation_1.default, { id: this.props.id }),
            React.createElement(DeleteTopicsAndPosts_1.default, { id: this.props.id }),
            React.createElement(ShowPost_1.default, { id: this.props.id })));
    };
    return UserManage;
}(React.Component));
function mapState(state) {
    return {
        id: state.userInfo.currentVisitingUserId
    };
}
function mapDispatch(dispatch) {
    return {
        changePage: function (page, id) {
            dispatch(Actions_1.changeCurrentVisitingUserPage(page, id));
        },
        notFoundUser: function () {
            dispatch(Actions_1.userNotFound());
        }
    };
}
exports.default = react_redux_1.connect(mapState, mapDispatch)((UserManage));


/***/ }),
/* 496 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var Utility_1 = __webpack_require__(2);
/**
 * 全站TP需提交的BODY类型
 */
var ForumUserOperation = /** @class */ (function () {
    function ForumUserOperation() {
    }
    return ForumUserOperation;
}());
/**
 * TP组件的状态
 */
var OperationState = /** @class */ (function () {
    function OperationState() {
    }
    return OperationState;
}());
/**
 * TP组件的属性
 */
var OperationProps = /** @class */ (function () {
    function OperationProps() {
    }
    return OperationProps;
}());
var Operation = /** @class */ (function (_super) {
    __extends(Operation, _super);
    function Operation(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            ForumUserOperation: new ForumUserOperation(),
            info: ''
        };
        return _this;
    }
    Operation.prototype.handleForumUserOperationChange = function (key, value) {
        this.setState(function (prevState) {
            return ({
                ForumUserOperation: __assign({}, prevState.ForumUserOperation, (_a = {}, _a[key] = value, _a))
            });
            var _a;
        });
    };
    Operation.prototype.handleSubmit = function (isCancle) {
        return __awaiter(this, void 0, void 0, function () {
            var _a, Days, PunishmentType, url, token, headers, res, e_1;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.state.ForumUserOperation, Days = _a.Days, PunishmentType = _a.PunishmentType;
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 4, , 5]);
                        if (!this.state.ForumUserOperation.Reason) {
                            throw new Error('请填写理由');
                        }
                        else if (!isCancle && PunishmentType === 3 && (Days < -1 || Days > 1000 || (Days < 7 && Days > -1))) {
                            throw new Error('不合法的TP天数');
                        }
                        url = "/user/" + this.props.id + "/operation";
                        return [4 /*yield*/, Utility_1.getToken()];
                    case 2:
                        token = _b.sent();
                        headers = new Headers();
                        headers.append('Authorization', token);
                        headers.append('Content-Type', 'application/json');
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                method: 'PUT',
                                headers: headers,
                                body: JSON.stringify(__assign({}, this.state.ForumUserOperation, { OperationType: isCancle ? 0 : 1 }))
                            })];
                    case 3:
                        res = _b.sent();
                        this.setState({
                            info: '操作成功'
                        });
                        return [3 /*break*/, 5];
                    case 4:
                        e_1 = _b.sent();
                        this.setState({
                            info: e_1.message
                        });
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    Operation.prototype.render = function () {
        var _this = this;
        return (React.createElement("div", null,
            React.createElement("h2", null, "TP"),
            React.createElement("div", { className: "user-manager" },
                React.createElement("p", null, "OperationType: "),
                React.createElement("select", { onChange: function (e) { _this.handleForumUserOperationChange('PunishmentType', Number.parseInt(e.target.value)); } },
                    React.createElement("option", { value: 0, disabled: true }, "\u672A\u9009\u62E9"),
                    React.createElement("option", { value: 1 }, "\u9501\u5B9A"),
                    React.createElement("option", { value: 2 }, "\u5C4F\u853D"),
                    React.createElement("option", { value: 3 }, "TP")),
                React.createElement("p", null, "Reason: "),
                React.createElement("input", { type: "text", onChange: function (e) { _this.handleForumUserOperationChange('Reason', e.target.value); }, value: this.state.ForumUserOperation.Reason }),
                React.createElement("p", null, "Days: "),
                React.createElement("input", { type: "number", onChange: function (e) { _this.handleForumUserOperationChange('Days', Number.parseInt(e.target.value)); }, value: this.state.ForumUserOperation.Days }),
                React.createElement("button", { type: "button", onClick: function () { _this.handleSubmit(false); } }, "\u63D0\u4EA4"),
                React.createElement("button", { type: "button", onClick: function () { _this.handleSubmit(true); } }, "\u89E3\u9664")),
            React.createElement("p", { className: "user-manage-return" }, this.state.info)));
    };
    return Operation;
}(React.Component));
exports.default = Operation;


/***/ }),
/* 497 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var Utility_1 = __webpack_require__(2);
var Delete = /** @class */ (function (_super) {
    __extends(Delete, _super);
    function Delete(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            days: 0,
            info: ''
        };
        return _this;
    }
    Delete.prototype.handleSubmit = function (isPost) {
        return __awaiter(this, void 0, void 0, function () {
            var item, id, days, url, token, headers, res, data, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 4, , 5]);
                        item = isPost ? 'post' : 'topic';
                        id = this.props.id;
                        days = this.state.days;
                        if (days < 1 || days > 365) {
                            throw new Error('请检查日期');
                        }
                        url = "/user/" + id + "/" + item + "?days=" + days;
                        return [4 /*yield*/, Utility_1.getToken()];
                    case 1:
                        token = _a.sent();
                        headers = new Headers();
                        headers.append('Authorization', token);
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                method: 'DELETE',
                                headers: headers
                            })];
                    case 2:
                        res = _a.sent();
                        return [4 /*yield*/, res.json()];
                    case 3:
                        data = _a.sent();
                        this.setState({
                            info: "\u5220\u6389\u4E86" + data + "\u6761" + item
                        });
                        return [3 /*break*/, 5];
                    case 4:
                        e_1 = _a.sent();
                        this.setState({
                            info: e_1.message
                        });
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    Delete.prototype.render = function () {
        var _this = this;
        return (React.createElement("div", null,
            React.createElement("h2", null, "\u5220\u9664\u7528\u6237\u6700\u8FD1\u4E3B\u9898\u4E0E\u56DE\u5E16"),
            React.createElement("div", { className: "user-manager" },
                React.createElement("p", null, "\u5929\u6570\uFF1A"),
                React.createElement("input", { type: "number", onChange: function (e) { _this.setState({ days: Number.parseInt(e.target.value) }); }, value: this.state.days }),
                React.createElement("button", { type: "button", onClick: function () { _this.handleSubmit(false); } }, "\u5220\u4E3B\u9898"),
                React.createElement("button", { type: "button", onClick: function () { _this.handleSubmit(true); } }, "\u5220\u56DE\u590D")),
            React.createElement("p", { className: "user-manage-return" }, this.state.info)));
    };
    return Delete;
}(React.Component));
exports.default = Delete;


/***/ }),
/* 498 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var Utility_1 = __webpack_require__(2);
var react_router_dom_1 = __webpack_require__(8);
var ShowTopic = /** @class */ (function (_super) {
    __extends(ShowTopic, _super);
    function ShowTopic(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            info: '',
            count: 0,
            from: 0,
            isLoading: false,
            days: 1,
            posts: []
        };
        return _this;
    }
    ShowTopic.prototype.handleSubmit = function (from) {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            var token, id, days, url, headers, res, data, posts, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 5, , 6]);
                        this.setState({
                            isLoading: true
                        });
                        return [4 /*yield*/, Utility_1.getToken()];
                    case 1:
                        token = _a.sent();
                        id = this.props.id;
                        days = this.state.days;
                        url = "/User/" + id + "/post?days=" + days + "&from=" + from + "&size=10";
                        headers = new Headers();
                        headers.append('Authorization', token);
                        return [4 /*yield*/, Utility.cc98Fetch(url, { headers: headers })];
                    case 2:
                        res = _a.sent();
                        return [4 /*yield*/, res.json()];
                    case 3:
                        data = _a.sent();
                        posts = data.postInfos.map(function (item) { return __awaiter(_this, void 0, void 0, function () { var _a, _b; return __generator(this, function (_c) {
                            switch (_c.label) {
                                case 0:
                                    _a = [{}, item];
                                    _b = {};
                                    return [4 /*yield*/, Utility_1.getBoardName(item.boardId)];
                                case 1: return [2 /*return*/, (__assign.apply(void 0, _a.concat([(_b.boardName = _c.sent(), _b)])))];
                            }
                        }); }); });
                        return [4 /*yield*/, Promise.all(posts)];
                    case 4:
                        posts = _a.sent();
                        this.setState({
                            posts: posts,
                            isLoading: false,
                            count: data.count,
                            info: posts.length === 0 ? '啥也没有' : '',
                            from: from
                        });
                        return [3 /*break*/, 6];
                    case 5:
                        e_1 = _a.sent();
                        this.setState({
                            info: e_1.message,
                            isLoading: false
                        });
                        return [3 /*break*/, 6];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    ShowTopic.prototype.render = function () {
        var _this = this;
        return (React.createElement("div", null,
            React.createElement("h2", null, "\u67E5\u770B\u7528\u6237\u6700\u8FD1\u53D1\u8A00"),
            React.createElement("div", { className: "user-manager" },
                React.createElement("p", null, "\u5929\u6570\uFF1A"),
                React.createElement("input", { type: "number", onChange: function (e) { _this.setState({ days: Number.parseInt(e.target.value) }); }, value: this.state.days }),
                React.createElement("button", { type: "button", onClick: function () { _this.handleSubmit(0); } }, "\u67E5\u770B"),
                React.createElement("button", { type: "button", disabled: this.state.from === 0, onClick: function () { _this.handleSubmit(_this.state.from - 10); } }, "\u4E0A\u4E00\u9875"),
                React.createElement("button", { type: "button", disabled: (this.state.from + this.state.posts.length) === this.state.count, onClick: function () { _this.handleSubmit(_this.state.from + 10); } }, "\u4E0B\u4E00\u9875")),
            React.createElement("div", { className: "user-manage-return" },
                React.createElement("p", null, this.state.info)),
            (!this.state.isLoading) ? (React.createElement("div", null,
                this.state.posts.map(function (item) { return (React.createElement("div", { className: "user-manage-post" },
                    React.createElement("p", { className: "user-manage-post-date" }, item.time.slice(0, 19).replace('T', ' ')),
                    item.floor === -1 ?
                        React.createElement("p", { className: "user-manage-post-content" }, item.content) :
                        React.createElement(react_router_dom_1.Link, { className: "user-manage-post-content", to: "/topic/" + item.topicId + "/" + (Math.floor((item.floor - 1) / 10) + 1) + "#" + (item.floor % 10 === 0 ? 10 : item.floor % 10), target: "_blank" }, item.content),
                    React.createElement(react_router_dom_1.Link, { className: "user-manage-post-board", to: "/list/" + item.boardId, target: "_blank" }, item.boardName),
                    React.createElement("p", { className: "user-manage-post-floor" }, item.floor === -1 ? '已删除' : item.floor),
                    React.createElement("p", { className: "user-manage-post-ip" }, item.ip))); }),
                this.state.posts.length > 0 ?
                    React.createElement("p", { style: { textAlign: 'right' } },
                        "\u603B\u5171\u6709",
                        this.state.count,
                        "\u6761\u5E16\u5B50\uFF0C\u5F53\u524D\u663E\u793A\u7B2C",
                        Math.floor(this.state.from / 10) + 1,
                        "\u9875\uFF0C\u5171",
                        Math.floor(this.state.count / 10) + 1,
                        "\u9875")
                    : null)) : React.createElement("div", { className: "user-center-loading" },
                React.createElement("p", { className: "fa fa-spinner fa-pulse fa-2x fa-fw" }))));
    };
    return ShowTopic;
}(React.Component));
exports.default = ShowTopic;


/***/ }),
/* 499 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var react_router_dom_1 = __webpack_require__(8);
var UbbContainer_1 = __webpack_require__(15);
var Utility = __webpack_require__(2);
/**
 * 用户中心主页个人资料组件
 */
var UserExactProfile = /** @class */ (function (_super) {
    __extends(UserExactProfile, _super);
    function UserExactProfile(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            isFollowing: _this.props.userInfo.isFollowing,
            buttonIsDisabled: false,
            buttonInfo: _this.props.userInfo.isFollowing ? '已关注' : '关注'
        };
        _this.unfollow = _this.unfollow.bind(_this);
        _this.follow = _this.follow.bind(_this);
        return _this;
    }
    UserExactProfile.prototype.follow = function () {
        return __awaiter(this, void 0, void 0, function () {
            var res;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.setState({
                            buttonIsDisabled: true,
                            buttonInfo: '关注中'
                        });
                        return [4 /*yield*/, Utility.followUser(Number.parseInt(this.props.userInfo.id))];
                    case 1:
                        res = _a.sent();
                        if (res === true) {
                            this.setState({
                                buttonIsDisabled: false,
                                buttonInfo: '已关注',
                                isFollowing: true
                            });
                        }
                        else if (res === 'follow_count_limited') {
                            this.setState({
                                buttonIsDisabled: false,
                                buttonInfo: '已达上限',
                                isFollowing: false
                            });
                        }
                        else {
                            this.setState({
                                buttonIsDisabled: false,
                                buttonInfo: '关注失败',
                                isFollowing: false
                            });
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    UserExactProfile.prototype.getPrivilegeColor = function () {
        switch (this.props.userInfo.privilege) {
            case '注册用户': return 'grey';
            case '超级版主': return 'pink';
            case '全站贵宾': return 'blue';
            case '管理员': return 'red';
        }
    };
    UserExactProfile.prototype.unfollow = function () {
        return __awaiter(this, void 0, void 0, function () {
            var state;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.setState({
                            buttonIsDisabled: true,
                            buttonInfo: '取关中'
                        });
                        return [4 /*yield*/, Utility.unfollowUser(Number.parseInt(this.props.userInfo.id))];
                    case 1:
                        state = _a.sent();
                        if (state === true) {
                            this.setState({
                                buttonIsDisabled: false,
                                buttonInfo: '重新关注',
                                isFollowing: false
                            });
                        }
                        else {
                            this.setState({
                                buttonIsDisabled: false,
                                buttonInfo: '取关失败',
                                isFollowing: true
                            });
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    UserExactProfile.prototype.render = function () {
        var _this = this;
        var isBirthDay = false;
        if (!!this.props.userInfo.birthday) {
            var match = this.props.userInfo.birthday.match(/\d+-(\d+)-(\d+)/);
            var now = new Date();
            if (Number.parseInt(match[1]) === (now.getMonth() + 1) && Number.parseInt(match[2]) === now.getDate()) {
                isBirthDay = true;
            }
        }
        return (React.createElement("div", { className: "user-profile" },
            React.createElement("div", { id: "userId" },
                React.createElement("div", { id: "userId" },
                    React.createElement("p", null,
                        this.props.userInfo.name,
                        React.createElement("span", { style: { fontSize: '12px', color: this.getPrivilegeColor(), marginLeft: '2rem' } }, this.props.userInfo.privilege)),
                    React.createElement(react_router_dom_1.Link, { to: "/message/message?id=" + this.props.userInfo.id },
                        React.createElement("button", { type: "button" }, "\u79C1\u4FE1")),
                    React.createElement("button", { type: "button", id: this.state.isFollowing ? 'unfollow' : '', onClick: this.state.isFollowing ? this.unfollow : this.follow, disabled: this.state.buttonIsDisabled, onMouseOver: function () {
                            if (_this.state.isFollowing && !_this.state.buttonIsDisabled) {
                                _this.setState({
                                    buttonInfo: '取消关注'
                                });
                            }
                        }, onMouseLeave: function () {
                            if (_this.state.isFollowing && !_this.state.buttonIsDisabled) {
                                _this.setState({
                                    buttonInfo: '已关注'
                                });
                            }
                        } }, this.state.buttonInfo))),
            React.createElement("div", { id: "userIntroducion" }, this.props.userInfo.introduction),
            React.createElement("div", { id: "userGenderAndBirthday" },
                React.createElement("p", null,
                    React.createElement("span", { className: "user-profile-info" }, "\u6027\u522B"),
                    (this.props.userInfo.gender === 1) ? '男' : '女',
                    " "),
                React.createElement("p", null,
                    React.createElement("span", { className: "user-profile-info" }, "\u53D1\u5E16\u6570"),
                    this.props.userInfo.postCount),
                React.createElement("p", null,
                    React.createElement("span", { className: "user-profile-info" }, "\u5A01\u671B"),
                    this.props.userInfo.prestige),
                React.createElement("p", null,
                    React.createElement("span", { className: "user-profile-info" }, "\u98CE\u8BC4"),
                    this.props.userInfo.popularity),
                React.createElement("p", null,
                    React.createElement("span", { className: "user-profile-info" }, "\u6CE8\u518C\u65F6\u95F4"),
                    this.props.userInfo.registerTime.replace('T', ' ')),
                React.createElement("p", null,
                    React.createElement("span", { className: "user-profile-info" }, "\u6700\u540E\u767B\u5F55"),
                    this.props.userInfo.lastLogOnTime.replace('T', ' ')),
                this.props.userInfo.birthday === null ? null : React.createElement("p", null,
                    React.createElement("span", { className: "user-profile-info" }, "\u751F\u65E5"),
                    this.props.userInfo.birthday.slice(0, this.props.userInfo.birthday.indexOf('T')).replace('9999-', ''),
                    isBirthDay ? React.createElement("span", { style: { fontFamily: 'FontAwesome', marginLeft: '1rem' }, className: "fa-birthday-cake", title: "生日快乐~" }) : null),
                this.props.userInfo.displayTitle ? React.createElement("p", null,
                    React.createElement("span", { className: "user-profile-info" }, "\u7528\u6237\u7EC4"),
                    this.props.userInfo.displayTitle) : null,
                this.props.userInfo.emailAddress ? React.createElement("p", null,
                    React.createElement("span", { className: "user-profile-info" }, "\u90AE\u7BB1"),
                    this.props.userInfo.emailAddress) : null,
                this.props.userInfo.qq ? React.createElement("p", null,
                    React.createElement("span", { className: "user-profile-info" }, "QQ"),
                    this.props.userInfo.qq) : null),
            this.props.userInfo.signatureCode ?
                React.createElement("div", { className: "user-description" },
                    React.createElement("p", null, "\u4E2A\u6027\u7B7E\u540D"),
                    React.createElement(UbbContainer_1.UbbContainer, { code: this.props.userInfo.signatureCode })) : null));
    };
    return UserExactProfile;
}(React.Component));
exports.UserExactProfile = UserExactProfile;


/***/ }),
/* 500 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var UserCenterExactActivitiesPost_1 = __webpack_require__(86);
var AppState_1 = __webpack_require__(37);
var Utility = __webpack_require__(2);
//用户中心主页帖子动态组件
var UserRouterActivities = /** @class */ (function (_super) {
    __extends(UserRouterActivities, _super);
    function UserRouterActivities(props) {
        var _this = _super.call(this, props) || this;
        //临时填充数据
        _this.state = {
            userRecentPosts: [],
            isLoading: false
        };
        _this.scrollHandler = _this.scrollHandler.bind(_this);
        return _this;
    }
    UserRouterActivities.prototype.scrollHandler = function (e) {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            var pageYLeft, url, token, headers, res, data, posts_1, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        pageYLeft = document.body.scrollHeight - window.pageYOffset;
                        if (!(pageYLeft < 1500 && this.state.isLoading === false)) return [3 /*break*/, 9];
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 8, , 9]);
                        this.setState({ isLoading: true });
                        url = "/user/" + this.props.id + "/recent-topic?userid=" + this.props.id + "&from=" + this.state.userRecentPosts.length + "&size=11";
                        return [4 /*yield*/, Utility.getToken()];
                    case 2:
                        token = _a.sent();
                        headers = new Headers();
                        headers.append('Authorization', token);
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                headers: headers
                            })];
                    case 3:
                        res = _a.sent();
                        if (!(res.status === 200)) return [3 /*break*/, 6];
                        return [4 /*yield*/, res.json()];
                    case 4:
                        data = _a.sent();
                        if (data.length < 10) {
                            window.removeEventListener('scroll', this.scrollHandler);
                        }
                        else {
                            data.pop();
                        }
                        return [4 /*yield*/, Promise.all(data.map(function (item) { return (_this.item2post(item)); }))];
                    case 5:
                        posts_1 = _a.sent();
                        this.setState(function (prevState) { return ({
                            userRecentPosts: prevState.userRecentPosts.concat(posts_1),
                            isLoading: false
                        }); });
                        return [3 /*break*/, 7];
                    case 6: throw {};
                    case 7: return [3 /*break*/, 9];
                    case 8:
                        e_1 = _a.sent();
                        this.setState({
                            isLoading: false
                        });
                        console.log('用户中心滚动加载失败');
                        return [3 /*break*/, 9];
                    case 9: return [2 /*return*/];
                }
            });
        });
    };
    UserRouterActivities.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var url, token, headers, res, data, posts, i, post, e_2;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 9, , 10]);
                        url = "/user/" + this.props.id + "/recent-topic?userid=" + this.props.id + "&from=" + this.state.userRecentPosts.length + "&size=11";
                        return [4 /*yield*/, Utility.getToken()];
                    case 1:
                        token = _a.sent();
                        headers = new Headers();
                        headers.append('Authorization', token);
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                headers: headers
                            })];
                    case 2:
                        res = _a.sent();
                        if (!(res.status === 200)) return [3 /*break*/, 7];
                        return [4 /*yield*/, res.json()];
                    case 3:
                        data = _a.sent();
                        posts = [], i = data.length;
                        _a.label = 4;
                    case 4:
                        if (!i--) return [3 /*break*/, 6];
                        return [4 /*yield*/, this.item2post(data[i])];
                    case 5:
                        post = _a.sent();
                        posts.unshift(post);
                        return [3 /*break*/, 4];
                    case 6:
                        this.setState({
                            userRecentPosts: posts
                        });
                        if (data.length === 10) {
                            window.addEventListener('scroll', this.scrollHandler);
                        }
                        return [3 /*break*/, 8];
                    case 7: throw new Error();
                    case 8: return [3 /*break*/, 10];
                    case 9:
                        e_2 = _a.sent();
                        console.log('用户中心帖子加载失败');
                        return [3 /*break*/, 10];
                    case 10: return [2 /*return*/];
                }
            });
        });
    };
    UserRouterActivities.prototype.componentWillUnmount = function () {
        window.removeEventListener('scroll', this.scrollHandler);
    };
    UserRouterActivities.prototype.item2post = function (item) {
        return __awaiter(this, void 0, void 0, function () {
            var userRecentPost, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        userRecentPost = new AppState_1.UserRecentPost();
                        userRecentPost.approval = item.likeCount;
                        _a = userRecentPost;
                        return [4 /*yield*/, Utility.getBoardName(item.boardId)];
                    case 1:
                        _a.board = _b.sent();
                        userRecentPost.date = item.time.replace('T', ' ').slice(0, 19);
                        userRecentPost.disapproval = item.dislikeCount;
                        userRecentPost.content = item.title;
                        userRecentPost.id = item.id;
                        userRecentPost.boardId = item.boardId;
                        userRecentPost.name = item.userName;
                        userRecentPost.isAnonymous = item.isAnonymous;
                        return [2 /*return*/, userRecentPost];
                }
            });
        });
    };
    UserRouterActivities.prototype.render = function () {
        if (this.state.userRecentPosts.length === 0) {
            var style = {
                marginLeft: '2rem'
            };
            return (React.createElement("div", { className: "user-activities" },
                React.createElement("p", null, "\u53D1\u8868\u7684\u4E3B\u9898"),
                React.createElement("div", { className: "user-posts", style: style }, "\u6CA1\u6709\u4E3B\u9898")));
        }
        //state转换为JSX
        var userRecentPosts = this.state.userRecentPosts.map(function (item) { return (React.createElement(UserCenterExactActivitiesPost_1.UserCenterExactActivitiesPost, { userRecentPost: item })); });
        //添加分隔线
        for (var i = 1; i < userRecentPosts.length; i += 2) {
            userRecentPosts.splice(i, 0, React.createElement("hr", null));
        }
        return (React.createElement("div", { className: "user-activities" },
            React.createElement("p", null, "\u53D1\u8868\u7684\u4E3B\u9898"),
            React.createElement("div", { className: "user-posts" }, userRecentPosts)));
    };
    return UserRouterActivities;
}(React.Component));
exports.UserRouterActivities = UserRouterActivities;


/***/ }),
/* 501 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var $ = __webpack_require__(35);
var Utility = __webpack_require__(2);
var Actions = __webpack_require__(36);
var react_redux_1 = __webpack_require__(26);
var Actions_1 = __webpack_require__(36);
var react_router_dom_1 = __webpack_require__(8);
var LogOnExact = /** @class */ (function (_super) {
    __extends(LogOnExact, _super);
    function LogOnExact(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            loginName: '',
            loginPassword: '',
            loginMessage: '',
            isLoging: false
        };
        _this.handleNameChange = _this.handleNameChange.bind(_this);
        _this.handlePasswordChange = _this.handlePasswordChange.bind(_this);
        _this.handleLogin = _this.handleLogin.bind(_this);
        return _this;
    }
    LogOnExact.prototype.shake = function (element) {
        element.classList.add('shake');
        setTimeout(function () { element.classList.remove('shake'); }, 500);
        return element;
    };
    LogOnExact.prototype.handleNameChange = function (e) {
        this.setState({
            loginName: e.target.value
        });
    };
    LogOnExact.prototype.handlePasswordChange = function (e) {
        this.setState({
            loginPassword: e.target.value
        });
    };
    LogOnExact.prototype.handleLogin = function (e) {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            var url, requestBody, headers, response, data, token, userInfo, e_1, info;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        //阻止表单提交
                        e.preventDefault();
                        //如果在登录中则无视提交
                        if (this.state.isLoging) {
                            return [2 /*return*/, false];
                        }
                        //缺少用户名或者密码
                        if (!this.state.loginName) {
                            this.setState({
                                loginMessage: '请输入用户名'
                            });
                            this.shake(document.getElementById('loginName')).focus();
                            return [2 /*return*/, false];
                        }
                        else if (!this.state.loginPassword) {
                            this.setState({
                                loginMessage: '请输入密码'
                            });
                            this.shake(document.getElementById('loginPassword')).focus();
                            return [2 /*return*/, false];
                        }
                        //登录
                        this.setState({
                            loginMessage: '登录中',
                            isLoging: true
                        });
                        this.props.logOff();
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 5, , 6]);
                        url = 'https://openid.cc98.org/connect/token';
                        requestBody = {
                            'client_id': '9a1fd200-8687-44b1-4c20-08d50a96e5cd',
                            'client_secret': '8b53f727-08e2-4509-8857-e34bf92b27f2',
                            'grant_type': 'password',
                            'username': this.state.loginName,
                            'password': this.state.loginPassword,
                            'scope': "cc98-api openid"
                        };
                        headers = new Headers();
                        headers.append('Content-Type', 'application/x-www-form-urlencoded');
                        return [4 /*yield*/, fetch(url, {
                                method: "POST",
                                headers: headers,
                                body: $.param(requestBody)
                            })];
                    case 2:
                        response = _a.sent();
                        //请求是否成功
                        if (response.status !== 200) {
                            throw new Error(response.status.toString());
                        }
                        return [4 /*yield*/, response.json()];
                    case 3:
                        data = _a.sent();
                        token = "Bearer " + encodeURIComponent(data.access_token);
                        //缓存数据
                        Utility.setLocalStorage("accessToken", token, data.expires_in);
                        Utility.setLocalStorage("password", this.state.loginPassword);
                        Utility.setLocalStorage("userName", this.state.loginName);
                        return [4 /*yield*/, Utility.refreshUserInfo()];
                    case 4:
                        _a.sent();
                        userInfo = Utility.getLocalStorage('userInfo');
                        if (userInfo.lockState === 1 || userInfo.lockState === 2) {
                            throw new Error('账号已锁定');
                        }
                        this.setState({
                            loginMessage: '登录成功 正在返回'
                        });
                        this.props.logOn();
                        this.props.changeUserInfo(userInfo);
                        //跳转
                        setTimeout(function () {
                            if (_this.props.history.length === 1) {
                                _this.props.history.push('/');
                            }
                            else {
                                _this.props.history.go(-1);
                            }
                        }, 100);
                        return [3 /*break*/, 6];
                    case 5:
                        e_1 = _a.sent();
                        info = void 0;
                        Utility.removeLocalStorage('userName');
                        Utility.removeLocalStorage('userInfo');
                        Utility.removeLocalStorage("accessToken");
                        Utility.removeLocalStorage("password");
                        switch (e_1.message) {
                            case '400':
                                info = '密码错误';
                                break;
                            default: info = '未知错误 ' + e_1.message;
                        }
                        this.setState({
                            loginMessage: "\u767B\u5F55\u5931\u8D25 " + info,
                            isLoging: false
                        });
                        this.props.logOff();
                        return [3 /*break*/, 6];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    LogOnExact.prototype.render = function () {
        return (React.createElement("div", { className: "login" },
            React.createElement("div", null,
                React.createElement("img", { src: "/images/login.png" }),
                React.createElement("div", null,
                    React.createElement("img", { src: "/images/login_welcome.png" }),
                    React.createElement("form", { onSubmit: this.handleLogin, autoComplete: "on" },
                        React.createElement("div", { className: "login-form" },
                            React.createElement("p", null, "\u7528\u6237\u540D"),
                            React.createElement("input", { name: "username", type: "text", id: "loginName", onChange: this.handleNameChange, value: this.state.loginName, autoComplete: "username" })),
                        React.createElement("div", { className: "login-form" },
                            React.createElement("p", null, "\u5BC6\u7801"),
                            React.createElement("input", { name: "password", type: "password", id: "loginPassword", onChange: this.handlePasswordChange, autoComplete: "current-password" })),
                        React.createElement("p", { id: "loginMessage" }, this.state.loginMessage),
                        React.createElement("button", { type: "submit", disabled: this.state.isLoging }, "\u767B\u5F55\u8D26\u53F7")),
                    React.createElement("p", null,
                        React.createElement("span", null,
                            "\u8FD8\u6CA1\u8D26\u53F7\uFF1F\u6211\u8981 ",
                            React.createElement("a", { href: "" }, "\u6CE8\u518C")))))));
    };
    return LogOnExact;
}(React.Component));
/**
 * 登录页状态
 */
var LogOnState = /** @class */ (function () {
    function LogOnState() {
    }
    return LogOnState;
}());
function mapState(state) {
    return {
        isLogOn: state.userInfo.isLogOn
    };
}
function mapDispatch(disPatch) {
    return {
        logOn: function () {
            disPatch(Actions.userLogIn());
        },
        logOff: function () {
            disPatch(Actions.userLogOff());
        },
        changeUserInfo: function (newInfo) {
            disPatch(Actions_1.changeUserInfo(newInfo));
        }
    };
}
exports.default = react_redux_1.connect(mapState, mapDispatch)(react_router_dom_1.withRouter(LogOnExact));


/***/ }),
/* 502 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var react_redux_1 = __webpack_require__(26);
var Actions_1 = __webpack_require__(36);
var react_router_dom_1 = __webpack_require__(8);
var LogOffBefore = /** @class */ (function (_super) {
    __extends(LogOffBefore, _super);
    function LogOffBefore(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            logOffInfo: '登出中'
        };
        return _this;
    }
    LogOffBefore.prototype.componentDidMount = function () {
        var _this = this;
        localStorage.removeItem("accessToken");
        localStorage.removeItem("userName");
        this.setState({
            logOffInfo: '登出成功 正在前往登录页'
        });
        setTimeout(function () {
            _this.props.history.push("/logon");
        }, 2000);
    };
    LogOffBefore.prototype.render = function () {
        return (React.createElement("div", { className: "login" },
            React.createElement("div", null,
                React.createElement("img", { src: "/images/login.png" }),
                React.createElement("div", null,
                    React.createElement("p", { className: "LogOffInfo" }, this.state.logOffInfo)))));
    };
    return LogOffBefore;
}(React.Component));
function mapDispatch(dispatch) {
    return {
        logOff: function () {
            dispatch(Actions_1.userLogOff());
        }
    };
}
exports.LogOff = react_redux_1.connect(function () { return null; }, mapDispatch)(react_router_dom_1.withRouter(LogOffBefore));


/***/ }),
/* 503 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var UbbEditor_1 = __webpack_require__(85);
var Constants;
(function (Constants) {
})(Constants = exports.Constants || (exports.Constants = {}));
/*
*拥有权限的账号发帖类型中增加一项校园活动
*拥有权限的账号才可以选择回复仅楼主可见
*只有特定的版面才可以选择回复仅特定用户可见
*/
/*
*react中用户在表单填入的内容，属于用户跟组件的互动，所以不能用this.props读取，而要定义一个 onChange 事件的回调函数，通过 event.target.value 读取用户输入的值
*这里单选框设置默认选中也有Bug，大概也是出于以上原因
*/
var RouteComponent = /** @class */ (function (_super) {
    __extends(RouteComponent, _super);
    function RouteComponent(props, context) {
        return _super.call(this, props, context) || this;
    }
    Object.defineProperty(RouteComponent.prototype, "match", {
        get: function () {
            return this.props.match;
        },
        enumerable: true,
        configurable: true
    });
    return RouteComponent;
}(React.Component));
exports.RouteComponent = RouteComponent;
var CreateTopic = /** @class */ (function (_super) {
    __extends(CreateTopic, _super);
    function CreateTopic(props) {
        var _this = _super.call(this, props) || this;
        _this.update = _this.update.bind(_this);
        _this.changeEditor = _this.changeEditor.bind(_this);
        _this.state = ({ topicId: null, title: '', content: '', ready: false, mode: 0, boardName: "", tags: [] });
        return _this;
    }
    CreateTopic.prototype.componentWillMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var token, url, headers, response, data, boardName, tags;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        token = Utility.getLocalStorage("accessToken");
                        url = "/Board/" + this.match.params.boardId;
                        headers = new Headers();
                        headers.append("Authorization", token);
                        return [4 /*yield*/, Utility.cc98Fetch(url, { headers: headers })];
                    case 1:
                        response = _a.sent();
                        return [4 /*yield*/, response.json()];
                    case 2:
                        data = _a.sent();
                        boardName = data.name;
                        return [4 /*yield*/, Utility.getBoardTag(this.match.params.boardId)];
                    case 3:
                        tags = _a.sent();
                        this.setState({ boardName: boardName, tags: tags });
                        return [2 /*return*/];
                }
            });
        });
    };
    CreateTopic.prototype.ready = function () {
        this.setState({ ready: true });
    };
    CreateTopic.prototype.changeEditor = function () {
        if (this.state.mode === 0) {
            this.setState({ mode: 1 });
        }
        else {
            this.setState({ mode: 0 });
        }
    };
    CreateTopic.prototype.update = function (value) {
        this.setState({ content: value });
    };
    CreateTopic.prototype.sendMdTopic = function (content1) {
        return __awaiter(this, void 0, void 0, function () {
            var url, content, contentJson, token, myHeaders, mes, topicId, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 3, , 4]);
                        url = "/board/" + this.match.params.boardId + "/topic";
                        content = {
                            content: content1,
                            contentType: 1,
                            title: this.state.title
                        };
                        contentJson = JSON.stringify(content);
                        token = Utility.getLocalStorage("accessToken");
                        myHeaders = new Headers();
                        myHeaders.append("Authorization", token);
                        myHeaders.append("Content-Type", 'application/json');
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                method: 'POST',
                                headers: myHeaders,
                                body: contentJson
                            })];
                    case 1:
                        mes = _a.sent();
                        if (mes.status === 402) {
                            alert("请输入内容");
                        }
                        return [4 /*yield*/, mes.text()];
                    case 2:
                        topicId = _a.sent();
                        window.location.href = "/topic/" + topicId;
                        return [3 /*break*/, 4];
                    case 3:
                        e_1 = _a.sent();
                        console.log("Error");
                        console.log(e_1);
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    CreateTopic.prototype.sendUbbTopic = function () {
        return __awaiter(this, void 0, void 0, function () {
            var url, content, contentJson, token, myHeaders, response, topicId, atUsers, atUsersJSON, url2, myHeaders2, response2;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        url = "/board/" + this.match.params.boardId + "/topic";
                        content = {
                            content: this.state.content,
                            contentType: 0,
                            title: this.state.title
                        };
                        contentJson = JSON.stringify(content);
                        token = Utility.getLocalStorage("accessToken");
                        myHeaders = new Headers();
                        myHeaders.append("Authorization", token);
                        myHeaders.append("Content-Type", 'application/json');
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                method: 'POST',
                                headers: myHeaders,
                                body: contentJson
                            })];
                    case 1:
                        response = _a.sent();
                        return [4 /*yield*/, response.text()];
                    case 2:
                        topicId = _a.sent();
                        atUsers = this.atHanderler(this.state.content);
                        if (!atUsers) return [3 /*break*/, 4];
                        atUsersJSON = JSON.stringify(atUsers);
                        url2 = "/notification/atuser?topicid=" + topicId;
                        myHeaders2 = new Headers();
                        myHeaders2.append("Content-Type", 'application/json');
                        myHeaders2.append("Authorization", token);
                        return [4 /*yield*/, Utility.cc98Fetch(url2, {
                                method: 'POST',
                                headers: myHeaders2,
                                body: atUsersJSON
                            })];
                    case 3:
                        response2 = _a.sent();
                        _a.label = 4;
                    case 4:
                        window.location.href = "/topic/" + topicId;
                        return [2 /*return*/];
                }
            });
        });
    };
    /*
    *处理ubb模式下的发帖内容
    *如果存在合法的@，则会返回一个字符串数组，包含至多10个合法的被@用户的昵称，否则返回false
    */
    CreateTopic.prototype.atHanderler = function (content) {
        var reg = new RegExp("@[^ \n]{1,10}?[ \n]", "gm");
        var reg2 = new RegExp("[^@ ]+");
        if (content.match(reg)) {
            var atNum = content.match(reg).length; //合法的@数
            if (atNum > 10)
                atNum = 10; //至多10个
            var ats = new Array();
            /*被临时抛弃的方法*/
            /*
            for (let i = 0; i < 10; i++) {
                let anAt = reg.exec(content)[0];
                console.log(anAt);
                let aUserName = reg2.exec(anAt)[0];
                console.log(aUserName);
            }
            */
            for (var i = 0; i < atNum; i++) {
                var anAt = content.match(reg)[i];
                console.log(anAt);
                var aUserName = reg2.exec(anAt)[0];
                console.log(aUserName);
                ats[i] = aUserName;
            }
            console.log(ats);
            return ats;
        }
        else {
            console.log("不存在合法的@");
            return false;
        }
    };
    CreateTopic.prototype.onTitleChange = function (title) {
        this.setState({ title: title });
    };
    CreateTopic.prototype.onUbbChange = function (content) {
        this.setState({ content: content });
    };
    CreateTopic.prototype.render = function () {
        var mode = this.state.mode;
        var url = "/list/" + this.match.params.boardId + "/normal";
        if (mode === 0) {
            return React.createElement("div", { className: "createTopic" },
                React.createElement(Category, { url: url, boardName: this.state.boardName }),
                React.createElement(InputTitle, { boardId: this.match.params.boardId, tags: this.state.tags, onChange: this.onTitleChange.bind(this) }),
                React.createElement("div", { className: "createTopicType" },
                    React.createElement("div", { className: "createTopicListName" }, "\u53D1\u5E16\u7C7B\u578B"),
                    React.createElement("input", { type: "radio", checked: true, name: "type", value: "normal" }),
                    " \u666E\u901A",
                    React.createElement("input", { type: "radio", name: "type", value: "academic" }),
                    " \u5B66\u672F\u4FE1\u606F",
                    React.createElement("div", { style: { color: 'rgb(255,0,0)' } }, "\uFF08\u6D3B\u52A8\u5E16\u548C\u5B66\u672F\u8D34\u8BF7\u9009\u62E9\u6B63\u786E\u7684\u53D1\u5E16\u7C7B\u578B\uFF09")),
                React.createElement("div", { className: "createTopicOption" },
                    React.createElement("div", { className: "createTopicListName" }, "\u9009\u9879"),
                    React.createElement("input", { type: "radio", checked: true, name: "option", value: "all" }),
                    "\u56DE\u590D\u6240\u6709\u4EBA\u53EF\u89C1",
                    React.createElement("input", { type: "radio", name: "option", value: "host" }),
                    "\u56DE\u590D\u4EC5\u697C\u4E3B\u53EF\u89C1",
                    React.createElement("input", { type: "radio", name: "option", value: "special" }),
                    "\u56DE\u590D\u4EC5\u7279\u5B9A\u7528\u6237\u53EF\u89C1"),
                React.createElement("div", { className: "createTopicContent" },
                    React.createElement("div", { className: "createTopicListName" }, "\u4E3B\u9898\u5185\u5BB9"),
                    React.createElement("div", { id: "post-topic-changeMode", onClick: this.changeEditor, className: "button blue", style: { width: "13.5rem" } }, "\u5207\u6362\u5230Markdown\u7F16\u8F91\u5668")),
                React.createElement(UbbEditor_1.UbbEditor, { update: this.update, value: this.state.content }),
                React.createElement("div", { className: "row", style: { justifyContent: "center" } },
                    React.createElement("div", { id: "post-topic-button", onClick: this.sendUbbTopic.bind(this), className: "button blue", style: { marginTop: "1.25rem", marginBottom: "1.25rem", width: "4.5rem", letterSpacing: "0.3125rem", alignSelf: "center" } }, "\u53D1\u5E16")));
        }
        else {
            return React.createElement("div", { className: "createTopic" },
                React.createElement(Category, { url: url, boardName: this.state.boardName }),
                React.createElement(InputTitle, { boardId: this.match.params.boardId, tags: this.state.tags, onChange: this.onTitleChange.bind(this) }),
                React.createElement("div", { className: "createTopicType" },
                    React.createElement("div", { className: "createTopicListName" }, "\u53D1\u5E16\u7C7B\u578B"),
                    React.createElement("input", { type: "radio", checked: true, name: "type", value: "normal" }),
                    " \u666E\u901A",
                    React.createElement("input", { type: "radio", name: "type", value: "academic" }),
                    " \u5B66\u672F\u4FE1\u606F",
                    React.createElement("div", { style: { color: 'rgb(255,0,0)' } }, "\uFF08\u6D3B\u52A8\u5E16\u548C\u5B66\u672F\u8D34\u8BF7\u9009\u62E9\u6B63\u786E\u7684\u53D1\u5E16\u7C7B\u578B\uFF09")),
                React.createElement("div", { className: "createTopicOption" },
                    React.createElement("div", { className: "createTopicListName" }, "\u9009\u9879"),
                    React.createElement("input", { type: "radio", checked: true, name: "option", value: "all" }),
                    "\u56DE\u590D\u6240\u6709\u4EBA\u53EF\u89C1",
                    React.createElement("input", { type: "radio", name: "option", value: "host" }),
                    "\u56DE\u590D\u4EC5\u697C\u4E3B\u53EF\u89C1",
                    React.createElement("input", { type: "radio", name: "option", value: "special" }),
                    "\u56DE\u590D\u4EC5\u7279\u5B9A\u7528\u6237\u53EF\u89C1"),
                React.createElement("div", { className: "createTopicContent" },
                    React.createElement("div", { className: "createTopicListName" }, "\u4E3B\u9898\u5185\u5BB9"),
                    React.createElement("div", { id: "post-topic-changeMode", onClick: this.changeEditor, className: "button blue", style: { width: "13.5rem", letterSpacing: "0.3125rem" } }, "\u5207\u6362\u5230UBB\u7F16\u8F91\u5668")),
                React.createElement(InputMdContent, { onChange: this.sendMdTopic.bind(this), ready: this.state.ready }));
        }
    };
    return CreateTopic;
}(RouteComponent));
exports.CreateTopic = CreateTopic;
var Category = /** @class */ (function (_super) {
    __extends(Category, _super);
    function Category(props) {
        var _this = _super.call(this, props) || this;
        _this.state = ({
            url: "",
            boardName: ""
        });
        return _this;
    }
    //在子组件中，this.props的值不会自动更新，每当父组件的传值发生变化时，需要在子组件的的componentWillReceiveProps中去手动更新
    Category.prototype.componentWillReceiveProps = function (nextProps) {
        this.setState({
            url: nextProps.url,
            boardName: nextProps.boardName
        });
    };
    Category.prototype.render = function () {
        return React.createElement("div", { className: "row", style: { alignItems: "baseline", justifyContent: "flex-start", color: "grey", fontSize: "0.75rem", marginBottom: "1rem" } },
            React.createElement("a", { style: { color: "grey", fontSize: "1rem", marginRight: "0.5rem" }, href: "/" }, "\u9996\u9875"),
            React.createElement("i", { className: "fa fa-chevron-right" }),
            React.createElement("a", { style: { color: "grey", fontSize: "1rem", marginLeft: "0.5rem", marginRight: "0.5rem" }, href: this.state.url }, this.state.boardName),
            React.createElement("i", { className: "fa fa-chevron-right" }),
            React.createElement("div", { style: { color: "grey", fontSize: "1rem", marginLeft: "0.5rem", marginRight: "0.5rem" } }, "\u53D1\u8868\u4E3B\u9898"));
    };
    return Category;
}(React.Component));
exports.Category = Category;
//  <div id="post-topic-button" onClick={this.sendMdTopic.bind(this)} className="button blue" style={{ marginTop: "1.25rem", width: "4.5rem", letterSpacing: "0.3125rem", alignSelf: "center" }}>发帖</div>
var InputTitle = /** @class */ (function (_super) {
    __extends(InputTitle, _super);
    function InputTitle(props) {
        var _this = _super.call(this, props) || this;
        _this.state = ({ title: "" });
        return _this;
    }
    InputTitle.prototype.handleTitleChange = function (event) {
        this.props.onChange(event.target.value);
        this.setState({ title: event.target.value });
    };
    InputTitle.prototype.componentWillReceiveProps = function (newProps) {
        var tags = newProps.tags;
        var tagsNum = tags.length;
    };
    InputTitle.prototype.render = function () {
        return React.createElement("div", { className: "createTopicTitle" },
            React.createElement("div", { className: "createTopicListName" }, "\u4E3B\u9898\u6807\u9898"),
            React.createElement("div", { className: "createTopicListName" }, "\u6807\u7B7E1"),
            React.createElement("div", { className: "createTopicListName" }, "\u6807\u7B7E2"),
            React.createElement("input", { value: this.state.title, placeholder: "请输入新主题的标题", onChange: this.handleTitleChange.bind(this) }));
    };
    return InputTitle;
}(React.Component));
exports.InputTitle = InputTitle;
var InputMdContent = /** @class */ (function (_super) {
    __extends(InputMdContent, _super);
    function InputMdContent(props) {
        var _this = _super.call(this, props) || this;
        _this.state = ({ content: "" });
        return _this;
    }
    InputMdContent.prototype.componentDidMount = function () {
        var fileUrl = Utility.getApiUrl + "/file";
        editormd.emoji.path = '/images/emoji/';
        Constants.testEditor = editormd("test-editormd", {
            width: "100%",
            height: 640,
            path: "/scripts/lib/editor.md/lib/",
            saveHTMLToTextarea: false,
            imageUpload: false,
            imageFormats: ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
            imageUploadURL: fileUrl,
            emoji: true,
            toolbarIcons: function () {
                return [
                    "undo", "redo", "|", "emoji",
                    "bold", "del", "italic", "quote", "|",
                    "h1", "h2", "h3", "h4", "|",
                    "list-ul", "list-ol", "hr", "|",
                    "link", "image", "code", "table", "html-entities",
                ];
            },
            toolbarCustomIcons: {
                file: "<input type='file' id='upload-files' style=' display: none ' onchange='uploadEvent()' />",
                faicon: "<i class='fa fa-upload' onclick='clickUploadIcon()' style='cursor: pointer '></i>"
            },
        });
    };
    InputMdContent.prototype.send = function () {
        var content = Constants.testEditor.getMarkdown();
        this.props.onChange(content);
    };
    InputMdContent.prototype.render = function () {
        return React.createElement("div", { style: { width: "100%", display: "flex", flexDirection: "column" } },
            React.createElement("div", { id: "sendTopic" },
                React.createElement("form", null,
                    React.createElement("div", { id: "test-editormd", className: "editormd" },
                        React.createElement("textarea", { className: "editormd-markdown-textarea", name: "test-editormd-markdown-doc" }))),
                React.createElement("div", { className: "row", style: { justifyContent: "center", marginBottom: "1.25rem " } },
                    React.createElement("div", { id: "post-topic-button", className: "button blue", style: { marginTop: "1.25rem", width: "4.5rem", letterSpacing: "0.3125rem" }, onClick: this.send.bind(this) }, "\u53D1\u5E16"))));
    };
    return InputMdContent;
}(React.Component));
exports.InputMdContent = InputMdContent;


/***/ }),
/* 504 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var React = __webpack_require__(1);
var FocusTopicSingle_1 = __webpack_require__(117);
var Utility = __webpack_require__(2);
/**
 * 表示搜索结果的帖子列表
 */
var Search = /** @class */ (function (_super) {
    __extends(Search, _super);
    function Search(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            boardId: 0,
            boardName: '全站',
            words: [],
            data: [],
            from: 0,
            loading: true
        };
        _this.handleScroll = _this.handleScroll.bind(_this);
        return _this;
    }
    Search.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var searchInfo, newTopic;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        searchInfo = Utility.getStorage("searchInfo");
                        if (!!searchInfo) return [3 /*break*/, 1];
                        this.showNoResult();
                        this.setState({ loading: false });
                        return [3 /*break*/, 3];
                    case 1: return [4 /*yield*/, Utility.getSearchTopic(searchInfo.boardId, searchInfo.words, this.state.from, this.context.router)];
                    case 2:
                        newTopic = _a.sent();
                        //搜索结果为0
                        if (!newTopic || newTopic.length === 0) {
                            console.log("没有搜索结果");
                            this.showNoResult();
                            this.setState({ loading: false });
                        }
                        else {
                            //搜索结果小于20条，无法再获取新的了
                            if (newTopic.length < 20) {
                                this.setState({ boardId: searchInfo.boardId, boardName: searchInfo.boardName, words: searchInfo.words, data: newTopic, from: newTopic.length, loading: false });
                                $('#focus-topic-loading').addClass('displaynone');
                                $('#focus-topic-loaddone').removeClass('displaynone');
                            }
                            else {
                                this.setState({ boardId: searchInfo.boardId, boardName: searchInfo.boardName, words: searchInfo.words, data: newTopic, from: newTopic.length, loading: true });
                            }
                        }
                        _a.label = 3;
                    case 3:
                        //滚动条监听
                        document.addEventListener('scroll', this.handleScroll);
                        return [2 /*return*/];
                }
            });
        });
    };
    Search.prototype.handleScroll = function () {
        return __awaiter(this, void 0, void 0, function () {
            var newData, err_1, data, data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(Utility.isBottom() && this.state.loading)) return [3 /*break*/, 5];
                        /**
                        *发出第一条fetch请求前将this.state.loading设置为false，防止后面重复发送fetch请求
                        */
                        this.setState({ loading: false });
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, Utility.getSearchTopic(this.state.boardId, this.state.words, this.state.from, this.context.router)];
                    case 2:
                        newData = _a.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        err_1 = _a.sent();
                        /**
                        *如果出错，直接结束这次请求，同时将this.state.loading设置为true，后续才可以再次发送fetch请求
                        */
                        this.setState({ loading: true });
                        return [2 /*return*/];
                    case 4:
                        if (!newData) {
                            $('#focus-topic-loading').addClass('displaynone');
                            $('#focus-topic-loaddone').removeClass('displaynone');
                            this.setState({ loading: false });
                            return [2 /*return*/];
                        }
                        else {
                            //搜索结果小于20条，无法再获取新的了,添加新数据，this.state.loading设置为false，后续不可以再次发送fetch请求
                            if (newData.length < 20) {
                                $('#focus-topic-loading').addClass('displaynone');
                                $('#focus-topic-loaddone').removeClass('displaynone');
                                data = this.state.data.concat(newData);
                                this.setState({ data: data, from: data.length, loading: false });
                            }
                            else {
                                data = this.state.data.concat(newData);
                                this.setState({ data: data, from: data.length, loading: true });
                            }
                        }
                        _a.label = 5;
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    Search.prototype.showNoResult = function () {
        $('#focus-topic-area').addClass('displaynone');
        //$('#noResult').removeClass('displaynone');
        window.location.href = '/status/notfoundtopic';
    };
    Search.prototype.render = function () {
        return (React.createElement("div", { className: "focus-root" },
            React.createElement("div", { className: "focus" },
                React.createElement("div", { className: "focus-allNewTopic" },
                    React.createElement("i", { className: "fa fa-home", "aria-hidden": "true" }),
                    "\u641C\u7D22/",
                    this.state.boardName),
                React.createElement("div", { className: "focus-topic-area", id: "focus-topic-area" },
                    React.createElement("div", { className: "focus-topic-topicArea" }, this.state.data.map(coverFocusPost)),
                    React.createElement("div", { className: "focus-topic-loading", id: "focus-topic-loading" },
                        React.createElement("img", { src: "http://file.cc98.org/uploadfile/2017/12/20/6514723843.gif" })),
                    React.createElement("div", { className: "focus-topic-loaddone displaynone", id: "focus-topic-loaddone" }, " \u6CA1\u6709\u66F4\u591A\u5E16\u5B50\u5566~")),
                React.createElement("div", { id: "noResult", className: "noResult displaynone" }, "\u6CA1\u6709\u7B26\u5408\u6761\u4EF6\u7684\u641C\u7D22\u7ED3\u679C"))));
    };
    return Search;
}(React.Component));
exports.Search = Search;
function coverFocusPost(item) {
    return React.createElement(FocusTopicSingle_1.FocusTopicSingle, { title: item.title, hitCount: item.hitCount, id: item.id, boardId: item.boardId, boardName: item.boardName, replyCount: item.replyCount, userId: item.userId, userName: item.userName, portraitUrl: item.portraitUrl, time: item.time, likeCount: item.likeCount, dislikeCount: item.dislikeCount, fanCount: item.fanCount, lastPostUser: item.lastPostUser, lastPostTime: item.lastPostTime, tag1: item.tag1, tag2: item.tag2 });
}


/***/ }),
/* 505 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// A '.tsx' file enables JSX support in the TypeScript compiler, 
// for more information see the following page on the TypeScript wiki:
// https://github.com/Microsoft/TypeScript/wiki/JSX
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
/**
 * 表示我搜索到的版面列表区域
 */
var SearchBoard = /** @class */ (function (_super) {
    __extends(SearchBoard, _super);
    function SearchBoard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    SearchBoard.prototype.render = function () {
        var data = Utility.getStorage("searchBoardInfo");
        return (React.createElement("div", { className: "focus-root" },
            React.createElement("div", { className: "focus" },
                React.createElement("div", { className: "focus-title" },
                    React.createElement("i", { className: "fa fa-home", "aria-hidden": "true" }),
                    "\u641C\u7D22/\u7248\u9762"),
                React.createElement("div", { className: "focus-board-area" }, data.map(coverFocusBoard)))));
    };
    return SearchBoard;
}(React.Component));
exports.SearchBoard = SearchBoard;
function coverFocusBoard(item) {
    //点击版面名称会显示相应版面的帖子
    var boardUrl = "/list/" + item.id + "/normal/";
    return React.createElement("a", { href: boardUrl, target: "_blank" },
        React.createElement("div", { className: "focus-board" }, item.name));
}


/***/ }),
/* 506 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var UbbEditor_1 = __webpack_require__(85);
var Signin = /** @class */ (function (_super) {
    __extends(Signin, _super);
    function Signin(props) {
        var _this = _super.call(this, props) || this;
        _this.update = _this.update.bind(_this);
        _this.signin = _this.signin.bind(_this);
        _this.state = {
            signinInfo: { lastSignInCount: 0, lastSignInTime: 0 }, content: ""
        };
        return _this;
    }
    Signin.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var signinInfo;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Utility.getSigninInfo()];
                    case 1:
                        signinInfo = _a.sent();
                        this.setState({ signinInfo: signinInfo });
                        return [2 /*return*/];
                }
            });
        });
    };
    Signin.prototype.update = function (value) {
        this.setState({ content: value });
    };
    Signin.prototype.signin = function () {
        return __awaiter(this, void 0, void 0, function () {
            var signInMes, signInTopicId, topicInfo, count, page;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        Utility.signin(this.state.content);
                        return [4 /*yield*/, Utility.getGlobalConfig()];
                    case 1:
                        signInMes = _a.sent();
                        signInTopicId = signInMes.signInTopicId;
                        return [4 /*yield*/, Utility.getTopicInfo(signInTopicId)];
                    case 2:
                        topicInfo = _a.sent();
                        count = topicInfo.replyCount;
                        page = Utility.getTotalPageof10(count);
                        window.location.href = "/topic/" + signInTopicId + "#" + page;
                        this.setState({ content: "" });
                        return [2 /*return*/];
                }
            });
        });
    };
    Signin.prototype.render = function () {
        var info;
        if (this.state.signinInfo.hasSignedInToday) {
            info = React.createElement("div", null,
                React.createElement("div", { className: "row", style: { justifyContent: "center" } },
                    "\u4F60\u4E0A\u6B21\u7684\u7B7E\u5230\u65E5\u671F\u662F",
                    moment(this.state.signinInfo.lastSignInTime).format('YYYY-MM-DD HH:mm:ss')),
                React.createElement("div", { className: "row", style: { justifyContent: "center" } },
                    "\u4F60\u5DF2\u7ECF\u8FDE\u7EED\u7B7E\u5230\u4E86",
                    this.state.signinInfo.lastSignInCount,
                    "\u5929"));
        }
        else {
            info = React.createElement("div", { className: "column" },
                React.createElement("div", { className: "row" }, "\u4F60\u4ECA\u5929\u8FD8\u672A\u7B7E\u5230"),
                React.createElement("div", { style: { marginTop: "1.5rem" } },
                    React.createElement(UbbEditor_1.UbbEditor, { update: this.update, value: this.state.content, option: { height: 10 } }),
                    React.createElement("div", { className: "row", style: { justifyContent: "center", marginBottom: "1.25rem " } },
                        React.createElement("div", { id: "post-topic-button", onClick: this.signin, className: "button blue", style: { marginTop: "1.25rem", width: "6rem", height: "2rem", lineHeight: "2rem", letterSpacing: "0.3125rem" } }, "\u7B7E\u5230"))));
        }
        return React.createElement("div", { className: "column", style: { width: "1140px", fontFamily: "微软雅黑", padding: "2rem", backgroundColor: "#fff", marginBottom: "1rem", fontSize: "1rem" } },
            React.createElement("div", { className: "column", style: { width: "100%" } },
                React.createElement("div", { className: "row", style: { width: "100%", justifyContent: "center" } }, "\u8BBA\u575B\u7B7E\u5230"),
                React.createElement("div", { className: "row" }, "\u7B7E\u5230\u529F\u80FD\u662F CC98 \u8BBA\u575B\u63D0\u4F9B\u7684\u4E00\u9879\u5A31\u4E50\u529F\u80FD\u3002\u6BCF\u4E2A\u7528\u6237\u6BCF\u5929\u53EF\u4EE5\u7B7E\u5230\u4E00\u6B21\uFF0C\u5E76\u83B7\u5F97\u989D\u5916\u7684\u8BBA\u575B\u8D22\u5BCC\u503C\u5956\u52B1\u3002\u5982\u679C\u8FDE\u7EED\u591A\u65E5\u7B7E\u5230\uFF0C\u5219\u5956\u52B1\u4F1A\u4E0D\u65AD\u589E\u52A0\u3002\u76EE\u524D\u8D22\u5BCC\u503C\u7684\u5956\u52B1\u60C5\u51B5\u5982\u4E0B\u8868\u6240\u793A\uFF1A"),
                React.createElement("div", { className: "column", style: { marginLeft: "2rem" } },
                    React.createElement("div", { className: "row" }, "\u7B2C 1 \u5929\uFF1A 600 \u5230 1200 \u8BBA\u575B\u8D22\u5BCC\u503C"),
                    React.createElement("div", { className: "row" }, "\u7B2C 2 \u5929\uFF1A 700 \u5230 1400 \u8BBA\u575B\u8D22\u5BCC\u503C"),
                    React.createElement("div", { className: "row" }, "\u7B2C 3 \u5929\uFF1A 800 \u5230 1600 \u8BBA\u575B\u8D22\u5BCC\u503C"),
                    React.createElement("div", { className: "row" }, "\u7B2C 4 \u5929\uFF1A 900 \u5230 1800 \u8BBA\u575B\u8D22\u5BCC\u503C"),
                    React.createElement("div", { className: "row" }, "\u7B2C 5 \u5929\u53CA\u4EE5\u540E\uFF1A 1000 \u5230 2000 \u8BBA\u575B\u8D22\u5BCC\u503C"))),
            info);
    };
    return Signin;
}(React.Component));
exports.Signin = Signin;


/***/ }),
/* 507 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Announcement_1 = __webpack_require__(508);
var Advertisement_1 = __webpack_require__(509);
var SiteManage = /** @class */ (function (_super) {
    __extends(SiteManage, _super);
    function SiteManage() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    SiteManage.prototype.render = function () {
        return (React.createElement("div", { style: { backgroundColor: 'white' } },
            React.createElement("p", null, "\u5168\u7AD9\u7BA1\u7406"),
            React.createElement(Announcement_1.Announcement, null),
            React.createElement(Advertisement_1.default, null)));
    };
    return SiteManage;
}(React.Component));
exports.SiteManage = SiteManage;


/***/ }),
/* 508 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var UbbContainer_1 = __webpack_require__(15);
var AnnouncementState = /** @class */ (function () {
    function AnnouncementState() {
    }
    return AnnouncementState;
}());
var Announcement = /** @class */ (function (_super) {
    __extends(Announcement, _super);
    function Announcement(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            announcement: '加载中',
            info: ''
        };
        _this.changeSiteAnnouncement = _this.changeSiteAnnouncement.bind(_this);
        return _this;
    }
    Announcement.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var url, res, data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        url = '/config/global';
                        return [4 /*yield*/, Utility.cc98Fetch(url)];
                    case 1:
                        res = _a.sent();
                        return [4 /*yield*/, res.json()];
                    case 2:
                        data = _a.sent();
                        this.setState({
                            announcement: data.announcement
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    Announcement.prototype.changeSiteAnnouncement = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            var url, token, announcement, headers, res;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        url = '/config/global/announcement';
                        return [4 /*yield*/, Utility.getToken()];
                    case 1:
                        token = _a.sent();
                        announcement = this.state.announcement;
                        headers = new Headers();
                        headers.append('Authorization', token);
                        headers.append('Content-Type', 'application/json');
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                method: 'PUT',
                                headers: headers,
                                body: JSON.stringify({ announcement: announcement })
                            })];
                    case 2:
                        res = _a.sent();
                        if (res.status === 200) {
                            this.setState({ info: '修改全站公告成功' });
                            setTimeout(function () {
                                _this.setState({ info: '' });
                            }, 1000);
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    Announcement.prototype.render = function () {
        var _this = this;
        return (React.createElement("div", null,
            React.createElement("p", { style: { height: '2rem' } }, this.state.info),
            React.createElement("div", null,
                React.createElement("p", null,
                    "\u5168\u7AD9\u516C\u544A",
                    React.createElement("button", { type: "button", onClick: this.changeSiteAnnouncement }, "\u63D0\u4EA4\u4FEE\u6539")),
                React.createElement("textarea", { style: { width: '1140px', height: '20rem', resize: 'none', boxSizing: 'border-box' }, onChange: function (e) { _this.setState({ announcement: e.target.value }); }, value: this.state.announcement }),
                React.createElement(UbbContainer_1.UbbContainer, { code: this.state.announcement }))));
    };
    return Announcement;
}(React.Component));
exports.Announcement = Announcement;


/***/ }),
/* 509 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility_1 = __webpack_require__(2);
var PostForumIndexColumnInfoType = [
    '推荐阅读',
    '推荐功能',
    '校园新闻',
    '广告'
];
var urls = [
    '/index/column/recommandationreading',
    '/index/column/recommandationfunction',
    '/index/column/schoolnews',
    '/config/global/advertisement'
];
var PostForumIndexColumnInfo = /** @class */ (function () {
    function PostForumIndexColumnInfo() {
    }
    return PostForumIndexColumnInfo;
}());
var State = /** @class */ (function () {
    function State() {
    }
    return State;
}());
var default_1 = /** @class */ (function (_super) {
    __extends(default_1, _super);
    function default_1(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            info: '',
            data: [],
            type: 0
        };
        _this.getInfo = _this.getInfo.bind(_this);
        _this.putCurData = _this.putCurData.bind(_this);
        _this.handleTdChange = _this.handleTdChange.bind(_this);
        _this.add = _this.add.bind(_this);
        return _this;
    }
    default_1.prototype.getInfo = function (url) {
        return __awaiter(this, void 0, void 0, function () {
            var token, headers, res, data, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.setState({
                            type: urls.indexOf(url) + 1,
                            data: []
                        });
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 5, , 6]);
                        return [4 /*yield*/, Utility_1.getToken()];
                    case 2:
                        token = _a.sent();
                        headers = new Headers();
                        headers.append('Authorization', token);
                        return [4 /*yield*/, Utility_1.cc98Fetch(url + '/all', { headers: headers })];
                    case 3:
                        res = _a.sent();
                        return [4 /*yield*/, res.json()];
                    case 4:
                        data = _a.sent();
                        this.setState({ data: data });
                        return [3 /*break*/, 6];
                    case 5:
                        e_1 = _a.sent();
                        this.setState({
                            info: e_1.message
                        });
                        return [3 /*break*/, 6];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    default_1.prototype.handleTdChange = function (key, value, index) {
        var _this = this;
        this.setState(function (prevState) {
            var data = prevState.data;
            data[index] = __assign({}, data[index], (_a = {}, _a[key] = value, _a));
            console.log(data);
            _this.setState({ data: data });
            var _a;
        });
    };
    default_1.prototype.putCurData = function (index) {
        return __awaiter(this, void 0, void 0, function () {
            var url, method, token, headers, res, e_2;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.state.data[index].isNew) {
                            url = '/index/column/';
                            method = 'POST';
                        }
                        else {
                            url = '/index/column/' + this.state.data[index].id;
                            method = 'PUT';
                        }
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 4, , 5]);
                        return [4 /*yield*/, Utility_1.getToken()];
                    case 2:
                        token = _a.sent();
                        headers = new Headers();
                        headers.append('Authorization', token);
                        headers.append('Content-Type', 'application/json');
                        return [4 /*yield*/, Utility_1.cc98Fetch(url, {
                                method: method,
                                headers: headers,
                                body: JSON.stringify(this.state.data[index])
                            })];
                    case 3:
                        res = _a.sent();
                        if (res.status === 200) {
                            this.setState({
                                info: '修改成功'
                            });
                        }
                        else {
                            throw new Error(res.status.toString());
                        }
                        return [3 /*break*/, 5];
                    case 4:
                        e_2 = _a.sent();
                        this.setState({
                            info: e_2.message
                        });
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    default_1.prototype.add = function () {
        this.setState(function (prevState) {
            var newData = new PostForumIndexColumnInfo();
            newData.enable = true;
            newData.isNew = true;
            newData.type = prevState.type;
            return {
                data: prevState.data.concat([newData])
            };
        });
    };
    default_1.prototype.render = function () {
        var _this = this;
        return (React.createElement("div", null,
            React.createElement("p", null, "\u81EA\u5B9A\u4E49\u680F\u76EE"),
            React.createElement("button", { type: "button", disabled: this.state.type === 1, onClick: function () { return _this.getInfo(urls[0]); } }, "\u63A8\u8350\u9605\u8BFB"),
            React.createElement("button", { type: "button", disabled: this.state.type === 2, onClick: function () { return _this.getInfo(urls[1]); } }, "\u63A8\u8350\u529F\u80FD"),
            React.createElement("button", { type: "button", disabled: this.state.type === 3, onClick: function () { return _this.getInfo(urls[2]); } }, "\u6821\u56ED\u65B0\u95FB"),
            React.createElement("button", { type: "button", disabled: this.state.type === 4, onClick: function () { return _this.getInfo(urls[3]); } }, "\u5E7F\u544A"),
            this.state.type > 0 ? React.createElement("button", { type: "button", onClick: function () { return _this.add(); } }, "\u6DFB\u52A0") : null,
            this.state.data.length > 0 ?
                React.createElement("table", null,
                    React.createElement("tr", null,
                        React.createElement("th", null, "id"),
                        React.createElement("th", null, "type"),
                        React.createElement("th", null, "title"),
                        this.state.type === 1 ? React.createElement("th", null, "content") : null,
                        React.createElement("th", null, "url"),
                        this.state.type !== 3 ? React.createElement("th", null, "imageUrl") : null,
                        this.state.type === 1 || this.state.type === 2 ? React.createElement("th", null, "orderWeight") : null,
                        React.createElement("th", null, "enable"),
                        this.state.type === 4 ? React.createElement("th", null, "days") : null,
                        this.state.type === 4 ? React.createElement("th", null, "expiredTime") : null,
                        React.createElement("th", null, "save")),
                    this.state.data.map(function (item, index) { return (React.createElement("tr", null,
                        React.createElement("td", null, item.id),
                        React.createElement("td", null, PostForumIndexColumnInfoType[item.type - 1]),
                        React.createElement("td", null,
                            React.createElement("input", { type: "text", onChange: function (e) { return _this.handleTdChange('title', e.target.value, index); }, value: item.title })),
                        _this.state.type === 1 ? React.createElement("td", null,
                            React.createElement("input", { type: "text", onChange: function (e) { return _this.handleTdChange('content', e.target.value, index); }, value: item.content })) : null,
                        React.createElement("td", null,
                            React.createElement("input", { type: "text", onChange: function (e) { return _this.handleTdChange('url', e.target.value, index); }, value: item.url })),
                        _this.state.type !== 3 ? React.createElement("td", null,
                            React.createElement("input", { type: "text", onChange: function (e) { return _this.handleTdChange('imageUrl', e.target.value, index); }, value: item.imageUrl })) : null,
                        _this.state.type === 1 || _this.state.type === 2 ? React.createElement("td", null,
                            React.createElement("input", { type: "number", onChange: function (e) { return _this.handleTdChange('orderWeight', Number.parseInt(e.target.value), index); }, value: item.orderWeight })) : null,
                        React.createElement("td", null,
                            React.createElement("input", { onClick: function (e) { return _this.handleTdChange('enable', e.target.checked, index); }, type: "checkbox", checked: item.enable })),
                        _this.state.type === 4 ? React.createElement("td", null,
                            React.createElement("input", { type: "number", onChange: function (e) { return _this.handleTdChange('days', Number.parseInt(e.target.value), index); }, value: item.days })) : null,
                        _this.state.type === 4 && item.expiredTime ? React.createElement("td", null, item.expiredTime.slice(0, 19).replace('T', ' ')) : null,
                        React.createElement("td", null,
                            React.createElement("button", { type: "button", onClick: function (e) { return _this.putCurData(index); } }, "\u4FDD\u5B58")))); })) : null,
            React.createElement("p", null, this.state.info)));
    };
    return default_1;
}(React.Component));
exports.default = default_1;


/***/ }),
/* 510 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var SignalR_1 = __webpack_require__(171);
var React = __webpack_require__(1);
var SignalRComponent = /** @class */ (function (_super) {
    __extends(SignalRComponent, _super);
    function SignalRComponent(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            name: ''
        };
        _this.handleSubmit = _this.handleSubmit.bind(_this);
        return _this;
    }
    SignalRComponent.prototype.handleSubmit = function () {
        SignalR_1.default.sendMessage(this.state.name);
    };
    SignalRComponent.prototype.render = function () {
        var _this = this;
        return React.createElement("div", null,
            React.createElement("p", null, "methodname: "),
            React.createElement("input", { type: "text", id: "methodName", onChange: function (e) { return _this.setState({ name: e.target.value }); }, value: this.state.name }),
            React.createElement("button", { type: "button", onClick: this.handleSubmit }, "submit"));
    };
    return SignalRComponent;
}(React.Component));
exports.SignalRComponent = SignalRComponent;


/***/ }),
/* 511 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(1);
var Utility = __webpack_require__(2);
var $ = __webpack_require__(35);
var react_router_dom_1 = __webpack_require__(8);
var RouteComponent_1 = __webpack_require__(84);
var UbbEditor_1 = __webpack_require__(85);
var Constant_1 = __webpack_require__(83);
var Edit = /** @class */ (function (_super) {
    __extends(Edit, _super);
    function Edit(props) {
        var _this = _super.call(this, props) || this;
        _this.update = _this.update.bind(_this);
        _this.changeEditor = _this.changeEditor.bind(_this);
        _this.sendMdTopic = _this.sendMdTopic.bind(_this);
        _this.sendUbbTopic = _this.sendUbbTopic.bind(_this);
        _this.editUBB = _this.editUBB.bind(_this);
        _this.state = ({
            tags: [], boardName: "", ready: false, mode: 0, content: "", title: "", postInfo: { floor: 0, title: "", content: "", contentType: 0 }, tag1: "", tag2: ""
        });
        return _this;
    }
    Edit.prototype.send = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                if (this.match.params.mode === 'post') {
                }
                else {
                }
                return [2 /*return*/];
            });
        });
    };
    Edit.prototype.componentDidMount = function () {
        return __awaiter(this, void 0, void 0, function () {
            var mode, id, token, headers, url, response, data, _a, boardName, tags;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        mode = this.match.params.mode;
                        id = this.match.params.id;
                        return [4 /*yield*/, Utility.getToken()];
                    case 1:
                        token = _b.sent();
                        headers = new Headers();
                        headers.append("Authorization", token);
                        _a = mode;
                        switch (_a) {
                            case 'postTopic': return [3 /*break*/, 2];
                            case 'edit': return [3 /*break*/, 6];
                        }
                        return [3 /*break*/, 9];
                    case 2:
                        url = "/Board/" + id;
                        return [4 /*yield*/, Utility.cc98Fetch(url, { headers: headers })];
                    case 3:
                        response = _b.sent();
                        return [4 /*yield*/, response.json()];
                    case 4:
                        data = _b.sent();
                        boardName = data.name;
                        return [4 /*yield*/, Utility.getBoardTag(id)];
                    case 5:
                        tags = _b.sent();
                        this.setState({ boardName: boardName, tags: tags });
                        return [3 /*break*/, 9];
                    case 6:
                        url = "/post/" + id + "/original";
                        return [4 /*yield*/, Utility.cc98Fetch(url, { headers: headers })];
                    case 7:
                        response = _b.sent();
                        return [4 /*yield*/, response.json()];
                    case 8:
                        data = _b.sent();
                        if (data.contentType === 0) {
                            this.setState({ postInfo: data, content: data.content });
                        }
                        else
                            this.setState({ postInfo: data });
                        return [3 /*break*/, 9];
                    case 9: return [2 /*return*/];
                }
            });
        });
    };
    Edit.prototype.ready = function () {
        this.setState({ ready: true });
    };
    Edit.prototype.changeEditor = function () {
        if (this.state.mode === 0) {
            this.setState({ mode: 1 });
        }
        else {
            this.setState({ mode: 0 });
        }
    };
    Edit.prototype.update = function (value) {
        this.setState({ content: value });
    };
    Edit.prototype.sendMdTopic = function () {
        return __awaiter(this, void 0, void 0, function () {
            var tag1Id, tag2Id, url, c, content, contentJson, token, myHeaders, mes, topicId, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 10, , 11]);
                        tag1Id = void 0, tag2Id = void 0;
                        url = "/board/" + this.match.params.id + "/topic";
                        c = Constant_1.Constants.testEditor.getMarkdown();
                        content = void 0;
                        if (!(this.state.tag1 && !this.state.tag2)) return [3 /*break*/, 2];
                        return [4 /*yield*/, Utility.getTagIdbyName(this.state.tag1)];
                    case 1:
                        tag1Id = _a.sent();
                        content = {
                            content: c,
                            contentType: 1,
                            title: this.state.title,
                            tag1: tag1Id
                        };
                        return [3 /*break*/, 6];
                    case 2:
                        if (!this.state.tag2) return [3 /*break*/, 5];
                        return [4 /*yield*/, Utility.getTagIdbyName(this.state.tag1)];
                    case 3:
                        tag1Id = _a.sent();
                        return [4 /*yield*/, Utility.getTagIdbyName(this.state.tag2)];
                    case 4:
                        tag2Id = _a.sent();
                        content = {
                            content: c,
                            contentType: 1,
                            title: this.state.title,
                            tag1: tag1Id,
                            tag2: tag2Id
                        };
                        return [3 /*break*/, 6];
                    case 5:
                        content = {
                            content: c,
                            contentType: 1,
                            title: this.state.title
                        };
                        _a.label = 6;
                    case 6:
                        contentJson = JSON.stringify(content);
                        return [4 /*yield*/, Utility.getToken()];
                    case 7:
                        token = _a.sent();
                        myHeaders = new Headers();
                        myHeaders.append("Authorization", token);
                        myHeaders.append("Content-Type", 'application/json');
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                method: 'POST',
                                headers: myHeaders,
                                body: contentJson
                            })];
                    case 8:
                        mes = _a.sent();
                        if (mes.status === 402) {
                            alert("请输入内容");
                        }
                        return [4 /*yield*/, mes.text()];
                    case 9:
                        topicId = _a.sent();
                        this.props.history.push("/topic/" + topicId);
                        return [3 /*break*/, 11];
                    case 10:
                        e_1 = _a.sent();
                        console.log("Error");
                        console.log(e_1);
                        return [3 /*break*/, 11];
                    case 11: return [2 /*return*/];
                }
            });
        });
    };
    Edit.prototype.sendUbbTopic = function () {
        return __awaiter(this, void 0, void 0, function () {
            var url, content, tag1Id, tag2Id, contentJson, token, myHeaders, response, topicId, atUsers, atUsersJSON, url2, myHeaders2, response2;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        url = "/board/" + this.match.params.id + "/topic";
                        console.log("state");
                        console.log(this.state.tag1);
                        console.log(this.state.tag2);
                        if (!(this.state.tag1 && !this.state.tag2)) return [3 /*break*/, 2];
                        return [4 /*yield*/, Utility.getTagIdbyName(this.state.tag1)];
                    case 1:
                        tag1Id = _a.sent();
                        content = {
                            content: this.state.content,
                            contentType: 0,
                            title: this.state.title,
                            tag1: tag1Id
                        };
                        return [3 /*break*/, 6];
                    case 2:
                        if (!this.state.tag2) return [3 /*break*/, 5];
                        return [4 /*yield*/, Utility.getTagIdbyName(this.state.tag1)];
                    case 3:
                        tag1Id = _a.sent();
                        return [4 /*yield*/, Utility.getTagIdbyName(this.state.tag2)];
                    case 4:
                        tag2Id = _a.sent();
                        content = {
                            content: this.state.content,
                            contentType: 0,
                            title: this.state.title,
                            tag1: tag1Id,
                            tag2: tag2Id
                        };
                        return [3 /*break*/, 6];
                    case 5:
                        content = {
                            content: this.state.content,
                            contentType: 0,
                            title: this.state.title
                        };
                        _a.label = 6;
                    case 6:
                        contentJson = JSON.stringify(content);
                        return [4 /*yield*/, Utility.getToken()];
                    case 7:
                        token = _a.sent();
                        myHeaders = new Headers();
                        myHeaders.append("Authorization", token);
                        myHeaders.append("Content-Type", 'application/json');
                        return [4 /*yield*/, Utility.cc98Fetch(url, {
                                method: 'POST',
                                headers: myHeaders,
                                body: contentJson
                            })];
                    case 8:
                        response = _a.sent();
                        return [4 /*yield*/, response.text()];
                    case 9:
                        topicId = _a.sent();
                        atUsers = this.atHanderler(this.state.content);
                        console.log(atUsers);
                        if (!atUsers) return [3 /*break*/, 11];
                        atUsersJSON = JSON.stringify(atUsers);
                        url2 = "/notification/at?topicid=" + topicId;
                        myHeaders2 = new Headers();
                        myHeaders2.append("Content-Type", 'application/json');
                        myHeaders2.append("Authorization", token);
                        return [4 /*yield*/, Utility.cc98Fetch(url2, {
                                method: 'POST',
                                headers: myHeaders2,
                                body: atUsersJSON
                            })];
                    case 10:
                        response2 = _a.sent();
                        _a.label = 11;
                    case 11:
                        this.props.history.push("/topic/" + topicId);
                        return [2 /*return*/];
                }
            });
        });
    };
    /*
    *处理ubb模式下的发帖内容
    *如果存在合法的@，则会返回一个字符串数组，包含至多10个合法的被@用户的昵称，否则返回false
    */
    Edit.prototype.atHanderler = function (content) {
        var reg = new RegExp("@[^ \n]{1,10}?[ \n]", "gm");
        var reg2 = new RegExp("[^@ ]+");
        if (content.match(reg)) {
            var atNum = content.match(reg).length; //合法的@数
            if (atNum > 10)
                atNum = 10; //至多10个
            var ats = new Array();
            /*被临时抛弃的方法*/
            /*
            for (let i = 0; i < 10; i++) {
                let anAt = reg.exec(content)[0];
                console.log(anAt);
                let aUserName = reg2.exec(anAt)[0];
                console.log(aUserName);
            }
            */
            for (var i = 0; i < atNum; i++) {
                var anAt = content.match(reg)[i];
                console.log(anAt);
                var aUserName = reg2.exec(anAt)[0];
                console.log(aUserName);
                ats[i] = aUserName;
            }
            console.log(ats);
            return ats;
        }
        else {
            console.log("不存在合法的@");
            return false;
        }
    };
    Edit.prototype.editUBB = function () {
        return __awaiter(this, void 0, void 0, function () {
            var url, content, body, token, headers, response, floor, pageFloor, page, redirectUrl;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        url = "/post/" + this.match.params.id;
                        content = {
                            content: this.state.content,
                            contentType: 0,
                            title: this.state.title
                        };
                        body = JSON.stringify(content);
                        return [4 /*yield*/, Utility.getToken()];
                    case 1:
                        token = _a.sent();
                        return [4 /*yield*/, Utility.formAuthorizeHeader()];
                    case 2:
                        headers = _a.sent();
                        headers.append("Content-Type", 'application/json');
                        return [4 /*yield*/, Utility.cc98Fetch(url, { method: "PUT", headers: headers, body: body })];
                    case 3:
                        response = _a.sent();
                        floor = this.state.postInfo.floor;
                        pageFloor = floor % 10 === 0 ? 10 : floor % 10;
                        page = floor % 10 === 0 ? floor / 10 : (floor - floor % 10) / 10 + 1;
                        redirectUrl = "/topic/" + this.state.postInfo.topicId + "/" + page + "#" + pageFloor;
                        this.props.history.push(redirectUrl);
                        return [2 /*return*/];
                }
            });
        });
    };
    Edit.prototype.editMd = function () {
        return __awaiter(this, void 0, void 0, function () {
            var url, c, content, body, token, headers, response, floor, pageFloor, page, redirectUrl;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        url = "/post/" + this.match.params.id;
                        c = Constant_1.Constants.testEditor.getMarkdown();
                        Constant_1.Constants.testEditor.setMarkdown("");
                        content = {
                            content: c,
                            contentType: 1,
                            title: this.state.title
                        };
                        body = JSON.stringify(content);
                        return [4 /*yield*/, Utility.getToken()];
                    case 1:
                        token = _a.sent();
                        return [4 /*yield*/, Utility.formAuthorizeHeader()];
                    case 2:
                        headers = _a.sent();
                        headers.append("Content-Type", 'application/json');
                        return [4 /*yield*/, Utility.cc98Fetch(url, { method: "PUT", headers: headers, body: body })];
                    case 3:
                        response = _a.sent();
                        floor = this.state.postInfo.floor;
                        pageFloor = floor % 10 === 0 ? 10 : floor % 10;
                        page = floor % 10 === 0 ? floor / 10 : (floor - floor % 10) / 10 + 1;
                        redirectUrl = "/topic/" + this.state.postInfo.topicId + "/" + page + "#" + pageFloor;
                        this.props.history.push(redirectUrl);
                        return [2 /*return*/];
                }
            });
        });
    };
    Edit.prototype.onTitleChange = function (title, tag1, tag2) {
        this.setState({ title: title, tag1: tag1, tag2: tag2 });
    };
    Edit.prototype.onUbbChange = function (content) {
        this.setState({ content: content });
    };
    Edit.prototype.render = function () {
        var mode = this.match.params.mode;
        var id = this.match.params.id;
        var url = "";
        var editor;
        var titleInput = null;
        if (mode === "postTopic") {
            titleInput = React.createElement(InputTitle, { boardId: id, tags: this.state.tags, onChange: this.onTitleChange.bind(this), title: this.state.postInfo.title });
            if (this.state.mode === 0) {
                editor = React.createElement("div", null,
                    React.createElement("div", { className: "createTopicContent" },
                        React.createElement("div", { className: "createTopicListName" }, "\u4E3B\u9898\u5185\u5BB9"),
                        React.createElement("div", { id: "post-topic-changeMode", onClick: this.changeEditor, className: "button blue", style: { width: "16rem", letterSpacing: "0.3125rem", fontSize: "1rem", height: "2rem", lineHeight: "2rem" } }, "\u5207\u6362\u5230Markdown\u7F16\u8F91\u5668")),
                    React.createElement(UbbEditor_1.UbbEditor, { update: this.update, value: this.state.content }),
                    React.createElement("div", { className: "row", style: { justifyContent: "center" } },
                        React.createElement("div", { id: "post-topic-button", onClick: this.sendUbbTopic.bind(this), className: "button blue", style: { marginTop: "1.25rem", marginBottom: "1.25rem", width: "4.5rem", letterSpacing: "0.3125rem", alignSelf: "center" } }, "\u53D1\u5E16")));
            }
            else {
                editor = React.createElement("div", null,
                    React.createElement("div", { className: "createTopicContent" },
                        React.createElement("div", { className: "createTopicListName" }, "\u4E3B\u9898\u5185\u5BB9"),
                        React.createElement("div", { id: "post-topic-changeMode", onClick: this.changeEditor, className: "button blue", style: { width: "16rem", letterSpacing: "0.3125rem", fontSize: "1rem", height: "2rem", lineHeight: "2rem" } }, "\u5207\u6362\u5230UBB\u7F16\u8F91\u5668")),
                    React.createElement(InputMdContent, { postInfo: this.state.postInfo, onChange: this.sendMdTopic.bind(this), ready: this.state.ready, mode: this.match.params.mode }));
            }
        }
        else if (mode === "edit") {
            if (this.state.postInfo.contentType === 0) {
                editor = React.createElement("div", null,
                    React.createElement("div", { className: "createTopicContent" },
                        React.createElement("div", { className: "createTopicListName" }, "\u4E3B\u9898\u5185\u5BB9"),
                        React.createElement("div", { id: "post-topic-changeMode", onClick: this.changeEditor, className: "button blue", style: { width: "16rem", letterSpacing: "0.3125rem", fontSize: "1rem", height: "2rem", lineHeight: "2rem" } }, "\u5207\u6362\u5230Markdown\u7F16\u8F91\u5668")),
                    React.createElement(UbbEditor_1.UbbEditor, { update: this.update, value: this.state.content }),
                    React.createElement("div", { className: "row", style: { justifyContent: "center" } },
                        React.createElement("div", { id: "post-topic-button", onClick: this.editUBB, className: "button blue", style: { marginTop: "1.25rem", marginBottom: "1.25rem", width: "4.5rem", letterSpacing: "0.3125rem", alignSelf: "center" } }, "\u7F16\u8F91")));
            }
            else {
                editor = React.createElement("div", null,
                    React.createElement("div", { className: "createTopicContent" },
                        React.createElement("div", { className: "createTopicListName" }, "\u4E3B\u9898\u5185\u5BB9"),
                        React.createElement("div", { id: "post-topic-changeMode", onClick: this.changeEditor, className: "button blue", style: { width: "16rem", letterSpacing: "0.3125rem", fontSize: "1rem", height: "2rem", lineHeight: "2rem" } }, "\u5207\u6362\u5230UBB\u7F16\u8F91\u5668")),
                    React.createElement(InputMdContent, { postInfo: this.state.postInfo, onChange: this.editMd.bind(this), ready: this.state.ready, mode: this.match.params.mode }));
            }
            if (this.state.postInfo.floor === 1) {
                titleInput = React.createElement(InputTitle, { boardId: id, tags: this.state.tags, onChange: this.onTitleChange.bind(this), title: this.state.postInfo.title });
            }
        }
        return React.createElement("div", { className: "createTopic" },
            React.createElement(Category, { url: url, boardName: this.state.boardName }),
            titleInput,
            React.createElement(Type, null),
            React.createElement(Options, null),
            editor);
    };
    return Edit;
}(RouteComponent_1.RouteComponent));
exports.Edit = Edit;
/**
 * 编辑界面的导航器组件
 */
var Category = /** @class */ (function (_super) {
    __extends(Category, _super);
    function Category(props) {
        var _this = _super.call(this, props) || this;
        _this.state = ({
            url: "",
            boardName: ""
        });
        return _this;
    }
    //在子组件中，this.props的值不会自动更新，每当父组件的传值发生变化时，需要在子组件的的componentWillReceiveProps中去手动更新
    Category.prototype.componentWillReceiveProps = function (nextProps) {
        this.setState({
            url: nextProps.url,
            boardName: nextProps.boardName
        });
    };
    Category.prototype.render = function () {
        return React.createElement("div", { className: "row", style: { alignItems: "baseline", justifyContent: "flex-start", color: "grey", fontSize: "0.75rem", marginBottom: "1rem" } },
            React.createElement(react_router_dom_1.Link, { style: { color: "grey", fontSize: "1rem", marginRight: "0.5rem" }, to: "/" }, "\u9996\u9875"),
            React.createElement("i", { className: "fa fa-chevron-right" }),
            React.createElement(react_router_dom_1.Link, { style: { color: "grey", fontSize: "1rem", marginLeft: "0.5rem", marginRight: "0.5rem" }, to: this.state.url }, this.state.boardName),
            React.createElement("i", { className: "fa fa-chevron-right" }),
            React.createElement("div", { style: { color: "grey", fontSize: "1rem", marginLeft: "0.5rem", marginRight: "0.5rem" } }, "\u53D1\u8868\u4E3B\u9898"));
    };
    return Category;
}(React.Component));
exports.Category = Category;
/**
 * 编辑界面的标签
 * 用于特定版面的发主题/编辑主题
 * TODO:尚未完成
 */
var Tags = /** @class */ (function (_super) {
    __extends(Tags, _super);
    function Tags(props) {
        var _this = _super.call(this, props) || this;
        _this.state = ({});
        return _this;
    }
    Tags.prototype.render = function () {
        return React.createElement("div", null);
    };
    return Tags;
}(React.Component));
exports.Tags = Tags;
/**
 * 编辑界面的标题
 * 用于发主题/编辑主题
 * TODO:尚未完成
 */
var InputTitle = /** @class */ (function (_super) {
    __extends(InputTitle, _super);
    function InputTitle(props) {
        var _this = _super.call(this, props) || this;
        _this.state = ({ title: _this.props.title, tags: _this.props.tags });
        return _this;
    }
    InputTitle.prototype.handleTitleChange = function (event) {
        var tag1, tag2;
        if (this.state.tags.length === 0) {
            this.props.onChange(event.target.value, "", "");
            this.setState({ title: event.target.value });
        }
        else if (this.state.tags.length === 1) {
            tag1 = $(".tagBoxSelect").text();
            this.props.onChange(event.target.value, tag1, "");
            this.setState({ title: event.target.value });
        }
        else {
            tag1 = $(".tagBoxSelect").text();
            tag2 = $(".tagBoxSelect1").text();
            console.log("tag1=" + tag1);
            console.log("tag2=" + tag2);
            this.props.onChange(event.target.value, tag1, tag2);
            this.setState({ title: event.target.value });
        }
    };
    InputTitle.prototype.componentWillReceiveProps = function (newProps) {
        var tags = newProps.tags;
        var tagsNum = tags.length;
        console.log("new");
        console.log(newProps.tags);
        if (newProps.title && !this.state.title)
            this.setState({ title: newProps.title, tags: newProps.tags });
        else
            this.setState({ tags: newProps.tags });
    };
    InputTitle.prototype.componentDidUpdate = function () {
        var tagBoxSelect = $('.tagBoxSelect');
        var downArrow = $('.downArrow');
        var tagBoxSub = $('.tagBoxSub');
        var tagBoxLi = tagBoxSub.find('li');
        $(document).click(function () {
            tagBoxSub.css('display', 'none');
        });
        tagBoxSelect.click(function () {
            if (tagBoxSub.css('display') === 'block')
                tagBoxSub.css('display', 'none');
            else
                tagBoxSub.css('display', 'block');
            return false; //阻止事件冒泡
        });
        downArrow.click(function () {
            if (tagBoxSub.css('display') === 'block')
                tagBoxSub.css('display', 'none');
            else
                tagBoxSub.css('display', 'block');
            return false; //阻止事件冒泡
        });
        /*在一个对象上触发某类事件（比如单击onclick事件），如果此对象定义了此事件的处理程序，那么此事件就会调用这个处理程序，
        如果没有定义此事件处理程序或者事件返回true，那么这个事件会向这个对象的父级对象传播，从里到外，直至它被处理（父级对象所有同类事件都将被激活），
        或者它到达了对象层次的最顶层，即document对象（有些浏览器是window）。*/
        tagBoxLi.click(function () {
            tagBoxSelect.text($(this).text());
        });
        tagBoxLi.mouseover(function () {
            this.className = 'hover';
        });
        tagBoxLi.mouseout(function () {
            this.className = '';
        });
        var tagBoxSelect1 = $('.tagBoxSelect1');
        var downArrow1 = $('.downArrow1');
        var tagBoxSub1 = $('.tagBoxSub1');
        var tagBoxLi1 = tagBoxSub1.find('li');
        $(document).click(function () {
            tagBoxSub1.css('display', 'none');
        });
        tagBoxSelect1.click(function () {
            if (tagBoxSub1.css('display') === 'block')
                tagBoxSub1.css('display', 'none');
            else
                tagBoxSub1.css('display', 'block');
            return false; //阻止事件冒泡
        });
        downArrow1.click(function () {
            if (tagBoxSub1.css('display') === 'block')
                tagBoxSub1.css('display', 'none');
            else
                tagBoxSub1.css('display', 'block');
            return false; //阻止事件冒泡
        });
        /*在一个对象上触发某类事件（比如单击onclick事件），如果此对象定义了此事件的处理程序，那么此事件就会调用这个处理程序，
        如果没有定义此事件处理程序或者事件返回true，那么这个事件会向这个对象的父级对象传播，从里到外，直至它被处理（父级对象所有同类事件都将被激活），
        或者它到达了对象层次的最顶层，即document对象（有些浏览器是window）。*/
        tagBoxLi1.click(function () {
            tagBoxSelect1.text($(this).text());
        });
        tagBoxLi1.mouseover(function () {
            this.className = 'hover';
        });
        tagBoxLi1.mouseout(function () {
            this.className = '';
        });
    };
    InputTitle.prototype.generateTagOption = function (item) {
        return React.createElement("li", null, item.name);
    };
    InputTitle.prototype.render = function () {
        console.log($(".tagBoxSelect").text());
        console.log($(".tagBoxSelect1").text());
        var drop1 = null;
        var drop2 = null;
        if (this.state.tags.length > 0)
            drop1 = React.createElement("ul", { className: "tagBoxSub" }, this.state.tags[0].tags.map(this.generateTagOption));
        if (this.state.tags.length === 2)
            drop2 = React.createElement("ul", { className: "tagBoxSub1" }, this.state.tags[1].tags.map(this.generateTagOption));
        var tagInfo = null;
        if (this.state.tags.length == 2) {
            tagInfo = React.createElement("div", { className: "row" },
                React.createElement("div", { className: "column", style: { marginTop: "6.1rem", height: "8rem", zindex: "1000", marginLeft: "0.5rem" } },
                    React.createElement("div", { style: { display: "flex" } },
                        React.createElement("div", { className: "tagBoxSelect" }, "\u6807\u7B7E1"),
                        React.createElement("div", { className: "downArrow" },
                            React.createElement("img", { src: "/images/downArrow.png", width: "12", height: "12" }))),
                    drop1),
                React.createElement("div", { className: "column", style: { marginTop: "6.1rem", height: "8rem", zindex: "1000", marginLeft: "0.5rem" } },
                    React.createElement("div", { style: { display: "flex" } },
                        React.createElement("div", { className: "tagBoxSelect1" }, "\u6807\u7B7E2"),
                        React.createElement("div", { className: "downArrow1" },
                            React.createElement("img", { src: "/images/downArrow.png", width: "12", height: "12" }))),
                    drop2));
        }
        else if (this.state.tags.length == 1) {
            tagInfo = React.createElement("div", { className: "column", style: { marginTop: "6.1rem", height: "8rem", zindex: "1000", marginLeft: "0.5rem" } },
                React.createElement("div", { style: { display: "flex" } },
                    React.createElement("div", { className: "tagBoxSelect" }, "\u6807\u7B7E1"),
                    React.createElement("div", { className: "downArrow" },
                        React.createElement("img", { src: "/images/downArrow.png", width: "12", height: "12" }))),
                drop1);
        }
        return React.createElement("div", { className: "createTopicTitle" },
            React.createElement("div", { className: "createTopicListName" }, "\u4E3B\u9898\u6807\u9898"),
            tagInfo,
            React.createElement("input", { value: this.state.title, placeholder: "请输入新主题的标题", onChange: this.handleTitleChange.bind(this) }));
    };
    return InputTitle;
}(React.Component));
exports.InputTitle = InputTitle;
/**
 * 编辑界面的发帖类型
 * 用于发主题/编辑主题
 * TODO:尚未完成
 */
var Type = /** @class */ (function (_super) {
    __extends(Type, _super);
    function Type(props) {
        var _this = _super.call(this, props) || this;
        _this.state = ({});
        return _this;
    }
    Type.prototype.render = function () {
        return React.createElement("div", { className: "createTopicType" },
            React.createElement("div", { className: "createTopicListName" }, "\u53D1\u5E16\u7C7B\u578B"),
            React.createElement("input", { type: "radio", checked: true, name: "type", value: "normal" }),
            " \u666E\u901A",
            React.createElement("input", { type: "radio", name: "type", value: "academic" }),
            " \u5B66\u672F\u4FE1\u606F",
            React.createElement("div", { style: { color: 'rgb(255,0,0)' } }, "\uFF08\u6D3B\u52A8\u5E16\u548C\u5B66\u672F\u8D34\u8BF7\u9009\u62E9\u6B63\u786E\u7684\u53D1\u5E16\u7C7B\u578B)"));
    };
    return Type;
}(React.Component));
exports.Type = Type;
/**
 * 编辑界面的选项
 * 用于发主题/编辑主题
 * 所有版面仅管理员可以设置仅楼主可见
 * TODO:尚未完成
 */
var Options = /** @class */ (function (_super) {
    __extends(Options, _super);
    function Options(props) {
        var _this = _super.call(this, props) || this;
        _this.state = ({});
        return _this;
    }
    Options.prototype.render = function () {
        return React.createElement("div", { className: "createTopicOption" },
            React.createElement("div", { className: "createTopicListName" }, "\u9009\u9879"),
            React.createElement("input", { type: "radio", checked: true, name: "option", value: "all" }),
            "\u56DE\u590D\u6240\u6709\u4EBA\u53EF\u89C1",
            React.createElement("input", { type: "radio", name: "option", value: "host" }),
            "\u56DE\u590D\u4EC5\u697C\u4E3B\u53EF\u89C1",
            React.createElement("input", { type: "radio", name: "option", value: "special" }),
            "\u56DE\u590D\u4EC5\u7279\u5B9A\u7528\u6237\u53EF\u89C1");
    };
    return Options;
}(React.Component));
exports.Options = Options;
var InputMdContent = /** @class */ (function (_super) {
    __extends(InputMdContent, _super);
    function InputMdContent(props) {
        var _this = _super.call(this, props) || this;
        _this.state = ({ content: "" });
        return _this;
    }
    InputMdContent.prototype.componentDidMount = function () {
        var content = '234';
        if (this.props.postInfo.content) {
            console.log("edit markdown");
            content = this.props.postInfo.content;
            console.log(content);
        }
        editormd.emoji.path = '/images/emoji/';
        Constant_1.Constants.testEditor = editormd("testEditor", {
            width: "100%",
            height: 680,
            path: "/scripts/lib/editor.md/lib/",
            saveHTMLToTextarea: false,
            emoji: true,
            appendMarkdown: content,
            toolbarIcons: function () {
                return [
                    "undo", "redo", "|", "emoji",
                    "bold", "del", "italic", "quote", "|",
                    "h1", "h2", "h3", "h4", "|",
                    "list-ul", "list-ol", "hr", "|",
                    "link", "image", "code", "table", "html-entities",
                ];
            },
        });
        this.setState({});
    };
    InputMdContent.prototype.send = function () {
        var content = Constant_1.Constants.testEditor.getMarkdown();
        this.props.onChange(content);
    };
    InputMdContent.prototype.render = function () {
        return React.createElement("div", { style: { width: "100%", display: "flex", flexDirection: "column" } },
            React.createElement("div", { id: "sendTopic" },
                React.createElement("form", null,
                    React.createElement("div", { id: "testEditor", className: "editormd" },
                        React.createElement("textarea", { className: "editormd-markdown-textarea", name: "testEditor-markdown-doc" }))),
                React.createElement("div", { className: "row", style: { justifyContent: "center", marginBottom: "1.25rem " } },
                    React.createElement("div", { id: "post-topic-button", className: "button blue", style: { marginTop: "1.25rem", width: "4.5rem", letterSpacing: "0.3125rem" }, onClick: this.send.bind(this) }, this.props.mode === 'postTopic' ? "发帖" : "编辑"))));
    };
    return InputMdContent;
}(React.Component));
exports.InputMdContent = InputMdContent;
exports.ShowEdit = react_router_dom_1.withRouter(Edit);


/***/ }),
/* 512 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ })
/******/ ]);